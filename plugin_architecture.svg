<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <!-- Styles pour les Ã©lÃ©ments -->
    <style>
      .title { font-size: 18px; font-weight: bold; text-anchor: middle; }
      .subtitle { font-size: 12px; font-weight: bold; text-anchor: middle; }
      .component { font-size: 11px; text-anchor: middle; }
      .flow-label { font-size: 10px; font-weight: bold; text-anchor: middle; fill: #666; }
      .legend { font-size: 9px; }

      /* Couleurs des couches */
      .wordpress { fill: #e8f5e8; stroke: #4CAF50; }
      .bootstrap { fill: #fff3e0; stroke: #FF9800; }
      .admin { fill: #e3f2fd; stroke: #2196F3; }
      .core { fill: #f3e5f5; stroke: #9C27B0; }
      .managers { fill: #fff8e1; stroke: #F57C00; }
      .frontend { fill: #e8f5e8; stroke: #4CAF50; }
      .build { fill: #fce4ec; stroke: #E91E63; }
      .storage { fill: #f9fbe7; stroke: #8BC34A; }
      .container { fill: #f5f5f5; stroke: #666666; }

      /* FlÃ¨ches */
      .arrow { fill: #666; stroke: #666; stroke-width: 1; }
      .dashed-arrow { fill: none; stroke: #666; stroke-width: 2; stroke-dasharray: 5,5; }
      .ajax-arrow { fill: none; stroke: #FF5722; stroke-width: 2; stroke-dasharray: 5,5; }
      .cache-arrow { fill: none; stroke: #9C27B0; stroke-width: 2; stroke-dasharray: 5,5; }
    </style>

    <!-- DÃ©finition des marqueurs de flÃ¨ches -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow" />
    </marker>
  </defs>

  <!-- Titre principal -->
  <rect x="20" y="20" width="760" height="560" rx="10" class="container"/>
  <text x="400" y="50" class="title">PDF Builder Pro - Architecture Plugin</text>

  <!-- Couche WordPress Core -->
  <rect x="40" y="70" width="150" height="80" rx="5" class="wordpress"/>
  <text x="115" y="90" class="subtitle">ğŸŸ¢ WordPress Core</text>
  <text x="115" y="105" class="component">â€¢ Hooks &amp; Filters</text>
  <text x="115" y="120" class="component">â€¢ Database (MySQL)</text>
  <text x="115" y="135" class="component">â€¢ AJAX System</text>

  <!-- Couche Bootstrap -->
  <rect x="250" y="70" width="150" height="80" rx="5" class="bootstrap"/>
  <text x="325" y="90" class="subtitle">ğŸŸ  Bootstrap Layer</text>
  <text x="325" y="105" class="component">â€¢ Auto-loading</text>
  <text x="325" y="120" class="component">â€¢ Dependencies</text>
  <text x="325" y="135" class="component">â€¢ Initialization</text>

  <!-- Couche Admin -->
  <rect x="40" y="190" width="150" height="90" rx="5" class="admin"/>
  <text x="115" y="210" class="subtitle">ğŸ”µ Admin Layer</text>
  <text x="115" y="225" class="component">â€¢ PdfBuilderAdmin</text>
  <text x="115" y="240" class="component">â€¢ SettingsManager</text>
  <text x="115" y="255" class="component">â€¢ AjaxHandler</text>
  <text x="115" y="270" class="component">â€¢ TemplateManager</text>

  <!-- Couche Core -->
  <rect x="250" y="190" width="150" height="90" rx="5" class="core"/>
  <text x="325" y="210" class="subtitle">ğŸŸ£ Core Layer</text>
  <text x="325" y="225" class="component">â€¢ Cache Manager</text>
  <text x="325" y="240" class="component">â€¢ Task Scheduler</text>
  <text x="325" y="255" class="component">â€¢ Health Monitor</text>
  <text x="325" y="270" class="component">â€¢ Ajax Handler</text>

  <!-- Couche Managers -->
  <rect x="40" y="320" width="360" height="90" rx="5" class="managers"/>
  <text x="220" y="340" class="subtitle">ğŸŸ  Managers Layer</text>
  <text x="130" y="355" class="component">â€¢ Template Manager</text>
  <text x="130" y="370" class="component">â€¢ PDF Generator</text>
  <text x="130" y="385" class="component">â€¢ Asset Optimizer</text>
  <text x="310" y="355" class="component">â€¢ Cache Manager</text>
  <text x="310" y="370" class="component">â€¢ WooCommerce Int.</text>
  <text x="310" y="385" class="component">â€¢ Database Manager</text>

  <!-- Couche Frontend -->
  <rect x="470" y="190" width="150" height="90" rx="5" class="frontend"/>
  <text x="545" y="210" class="subtitle">ğŸŸ¢ Frontend Layer</text>
  <text x="545" y="225" class="component">â€¢ React Components</text>
  <text x="545" y="240" class="component">â€¢ Canvas Editor</text>
  <text x="545" y="255" class="component">â€¢ AjaxCompat</text>
  <text x="545" y="270" class="component">â€¢ TypeScript Logic</text>

  <!-- SystÃ¨me de Build -->
  <rect x="470" y="320" width="150" height="70" rx="5" class="build"/>
  <text x="545" y="340" class="subtitle">ğŸŸ¡ Build System</text>
  <text x="545" y="355" class="component">â€¢ npm/webpack</text>
  <text x="545" y="370" class="component">â€¢ Asset compilation</text>
  <text x="545" y="385" class="component">â€¢ deploy-simple.ps1</text>

  <!-- Stockage -->
  <rect x="40" y="450" width="580" height="60" rx="5" class="storage"/>
  <text x="330" y="470" class="subtitle">ğŸ’¾ Storage &amp; External Services</text>
  <text x="160" y="485" class="component">â€¢ MySQL Database (wp_pdf_builder_*)</text>
  <text x="160" y="500" class="component">â€¢ File System (wp-content/uploads/)</text>
  <text x="500" y="485" class="component">â€¢ DomPDF Library</text>
  <text x="500" y="500" class="component">â€¢ FTP Server &amp; WooCommerce API</text>

  <!-- FlÃ¨ches de flux -->

  <!-- WordPress â†’ Bootstrap -->
  <line x1="190" y1="110" x2="250" y2="110" class="arrow" marker-end="url(#arrowhead)"/>
  <text x="220" y="105" class="flow-label">1. Init</text>

  <!-- Bootstrap â†’ Admin -->
  <line x1="325" y1="150" x2="325" y2="190" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- Bootstrap â†’ Core -->
  <line x1="355" y1="130" x2="355" y2="190" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- Admin â†’ Managers -->
  <line x1="115" y1="280" x2="115" y2="320" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- Core â†’ Managers -->
  <line x1="325" y1="280" x2="325" y2="320" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- Managers â†’ Frontend -->
  <line x1="400" y1="365" x2="470" y2="235" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- Frontend â†’ Build -->
  <line x1="545" y1="280" x2="545" y2="320" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- AJAX Flow (Frontend â†’ Admin) -->
  <line x1="590" y1="235" x2="190" y2="235" class="ajax-arrow" marker-end="url(#arrowhead)"/>
  <text x="390" y="230" class="flow-label">2. AJAX Calls</text>

  <!-- Data Flow (Managers â†’ Storage) -->
  <line x1="220" y1="410" x2="220" y2="450" class="dashed-arrow" marker-end="url(#arrowhead)"/>
  <text x="240" y="430" class="flow-label">3. Data Processing</text>

  <!-- Cache Flow (Core â†’ Storage) -->
  <line x1="355" y1="280" x2="355" y2="450" class="cache-arrow" marker-end="url(#arrowhead)"/>
  <text x="375" y="365" class="flow-label">4. Cache Operations</text>

  <!-- PDF Generation Flow -->
  <line x1="400" y1="365" x2="500" y2="450" class="dashed-arrow" marker-end="url(#arrowhead)"/>
  <text x="480" y="420" class="flow-label">5. PDF Generation</text>

  <!-- LÃ©gende -->
  <rect x="620" y="70" width="160" height="200" rx="5" fill="#f5f5f5" stroke="#666"/>
  <text x="700" y="85" class="legend" style="font-weight: bold;">ğŸ¨ LÃ‰GENDE</text>

  <text x="700" y="105" class="legend">ğŸŸ¢ Vert : Base systÃ¨me</text>
  <text x="700" y="120" class="legend">ğŸŸ  Orange : Chargement</text>
  <text x="700" y="135" class="legend">ğŸ”µ Bleu : Interface admin</text>
  <text x="700" y="150" class="legend">ğŸŸ£ Violet : Logique mÃ©tier</text>
  <text x="700" y="165" class="legend">ğŸŸ¡ Jaune : Compilation</text>
  <text x="700" y="180" class="legend">ğŸ’¾ Vert pÃ¢le : Stockage</text>

  <text x="700" y="200" class="legend" style="font-weight: bold;">FlÃ¨ches:</text>
  <text x="700" y="215" class="legend">â¡ï¸ Continu : Flux principal</text>
  <text x="700" y="230" class="legend">ğŸ”¸ PointillÃ© : Flux secondaires</text>
  <text x="700" y="245" class="legend">ğŸ”´ Rouge : AJAX</text>
  <text x="700" y="260" class="legend">ğŸŸ£ Violet : Cache</text>

  <!-- NumÃ©ros des Ã©tapes -->
  <circle cx="220" cy="100" r="12" fill="#4CAF50" stroke="#fff" stroke-width="2"/>
  <text x="220" y="105" class="flow-label" fill="#fff">1</text>

  <circle cx="390" cy="225" r="12" fill="#FF5722" stroke="#fff" stroke-width="2"/>
  <text x="390" y="230" class="flow-label" fill="#fff">2</text>

  <circle cx="240" cy="425" r="12" fill="#666" stroke="#fff" stroke-width="2"/>
  <text x="240" y="430" class="flow-label" fill="#fff">3</text>

  <circle cx="375" cy="360" r="12" fill="#9C27B0" stroke="#fff" stroke-width="2"/>
  <text x="375" y="365" class="flow-label" fill="#fff">4</text>

  <circle cx="480" cy="415" r="12" fill="#666" stroke="#fff" stroke-width="2"/>
  <text x="480" y="420" class="flow-label" fill="#fff">5</text>

</svg>
