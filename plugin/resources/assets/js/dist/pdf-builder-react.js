/*! For license information please see pdf-builder-react.js.LICENSE.txt */
(()=>{"use strict";var e,t,r={633:(e,t,r)=>{r.d(t,{e:()=>a});var o=r(1609);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown",t=(0,o.useRef)(null),r=(0,o.useRef)(0);return(0,o.useEffect)(function(){return t.current=performance.now(),r.current=0,function(){performance.now(),t.current}},[e]),(0,o.useEffect)(function(){r.current+=1}),{measureOperation:(0,o.useCallback)(function(e,t){performance.now();try{var r=t();return performance.now(),performance.memory,r}catch(e){throw performance.now(),e}},[e]),measureLoadTime:(0,o.useCallback)(function(e){var t=performance.now();return{end:function(){return performance.now()-t}}},[e])}}},1609:e=>{e.exports=window.React},2161:(e,t,r)=>{r.d(t,{$E:()=>p,RT:()=>c,Xl:()=>u,ok:()=>f,ue:()=>d});var o=r(1609);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={CANVAS:"canvas",METABOX:"metabox"},c={OPEN:"OPEN",CLOSE:"CLOSE",SET_PAGE:"SET_PAGE",SET_ZOOM:"SET_ZOOM",SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_DATA:"SET_DATA",SET_ROTATION:"SET_ROTATION",TOGGLE_FULLSCREEN:"TOGGLE_FULLSCREEN"},d={isOpen:!1,mode:s.CANVAS,currentPage:1,totalPages:1,zoom:1,rotation:0,isFullscreen:!1,loading:!1,error:null,data:null,config:{}};function u(e,t){switch(t.type){case c.OPEN:return i(i({},e),{},{isOpen:!0,mode:t.payload.mode||s.CANVAS,data:t.payload.data||null,config:t.payload.config||{},loading:!1,error:null,currentPage:1,zoom:1});case c.CLOSE:return i({},d);case c.SET_PAGE:return i(i({},e),{},{currentPage:Math.max(1,Math.min(t.payload,e.totalPages))});case c.SET_ZOOM:return i(i({},e),{},{zoom:Math.max(.5,Math.min(2,t.payload))});case c.SET_LOADING:return i(i({},e),{},{loading:t.payload});case c.SET_ERROR:return i(i({},e),{},{error:t.payload,loading:!1});case c.SET_DATA:return i(i({},e),{},{data:t.payload,totalPages:t.payload&&t.payload.totalPages||1});case c.SET_ROTATION:return i(i({},e),{},{rotation:t.payload});case c.TOGGLE_FULLSCREEN:return i(i({},e),{},{isFullscreen:!e.isFullscreen});default:return e}}var f=(0,o.createContext)();function p(){var e=(0,o.useContext)(f);if(!e)throw new Error("usePreviewContext must be used within a PreviewProvider");return e}},5312:(e,t,r)=>{r.d(t,{A:()=>c});var o=r(1609),a=r.n(o),n=r(2161),i=r(633);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function s(e){var t,r,s=e.className,c=void 0===s?"":s,d=(0,n.$E)(),u=d.state,f=u.currentPage,p=u.totalPages,m=u.zoom,h=u.rotation,b=u.isFullscreen,g=d.actions,y=g.setPage,v=g.setZoom,w=g.setRotation,x=g.toggleFullscreen,E=(0,i.e)("NavigationControls").measureOperation,C=(t=(0,o.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=C[0],_=C[1],k=(0,o.useCallback)(function(e){var t=E("goToPage");y(Math.max(1,Math.min(p,e))),t.end()},[y,p,E]),N=(0,o.useCallback)(function(){k(f-1)},[k,f]),T=(0,o.useCallback)(function(){k(f+1)},[k,f]),P=[25,50,75,100,125,150,200,300,400],O=(0,o.useCallback)(function(e){var t=E("zoomChange");v(Math.max(10,Math.min(500,e))),_(!1),t.end()},[v,E]),D=(0,o.useCallback)(function(){var e=P.findIndex(function(e){return e>=m}),t=P[Math.min(e+1,P.length-1)];O(t)},[m,O,P]),A=(0,o.useCallback)(function(){var e=P.findIndex(function(e){return e>=m}),t=P[Math.max(e-1,0)];O(t)},[m,O,P]),B=(0,o.useCallback)(function(){O(100)},[O]),R=(0,o.useCallback)(function(){O(100)},[O]),F=(0,o.useCallback)(function(){var e=E("rotate");w((h+90)%360),e.end()},[w,h,E]),I=(0,o.useCallback)(function(){var e=E("rotate");w((h-90+360)%360),e.end()},[w,h,E]),j=(0,o.useCallback)(function(){E("export").end()},[E]);return a().createElement("div",{className:"navigation-controls ".concat(c)},a().createElement("div",{className:"nav-main-bar"},a().createElement("div",{className:"nav-page-controls"},a().createElement("button",{className:"nav-btn nav-btn-previous",onClick:N,disabled:f<=1,title:"Page prÃ©cÃ©dente"},"â€¹"),a().createElement("div",{className:"nav-page-indicator"},a().createElement("input",{type:"number",min:"1",max:p,value:f,onChange:function(e){return k(parseInt(e.target.value)||1)},className:"nav-page-input"}),a().createElement("span",{className:"nav-page-total"}," / ",p)),a().createElement("button",{className:"nav-btn nav-btn-next",onClick:T,disabled:f>=p,title:"Page suivante"},"â€º")),a().createElement("div",{className:"nav-zoom-controls"},a().createElement("button",{className:"nav-btn nav-btn-zoom-out",onClick:A,disabled:m<=P[0],title:"Zoom arriÃ¨re"},"âˆ’"),a().createElement("div",{className:"nav-zoom-dropdown"},a().createElement("button",{className:"nav-btn nav-zoom-current",onClick:function(){return _(!S)},title:"Changer le zoom"},m,"%"),S&&a().createElement("div",{className:"nav-zoom-menu"},P.map(function(e){return a().createElement("button",{key:e,className:"nav-zoom-option ".concat(m===e?"active":""),onClick:function(){return O(e)}},e,"%")}),a().createElement("div",{className:"nav-zoom-separator"}),a().createElement("button",{className:"nav-zoom-option",onClick:B},"Ajuster Ã  la largeur"),a().createElement("button",{className:"nav-zoom-option",onClick:R},"Ajuster Ã  la page"))),a().createElement("button",{className:"nav-btn nav-btn-zoom-in",onClick:D,disabled:m>=P[P.length-1],title:"Zoom avant"},"+")),a().createElement("div",{className:"nav-rotation-controls"},a().createElement("button",{className:"nav-btn nav-btn-rotate-ccw",onClick:I,title:"Rotation antihoraire"},"âŸ²"),a().createElement("span",{className:"nav-rotation-display"},h,"Â°"),a().createElement("button",{className:"nav-btn nav-btn-rotate-cw",onClick:F,title:"Rotation horaire"},"âŸ³")),a().createElement("div",{className:"nav-action-controls"},a().createElement("button",{className:"nav-btn nav-btn-export",onClick:j,title:"Exporter"},"â¬‡"),a().createElement("button",{className:"nav-btn nav-btn-fullscreen",onClick:x,title:b?"Quitter le plein Ã©cran":"Plein Ã©cran"},"â›¶"))),a().createElement("div",{className:"nav-status-bar"},a().createElement("span",{className:"nav-status-text"},"Page ",f," sur ",p," â€¢ Zoom ",m,"% â€¢ Rotation ",h,"Â°")))}const c=a().memo(s)}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,a),n.exports}a.m=r,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,r)=>(a.f[r](e,t),t),[])),a.u=e=>e+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="wp-pdf-builder-pro:",a.l=(r,o,n,i)=>{if(e[r])e[r].push(o);else{var l,s;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){l=u;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",t+n),l.src=r),e[r]=[o];var f=(t,o)=>{l.onerror=l.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach(e=>e(o)),t)return t(o)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),s&&document.head.appendChild(l)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={763:0};a.f.j=(t,r)=>{var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise((r,a)=>o=e[t]=[r,a]);r.push(o[2]=n);var i=a.p+a.u(t),l=new Error;a.l(i,r=>{if(a.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,o[1](l)}},"chunk-"+t,t)}};var t=(t,r)=>{var o,n,[i,l,s]=r,c=0;if(i.some(t=>0!==e[t])){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);s&&s(a)}for(t&&t(r);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunkwp_pdf_builder_pro=self.webpackChunkwp_pdf_builder_pro||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n={},i=a(1609),l=a.n(i);const s=window.ReactDOM;function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var d=function(e){var t,r,o=e.selectedTool,a=e.onToolSelect,n=e.zoom,i=e.onZoomChange,s=e.showGrid,d=e.onShowGridChange,u=e.snapToGrid,f=e.onSnapToGridChange,p=e.snapToElements,m=e.onSnapToElementsChange,h=e.onUndo,b=e.onRedo,g=e.canUndo,y=e.canRedo,v=e.settings,w=void 0===v?{}:v,x=(t=l().useState("home"),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=x[0],C=x[1],S=!1!==w.showGrid,_=!1!==w.snapToGrid,k=!1!==w.snapToElements;return l().createElement("div",{className:"toolbar ribbon-toolbar"},l().createElement("div",{className:"toolbar-tabs"},[{id:"home",label:"Accueil",icon:"ðŸ "},{id:"insert",label:"Insertion",icon:"âž•"},{id:"view",label:"Affichage",icon:"ðŸ‘ï¸"}].map(function(e){return l().createElement("button",{key:e.id,className:"tab-button ".concat(E===e.id?"active":""),onClick:function(){return C(e.id)}},l().createElement("span",{className:"tab-icon"},e.icon),l().createElement("span",{className:"tab-label"},e.label))})),l().createElement("div",{className:"toolbar-content"},"home"===E&&l().createElement("div",{className:"tab-content"},l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Presse-papiers"),l().createElement("div",{className:"group-buttons"},l().createElement("button",{className:"edit-button",onClick:h,disabled:!g,title:"Annuler (Ctrl+Z)"},l().createElement("div",{className:"button-content"},l().createElement("span",{className:"button-icon"},"â†¶"),l().createElement("span",{className:"button-text"},"Annuler"))),l().createElement("button",{className:"edit-button",onClick:b,disabled:!y,title:"RÃ©tablir (Ctrl+Y)"},l().createElement("div",{className:"button-content"},l().createElement("span",{className:"button-icon"},"â†·"),l().createElement("span",{className:"button-text"},"RÃ©tablir"))))),l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Outils"),l().createElement("div",{className:"group-buttons"},[{id:"select",label:"SÃ©lection (V)",icon:"ðŸ‘†",shortcut:"V"},{id:"add-text",label:"Texte Simple (T)",icon:"ðŸ“",shortcut:"T"},{id:"add-text-title",label:"Titre (H)",icon:"ðŸ“„",shortcut:"H"},{id:"add-text-subtitle",label:"Sous-titre (S)",icon:"ðŸ“‹",shortcut:"S"}].map(function(e){return l().createElement("button",{key:e.id,className:"tool-button ".concat(o===e.id?"active":""),onClick:function(){return a(e.id)},title:e.label},l().createElement("div",{className:"tool-content"},l().createElement("span",{className:"tool-icon"},e.icon),l().createElement("span",{className:"tool-label"},e.shortcut)))}))),l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Formes"),l().createElement("div",{className:"group-buttons shapes-grid"},[{id:"add-rectangle",label:"Rectangle (R)",icon:"â–­",shortcut:"R"},{id:"add-circle",label:"Cercle (C)",icon:"â—‹",shortcut:"C"},{id:"add-line",label:"Ligne (L)",icon:"â”",shortcut:"L"},{id:"add-arrow",label:"FlÃ¨che (A)",icon:"âž¤",shortcut:"A"},{id:"add-triangle",label:"Triangle (3)",icon:"â–³",shortcut:"3"},{id:"add-star",label:"Ã‰toile (5)",icon:"â­",shortcut:"5"}].map(function(e){return l().createElement("button",{key:e.id,className:"tool-button ".concat(o===e.id?"active":""),onClick:function(){return a(e.id)},title:e.label},l().createElement("div",{className:"tool-content"},l().createElement("span",{className:"tool-icon"},e.icon),l().createElement("span",{className:"tool-label"},e.shortcut)))})))),"insert"===E&&l().createElement("div",{className:"tab-content"},l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Ã‰lÃ©ments"),l().createElement("div",{className:"group-buttons"},[{id:"add-divider",label:"SÃ©parateur (D)",icon:"âŽ¯",shortcut:"D"},{id:"add-image",label:"Image (I)",icon:"ðŸ–¼ï¸",shortcut:"I"},{id:"add-dynamic-text",label:"Texte Dynamique (Y)",icon:"ðŸ“",shortcut:"Y"}].map(function(e){return l().createElement("button",{key:e.id,className:"tool-button ".concat(o===e.id?"active":""),onClick:function(){return a(e.id)},title:e.label},l().createElement("div",{className:"tool-content"},l().createElement("span",{className:"tool-icon"},e.icon),l().createElement("span",{className:"tool-label"},e.shortcut)))})))),"view"===E&&l().createElement("div",{className:"tab-content"},l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Zoom"),l().createElement("div",{className:"group-buttons"},l().createElement("div",{className:"zoom-controls"},l().createElement("button",{className:"zoom-button",onClick:function(){return i(Math.max(.1,n-.1))},title:"Zoom arriÃ¨re (Ctrl+-)"},l().createElement("span",{className:"button-icon"},"ðŸ”"),l().createElement("span",{className:"button-text"},"-")),l().createElement("span",{className:"zoom-value"},Math.round(100*n),"%"),l().createElement("button",{className:"zoom-button",onClick:function(){return i(Math.min(3,n+.1))},title:"Zoom avant (Ctrl+=)"},l().createElement("span",{className:"button-icon"},"ðŸ”"),l().createElement("span",{className:"button-text"},"+"))))),l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Affichage"),l().createElement("div",{className:"group-buttons"},l().createElement("div",{className:"display-options"},l().createElement("label",{className:"toggle-label ".concat(S?"":"disabled"),title:S?"Afficher/Masquer la grille (G)":"âŒ Grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux",style:S?{position:"relative"}:{opacity:.5,cursor:"not-allowed",position:"relative"}},l().createElement("input",{type:"checkbox",checked:!!S&&s,onChange:function(e){return S&&d(e.target.checked)},disabled:!S}),l().createElement("span",{className:"toggle-text"},"Grille"),l().createElement("span",{className:"toggle-shortcut"},"(G)"),!S&&l().createElement("span",{className:"tooltip-hint"},"âŒ Grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux")),l().createElement("label",{className:"toggle-label ".concat(_?"":"disabled"),title:_?"Aimanter Ã  la grille (X)":"âŒ Aimantation Ã  la grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux",style:_?{position:"relative"}:{opacity:.5,cursor:"not-allowed",position:"relative"}},l().createElement("input",{type:"checkbox",checked:!!_&&u,onChange:function(e){return _&&f(e.target.checked)},disabled:!_}),l().createElement("span",{className:"toggle-text"},"Snap Grille"),l().createElement("span",{className:"toggle-shortcut"},"(X)"),!_&&l().createElement("span",{className:"tooltip-hint"},"âŒ Aimantation Ã  la grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux")),l().createElement("label",{className:"toggle-label ".concat(k?"":"disabled"),title:k?"Aimanter aux Ã©lÃ©ments (Z)":"âŒ Aimantation aux Ã©lÃ©ments dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux",style:k?{position:"relative"}:{opacity:.5,cursor:"not-allowed",position:"relative"}},l().createElement("input",{type:"checkbox",checked:!!k&&p,onChange:function(e){return k&&m(e.target.checked)},disabled:!k}),l().createElement("span",{className:"toggle-text"},"Snap Ã‰lÃ©ments"),l().createElement("span",{className:"toggle-shortcut"},"(Z)"),!k&&l().createElement("span",{className:"tooltip-hint"},"âŒ Aimantation aux Ã©lÃ©ments dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux"))))))))},u=a(2161);const f=function(){return l().createElement("div",{className:"pdf-preview-skeleton"},l().createElement("div",{className:"pdf-preview-skeleton-header"},l().createElement("div",{className:"pdf-preview-skeleton-title"}),l().createElement("div",{className:"pdf-preview-skeleton-close"})),l().createElement("div",{className:"pdf-preview-skeleton-toolbar"},l().createElement("div",{className:"pdf-preview-skeleton-button"}),l().createElement("div",{className:"pdf-preview-skeleton-button"}),l().createElement("div",{className:"pdf-preview-skeleton-button"}),l().createElement("div",{className:"pdf-preview-skeleton-spacer"}),l().createElement("div",{className:"pdf-preview-skeleton-zoom"})),l().createElement("div",{className:"pdf-preview-skeleton-content"},l().createElement("div",{className:"pdf-preview-skeleton-page"},l().createElement("div",{className:"pdf-preview-skeleton-line"}),l().createElement("div",{className:"pdf-preview-skeleton-line short"}),l().createElement("div",{className:"pdf-preview-skeleton-line"}),l().createElement("div",{className:"pdf-preview-skeleton-line medium"}),l().createElement("div",{className:"pdf-preview-skeleton-line"}),l().createElement("div",{className:"pdf-preview-skeleton-line short"}),l().createElement("div",{className:"pdf-preview-skeleton-line"}),l().createElement("div",{className:"pdf-preview-skeleton-spacer"}),l().createElement("div",{className:"pdf-preview-skeleton-line"}),l().createElement("div",{className:"pdf-preview-skeleton-line medium"}),l().createElement("div",{className:"pdf-preview-skeleton-line"}))),l().createElement("div",{className:"pdf-preview-skeleton-footer"},l().createElement("div",{className:"pdf-preview-skeleton-nav"}),l().createElement("div",{className:"pdf-preview-skeleton-page-info"}),l().createElement("div",{className:"pdf-preview-skeleton-export"})))};var p=a(5312),m=(0,i.lazy)(function(){return Promise.all([a.e(279),a.e(431)]).then(a.bind(a,6431))}),h=(0,i.lazy)(function(){return a.e(477).then(a.bind(a,2477))});function b(){var e=(0,u.$E)(),t=e.state,r=t.isOpen,o=t.mode,a=t.loading,n=t.error,s=e.actions.closePreview;return(0,i.useEffect)(function(){if(r){var e=function(e){"Escape"===e.key&&s()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}},[r,s]),r&&o?l().createElement("div",{className:"pdf-preview-modal-overlay",onClick:function(e){e.target===e.currentTarget&&s()}},l().createElement("div",{className:"pdf-preview-modal-content"},l().createElement("div",{className:"pdf-preview-modal-header"},l().createElement("h3",{className:"pdf-preview-modal-title"},"AperÃ§u PDF ","canvas"===o?"(Ã‰diteur)":"(Commande)"),l().createElement("button",{className:"pdf-preview-modal-close",onClick:s,"aria-label":"Fermer l'aperÃ§u",type:"button"},"Ã—")),l().createElement("div",{className:"pdf-preview-modal-body"},l().createElement(i.Suspense,{fallback:l().createElement(f,null)},n?l().createElement("div",{className:"pdf-preview-error"},l().createElement("p",null,"Erreur lors du chargement de l'aperÃ§u :"),l().createElement("p",{className:"error-message"},n),l().createElement("button",{onClick:s,className:"pdf-preview-error-close"},"Fermer")):l().createElement(l().Fragment,null,"canvas"===o&&l().createElement(m,null),"metabox"===o&&l().createElement(h,null)))),l().createElement(p.A,null),a&&l().createElement("div",{className:"pdf-preview-loading-overlay"},l().createElement("div",{className:"pdf-preview-spinner"}),l().createElement("p",null,"GÃ©nÃ©ration de l'aperÃ§u...")))):null}const g=l().memo(b);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function v(e){var t,r,o=e.children,a=(t=(0,i.useReducer)(u.Xl,u.ue),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=a[0],s=a[1],c=(0,i.useCallback)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s({type:u.RT.OPEN,payload:{mode:e,data:t,config:r}})},[]),d=(0,i.useCallback)(function(){s({type:u.RT.CLOSE})},[]),f=(0,i.useCallback)(function(e){s({type:u.RT.SET_PAGE,payload:e})},[]),p=(0,i.useCallback)(function(e){s({type:u.RT.SET_ZOOM,payload:e})},[]),m=(0,i.useCallback)(function(e){s({type:u.RT.SET_LOADING,payload:e})},[]),h=(0,i.useCallback)(function(e){s({type:u.RT.SET_ERROR,payload:e})},[]),b=(0,i.useCallback)(function(e){s({type:u.RT.SET_DATA,payload:e})},[]),g=(0,i.useCallback)(function(e){s({type:"SET_ROTATION",payload:e})},[]),v=(0,i.useCallback)(function(){s({type:"TOGGLE_FULLSCREEN"})},[]),w=(0,i.useCallback)(function(e){m(!0)},[m]),x=(0,i.useCallback)(function(){m(!1),b(null),h(null)},[m,b,h]),E=(0,i.useMemo)(function(){return{state:n,actions:{openPreview:c,closePreview:d,setPage:f,setZoom:p,setLoading:m,setError:h,setData:b,setRotation:g,toggleFullscreen:v,loadPreview:w,clearPreview:x},isFirstPage:1===n.currentPage,isLastPage:n.currentPage===n.totalPages,canNavigatePrev:n.currentPage>1,canNavigateNext:n.currentPage<n.totalPages,zoomPercentage:Math.round(100*n.zoom)}},[n,c,d,f,p,m,h,b,g,v,w,x]);return l().createElement(u.ok.Provider,{value:E},o)}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(t){C(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function C(e,t,r){return(t=function(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}const _=function(e){var t,r,o=e.onAddElement,a=(e.selectedTool,e.onToolSelect,t=(0,i.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=a[0],l=a[1];return React.createElement(React.Fragment,null,n&&React.createElement("div",{className:"modal-overlay",onClick:function(){return l(!1)}},React.createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}},React.createElement("div",{className:"modal-header"},React.createElement("h3",null,"ðŸŽ¨ Choisir un modÃ¨le d'en-tÃªte"),React.createElement("button",{className:"modal-close",onClick:function(){return l(!1)}},"Ã—")),React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"templates-grid"},[{id:"classic",name:"Classique",sample:"ðŸ¢ ENTREPRISE\n123 Rue de la Paix\n75000 Paris",fontSize:14,fontWeight:"bold"},{id:"modern",name:"Moderne",sample:"âœ¨ ENTREPRISE MODERNE\nInnovation & QualitÃ©\ncontact@entreprise.com",fontSize:16,fontWeight:"bold"},{id:"minimal",name:"Minimal",sample:"ENTREPRISE\nAdresse â€¢ TÃ©lÃ©phone â€¢ Email",fontSize:12,fontWeight:"normal"},{id:"elegant",name:"Ã‰lÃ©gant",sample:"ðŸŽ© Maison Ã‰lÃ©gante\nParis, France\nwww.entreprise.com",fontSize:15,fontWeight:"bold"}].map(function(e){return React.createElement("div",{key:e.id,className:"template-item",onClick:function(){return function(e){l(!1),o("text",{x:50,y:50,width:300,height:60,text:e.sample.replace("\\n","\n"),fontSize:e.fontSize||16,fontWeight:e.fontWeight||"normal"})}(e)}},React.createElement("div",{className:"template-sample"},e.sample.split("\n").map(function(t,r){return React.createElement("div",{key:r,style:{fontSize:e.fontSize,fontWeight:e.fontWeight,marginBottom:"4px",whiteSpace:"pre-wrap"}},t)})),React.createElement("div",{className:"template-name"},e.name))}))))),React.createElement("div",{className:"element-library"},React.createElement("div",{className:"library-header"},React.createElement("h3",null,"ðŸ“š BibliothÃ¨que d'Ã‰lÃ©ments"),React.createElement("p",{className:"library-subtitle"},"Cliquez sur les blocs pour les ajouter au canvas")),React.createElement("div",{className:"library-content"},React.createElement("div",{className:"elements-list"},[{type:"product_table",fieldID:"products_table",label:"Tableau Produits",icon:"ðŸ“‹",description:"Tableau des produits commandÃ©s",defaultProperties:{x:30,y:270,width:530,height:200,tableStyle:"default",columns:"name,price,quantity",showHeaders:!0,showBorders:!0,showSubtotal:!0,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!0,evenRowBg:"#ffffff",evenRowTextColor:"#000000",oddRowBg:"#f8fafc",oddRowTextColor:"#000000",fontSize:12,fontFamily:"Arial",fontWeight:"normal",color:"#333333",backgroundColor:"transparent"}},{type:"customer_info",fieldID:"customer_info",label:"Fiche Client",icon:"ðŸ‘¤",description:"Informations dÃ©taillÃ©es du client",defaultProperties:{showHeaders:!0,showBorders:!1,fields:["name","email","phone","address","company","vat","siret"],layout:"vertical",showLabels:!0,labelStyle:"bold",spacing:8}},{type:"company_logo",fieldID:"company_logo",label:"Logo Entreprise",icon:"ðŸ¢",description:"Logo et identitÃ© visuelle de l'entreprise",defaultProperties:{src:"",imageUrl:"",width:150,height:80,alignment:"left",fit:"contain",autoResize:!0,showBorder:!1,borderRadius:0,borderWidth:0,borderStyle:"solid",borderColor:"transparent"}},{type:"company_info",fieldID:"company_info",label:"Informations Entreprise",icon:"[D]",description:"Nom, adresse, contact et TVA de l'entreprise",defaultProperties:{showHeaders:!1,showBorders:!1,fields:["name","address","phone","email","website","vat","rcs","siret"],layout:"vertical",showLabels:!1,labelStyle:"normal",spacing:4,fontSize:12,fontFamily:"Arial",fontWeight:"normal",textAlign:"left",template:"default",showCompanyName:!0,showAddress:!0,showContact:!0,showLegal:!0,previewCompanyName:"Ma SociÃ©tÃ© SARL",previewAddress:"123 Rue de l'Entreprise\n75001 Paris, France",previewPhone:"+33 1 23 45 67 89",previewEmail:"contact@masociete.com",previewWebsite:"www.masociete.com",previewVat:"FR12345678901",previewSiret:"12345678901234",previewRcs:"RCS Paris 123456789"}},{type:"order_number",fieldID:"order_number",label:"NumÃ©ro de Commande",icon:"ðŸ”¢",description:"RÃ©fÃ©rence de commande avec date et formatage configurable",defaultProperties:{format:"Commande #{order_number} - {order_date}",availableFormats:["Commande #{order_number} - {order_date}","CMD-{order_year}-{order_number}","Facture NÂ°{order_number} du {order_date}","Bon de livraison #{order_number}","{order_number}/{order_year}","NÂ° {order_number} - {order_date}"],fontSize:14,fontFamily:"Arial",fontWeight:"bold",textAlign:"right",color:"#333333",labelColor:"#666666",lineHeight:1.2,showLabel:!0,labelText:"NÂ° de commande:",backgroundColor:"transparent",borderWidth:0,borderStyle:"solid",borderColor:"#e5e7eb",borderRadius:0,previewOrderNumber:"12345",previewOrderDate:"15/10/2025",previewOrderYear:"2025",previewOrderMonth:"10",previewOrderDay:"15"}},{type:"dynamic-text",fieldID:"dynamic_text",label:"Texte Dynamique",icon:"ðŸ“",description:"Texte avec variables dynamiques",defaultProperties:{template:"total_only",customContent:"{{order_total}} â‚¬",fontSize:14,fontFamily:"Arial",fontWeight:"normal",textAlign:"left",color:"#333333"}},{type:"mentions",fieldID:"mentions",label:"Mentions lÃ©gales",icon:"ðŸ“„",description:"Informations lÃ©gales (email, SIRET, tÃ©lÃ©phone, etc.)",defaultProperties:{showEmail:!0,showPhone:!0,showSiret:!0,showVat:!1,showAddress:!1,showWebsite:!1,showCustomText:!1,customText:"",fontSize:8,fontFamily:"Arial",fontWeight:"normal",textAlign:"center",color:"#666666",lineHeight:1.2,separator:" â€¢ ",layout:"horizontal"}}].map(function(e,t){return React.createElement("button",{key:t,className:"element-button",draggable:!0,onDragStart:function(r){return function(e,t,r){e.dataTransfer.setData("application/json",JSON.stringify({type:"element",elementType:t.type,defaultProperties:E({x:50+20*r,y:100+20*r,width:300,height:150},t.defaultProperties)})),e.dataTransfer.effectAllowed="copy"}(r,e,t)},onClick:function(){o(e.type,E({x:50+20*t,y:100+20*t,width:300,height:150},e.defaultProperties))},title:e.description},React.createElement("span",{className:"element-icon"},e.icon),React.createElement("div",{className:"element-info"},React.createElement("div",{className:"element-label"},e.label),React.createElement("div",{className:"element-description"},e.description)))})))))};var k={company_logo:{appearance:{sections:["colors","borders","effects"],properties:{colors:["backgroundColor"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["image"],properties:{image:["imageUrl","alt","objectFit"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},product_table:{appearance:{sections:["table_appearance","colors","typography","font","borders","effects"],properties:{table_appearance:["tableStyle","evenRowBg","oddRowBg","evenRowTextColor","oddRowTextColor"],colors:["backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation","scaleX","scaleY"],layers:["zIndex"]}},content:{sections:["table"],properties:{table:["columns","showHeaders","showBorders","showSubtotal","showShipping","showTaxes","showDiscount","showTotal"]}},effects:{sections:["opacity","shadows","filters"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur"],filters:["brightness","contrast","saturate"]}}},customer_info:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["customer_fields"],properties:{customer_fields:["customerName","customerAddress","customerPhone","customerEmail"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},"dynamic-text":{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["dynamic_text","variables"],properties:{dynamic_text:["dynamicText"],variables:["variables"]}},effects:{sections:["opacity","shadows","filters"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"],filters:["brightness","contrast","saturate"]}}},order_number:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["order_number"],properties:{order_number:["format","showLabel","labelText","labelAlign","previewOrderNumber","highlightNumber","numberBackground"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},company_info:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["company_info"],properties:{company_info:["template"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},mentions:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["mentions"],properties:{mentions:["type"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},rectangle:{appearance:{sections:["colors","borders","effects"],properties:{colors:["color","backgroundColor"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},circle:{appearance:{sections:["colors","borders","effects"],properties:{colors:["color","backgroundColor"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},line:{appearance:{sections:["colors","effects"],properties:{colors:["color"],effects:["opacity"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity"],properties:{opacity:["opacity"]}}},arrow:{appearance:{sections:["colors","effects"],properties:{colors:["color"],effects:["opacity"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity"],properties:{opacity:["opacity"]}}},default:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}}},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e)return t;var r=parseFloat(e);return isNaN(r)?t:r},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e)return t;var r=parseInt(e,10);return isNaN(r)?t:r},P=function(e,t){return!({product_table:["typography"]}[t]||[]).includes(e)};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}const D=(0,i.memo)(function(e){var t,r,o=e.title,a=e.icon,n=e.children,l=e.defaultOpen,s=void 0!==l&&l,c=e.className,d=void 0===c?"":c,u=(t=(0,i.useState)(s),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=u[0],p=u[1],m=(0,i.useMemo)(function(){return"accordion-content-".concat(Math.random().toString(36).substr(2,9))},[]),h=(0,i.useCallback)(function(){p(function(e){return!e})},[]),b=(0,i.useCallback)(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h())},[h]);return React.createElement("div",{className:"accordion ".concat(d)},React.createElement("button",{className:"accordion-header",onClick:h,onKeyDown:b,type:"button","aria-expanded":f,"aria-controls":m},React.createElement("span",{className:"accordion-title"},a&&React.createElement("span",{className:"accordion-icon"},a),o),React.createElement("span",{className:"accordion-arrow ".concat(f?"open":"")},"â–¼")),React.createElement("div",{id:m,className:"accordion-content ".concat(f?"open":""),role:"region","aria-labelledby":"accordion-header-".concat(m)},n))}),A=function(e){var t,r=e.label,o=e.value,a=e.onChange,n=e.presets,i=void 0===n?[]:n,s=e.defaultColor,c=void 0===s?"#ffffff":s,d=(t=o)&&"transparent"!==t?!t.startsWith("#")||4!==t.length&&7!==t.length?c:t:c;return l().createElement("div",{className:"property-row"},l().createElement("label",null,r,":"),l().createElement("div",{className:"color-picker-container"},l().createElement("input",{type:"color",value:d,onChange:function(e){var t=e.target.value;a(t)},className:"color-input",title:"Couleur actuelle: ".concat(o||"transparent")}),l().createElement("div",{className:"color-presets"},i.filter(function(e){return e&&"transparent"!==e&&e.startsWith("#")}).map(function(e,t){return l().createElement("button",{key:t,className:"color-preset ".concat(o===e?"active":""),style:{backgroundColor:e,border:o===e?"2px solid #2563eb":"1px solid #e2e8f0"},onClick:function(){return a(e)},title:"".concat(r,": ").concat(e),"aria-label":"SÃ©lectionner la couleur ".concat(e)})}),i.includes("transparent")&&l().createElement("button",{className:"color-preset transparent ".concat("transparent"===o?"active":""),style:{background:"transparent"===o?"repeating-conic-gradient(#f0f0f0 0% 25%, #ffffff 0% 50%) 50% / 10px 10px":"repeating-conic-gradient(#e2e8f0 0% 25%, #ffffff 0% 50%) 50% / 10px 10px",border:"transparent"===o?"2px solid #2563eb":"1px solid #e2e8f0"},onClick:function(){return a("transparent")},title:"".concat(r,": Transparent"),"aria-label":"Rendre transparent"}))))};function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var R=function(e){var t=e.label,r=e.children,o=e.minWidth,a=void 0===o?350:o,n=e.className,s=void 0===n?"":n,c=e.forceVertical,d=void 0!==c&&c,u=e.demoMode,f=void 0!==u&&u,p=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350,o=(e=(0,i.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],n=o[1],l=(0,i.useRef)(null);return(0,i.useEffect)(function(){var e=function(){if(l.current){var e=l.current.getBoundingClientRect();n(e.width<r)}};e(),window.addEventListener("resize",e);var t=new ResizeObserver(e);return l.current&&t.observe(l.current),function(){window.removeEventListener("resize",e),t.disconnect()}},[r]),{isVertical:a,containerRef:l}}(a),m=p.isVertical,h=p.containerRef,b=d||m;return l().createElement("div",{ref:h,className:"adaptive-control ".concat(b?"adaptive-vertical":"adaptive-horizontal"," ").concat(s),style:f?{border:"2px dashed #3b82f6",padding:"8px",margin:"4px 0",borderRadius:"6px",backgroundColor:b?"#eff6ff":"#f0fdf4"}:{}},l().createElement("label",{className:"adaptive-label",style:f?{color:b?"#1d4ed8":"#166534",fontWeight:"bold"}:{}},t,f&&l().createElement("span",{style:{fontSize:"10px",marginLeft:"8px",padding:"2px 6px",borderRadius:"10px",backgroundColor:b?"#dbeafe":"#dcfce7",color:b?"#1e40af":"#166534"}},b?"VERTICAL":"HORIZONTAL")),l().createElement("div",{className:"adaptive-content"},r))};const F=function(e){var t=e.selectedStyle,r=e.onStyleSelect,o=[{key:"default",name:"DÃ©faut",description:"Style simple et Ã©purÃ©"},{key:"classic",name:"Classique",description:"Style traditionnel avec bordures"},{key:"striped",name:"RayÃ©",description:"Lignes alternÃ©es pour une meilleure lisibilitÃ©"},{key:"bordered",name:"Avec bordures",description:"Bordures complÃ¨tes autour des cellules"},{key:"minimal",name:"Minimal",description:"Design minimaliste sans bordures"},{key:"modern",name:"Moderne",description:"Style contemporain avec ombres"},{key:"blue_ocean",name:"OcÃ©an bleu",description:"Palette bleue apaisante"},{key:"emerald_forest",name:"ForÃªt d'Ã©meraude",description:"Teintes vertes naturelles"},{key:"sunset_orange",name:"Orange coucher",description:"Couleurs chaudes du coucher de soleil"},{key:"royal_purple",name:"Violet royal",description:"Palette violette Ã©lÃ©gante"},{key:"rose_pink",name:"Rose bonbon",description:"Teintes roses douces"},{key:"teal_aqua",name:"Aigue-marine",description:"Bleu-vert rafraÃ®chissant"}];return l().createElement("div",{className:"property-row"},l().createElement("label",{style:{fontWeight:"600",color:"#374151",marginBottom:"4px",display:"block"}},"ðŸŽ¨ Style tableau:"),l().createElement("div",{className:"table-style-preview-grid"},o.map(function(e){var a,n,i=e.key,s=e.name,c=e.description;return l().createElement("div",{key:i,className:"table-style-preview-item"},l().createElement("div",{className:"table-style-preview-container ".concat(t===i?"selected":""),onClick:function(){return r(i)},title:"".concat(s," - ").concat(c)},(n=ze(a=i),l().createElement("div",{className:"table-style-preview-thumbnail",style:{borderRadius:"".concat(.3*n.borderRadius,"px"),backgroundColor:n.rowBg,border:n.borderWidth>0?"".concat(.5*n.borderWidth,"px solid ").concat(n.rowBorder):"1px solid #e2e8f0",boxShadow:n.shadowBlur>0?"0 1px ".concat(.3*n.shadowBlur,"px ").concat(n.shadowColor):"none"},onClick:function(){return r(a)},title:"".concat(o.find(function(e){return e.key===a})&&o.find(function(e){return e.key===a}).name||a," - ").concat(o.find(function(e){return e.key===a})&&o.find(function(e){return e.key===a}).description||"")},l().createElement("div",{style:{height:"24px",background:"linear-gradient(135deg, ".concat(n.headerBg," 0%, ").concat(n.headerBg," 100%)"),borderBottom:n.borderWidth>0?"".concat(.5*n.borderWidth,"px solid ").concat(n.headerBorder):"none",display:"flex",alignItems:"center",justifyContent:"center"}},l().createElement("div",{style:{fontSize:"7px",fontWeight:n.headerFontWeight,color:n.headerTextColor,textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center",lineHeight:"1"}},"Titre")),l().createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},l().createElement("div",{style:{flex:1,backgroundColor:n.rowBg,borderBottom:n.borderWidth>0?"".concat(.3*n.borderWidth,"px solid ").concat(n.rowBorder):"none",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 4px"}},l().createElement("div",{style:{fontSize:"6px",color:n.rowTextColor,opacity:.9,fontWeight:"500"}},"Produit A"),l().createElement("div",{style:{fontSize:"6px",color:n.rowTextColor,opacity:.7}},"25â‚¬")),l().createElement("div",{style:{flex:1,backgroundColor:n.altRowBg,borderBottom:n.borderWidth>0?"".concat(.3*n.borderWidth,"px solid ").concat(n.rowBorder):"none",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 4px"}},l().createElement("div",{style:{fontSize:"6px",color:n.rowTextColor,opacity:.9,fontWeight:"500"}},"Produit B"),l().createElement("div",{style:{fontSize:"6px",color:n.rowTextColor,opacity:.7}},"15â‚¬")),l().createElement("div",{style:{flex:1,backgroundColor:n.rowBg,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}},l().createElement("div",{style:{fontSize:"6px",color:n.rowTextColor,opacity:.8}},"Total: 40â‚¬"))),t===a&&l().createElement("div",{className:"table-style-selection-indicator"})))),l().createElement("div",{className:"table-style-name"},s),("default"===i||"modern"===i||"striped"===i)&&l().createElement("div",{style:{fontSize:"8px",color:"#059669",fontWeight:"600",marginTop:"2px",textTransform:"uppercase",letterSpacing:"0.05em"}},"â˜… Populaire"))})))},I=function(e,t,r,o){var a,n,i,s,c,d,u,f,p,m,h,b,g,y,v=((k[e.type]||k.default).effects||{}).properties||{},w=function(e){return Object.values(v).some(function(t){return Array.isArray(t)&&t.includes(e)})};return l().createElement(D,{key:"effects",title:"Effets",icon:"âœ¨",defaultOpen:!1,className:"properties-accordion"},w("opacity")&&l().createElement("div",{className:"property-row"},l().createElement("label",null,"OpacitÃ©:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:null!==(a=t.opacity)&&void 0!==a?a:1,onChange:function(t){return r(e.id,"opacity",N(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},Math.round(100*(null!==(n=t.opacity)&&void 0!==n?n:1)),"%"))),w("shadow")&&l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ombre:"),l().createElement("input",{type:"checkbox",checked:t.shadow||!1,onChange:function(t){return r(e.id,"shadow",t.target.checked)}})),t.shadow&&l().createElement(l().Fragment,null,l().createElement(A,{label:"Couleur ombre",value:t.shadowColor||"#000000",onChange:function(t){return r(e.id,"shadowColor",t)},presets:["#000000","#ffffff","#64748b","#ef4444","#3b82f6"]}),l().createElement("div",{className:"property-row"},l().createElement("label",null,"DÃ©calage X:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"-20",max:"20",step:"1",value:null!==(i=t.shadowOffsetX)&&void 0!==i?i:2,onChange:function(t){return r(e.id,"shadowOffsetX",T(t.target.value,2))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(s=t.shadowOffsetX)&&void 0!==s?s:2,"px"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"DÃ©calage Y:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"-20",max:"20",step:"1",value:null!==(c=t.shadowOffsetY)&&void 0!==c?c:2,onChange:function(t){return r(e.id,"shadowOffsetY",T(t.target.value,2))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(d=t.shadowOffsetY)&&void 0!==d?d:2,"px"))),w("shadowBlur")&&l().createElement("div",{className:"property-row"},l().createElement("label",null,"Flou ombre:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"20",step:"1",value:null!==(u=t.shadowBlur)&&void 0!==u?u:0,onChange:function(t){return r(e.id,"shadowBlur",T(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(f=t.shadowBlur)&&void 0!==f?f:0,"px"))))),w("brightness")&&l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"LuminositÃ©:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"2",step:"0.1",value:null!==(p=t.brightness)&&void 0!==p?p:1,onChange:function(t){return r(e.id,"brightness",N(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(m=t.brightness)&&void 0!==m?m:1))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Contraste:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"2",step:"0.1",value:null!==(h=t.contrast)&&void 0!==h?h:1,onChange:function(t){return r(e.id,"contrast",N(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(b=t.contrast)&&void 0!==b?b:1))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Saturation:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"2",step:"0.1",value:null!==(g=t.saturate)&&void 0!==g?g:1,onChange:function(t){return r(e.id,"saturate",N(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(y=t.saturate)&&void 0!==y?y:1)))))};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach(function(t){z(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function z(e,t,r){return(t=L(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,L(o.key),o)}}function L(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}var G=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.propertyValidators=new Map,this.propertyPresets=new Map,this.propertyGroups=new Map,this.initDefaults()},t=[{key:"initDefaults",value:function(){var e=this;this.propertyValidators.set("numeric",function(e){return parseFloat(e)||0}),this.propertyValidators.set("positiveNumeric",function(e){return Math.max(0,parseFloat(e)||0)}),this.propertyValidators.set("percentage",function(e){return Math.max(0,Math.min(100,parseFloat(e)||100))}),this.propertyValidators.set("angle",function(e){return((parseFloat(e)||0)%360+360)%360}),this.propertyValidators.set("color",function(t){return e.validateColor(t)}),this.propertyValidators.set("fontSize",function(e){return Math.max(8,Math.min(72,parseInt(e)||14))}),this.propertyValidators.set("borderWidth",function(e){return Math.max(0,Math.min(20,parseInt(e)||0))}),this.propertyValidators.set("borderStyle",function(e){return["solid","dashed","dotted","double"].includes(e)?e:"solid"}),this.propertyValidators.set("borderRadius",function(e){return Math.max(0,Math.min(100,parseInt(e)||0))}),this.propertyPresets.set("colors",{slate:["#f8fafc","#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#1e293b"],blue:["#eff6ff","#dbeafe","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af"],green:["#f0fdf4","#dcfce7","#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d","#166534"],red:["#fef2f2","#fee2e2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c","#991b1b"]}),this.propertyGroups.set("position",["x","y"]),this.propertyGroups.set("dimensions",["width","height"]),this.propertyGroups.set("typography",["fontFamily","fontSize","fontWeight","fontStyle","color","textAlign"]),this.propertyGroups.set("appearance",["backgroundColor","borderColor","borderWidth","borderRadius"]),this.propertyGroups.set("effects",["opacity","shadow","brightness","contrast","saturate"]),this.propertyGroups.set("transform",["rotation","scale"])}},{key:"validateColor",value:function(e){if(!e)return"#000000";if(/^#[0-9A-Fa-f]{6}$/.test(e)||/^#[0-9A-Fa-f]{3}$/.test(e))return e;var t=document.createElement("div");return t.style.color=e,t.style.color||"#000000"}},{key:"validateProperty",value:function(e,t){if("boolean"==typeof t)return t;if(e.startsWith("columns."))return t;var r=this.propertyValidators.get(e);if(r)try{return r(t)}catch(t){return this.getDefaultValue(e)}return this.isNumericProperty(e)?this.validateNumericProperty(e,t):this.isColorProperty(e)?this.validateColorProperty(t):this.isTextStyleProperty(e)?this.validateTextStyleProperty(e,t):t}},{key:"isNumericProperty",value:function(e){return["x","y","width","height","fontSize","opacity","lineHeight","letterSpacing","zIndex","borderWidth","borderRadius","rotation","padding"].includes(e)}},{key:"isColorProperty",value:function(e){return["color","backgroundColor","borderColor"].includes(e)}},{key:"isTextStyleProperty",value:function(e){return["fontWeight","textAlign","textDecoration","textTransform","borderStyle"].includes(e)}},{key:"validateNumericProperty",value:function(e,t){if(null==t||""===t)return this.getDefaultValue(e);var r;if("string"==typeof t){if(r=parseFloat(t),isNaN(r))return this.getDefaultValue(e)}else{if("number"!=typeof t)return this.getDefaultValue(e);r=t}var o={fontSize:{min:8,max:72},opacity:{min:0,max:1},lineHeight:{min:.5,max:3},letterSpacing:{min:-5,max:10},zIndex:{min:-100,max:1e3},borderWidth:{min:0,max:20},borderRadius:{min:0,max:100},rotation:{min:-180,max:180},padding:{min:0,max:100}};if(o[e]){var a=o[e],n=a.min,i=a.max;r=Math.max(n,Math.min(i,r))}return r}},{key:"validateColorProperty",value:function(e){if(!e)return"#000000";if("transparent"===e)return e;if(/^#[0-9A-Fa-f]{6}$/.test(e)||/^#[0-9A-Fa-f]{3}$/.test(e))return e;var t=document.createElement("div");t.style.color=e;var r=t.style.color;return r&&""!==r?e:"#000000"}},{key:"validateTextStyleProperty",value:function(e,t){var r={fontWeight:["normal","bold","100","200","300","400","500","600","700","800","900"],textAlign:["left","center","right","justify"],textDecoration:["none","underline","overline","line-through"],textTransform:["none","capitalize","uppercase","lowercase"],borderStyle:["solid","dashed","dotted","double","none"]};return r[e]&&r[e].includes(t)?t:{fontWeight:"normal",textAlign:"left",textDecoration:"none",textTransform:"none",borderStyle:"solid"}[e]||t}},{key:"getDefaultValue",value:function(e){return{x:0,y:0,width:100,height:50,fontSize:14,opacity:1,lineHeight:1.2,letterSpacing:0,zIndex:0,borderWidth:0,borderRadius:0,rotation:0,padding:0,color:"#333333",backgroundColor:"transparent",borderColor:"#dddddd",fontWeight:"normal",textAlign:"left",textDecoration:"none",textTransform:"none",borderStyle:"solid"}[e]||null}},{key:"getPresets",value:function(e){return this.propertyPresets.get(e)||{}}},{key:"getPropertiesInGroup",value:function(e){return this.propertyGroups.get(e)||[]}},{key:"applyPreset",value:function(e,t){return{"text-title":{fontSize:24,fontWeight:"bold",textAlign:"center",color:"#1e293b"},"text-subtitle":{fontSize:18,fontWeight:"bold",textAlign:"left",color:"#334155"},"text-body":{fontSize:14,fontWeight:"normal",textAlign:"left",color:"#475569"},"text-caption":{fontSize:12,fontWeight:"normal",textAlign:"left",color:"#64748b"},"shape-rounded":{borderRadius:8,borderWidth:1,borderColor:"transparent"},"shape-circle":{borderRadius:50,borderWidth:1,borderColor:"transparent"},"shape-square":{borderRadius:0,borderWidth:1,borderColor:"transparent"},"effect-shadow-soft":{shadow:!0,shadowColor:"#000000",shadowOffsetX:1,shadowOffsetY:1,opacity:90},"effect-shadow-strong":{shadow:!0,shadowColor:"#000000",shadowOffsetX:3,shadowOffsetY:3,opacity:85},"effect-glow":{shadow:!0,shadowColor:"#2563eb",shadowOffsetX:0,shadowOffsetY:0,opacity:95},"color-primary":{backgroundColor:"#2563eb",color:"#ffffff"},"color-secondary":{backgroundColor:"#64748b",color:"#ffffff"},"color-success":{backgroundColor:"#16a34a",color:"#ffffff"},"color-warning":{backgroundColor:"#ca8a04",color:"#ffffff"},"color-error":{backgroundColor:"#dc2626",color:"#ffffff"}}[e]||{}}},{key:"getDefaultProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text";return W(W({},{x:50,y:50,width:100,height:50,opacity:100,rotation:0,scale:100,visible:!0,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderStyle:"solid",borderRadius:0,color:"#1e293b",fontFamily:"Inter, sans-serif",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",text:"Texte",src:"",alt:"",objectFit:"cover",shadow:!1,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2,brightness:100,contrast:100,saturate:100,showHeaders:!0,showBorders:!0,headers:["Produit","QtÃ©","Prix"],dataSource:"order_items",columns:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0},showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1,progressColor:"#3b82f6",progressValue:75,lineColor:"#64748b",lineWidth:2,documentType:"invoice",imageUrl:"",spacing:8,layout:"vertical",alignment:"left",fit:"contain"}),{text:{width:150,height:30},image:{width:150,height:100},rectangle:{backgroundColor:"#f1f5f9",borderWidth:1,width:150,height:80},product_table:{width:300,height:150},customer_info:{width:200,height:100},company_logo:{width:100,height:60},order_number:{width:150,height:30},company_info:{width:200,height:80},document_type:{width:120,height:40},watermark:{width:300,height:200,opacity:10,text:"CONFIDENTIEL"},"progress-bar":{width:200,height:20},barcode:{width:150,height:60},qrcode:{width:80,height:80},icon:{width:50,height:50},line:{height:2}}[e]||{})}},{key:"getComputedProperties",value:function(e){return{absoluteX:e.x+e.width/2,absoluteY:e.y+e.height/2,scaledWidth:e.width*(e.scale/100),scaledHeight:e.height*(e.scale/100),cssTransform:"rotate(".concat(e.rotation,"deg) scale(").concat(e.scale/100,")"),cssFilter:"brightness(".concat(e.brightness,"%) contrast(").concat(e.contrast,"%) saturate(").concat(e.saturate,"%)"),cssBoxShadow:e.shadow?"".concat(e.shadowOffsetX||0,"px ").concat(e.shadowOffsetY||0,"px 4px ").concat(e.shadowColor||"#000000"):"none"}}},{key:"isAnimatable",value:function(e){return["x","y","width","height","rotation","scale","opacity","brightness","contrast","saturate"].includes(e)}},{key:"getPropertyConstraints",value:function(e){return{x:{min:-1e3,max:2e3,step:1},y:{min:-1e3,max:2e3,step:1},width:{min:1,max:2e3,step:1},height:{min:1,max:2e3,step:1},fontSize:{min:8,max:72,step:1},borderWidth:{min:0,max:20,step:1},borderRadius:{min:0,max:100,step:1},rotation:{min:-180,max:180,step:1},scale:{min:10,max:200,step:5},opacity:{min:0,max:100,step:1},brightness:{min:0,max:200,step:5},contrast:{min:0,max:200,step:5},saturate:{min:0,max:200,step:5},shadowOffsetX:{min:-50,max:50,step:1},shadowOffsetY:{min:-50,max:50,step:1}}[e]||{}}}],t&&X(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()),Y={special:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},layout:{backgroundColor:{disabled:!1,default:"#f8fafc"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},text:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},shape:{backgroundColor:{disabled:!1,default:"#e5e7eb"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},media:{backgroundColor:{disabled:!1,default:"#f3f4f6"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},dynamic:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}}},Z={product_table:"special",customer_info:"special",company_logo:"special",company_info:"special",order_number:"special",document_type:"special","progress-bar":"special","layout-header":"layout","layout-footer":"layout","layout-sidebar":"layout","layout-section":"layout","layout-container":"layout","layout-section-divider":"layout","layout-spacer":"layout","layout-two-column":"layout","layout-three-column":"layout",text:"text","dynamic-text":"text","conditional-text":"text",counter:"text","date-dynamic":"text",currency:"text",formula:"text",rectangle:"shape",line:"shape","shape-rectangle":"shape","shape-circle":"shape","shape-line":"shape","shape-arrow":"shape","shape-triangle":"shape","shape-star":"shape",divider:"shape",image:"media","image-upload":"media",logo:"media",barcode:"media",qrcode:"media","qrcode-dynamic":"media",icon:"media","table-dynamic":"dynamic","gradient-box":"dynamic","shadow-box":"dynamic","rounded-box":"dynamic","border-box":"dynamic","background-pattern":"dynamic",watermark:"dynamic","invoice-header":"layout","invoice-address-block":"layout","invoice-info-block":"layout","invoice-products-table":"special","invoice-totals-block":"layout","invoice-payment-terms":"layout","invoice-legal-footer":"layout","invoice-signature-block":"layout"},U=function(e,t){var r=Y[Z[e]||"text"];return!r||!r[t]||!r[t].disabled},H=function(e,t,r){if(!U(e,t))return{valid:!1,reason:Y[Z[e]||"text"][t]&&Y[Z[e]||"text"][t].reason||"PropriÃ©tÃ© non autorisÃ©e"};switch(t){case"backgroundColor":if("string"!=typeof r)return{valid:!1,reason:"La couleur doit Ãªtre une chaÃ®ne"};break;case"borderWidth":if("number"!=typeof r||r<0)return{valid:!1,reason:"La largeur de bordure doit Ãªtre un nombre positif"};break;case"fontSize":if("number"!=typeof r||r<=0)return{valid:!1,reason:"La taille de police doit Ãªtre un nombre positif"};break;case"width":case"height":if("number"!=typeof r||r<=0)return{valid:!1,reason:"Les dimensions doivent Ãªtre positives"}}return{valid:!0}},q=function(e,t,r){var o={borderWidth:0,fontSize:14,width:100,height:50,padding:8};return void 0!==o[t]?o[t]:{backgroundColor:"transparent",borderColor:"transparent",color:"#000000",fontFamily:"Arial, sans-serif"}[t]||r};function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach(function(t){Q(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Q(e,t,r){return(t=function(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}const oe=(0,i.memo)(function(e){var t=e.selectedElements,r=e.elements,o=e.onPropertyChange,a=e.onBatchUpdate,n=te((0,i.useState)("#ffffff"),2),s=n[0],c=n[1],d=te((0,i.useState)(0),2),u=d[0],f=d[1],p=te((0,i.useState)("#000000"),2),m=(p[0],p[1]),h=te((0,i.useState)(!1),2),b=(h[0],h[1]),g=function(e,t,r){var o=K((0,i.useState)({}),2),a=o[0],n=o[1],l=K((0,i.useState)("appearance"),2),s=l[0],c=l[1],d=(0,i.useMemo)(function(){return e.length>0?e[0]:null},[e]);(0,i.useEffect)(function(){if(d){var e={color:"#333333",backgroundColor:"transparent",borderColor:"#dddddd",borderWidth:0,borderStyle:"solid",borderRadius:4,fontSize:14,fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",lineHeight:1.2,letterSpacing:0,tableStyle:"default",columns:"name,price,quantity",showHeaders:!0,showBorders:!0,showSubtotal:!0,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!0,evenRowBg:"#ffffff",evenRowTextColor:"#000000",oddRowBg:"#f8fafc",oddRowTextColor:"#000000"},t=d.type,r=$({},e);Object.keys(e).forEach(function(e){var o=function(e,t){var r=Y[Z[e]||"text"];return r&&r[t]&&void 0!==r[t].default?r[t].default:null}(t,e);null!==o&&(r[e]=o),"special"===Z[t]&&"backgroundColor"===e&&(r[e]="transparent")});var o=$($({},r),d);Object.keys(r).forEach(function(e){if(U(t,e))"special"!==Z[t]||"backgroundColor"!==e||o[e]||(o[e]="transparent");else{var r=q(0,e,o[e]);r!==o[e]&&(o[e]=r)}}),Object.keys(o).forEach(function(e){H(t,e,o[e]).valid||(o[e]=q(0,e,o[e]))}),n(o)}else n({})},[d&&d.id]);var u=(0,i.useCallback)(function(e,o,a){var i=t.find(function(t){return t.id===e});if(i){var l=a;if(H(i.type,o,a).valid){if("boolean"!=typeof a&&!o.startsWith("columns."))try{var s=G.validateProperty(o,a);void 0!==s&&(l=s)}catch(e){}n(function(e){var t;return o.includes(".")?function(e,t,r){var o=t.split("."),a=o.pop();o.reduce(function(e,t){return e[t]&&"object"===V(e[t])?e[t]=$({},e[t]):e[t]={},e[t]},e)[a]=r}(t=$({},e),o,l):t=$($({},e),{},Q({},o,l)),t}),r(e,o,l)}}},[r,t]),f=(0,i.useCallback)(function(e,t){var r={"color-dark":{color:"#1e293b"},"color-light":{color:"#f8fafc"},"color-primary":{color:"#2563eb"},"color-success":{color:"#16a34a"},"color-warning":{color:"#ca8a04"},"color-error":{color:"#dc2626"},"text-title":{fontSize:24,fontWeight:"bold",textAlign:"center"},"text-subtitle":{fontSize:18,fontWeight:"bold",textAlign:"left"},"text-body":{fontSize:14,fontWeight:"normal",textAlign:"left"},"text-caption":{fontSize:12,fontWeight:"normal",textAlign:"left"},"shape-rounded":{borderRadius:8},"shape-circle":{borderRadius:50},"shape-square":{borderRadius:0},"effect-shadow":{shadow:!0,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2},"effect-glow":{shadow:!0,shadowColor:"#2563eb",shadowOffsetX:0,shadowOffsetY:0},"effect-none":{shadow:!1,brightness:100,contrast:100,saturate:100}};r[t]&&Object.entries(r[t]).forEach(function(t){var r=K(t,2),o=r[0],a=r[1];u(e,o,a)})},[u]),p=(0,i.useCallback)(function(e){Object.entries({x:50,y:50,width:100,height:50,backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:1,borderStyle:"solid",borderRadius:4,color:"#333333",fontSize:14,fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",lineHeight:1.2,letterSpacing:0,opacity:100,rotation:0,scale:100,shadow:!1,brightness:100,contrast:100,saturate:100}).forEach(function(t){var r=K(t,2),o=r[0],a=r[1];u(e,o,a)})},[u]);return{localProperties:a,activeTab:s,setActiveTab:c,selectedElement:d,handlePropertyChange:u,applyPropertyPreset:f,resetProperties:p,validatePropertyValue:function(e,t){switch(e){case"x":case"y":case"width":case"height":return Math.max(0,parseInt(t)||0);case"fontSize":return Math.max(8,Math.min(72,parseInt(t)||14));case"lineHeight":return Math.max(.5,Math.min(5,parseFloat(t)||1.2));case"letterSpacing":return Math.max(-5,Math.min(20,parseFloat(t)||0));case"borderWidth":return Math.max(0,Math.min(20,parseInt(t)||0));case"borderStyle":return["solid","dashed","dotted","double"].includes(t)?t:"solid";case"borderRadius":return Math.max(0,Math.min(100,parseInt(t)||0));case"rotation":return((parseInt(t)||0)%360+360)%360;case"scale":return Math.max(10,Math.min(200,parseInt(t)||100));case"opacity":return Math.max(0,Math.min(100,parseInt(t)||100));case"brightness":case"contrast":case"saturate":return Math.max(0,Math.min(200,parseInt(t)||100));case"shadowOffsetX":case"shadowOffsetY":return Math.max(-50,Math.min(50,parseInt(t)||0));default:return t}}}}(t,r,o),y=g.localProperties,v=g.activeTab,w=g.setActiveTab,x=g.handlePropertyChange,E=function(e,t,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3e3,n=(0,i.useRef)(new Map),l=(0,i.useRef)(null),s=(0,i.useRef)(new Map),c=(0,i.useCallback)(function(e,t,r){l.current&&clearTimeout(l.current);var i="".concat(e,".").concat(t);n.current.set(i,{elementId:e,property:t,value:r}),o&&(l.current=setTimeout(function(){u()},a))},[o,a]),d=(0,i.useCallback)(function(e,r,o){l.current&&clearTimeout(l.current),t(e,r,o);var a="".concat(e,".").concat(r);s.current.set(a,o),n.current.delete(a)},[t]),u=(0,i.useCallback)(function(){if(0!==n.current.size){var e=Array.from(n.current.values()),o=e.reduce(function(e,t){return e[t.elementId]||(e[t.elementId]={}),e[t.elementId][t.property]=t.value,e},{});r&&Object.keys(o).length>1?r(o):e.forEach(function(e){var r=e.elementId,o=e.property,a=e.value;t(r,o,a)}),e.forEach(function(e){var t=e.elementId,r=e.property,o=e.value,a="".concat(t,".").concat(r);s.current.set(a,o)}),n.current.clear()}},[t,r]),f=(0,i.useCallback)(function(){u()},[u]),p=(0,i.useCallback)(function(){return n.current.size>0},[]),m=(0,i.useCallback)(function(e){var t=[];return n.current.forEach(function(r,o){r.elementId===e&&t.push(r)}),t},[]),h=(0,i.useCallback)(function(e){var t=[];n.current.forEach(function(r,o){r.elementId===e&&t.push(o)}),t.forEach(function(e){return n.current.delete(e)})},[]),b=(0,i.useCallback)(function(e,t){var r="".concat(e,".").concat(t),o=s.current.get(r);return void 0!==o?(n.current.delete(r),o):null},[]),g=(0,i.useCallback)(function(e,t,r,o){var a=r;return o&&(a=o(r)),a=y(t,a),c(e,t,a),a},[c]),y=function(e,t){switch(e){case"x":case"y":case"width":case"height":return Math.max(0,parseInt(t)||0);case"fontSize":return Math.max(8,Math.min(72,parseInt(t)||14));case"borderWidth":return Math.max(0,Math.min(20,parseInt(t)||0));case"borderRadius":return Math.max(0,Math.min(100,parseInt(t)||0));case"rotation":return((parseInt(t)||0)%360+360)%360;case"scale":return Math.max(10,Math.min(200,parseInt(t)||100));case"opacity":return Math.max(0,Math.min(100,parseInt(t)||100));case"brightness":case"contrast":case"saturate":return Math.max(0,Math.min(200,parseInt(t)||100));case"shadowOffsetX":case"shadowOffsetY":return Math.max(-50,Math.min(50,parseInt(t)||0));default:return t}};return(0,i.useEffect)(function(){return function(){l.current&&clearTimeout(l.current)}},[]),(0,i.useEffect)(function(){o&&n.current.size>0&&u()},[e,o,u]),{sync:c,syncImmediate:d,syncPending:u,forceSync:f,hasPendingChanges:p,getPendingChanges:m,cancelPendingChanges:h,validateAndSync:g,restoreLastSaved:b,pendingChangesCount:n.current.size}}(r,o,a,!0,3e3),C=E.syncImmediate,S=(E.syncBatch,(0,i.useMemo)(function(){return t.length>0?t[0]:null},[t]));(0,i.useEffect)(function(){if(S){c(S.backgroundColor||"#ffffff");var e=S.borderWidth&&S.borderWidth>0?S.borderWidth:1;f(e),m(S.borderColor||"#000000")}},[S]),(0,i.useEffect)(function(){b(!!y.border&&(y.borderWidth||0)>0)},[y.border,y.borderWidth]);var _=(0,i.useCallback)(function(e,t,r){"color"===t&&"transparent"===r&&(r="#333333");var o=r;if("boolean"!=typeof r&&!t.startsWith("columns."))try{if(null==(o=G.validateProperty(t,r)))return}catch(e){return}x(e,t,o),["x","y","width","height","color","fontSize","fontFamily","fontWeight","fontStyle","textAlign","lineHeight","letterSpacing","textDecoration","backgroundColor","backgroundOpacity","borderColor","borderWidth","borderStyle","borderRadius","boxShadowColor","boxShadowBlur","boxShadowSpread","opacity","textShadowBlur","tablePrimaryColor","tableSecondaryColor","template","customContent"].includes(t)&&C(e,t,o)},[x,C]),O=((0,i.useCallback)(function(e,t){S&&S.type&&!isPropertyAllowedForElement(S.type,v,"backgroundColor")||(t?(S&&S.backgroundColor&&"transparent"!==S.backgroundColor?c(S.backgroundColor):s||c("#ffffff"),_(e,"backgroundColor","transparent")):_(e,"backgroundColor",s||"#ffffff"))},[S&&S.backgroundColor,s,_,S&&S.type]),(0,i.useCallback)(function(e,t){if(t)S&&S.borderWidth&&S.borderWidth>0?f(S.borderWidth):f(2),_(e,"borderWidth",0);else{var r=Math.max(u||2,2);_(e,"borderWidth",r)}},[S&&S.borderWidth,u,_]),(0,i.useCallback)(function(){return React.createElement("div",{className:"properties-tabs"},React.createElement("button",{className:"tab-btn ".concat("appearance"===v?"active":""),onClick:function(){return w("appearance")}},"ðŸŽ¨ Apparence"),React.createElement("button",{className:"tab-btn ".concat("layout"===v?"active":""),onClick:function(){return w("layout")}},"ðŸ“ Mise en page"),React.createElement("button",{className:"tab-btn ".concat("content"===v?"active":""),onClick:function(){return w("content")}},"ðŸ“ Contenu"),React.createElement("button",{className:"tab-btn ".concat("effects"===v?"active":""),onClick:function(){return w("effects")}},"âœ¨ Effets"))},[v])),B=(0,i.useCallback)(function(){if(!S)return React.createElement("div",{className:"no-selection"},React.createElement("div",{className:"no-selection-icon"},"ðŸ‘†"),React.createElement("p",null,"SÃ©lectionnez un Ã©lÃ©ment pour modifier ses propriÃ©tÃ©s"),t.length>1&&React.createElement("p",{className:"selection-info"},t.length," Ã©lÃ©ments sÃ©lectionnÃ©s"));var e,r,o,a=(e=S.type,(o={appearance:{text:["colors","typography","borders","effects"],"dynamic-text":["colors","typography","borders","effects"],"layout-header":["colors","typography","borders","effects"],"layout-footer":["colors","typography","borders","effects"],"layout-section":["colors","typography","borders","effects"],logo:["colors","typography","borders","effects"],company_logo:["colors","typography","borders","effects"],product_table:["colors","typography","borders","effects"],default:["colors","typography","borders","effects"]},layout:{text:["position","dimensions","transform","layers"],"dynamic-text":["position","dimensions","transform","layers"],logo:["position","dimensions","transform","layers"],company_logo:["position","dimensions","transform","layers"],product_table:["position","dimensions","transform","layers"],default:["position","dimensions","transform","layers"]},content:{text:["text","variables"],"dynamic-text":["dynamic_text","variables"],logo:["image"],company_logo:["company_fields"],customer_info:["customer_fields"],company_info:["company_fields"],order_number:["order_number"],product_table:["table"],default:[]},effects:{text:["opacity","shadows","filters"],"dynamic-text":["opacity","shadows","filters"],logo:["opacity","shadows"],company_logo:["opacity","shadows"],product_table:["opacity","shadows","filters"],default:["opacity","shadows"]}})[r=v]&&o[r][e]||o[r]&&o[r].default||[]),n=((k[S.type]||k.default)[v]||{sections:[],properties:{}}).sections||[];switch(v){case"appearance":return React.createElement("div",{className:"tab-content"},"product_table"===S.type&&function(e,t,r){return l().createElement(D,{title:"ðŸŽ¨ Apparence du tableau",defaultExpanded:!0},l().createElement("div",{className:"section-content"},l().createElement(F,{selectedStyle:t.tableStyle||"default",onStyleSelect:function(t){return r(e.id,"tableStyle",t)}}),l().createElement(A,{label:"Fond lignes paires",value:t.evenRowBg||"#ffffff",onChange:function(t){return r(e.id,"evenRowBg",t)},presets:["#ffffff","#f8fafc","#f1f5f9","#e2e8f0"]}),l().createElement(A,{label:"Texte lignes paires",value:t.evenRowTextColor||"#000000",onChange:function(t){return r(e.id,"evenRowTextColor",t)},presets:["#000000","#1e293b","#334155","#475569"]}),l().createElement(A,{label:"Fond lignes impaires",value:t.oddRowBg||"#f8fafc",onChange:function(t){return r(e.id,"oddRowBg",t)},presets:["#f8fafc","#f1f5f9","#e2e8f0","#ffffff"]}),l().createElement(A,{label:"Texte lignes impaires",value:t.oddRowTextColor||"#000000",onChange:function(t){return r(e.id,"oddRowTextColor",t)},presets:["#000000","#1e293b","#334155","#475569"]})))}(S,y,_),a.map(function(e){switch(e){case"colors":return function(e,t,r){var o,a;if(!P("colors",e.type))return null;var n="transparent"!==t.backgroundColor;return l().createElement(D,{key:"colors",title:"Couleurs & Apparence",icon:"ðŸŽ¨",defaultOpen:!1,className:"properties-accordion"},"logo"!==e.type&&"company_logo"!==e.type&&l().createElement(A,{label:"Texte",value:t.color,onChange:function(t){r(e.id,"color",t)},presets:["#1e293b","#334155","#475569","#64748b","#94a3b8","#cbd5e1","#000000"],defaultColor:"#333333"}),l().createElement("div",{className:"property-row"},l().createElement("span",null,"Fond activÃ©:"),l().createElement("label",{className:"toggle"},l().createElement("input",{type:"checkbox",checked:n,disabled:!1,onChange:function(t){t.target.checked?r(e.id,"backgroundColor","#ffffff"):r(e.id,"backgroundColor","transparent")}}),l().createElement("span",{className:"toggle-slider"}))),l().createElement("div",{style:{display:n?"block":"none",transition:"opacity 0.3s ease"}},l().createElement(A,{label:"Fond",value:"transparent"===t.backgroundColor?"#ffffff":t.backgroundColor,onChange:function(t){r(e.id,"backgroundColor",t)},presets:["transparent","#ffffff","#f8fafc","#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8"]}),l().createElement("div",{className:"property-row"},l().createElement("label",null,"OpacitÃ© fond:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:null!==(o=t.backgroundOpacity)&&void 0!==o?o:1,onChange:function(t){return r(e.id,"backgroundOpacity",N(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},Math.round(100*(null!==(a=t.backgroundOpacity)&&void 0!==a?a:1)),"%")))))}(S,y,_);case"typography":return P("typography",S.type)?function(e,t,r){return P("typography",e.type)?l().createElement(D,{key:"typography",title:"Typographie",icon:"ðŸ“",defaultOpen:!1,className:"properties-accordion"},l().createElement("div",{className:"property-row"},l().createElement("label",null,"Police:"),l().createElement("select",{value:t.fontFamily||"Arial",onChange:function(t){return r(e.id,"fontFamily",t.target.value)},className:"property-select"},l().createElement("option",{value:"Arial"},"Arial"),l().createElement("option",{value:"Helvetica"},"Helvetica"),l().createElement("option",{value:"Times New Roman"},"Times New Roman"),l().createElement("option",{value:"Courier New"},"Courier New"),l().createElement("option",{value:"Georgia"},"Georgia"),l().createElement("option",{value:"Verdana"},"Verdana"),l().createElement("option",{value:"Trebuchet MS"},"Trebuchet MS"),l().createElement("option",{value:"Comic Sans MS"},"Comic Sans MS"),l().createElement("option",{value:"Impact"},"Impact"),l().createElement("option",{value:"Lucida Console"},"Lucida Console"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Taille:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"8",max:"72",step:"1",value:t.fontSize||12,onChange:function(t){return r(e.id,"fontSize",T(t.target.value,12))},className:"slider"}),l().createElement("span",{className:"slider-value"},t.fontSize||12,"px"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ã‰paisseur:"),l().createElement("select",{value:t.fontWeight||"normal",onChange:function(t){return r(e.id,"fontWeight",t.target.value)},className:"property-select"},l().createElement("option",{value:"normal"},"Normal"),l().createElement("option",{value:"bold"},"Gras"),l().createElement("option",{value:"lighter"},"Fin"),l().createElement("option",{value:"100"},"100"),l().createElement("option",{value:"200"},"200"),l().createElement("option",{value:"300"},"300"),l().createElement("option",{value:"400"},"400"),l().createElement("option",{value:"500"},"500"),l().createElement("option",{value:"600"},"600"),l().createElement("option",{value:"700"},"700"),l().createElement("option",{value:"800"},"800"),l().createElement("option",{value:"900"},"900"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Style:"),l().createElement("select",{value:t.fontStyle||"normal",onChange:function(t){return r(e.id,"fontStyle",t.target.value)},className:"property-select"},l().createElement("option",{value:"normal"},"Normal"),l().createElement("option",{value:"italic"},"Italique"),l().createElement("option",{value:"oblique"},"Oblique"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Alignement:"),l().createElement("div",{className:"alignment-buttons"},l().createElement("button",{className:"alignment-btn ".concat("left"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","left")},title:"Aligner Ã  gauche"},"â¬…ï¸"),l().createElement("button",{className:"alignment-btn ".concat("center"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","center")},title:"Centrer"},"â¬Œ"),l().createElement("button",{className:"alignment-btn ".concat("right"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","right")},title:"Aligner Ã  droite"},"âž¡ï¸"),l().createElement("button",{className:"alignment-btn ".concat("justify"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","justify")},title:"Justifier"},"â¬Œâ¬…ï¸"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Casse:"),l().createElement("select",{value:t.textTransform||"none",onChange:function(t){return r(e.id,"textTransform",t.target.value)},className:"property-select"},l().createElement("option",{value:"none"},"Aucune"),l().createElement("option",{value:"uppercase"},"Majuscules"),l().createElement("option",{value:"lowercase"},"Minuscules"),l().createElement("option",{value:"capitalize"},"PremiÃ¨re lettre"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"DÃ©coration:"),l().createElement("select",{value:t.textDecoration||"none",onChange:function(t){return r(e.id,"textDecoration",t.target.value)},className:"property-select"},l().createElement("option",{value:"none"},"Aucune"),l().createElement("option",{value:"underline"},"SoulignÃ©"),l().createElement("option",{value:"overline"},"SurlignÃ©"),l().createElement("option",{value:"line-through"},"BarrÃ©"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Interligne:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0.8",max:"3",step:"0.1",value:t.lineHeight||1.2,onChange:function(t){return r(e.id,"lineHeight",N(t.target.value,1.2))},className:"slider"}),l().createElement("span",{className:"slider-value"},t.lineHeight||1.2))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Espacement:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"-2",max:"10",step:"0.5",value:t.letterSpacing||0,onChange:function(t){return r(e.id,"letterSpacing",N(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},t.letterSpacing||0,"px")))):null}(S,y,_):null;case"borders":return n.includes("borders")?function(e,t,r){var o,a,n,i;return l().createElement(D,{key:"borders",title:"Bordures & Coins Arrondis",icon:"ðŸ”²",defaultOpen:!1,className:"properties-accordion"},l().createElement(A,{label:"Couleur bordure",value:t.borderColor||"#000000",onChange:function(t){return r(e.id,"borderColor",t)},presets:["#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#000000"]}),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ã‰paisseur bordure:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"10",value:null!==(o=t.borderWidth)&&void 0!==o?o:0,onChange:function(t){return r(e.id,"borderWidth",T(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(a=t.borderWidth)&&void 0!==a?a:0,"px"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Coins arrondis:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"50",value:null!==(n=t.borderRadius)&&void 0!==n?n:0,onChange:function(t){return r(e.id,"borderRadius",T(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(i=t.borderRadius)&&void 0!==i?i:0,"px"))))}(S,y,_,0):null;case"effects":return n.includes("effects")?I(S,y,_):null;default:return null}}));case"layout":return React.createElement("div",{className:"tab-content"},function(e,t,r){var o,a,n,i,s,c,d,u,f,p,m,h,b,g,y,v;return l().createElement("div",{className:"layout-sections"},l().createElement(D,{key:"position",title:"Position",icon:"ðŸ“",defaultOpen:!0,className:"properties-accordion"},l().createElement(R,{label:"Position X:",minWidth:280,className:"adaptive-compact"},l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"800",value:null!==(o=t.x)&&void 0!==o?o:0,onChange:function(t){return r(e.id,"x",T(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(a=t.x)&&void 0!==a?a:0,"px"))),l().createElement(R,{label:"Position Y:",minWidth:280,className:"adaptive-compact"},l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"1000",value:null!==(n=t.y)&&void 0!==n?n:0,onChange:function(t){return r(e.id,"y",T(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(i=t.y)&&void 0!==i?i:0,"px")))),l().createElement(D,{key:"dimensions",title:"Dimensions",icon:"ðŸ“",defaultOpen:!1,className:"properties-accordion"},l().createElement(R,{label:"Largeur:",minWidth:280,className:"adaptive-compact"},l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"10",max:"800",value:null!==(s=t.width)&&void 0!==s?s:200,onChange:function(t){return r(e.id,"width",T(t.target.value,200))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(c=t.width)&&void 0!==c?c:200,"px"))),l().createElement(R,{label:"Hauteur:",minWidth:280,className:"adaptive-compact"},l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"10",max:"600",value:null!==(d=t.height)&&void 0!==d?d:100,onChange:function(t){return r(e.id,"height",T(t.target.value,100))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(u=t.height)&&void 0!==u?u:100,"px")))),l().createElement(D,{key:"transformations",title:"Transformations",icon:"ðŸ”„",defaultOpen:!1,className:"properties-accordion"},l().createElement("div",{className:"property-row"},l().createElement("label",null,"Rotation:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"-180",max:"180",value:null!==(f=t.rotation)&&void 0!==f?f:0,onChange:function(t){return r(e.id,"rotation",T(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(p=t.rotation)&&void 0!==p?p:0,"Â°"))),"PRODUCT_TABLE"===e.type&&l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ã‰chelle X:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:null!==(m=t.scaleX)&&void 0!==m?m:1,onChange:function(t){return r(e.id,"scaleX",N(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(h=t.scaleX)&&void 0!==h?h:1))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ã‰chelle Y:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:null!==(b=t.scaleY)&&void 0!==b?b:1,onChange:function(t){return r(e.id,"scaleY",N(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(g=t.scaleY)&&void 0!==g?g:1))))),l().createElement(D,{key:"layers",title:"Calques",icon:"ðŸ“š",defaultOpen:!1,className:"properties-accordion"},l().createElement("div",{className:"property-row"},l().createElement("label",null,"Calque (Z-Index):"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"100",value:null!==(y=t.zIndex)&&void 0!==y?y:1,onChange:function(t){return r(e.id,"zIndex",T(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(v=t.zIndex)&&void 0!==v?v:1)))))}(S,y,_));case"content":return React.createElement("div",{className:"tab-content"},function(e,t,r){var o=function(){var o,a,n,i,s,c,d,u,f,p;switch(e.type){case"text":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Texte:"),l().createElement("textarea",{value:t.text||"",onChange:function(t){return r(e.id,"text",t.target.value)},rows:"3",placeholder:"Entrez votre texte ici...",className:"text-input"})));case"dynamic-text":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Texte dynamique:"),l().createElement("input",{type:"text",value:t.dynamicText||"",onChange:function(t){return r(e.id,"dynamicText",t.target.value)},placeholder:"Variable ou expression...",className:"text-input"})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Variables:"),l().createElement("textarea",{value:t.variables||"",onChange:function(t){return r(e.id,"variables",t.target.value)},rows:"2",placeholder:"Variables disponibles...",className:"text-input",readOnly:!0})));case"company_logo":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"URL Image:"),l().createElement("input",{type:"text",value:t.imageUrl||"",onChange:function(t){return r(e.id,"imageUrl",t.target.value)},placeholder:"https://...",className:"text-input"})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Texte alternatif:"),l().createElement("input",{type:"text",value:t.alt||"",onChange:function(t){return r(e.id,"alt",t.target.value)},placeholder:"Description de l'image...",className:"text-input"})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ajustement:"),l().createElement("select",{value:t.objectFit||"contain",onChange:function(t){return r(e.id,"objectFit",t.target.value)},className:"styled-select"},l().createElement("option",{value:"contain"},"Contenir"),l().createElement("option",{value:"cover"},"Couvrir"),l().createElement("option",{value:"fill"},"Remplir"),l().createElement("option",{value:"none"},"Aucun"),l().createElement("option",{value:"scale-down"},"RÃ©duire"))));case"product_table":return l().createElement(l().Fragment,null,l().createElement(R,{label:"Configuration des colonnes:",minWidth:400,className:"adaptive-compact",demoMode:!0},l().createElement("input",{type:"text",value:t.columns||"name,price,quantity",onChange:function(t){return r(e.id,"columns",t.target.value)},placeholder:"name,price,quantity...",className:"text-input"})),l().createElement(R,{label:"Options d'affichage:",minWidth:350,forceVertical:!0,className:"adaptive-spacious"},l().createElement("div",{className:"checkbox-group"},l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher en-tÃªtes:"),l().createElement("input",{type:"checkbox",checked:null===(o=t.showHeaders)||void 0===o||o,onChange:function(t){return r(e.id,"showHeaders",t.target.checked)}})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher bordures:"),l().createElement("input",{type:"checkbox",checked:null===(a=t.showBorders)||void 0===a||a,onChange:function(t){return r(e.id,"showBorders",t.target.checked)}})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher sous-total:"),l().createElement("input",{type:"checkbox",checked:null===(n=t.showSubtotal)||void 0===n||n,onChange:function(t){return r(e.id,"showSubtotal",t.target.checked)}})))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher frais de port:"),l().createElement("input",{type:"checkbox",checked:null===(i=t.showShipping)||void 0===i||i,onChange:function(t){return r(e.id,"showShipping",t.target.checked)}})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher taxes:"),l().createElement("input",{type:"checkbox",checked:null===(s=t.showTaxes)||void 0===s||s,onChange:function(t){return r(e.id,"showTaxes",t.target.checked)}})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher remise:"),l().createElement("input",{type:"checkbox",checked:null!==(c=t.showDiscount)&&void 0!==c&&c,onChange:function(t){return r(e.id,"showDiscount",t.target.checked)}})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher total:"),l().createElement("input",{type:"checkbox",checked:null===(d=t.showTotal)||void 0===d||d,onChange:function(t){return r(e.id,"showTotal",t.target.checked)}})));case"order_number":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Format:"),l().createElement("select",{value:t.format||"#0001",onChange:function(t){return r(e.id,"format",t.target.value)},className:"styled-select"},l().createElement("option",{value:"#0001"},"#0001"),l().createElement("option",{value:"CMD-0001"},"CMD-0001"),l().createElement("option",{value:"ORDER-0001"},"ORDER-0001"),l().createElement("option",{value:"NÂ°0001"},"NÂ°0001"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher Ã©tiquette:"),l().createElement("input",{type:"checkbox",checked:null===(u=t.showLabel)||void 0===u||u,onChange:function(t){return r(e.id,"showLabel",t.target.checked)}})),t.showLabel&&l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Texte Ã©tiquette:"),l().createElement("input",{type:"text",value:t.labelText||"NÂ° Commande",onChange:function(t){return r(e.id,"labelText",t.target.value)},className:"text-input"})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Alignement Ã©tiquette:"),l().createElement("select",{value:t.labelAlign||"left",onChange:function(t){return r(e.id,"labelAlign",t.target.value)},className:"styled-select"},l().createElement("option",{value:"left"},"Gauche"),l().createElement("option",{value:"center"},"Centre"),l().createElement("option",{value:"right"},"Droite")))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"NÂ° commande aperÃ§u:"),l().createElement("input",{type:"number",min:"1",value:null!==(f=t.previewOrderNumber)&&void 0!==f?f:1,onChange:function(t){return r(e.id,"previewOrderNumber",T(t.target.value,1))},className:"number-input"})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Mettre en Ã©vidence:"),l().createElement("input",{type:"checkbox",checked:null!==(p=t.highlightNumber)&&void 0!==p&&p,onChange:function(t){return r(e.id,"highlightNumber",t.target.checked)}})),t.highlightNumber&&l().createElement(A,{label:"Fond numÃ©ro",value:t.numberBackground||"#f0f0f0",onChange:function(t){return r(e.id,"numberBackground",t)},presets:["#f0f0f0","#ffeaa7","#fdcb6e","#e17055","#fd79a8"]}));case"customer_info":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Nom client:"),l().createElement("input",{type:"text",value:t.customerName||"[Nom du client]",onChange:function(t){return r(e.id,"customerName",t.target.value)},className:"text-input",readOnly:!0})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Adresse client:"),l().createElement("textarea",{value:t.customerAddress||"[Adresse du client]",onChange:function(t){return r(e.id,"customerAddress",t.target.value)},rows:"2",className:"text-input",readOnly:!0})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"TÃ©lÃ©phone client:"),l().createElement("input",{type:"text",value:t.customerPhone||"[TÃ©lÃ©phone]",onChange:function(t){return r(e.id,"customerPhone",t.target.value)},className:"text-input",readOnly:!0})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Email client:"),l().createElement("input",{type:"text",value:t.customerEmail||"[Email]",onChange:function(t){return r(e.id,"customerEmail",t.target.value)},className:"text-input",readOnly:!0})));case"company_info":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Template:"),l().createElement("select",{value:t.template||"default",onChange:function(t){return r(e.id,"template",t.target.value)},className:"select-input"},l().createElement("option",{value:"default"},"Par dÃ©faut"),l().createElement("option",{value:"commercial"},"Commercial"))));case"mentions":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Type de mentions:"),l().createElement("select",{value:t.type||"legal",onChange:function(t){return r(e.id,"type",t.target.value)},className:"select-input"},l().createElement("option",{value:"legal"},"Mentions lÃ©gales"),l().createElement("option",{value:"warranty"},"Garantie"),l().createElement("option",{value:"custom"},"PersonnalisÃ©"))));case"rectangle":case"circle":case"line":case"arrow":return l().createElement("div",{className:"property-row"},l().createElement("span",{className:"info-text"},"Cet Ã©lÃ©ment n'a pas de propriÃ©tÃ©s de contenu spÃ©cifiques."));default:return null}}();return o?l().createElement(D,{key:"content",title:"Contenu",icon:"ðŸ“",defaultOpen:!1,className:"properties-accordion"},o):null}(S,y,_));case"effects":return React.createElement("div",{className:"tab-content"},I&&P("effects",S.type)?I(S,y,_):React.createElement("div",{className:"no-effects"},React.createElement("p",null,"Aucun effet disponible pour cet Ã©lÃ©ment")));default:return null}},[v,S,y,_,t.length]);return React.createElement("div",{className:"properties-panel"},React.createElement("div",{className:"properties-header"},React.createElement("h3",null,"PropriÃ©tÃ©s"),S&&React.createElement("div",{className:"element-info"},React.createElement("span",{className:"element-type"},S.type),React.createElement("span",{className:"element-id"},"#",S.id))),O(),React.createElement("div",{className:"properties-content"},B()))});function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach(function(t){le(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function le(e,t,r){return(t=function(e){var t=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function n(r,o,a,n){var s=o&&o.prototype instanceof l?o:l,c=Object.create(s.prototype);return ce(c,"_invoke",function(r,o,a){var n,l,s,c=0,d=a||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return n=t,l=0,s=e,f.n=r,i}};function p(r,o){for(l=r,s=o,t=0;!u&&c&&!a&&t<d.length;t++){var a,n=d[t],p=f.p,m=n[2];r>3?(a=m===o)&&(s=n[(l=n[4])?5:(l=3,3)],n[4]=n[5]=e):n[0]<=p&&((a=r<2&&p<n[1])?(l=0,f.v=o,f.n=n[1]):p<m&&(a=r<3||n[0]>o||o>m)&&(n[4]=r,n[5]=o,f.n=m,l=0))}if(a||r>1)return i;throw u=!0,o}return function(a,d,m){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,m),l=d,s=m;(t=l<2?e:s)||!u;){n||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,n){if(l||(a="next"),t=n[a]){if(!(t=t.call(n,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=n.return)&&t.call(n),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);n=e}else if((t=(u=f.n<0)?s:r.call(o,f))!==i)break}catch(t){n=e,l=1,s=t}finally{c=1}}return{value:t,done:u}}}(r,a,n),!0),c}var i={};function l(){}function s(){}function c(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(ce(t={},o,function(){return this}),t),u=c.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,ce(e,a,"GeneratorFunction")),e.prototype=Object.create(u),e}return s.prototype=c,ce(u,"constructor",c),ce(c,"constructor",s),s.displayName="GeneratorFunction",ce(c,a,"GeneratorFunction"),ce(u),ce(u,a,"Generator"),ce(u,o,function(){return this}),ce(u,"toString",function(){return"[object Generator]"}),(se=function(){return{w:n,m:f}})()}function ce(e,t,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ce=function(e,t,r,o){function n(t,r){ce(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(n("next",0),n("throw",1),n("return",2))},ce(e,t,r,o)}function de(e,t,r,o,a,n,i){try{var l=e[n](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(o,a)}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}const pe=function(e){var t=e.templateName,r=e.isNew,o=e.onSave,a=e.onCreateNew,n=e.onPreview,s=ue((0,i.useState)(!1),2),c=s[0],d=s[1],u=ue((0,i.useState)({name:"",width:595,height:842,orientation:"portrait"}),2),f=u[0],p=u[1],m=ue((0,i.useState)(!1),2),h=m[0],b=m[1],g=ue((0,i.useState)(""),2),y=g[0],v=g[1],w=function(){var e,t=(e=se().m(function e(){return se().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!o){e.n=5;break}return b(!0),v(""),e.p=1,e.n=2,o();case 2:v("Template sauvegardÃ© avec succÃ¨s !"),setTimeout(function(){return v("")},3e3),e.n=4;break;case 3:e.p=3,e.v,v("Erreur lors de la sauvegarde"),setTimeout(function(){return v("")},3e3);case 4:return e.p=4,b(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}),function(){var t=this,r=arguments;return new Promise(function(o,a){var n=e.apply(t,r);function i(e){de(n,o,a,i,l,"next",e)}function l(e){de(n,o,a,i,l,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}();return l().createElement(l().Fragment,null,l().createElement("div",{className:"template-header"},l().createElement("div",{className:"header-left"},l().createElement("button",{className:"header-btn new-template-btn",onClick:function(){return d(!0)},title:"CrÃ©er un nouveau template"},l().createElement("span",{className:"btn-icon"},"ðŸ“„"),l().createElement("span",{className:"btn-text"},"Nouveau template"))),l().createElement("div",{className:"header-center"},l().createElement("h2",{className:"template-title"},r?"Nouveau template":"Modifier: ".concat(t||"Template sans nom")),y&&l().createElement("div",{className:"save-message ".concat(y.includes("succÃ¨s")?"success":"error")},y)),l().createElement("div",{className:"header-right"},l().createElement("button",{className:"header-btn save-btn ".concat(h?"saving":""),onClick:w,disabled:h,title:r?"Sauvegarder le template":"Modifier le template"},l().createElement("span",{className:"btn-icon"},h?"â³":r?"ðŸ’¾":"âœï¸"),l().createElement("span",{className:"btn-text"},h?"Sauvegarde...":r?"Sauvegarder":"Modifier")),l().createElement("button",{className:"header-btn preview-btn",onClick:n,title:"AperÃ§u du PDF"},l().createElement("span",{className:"btn-icon"},"ðŸ‘ï¸"),l().createElement("span",{className:"btn-text"},"AperÃ§u")))),c&&l().createElement("div",{className:"modal-overlay",onClick:function(){return d(!1)}},l().createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}},l().createElement("div",{className:"modal-header"},l().createElement("h3",null,"CrÃ©er un nouveau template"),l().createElement("button",{className:"modal-close",onClick:function(){return d(!1)}},"Ã—")),l().createElement("div",{className:"modal-body"},l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"template-name"},"Nom du template"),l().createElement("input",{id:"template-name",type:"text",value:f.name,onChange:function(e){return p(ie(ie({},f),{},{name:e.target.value}))},placeholder:"Entrez le nom du template"})),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"template-width"},"Largeur (px)"),l().createElement("input",{id:"template-width",type:"number",value:f.width,onChange:function(e){return p(ie(ie({},f),{},{width:parseInt(e.target.value)}))},min:"100",max:"2000"})),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"template-height"},"Hauteur (px)"),l().createElement("input",{id:"template-height",type:"number",value:f.height,onChange:function(e){return p(ie(ie({},f),{},{height:parseInt(e.target.value)}))},min:"100",max:"3000"})),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"template-orientation"},"Orientation"),l().createElement("select",{id:"template-orientation",value:f.orientation,onChange:function(e){return p(ie(ie({},f),{},{orientation:e.target.value}))}},l().createElement("option",{value:"portrait"},"Portrait"),l().createElement("option",{value:"landscape"},"Paysage")))),l().createElement("div",{className:"modal-footer"},l().createElement("button",{className:"btn-secondary",onClick:function(){return d(!1)}},"Annuler"),l().createElement("button",{className:"btn-primary",onClick:function(){a&&a(f),d(!1),p({name:"",width:595,height:842,orientation:"portrait"})},disabled:!f.name.trim()},"CrÃ©er le template")))))};function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach(function(t){xe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ye(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function n(r,o,a,n){var s=o&&o.prototype instanceof l?o:l,c=Object.create(s.prototype);return ve(c,"_invoke",function(r,o,a){var n,l,s,c=0,d=a||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return n=t,l=0,s=e,f.n=r,i}};function p(r,o){for(l=r,s=o,t=0;!u&&c&&!a&&t<d.length;t++){var a,n=d[t],p=f.p,m=n[2];r>3?(a=m===o)&&(s=n[(l=n[4])?5:(l=3,3)],n[4]=n[5]=e):n[0]<=p&&((a=r<2&&p<n[1])?(l=0,f.v=o,f.n=n[1]):p<m&&(a=r<3||n[0]>o||o>m)&&(n[4]=r,n[5]=o,f.n=m,l=0))}if(a||r>1)return i;throw u=!0,o}return function(a,d,m){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,m),l=d,s=m;(t=l<2?e:s)||!u;){n||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,n){if(l||(a="next"),t=n[a]){if(!(t=t.call(n,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=n.return)&&t.call(n),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);n=e}else if((t=(u=f.n<0)?s:r.call(o,f))!==i)break}catch(t){n=e,l=1,s=t}finally{c=1}}return{value:t,done:u}}}(r,a,n),!0),c}var i={};function l(){}function s(){}function c(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(ve(t={},o,function(){return this}),t),u=c.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,ve(e,a,"GeneratorFunction")),e.prototype=Object.create(u),e}return s.prototype=c,ve(u,"constructor",c),ve(c,"constructor",s),s.displayName="GeneratorFunction",ve(c,a,"GeneratorFunction"),ve(u),ve(u,a,"Generator"),ve(u,o,function(){return this}),ve(u,"toString",function(){return"[object Generator]"}),(ye=function(){return{w:n,m:f}})()}function ve(e,t,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ve=function(e,t,r,o){function n(t,r){ve(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(n("next",0),n("throw",1),n("return",2))},ve(e,t,r,o)}function we(e,t,r,o,a,n,i){try{var l=e[n](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(o,a)}function xe(e,t,r){return(t=Ce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ce(o.key),o)}}function Ce(e){var t=function(e){if("object"!=me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==me(t)?t:t+""}var Se=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sampleData={products:[{name:'Ordinateur Portable Pro 15"',sku:"LAPTOP-PRO-15",quantity:1,price:"999,99 â‚¬",regular_price:"1 199,99 â‚¬",sale_price:"999,99 â‚¬",total:"999,99 â‚¬",subtotal:"999,99 â‚¬",tax:"199,99 â‚¬",discount:"200,00 â‚¬",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNGY0NmU1Ii8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxBUFQ8L3RleHQ+Cjwvc3ZnPg==",description:'Ordinateur portable professionnel avec Ã©cran 15" 4K, processeur Intel i7, 16GB RAM, SSD 512GB.',short_description:'Ordinateur portable professionnel 15" 4K',categories:["Informatique","Ordinateurs Portables"],weight:"2.1 kg",dimensions:"35.5 x 24.5 x 1.8 cm",attributes:{Processeur:"Intel Core i7-11800H",RAM:"16GB DDR4",Stockage:"SSD 512GB NVMe",Ã‰cran:'15.6" 4K UHD'},stock_quantity:15,stock_status:"en_stock",product_type:"simple",is_on_sale:!0,is_virtual:!1,is_downloadable:!1,meta_data:{_custom_field:"Valeur personnalisÃ©e"}},{name:"Souris Gaming RGB Optique",sku:"MOUSE-RGB-001",quantity:2,price:"49,99 â‚¬",regular_price:"59,99 â‚¬",sale_price:"49,99 â‚¬",total:"99,98 â‚¬",subtotal:"99,98 â‚¬",tax:"19,99 â‚¬",discount:"20,00 â‚¬",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjMDU5NjY5Ii8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk1PVVNFPPC90ZXh0Pgo8L3N2Zz4=",description:"Souris gaming optique RGB avec capteur PixArt 3335, 16 000 DPI, switches Omron et Ã©clairage RGB personnalisable.",short_description:"Souris gaming RGB 16K DPI",categories:["Informatique","PÃ©riphÃ©riques","Gaming"],weight:"0.085 kg",dimensions:"12.5 x 6.8 x 3.8 cm",attributes:{DPI:"16 000",Switches:"Omron",Ã‰clairage:"RGB",Capteur:"PixArt 3335"},stock_quantity:45,stock_status:"en_stock",product_type:"simple",is_on_sale:!0,is_virtual:!1,is_downloadable:!1,meta_data:{}},{name:"Clavier MÃ©canique Gaming",sku:"KEYBOARD-MECH-001",quantity:1,price:"129,99 â‚¬",regular_price:"149,99 â‚¬",sale_price:"129,99 â‚¬",total:"129,99 â‚¬",subtotal:"129,99 â‚¬",tax:"25,99 â‚¬",discount:"20,00 â‚¬",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZGMyNjI2Ii8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPktFWUI8L3RleHQ+Cjwvc3ZnPg==",description:"Clavier mÃ©canique gaming avec switches Cherry MX Red, Ã©clairage RGB par touche, repose-poignets ergonomique.",short_description:"Clavier mÃ©canique RGB Cherry MX",categories:["Informatique","PÃ©riphÃ©riques","Gaming"],weight:"0.95 kg",dimensions:"43.5 x 13.5 x 3.8 cm",attributes:{Switches:"Cherry MX Red",Ã‰clairage:"RGB par touche",Disposition:"AZERTY",Connexion:"USB-C"},stock_quantity:8,stock_status:"en_stock",product_type:"simple",is_on_sale:!0,is_virtual:!1,is_downloadable:!1,meta_data:{_warranty:"2 ans"}}],customer:{name:"Marie Dubois",email:"marie.dubois@email.com",phone:"+33 6 12 34 56 78",address:"15 Avenue des Champs-Ã‰lysÃ©es\nBP 12345\n75008 Paris\nFrance",billing_address:"15 Avenue des Champs-Ã‰lysÃ©es\nBP 12345\n75008 Paris\nFrance",shipping_address:"456 Avenue des Roses\nBP 67890\n75016 Paris\nFrance",company:"TechCorp SARL",vat:"FR12345678901",siret:"12345678901234"},company:{name:"Ma SociÃ©tÃ© SARL",address:"123 Rue de la Paix\nBoÃ®te Postale 987\n75001 Paris\nFrance",phone:"+33 1 42 86 75 30",email:"contact@masociete.com",website:"www.masociete.com",vat:"FR98765432109",rcs:"Paris B 123 456 789",siret:"98765432109876"},order:{number:"CMD-2025-001",date:"19/10/2025",due_date:"19/11/2025",total:"1 229,96 â‚¬",subtotal:"1 129,97 â‚¬",tax:"99,99 â‚¬",shipping:"15,00 â‚¬",discount:"15,00 â‚¬",status:"Traitement en cours",paymentMethod:"Carte bancaire",shippingMethod:"Colissimo 48h",tableStyles:xe(xe(xe(xe(xe(xe(xe(xe(xe({default:{header_bg:[248,249,250],header_border:[226,232,240],row_border:[241,245,249],alt_row_bg:[250,251,252],headerTextColor:"#000000",rowTextColor:"#000000",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},classic:{header_bg:[30,41,59],header_border:[51,65,85],row_border:[51,65,85],alt_row_bg:[255,255,255],headerTextColor:"#ffffff",rowTextColor:"#1e293b",border_width:1.5,headerFontWeight:"700",headerFontSize:"11px",rowFontSize:"10px"},blue:{header_bg:[224,242,254],header_border:[14,165,233],row_border:[240,249,255],alt_row_bg:[248,249,252],headerTextColor:"#0c4a6e",rowTextColor:"#334155",border_width:1,headerFontWeight:"bold",headerFontSize:"11px",rowFontSize:"10px"},minimal:{header_bg:[255,255,255],header_border:[229,231,235],row_border:[229,231,235],alt_row_bg:[255,255,255],headerTextColor:"#374151",rowTextColor:"#374151",border_width:1,headerFontWeight:"600",headerFontSize:"12px",rowFontSize:"11px"},light:{header_bg:[249,250,251],header_border:[209,213,219],row_border:[229,231,235],alt_row_bg:[255,255,255],headerTextColor:"#111827",rowTextColor:"#374151",border_width:1,headerFontWeight:"500",headerFontSize:"12px",rowFontSize:"11px"},emerald_forest:{header_bg:[209,250,229],header_border:[16,185,129],row_border:[236,253,245],alt_row_bg:[236,253,245],headerTextColor:"#065f46",rowTextColor:"#065f46",border_width:1,headerFontWeight:"bold",headerFontSize:"11px",rowFontSize:"10px"},striped:{header_bg:[75,85,99],header_border:[107,114,128],row_border:[229,231,235],alt_row_bg:[249,250,251],headerTextColor:"#ffffff",rowTextColor:"#374151",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},bordered:{header_bg:[31,41,55],header_border:[55,65,81],row_border:[55,65,81],alt_row_bg:[255,255,255],headerTextColor:"#ffffff",rowTextColor:"#1f2937",border_width:2,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},modern:{header_bg:[17,24,39],header_border:[75,85,99],row_border:[209,213,219],alt_row_bg:[243,244,246],headerTextColor:"#ffffff",rowTextColor:"#374151",border_width:1,headerFontWeight:"600",headerFontSize:"13px",rowFontSize:"12px"},blue_ocean:{header_bg:[219,234,254],header_border:[59,130,246],row_border:[239,246,255],alt_row_bg:[239,246,255],headerTextColor:"#1e40af",rowTextColor:"#0c4a6e",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},sunset_orange:{header_bg:[253,215,170],header_border:[245,101,101],row_border:[255,247,237],alt_row_bg:[255,247,237],headerTextColor:"#c2410c",rowTextColor:"#9a3412",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},royal_purple:{header_bg:[233,213,255],header_border:[168,85,247],row_border:[250,245,255],alt_row_bg:[250,245,255],headerTextColor:"#7c3aed",rowTextColor:"#581c87",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},rose_pink:{header_bg:[254,226,243],header_border:[244,114,182],row_border:[253,242,248],alt_row_bg:[253,242,248],headerTextColor:"#db2777",rowTextColor:"#be123c",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},teal_aqua:{header_bg:[204,251,241],header_border:[20,184,166],row_border:[240,253,250],alt_row_bg:[236,253,245],headerTextColor:"#0d9488",rowTextColor:"#065f46",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},crimson_red:{header_bg:[254,202,202],header_border:[239,68,68],row_border:[254,242,242],alt_row_bg:[254,242,242],headerTextColor:"#dc2626",rowTextColor:"#991b1b",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},amber_gold:{header_bg:[254,243,199],header_border:[245,158,11],row_border:[254,252,232],alt_row_bg:[254,252,232],headerTextColor:"#d97706",rowTextColor:"#92400e",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},indigo_night:{header_bg:[238,242,255],header_border:[99,102,241],row_border:[238,242,255],alt_row_bg:[245,243,255],headerTextColor:"#4338ca",rowTextColor:"#312e81",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},slate_gray:{header_bg:[51,65,85],header_border:[100,116,139],row_border:[203,213,225],alt_row_bg:[248,250,252],headerTextColor:"#ffffff",rowTextColor:"#334155",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},coral_sunset:{header_bg:[194,65,12],header_border:[251,146,60],row_border:[253,186,116],alt_row_bg:[255,247,237],headerTextColor:"#ffffff",rowTextColor:"#9a3412",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},mint_green:{header_bg:[34,197,94],header_border:[74,222,128],row_border:[187,247,208],alt_row_bg:[240,253,244],headerTextColor:"#ffffff",rowTextColor:"#166534",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},violet_dream:{header_bg:[109,40,217],header_border:[168,85,247],row_border:[233,213,255],alt_row_bg:[251,245,255],headerTextColor:"#ffffff",rowTextColor:"#6b21a8",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},sky_blue:{header_bg:[3,105,161],header_border:[14,165,233],row_border:[125,211,252],alt_row_bg:[240,249,255],headerTextColor:"#ffffff",rowTextColor:"#0c4a6e",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},forest_green:{header_bg:[21,128,61],header_border:[34,197,94],row_border:[134,239,172],alt_row_bg:[236,253,245],headerTextColor:"#ffffff",rowTextColor:"#14532d",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},ruby_red:{header_bg:[185,28,28],header_border:[239,68,68],row_border:[252,165,165],alt_row_bg:[254,226,226],headerTextColor:"#ffffff",rowTextColor:"#991b1b",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}},"striped",{header_bg:[224,242,254],header_border:[14,165,233],row_border:[240,249,255],alt_row_bg:[248,249,252],headerTextColor:"#0c4a6e",rowTextColor:"#334155",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"bordered",{header_bg:[248,250,252],header_border:[148,163,184],row_border:[226,232,240],alt_row_bg:[255,255,255],headerTextColor:"#475569",rowTextColor:"#475569",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"minimal",{header_bg:[255,255,255],header_border:[243,244,246],row_border:[249,250,251],alt_row_bg:[255,255,255],headerTextColor:"#6b7280",rowTextColor:"#6b7280",border_width:.5,headerFontWeight:"normal",headerFontSize:"12px",rowFontSize:"11px"}),"modern",{header_bg:[233,213,255],header_border:[168,85,247],row_border:[243,232,255],alt_row_bg:[250,245,255],headerTextColor:"#6b21a8",rowTextColor:"#6b21a8",border_width:1,headerFontWeight:"600",headerFontSize:"13px",rowFontSize:"12px"}),"blue_ocean",{header_bg:[219,234,254],header_border:[59,130,246],row_border:[239,246,255],alt_row_bg:[239,246,255],headerTextColor:"#1e40af",rowTextColor:"#1e40af",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"coral",{header_bg:[254,242,242],header_border:[248,113,113],row_border:[254,242,242],alt_row_bg:[254,242,242],headerTextColor:"#dc2626",rowTextColor:"#dc2626",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"teal",{header_bg:[204,251,241],header_border:[13,148,136],row_border:[240,253,250],alt_row_bg:[240,253,250],headerTextColor:"#0f766e",rowTextColor:"#0f766e",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"indigo",{header_bg:[238,242,255],header_border:[99,102,241],row_border:[238,242,255],alt_row_bg:[238,242,255],headerTextColor:"#3730a3",rowTextColor:"#3730a3",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"amber",{header_bg:[254,243,199],header_border:[245,158,11],row_border:[254,243,199],alt_row_bg:[254,243,199],headerTextColor:"#92400e",rowTextColor:"#92400e",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"})}}},t=[{key:"getElementData",value:(r=ye().m(function e(t,r){var o;return ye().w(function(e){for(;;)switch(e.n){case 0:o=t,e.n="product_table"===o?1:"customer_info"===o?2:"company_logo"===o?3:"company_info"===o?4:"order_number"===o?5:"dynamic-text"===o||"conditional-text"===o?6:"mentions"===o?7:"rectangle"===o||"line"===o||"shape-rectangle"===o||"shape-circle"===o||"shape-line"===o||"shape-arrow"===o||"shape-triangle"===o||"shape-star"===o||"divider"===o?8:"barcode"===o||"qrcode"===o?9:"progress-bar"===o?10:"watermark"===o?11:12;break;case 1:return e.a(2,this.generateProductTableData(r));case 2:return e.a(2,this.generateCustomerInfoData(r));case 3:return e.a(2,this.generateCompanyLogoData(r));case 4:return e.a(2,this.generateCompanyInfoData(r));case 5:return e.a(2,this.generateOrderNumberData(r));case 6:return e.a(2,this.generateDynamicTextData(r));case 7:return e.a(2,this.generateMentionsData(r));case 8:return e.a(2,this.generateRectangleData(r));case 9:return e.a(2,this.generateBarcodeData(r));case 10:return e.a(2,this.generateProgressBarData(r));case 11:return e.a(2,this.generateWatermarkData(r));case 12:return e.a(2,this.generateDefaultData(t,r));case 13:return e.a(2)}},e,this)}),o=function(){var e=this,t=arguments;return new Promise(function(o,a){var n=r.apply(e,t);function i(e){we(n,o,a,i,l,"next",e)}function l(e){we(n,o,a,i,l,"throw",e)}i(void 0)})},function(e,t){return o.apply(this,arguments)})},{key:"generateProductTableData",value:function(e){var t=e.columns,r=void 0===t?{}:t,o=e.showSubtotal,a=void 0!==o&&o,n=e.showShipping,i=void 0===n||n,l=e.showTaxes,s=void 0===l||l,c=e.showDiscount,d=void 0===c||c,u=e.showTotal,f=void 0===u||u,p=e.tableStyle,m=void 0===p?"default":p,h={headers:[],rows:[],totals:{},style:m},b=ge(ge({},{image:!1,name:!0,sku:!1,description:!1,short_description:!1,categories:!1,quantity:!0,price:!0,regular_price:!1,sale_price:!1,discount:!1,tax:!1,weight:!1,dimensions:!1,attributes:!1,stock_quantity:!1,stock_status:!1,total:!0}),r);return!1!==b.image&&h.headers.push("Image"),!1!==b.name&&h.headers.push("Produit"),!1!==b.sku&&h.headers.push("SKU"),!1!==b.description&&h.headers.push("Description"),!1!==b.short_description&&h.headers.push("Description courte"),!1!==b.categories&&h.headers.push("CatÃ©gories"),!1!==b.quantity&&h.headers.push("QtÃ©"),!1!==b.price&&h.headers.push("Prix"),!1!==b.regular_price&&h.headers.push("Prix rÃ©gulier"),!1!==b.sale_price&&h.headers.push("Prix soldÃ©"),!1!==b.discount&&h.headers.push("Remise"),!1!==b.tax&&h.headers.push("TVA"),!1!==b.weight&&h.headers.push("Poids"),!1!==b.dimensions&&h.headers.push("Dimensions"),!1!==b.attributes&&h.headers.push("Attributs"),!1!==b.stock_quantity&&h.headers.push("Stock"),!1!==b.stock_status&&h.headers.push("Statut stock"),!1!==b.total&&h.headers.push("Total"),h.rows=this.sampleData.products.map(function(e){var t=[];if(!1!==b.image&&t.push(e.image),!1!==b.name&&t.push(e.name),!1!==b.sku&&t.push(e.sku||"-"),!1!==b.description&&t.push(e.description||"-"),!1!==b.short_description&&t.push(e.short_description||"-"),!1!==b.categories&&t.push(e.categories?e.categories.join(", "):"-"),!1!==b.quantity&&t.push(e.quantity),!1!==b.price&&t.push(e.price),!1!==b.regular_price&&t.push(e.regular_price||"-"),!1!==b.sale_price&&t.push(e.sale_price||"-"),!1!==b.discount&&t.push(e.discount||"0,00 â‚¬"),!1!==b.tax&&t.push(e.tax||"0,00 â‚¬"),!1!==b.weight&&t.push(e.weight||"-"),!1!==b.dimensions&&t.push(e.dimensions||"-"),!1!==b.attributes){var r=e.attributes?Object.entries(e.attributes).map(function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=t[0],o=t[1];return"".concat(r,": ").concat(o)}).join("; "):"-";t.push(r)}return!1!==b.stock_quantity&&t.push(e.stock_quantity||"-"),!1!==b.stock_status&&t.push("en_stock"===e.stock_status?"En stock":"Rupture"),!1!==b.total&&t.push(e.total),t}),a&&(h.totals.subtotal=this.sampleData.order.subtotal),i&&(h.totals.shipping=this.sampleData.order.shipping),d&&(h.totals.discount=this.sampleData.order.discount),s&&(h.totals.tax=this.sampleData.order.tax),f&&(h.totals.total=this.sampleData.order.total),h.tableStyleData=this.sampleData.order.tableStyles[m]||this.sampleData.order.tableStyles.default,h}},{key:"generateCustomerInfoData",value:function(e){var t=this,r=e.fields,o={};return(void 0===r?[]:r).forEach(function(e){switch(e){case"name":o.name=t.sampleData.customer.name;break;case"email":o.email=t.sampleData.customer.email;break;case"phone":o.phone=t.sampleData.customer.phone;break;case"address":o.address=t.sampleData.customer.address;break;case"company":o.company=t.sampleData.customer.company;break;case"vat":o.vat=t.sampleData.customer.vat;break;case"siret":o.siret=t.sampleData.customer.siret}}),o}},{key:"generateCompanyLogoData",value:function(e){return{imageUrl:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjgwIiB2aWV3Qm94PSIwIDAgMjAwIDgwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjMjU2M2ViIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iNDAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5MT0dPPC90ZXh0Pgo8L3N2Zz4=",alt:"Logo de l'entreprise"}}},{key:"generateCompanyInfoData",value:function(e){var t=this,r=e.fields,o={};return(void 0===r?[]:r).forEach(function(e){switch(e){case"name":o.name=t.sampleData.company.name;break;case"address":o.address=t.sampleData.company.address;break;case"phone":o.phone=t.sampleData.company.phone;break;case"email":o.email=t.sampleData.company.email;break;case"website":o.website=t.sampleData.company.website;break;case"vat":o.vat=t.sampleData.company.vat;break;case"rcs":o.rcs=t.sampleData.company.rcs;break;case"siret":o.siret=t.sampleData.company.siret}}),o}},{key:"generateOrderNumberData",value:function(e){var t=e.format;return{formatted:(void 0===t?"Commande #{order_number} - {order_date}":t).replace("{order_number}",this.sampleData.order.number).replace("{order_date}",this.sampleData.order.date)}}},{key:"generateDynamicTextData",value:function(e){var t=e.template,r=void 0===t?"total_only":t,o=e.customContent,a=void 0===o?"":o,n=e.variables,i=void 0===n?{}:n,l=a,s={total_only:"{{order_total}} â‚¬",order_info:"Commande {{order_number}} - {{order_date}}",customer_info:"{{customer_name}} - {{customer_email}}",customer_address:"{{customer_name}}\n{{billing_address}}",full_header:"Facture NÂ° {{order_number}}\nClient: {{customer_name}}\nTotal: {{order_total}} â‚¬",invoice_header:"FACTURE NÂ° {{order_number}}\nDate: {{date}}\nClient: {{customer_name}}\n{{billing_address}}",order_summary:"Sous-total: {{order_subtotal}} â‚¬\nFrais de port: {{order_shipping}} â‚¬\nTVA: {{order_tax}} â‚¬\nTotal: {{order_total}} â‚¬",payment_info:"Ã‰chÃ©ance: {{due_date}}\nMontant: {{order_total}} â‚¬",payment_terms:"Conditions de paiement: 30 jours\nÃ‰chÃ©ance: {{due_date}}\nMontant dÃ»: {{order_total}} â‚¬",shipping_info:"Adresse de livraison:\n{{shipping_address}}",thank_you:"Merci pour votre commande !\nNous vous remercions de votre confiance.",legal_notice:"TVA non applicable - art. 293 B du CGI\nPaiement Ã  30 jours fin de mois",bank_details:"CoordonnÃ©es bancaires:\nIBAN: FR76 1234 5678 9012 3456 7890 123\nBIC: BNPAFRPP",contact_info:"Contact: contact@monentreprise.com\nTÃ©l: 01 23 45 67 89",order_confirmation:"CONFIRMATION DE COMMANDE\nCommande {{order_number}} du {{order_date}}\nStatut: ConfirmÃ©e",delivery_note:"BON DE LIVRAISON\nCommande {{order_number}}\nDestinataire: {{customer_name}}\n{{shipping_address}}",warranty_info:"Garantie: 2 ans piÃ¨ces et main d'Å“uvre\nService aprÃ¨s-vente: sav@monentreprise.com",return_policy:"Droit de rÃ©tractation: 14 jours\nRetour sous 30 jours pour dÃ©fauts",signature_line:"Signature du client:\n\n_______________________________\nDate: {{date}}",invoice_footer:"Facture gÃ©nÃ©rÃ©e automatiquement le {{date}}\nConservez cette facture pour vos archives",terms_conditions:"Conditions gÃ©nÃ©rales de vente disponibles sur notre site\nwww.monentreprise.com/conditions",quality_guarantee:"Tous nos produits sont garantis contre les dÃ©fauts\nService qualitÃ©: qualite@monentreprise.com",eco_friendly:"Entreprise engagÃ©e pour l'environnement\nEmballages recyclables et biodÃ©gradables",follow_up:"Suivi de commande: {{order_number}}\nContact: suivi@monentreprise.com",custom:a||"{{order_total}} â‚¬"};s[r]?l=s[r]:"custom"===r&&(l=a);var c=ge(ge(ge(ge({},this.sampleData.customer),this.sampleData.company),this.sampleData.order),i);if(Object.keys(c).forEach(function(e){var t=new RegExp("\\{\\{".concat(e,"\\}\\}"),"g");l=l.replace(t,c[e]||"")}),this.sampleData.products&&this.sampleData.products.length>0){var d=this.sampleData.products[0];Object.keys(d).forEach(function(e){var t=new RegExp("\\{\\{product_".concat(e,"\\}\\}"),"g");l=l.replace(t,d[e]||"")})}return{content:l}}},{key:"generateMentionsData",value:function(e){var t=e.showEmail,r=void 0===t||t,o=e.showPhone,a=void 0===o||o,n=e.showSiret,i=void 0===n||n,l=e.showVat,s=void 0!==l&&l,c=e.showAddress,d=void 0!==c&&c,u=e.showWebsite,f=void 0!==u&&u,p=e.showCustomText,m=void 0!==p&&p,h=e.customText,b=void 0===h?"":h,g=[];return r&&g.push(this.sampleData.company.email),a&&g.push(this.sampleData.company.phone),i&&g.push("SIRET: ".concat(this.sampleData.company.siret)),s&&g.push("TVA: ".concat(this.sampleData.company.vat)),d&&g.push(this.sampleData.company.address.replace("\n"," â€¢ ")),f&&g.push(this.sampleData.company.website),m&&b&&g.push(b),{mentions:g}}},{key:"generateRectangleData",value:function(e){return{rendered:!0}}},{key:"generateBarcodeData",value:function(e){var t=e.content;return{code:void 0===t?"123456789":t,format:"qrcode"===e.type?"QR_CODE":"CODE128"}}},{key:"generateProgressBarData",value:function(e){var t=e.progressValue,r=void 0===t?75:t;return{progress:Math.min(100,Math.max(0,r)),label:"".concat(r,"%")}}},{key:"generateWatermarkData",value:function(e){var t=e.content;return{text:void 0===t?"CONFIDENTIEL":t,angle:-45}}},{key:"generateDefaultData",value:function(e,t){return{type:e,placeholder:"DonnÃ©es d'exemple pour ".concat(e),properties:t}}}],t&&Ee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,o}();function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function Ne(e,t,r){return(t=function(e){var t=function(e){if("object"!=_e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_e(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Te=function(e){var t={tableStyle:"default",columns:"name,price,quantity",showHeaders:!0,showBorders:!0,showSubtotal:!0,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!0,evenRowBg:"#ffffff",evenRowTextColor:"#000000",oddRowBg:"#f8fafc",oddRowTextColor:"#000000"};return e.map(function(e){if("product_table"!==e.type)return e;var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach(function(t){Ne(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return Object.keys(t).forEach(function(e){e in r||(r[e]=t[e])}),r.columns&&"string"!=typeof r.columns&&(r.columns=t.columns),r.tableStyle&&"string"!=typeof r.tableStyle&&(r.tableStyle=t.tableStyle),["evenRowBg","evenRowTextColor","oddRowBg","oddRowTextColor"].forEach(function(e){r[e]&&!/^#[0-9A-Fa-f]{6}$/.test(r[e])&&(r[e]=t[e])}),r})};function Pe(e){return function(e){if(Array.isArray(e))return Me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach(function(t){Ae(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ae(e,t,r){return(t=function(e){var t=function(e){if("object"!=We(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==We(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function n(r,o,a,n){var s=o&&o.prototype instanceof l?o:l,c=Object.create(s.prototype);return Re(c,"_invoke",function(r,o,a){var n,l,s,c=0,d=a||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return n=t,l=0,s=e,f.n=r,i}};function p(r,o){for(l=r,s=o,t=0;!u&&c&&!a&&t<d.length;t++){var a,n=d[t],p=f.p,m=n[2];r>3?(a=m===o)&&(s=n[(l=n[4])?5:(l=3,3)],n[4]=n[5]=e):n[0]<=p&&((a=r<2&&p<n[1])?(l=0,f.v=o,f.n=n[1]):p<m&&(a=r<3||n[0]>o||o>m)&&(n[4]=r,n[5]=o,f.n=m,l=0))}if(a||r>1)return i;throw u=!0,o}return function(a,d,m){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,m),l=d,s=m;(t=l<2?e:s)||!u;){n||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,n){if(l||(a="next"),t=n[a]){if(!(t=t.call(n,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=n.return)&&t.call(n),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);n=e}else if((t=(u=f.n<0)?s:r.call(o,f))!==i)break}catch(t){n=e,l=1,s=t}finally{c=1}}return{value:t,done:u}}}(r,a,n),!0),c}var i={};function l(){}function s(){}function c(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(Re(t={},o,function(){return this}),t),u=c.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Re(e,a,"GeneratorFunction")),e.prototype=Object.create(u),e}return s.prototype=c,Re(u,"constructor",c),Re(c,"constructor",s),s.displayName="GeneratorFunction",Re(c,a,"GeneratorFunction"),Re(u),Re(u,a,"Generator"),Re(u,o,function(){return this}),Re(u,"toString",function(){return"[object Generator]"}),(Be=function(){return{w:n,m:f}})()}function Re(e,t,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Re=function(e,t,r,o){function n(t,r){Re(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(n("next",0),n("throw",1),n("return",2))},Re(e,t,r,o)}function Fe(e,t,r,o,a,n,i){try{var l=e[n](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(o,a)}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,a,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=n.call(r)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){if(e){if("string"==typeof e)return Me(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}var ze=function(){var e={default:{headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#f1f5f9",rowBg:"#ffffff",altRowBg:"#fafbfc",borderWidth:1,headerTextColor:"#334155",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(0, 0, 0, 0.08)",shadowBlur:6,borderRadius:6},classic:{headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#e2e8f0",rowBg:"#ffffff",altRowBg:"#f8fafc",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e293b",headerFontWeight:"700",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(0, 0, 0, 0.15)",shadowBlur:8,borderRadius:0},striped:{headerBg:"#e0f2fe",headerBorder:"#0ea5e9",rowBorder:"#f0f9ff",rowBg:"#ffffff",altRowBg:"#f8fafc",borderWidth:1,headerTextColor:"#0c4a6e",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(59, 130, 246, 0.2)",shadowBlur:8,borderRadius:8},bordered:{headerBg:"#f8fafc",headerBorder:"#94a3b8",rowBorder:"#e2e8f0",rowBg:"#ffffff",altRowBg:"#ffffff",borderWidth:1,headerTextColor:"#475569",rowTextColor:"#111827",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:12,borderRadius:8},minimal:{headerBg:"#ffffff",headerBorder:"#d1d5db",rowBorder:"#f3f4f6",rowBg:"#ffffff",altRowBg:"#ffffff",borderWidth:.5,headerTextColor:"#6b7280",rowTextColor:"#6b7280",headerFontWeight:"500",headerFontSize:10,rowFontSize:9,shadowColor:"transparent",shadowBlur:0,borderRadius:0},modern:{headerBg:"#e9d5ff",headerBorder:"#a855f7",rowBorder:"#f3e8ff",rowBg:"#ffffff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#6b21a8",rowTextColor:"#6b21a8",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(102, 126, 234, 0.25)",shadowBlur:20,borderRadius:8},blue_ocean:{headerBg:"#dbeafe",headerBorder:"#3b82f6",rowBorder:"#eff6ff",rowBg:"#ffffff",altRowBg:"#eff6ff",borderWidth:1,headerTextColor:"#1e40af",rowTextColor:"#1e40af",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(59, 130, 246, 0.25)",shadowBlur:20,borderRadius:8},emerald_forest:{headerBg:"#d1fae5",headerBorder:"#10b981",rowBorder:"#ecfdf5",rowBg:"#ffffff",altRowBg:"#ecfdf5",borderWidth:1,headerTextColor:"#065f46",rowTextColor:"#065f46",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(16, 185, 129, 0.25)",shadowBlur:20,borderRadius:8},sunset_orange:{headerBg:"#fed7aa",headerBorder:"#f97316",rowBorder:"#fff7ed",rowBg:"#ffffff",altRowBg:"#fff7ed",borderWidth:1,headerTextColor:"#c2410c",rowTextColor:"#c2410c",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(249, 115, 22, 0.25)",shadowBlur:20,borderRadius:8},royal_purple:{headerBg:"#e9d5ff",headerBorder:"#a855f7",rowBorder:"#faf5ff",rowBg:"#ffffff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#7c3aed",rowTextColor:"#7c3aed",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(168, 85, 247, 0.25)",shadowBlur:20,borderRadius:8},rose_pink:{headerBg:"#fce7f3",headerBorder:"#f472b6",rowBorder:"#fdf2f8",rowBg:"#ffffff",altRowBg:"#fdf2f8",borderWidth:1,headerTextColor:"#db2777",rowTextColor:"#db2777",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(244, 114, 182, 0.25)",shadowBlur:20,borderRadius:8},teal_aqua:{headerBg:"#ccfbf1",headerBorder:"#14b8a6",rowBorder:"#f0fdfa",rowBg:"#ffffff",altRowBg:"#f0fdfa",borderWidth:1,headerTextColor:"#0d9488",rowTextColor:"#0d9488",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(20, 184, 166, 0.25)",shadowBlur:20,borderRadius:8}};return e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]||e.default},Xe=function(e){var t=e.initialElements,r=void 0===t?[]:t,o=e.onSave,a=e.templateName,n=void 0===a?"":a,s=e.isNew,c=void 0===s||s,f=(0,u.$E)().actions.openPreview;console.log("[PDFEditor] PDFEditorContent called with:",{initialElements:r,templateName:n,isNew:c}),console.log("[PDFEditor] initialElements type:",We(r),"length:",Array.isArray(r)?r.length:"not array");var p=Ie((0,i.useState)(function(){var e;e=Array.isArray(r)?r:r&&"object"===We(r)&&r.elements?r.elements:[],console.log("[PDFEditor] Processed initialData:",e);var t=Te(e);return console.log("[PDFEditor] Repaired elements:",t),t}),2),m=p[0],h=p[1],b=Ie((0,i.useState)(null),2),y=b[0],v=b[1],w=y?m.find(function(e){return e.id===y}):null,x=Ie((0,i.useState)([m]),2),E=x[0],C=x[1],S=Ie((0,i.useState)(0),2),k=S[0],N=S[1];(0,i.useEffect)(function(){if(r&&"object"===We(r)&&r.settings){var e=r.settings;Q(e),void 0!==e.zoom&&D(e.zoom),void 0!==e.showGrid&&R(e.showGrid),void 0!==e.snapToGrid&&j(e.snapToGrid),void 0!==e.snapToElements&&z(e.snapToElements),void 0!==e.showElementLibrary&&U(e.showElementLibrary),void 0!==e.showPropertiesPanel&&V(e.showPropertiesPanel)}},[r]);var T=(0,i.useRef)();(0,i.useEffect)(function(){var e=T.current;if(JSON.stringify(e)!==JSON.stringify(r)&&(T.current=r,r)){var t=r;if(Array.isArray(r)?t=r:r&&"object"===We(r)&&r.elements&&(t=r.elements),t&&t.length>0){var o=Te(t);h(o),C([o]),N(0)}else Array.isArray(t)&&0===t.length&&(h([]),C([[]]),N(0))}},[r]);var P=Ie((0,i.useState)(1),2),O=P[0],D=P[1],A=Ie((0,i.useState)(!0),2),B=A[0],R=A[1],F=Ie((0,i.useState)(!0),2),I=F[0],j=F[1],M=Ie((0,i.useState)(!0),2),W=M[0],z=M[1],X=Ie((0,i.useState)("select"),2),L=X[0],G=X[1],Y=Ie((0,i.useState)(!0),2),Z=Y[0],U=Y[1],H=Ie((0,i.useState)(!1),2),q=H[0],V=H[1],J=Ie((0,i.useState)(function(){return r&&"object"===We(r)&&r.settings?r.settings:{}}),2),$=J[0],Q=J[1];(0,i.useEffect)(function(){je()},[m,y,B,O]);var K=Ie((0,i.useState)(!1),2),ee=K[0],te=K[1],re=Ie((0,i.useState)({x:0,y:0}),2),ae=re[0],ne=re[1],ie=Ie((0,i.useState)(null),2),le=ie[0],se=ie[1],ce=Ie((0,i.useState)(!1),2),de=ce[0],ue=ce[1],fe=Ie((0,i.useState)(null),2),me=fe[0],he=fe[1],be=Ie((0,i.useState)({x:0,y:0,width:0,height:0}),2),ge=be[0],ye=be[1],ve=(0,i.useRef)(null),we=function(){var e,t=(e=Be().m(function e(){var t;return Be().w(function(e){for(;;)switch(e.n){case 0:if(!o){e.n=1;break}return t={elements:m,settings:{zoom:O,showGrid:B,snapToGrid:I,snapToElements:W,showElementLibrary:Z,showPropertiesPanel:q}},e.n=1,o(t);case 1:return e.a(2)}},e)}),function(){var t=this,r=arguments;return new Promise(function(o,a){var n=e.apply(t,r);function i(e){Fe(n,o,a,i,l,"next",e)}function l(e){Fe(n,o,a,i,l,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}(),xe=k>0,Ee=k<E.length-1,Ce=function(){f("canvas",null,{elements:m})},_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=De({id:Date.now(),type:e,x:400*Math.random()+50,y:600*Math.random()+50},t),o=[].concat(Pe(m),[r]);Ne(o),v(r.id)},ke=function(e,t){h(function(r){var o=r.map(function(r){return r.id===e?De(De({},r),t):r}),a=E.slice(0,k+1);return a.push(o),C(a),N(a.length-1),o})},Ne=function(e){var t=E.slice(0,k+1);t.push(e),C(t),N(t.length-1),h(e)},Oe=function(e,t){t.x=Math.max(0,Math.min(595-t.width,t.x)),t.y=Math.max(0,Math.min(842-t.height,t.y));var r={min:1,max:2e3},o={min:1,max:2e3};if(t.width=Math.max(e.minWidth||r.min,Math.min(r.max,t.width)),t.height=Math.max(e.minHeight||o.min,Math.min(o.max,t.height)),I){var a=10;t.x=Math.round(t.x/a)*a,t.y=Math.round(t.y/a)*a,t.width=Math.round(t.width/a)*a,t.height=Math.round(t.height/a)*a}return t},Re=function(){te(!1),ue(!1),se(null),he(null)},je=function(){console.log("[PDFEditor] renderCanvas called, elements count:",m.length);var e=ve.current;if(e){console.log("[PDFEditor] renderCanvas: canvas found, starting render");var t=e.getContext("2d");if(t.clearRect(0,0,e.width,e.height),t.fillStyle="#ffffff",t.fillRect(0,0,e.width,e.height),console.log("[PDFEditor] renderCanvas: background drawn"),B){console.log("[PDFEditor] renderCanvas: drawing grid"),t.strokeStyle="#f0f0f0",t.lineWidth=1;for(var r=0;r<=e.width;r+=20)t.beginPath(),t.moveTo(r,0),t.lineTo(r,e.height),t.stroke();for(var o=0;o<=e.height;o+=20)t.beginPath(),t.moveTo(0,o),t.lineTo(e.width,o),t.stroke()}var a=Pe(m).sort(function(e,t){var r=e.zIndex||0,o=t.zIndex||0;return r!==o?r-o:"order_number"===e.type&&"order_number"!==t.type?1:"order_number"===t.type&&"order_number"!==e.type?-1:0});console.log("[PDFEditor] renderCanvas: rendering",a.length,"sorted elements"),a.forEach(function(e,r){if(console.log("[PDFEditor] renderCanvas: rendering element ".concat(r+1,"/").concat(a.length,":"),e.type,"at",e.x,e.y),(w&&w.id)===e.id){if(t.strokeStyle="#007cba",t.lineWidth=2,t.setLineDash([5,5]),"text"===e.type){var o=e.fontWeight?"".concat(e.fontWeight," "):"";t.font="".concat(o).concat(e.fontSize||16,"px ").concat(e.fontFamily||"Arial");var n=t.measureText(e.text||"Texte");t.strokeRect(e.x-5,e.y-e.fontSize-5,n.width+10,e.fontSize+10)}else"rectangle"===e.type?t.strokeRect(e.x-5,e.y-5,(e.width||100)+10,(e.height||50)+10):"circle"===e.type?(t.beginPath(),t.arc(e.x,e.y,(e.radius||25)+5,0,2*Math.PI),t.stroke()):"company_logo"===e.type||"dynamic-text"===e.type||"order_number"===e.type||"document_type"===e.type||"customer_info"===e.type||"company_info"===e.type||"product_table"===e.type||"mentions"===e.type?t.strokeRect(e.x-5,e.y-5,(e.width||100)+10,(e.height||30)+10):"line"===e.type&&t.strokeRect(e.x-5,e.y-10,(e.width||20)+10,(e.height||12)+20);t.setLineDash([])}if((w&&w.id)===e.id&&("rectangle"===e.type||"circle"===e.type||"company_logo"===e.type||"dynamic-text"===e.type||"order_number"===e.type||"document_type"===e.type||"customer_info"===e.type||"company_info"===e.type||"product_table"===e.type||"mentions"===e.type||"line"===e.type)){t.fillStyle="#007cba",t.strokeStyle="#ffffff",t.lineWidth=1;var i=e.width||100,l=e.height||30;"circle"===e.type&&(i=2*(e.radius||25),l=2*(e.radius||25)),[{x:e.x-4,y:e.y-4},{x:e.x+i-4,y:e.y-4},{x:e.x-4,y:e.y+l-4},{x:e.x+i-4,y:e.y+l-4},{x:e.x+i/2-4,y:e.y-4},{x:e.x+i/2-4,y:e.y+l-4},{x:e.x-4,y:e.y+l/2-4},{x:e.x+i-4,y:e.y+l/2-4}].forEach(function(e){t.fillRect(e.x,e.y,8,8),t.strokeRect(e.x,e.y,8,8)})}if(t.save(),e.rotation||void 0!==e.scaleX||void 0!==e.scaleY){var s=e.x+(e.width||100)/2,c=e.y+(e.height||50)/2;if(t.translate(s,c),e.rotation&&t.rotate(e.rotation*Math.PI/180),void 0!==e.scaleX||void 0!==e.scaleY){var d=void 0!==e.scaleX?e.scaleX:1,u=void 0!==e.scaleY?e.scaleY:1;t.scale(d,u)}t.translate(-s,-c)}if("text"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=e.shadowBlur||5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var f=e.x||10,p=e.y||30,m=e.width||200,h=e.height||30;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(f,p,m,h,e.borderRadius),t.fill()):t.fillRect(f,p,m,h)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(f,p,m,h,e.borderRadius),t.stroke()):t.strokeRect(f,p,m,h)),t.fillStyle=e.color||"#000000";var b="italic"===e.fontStyle?"italic ":"",g=e.fontWeight?"".concat(e.fontWeight," "):"";t.font="".concat(b).concat(g).concat(e.fontSize||16,"px ").concat(e.fontFamily||"Arial"),t.textAlign=e.textAlign||"left",e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY?(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0):(t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillText(e.text||"Texte",f,p+.8*(e.fontSize||16))}else if("rectangle"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var y=e.x||10,v=e.y||10,x=e.width||100,E=e.height||50;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(y,v,x,E,e.borderRadius),t.fill()):t.fillRect(y,v,x,E)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(y,v,x,E,e.borderRadius),t.stroke()):t.strokeRect(y,v,x,E)),t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("circle"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var C=e.x||10,S=e.y||10,_=e.radius||25;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,t.beginPath(),t.arc(C,S,_,0,2*Math.PI),t.fill()),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,t.beginPath(),t.arc(C,S,_,0,2*Math.PI),t.stroke()),t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("company_logo"===e.type){if(void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),void 0!==e.brightness||void 0!==e.contrast||void 0!==e.saturate){var k=void 0!==e.brightness?e.brightness/100:1,N=void 0!==e.contrast?e.contrast/100:1,T=void 0!==e.saturate?e.saturate/100:1,P=[];1!==k&&P.push("brightness(".concat(k,")")),1!==N&&P.push("contrast(".concat(N,")")),1!==T&&P.push("saturate(".concat(T,")")),P.length>0&&(t.filter=P.join(" "))}e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=e.shadowBlur||5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var O=e.x||10,D=e.y||10,A=e.width||120,B=e.height||90;if(e.backgroundColor&&"transparent"!==e.backgroundColor){if(e.backgroundColor.includes("gradient")){var R=t.createLinearGradient(O,D,O+A,D+B);e.backgroundColor.includes("linear-gradient")&&(R.addColorStop(0,"#667eea"),R.addColorStop(1,"#764ba2")),t.fillStyle=R}else t.fillStyle=e.backgroundColor;e.borderRadius>0?(t.beginPath(),t.roundRect(O,D,A,B,e.borderRadius),t.fill()):t.fillRect(O,D,A,B)}e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#e5e7eb",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(O,D,A,B,e.borderRadius),t.stroke()):t.strokeRect(O,D,A,B));var F=e.src||e.imageUrl;if(F){var I=new Image;I.onload=function(){var r=I.width/I.height,o=A,a=B,n=O,i=D,l=e.objectFit||"contain";"cover"===l?A/B>r?(a=B,n=O+(A-(o=B*r))/2):(o=A,i=D+(B-(a=A/r))/2):"contain"===l?r>A/B?(o=A,i=D+(B-(a=A/r))/2):(a=B,n=O+(A-(o=B*r))/2):"fill"===l&&(o=A,a=B,n=O,i=D),e.borderRadius>0?(t.save(),t.beginPath(),t.roundRect(O,D,A,B,e.borderRadius),t.clip(),t.drawImage(I,n,i,o,a),t.restore()):t.drawImage(I,n,i,o,a)},I.onerror=function(){Me(t,O,D,A,B,e)},I.src=F}else Me(t,O,D,A,B,e);t.filter="none",t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("dynamic-text"===e.type){if(void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),void 0!==e.brightness||void 0!==e.contrast||void 0!==e.saturate){var j=void 0!==e.brightness?e.brightness/100:1;void 0!==e.contrast&&e.contrast,void 0!==e.saturate&&e.saturate,1!==j&&(t.filter="brightness(".concat(j,")"))}e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=e.shadowBlur||5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var M=e.x||10,W=e.y||30,z=e.width||200,X=e.height||30;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(M,W,z,X,e.borderRadius),t.fill()):t.fillRect(M,W,z,X)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(M,W,z,X,e.borderRadius),t.stroke()):t.strokeRect(M,W,z,X)),t.fillStyle=e.color||"#333333";var L="italic"===e.fontStyle?"italic ":"",G=e.fontWeight||"normal",Y=e.fontSize||14,Z=e.fontFamily||"Arial",U=e.letterSpacing||0,H=e.lineHeight||1.2;t.font="".concat(L).concat(G," ").concat(Y,"px ").concat(Z),t.textAlign=e.textAlign||"left",(e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY)&&(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0);var q=e.text||"Texte dynamique";e.template&&"custom"!==e.template?q=(new Se).generateDynamicTextData({template:e.template,customContent:e.customContent||"",variables:e.variables||{}}).content:e.customContent&&(q=e.customContent),"uppercase"===e.textTransform?q=q.toUpperCase():"lowercase"===e.textTransform?q=q.toLowerCase():"capitalize"===e.textTransform&&(q=q.replace(/\b\w/g,function(e){return e.toUpperCase()}));var V=q.split("\n"),J=Y*H,$=W+Y;"center"===e.textAlign?$=W+(X-(V.length-1)*J)/2+Y/2:"right"===e.textAlign&&($=W+Y),V.forEach(function(r,o){var a=$+o*J;if(U>0){var n=M;if("center"===e.textAlign){var i=t.measureText(r).width+(r.length-1)*U;n=M+(z-i)/2}else if("right"===e.textAlign){var l=t.measureText(r).width+(r.length-1)*U;n=M+z-l}for(var s=0;s<r.length;s++)t.fillText(r[s],n,a),n+=t.measureText(r[s]).width+U}else{var c=M;"center"===e.textAlign?c=M+z/2:"right"===e.textAlign&&(c=M+z),t.fillText(r,c,a)}if("underline"===e.textDecoration||"line-through"===e.textDecoration){var d=U>0?r.split("").reduce(function(e,r){return e+t.measureText(r).width+U},-U):t.measureText(r).width,u=M;"center"===e.textAlign?u=M+(z-d)/2:"right"===e.textAlign&&(u=M+z-d);var f=a+("underline"===e.textDecoration?2:.2*-Y);t.strokeStyle=e.color||"#333333",t.lineWidth=Math.max(1,Y/20),t.beginPath(),t.moveTo(u,f),t.lineTo(u+d,f),t.stroke()}}),t.filter="none",t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("order_number"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=e.shadowBlur||5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var Q=new Se,K="Commande #{order_number}",ee=e.format,te=ee&&ee.includes("{order_date}")?K:ee||K,re=Q.generateOrderNumberData({format:te,previewOrderNumber:e.previewOrderNumber||"12345"}),oe=e.x||10,ae=e.y||30,ne=e.width||270,ie=e.height||40;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(oe,ae,ne,ie,e.borderRadius),t.fill()):t.fillRect(oe,ae,ne,ie)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(oe,ae,ne,ie,e.borderRadius),t.stroke()):t.strokeRect(oe,ae,ne,ie)),t.fillStyle=e.color||"#000000";var le="italic"===e.fontStyle?"italic ":"",se=e.fontWeight||"bold",ce=e.fontSize||14,de=e.fontFamily||"Arial",ue=e.letterSpacing||0,fe=e.textDecoration;t.font="".concat(le).concat(se," ").concat(ce,"px ").concat(de),(e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY)&&(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0);var pe=ae+8+ce,me=pe+ce+4,he=0,be=ne-16,ge="";if(e.showLabel&&e.labelText&&(ge=e.labelText,"uppercase"===e.textTransform?ge=ge.toUpperCase():"lowercase"===e.textTransform?ge=ge.toLowerCase():"capitalize"===e.textTransform&&(ge=ge.replace(/\b\w/g,function(e){return e.toUpperCase()})),he=ue>0?ge.split("").reduce(function(e,r){return e+t.measureText(r).width+ue},-ue):t.measureText(ge).width),e.showLabel&&e.labelText&&ge){var ye,ve=e.labelAlign||"left";if(ye="center"===ve?oe+ne/2:"right"===ve?oe+ne-8:oe+8,ue>0){var we;if("center"===ve){var xe=ge.split("").reduce(function(e,r){return e+t.measureText(r).width+ue},-ue);we=ye-xe/2+t.measureText(ge[0]).width/2}else if("right"===ve){we=ye-t.measureText(ge[ge.length-1]).width/2;for(var Ee=ge.length-1;Ee>=0;Ee--)we-=t.measureText(ge[Ee]).width+(Ee>0?ue:0);we+=t.measureText(ge[0]).width/2}else we=ye+t.measureText(ge[0]).width/2;for(var Ce=0;Ce<ge.length;Ce++)t.fillText(ge[Ce],we,pe),we+=t.measureText(ge[Ce]).width+ue}else{var _e=ye;t.textAlign="center"===ve?"center":"right"===ve?"right":"left",t.fillText(ge,_e,pe)}if("underline"===fe||"line-through"===fe){var ke=ye;"center"===ve?ke=ye-he/2:"right"===ve&&(ke=ye-he);var Ne=pe+("underline"===fe?2:.2*-ce);t.strokeStyle=e.color||"#000000",t.lineWidth=Math.max(1,ce/20),t.beginPath(),t.moveTo(ke,Ne),t.lineTo(ke+he,Ne),t.stroke()}}var Te=oe+8+(e.showLabel&&e.labelText?he+10:0),Pe=be-(e.showLabel&&e.labelText?he+10:0),Oe=re.formatted||"Commande #12345";if("uppercase"===e.textTransform?Oe=Oe.toUpperCase():"lowercase"===e.textTransform?Oe=Oe.toLowerCase():"capitalize"===e.textTransform&&(Oe=Oe.replace(/\b\w/g,function(e){return e.toUpperCase()})),t.textAlign=e.textAlign||"right",e.highlightNumber){var Ae=ue>0?Oe.split("").reduce(function(e,r){return e+t.measureText(r).width+ue},-ue):t.measureText(Oe).width,Be=Te+Pe-Ae;"center"===e.textAlign?Be=Te+(Pe-Ae)/2:"left"===e.textAlign&&(Be=Te),t.fillStyle=e.numberBackground||"rgba(59, 130, 246, 0.1)",t.fillRect(Be-4,me-.7*ce,Ae+8,1.2*ce)}if(ue>0){var Re;if("center"===e.textAlign){var Fe=Oe.split("").reduce(function(e,r){return e+t.measureText(r).width+ue},-ue);Re=Te+(Pe-Fe)/2+t.measureText(Oe[0]).width/2}else if("left"===e.textAlign)Re=Te+t.measureText(Oe[0]).width/2;else{Re=Te+Pe-t.measureText(Oe[Oe.length-1]).width/2;for(var je=Oe.length-1;je>=0;je--)Re-=t.measureText(Oe[je]).width+(je>0?ue:0);Re+=t.measureText(Oe[0]).width/2}for(var Xe=0;Xe<Oe.length;Xe++)t.fillText(Oe[Xe],Re,me),Re+=t.measureText(Oe[Xe]).width+ue}else{var Le;"center"===e.textAlign?(Le=Te+Pe/2,t.textAlign="center"):"left"===e.textAlign?(Le=Te,t.textAlign="left"):(Le=Te+Pe,t.textAlign="right"),t.fillText(Oe,Le,me)}if("underline"===fe||"line-through"===fe){var Ge=ue>0?Oe.split("").reduce(function(e,r){return e+t.measureText(r).width+ue},-ue):t.measureText(Oe).width,Ye=Te+Pe-Ge;"center"===e.textAlign?Ye=Te+(Pe-Ge)/2:"left"===e.textAlign&&(Ye=Te);var Ze=me+("underline"===fe?2:.2*-ce);t.strokeStyle=e.color||"#000000",t.lineWidth=Math.max(1,ce/20),t.beginPath(),t.moveTo(Ye,Ze),t.lineTo(Ye+Ge,Ze),t.stroke()}t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("document_type"===e.type){t.fillStyle=e.color||"#000000";var Ue=e.fontWeight||"bold";t.font="".concat(Ue," ").concat(e.fontSize||18,"px ").concat(e.fontFamily||"Arial"),t.textAlign=e.textAlign||"center",(e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY)&&(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0);var He=e.x||10,qe=e.y||30;t.fillText("FACTURE",He+(e.width||120)/2,qe+(e.height||50)/2),t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("line"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2),t.strokeStyle=e.lineColor||e.color||"#64748b",t.lineWidth=e.lineWidth||2,t.beginPath();var Ve=e.x||10,Je=e.y||110,$e=e.width||20;t.moveTo(Ve,Je+(e.height||12)/2),t.lineTo(Ve+$e,Je+(e.height||12)/2),t.stroke(),t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("shape-triangle"===e.type){var Qe=e.x||10,Ke=e.y||10,et=e.width||60,tt=e.height||50;t.beginPath(),t.moveTo(Qe,Ke-tt/2),t.lineTo(Qe-et/2,Ke+tt/2),t.lineTo(Qe+et/2,Ke+tt/2),t.closePath(),e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,t.fill()),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,t.stroke())}else if("shape-star"===e.type){var rt=e.x||10,ot=e.y||10,at=(e.width||60)/2,nt=.5*at;t.beginPath();for(var it=0;it<10;it++){var lt=it*Math.PI/5,st=it%2==0?at:nt,ct=rt+Math.cos(lt)*st,dt=ot+Math.sin(lt)*st;0===it?t.moveTo(ct,dt):t.lineTo(ct,dt)}t.closePath(),e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,t.fill()),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,t.stroke())}else if("mentions"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var ut=e.x||10,ft=e.y||10,pt=e.width||300,mt=e.height||40;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(ut,ft,pt,mt,e.borderRadius),t.fill()):t.fillRect(ut,ft,pt,mt)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(ut,ft,pt,mt,e.borderRadius),t.stroke()):t.strokeRect(ut,ft,pt,mt)),t.fillStyle=e.color||"#666666";var ht="italic"===e.fontStyle?"italic ":"",bt=e.fontWeight||"normal",gt=e.textDecoration;t.font="".concat(ht).concat(bt," ").concat(e.fontSize||8,"px ").concat(e.fontFamily||"Arial"),t.textAlign=e.textAlign||"center",(e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY)&&(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0);var yt=[];e.showEmail&&yt.push("email@company.com"),e.showPhone&&yt.push("+33 1 23 45 67 89"),e.showSiret&&yt.push("SIRET: 123 456 789 00012");var vt=yt.join(e.separator||" â€¢ "),wt=ft+mt/2;if("underline"===gt||"line-through"===gt){var xt=t.measureText(vt),Et=wt+("underline"===gt?2:-2);t.strokeStyle=e.color||"#666666",t.lineWidth=1,t.beginPath(),t.moveTo(ut+(pt-xt.width)/2,Et),t.lineTo(ut+(pt+xt.width)/2,Et),t.stroke()}t.fillText(vt,ut+pt/2,wt),t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("customer_info"===e.type||"company_info"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=e.shadowBlur||5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var Ct,St=new Se;Ct="customer_info"===e.type?St.generateCustomerInfoData({fields:e.fields||["name","email","phone","address"]}):St.generateCompanyInfoData({fields:e.fields||["name","address","phone","email"]});var _t=e.x||10,kt=e.y||10,Nt=e.width||250,Tt=e.height||120;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(_t,kt,Nt,Tt,e.borderRadius),t.fill()):t.fillRect(_t,kt,Nt,Tt)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#e2e8f0",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(_t,kt,Nt,Tt,e.borderRadius),t.stroke()):t.strokeRect(_t,kt,Nt,Tt)),t.fillStyle=e.color||"#1e293b";var Pt="italic"===e.fontStyle?"italic ":"",Ot=e.fontWeight||"normal",Dt=e.fontSize||12,At=e.fontFamily||"Arial",Bt=e.lineHeight||1.4,Rt=e.letterSpacing||0;t.font="".concat(Pt).concat(Ot," ").concat(Dt,"px ").concat(At),t.textAlign="left",(e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY)&&(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0);var Ft={name:"ðŸ‘¤",email:"ðŸ“§",phone:"ðŸ“ž",address:"ðŸ ",company:"ðŸ¢",vat:"ðŸ†”",siret:"ðŸ“‹"},It=Dt*Bt,jt=e.layout||"vertical",Mt=!1!==e.showLabels;if(e.labelStyle,"vertical"===jt)Object.entries(Ct).forEach(function(r){var o=Ie(r,2),a=o[0],n=o[1];if(n){var i=Ft[a]||"ðŸ“„";if("address"===a){var l=n.split("\n").map(function(e){return e.trim()}).filter(function(e){return e}),s=-1,c="";l.forEach(function(e,t){/\b(?:BP|boÃ®te postale|boite postale|b\.p\.|p\.o\. box|postbox|case postale)\b/i.test(e)&&(s=t,c=e)});var d=[];if(-1!==s){var u=l.slice(0,s),f=l.slice(s+1);d.push(u.join(" "));var p=f.join(" ")+(f.length>0?" ":"")+c;d.push(p)}else{var m=-1;if(l.forEach(function(e,t){(/\b\d{5}(?:-\d{4})?\b/.test(e)||/\b[A-Z]\d[A-Z] \d[A-Z]\d\b/i.test(e)||/\b[A-Z]{1,2}\d{1,2}[A-Z]? \d[A-Z]{2}\b/i.test(e)||/\b\d{4,6}\b/.test(e))&&(m=t)}),-1!==m){var h=l.slice(0,m),b=l.slice(m);d.push(h.join(" ")),d.push(b.join(" "))}else l.length>=2?(d.push(l[0]),d.push(l.slice(1).join(" "))):(d.push(l[0]||""),d.push(""))}d.forEach(function(r,o){if(r.trim()){var n=r;if("address"===a&&0===o)a.charAt(0).toUpperCase(),a.slice(1).replace("_"," "),n="".concat(i," ").concat(r);else if(Mt&&0===o){var l=a.charAt(0).toUpperCase()+a.slice(1).replace("_"," ");n="".concat(i," ").concat(l,": ").concat(r)}else n="   ".concat(r);"uppercase"===e.textTransform?n=n.toUpperCase():"lowercase"===e.textTransform?n=n.toLowerCase():"capitalize"===e.textTransform&&(n=n.replace(/\b\w/g,function(e){return e.toUpperCase()}));var s=kt+Dt;if(Rt>0)for(var c=_t,d=0;d<n.length;d++)t.fillText(n[d],c,s),c+=t.measureText(n[d]).width+Rt;else t.fillText(n,_t,s);if("underline"===e.textDecoration||"line-through"===e.textDecoration){var u=Rt>0?n.split("").reduce(function(e,r){return e+t.measureText(r).width+Rt},-Rt):t.measureText(n).width,f=s+("underline"===e.textDecoration?2:.2*-Dt);t.strokeStyle=e.color||"#1e293b",t.lineWidth=Math.max(1,Dt/20),t.beginPath(),t.moveTo(_t,f),t.lineTo(_t+u,f),t.stroke()}kt+=It}})}else{var g=n;if(Mt){var y=a.charAt(0).toUpperCase()+a.slice(1).replace("_"," ");g="".concat(i," ").concat(y,": ").concat(n)}else g="".concat(i," ").concat(n);"uppercase"===e.textTransform?g=g.toUpperCase():"lowercase"===e.textTransform?g=g.toLowerCase():"capitalize"===e.textTransform&&(g=g.replace(/\b\w/g,function(e){return e.toUpperCase()}));var v=kt+Dt;if(Rt>0)for(var w=_t,x=0;x<g.length;x++)t.fillText(g[x],w,v),w+=t.measureText(g[x]).width+Rt;else t.fillText(g,_t,v);if("underline"===e.textDecoration||"line-through"===e.textDecoration){var E=Rt>0?g.split("").reduce(function(e,r){return e+t.measureText(r).width+Rt},-Rt):t.measureText(g).width,C=v+("underline"===e.textDecoration?2:.2*-Dt);t.strokeStyle=e.color||"#1e293b",t.lineWidth=Math.max(1,Dt/20),t.beginPath(),t.moveTo(_t,C),t.lineTo(_t+E,C),t.stroke()}kt+=It}}});else for(var Wt=Object.entries(Ct),zt=Math.ceil(Wt.length/2),Xt=function(){var r=Wt[Lt],o=Wt[Lt+zt];if(r){var a=Ie(r,2),n=a[0],i=a[1],l=Ft[n]||"ðŸ“„";if("address"===n){var s=i.split("\n").map(function(e){return e.trim()}).filter(function(e){return e}),c=-1,d="";s.forEach(function(e,t){/\b(?:BP|boÃ®te postale|boite postale|b\.p\.|p\.o\. box|postbox|case postale)\b/i.test(e)&&(c=t,d=e)});var u=[];if(-1!==c){var f=s.slice(0,c),p=s.slice(c+1);u.push(f.join(" "));var m=p.join(" ")+(p.length>0?" ":"")+d;u.push(m)}else{var h=-1;if(s.forEach(function(e,t){(/\b\d{5}(?:-\d{4})?\b/.test(e)||/\b[A-Z]\d[A-Z] \d[A-Z]\d\b/i.test(e)||/\b[A-Z]{1,2}\d{1,2}[A-Z]? \d[A-Z]{2}\b/i.test(e)||/\b\d{4,6}\b/.test(e))&&(h=t)}),-1!==h){var b=s.slice(0,h),g=s.slice(h);u.push(b.join(" ")),u.push(g.join(" "))}else s.length>=2?(u.push(s[0]),u.push(s.slice(1).join(" "))):(u.push(s[0]||""),u.push(""))}u.forEach(function(r,o){if(r.trim()){var a=r;if("address"===n&&0===o)n.charAt(0).toUpperCase(),n.slice(1).replace("_"," "),a="".concat(l," ").concat(r);else if(Mt&&0===o){var i=n.charAt(0).toUpperCase()+n.slice(1).replace("_"," ");a="".concat(l," ").concat(i,": ").concat(r)}else a="   ".concat(r);"uppercase"===e.textTransform?a=a.toUpperCase():"lowercase"===e.textTransform?a=a.toLowerCase():"capitalize"===e.textTransform&&(a=a.replace(/\b\w/g,function(e){return e.toUpperCase()}));var s=kt+Dt;t.fillText(a,_t,s),kt+=It}})}else{var y=i;if(Mt){var v=n.charAt(0).toUpperCase()+n.slice(1).replace("_"," ");y="".concat(l," ").concat(v,": ").concat(i)}else y="".concat(l," ").concat(i);"uppercase"===e.textTransform?y=y.toUpperCase():"lowercase"===e.textTransform?y=y.toLowerCase():"capitalize"===e.textTransform&&(y=y.replace(/\b\w/g,function(e){return e.toUpperCase()}));var w=kt+Dt;t.fillText(y,_t,w)}}if(o){var x=Ie(o,2),E=x[0],C=x[1],S=Ft[E]||"ðŸ“„";if("address"===E){var _=C.split("\n").map(function(e){return e.trim()}).filter(function(e){return e}),k=-1,N="";_.forEach(function(e,t){/\b(?:BP|boÃ®te postale|boite postale|b\.p\.|p\.o\. box|postbox|case postale)\b/i.test(e)&&(k=t,N=e)});var T=[];if(-1!==k){var P=_.slice(0,k),O=_.slice(k+1);T.push(P.join(" "));var D=O.join(" ")+(O.length>0?" ":"")+N;T.push(D)}else{var A=-1;if(_.forEach(function(e,t){(/\b\d{5}(?:-\d{4})?\b/.test(e)||/\b[A-Z]\d[A-Z] \d[A-Z]\d\b/i.test(e)||/\b[A-Z]{1,2}\d{1,2}[A-Z]? \d[A-Z]{2}\b/i.test(e)||/\b\d{4,6}\b/.test(e))&&(A=t)}),-1!==A){var B=_.slice(0,A),R=_.slice(A);T.push(B.join(" ")),T.push(R.join(" "))}else _.length>=2?(T.push(_[0]),T.push(_.slice(1).join(" "))):(T.push(_[0]||""),T.push(""))}T.forEach(function(r,o){if(r.trim()){var a=r;if("address"===E&&0===o)E.charAt(0).toUpperCase(),E.slice(1).replace("_"," "),a="".concat(S," ").concat(r);else if(Mt&&0===o){var n=E.charAt(0).toUpperCase()+E.slice(1).replace("_"," ");a="".concat(S," ").concat(n,": ").concat(r)}else a="   ".concat(r);"uppercase"===e.textTransform?a=a.toUpperCase():"lowercase"===e.textTransform?a=a.toLowerCase():"capitalize"===e.textTransform&&(a=a.replace(/\b\w/g,function(e){return e.toUpperCase()}));var i=kt+Dt,l=_t+Nt/2+10;t.fillText(a,l,i),kt+=It}})}else{var F=C;if(Mt){var I=E.charAt(0).toUpperCase()+E.slice(1).replace("_"," ");F="".concat(S," ").concat(I,": ").concat(C)}else F="".concat(S," ").concat(C);"uppercase"===e.textTransform?F=F.toUpperCase():"lowercase"===e.textTransform?F=F.toLowerCase():"capitalize"===e.textTransform&&(F=F.replace(/\b\w/g,function(e){return e.toUpperCase()}));var j=kt+Dt,M=_t+Nt/2+10;t.fillText(F,M,j)}}r&&"address"===r[0]||o&&"address"===o[0]||(kt+=It)},Lt=0;Lt<zt;Lt++)Xt();t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("product_table"===e.type)try{var Gt,Yt,Zt,Ut,Ht,qt=new Se,Vt={};try{if(e.columns)if("string"==typeof e.columns){var Jt=e.columns.split(",").map(function(e){return e.trim()}),$t={image:"image",name:"name",sku:"sku",quantity:"quantity",price:"price",total:"total",description:"description",short_description:"short_description",categories:"categories",regular_price:"regular_price",sale_price:"sale_price",discount:"discount",tax:"tax",weight:"weight",dimensions:"dimensions",attributes:"attributes",stock_quantity:"stock_quantity",stock_status:"stock_status"};Jt.forEach(function(e){Vt[$t[e]||e]=!0})}else"object"===We(e.columns)&&(Vt=De({},e.columns))}catch(e){Vt={name:!0,quantity:!0,price:!0,total:!0}}var Qt=qt.generateProductTableData({columns:Vt,showSubtotal:null!==(Gt=e.showSubtotal)&&void 0!==Gt&&Gt,showShipping:null===(Yt=e.showShipping)||void 0===Yt||Yt,showTaxes:null===(Zt=e.showTaxes)||void 0===Zt||Zt,showDiscount:null===(Ut=e.showDiscount)||void 0===Ut||Ut,showTotal:null===(Ht=e.showTotal)||void 0===Ht||Ht,tableStyle:e.tableStyle||"default"}),Kt=e.x||10,er=e.y||10,tr=Math.max(200,e.width||500),rr=Math.max(100,e.height||200),or=ze(e.tableStyle||"default"),ar=12,nr=35,ir=28,lr=or.borderRadius||6,sr=or.shadowBlur||0;if(t.save(),sr>0&&(t.shadowColor=or.shadowColor||"rgba(0, 0, 0, 0.1)",t.shadowBlur=sr,t.shadowOffsetX=2,t.shadowOffsetY=2),t.fillStyle=or.rowBg||"#ffffff",lr>0?(t.beginPath(),t.roundRect(Kt,er,tr,rr,lr),t.fill()):t.fillRect(Kt,er,tr,rr),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.strokeStyle=or.rowBorder||"#e2e8f0",t.lineWidth=or.borderWidth||1,lr>0?(t.beginPath(),t.roundRect(Kt,er,tr,rr,lr),t.stroke()):t.strokeRect(Kt,er,tr,rr),t.fillStyle=or.headerTextColor||"#1e293b",t.font="".concat(or.headerFontWeight||"600"," ").concat(Math.max(14,or.headerFontSize||14),"px Arial"),t.textAlign="left",t.fillText("TABLEAU DES PRODUITS",Kt+ar,er+ar+8),Qt&&Qt.headers&&Qt.rows){var cr=Qt.headers,dr=cr.length,ur=tr-24,fr=ur/dr,pr=er+ar+20,mr=t.createLinearGradient(Kt+ar,pr,Kt+ar,pr+nr);mr.addColorStop(0,or.headerBg||"#f8fafc"),mr.addColorStop(1,or.headerBg?(Nr=or.headerBg,Tr=Nr.replace("#",""),Pr=parseInt(Tr.substr(0,2),16),Or=parseInt(Tr.substr(2,2),16),Dr=parseInt(Tr.substr(4,2),16),Ar=Math.min(255,Math.floor(Pr+.1*(255-Pr))),Br=Math.min(255,Math.floor(Or+.1*(255-Or))),Rr=Math.min(255,Math.floor(Dr+.1*(255-Dr))),"rgb(".concat(Ar,", ").concat(Br,", ").concat(Rr,")")):"#ffffff"),t.fillStyle=mr,t.fillRect(Kt+ar,pr,ur,nr),t.strokeStyle=or.headerBorder||"#e2e8f0",t.lineWidth=1,t.strokeRect(Kt+ar,pr,ur,nr),t.strokeStyle=or.headerBorder||"#cbd5e1",t.lineWidth=2,t.beginPath(),t.moveTo(Kt+ar,pr+nr),t.lineTo(Kt+ar+ur,pr+nr),t.stroke(),t.font="".concat(or.headerFontWeight||"600"," ").concat(or.headerFontSize||12,"px Arial"),t.fillStyle=or.headerTextColor||"#374151",t.textBaseline="middle",cr.forEach(function(e,r){try{var o=Kt+ar+r*fr,a=o+fr/2,n="QtÃ©"===e||"Prix"===e||"Total"===e;t.textAlign=n?"center":"left";var i=n?a:o+8,l=pr+17.5;t.fillText(e,i,l),r<cr.length-1&&(t.strokeStyle=or.headerBorder||"#e5e7eb",t.lineWidth=1,t.beginPath(),t.moveTo(o+fr,pr),t.lineTo(o+fr,pr+nr),t.stroke())}catch(e){}}),t.font="".concat(or.rowFontSize||11,"px Arial"),t.textBaseline="middle";for(var hr=Math.min(5,Qt.rows.length),br=pr+nr+8,gr=function(){var e=Qt.rows[yr];if(Array.isArray(e)){var r=br+yr*ir;yr%2==1&&or.altRowBg&&"transparent"!==or.altRowBg&&(t.fillStyle=or.altRowBg,t.fillRect(Kt+ar,r,ur,ir)),t.strokeStyle=or.rowBorder||"#f1f5f9",t.lineWidth=.5,t.beginPath(),t.moveTo(Kt+ar,r+ir),t.lineTo(Kt+ar+ur,r+ir),t.stroke(),t.fillStyle=or.rowTextColor||"#374151",e.forEach(function(e,o){try{var a=Kt+ar+o*fr,n=a+fr/2,i=cr[o],l="QtÃ©"===i||"Prix"===i||"Total"===i;t.textAlign=l?"center":"left";var s=l?n:a+8,c=r+14,d=null!=e?e.toString():"",u=l?12:18,f=d.length>u?d.substring(0,u)+"...":d;t.fillText(f,s,c),o<cr.length-1&&(t.strokeStyle=or.rowBorder||"#f1f5f9",t.lineWidth=.5,t.beginPath(),t.moveTo(a+fr,r),t.lineTo(a+fr,r+ir),t.stroke())}catch(e){}})}},yr=0;yr<hr;yr++)gr();if(Qt.totals&&Object.keys(Qt.totals).length>0){var vr=br+hr*ir+15,wr=24*Object.keys(Qt.totals).length+16,xr=t.createLinearGradient(Kt+ar,vr,Kt+ar,vr+wr);xr.addColorStop(0,or.headerBg?function(e){var t=e.replace("#",""),r=parseInt(t.substr(0,2),16),o=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16),n=Math.max(0,Math.floor(.9*r)),i=Math.max(0,Math.floor(.9*o)),l=Math.max(0,Math.floor(.9*a));return"rgb(".concat(n,", ").concat(i,", ").concat(l,")")}(or.headerBg):"#f1f5f9"),xr.addColorStop(1,or.headerBg||"#f8fafc"),t.fillStyle=xr,t.fillRect(Kt+ar,vr,ur,wr),t.strokeStyle=or.headerBorder||"#cbd5e1",t.lineWidth=1.5,t.strokeRect(Kt+ar,vr,ur,wr),t.font="".concat(or.headerFontWeight||"600"," ").concat(Math.max(11,or.rowFontSize||11),"px Arial"),t.fillStyle=or.headerTextColor||"#1e293b",t.textBaseline="middle";var Er=vr+12;Object.entries(Qt.totals).forEach(function(e){var r=Ie(e,2),o=r[0],a=r[1];try{var n="total"===o?"TOTAL":"subtotal"===o?"Sous-total":"shipping"===o?"Livraison":"tax"===o?"TVA":"discount"===o?"Remise":o,i=null!=a?a.toString():"0";t.textAlign="left",t.fillText(n+":",Kt+ar+8,Er),t.textAlign="right",t.fillText(i,Kt+ar+ur-8,Er),Er+=24}catch(e){}})}}else t.fillStyle=or.rowTextColor||"#666666",t.font="".concat(or.rowFontSize||"12px"," Arial"),t.fillText("Aucune donnÃ©e disponible",Kt+10,er+rr/2);t.textAlign="left"}catch(r){t.fillStyle="#ff6b6b",t.font="12px Arial",t.fillText("Erreur product_table: ".concat(r.message),e.x||10,(e.y||10)+20)}else{t.fillStyle="#ff6b6b";var Cr=e.x||10,Sr=e.y||10,_r=e.width||100,kr=e.height||30;t.fillRect(Cr,Sr,_r,kr),t.strokeStyle="#ff0000",t.lineWidth=2,t.strokeRect(Cr,Sr,_r,kr),t.fillStyle="#ffffff",t.font="12px Arial",t.fillText(e.type,Cr+5,Sr+20)}var Nr,Tr,Pr,Or,Dr,Ar,Br,Rr;t.restore()})}else console.log("[PDFEditor] renderCanvas: canvas not found")};(0,i.useEffect)(function(){je()},[m,O,B,w]),(0,i.useEffect)(function(){je()},[]),(0,i.useEffect)(function(){},[r]),(0,i.useEffect)(function(){var e=function(e){"pdfBuilderPreview"===e.type&&Ce()};return document.addEventListener("pdfBuilderPreview",e),window.pdfBuilderPro=window.pdfBuilderPro||{},window.pdfBuilderPro.triggerPreview=Ce,function(){document.removeEventListener("pdfBuilderPreview",e)}},[m]);var Me=function(e,t,r,o,a,n){var i=e.createLinearGradient(t,r,t+o,r+a);i.addColorStop(0,"#f8fafc"),i.addColorStop(1,"#e2e8f0"),e.fillStyle=i,e.fillRect(t,r,o,a),e.strokeStyle="#cbd5e1",e.lineWidth=1,e.strokeRect(t,r,o,a);var l=t+o/2,s=r+a/2,c=.4*Math.min(o,a);e.fillStyle="#64748b",e.beginPath(),e.arc(l,s,c/2,0,2*Math.PI),e.fill(),e.fillStyle="#ffffff",e.font="bold ".concat(.25*c,"px Arial"),e.textAlign="center",e.textBaseline="middle",e.fillText("LOGO",l,s),e.fillStyle="#94a3b8",e.font="".concat(Math.max(8,.08*c),"px Arial"),e.fillText("Cliquez pour ajouter",l,r+a-8),e.fillText("votre logo",l,r+a-2)};return l().createElement("div",{className:"pdf-builder-container pdf-editor"},l().createElement(pe,{templateName:n,isNew:c,onSave:we,onCreateNew:function(e){alert('Nouveau template "'.concat(e.name,'" crÃ©Ã© avec succÃ¨s!\nDimensions: ').concat(e.width,"x").concat(e.height,"px (").concat(e.orientation,")"))},onPreview:Ce}),l().createElement("div",{className:"pdf-builder-toolbar"},l().createElement(d,{selectedTool:L,onToolSelect:function(e){G(e);var t={"add-text":{type:"text",text:"Nouveau texte",x:50,y:50,fontSize:16,color:"#000000"},"add-text-title":{type:"text",text:"Titre",x:50,y:50,fontSize:24,fontWeight:"bold",color:"#000000"},"add-text-subtitle":{type:"text",text:"Sous-titre",x:50,y:50,fontSize:18,fontWeight:"normal",color:"#666666"},"add-rectangle":{type:"rectangle",x:50,y:50,width:100,height:60,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#000000"},"add-circle":{type:"circle",x:75,y:75,radius:30,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#000000"},"add-line":{type:"line",x:50,y:50,width:100,height:2,lineColor:"#000000",lineWidth:2},"add-arrow":{type:"line",x:50,y:50,width:100,height:2,lineColor:"#000000",lineWidth:2},"add-triangle":{type:"shape-triangle",x:50,y:50,width:60,height:50,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#000000"},"add-star":{type:"shape-star",x:50,y:50,width:60,height:60,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#000000"},"add-divider":{type:"line",x:50,y:50,width:200,height:2,lineColor:"#cccccc",lineWidth:1},"add-image":{type:"image",x:50,y:50,width:100,height:100,src:""},"add-dynamic-text":{type:"dynamic-text",x:50,y:50,width:200,height:30,template:"total_only",customContent:"{{order_total}} â‚¬",fontSize:14,color:"#333333"}};t[e]&&_e(t[e].type,t[e])},zoom:O,onZoomChange:function(e){D(Math.max(.1,Math.min(3,e)))},showGrid:B,onShowGridChange:function(e){R(e)},snapToGrid:I,onSnapToGridChange:function(e){j(e)},snapToElements:W,onSnapToElementsChange:function(e){z(e)},onUndo:function(){k>0&&(N(k-1),h(E[k-1]))},onRedo:function(){k<E.length-1&&(N(k+1),h(E[k+1]))},canUndo:xe,canRedo:Ee,settings:$})),l().createElement("div",{className:"pdf-builder-workspace editor-workspace"},Z&&l().createElement("div",{className:"pdf-builder-sidebar element-library-panel"},l().createElement(_,{onAddElement:_e,selectedTool:L,onToolSelect:G})),l().createElement("div",{className:"pdf-builder-canvas-container canvas-container"},l().createElement("canvas",{ref:ve,className:"pdf-canvas",width:595,height:842,style:{transform:"scale(".concat(O,")"),transformOrigin:"top left",cursor:"select"===L?"default":"crosshair"},onClick:function(e){var t=ve.current;if(t){var r=t.getBoundingClientRect(),o=(e.clientX-r.left)/O,a=(e.clientY-r.top)/O;if("select"!==L){var n;switch(L){case"add-text":n={id:Date.now(),type:"text",text:"Nouveau texte",x:o,y:a,fontSize:16,color:"#000000",fontFamily:"Arial"};break;case"add-rectangle":n={id:Date.now(),type:"rectangle",x:o,y:a,width:100,height:50,backgroundColor:"#ffffff",borderColor:"#000000",borderWidth:1};break;case"add-circle":n={id:Date.now(),type:"circle",x:o,y:a,radius:25,backgroundColor:"#ffffff",borderColor:"#000000",borderWidth:1};break;default:return}var i=[].concat(Pe(m),[n]);Ne(i),v(n.id),G("select")}}},onMouseDown:function(e){var t=ve.current;if(t){var r=t.getBoundingClientRect(),o=(e.clientX-r.left)/O,a=(e.clientY-r.top)/O;if(w){var n=m.find(function(e){return e.id===(w&&w.id)});if(n){var i=function(e,t,r){var o=e.width||100,a=e.height||30;"circle"===e.type&&(o=2*(e.radius||25),a=2*(e.radius||25));for(var n=e.x,i=e.x+o,l=e.y,s=e.y+a,c={nw:{xMin:n-8,xMax:n+8,yMin:l-8,yMax:l+8},ne:{xMin:i-8,xMax:i+8,yMin:l-8,yMax:l+8},sw:{xMin:n-8,xMax:n+8,yMin:s-8,yMax:s+8},se:{xMin:i-8,xMax:i+8,yMin:s-8,yMax:s+8},n:{xMin:n+8,xMax:i-8,yMin:l-8,yMax:l+8},s:{xMin:n+8,xMax:i-8,yMin:s-8,yMax:s+8},w:{xMin:n-8,xMax:n+8,yMin:l+8,yMax:s-8},e:{xMin:i-8,xMax:i+8,yMin:l+8,yMax:s-8}},d=0,u=["nw","ne","sw","se","n","s","w","e"];d<u.length;d++){var f=u[d],p=c[f];if(t>=p.xMin&&t<=p.xMax&&r>=p.yMin&&r<=p.yMax)return f}return null}(n,o,a);if(i){ue(!0),he(i);var l=n.width||100,s=n.height||30;return"circle"===n.type&&(l=2*(n.radius||25),s=2*(n.radius||25)),void ye({x:o,y:a,width:l,height:s,elementX:n.x,elementY:n.y})}}}var c=m.find(function(e){if("text"===e.type){var r=t.getContext("2d"),n=e.fontWeight?"".concat(e.fontWeight," "):"";r.font="".concat(n).concat(e.fontSize||16,"px ").concat(e.fontFamily||"Arial");var i=r.measureText(e.text||"Texte");return o>=e.x&&o<=e.x+i.width&&a>=e.y-e.fontSize&&a<=e.y}if("rectangle"===e.type)return o>=e.x&&o<=e.x+(e.width||100)&&a>=e.y&&a<=e.y+(e.height||50);if("circle"===e.type){var l=o-e.x,s=a-e.y;return Math.sqrt(l*l+s*s)<=(e.radius||25)}return"company_logo"===e.type||"dynamic-text"===e.type||"order_number"===e.type||"document_type"===e.type||"customer_info"===e.type||"company_info"===e.type||"product_table"===e.type||"mentions"===e.type?o>=e.x&&o<=e.x+(e.width||100)&&a>=e.y&&a<=e.y+(e.height||30):"line"===e.type&&(o>=e.x&&o<=e.x+(e.width||20)&&Math.abs(a-(e.y+(e.height||12)/2))<=5)});c?(v(c.id),V(!0),te(!0),se(c),ne({x:o,y:a})):(v(null),V(!1))}},onMouseMove:function(e){var t=ve.current;if(t){var r=t.getBoundingClientRect(),o=(e.clientX-r.left)/O,a=(e.clientY-r.top)/O;if(de&&w&&me){var n=m.find(function(e){return e.id===(w&&w.id)});if(n){var i=ge.width,l=ge.height,s=n.x,c=n.y,d=n.radius,u=o-ge.x,f=a-ge.y;switch(me){case"nw":i=Math.max(20,ge.width-u),l=Math.max(20,ge.height-f),s=ge.elementX+u,c=ge.elementY+f;break;case"ne":i=Math.max(20,ge.width+u),l=Math.max(20,ge.height-f),c=ge.elementY+f;break;case"sw":i=Math.max(20,ge.width-u),l=Math.max(20,ge.height+f),s=ge.elementX+u;break;case"se":i=Math.max(20,ge.width+u),l=Math.max(20,ge.height+f);break;case"n":l=Math.max(20,ge.height-f),c=ge.elementY+f;break;case"s":l=Math.max(20,ge.height+f);break;case"w":i=Math.max(20,ge.width-u),s=ge.elementX+u;break;case"e":i=Math.max(20,ge.width+u)}if("circle"===n.type){var p={x:s,y:c,width:2*(d=Math.min(i,l)/2),height:2*d};p=Oe(n,p),ke(w.id,{x:p.x,y:p.y,radius:Math.max(10,p.width/2)})}else{var h={x:s,y:c,width:i,height:l};if(h=Oe(n,h),("image"===n.type||n.lockAspectRatio)&&"n"!==me&&"s"!==me){var b=ge.width/ge.height;Math.abs(h.width/h.height-b)>.01&&(h.height=Math.round(h.width/b))}ke(w.id,{x:h.x,y:h.y,width:h.width,height:h.height})}}}else if(ee&&le){var g=o-ae.x,y=a-ae.y,v=le.x+g,x=le.y+y;I&&(v=10*Math.round(v/10),x=10*Math.round(x/10)),v=Math.max(0,Math.min(595-(le.width||100),v)),x=Math.max(0,Math.min(842-(le.height||30),x)),ke(le.id,{x:v,y:x})}}},onMouseUp:Re,onMouseLeave:Re,onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDrop:function(e){e.preventDefault();var t=ve.current;if(t){var r=t.getBoundingClientRect(),o=(e.clientX-r.left)/O,a=(e.clientY-r.top)/O;try{var n=JSON.parse(e.dataTransfer.getData("application/json"));if("element"===n.type){var i=De({id:Date.now(),type:n.elementType,x:o,y:a},n.defaultProperties),l=[].concat(Pe(m),[i]);Ne(l),v(i.id)}}catch(e){}}}}),w&&l().createElement("button",{className:"properties-panel-toggle ".concat(q?"open":"closed"),onClick:function(){return V(!q)},title:q?"Fermer les propriÃ©tÃ©s":"Ouvrir les propriÃ©tÃ©s"},l().createElement("span",{className:"toggle-arrow"},"â—€"))),q&&w&&l().createElement("div",{className:"pdf-builder-properties properties-panel-container"},l().createElement(oe,{selectedElements:w?[w]:[],elements:m,onPropertyChange:function(e,t,r){ke(e,Ae({},t,r))},onBatchUpdate:function(e){e.forEach(function(e){ke(e.elementId,e.properties)})}}))),l().createElement(g,null))},Le=function(e){var t=e.initialElements,r=void 0===t?[]:t,o=e.onSave,a=e.templateName,n=void 0===a?"":a,i=e.isNew,s=void 0===i||i;return l().createElement(v,null,l().createElement(Xe,{initialElements:r,onSave:o,templateName:n,isNew:s}))};function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}try{if("undefined"!=typeof window&&(window.React=i,window.ReactDOM=s),"undefined"!=typeof window)window.pdfBuilderPro||(window.pdfBuilderPro={}),window.pdfBuilderPro.React=i,window.pdfBuilderPro.ReactDOM=s,window.pdfBuilderPro.init=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("[PDF Builder] ðŸŽ¨ ===== PDF EDITOR INIT START ====="),console.log("[PDF Builder] ðŸ“ Container ID:",e),console.log("[PDF Builder] ðŸ“‹ Options received:",r),console.log("[PDF Builder] ðŸ·ï¸ Template name:",r.templateName||"N/A"),console.log("[PDF Builder] ðŸ†” Template ID:",r.templateId||"N/A"),console.log("[PDF Builder] ðŸ†• Is new template:",r.isNew),console.log("[PDF Builder] ðŸ”¢ Initial elements count:",(null===(t=r.initialElements)||void 0===t?void 0:t.length)||0),r.initialElements&&"object"===Ge(r.initialElements)&&!Array.isArray(r.initialElements)?(console.log("[PDF Builder] ðŸ”„ Converting initialElements object to array in editor init"),r.initialElements=Object.values(r.initialElements),console.log("[PDF Builder] âœ… Conversion completed, new count:",r.initialElements.length)):r.initialElements?console.log("[PDF Builder] âœ… initialElements already an array with length:",r.initialElements.length):(console.log("[PDF Builder] ðŸ“ Setting empty initialElements array"),r.initialElements=[]),(window.pdfBuilderDebug||"localhost"===window.location.hostname)&&(console.log("PDF Builder Pro init called for",e,"with options:",r),console.log("Initial elements received:",r.initialElements,"Count:",r.initialElements?r.initialElements.length:0));try{if(console.log("[PDF Builder] ðŸ” Checking React availability..."),!i||!s)throw new Error("React not available for PDF Editor");if(console.log("[PDF Builder] âœ… React available"),console.log("[PDF Builder] ðŸ” Checking PDFEditor component..."),!Le)throw new Error("PDFEditor component not available");console.log("[PDF Builder] âœ… PDFEditor component available"),console.log("[PDF Builder] ðŸ” Finding container element...");var o=document.getElementById(e);if(!o)throw new Error("Container element '"+e+"' not found");console.log("[PDF Builder] âœ… Container found:",o),console.log("[PDF Builder] ðŸŽ¨ Preparing React element for PDF Editor...");var a=i.createElement(Le,{initialElements:r.initialElements||[],onSave:r.onSave||function(){},templateName:r.templateName||"",isNew:r.isNew||!1,templateId:r.templateId||null});if(console.log("[PDF Builder] âœ… React element created for template:",r.templateName),console.log("[PDF Builder] ðŸ”§ Checking ReactDOM API..."),s.createRoot){console.log("[PDF Builder] âœ… Using React 18+ createRoot API");var n=s.createRoot(o);console.log("[PDF Builder] ðŸš€ Rendering PDF Editor with createRoot..."),n.render(a),console.log("[PDF Builder] âœ… PDF Editor rendered successfully with createRoot")}else console.log("[PDF Builder] âš ï¸ Using legacy render API"),s.render(a,o),console.log("[PDF Builder] âœ… PDF Editor rendered successfully with legacy render");return console.log("[PDF Builder] ðŸŽ‰ ===== PDF EDITOR INIT SUCCESS ====="),console.log("[PDF Builder] ðŸ“Š Template loaded in editor:",r.templateName,"with",r.initialElements.length,"elements"),(window.pdfBuilderDebug||"localhost"===window.location.hostname)&&(console.log("PDF Editor initialized successfully in container:",e),console.log("Initial elements count:",(r.initialElements||[]).length)),!0}catch(e){throw console.error("[PDF Builder] âŒ PDF Editor init failed:",e),console.error("[PDF Builder] ðŸ“‹ Failed options:",r),e}};else{console.error("Warning - pdfBuilderPro object not found, creating new one");var Ye={version:"2.0.0",React:i,ReactDOM:s,editors:new Map,init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(window.pdfBuilderDebug||"localhost"===window.location.hostname)&&console.log("PDF Builder Pro init called for",e,"with options:",t);try{if(!i||!s)throw new Error("React not available for PDF Editor");var r=document.getElementById(e);if(!r)throw new Error("Container element '"+e+"' not found");return s.render(i.createElement(Le,{initialElements:t.initialElements||[],onSave:function(e){console.log("PDF Editor saved elements:",e)},templateName:t.templateName||"",isNew:t.isNew||!1}),r),!0}catch(e){return console.error("PDF Builder Pro init failed:",e),!1}},destroy:function(e){console.log("PDF Builder Pro destroy called for",e)},getData:function(e){return null},getElements:function(){return[]}};window.pdfBuilderPro=Ye,window.PDFBuilderPro=Ye,window.PDFBuilder={PDFEditor:Le,React:i,ReactDOM:s},window.initializePDFBuilderPro=function(){return Ye}}window.pdfBuilderReact=window.pdfBuilderReact||{},window.pdfBuilderReact.initPDFBuilderReact=function(){if(console.log("[PDF Builder] ===== initPDFBuilderReact CALLED ====="),console.log("[PDF Builder] ðŸ“‹ Editor initialization started"),console.log("[PDF Builder] ðŸ” Checking for template data..."),!window.pdfBuilderData)return console.error("[PDF Builder] âŒ pdfBuilderData not found on window"),console.log("[PDF Builder] Available window keys with pdfBuilder:",Object.keys(window).filter(function(e){return e.includes("pdfBuilder")})),!1;if(console.log("[PDF Builder] âœ… pdfBuilderData found:",window.pdfBuilderData),console.log("[PDF Builder] pdfBuilderData keys:",Object.keys(window.pdfBuilderData)),console.log("[PDF Builder] ðŸ“„ Template ID from data:",window.pdfBuilderData.templateId),console.log("[PDF Builder] ðŸ“ Template Name from data:",window.pdfBuilderData.templateName),window.pdfBuilderData.templateId&&"0"!==window.pdfBuilderData.templateId){console.log("[PDF Builder] ðŸŽ¯ Template ID detected:",window.pdfBuilderData.templateId),console.log("[PDF Builder] ðŸ”„ Starting AJAX template loading process..."),console.log("[PDF Builder] ðŸ“¡ AJAX URL:",window.pdfBuilderData.ajaxUrl),console.log("[PDF Builder] ðŸ” Nonce:",window.pdfBuilderData.nonce);var e=new FormData;return e.append("action","pdf_builder_load_template"),e.append("template_id",window.pdfBuilderData.templateId),e.append("nonce",window.pdfBuilderData.nonce||""),console.log("[PDF Builder] ðŸ“¤ Sending AJAX request for template:",window.pdfBuilderData.templateId),fetch(window.pdfBuilderData.ajaxUrl,{method:"POST",body:e}).then(function(e){return console.log("[PDF Builder] ðŸ“¥ AJAX response received, status:",e.status),e.json()}).then(function(e){if(console.log("[PDF Builder] ðŸ“Š AJAX response parsed:",e),console.log("[PDF Builder] âœ…/âŒ Success flag:",e.success),e.success){var t,r;console.log("[PDF Builder] âœ… Template loaded successfully:",e.data),console.log("[PDF Builder] ðŸ“‹ Template data structure:",Ge(e.data.template),e.data.template),console.log("[PDF Builder] ðŸ§© Template elements:",null===(t=e.data.template)||void 0===t?void 0:t.elements),console.log("[PDF Builder] ðŸ”¢ Template elements count:",(null===(r=e.data.template)||void 0===r||null===(r=r.elements)||void 0===r?void 0:r.length)||0),console.log("[PDF Builder] ðŸ“› Template name:",e.data.name),console.log("[PDF Builder] ðŸ†” Template ID:",e.data.id);var o=e.data.template.elements;console.log("[PDF Builder] ðŸ”„ Processing template elements..."),console.log("[PDF Builder] ðŸ“Š Elements type before processing:",Ge(o)),Array.isArray(o)?console.log("[PDF Builder] âœ… Elements already in array format"):"object"===Ge(o)&&null!==o?(console.log("[PDF Builder] ðŸ”„ Converting object elements to array (template loading fix)"),console.log("[PDF Builder] ðŸ“‹ Object keys:",Object.keys(o)),o=Object.values(o),console.log("[PDF Builder] âœ… Conversion completed, new length:",o.length)):(console.log("[PDF Builder] âš ï¸ No valid elements found, using empty array"),o=[]);var a={initialElements:o,templateName:e.data.name||window.pdfBuilderData.templateName||"",isNew:!1,templateId:window.pdfBuilderData.templateId};return console.log("[PDF Builder] ðŸŽ¯ Prepared options with loaded template:",a),console.log("[PDF Builder] ðŸ“Š Initial elements type:",Ge(a.initialElements),"length:",a.initialElements.length),console.log("[PDF Builder] ðŸš€ Calling window.pdfBuilderPro.init with template data..."),console.log("[PDF Builder] ðŸŽ¨ About to render PDF Editor with template:",a.templateName),window.pdfBuilderPro.init("pdf-builder-react-root",a)}console.error("[PDF Builder] âŒ Failed to load template:",e.data),console.log("[PDF Builder] ðŸ”„ Using fallback empty template...");var n={initialElements:[],templateName:window.pdfBuilderData.templateName||"",isNew:!0,templateId:window.pdfBuilderData.templateId};return console.log("[PDF Builder] ðŸŽ¯ Fallback options:",n),console.log("[PDF Builder] ðŸš€ Calling window.pdfBuilderPro.init with fallback data..."),window.pdfBuilderPro.init("pdf-builder-react-root",n)}).catch(function(e){console.error("[PDF Builder] âŒ AJAX error loading template:",e),console.log("[PDF Builder] ðŸ”„ Using fallback empty template after error...");var t={initialElements:[],templateName:window.pdfBuilderData.templateName||"",isNew:!0,templateId:window.pdfBuilderData.templateId};return console.log("[PDF Builder] ðŸŽ¯ Fallback options after error:",t),console.log("[PDF Builder] ðŸš€ Calling window.pdfBuilderPro.init with error fallback data..."),window.pdfBuilderPro.init("pdf-builder-react-root",t)}),!0}console.log("[PDF Builder] ðŸ“ No template ID found, creating new template"),console.log("[PDF Builder] ðŸ†• Template ID is:",window.pdfBuilderData.templateId);var t={initialElements:[],templateName:window.pdfBuilderData.templateName||"",isNew:!0,templateId:null};return console.log("[PDF Builder] ðŸŽ¯ Prepared options for new template:",t),console.log("[PDF Builder] ðŸš€ Calling window.pdfBuilderPro.init for new template..."),window.pdfBuilderPro.init("pdf-builder-react-root",t)}}catch(e){console.error("PDF Builder Pro: Main bundle failed to load:",e)}var Ze=window;for(var Ue in n)Ze[Ue]=n[Ue];n.__esModule&&Object.defineProperty(Ze,"__esModule",{value:!0})})();