/*! For license information please see pdf-builder-react.js.LICENSE.txt */
(()=>{"use strict";var e,t,r={633:(e,t,r)=>{r.d(t,{e:()=>o});var a=r(1609);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown",t=(0,a.useRef)(null),r=(0,a.useRef)(0);return(0,a.useEffect)(function(){return t.current=performance.now(),r.current=0,function(){performance.now(),t.current}},[e]),(0,a.useEffect)(function(){r.current+=1}),{measureOperation:(0,a.useCallback)(function(e,t){performance.now();try{var r=t();return performance.now(),performance.memory,r}catch(e){throw performance.now(),e}},[e]),measureLoadTime:(0,a.useCallback)(function(e){var t=performance.now();return{end:function(){return performance.now()-t}}},[e])}}},1609:e=>{e.exports=window.React},2161:(e,t,r)=>{r.d(t,{$E:()=>p,RT:()=>c,Xl:()=>u,ok:()=>f,ue:()=>d});var a=r(1609);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={CANVAS:"canvas",METABOX:"metabox"},c={OPEN:"OPEN",CLOSE:"CLOSE",SET_PAGE:"SET_PAGE",SET_ZOOM:"SET_ZOOM",SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_DATA:"SET_DATA",SET_ROTATION:"SET_ROTATION",TOGGLE_FULLSCREEN:"TOGGLE_FULLSCREEN"},d={isOpen:!1,mode:s.CANVAS,currentPage:1,totalPages:1,zoom:1,rotation:0,isFullscreen:!1,loading:!1,error:null,data:null,config:{}};function u(e,t){switch(t.type){case c.OPEN:return i(i({},e),{},{isOpen:!0,mode:t.payload.mode||s.CANVAS,data:t.payload.data||null,config:t.payload.config||{},loading:!1,error:null,currentPage:1,zoom:1});case c.CLOSE:return i({},d);case c.SET_PAGE:return i(i({},e),{},{currentPage:Math.max(1,Math.min(t.payload,e.totalPages))});case c.SET_ZOOM:return i(i({},e),{},{zoom:Math.max(.5,Math.min(2,t.payload))});case c.SET_LOADING:return i(i({},e),{},{loading:t.payload});case c.SET_ERROR:return i(i({},e),{},{error:t.payload,loading:!1});case c.SET_DATA:return i(i({},e),{},{data:t.payload,totalPages:t.payload&&t.payload.totalPages||1});case c.SET_ROTATION:return i(i({},e),{},{rotation:t.payload});case c.TOGGLE_FULLSCREEN:return i(i({},e),{},{isFullscreen:!e.isFullscreen});default:return e}}var f=(0,a.createContext)();function p(){var e=(0,a.useContext)(f);if(!e)throw new Error("usePreviewContext must be used within a PreviewProvider");return e}},5312:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(1609),o=r.n(a),n=r(2161),i=r(633);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}const s=o().memo(function(e){var t,r=e.className,s=void 0===r?"":r,c=(0,n.$E)(),d=c.state,u=d.currentPage,f=d.totalPages,p=d.zoom,m=d.rotation,h=d.isFullscreen,b=c.actions,g=b.setPage,y=b.setZoom,v=b.setRotation,w=b.toggleFullscreen,x=(0,i.e)("NavigationControls").measureOperation,E=function(e){if(Array.isArray(e))return e}(t=(0,a.useState)(!1))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,n,i=[],l=!0,s=!1;try{for(o=(t=t.call(e)).next;!(l=(r=o.call(t)).done)&&(i.push(r.value),2!==i.length);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=t.return&&(n=t.return(),Object(n)!==n))return}finally{if(s)throw a}}return i}}(t)||function(e){if(e){if("string"==typeof e)return l(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),C=E[0],S=E[1],N=(0,a.useCallback)(function(e){var t=x("goToPage");g(Math.max(1,Math.min(f,e))),t.end()},[g,f,x]),_=(0,a.useCallback)(function(){N(u-1)},[N,u]),k=(0,a.useCallback)(function(){N(u+1)},[N,u]),P=[25,50,75,100,125,150,200,300,400],T=(0,a.useCallback)(function(e){var t=x("zoomChange");y(Math.max(10,Math.min(500,e))),S(!1),t.end()},[y,x]),O=(0,a.useCallback)(function(){var e=P.findIndex(function(e){return e>=p}),t=P[Math.min(e+1,P.length-1)];T(t)},[p,T,P]),D=(0,a.useCallback)(function(){var e=P.findIndex(function(e){return e>=p}),t=P[Math.max(e-1,0)];T(t)},[p,T,P]),B=(0,a.useCallback)(function(){T(100)},[T]),A=(0,a.useCallback)(function(){T(100)},[T]),F=(0,a.useCallback)(function(){var e=x("rotate");v((m+90)%360),e.end()},[v,m,x]),R=(0,a.useCallback)(function(){var e=x("rotate");v((m-90+360)%360),e.end()},[v,m,x]),I=(0,a.useCallback)(function(){x("export").end()},[x]);return o().createElement("div",{className:"navigation-controls ".concat(s)},o().createElement("div",{className:"nav-main-bar"},o().createElement("div",{className:"nav-page-controls"},o().createElement("button",{className:"nav-btn nav-btn-previous",onClick:_,disabled:u<=1,title:"Page prÃ©cÃ©dente"},"â€¹"),o().createElement("div",{className:"nav-page-indicator"},o().createElement("input",{type:"number",min:"1",max:f,value:u,onChange:function(e){return N(parseInt(e.target.value)||1)},className:"nav-page-input"}),o().createElement("span",{className:"nav-page-total"}," / ",f)),o().createElement("button",{className:"nav-btn nav-btn-next",onClick:k,disabled:u>=f,title:"Page suivante"},"â€º")),o().createElement("div",{className:"nav-zoom-controls"},o().createElement("button",{className:"nav-btn nav-btn-zoom-out",onClick:D,disabled:p<=P[0],title:"Zoom arriÃ¨re"},"âˆ’"),o().createElement("div",{className:"nav-zoom-dropdown"},o().createElement("button",{className:"nav-btn nav-zoom-current",onClick:function(){return S(!C)},title:"Changer le zoom"},p,"%"),C&&o().createElement("div",{className:"nav-zoom-menu"},P.map(function(e){return o().createElement("button",{key:e,className:"nav-zoom-option ".concat(p===e?"active":""),onClick:function(){return T(e)}},e,"%")}),o().createElement("div",{className:"nav-zoom-separator"}),o().createElement("button",{className:"nav-zoom-option",onClick:B},"Ajuster Ã  la largeur"),o().createElement("button",{className:"nav-zoom-option",onClick:A},"Ajuster Ã  la page"))),o().createElement("button",{className:"nav-btn nav-btn-zoom-in",onClick:O,disabled:p>=P[P.length-1],title:"Zoom avant"},"+")),o().createElement("div",{className:"nav-rotation-controls"},o().createElement("button",{className:"nav-btn nav-btn-rotate-ccw",onClick:R,title:"Rotation antihoraire"},"âŸ²"),o().createElement("span",{className:"nav-rotation-display"},m,"Â°"),o().createElement("button",{className:"nav-btn nav-btn-rotate-cw",onClick:F,title:"Rotation horaire"},"âŸ³")),o().createElement("div",{className:"nav-action-controls"},o().createElement("button",{className:"nav-btn nav-btn-export",onClick:I,title:"Exporter"},"â¬‡"),o().createElement("button",{className:"nav-btn nav-btn-fullscreen",onClick:w,title:h?"Quitter le plein Ã©cran":"Plein Ã©cran"},"â›¶"))),o().createElement("div",{className:"nav-status-bar"},o().createElement("span",{className:"nav-status-text"},"Page ",u," sur ",f," â€¢ Zoom ",p,"% â€¢ Rotation ",m,"Â°")))})}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return r[e](n,n.exports,o),n.exports}o.m=r,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce((t,r)=>(o.f[r](e,t),t),[])),o.u=e=>e+".js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="wp-pdf-builder-pro:",o.l=(r,a,n,i)=>{if(e[r])e[r].push(a);else{var l,s;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){l=u;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",o.nc&&l.setAttribute("nonce",o.nc),l.setAttribute("data-webpack",t+n),l.src=r),e[r]=[a];var f=(t,a)=>{l.onerror=l.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach(e=>e(a)),t)return t(a)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),s&&document.head.appendChild(l)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={763:0};o.f.j=(t,r)=>{var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var n=new Promise((r,o)=>a=e[t]=[r,o]);r.push(a[2]=n);var i=o.p+o.u(t),l=new Error;o.l(i,r=>{if(o.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,a[1](l)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,n,[i,l,s]=r,c=0;if(i.some(t=>0!==e[t])){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);s&&s(o)}for(t&&t(r);c<i.length;c++)n=i[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunkwp_pdf_builder_pro=self.webpackChunkwp_pdf_builder_pro||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n={},i=o(1609),l=o.n(i);const s=window.ReactDOM;function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var d=function(e){var t,r=e.selectedTool,a=e.onToolSelect,o=e.zoom,n=e.onZoomChange,i=e.showGrid,s=e.onShowGridChange,d=e.snapToGrid,u=e.onSnapToGridChange,f=e.snapToElements,p=e.onSnapToElementsChange,m=e.onUndo,h=e.onRedo,b=e.canUndo,g=e.canRedo,y=e.settings,v=void 0===y?{}:y,w=function(e){if(Array.isArray(e))return e}(t=l().useState("home"))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,n,i=[],l=!0,s=!1;try{for(o=(t=t.call(e)).next;!(l=(r=o.call(t)).done)&&(i.push(r.value),2!==i.length);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=t.return&&(n=t.return(),Object(n)!==n))return}finally{if(s)throw a}}return i}}(t)||function(e){if(e){if("string"==typeof e)return c(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),x=w[0],E=w[1],C=!1!==v.showGrid,S=!1!==v.snapToGrid,N=!1!==v.snapToElements;return l().createElement("div",{className:"toolbar ribbon-toolbar"},l().createElement("div",{className:"toolbar-tabs"},[{id:"home",label:"Accueil",icon:"ðŸ "},{id:"insert",label:"Insertion",icon:"âž•"},{id:"view",label:"Affichage",icon:"ðŸ‘ï¸"}].map(function(e){return l().createElement("button",{key:e.id,className:"tab-button ".concat(x===e.id?"active":""),onClick:function(){return E(e.id)}},l().createElement("span",{className:"tab-icon"},e.icon),l().createElement("span",{className:"tab-label"},e.label))})),l().createElement("div",{className:"toolbar-content"},"home"===x&&l().createElement("div",{className:"tab-content"},l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Presse-papiers"),l().createElement("div",{className:"group-buttons"},l().createElement("button",{className:"edit-button",onClick:m,disabled:!b,title:"Annuler (Ctrl+Z)"},l().createElement("div",{className:"button-content"},l().createElement("span",{className:"button-icon"},"â†¶"),l().createElement("span",{className:"button-text"},"Annuler"))),l().createElement("button",{className:"edit-button",onClick:h,disabled:!g,title:"RÃ©tablir (Ctrl+Y)"},l().createElement("div",{className:"button-content"},l().createElement("span",{className:"button-icon"},"â†·"),l().createElement("span",{className:"button-text"},"RÃ©tablir"))))),l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Outils"),l().createElement("div",{className:"group-buttons"},[{id:"select",label:"SÃ©lection (V)",icon:"ðŸ‘†",shortcut:"V"},{id:"add-text",label:"Texte Simple (T)",icon:"ðŸ“",shortcut:"T"},{id:"add-text-title",label:"Titre (H)",icon:"ðŸ“„",shortcut:"H"},{id:"add-text-subtitle",label:"Sous-titre (S)",icon:"ðŸ“‹",shortcut:"S"}].map(function(e){return l().createElement("button",{key:e.id,className:"tool-button ".concat(r===e.id?"active":""),onClick:function(){return a(e.id)},title:e.label},l().createElement("div",{className:"tool-content"},l().createElement("span",{className:"tool-icon"},e.icon),l().createElement("span",{className:"tool-label"},e.shortcut)))}))),l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Formes"),l().createElement("div",{className:"group-buttons shapes-grid"},[{id:"add-rectangle",label:"Rectangle (R)",icon:"â–­",shortcut:"R"},{id:"add-circle",label:"Cercle (C)",icon:"â—‹",shortcut:"C"},{id:"add-line",label:"Ligne (L)",icon:"â”",shortcut:"L"},{id:"add-arrow",label:"FlÃ¨che (A)",icon:"âž¤",shortcut:"A"},{id:"add-triangle",label:"Triangle (3)",icon:"â–³",shortcut:"3"},{id:"add-star",label:"Ã‰toile (5)",icon:"â­",shortcut:"5"}].map(function(e){return l().createElement("button",{key:e.id,className:"tool-button ".concat(r===e.id?"active":""),onClick:function(){return a(e.id)},title:e.label},l().createElement("div",{className:"tool-content"},l().createElement("span",{className:"tool-icon"},e.icon),l().createElement("span",{className:"tool-label"},e.shortcut)))})))),"insert"===x&&l().createElement("div",{className:"tab-content"},l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Ã‰lÃ©ments"),l().createElement("div",{className:"group-buttons"},[{id:"add-divider",label:"SÃ©parateur (D)",icon:"âŽ¯",shortcut:"D"},{id:"add-image",label:"Image (I)",icon:"ðŸ–¼ï¸",shortcut:"I"},{id:"add-dynamic-text",label:"Texte Dynamique (Y)",icon:"ðŸ“",shortcut:"Y"}].map(function(e){return l().createElement("button",{key:e.id,className:"tool-button ".concat(r===e.id?"active":""),onClick:function(){return a(e.id)},title:e.label},l().createElement("div",{className:"tool-content"},l().createElement("span",{className:"tool-icon"},e.icon),l().createElement("span",{className:"tool-label"},e.shortcut)))})))),"view"===x&&l().createElement("div",{className:"tab-content"},l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Zoom"),l().createElement("div",{className:"group-buttons"},l().createElement("div",{className:"zoom-controls"},l().createElement("button",{className:"zoom-button",onClick:function(){return n(Math.max(.1,o-.1))},title:"Zoom arriÃ¨re (Ctrl+-)"},l().createElement("span",{className:"button-icon"},"ðŸ”"),l().createElement("span",{className:"button-text"},"-")),l().createElement("span",{className:"zoom-value"},Math.round(100*o),"%"),l().createElement("button",{className:"zoom-button",onClick:function(){return n(Math.min(3,o+.1))},title:"Zoom avant (Ctrl+=)"},l().createElement("span",{className:"button-icon"},"ðŸ”"),l().createElement("span",{className:"button-text"},"+"))))),l().createElement("div",{className:"toolbar-group"},l().createElement("h5",null,"Affichage"),l().createElement("div",{className:"group-buttons"},l().createElement("div",{className:"display-options"},l().createElement("label",{className:"toggle-label ".concat(C?"":"disabled"),title:C?"Afficher/Masquer la grille (G)":"âŒ Grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux",style:C?{position:"relative"}:{opacity:.5,cursor:"not-allowed",position:"relative"}},l().createElement("input",{type:"checkbox",checked:!!C&&i,onChange:function(e){return C&&s(e.target.checked)},disabled:!C}),l().createElement("span",{className:"toggle-text"},"Grille"),l().createElement("span",{className:"toggle-shortcut"},"(G)"),!C&&l().createElement("span",{className:"tooltip-hint"},"âŒ Grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux")),l().createElement("label",{className:"toggle-label ".concat(S?"":"disabled"),title:S?"Aimanter Ã  la grille (X)":"âŒ Aimantation Ã  la grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux",style:S?{position:"relative"}:{opacity:.5,cursor:"not-allowed",position:"relative"}},l().createElement("input",{type:"checkbox",checked:!!S&&d,onChange:function(e){return S&&u(e.target.checked)},disabled:!S}),l().createElement("span",{className:"toggle-text"},"Snap Grille"),l().createElement("span",{className:"toggle-shortcut"},"(X)"),!S&&l().createElement("span",{className:"tooltip-hint"},"âŒ Aimantation Ã  la grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux")),l().createElement("label",{className:"toggle-label ".concat(N?"":"disabled"),title:N?"Aimanter aux Ã©lÃ©ments (Z)":"âŒ Aimantation aux Ã©lÃ©ments dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux",style:N?{position:"relative"}:{opacity:.5,cursor:"not-allowed",position:"relative"}},l().createElement("input",{type:"checkbox",checked:!!N&&f,onChange:function(e){return N&&p(e.target.checked)},disabled:!N}),l().createElement("span",{className:"toggle-text"},"Snap Ã‰lÃ©ments"),l().createElement("span",{className:"toggle-shortcut"},"(Z)"),!N&&l().createElement("span",{className:"tooltip-hint"},"âŒ Aimantation aux Ã©lÃ©ments dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux"))))))))},u=o(2161);const f=function(){return l().createElement("div",{className:"pdf-preview-skeleton"},l().createElement("div",{className:"pdf-preview-skeleton-header"},l().createElement("div",{className:"pdf-preview-skeleton-title"}),l().createElement("div",{className:"pdf-preview-skeleton-close"})),l().createElement("div",{className:"pdf-preview-skeleton-toolbar"},l().createElement("div",{className:"pdf-preview-skeleton-button"}),l().createElement("div",{className:"pdf-preview-skeleton-button"}),l().createElement("div",{className:"pdf-preview-skeleton-button"}),l().createElement("div",{className:"pdf-preview-skeleton-spacer"}),l().createElement("div",{className:"pdf-preview-skeleton-zoom"})),l().createElement("div",{className:"pdf-preview-skeleton-content"},l().createElement("div",{className:"pdf-preview-skeleton-page"},l().createElement("div",{className:"pdf-preview-skeleton-line"}),l().createElement("div",{className:"pdf-preview-skeleton-line short"}),l().createElement("div",{className:"pdf-preview-skeleton-line"}),l().createElement("div",{className:"pdf-preview-skeleton-line medium"}),l().createElement("div",{className:"pdf-preview-skeleton-line"}),l().createElement("div",{className:"pdf-preview-skeleton-line short"}),l().createElement("div",{className:"pdf-preview-skeleton-line"}),l().createElement("div",{className:"pdf-preview-skeleton-spacer"}),l().createElement("div",{className:"pdf-preview-skeleton-line"}),l().createElement("div",{className:"pdf-preview-skeleton-line medium"}),l().createElement("div",{className:"pdf-preview-skeleton-line"}))),l().createElement("div",{className:"pdf-preview-skeleton-footer"},l().createElement("div",{className:"pdf-preview-skeleton-nav"}),l().createElement("div",{className:"pdf-preview-skeleton-page-info"}),l().createElement("div",{className:"pdf-preview-skeleton-export"})))};var p=o(5312),m=(0,i.lazy)(function(){return Promise.all([o.e(279),o.e(431)]).then(o.bind(o,6431))}),h=(0,i.lazy)(function(){return o.e(477).then(o.bind(o,2477))});const b=l().memo(function(){var e=(0,u.$E)(),t=e.state,r=t.isOpen,a=t.mode,o=t.loading,n=t.error,s=e.actions.closePreview;return(0,i.useEffect)(function(){if(r){var e=function(e){"Escape"===e.key&&s()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}},[r,s]),r&&a?l().createElement("div",{className:"pdf-preview-modal-overlay",onClick:function(e){e.target===e.currentTarget&&s()}},l().createElement("div",{className:"pdf-preview-modal-content"},l().createElement("div",{className:"pdf-preview-modal-header"},l().createElement("h3",{className:"pdf-preview-modal-title"},"AperÃ§u PDF ","canvas"===a?"(Ã‰diteur)":"(Commande)"),l().createElement("button",{className:"pdf-preview-modal-close",onClick:s,"aria-label":"Fermer l'aperÃ§u",type:"button"},"Ã—")),l().createElement("div",{className:"pdf-preview-modal-body"},l().createElement(i.Suspense,{fallback:l().createElement(f,null)},n?l().createElement("div",{className:"pdf-preview-error"},l().createElement("p",null,"Erreur lors du chargement de l'aperÃ§u :"),l().createElement("p",{className:"error-message"},n),l().createElement("button",{onClick:s,className:"pdf-preview-error-close"},"Fermer")):l().createElement(l().Fragment,null,"canvas"===a&&l().createElement(m,null),"metabox"===a&&l().createElement(h,null)))),l().createElement(p.A,null),o&&l().createElement("div",{className:"pdf-preview-loading-overlay"},l().createElement("div",{className:"pdf-preview-spinner"}),l().createElement("p",null,"GÃ©nÃ©ration de l'aperÃ§u...")))):null});function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function y(e){var t,r=e.children,a=function(e){if(Array.isArray(e))return e}(t=(0,i.useReducer)(u.Xl,u.ue))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,n,i=[],l=!0,s=!1;try{for(o=(t=t.call(e)).next;!(l=(r=o.call(t)).done)&&(i.push(r.value),2!==i.length);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=t.return&&(n=t.return(),Object(n)!==n))return}finally{if(s)throw a}}return i}}(t)||function(e){if(e){if("string"==typeof e)return g(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?g(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],n=a[1],s=(0,i.useCallback)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n({type:u.RT.OPEN,payload:{mode:e,data:t,config:r}})},[]),c=(0,i.useCallback)(function(){n({type:u.RT.CLOSE})},[]),d=(0,i.useCallback)(function(e){n({type:u.RT.SET_PAGE,payload:e})},[]),f=(0,i.useCallback)(function(e){n({type:u.RT.SET_ZOOM,payload:e})},[]),p=(0,i.useCallback)(function(e){n({type:u.RT.SET_LOADING,payload:e})},[]),m=(0,i.useCallback)(function(e){n({type:u.RT.SET_ERROR,payload:e})},[]),h=(0,i.useCallback)(function(e){n({type:u.RT.SET_DATA,payload:e})},[]),b=(0,i.useCallback)(function(e){n({type:"SET_ROTATION",payload:e})},[]),y=(0,i.useCallback)(function(){n({type:"TOGGLE_FULLSCREEN"})},[]),v=(0,i.useCallback)(function(e){p(!0)},[p]),w=(0,i.useCallback)(function(){p(!1),h(null),m(null)},[p,h,m]),x=(0,i.useMemo)(function(){return{state:o,actions:{openPreview:s,closePreview:c,setPage:d,setZoom:f,setLoading:p,setError:m,setData:h,setRotation:b,toggleFullscreen:y,loadPreview:v,clearPreview:w},isFirstPage:1===o.currentPage,isLastPage:o.currentPage===o.totalPages,canNavigatePrev:o.currentPage>1,canNavigateNext:o.currentPage<o.totalPages,zoomPercentage:Math.round(100*o.zoom)}},[o,s,c,d,f,p,m,h,b,y,v,w]);return l().createElement(u.ok.Provider,{value:x},r)}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){E(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(e,t,r){return(t=function(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}const S=function(e){var t,r=e.onAddElement,a=(e.selectedTool,e.onToolSelect,function(e){if(Array.isArray(e))return e}(t=(0,i.useState)(!1))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,n,i=[],l=!0,s=!1;try{for(o=(t=t.call(e)).next;!(l=(r=o.call(t)).done)&&(i.push(r.value),2!==i.length);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=t.return&&(n=t.return(),Object(n)!==n))return}finally{if(s)throw a}}return i}}(t)||function(e){if(e){if("string"==typeof e)return C(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],n=a[1];return React.createElement(React.Fragment,null,o&&React.createElement("div",{className:"modal-overlay",onClick:function(){return n(!1)}},React.createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}},React.createElement("div",{className:"modal-header"},React.createElement("h3",null,"ðŸŽ¨ Choisir un modÃ¨le d'en-tÃªte"),React.createElement("button",{className:"modal-close",onClick:function(){return n(!1)}},"Ã—")),React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"templates-grid"},[{id:"classic",name:"Classique",sample:"ðŸ¢ ENTREPRISE\n123 Rue de la Paix\n75000 Paris",fontSize:14,fontWeight:"bold"},{id:"modern",name:"Moderne",sample:"âœ¨ ENTREPRISE MODERNE\nInnovation & QualitÃ©\ncontact@entreprise.com",fontSize:16,fontWeight:"bold"},{id:"minimal",name:"Minimal",sample:"ENTREPRISE\nAdresse â€¢ TÃ©lÃ©phone â€¢ Email",fontSize:12,fontWeight:"normal"},{id:"elegant",name:"Ã‰lÃ©gant",sample:"ðŸŽ© Maison Ã‰lÃ©gante\nParis, France\nwww.entreprise.com",fontSize:15,fontWeight:"bold"}].map(function(e){return React.createElement("div",{key:e.id,className:"template-item",onClick:function(){return function(e){n(!1),r("text",{x:50,y:50,width:300,height:60,text:e.sample.replace("\\n","\n"),fontSize:e.fontSize||16,fontWeight:e.fontWeight||"normal"})}(e)}},React.createElement("div",{className:"template-sample"},e.sample.split("\n").map(function(t,r){return React.createElement("div",{key:r,style:{fontSize:e.fontSize,fontWeight:e.fontWeight,marginBottom:"4px",whiteSpace:"pre-wrap"}},t)})),React.createElement("div",{className:"template-name"},e.name))}))))),React.createElement("div",{className:"element-library"},React.createElement("div",{className:"library-header"},React.createElement("h3",null,"ðŸ“š BibliothÃ¨que d'Ã‰lÃ©ments"),React.createElement("p",{className:"library-subtitle"},"Cliquez sur les blocs pour les ajouter au canvas")),React.createElement("div",{className:"library-content"},React.createElement("div",{className:"elements-list"},[{type:"product_table",fieldID:"products_table",label:"Tableau Produits",icon:"ðŸ“‹",description:"Tableau des produits commandÃ©s",defaultProperties:{x:30,y:270,width:530,height:200,tableStyle:"default",columns:"name,price,quantity",showHeaders:!0,showBorders:!0,showSubtotal:!0,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!0,evenRowBg:"#ffffff",evenRowTextColor:"#000000",oddRowBg:"#f8fafc",oddRowTextColor:"#000000",fontSize:12,fontFamily:"Arial",fontWeight:"normal",color:"#333333",backgroundColor:"transparent"}},{type:"customer_info",fieldID:"customer_info",label:"Fiche Client",icon:"ðŸ‘¤",description:"Informations dÃ©taillÃ©es du client",defaultProperties:{showHeaders:!0,showBorders:!1,fields:["name","email","phone","address","company","vat","siret"],layout:"vertical",showLabels:!0,labelStyle:"bold",spacing:8}},{type:"company_logo",fieldID:"company_logo",label:"Logo Entreprise",icon:"ðŸ¢",description:"Logo et identitÃ© visuelle de l'entreprise",defaultProperties:{src:"",imageUrl:"",width:150,height:80,alignment:"left",fit:"contain",autoResize:!0,showBorder:!1,borderRadius:0,borderWidth:0,borderStyle:"solid",borderColor:"transparent"}},{type:"company_info",fieldID:"company_info",label:"Informations Entreprise",icon:"[D]",description:"Nom, adresse, contact et TVA de l'entreprise",defaultProperties:{showHeaders:!1,showBorders:!1,fields:["name","address","phone","email","website","vat","rcs","siret"],layout:"vertical",showLabels:!1,labelStyle:"normal",spacing:4,fontSize:12,fontFamily:"Arial",fontWeight:"normal",textAlign:"left",template:"default",showCompanyName:!0,showAddress:!0,showContact:!0,showLegal:!0,previewCompanyName:"Ma SociÃ©tÃ© SARL",previewAddress:"123 Rue de l'Entreprise\n75001 Paris, France",previewPhone:"+33 1 23 45 67 89",previewEmail:"contact@masociete.com",previewWebsite:"www.masociete.com",previewVat:"FR12345678901",previewSiret:"12345678901234",previewRcs:"RCS Paris 123456789"}},{type:"order_number",fieldID:"order_number",label:"NumÃ©ro de Commande",icon:"ðŸ”¢",description:"RÃ©fÃ©rence de commande avec date et formatage configurable",defaultProperties:{format:"Commande #{order_number} - {order_date}",availableFormats:["Commande #{order_number} - {order_date}","CMD-{order_year}-{order_number}","Facture NÂ°{order_number} du {order_date}","Bon de livraison #{order_number}","{order_number}/{order_year}","NÂ° {order_number} - {order_date}"],fontSize:14,fontFamily:"Arial",fontWeight:"bold",textAlign:"right",color:"#333333",labelColor:"#666666",lineHeight:1.2,showLabel:!0,labelText:"NÂ° de commande:",backgroundColor:"transparent",borderWidth:0,borderStyle:"solid",borderColor:"#e5e7eb",borderRadius:0,previewOrderNumber:"12345",previewOrderDate:"15/10/2025",previewOrderYear:"2025",previewOrderMonth:"10",previewOrderDay:"15"}},{type:"dynamic-text",fieldID:"dynamic_text",label:"Texte Dynamique",icon:"ðŸ“",description:"Texte avec variables dynamiques",defaultProperties:{template:"total_only",customContent:"{{order_total}} â‚¬",fontSize:14,fontFamily:"Arial",fontWeight:"normal",textAlign:"left",color:"#333333"}},{type:"mentions",fieldID:"mentions",label:"Mentions lÃ©gales",icon:"ðŸ“„",description:"Informations lÃ©gales (email, SIRET, tÃ©lÃ©phone, etc.)",defaultProperties:{showEmail:!0,showPhone:!0,showSiret:!0,showVat:!1,showAddress:!1,showWebsite:!1,showCustomText:!1,customText:"",fontSize:8,fontFamily:"Arial",fontWeight:"normal",textAlign:"center",color:"#666666",lineHeight:1.2,separator:" â€¢ ",layout:"horizontal"}}].map(function(e,t){return React.createElement("button",{key:t,className:"element-button",draggable:!0,onDragStart:function(r){return function(e,t,r){e.dataTransfer.setData("application/json",JSON.stringify({type:"element",elementType:t.type,defaultProperties:x({x:50+20*r,y:100+20*r,width:300,height:150},t.defaultProperties)})),e.dataTransfer.effectAllowed="copy"}(r,e,t)},onClick:function(){r(e.type,x({x:50+20*t,y:100+20*t,width:300,height:150},e.defaultProperties))},title:e.description},React.createElement("span",{className:"element-icon"},e.icon),React.createElement("div",{className:"element-info"},React.createElement("div",{className:"element-label"},e.label),React.createElement("div",{className:"element-description"},e.description)))})))))};var N={company_logo:{appearance:{sections:["colors","borders","effects"],properties:{colors:["backgroundColor"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["image"],properties:{image:["imageUrl","alt","objectFit"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},product_table:{appearance:{sections:["table_appearance","colors","typography","font","borders","effects"],properties:{table_appearance:["tableStyle","evenRowBg","oddRowBg","evenRowTextColor","oddRowTextColor"],colors:["backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation","scaleX","scaleY"],layers:["zIndex"]}},content:{sections:["table"],properties:{table:["columns","showHeaders","showBorders","showSubtotal","showShipping","showTaxes","showDiscount","showTotal"]}},effects:{sections:["opacity","shadows","filters"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur"],filters:["brightness","contrast","saturate"]}}},customer_info:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["customer_fields"],properties:{customer_fields:["customerName","customerAddress","customerPhone","customerEmail"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},"dynamic-text":{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["dynamic_text","variables"],properties:{dynamic_text:["dynamicText"],variables:["variables"]}},effects:{sections:["opacity","shadows","filters"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"],filters:["brightness","contrast","saturate"]}}},order_number:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["order_number"],properties:{order_number:["format","showLabel","labelText","labelAlign","previewOrderNumber","highlightNumber","numberBackground"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},company_info:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["company_info"],properties:{company_info:["template"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},mentions:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["mentions"],properties:{mentions:["type"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},rectangle:{appearance:{sections:["colors","borders","effects"],properties:{colors:["color","backgroundColor"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},circle:{appearance:{sections:["colors","borders","effects"],properties:{colors:["color","backgroundColor"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},line:{appearance:{sections:["colors","effects"],properties:{colors:["color"],effects:["opacity"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity"],properties:{opacity:["opacity"]}}},arrow:{appearance:{sections:["colors","effects"],properties:{colors:["color"],effects:["opacity"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity"],properties:{opacity:["opacity"]}}},default:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}}},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e)return t;var r=parseFloat(e);return isNaN(r)?t:r},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e)return t;var r=parseInt(e,10);return isNaN(r)?t:r},P=function(e,t){return!({product_table:["typography"]}[t]||[]).includes(e)};function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}const O=(0,i.memo)(function(e){var t,r=e.title,a=e.icon,o=e.children,n=e.defaultOpen,l=void 0!==n&&n,s=e.className,c=void 0===s?"":s,d=function(e){if(Array.isArray(e))return e}(t=(0,i.useState)(l))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,n,i=[],l=!0,s=!1;try{for(o=(t=t.call(e)).next;!(l=(r=o.call(t)).done)&&(i.push(r.value),2!==i.length);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=t.return&&(n=t.return(),Object(n)!==n))return}finally{if(s)throw a}}return i}}(t)||function(e){if(e){if("string"==typeof e)return T(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=d[0],f=d[1],p=(0,i.useMemo)(function(){return"accordion-content-".concat(Math.random().toString(36).substr(2,9))},[]),m=(0,i.useCallback)(function(){f(function(e){return!e})},[]),h=(0,i.useCallback)(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},[m]);return React.createElement("div",{className:"accordion ".concat(c)},React.createElement("button",{className:"accordion-header",onClick:m,onKeyDown:h,type:"button","aria-expanded":u,"aria-controls":p},React.createElement("span",{className:"accordion-title"},a&&React.createElement("span",{className:"accordion-icon"},a),r),React.createElement("span",{className:"accordion-arrow ".concat(u?"open":"")},"â–¼")),React.createElement("div",{id:p,className:"accordion-content ".concat(u?"open":""),role:"region","aria-labelledby":"accordion-header-".concat(p)},o))}),D=function(e){var t,r=e.label,a=e.value,o=e.onChange,n=e.presets,i=void 0===n?[]:n,s=e.defaultColor,c=void 0===s?"#ffffff":s,d=(t=a)&&"transparent"!==t?!t.startsWith("#")||4!==t.length&&7!==t.length?c:t:c;return l().createElement("div",{className:"property-row"},l().createElement("label",null,r,":"),l().createElement("div",{className:"color-picker-container"},l().createElement("input",{type:"color",value:d,onChange:function(e){var t=e.target.value;o(t)},className:"color-input",title:"Couleur actuelle: ".concat(a||"transparent")}),l().createElement("div",{className:"color-presets"},i.filter(function(e){return e&&"transparent"!==e&&e.startsWith("#")}).map(function(e,t){return l().createElement("button",{key:t,className:"color-preset ".concat(a===e?"active":""),style:{backgroundColor:e,border:a===e?"2px solid #2563eb":"1px solid #e2e8f0"},onClick:function(){return o(e)},title:"".concat(r,": ").concat(e),"aria-label":"SÃ©lectionner la couleur ".concat(e)})}),i.includes("transparent")&&l().createElement("button",{className:"color-preset transparent ".concat("transparent"===a?"active":""),style:{background:"transparent"===a?"repeating-conic-gradient(#f0f0f0 0% 25%, #ffffff 0% 50%) 50% / 10px 10px":"repeating-conic-gradient(#e2e8f0 0% 25%, #ffffff 0% 50%) 50% / 10px 10px",border:"transparent"===a?"2px solid #2563eb":"1px solid #e2e8f0"},onClick:function(){return o("transparent")},title:"".concat(r,": Transparent"),"aria-label":"Rendre transparent"}))))};function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}var A=function(e){var t=e.label,r=e.children,a=e.minWidth,o=void 0===a?350:a,n=e.className,s=void 0===n?"":n,c=e.forceVertical,d=void 0!==c&&c,u=e.demoMode,f=void 0!==u&&u,p=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350,r=function(e){if(Array.isArray(e))return e}(e=(0,i.useState)(!1))||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,n,i=[],l=!0,s=!1;try{for(o=(t=t.call(e)).next;!(l=(r=o.call(t)).done)&&(i.push(r.value),2!==i.length);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=t.return&&(n=t.return(),Object(n)!==n))return}finally{if(s)throw a}}return i}}(e)||function(e){if(e){if("string"==typeof e)return B(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?B(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=r[0],o=r[1],n=(0,i.useRef)(null);return(0,i.useEffect)(function(){var e=function(){if(n.current){var e=n.current.getBoundingClientRect();o(e.width<t)}};e(),window.addEventListener("resize",e);var r=new ResizeObserver(e);return n.current&&r.observe(n.current),function(){window.removeEventListener("resize",e),r.disconnect()}},[t]),{isVertical:a,containerRef:n}}(o),m=p.isVertical,h=p.containerRef,b=d||m;return l().createElement("div",{ref:h,className:"adaptive-control ".concat(b?"adaptive-vertical":"adaptive-horizontal"," ").concat(s),style:f?{border:"2px dashed #3b82f6",padding:"8px",margin:"4px 0",borderRadius:"6px",backgroundColor:b?"#eff6ff":"#f0fdf4"}:{}},l().createElement("label",{className:"adaptive-label",style:f?{color:b?"#1d4ed8":"#166534",fontWeight:"bold"}:{}},t,f&&l().createElement("span",{style:{fontSize:"10px",marginLeft:"8px",padding:"2px 6px",borderRadius:"10px",backgroundColor:b?"#dbeafe":"#dcfce7",color:b?"#1e40af":"#166534"}},b?"VERTICAL":"HORIZONTAL")),l().createElement("div",{className:"adaptive-content"},r))};const F=function(e){var t=e.selectedStyle,r=e.onStyleSelect,a=[{key:"default",name:"DÃ©faut",description:"Style simple et Ã©purÃ©"},{key:"classic",name:"Classique",description:"Style traditionnel avec bordures"},{key:"striped",name:"RayÃ©",description:"Lignes alternÃ©es pour une meilleure lisibilitÃ©"},{key:"bordered",name:"Avec bordures",description:"Bordures complÃ¨tes autour des cellules"},{key:"minimal",name:"Minimal",description:"Design minimaliste sans bordures"},{key:"modern",name:"Moderne",description:"Style contemporain avec ombres"},{key:"blue_ocean",name:"OcÃ©an bleu",description:"Palette bleue apaisante"},{key:"emerald_forest",name:"ForÃªt d'Ã©meraude",description:"Teintes vertes naturelles"},{key:"sunset_orange",name:"Orange coucher",description:"Couleurs chaudes du coucher de soleil"},{key:"royal_purple",name:"Violet royal",description:"Palette violette Ã©lÃ©gante"},{key:"rose_pink",name:"Rose bonbon",description:"Teintes roses douces"},{key:"teal_aqua",name:"Aigue-marine",description:"Bleu-vert rafraÃ®chissant"}];return l().createElement("div",{className:"property-row"},l().createElement("label",{style:{fontWeight:"600",color:"#374151",marginBottom:"4px",display:"block"}},"ðŸŽ¨ Style tableau:"),l().createElement("div",{className:"table-style-preview-grid"},a.map(function(e){var o,n,i=e.key,s=e.name,c=e.description;return l().createElement("div",{key:i,className:"table-style-preview-item"},l().createElement("div",{className:"table-style-preview-container ".concat(t===i?"selected":""),onClick:function(){return r(i)},title:"".concat(s," - ").concat(c)},(n=We(o=i),l().createElement("div",{className:"table-style-preview-thumbnail",style:{borderRadius:"".concat(.3*n.borderRadius,"px"),backgroundColor:n.rowBg,border:n.borderWidth>0?"".concat(.5*n.borderWidth,"px solid ").concat(n.rowBorder):"1px solid #e2e8f0",boxShadow:n.shadowBlur>0?"0 1px ".concat(.3*n.shadowBlur,"px ").concat(n.shadowColor):"none"},onClick:function(){return r(o)},title:"".concat(a.find(function(e){return e.key===o})&&a.find(function(e){return e.key===o}).name||o," - ").concat(a.find(function(e){return e.key===o})&&a.find(function(e){return e.key===o}).description||"")},l().createElement("div",{style:{height:"24px",background:"linear-gradient(135deg, ".concat(n.headerBg," 0%, ").concat(n.headerBg," 100%)"),borderBottom:n.borderWidth>0?"".concat(.5*n.borderWidth,"px solid ").concat(n.headerBorder):"none",display:"flex",alignItems:"center",justifyContent:"center"}},l().createElement("div",{style:{fontSize:"7px",fontWeight:n.headerFontWeight,color:n.headerTextColor,textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center",lineHeight:"1"}},"Titre")),l().createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},l().createElement("div",{style:{flex:1,backgroundColor:n.rowBg,borderBottom:n.borderWidth>0?"".concat(.3*n.borderWidth,"px solid ").concat(n.rowBorder):"none",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 4px"}},l().createElement("div",{style:{fontSize:"6px",color:n.rowTextColor,opacity:.9,fontWeight:"500"}},"Produit A"),l().createElement("div",{style:{fontSize:"6px",color:n.rowTextColor,opacity:.7}},"25â‚¬")),l().createElement("div",{style:{flex:1,backgroundColor:n.altRowBg,borderBottom:n.borderWidth>0?"".concat(.3*n.borderWidth,"px solid ").concat(n.rowBorder):"none",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 4px"}},l().createElement("div",{style:{fontSize:"6px",color:n.rowTextColor,opacity:.9,fontWeight:"500"}},"Produit B"),l().createElement("div",{style:{fontSize:"6px",color:n.rowTextColor,opacity:.7}},"15â‚¬")),l().createElement("div",{style:{flex:1,backgroundColor:n.rowBg,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}},l().createElement("div",{style:{fontSize:"6px",color:n.rowTextColor,opacity:.8}},"Total: 40â‚¬"))),t===o&&l().createElement("div",{className:"table-style-selection-indicator"})))),l().createElement("div",{className:"table-style-name"},s),("default"===i||"modern"===i||"striped"===i)&&l().createElement("div",{style:{fontSize:"8px",color:"#059669",fontWeight:"600",marginTop:"2px",textTransform:"uppercase",letterSpacing:"0.05em"}},"â˜… Populaire"))})))},R=function(e,t,r,a){var o,n,i,s,c,d,u,f,p,m,h,b,g,y,v=((N[e.type]||N.default).effects||{}).properties||{},w=function(e){return Object.values(v).some(function(t){return Array.isArray(t)&&t.includes(e)})};return l().createElement(O,{key:"effects",title:"Effets",icon:"âœ¨",defaultOpen:!1,className:"properties-accordion"},w("opacity")&&l().createElement("div",{className:"property-row"},l().createElement("label",null,"OpacitÃ©:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:null!==(o=t.opacity)&&void 0!==o?o:1,onChange:function(t){return r(e.id,"opacity",_(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},Math.round(100*(null!==(n=t.opacity)&&void 0!==n?n:1)),"%"))),w("shadow")&&l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ombre:"),l().createElement("input",{type:"checkbox",checked:t.shadow||!1,onChange:function(t){return r(e.id,"shadow",t.target.checked)}})),t.shadow&&l().createElement(l().Fragment,null,l().createElement(D,{label:"Couleur ombre",value:t.shadowColor||"#000000",onChange:function(t){return r(e.id,"shadowColor",t)},presets:["#000000","#ffffff","#64748b","#ef4444","#3b82f6"]}),l().createElement("div",{className:"property-row"},l().createElement("label",null,"DÃ©calage X:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"-20",max:"20",step:"1",value:null!==(i=t.shadowOffsetX)&&void 0!==i?i:2,onChange:function(t){return r(e.id,"shadowOffsetX",k(t.target.value,2))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(s=t.shadowOffsetX)&&void 0!==s?s:2,"px"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"DÃ©calage Y:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"-20",max:"20",step:"1",value:null!==(c=t.shadowOffsetY)&&void 0!==c?c:2,onChange:function(t){return r(e.id,"shadowOffsetY",k(t.target.value,2))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(d=t.shadowOffsetY)&&void 0!==d?d:2,"px"))),w("shadowBlur")&&l().createElement("div",{className:"property-row"},l().createElement("label",null,"Flou ombre:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"20",step:"1",value:null!==(u=t.shadowBlur)&&void 0!==u?u:0,onChange:function(t){return r(e.id,"shadowBlur",k(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(f=t.shadowBlur)&&void 0!==f?f:0,"px"))))),w("brightness")&&l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"LuminositÃ©:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"2",step:"0.1",value:null!==(p=t.brightness)&&void 0!==p?p:1,onChange:function(t){return r(e.id,"brightness",_(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(m=t.brightness)&&void 0!==m?m:1))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Contraste:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"2",step:"0.1",value:null!==(h=t.contrast)&&void 0!==h?h:1,onChange:function(t){return r(e.id,"contrast",_(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(b=t.contrast)&&void 0!==b?b:1))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Saturation:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"2",step:"0.1",value:null!==(g=t.saturate)&&void 0!==g?g:1,onChange:function(t){return r(e.id,"saturate",_(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(y=t.saturate)&&void 0!==y?y:1)))))};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach(function(t){W(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function W(e,t,r){return(t=z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}var X=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.propertyValidators=new Map,this.propertyPresets=new Map,this.propertyGroups=new Map,this.initDefaults()},t=[{key:"initDefaults",value:function(){var e=this;this.propertyValidators.set("numeric",function(e){return parseFloat(e)||0}),this.propertyValidators.set("positiveNumeric",function(e){return Math.max(0,parseFloat(e)||0)}),this.propertyValidators.set("percentage",function(e){return Math.max(0,Math.min(100,parseFloat(e)||100))}),this.propertyValidators.set("angle",function(e){return((parseFloat(e)||0)%360+360)%360}),this.propertyValidators.set("color",function(t){return e.validateColor(t)}),this.propertyValidators.set("fontSize",function(e){return Math.max(8,Math.min(72,parseInt(e)||14))}),this.propertyValidators.set("borderWidth",function(e){return Math.max(0,Math.min(20,parseInt(e)||0))}),this.propertyValidators.set("borderStyle",function(e){return["solid","dashed","dotted","double"].includes(e)?e:"solid"}),this.propertyValidators.set("borderRadius",function(e){return Math.max(0,Math.min(100,parseInt(e)||0))}),this.propertyPresets.set("colors",{slate:["#f8fafc","#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#1e293b"],blue:["#eff6ff","#dbeafe","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af"],green:["#f0fdf4","#dcfce7","#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d","#166534"],red:["#fef2f2","#fee2e2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c","#991b1b"]}),this.propertyGroups.set("position",["x","y"]),this.propertyGroups.set("dimensions",["width","height"]),this.propertyGroups.set("typography",["fontFamily","fontSize","fontWeight","fontStyle","color","textAlign"]),this.propertyGroups.set("appearance",["backgroundColor","borderColor","borderWidth","borderRadius"]),this.propertyGroups.set("effects",["opacity","shadow","brightness","contrast","saturate"]),this.propertyGroups.set("transform",["rotation","scale"])}},{key:"validateColor",value:function(e){if(!e)return"#000000";if(/^#[0-9A-Fa-f]{6}$/.test(e)||/^#[0-9A-Fa-f]{3}$/.test(e))return e;var t=document.createElement("div");return t.style.color=e,t.style.color||"#000000"}},{key:"validateProperty",value:function(e,t){if("boolean"==typeof t)return t;if(e.startsWith("columns."))return t;var r=this.propertyValidators.get(e);if(r)try{return r(t)}catch(t){return this.getDefaultValue(e)}return this.isNumericProperty(e)?this.validateNumericProperty(e,t):this.isColorProperty(e)?this.validateColorProperty(t):this.isTextStyleProperty(e)?this.validateTextStyleProperty(e,t):t}},{key:"isNumericProperty",value:function(e){return["x","y","width","height","fontSize","opacity","lineHeight","letterSpacing","zIndex","borderWidth","borderRadius","rotation","padding"].includes(e)}},{key:"isColorProperty",value:function(e){return["color","backgroundColor","borderColor"].includes(e)}},{key:"isTextStyleProperty",value:function(e){return["fontWeight","textAlign","textDecoration","textTransform","borderStyle"].includes(e)}},{key:"validateNumericProperty",value:function(e,t){if(null==t||""===t)return this.getDefaultValue(e);var r;if("string"==typeof t){if(r=parseFloat(t),isNaN(r))return this.getDefaultValue(e)}else{if("number"!=typeof t)return this.getDefaultValue(e);r=t}var a={fontSize:{min:8,max:72},opacity:{min:0,max:1},lineHeight:{min:.5,max:3},letterSpacing:{min:-5,max:10},zIndex:{min:-100,max:1e3},borderWidth:{min:0,max:20},borderRadius:{min:0,max:100},rotation:{min:-180,max:180},padding:{min:0,max:100}};if(a[e]){var o=a[e],n=o.min,i=o.max;r=Math.max(n,Math.min(i,r))}return r}},{key:"validateColorProperty",value:function(e){if(!e)return"#000000";if("transparent"===e)return e;if(/^#[0-9A-Fa-f]{6}$/.test(e)||/^#[0-9A-Fa-f]{3}$/.test(e))return e;var t=document.createElement("div");t.style.color=e;var r=t.style.color;return r&&""!==r?e:"#000000"}},{key:"validateTextStyleProperty",value:function(e,t){var r={fontWeight:["normal","bold","100","200","300","400","500","600","700","800","900"],textAlign:["left","center","right","justify"],textDecoration:["none","underline","overline","line-through"],textTransform:["none","capitalize","uppercase","lowercase"],borderStyle:["solid","dashed","dotted","double","none"]};return r[e]&&r[e].includes(t)?t:{fontWeight:"normal",textAlign:"left",textDecoration:"none",textTransform:"none",borderStyle:"solid"}[e]||t}},{key:"getDefaultValue",value:function(e){return{x:0,y:0,width:100,height:50,fontSize:14,opacity:1,lineHeight:1.2,letterSpacing:0,zIndex:0,borderWidth:0,borderRadius:0,rotation:0,padding:0,color:"#333333",backgroundColor:"transparent",borderColor:"#dddddd",fontWeight:"normal",textAlign:"left",textDecoration:"none",textTransform:"none",borderStyle:"solid"}[e]||null}},{key:"getPresets",value:function(e){return this.propertyPresets.get(e)||{}}},{key:"getPropertiesInGroup",value:function(e){return this.propertyGroups.get(e)||[]}},{key:"applyPreset",value:function(e,t){return{"text-title":{fontSize:24,fontWeight:"bold",textAlign:"center",color:"#1e293b"},"text-subtitle":{fontSize:18,fontWeight:"bold",textAlign:"left",color:"#334155"},"text-body":{fontSize:14,fontWeight:"normal",textAlign:"left",color:"#475569"},"text-caption":{fontSize:12,fontWeight:"normal",textAlign:"left",color:"#64748b"},"shape-rounded":{borderRadius:8,borderWidth:1,borderColor:"transparent"},"shape-circle":{borderRadius:50,borderWidth:1,borderColor:"transparent"},"shape-square":{borderRadius:0,borderWidth:1,borderColor:"transparent"},"effect-shadow-soft":{shadow:!0,shadowColor:"#000000",shadowOffsetX:1,shadowOffsetY:1,opacity:90},"effect-shadow-strong":{shadow:!0,shadowColor:"#000000",shadowOffsetX:3,shadowOffsetY:3,opacity:85},"effect-glow":{shadow:!0,shadowColor:"#2563eb",shadowOffsetX:0,shadowOffsetY:0,opacity:95},"color-primary":{backgroundColor:"#2563eb",color:"#ffffff"},"color-secondary":{backgroundColor:"#64748b",color:"#ffffff"},"color-success":{backgroundColor:"#16a34a",color:"#ffffff"},"color-warning":{backgroundColor:"#ca8a04",color:"#ffffff"},"color-error":{backgroundColor:"#dc2626",color:"#ffffff"}}[e]||{}}},{key:"getDefaultProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text";return j(j({},{x:50,y:50,width:100,height:50,opacity:100,rotation:0,scale:100,visible:!0,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderStyle:"solid",borderRadius:0,color:"#1e293b",fontFamily:"Inter, sans-serif",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",text:"Texte",src:"",alt:"",objectFit:"cover",shadow:!1,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2,brightness:100,contrast:100,saturate:100,showHeaders:!0,showBorders:!0,headers:["Produit","QtÃ©","Prix"],dataSource:"order_items",columns:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0},showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1,progressColor:"#3b82f6",progressValue:75,lineColor:"#64748b",lineWidth:2,documentType:"invoice",imageUrl:"",spacing:8,layout:"vertical",alignment:"left",fit:"contain"}),{text:{width:150,height:30},image:{width:150,height:100},rectangle:{backgroundColor:"#f1f5f9",borderWidth:1,width:150,height:80},product_table:{width:300,height:150},customer_info:{width:200,height:100},company_logo:{width:100,height:60},order_number:{width:150,height:30},company_info:{width:200,height:80},document_type:{width:120,height:40},watermark:{width:300,height:200,opacity:10,text:"CONFIDENTIEL"},"progress-bar":{width:200,height:20},barcode:{width:150,height:60},qrcode:{width:80,height:80},icon:{width:50,height:50},line:{height:2}}[e]||{})}},{key:"getComputedProperties",value:function(e){return{absoluteX:e.x+e.width/2,absoluteY:e.y+e.height/2,scaledWidth:e.width*(e.scale/100),scaledHeight:e.height*(e.scale/100),cssTransform:"rotate(".concat(e.rotation,"deg) scale(").concat(e.scale/100,")"),cssFilter:"brightness(".concat(e.brightness,"%) contrast(").concat(e.contrast,"%) saturate(").concat(e.saturate,"%)"),cssBoxShadow:e.shadow?"".concat(e.shadowOffsetX||0,"px ").concat(e.shadowOffsetY||0,"px 4px ").concat(e.shadowColor||"#000000"):"none"}}},{key:"isAnimatable",value:function(e){return["x","y","width","height","rotation","scale","opacity","brightness","contrast","saturate"].includes(e)}},{key:"getPropertyConstraints",value:function(e){return{x:{min:-1e3,max:2e3,step:1},y:{min:-1e3,max:2e3,step:1},width:{min:1,max:2e3,step:1},height:{min:1,max:2e3,step:1},fontSize:{min:8,max:72,step:1},borderWidth:{min:0,max:20,step:1},borderRadius:{min:0,max:100,step:1},rotation:{min:-180,max:180,step:1},scale:{min:10,max:200,step:5},opacity:{min:0,max:100,step:1},brightness:{min:0,max:200,step:5},contrast:{min:0,max:200,step:5},saturate:{min:0,max:200,step:5},shadowOffsetX:{min:-50,max:50,step:1},shadowOffsetY:{min:-50,max:50,step:1}}[e]||{}}}],t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,z(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()),L={special:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},layout:{backgroundColor:{disabled:!1,default:"#f8fafc"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},text:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},shape:{backgroundColor:{disabled:!1,default:"#e5e7eb"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},media:{backgroundColor:{disabled:!1,default:"#f3f4f6"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},dynamic:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}}},G={product_table:"special",customer_info:"special",company_logo:"special",company_info:"special",order_number:"special",document_type:"special","progress-bar":"special","layout-header":"layout","layout-footer":"layout","layout-sidebar":"layout","layout-section":"layout","layout-container":"layout","layout-section-divider":"layout","layout-spacer":"layout","layout-two-column":"layout","layout-three-column":"layout",text:"text","dynamic-text":"text","conditional-text":"text",counter:"text","date-dynamic":"text",currency:"text",formula:"text",rectangle:"shape",line:"shape","shape-rectangle":"shape","shape-circle":"shape","shape-line":"shape","shape-arrow":"shape","shape-triangle":"shape","shape-star":"shape",divider:"shape",image:"media","image-upload":"media",logo:"media",barcode:"media",qrcode:"media","qrcode-dynamic":"media",icon:"media","table-dynamic":"dynamic","gradient-box":"dynamic","shadow-box":"dynamic","rounded-box":"dynamic","border-box":"dynamic","background-pattern":"dynamic",watermark:"dynamic","invoice-header":"layout","invoice-address-block":"layout","invoice-info-block":"layout","invoice-products-table":"special","invoice-totals-block":"layout","invoice-payment-terms":"layout","invoice-legal-footer":"layout","invoice-signature-block":"layout"},Y=function(e,t){var r=L[G[e]||"text"];return!r||!r[t]||!r[t].disabled},Z=function(e,t,r){if(!Y(e,t))return{valid:!1,reason:L[G[e]||"text"][t]&&L[G[e]||"text"][t].reason||"PropriÃ©tÃ© non autorisÃ©e"};switch(t){case"backgroundColor":if("string"!=typeof r)return{valid:!1,reason:"La couleur doit Ãªtre une chaÃ®ne"};break;case"borderWidth":if("number"!=typeof r||r<0)return{valid:!1,reason:"La largeur de bordure doit Ãªtre un nombre positif"};break;case"fontSize":if("number"!=typeof r||r<=0)return{valid:!1,reason:"La taille de police doit Ãªtre un nombre positif"};break;case"width":case"height":if("number"!=typeof r||r<=0)return{valid:!1,reason:"Les dimensions doivent Ãªtre positives"}}return{valid:!0}},U=function(e,t,r){var a={borderWidth:0,fontSize:14,width:100,height:50,padding:8};return void 0!==a[t]?a[t]:{backgroundColor:"transparent",borderColor:"transparent",color:"#000000",fontFamily:"Arial, sans-serif"}[t]||r};function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach(function(t){J(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function J(e,t,r){return(t=function(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(a=n.call(r)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(a=n.call(r)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}const te=(0,i.memo)(function(e){var t=e.selectedElements,r=e.elements,a=e.onPropertyChange,o=e.onBatchUpdate,n=K((0,i.useState)("#ffffff"),2),s=n[0],c=n[1],d=K((0,i.useState)(0),2),u=d[0],f=d[1],p=K((0,i.useState)("#000000"),2),m=(p[0],p[1]),h=K((0,i.useState)(!1),2),b=(h[0],h[1]),g=function(e,t,r){var a=$((0,i.useState)({}),2),o=a[0],n=a[1],l=$((0,i.useState)("appearance"),2),s=l[0],c=l[1],d=(0,i.useMemo)(function(){return e.length>0?e[0]:null},[e]);(0,i.useEffect)(function(){if(d){var e={color:"#333333",backgroundColor:"transparent",borderColor:"#dddddd",borderWidth:0,borderStyle:"solid",borderRadius:4,fontSize:14,fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",lineHeight:1.2,letterSpacing:0,tableStyle:"default",columns:"name,price,quantity",showHeaders:!0,showBorders:!0,showSubtotal:!0,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!0,evenRowBg:"#ffffff",evenRowTextColor:"#000000",oddRowBg:"#f8fafc",oddRowTextColor:"#000000"},t=d.type,r=V({},e);Object.keys(e).forEach(function(e){var a=function(e,t){var r=L[G[e]||"text"];return r&&r[t]&&void 0!==r[t].default?r[t].default:null}(t,e);null!==a&&(r[e]=a),"special"===G[t]&&"backgroundColor"===e&&(r[e]="transparent")});var a=V(V({},r),d);Object.keys(r).forEach(function(e){if(Y(t,e))"special"!==G[t]||"backgroundColor"!==e||a[e]||(a[e]="transparent");else{var r=U(0,e,a[e]);r!==a[e]&&(a[e]=r)}}),Object.keys(a).forEach(function(e){Z(t,e,a[e]).valid||(a[e]=U(0,e,a[e]))}),n(a)}else n({})},[d&&d.id]);var u=(0,i.useCallback)(function(e,a,o){var i=t.find(function(t){return t.id===e});if(i){var l=o;if(Z(i.type,a,o).valid){if("boolean"!=typeof o&&!a.startsWith("columns."))try{var s=X.validateProperty(a,o);void 0!==s&&(l=s)}catch(e){}n(function(e){var t;return a.includes(".")?function(e,t,r){var a=t.split("."),o=a.pop();a.reduce(function(e,t){return e[t]&&"object"===H(e[t])?e[t]=V({},e[t]):e[t]={},e[t]},e)[o]=r}(t=V({},e),a,l):t=V(V({},e),{},J({},a,l)),t}),r(e,a,l)}}},[r,t]),f=(0,i.useCallback)(function(e,t){var r={"color-dark":{color:"#1e293b"},"color-light":{color:"#f8fafc"},"color-primary":{color:"#2563eb"},"color-success":{color:"#16a34a"},"color-warning":{color:"#ca8a04"},"color-error":{color:"#dc2626"},"text-title":{fontSize:24,fontWeight:"bold",textAlign:"center"},"text-subtitle":{fontSize:18,fontWeight:"bold",textAlign:"left"},"text-body":{fontSize:14,fontWeight:"normal",textAlign:"left"},"text-caption":{fontSize:12,fontWeight:"normal",textAlign:"left"},"shape-rounded":{borderRadius:8},"shape-circle":{borderRadius:50},"shape-square":{borderRadius:0},"effect-shadow":{shadow:!0,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2},"effect-glow":{shadow:!0,shadowColor:"#2563eb",shadowOffsetX:0,shadowOffsetY:0},"effect-none":{shadow:!1,brightness:100,contrast:100,saturate:100}};r[t]&&Object.entries(r[t]).forEach(function(t){var r=$(t,2),a=r[0],o=r[1];u(e,a,o)})},[u]),p=(0,i.useCallback)(function(e){Object.entries({x:50,y:50,width:100,height:50,backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:1,borderStyle:"solid",borderRadius:4,color:"#333333",fontSize:14,fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",lineHeight:1.2,letterSpacing:0,opacity:100,rotation:0,scale:100,shadow:!1,brightness:100,contrast:100,saturate:100}).forEach(function(t){var r=$(t,2),a=r[0],o=r[1];u(e,a,o)})},[u]);return{localProperties:o,activeTab:s,setActiveTab:c,selectedElement:d,handlePropertyChange:u,applyPropertyPreset:f,resetProperties:p,validatePropertyValue:function(e,t){switch(e){case"x":case"y":case"width":case"height":return Math.max(0,parseInt(t)||0);case"fontSize":return Math.max(8,Math.min(72,parseInt(t)||14));case"lineHeight":return Math.max(.5,Math.min(5,parseFloat(t)||1.2));case"letterSpacing":return Math.max(-5,Math.min(20,parseFloat(t)||0));case"borderWidth":return Math.max(0,Math.min(20,parseInt(t)||0));case"borderStyle":return["solid","dashed","dotted","double"].includes(t)?t:"solid";case"borderRadius":return Math.max(0,Math.min(100,parseInt(t)||0));case"rotation":return((parseInt(t)||0)%360+360)%360;case"scale":return Math.max(10,Math.min(200,parseInt(t)||100));case"opacity":return Math.max(0,Math.min(100,parseInt(t)||100));case"brightness":case"contrast":case"saturate":return Math.max(0,Math.min(200,parseInt(t)||100));case"shadowOffsetX":case"shadowOffsetY":return Math.max(-50,Math.min(50,parseInt(t)||0));default:return t}}}}(t,r,a),y=g.localProperties,v=g.activeTab,w=g.setActiveTab,x=g.handlePropertyChange,E=function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3e3,n=(0,i.useRef)(new Map),l=(0,i.useRef)(null),s=(0,i.useRef)(new Map),c=(0,i.useCallback)(function(e,t,r){l.current&&clearTimeout(l.current);var i="".concat(e,".").concat(t);n.current.set(i,{elementId:e,property:t,value:r}),a&&(l.current=setTimeout(function(){u()},o))},[a,o]),d=(0,i.useCallback)(function(e,r,a){l.current&&clearTimeout(l.current),t(e,r,a);var o="".concat(e,".").concat(r);s.current.set(o,a),n.current.delete(o)},[t]),u=(0,i.useCallback)(function(){if(0!==n.current.size){var e=Array.from(n.current.values()),a=e.reduce(function(e,t){return e[t.elementId]||(e[t.elementId]={}),e[t.elementId][t.property]=t.value,e},{});r&&Object.keys(a).length>1?r(a):e.forEach(function(e){var r=e.elementId,a=e.property,o=e.value;t(r,a,o)}),e.forEach(function(e){var t=e.elementId,r=e.property,a=e.value,o="".concat(t,".").concat(r);s.current.set(o,a)}),n.current.clear()}},[t,r]),f=(0,i.useCallback)(function(){u()},[u]),p=(0,i.useCallback)(function(){return n.current.size>0},[]),m=(0,i.useCallback)(function(e){var t=[];return n.current.forEach(function(r,a){r.elementId===e&&t.push(r)}),t},[]),h=(0,i.useCallback)(function(e){var t=[];n.current.forEach(function(r,a){r.elementId===e&&t.push(a)}),t.forEach(function(e){return n.current.delete(e)})},[]),b=(0,i.useCallback)(function(e,t){var r="".concat(e,".").concat(t),a=s.current.get(r);return void 0!==a?(n.current.delete(r),a):null},[]),g=(0,i.useCallback)(function(e,t,r,a){var o=r;return a&&(o=a(r)),o=y(t,o),c(e,t,o),o},[c]),y=function(e,t){switch(e){case"x":case"y":case"width":case"height":return Math.max(0,parseInt(t)||0);case"fontSize":return Math.max(8,Math.min(72,parseInt(t)||14));case"borderWidth":return Math.max(0,Math.min(20,parseInt(t)||0));case"borderRadius":return Math.max(0,Math.min(100,parseInt(t)||0));case"rotation":return((parseInt(t)||0)%360+360)%360;case"scale":return Math.max(10,Math.min(200,parseInt(t)||100));case"opacity":return Math.max(0,Math.min(100,parseInt(t)||100));case"brightness":case"contrast":case"saturate":return Math.max(0,Math.min(200,parseInt(t)||100));case"shadowOffsetX":case"shadowOffsetY":return Math.max(-50,Math.min(50,parseInt(t)||0));default:return t}};return(0,i.useEffect)(function(){return function(){l.current&&clearTimeout(l.current)}},[]),(0,i.useEffect)(function(){a&&n.current.size>0&&u()},[e,a,u]),{sync:c,syncImmediate:d,syncPending:u,forceSync:f,hasPendingChanges:p,getPendingChanges:m,cancelPendingChanges:h,validateAndSync:g,restoreLastSaved:b,pendingChangesCount:n.current.size}}(r,a,o,!0,3e3),C=E.syncImmediate,S=(E.syncBatch,(0,i.useMemo)(function(){return t.length>0?t[0]:null},[t]));(0,i.useEffect)(function(){if(S){c(S.backgroundColor||"#ffffff");var e=S.borderWidth&&S.borderWidth>0?S.borderWidth:1;f(e),m(S.borderColor||"#000000")}},[S]),(0,i.useEffect)(function(){b(!!y.border&&(y.borderWidth||0)>0)},[y.border,y.borderWidth]);var T=(0,i.useCallback)(function(e,t,r){"color"===t&&"transparent"===r&&(r="#333333");var a=r;if("boolean"!=typeof r&&!t.startsWith("columns."))try{if(null==(a=X.validateProperty(t,r)))return}catch(e){return}x(e,t,a),["x","y","width","height","color","fontSize","fontFamily","fontWeight","fontStyle","textAlign","lineHeight","letterSpacing","textDecoration","backgroundColor","backgroundOpacity","borderColor","borderWidth","borderStyle","borderRadius","boxShadowColor","boxShadowBlur","boxShadowSpread","opacity","textShadowBlur","tablePrimaryColor","tableSecondaryColor","template","customContent"].includes(t)&&C(e,t,a)},[x,C]),B=((0,i.useCallback)(function(e,t){S&&S.type&&!isPropertyAllowedForElement(S.type,v,"backgroundColor")||(t?(S&&S.backgroundColor&&"transparent"!==S.backgroundColor?c(S.backgroundColor):s||c("#ffffff"),T(e,"backgroundColor","transparent")):T(e,"backgroundColor",s||"#ffffff"))},[S&&S.backgroundColor,s,T,S&&S.type]),(0,i.useCallback)(function(e,t){if(t)S&&S.borderWidth&&S.borderWidth>0?f(S.borderWidth):f(2),T(e,"borderWidth",0);else{var r=Math.max(u||2,2);T(e,"borderWidth",r)}},[S&&S.borderWidth,u,T]),(0,i.useCallback)(function(){return React.createElement("div",{className:"properties-tabs"},React.createElement("button",{className:"tab-btn ".concat("appearance"===v?"active":""),onClick:function(){return w("appearance")}},"ðŸŽ¨ Apparence"),React.createElement("button",{className:"tab-btn ".concat("layout"===v?"active":""),onClick:function(){return w("layout")}},"ðŸ“ Mise en page"),React.createElement("button",{className:"tab-btn ".concat("content"===v?"active":""),onClick:function(){return w("content")}},"ðŸ“ Contenu"),React.createElement("button",{className:"tab-btn ".concat("effects"===v?"active":""),onClick:function(){return w("effects")}},"âœ¨ Effets"))},[v])),I=(0,i.useCallback)(function(){if(!S)return React.createElement("div",{className:"no-selection"},React.createElement("div",{className:"no-selection-icon"},"ðŸ‘†"),React.createElement("p",null,"SÃ©lectionnez un Ã©lÃ©ment pour modifier ses propriÃ©tÃ©s"),t.length>1&&React.createElement("p",{className:"selection-info"},t.length," Ã©lÃ©ments sÃ©lectionnÃ©s"));var e,r,a,o=(e=S.type,(a={appearance:{text:["colors","typography","borders","effects"],"dynamic-text":["colors","typography","borders","effects"],"layout-header":["colors","typography","borders","effects"],"layout-footer":["colors","typography","borders","effects"],"layout-section":["colors","typography","borders","effects"],logo:["colors","typography","borders","effects"],company_logo:["colors","typography","borders","effects"],product_table:["colors","typography","borders","effects"],default:["colors","typography","borders","effects"]},layout:{text:["position","dimensions","transform","layers"],"dynamic-text":["position","dimensions","transform","layers"],logo:["position","dimensions","transform","layers"],company_logo:["position","dimensions","transform","layers"],product_table:["position","dimensions","transform","layers"],default:["position","dimensions","transform","layers"]},content:{text:["text","variables"],"dynamic-text":["dynamic_text","variables"],logo:["image"],company_logo:["company_fields"],customer_info:["customer_fields"],company_info:["company_fields"],order_number:["order_number"],product_table:["table"],default:[]},effects:{text:["opacity","shadows","filters"],"dynamic-text":["opacity","shadows","filters"],logo:["opacity","shadows"],company_logo:["opacity","shadows"],product_table:["opacity","shadows","filters"],default:["opacity","shadows"]}})[r=v]&&a[r][e]||a[r]&&a[r].default||[]),n=((N[S.type]||N.default)[v]||{sections:[],properties:{}}).sections||[];switch(v){case"appearance":return React.createElement("div",{className:"tab-content"},"product_table"===S.type&&function(e,t,r){return l().createElement(O,{title:"ðŸŽ¨ Apparence du tableau",defaultExpanded:!0},l().createElement("div",{className:"section-content"},l().createElement(F,{selectedStyle:t.tableStyle||"default",onStyleSelect:function(t){return r(e.id,"tableStyle",t)}}),l().createElement(D,{label:"Fond lignes paires",value:t.evenRowBg||"#ffffff",onChange:function(t){return r(e.id,"evenRowBg",t)},presets:["#ffffff","#f8fafc","#f1f5f9","#e2e8f0"]}),l().createElement(D,{label:"Texte lignes paires",value:t.evenRowTextColor||"#000000",onChange:function(t){return r(e.id,"evenRowTextColor",t)},presets:["#000000","#1e293b","#334155","#475569"]}),l().createElement(D,{label:"Fond lignes impaires",value:t.oddRowBg||"#f8fafc",onChange:function(t){return r(e.id,"oddRowBg",t)},presets:["#f8fafc","#f1f5f9","#e2e8f0","#ffffff"]}),l().createElement(D,{label:"Texte lignes impaires",value:t.oddRowTextColor||"#000000",onChange:function(t){return r(e.id,"oddRowTextColor",t)},presets:["#000000","#1e293b","#334155","#475569"]})))}(S,y,T),o.map(function(e){switch(e){case"colors":return function(e,t,r){var a,o;if(!P("colors",e.type))return null;var n="transparent"!==t.backgroundColor;return l().createElement(O,{key:"colors",title:"Couleurs & Apparence",icon:"ðŸŽ¨",defaultOpen:!1,className:"properties-accordion"},"logo"!==e.type&&"company_logo"!==e.type&&l().createElement(D,{label:"Texte",value:t.color,onChange:function(t){r(e.id,"color",t)},presets:["#1e293b","#334155","#475569","#64748b","#94a3b8","#cbd5e1","#000000"],defaultColor:"#333333"}),l().createElement("div",{className:"property-row"},l().createElement("span",null,"Fond activÃ©:"),l().createElement("label",{className:"toggle"},l().createElement("input",{type:"checkbox",checked:n,disabled:!1,onChange:function(t){t.target.checked?r(e.id,"backgroundColor","#ffffff"):r(e.id,"backgroundColor","transparent")}}),l().createElement("span",{className:"toggle-slider"}))),l().createElement("div",{style:{display:n?"block":"none",transition:"opacity 0.3s ease"}},l().createElement(D,{label:"Fond",value:"transparent"===t.backgroundColor?"#ffffff":t.backgroundColor,onChange:function(t){r(e.id,"backgroundColor",t)},presets:["transparent","#ffffff","#f8fafc","#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8"]}),l().createElement("div",{className:"property-row"},l().createElement("label",null,"OpacitÃ© fond:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:null!==(a=t.backgroundOpacity)&&void 0!==a?a:1,onChange:function(t){return r(e.id,"backgroundOpacity",_(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},Math.round(100*(null!==(o=t.backgroundOpacity)&&void 0!==o?o:1)),"%")))))}(S,y,T);case"typography":return P("typography",S.type)?function(e,t,r){return P("typography",e.type)?l().createElement(O,{key:"typography",title:"Typographie",icon:"ðŸ“",defaultOpen:!1,className:"properties-accordion"},l().createElement("div",{className:"property-row"},l().createElement("label",null,"Police:"),l().createElement("select",{value:t.fontFamily||"Arial",onChange:function(t){return r(e.id,"fontFamily",t.target.value)},className:"property-select"},l().createElement("option",{value:"Arial"},"Arial"),l().createElement("option",{value:"Helvetica"},"Helvetica"),l().createElement("option",{value:"Times New Roman"},"Times New Roman"),l().createElement("option",{value:"Courier New"},"Courier New"),l().createElement("option",{value:"Georgia"},"Georgia"),l().createElement("option",{value:"Verdana"},"Verdana"),l().createElement("option",{value:"Trebuchet MS"},"Trebuchet MS"),l().createElement("option",{value:"Comic Sans MS"},"Comic Sans MS"),l().createElement("option",{value:"Impact"},"Impact"),l().createElement("option",{value:"Lucida Console"},"Lucida Console"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Taille:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"8",max:"72",step:"1",value:t.fontSize||12,onChange:function(t){return r(e.id,"fontSize",k(t.target.value,12))},className:"slider"}),l().createElement("span",{className:"slider-value"},t.fontSize||12,"px"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ã‰paisseur:"),l().createElement("select",{value:t.fontWeight||"normal",onChange:function(t){return r(e.id,"fontWeight",t.target.value)},className:"property-select"},l().createElement("option",{value:"normal"},"Normal"),l().createElement("option",{value:"bold"},"Gras"),l().createElement("option",{value:"lighter"},"Fin"),l().createElement("option",{value:"100"},"100"),l().createElement("option",{value:"200"},"200"),l().createElement("option",{value:"300"},"300"),l().createElement("option",{value:"400"},"400"),l().createElement("option",{value:"500"},"500"),l().createElement("option",{value:"600"},"600"),l().createElement("option",{value:"700"},"700"),l().createElement("option",{value:"800"},"800"),l().createElement("option",{value:"900"},"900"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Style:"),l().createElement("select",{value:t.fontStyle||"normal",onChange:function(t){return r(e.id,"fontStyle",t.target.value)},className:"property-select"},l().createElement("option",{value:"normal"},"Normal"),l().createElement("option",{value:"italic"},"Italique"),l().createElement("option",{value:"oblique"},"Oblique"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Alignement:"),l().createElement("div",{className:"alignment-buttons"},l().createElement("button",{className:"alignment-btn ".concat("left"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","left")},title:"Aligner Ã  gauche"},"â¬…ï¸"),l().createElement("button",{className:"alignment-btn ".concat("center"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","center")},title:"Centrer"},"â¬Œ"),l().createElement("button",{className:"alignment-btn ".concat("right"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","right")},title:"Aligner Ã  droite"},"âž¡ï¸"),l().createElement("button",{className:"alignment-btn ".concat("justify"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","justify")},title:"Justifier"},"â¬Œâ¬…ï¸"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Casse:"),l().createElement("select",{value:t.textTransform||"none",onChange:function(t){return r(e.id,"textTransform",t.target.value)},className:"property-select"},l().createElement("option",{value:"none"},"Aucune"),l().createElement("option",{value:"uppercase"},"Majuscules"),l().createElement("option",{value:"lowercase"},"Minuscules"),l().createElement("option",{value:"capitalize"},"PremiÃ¨re lettre"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"DÃ©coration:"),l().createElement("select",{value:t.textDecoration||"none",onChange:function(t){return r(e.id,"textDecoration",t.target.value)},className:"property-select"},l().createElement("option",{value:"none"},"Aucune"),l().createElement("option",{value:"underline"},"SoulignÃ©"),l().createElement("option",{value:"overline"},"SurlignÃ©"),l().createElement("option",{value:"line-through"},"BarrÃ©"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Interligne:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0.8",max:"3",step:"0.1",value:t.lineHeight||1.2,onChange:function(t){return r(e.id,"lineHeight",_(t.target.value,1.2))},className:"slider"}),l().createElement("span",{className:"slider-value"},t.lineHeight||1.2))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Espacement:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"-2",max:"10",step:"0.5",value:t.letterSpacing||0,onChange:function(t){return r(e.id,"letterSpacing",_(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},t.letterSpacing||0,"px")))):null}(S,y,T):null;case"borders":return n.includes("borders")?function(e,t,r){var a,o,n,i;return l().createElement(O,{key:"borders",title:"Bordures & Coins Arrondis",icon:"ðŸ”²",defaultOpen:!1,className:"properties-accordion"},l().createElement(D,{label:"Couleur bordure",value:t.borderColor||"#000000",onChange:function(t){return r(e.id,"borderColor",t)},presets:["#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#000000"]}),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ã‰paisseur bordure:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"10",value:null!==(a=t.borderWidth)&&void 0!==a?a:0,onChange:function(t){return r(e.id,"borderWidth",k(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(o=t.borderWidth)&&void 0!==o?o:0,"px"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Coins arrondis:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"50",value:null!==(n=t.borderRadius)&&void 0!==n?n:0,onChange:function(t){return r(e.id,"borderRadius",k(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(i=t.borderRadius)&&void 0!==i?i:0,"px"))))}(S,y,T):null;case"effects":return n.includes("effects")?R(S,y,T):null;default:return null}}));case"layout":return React.createElement("div",{className:"tab-content"},function(e,t,r){var a,o,n,i,s,c,d,u,f,p,m,h,b,g,y,v;return l().createElement("div",{className:"layout-sections"},l().createElement(O,{key:"position",title:"Position",icon:"ðŸ“",defaultOpen:!0,className:"properties-accordion"},l().createElement(A,{label:"Position X:",minWidth:280,className:"adaptive-compact"},l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"800",value:null!==(a=t.x)&&void 0!==a?a:0,onChange:function(t){return r(e.id,"x",k(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(o=t.x)&&void 0!==o?o:0,"px"))),l().createElement(A,{label:"Position Y:",minWidth:280,className:"adaptive-compact"},l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"1000",value:null!==(n=t.y)&&void 0!==n?n:0,onChange:function(t){return r(e.id,"y",k(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(i=t.y)&&void 0!==i?i:0,"px")))),l().createElement(O,{key:"dimensions",title:"Dimensions",icon:"ðŸ“",defaultOpen:!1,className:"properties-accordion"},l().createElement(A,{label:"Largeur:",minWidth:280,className:"adaptive-compact"},l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"10",max:"800",value:null!==(s=t.width)&&void 0!==s?s:200,onChange:function(t){return r(e.id,"width",k(t.target.value,200))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(c=t.width)&&void 0!==c?c:200,"px"))),l().createElement(A,{label:"Hauteur:",minWidth:280,className:"adaptive-compact"},l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"10",max:"600",value:null!==(d=t.height)&&void 0!==d?d:100,onChange:function(t){return r(e.id,"height",k(t.target.value,100))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(u=t.height)&&void 0!==u?u:100,"px")))),l().createElement(O,{key:"transformations",title:"Transformations",icon:"ðŸ”„",defaultOpen:!1,className:"properties-accordion"},l().createElement("div",{className:"property-row"},l().createElement("label",null,"Rotation:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"-180",max:"180",value:null!==(f=t.rotation)&&void 0!==f?f:0,onChange:function(t){return r(e.id,"rotation",k(t.target.value,0))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(p=t.rotation)&&void 0!==p?p:0,"Â°"))),"PRODUCT_TABLE"===e.type&&l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ã‰chelle X:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:null!==(m=t.scaleX)&&void 0!==m?m:1,onChange:function(t){return r(e.id,"scaleX",_(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(h=t.scaleX)&&void 0!==h?h:1))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ã‰chelle Y:"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:null!==(b=t.scaleY)&&void 0!==b?b:1,onChange:function(t){return r(e.id,"scaleY",_(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(g=t.scaleY)&&void 0!==g?g:1))))),l().createElement(O,{key:"layers",title:"Calques",icon:"ðŸ“š",defaultOpen:!1,className:"properties-accordion"},l().createElement("div",{className:"property-row"},l().createElement("label",null,"Calque (Z-Index):"),l().createElement("div",{className:"slider-container"},l().createElement("input",{type:"range",min:"0",max:"100",value:null!==(y=t.zIndex)&&void 0!==y?y:1,onChange:function(t){return r(e.id,"zIndex",k(t.target.value,1))},className:"slider"}),l().createElement("span",{className:"slider-value"},null!==(v=t.zIndex)&&void 0!==v?v:1)))))}(S,y,T));case"content":return React.createElement("div",{className:"tab-content"},function(e,t,r){var a=function(){var a,o,n,i,s,c,d,u,f,p;switch(e.type){case"text":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Texte:"),l().createElement("textarea",{value:t.text||"",onChange:function(t){return r(e.id,"text",t.target.value)},rows:"3",placeholder:"Entrez votre texte ici...",className:"text-input"})));case"dynamic-text":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Texte dynamique:"),l().createElement("input",{type:"text",value:t.dynamicText||"",onChange:function(t){return r(e.id,"dynamicText",t.target.value)},placeholder:"Variable ou expression...",className:"text-input"})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Variables:"),l().createElement("textarea",{value:t.variables||"",onChange:function(t){return r(e.id,"variables",t.target.value)},rows:"2",placeholder:"Variables disponibles...",className:"text-input",readOnly:!0})));case"company_logo":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"URL Image:"),l().createElement("input",{type:"text",value:t.imageUrl||"",onChange:function(t){return r(e.id,"imageUrl",t.target.value)},placeholder:"https://...",className:"text-input"})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Texte alternatif:"),l().createElement("input",{type:"text",value:t.alt||"",onChange:function(t){return r(e.id,"alt",t.target.value)},placeholder:"Description de l'image...",className:"text-input"})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Ajustement:"),l().createElement("select",{value:t.objectFit||"contain",onChange:function(t){return r(e.id,"objectFit",t.target.value)},className:"styled-select"},l().createElement("option",{value:"contain"},"Contenir"),l().createElement("option",{value:"cover"},"Couvrir"),l().createElement("option",{value:"fill"},"Remplir"),l().createElement("option",{value:"none"},"Aucun"),l().createElement("option",{value:"scale-down"},"RÃ©duire"))));case"product_table":return l().createElement(l().Fragment,null,l().createElement(A,{label:"Configuration des colonnes:",minWidth:400,className:"adaptive-compact",demoMode:!0},l().createElement("input",{type:"text",value:t.columns||"name,price,quantity",onChange:function(t){return r(e.id,"columns",t.target.value)},placeholder:"name,price,quantity...",className:"text-input"})),l().createElement(A,{label:"Options d'affichage:",minWidth:350,forceVertical:!0,className:"adaptive-spacious"},l().createElement("div",{className:"checkbox-group"},l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher en-tÃªtes:"),l().createElement("input",{type:"checkbox",checked:null===(a=t.showHeaders)||void 0===a||a,onChange:function(t){return r(e.id,"showHeaders",t.target.checked)}})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher bordures:"),l().createElement("input",{type:"checkbox",checked:null===(o=t.showBorders)||void 0===o||o,onChange:function(t){return r(e.id,"showBorders",t.target.checked)}})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher sous-total:"),l().createElement("input",{type:"checkbox",checked:null===(n=t.showSubtotal)||void 0===n||n,onChange:function(t){return r(e.id,"showSubtotal",t.target.checked)}})))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher frais de port:"),l().createElement("input",{type:"checkbox",checked:null===(i=t.showShipping)||void 0===i||i,onChange:function(t){return r(e.id,"showShipping",t.target.checked)}})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher taxes:"),l().createElement("input",{type:"checkbox",checked:null===(s=t.showTaxes)||void 0===s||s,onChange:function(t){return r(e.id,"showTaxes",t.target.checked)}})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher remise:"),l().createElement("input",{type:"checkbox",checked:null!==(c=t.showDiscount)&&void 0!==c&&c,onChange:function(t){return r(e.id,"showDiscount",t.target.checked)}})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher total:"),l().createElement("input",{type:"checkbox",checked:null===(d=t.showTotal)||void 0===d||d,onChange:function(t){return r(e.id,"showTotal",t.target.checked)}})));case"order_number":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Format:"),l().createElement("select",{value:t.format||"#0001",onChange:function(t){return r(e.id,"format",t.target.value)},className:"styled-select"},l().createElement("option",{value:"#0001"},"#0001"),l().createElement("option",{value:"CMD-0001"},"CMD-0001"),l().createElement("option",{value:"ORDER-0001"},"ORDER-0001"),l().createElement("option",{value:"NÂ°0001"},"NÂ°0001"))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Afficher Ã©tiquette:"),l().createElement("input",{type:"checkbox",checked:null===(u=t.showLabel)||void 0===u||u,onChange:function(t){return r(e.id,"showLabel",t.target.checked)}})),t.showLabel&&l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Texte Ã©tiquette:"),l().createElement("input",{type:"text",value:t.labelText||"NÂ° Commande",onChange:function(t){return r(e.id,"labelText",t.target.value)},className:"text-input"})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Alignement Ã©tiquette:"),l().createElement("select",{value:t.labelAlign||"left",onChange:function(t){return r(e.id,"labelAlign",t.target.value)},className:"styled-select"},l().createElement("option",{value:"left"},"Gauche"),l().createElement("option",{value:"center"},"Centre"),l().createElement("option",{value:"right"},"Droite")))),l().createElement("div",{className:"property-row"},l().createElement("label",null,"NÂ° commande aperÃ§u:"),l().createElement("input",{type:"number",min:"1",value:null!==(f=t.previewOrderNumber)&&void 0!==f?f:1,onChange:function(t){return r(e.id,"previewOrderNumber",k(t.target.value,1))},className:"number-input"})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Mettre en Ã©vidence:"),l().createElement("input",{type:"checkbox",checked:null!==(p=t.highlightNumber)&&void 0!==p&&p,onChange:function(t){return r(e.id,"highlightNumber",t.target.checked)}})),t.highlightNumber&&l().createElement(D,{label:"Fond numÃ©ro",value:t.numberBackground||"#f0f0f0",onChange:function(t){return r(e.id,"numberBackground",t)},presets:["#f0f0f0","#ffeaa7","#fdcb6e","#e17055","#fd79a8"]}));case"customer_info":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Nom client:"),l().createElement("input",{type:"text",value:t.customerName||"[Nom du client]",onChange:function(t){return r(e.id,"customerName",t.target.value)},className:"text-input",readOnly:!0})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Adresse client:"),l().createElement("textarea",{value:t.customerAddress||"[Adresse du client]",onChange:function(t){return r(e.id,"customerAddress",t.target.value)},rows:"2",className:"text-input",readOnly:!0})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"TÃ©lÃ©phone client:"),l().createElement("input",{type:"text",value:t.customerPhone||"[TÃ©lÃ©phone]",onChange:function(t){return r(e.id,"customerPhone",t.target.value)},className:"text-input",readOnly:!0})),l().createElement("div",{className:"property-row"},l().createElement("label",null,"Email client:"),l().createElement("input",{type:"text",value:t.customerEmail||"[Email]",onChange:function(t){return r(e.id,"customerEmail",t.target.value)},className:"text-input",readOnly:!0})));case"company_info":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Template:"),l().createElement("select",{value:t.template||"default",onChange:function(t){return r(e.id,"template",t.target.value)},className:"select-input"},l().createElement("option",{value:"default"},"Par dÃ©faut"),l().createElement("option",{value:"commercial"},"Commercial"))));case"mentions":return l().createElement(l().Fragment,null,l().createElement("div",{className:"property-row"},l().createElement("label",null,"Type de mentions:"),l().createElement("select",{value:t.type||"legal",onChange:function(t){return r(e.id,"type",t.target.value)},className:"select-input"},l().createElement("option",{value:"legal"},"Mentions lÃ©gales"),l().createElement("option",{value:"warranty"},"Garantie"),l().createElement("option",{value:"custom"},"PersonnalisÃ©"))));case"rectangle":case"circle":case"line":case"arrow":return l().createElement("div",{className:"property-row"},l().createElement("span",{className:"info-text"},"Cet Ã©lÃ©ment n'a pas de propriÃ©tÃ©s de contenu spÃ©cifiques."));default:return null}}();return a?l().createElement(O,{key:"content",title:"Contenu",icon:"ðŸ“",defaultOpen:!1,className:"properties-accordion"},a):null}(S,y,T));case"effects":return React.createElement("div",{className:"tab-content"},R&&P("effects",S.type)?R(S,y,T):React.createElement("div",{className:"no-effects"},React.createElement("p",null,"Aucun effet disponible pour cet Ã©lÃ©ment")));default:return null}},[v,S,y,T,t.length]);return React.createElement("div",{className:"properties-panel"},React.createElement("div",{className:"properties-header"},React.createElement("h3",null,"PropriÃ©tÃ©s"),S&&React.createElement("div",{className:"element-info"},React.createElement("span",{className:"element-type"},S.type),React.createElement("span",{className:"element-id"},"#",S.id))),B(),React.createElement("div",{className:"properties-content"},I()))});function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach(function(t){ne(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ne(e,t,r){return(t=function(e){var t=function(e){if("object"!=re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function n(r,a,o,n){var s=a&&a.prototype instanceof l?a:l,c=Object.create(s.prototype);return le(c,"_invoke",function(r,a,o){var n,l,s,c=0,d=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return n=t,l=0,s=e,f.n=r,i}};function p(r,a){for(l=r,s=a,t=0;!u&&c&&!o&&t<d.length;t++){var o,n=d[t],p=f.p,m=n[2];r>3?(o=m===a)&&(s=n[(l=n[4])?5:(l=3,3)],n[4]=n[5]=e):n[0]<=p&&((o=r<2&&p<n[1])?(l=0,f.v=a,f.n=n[1]):p<m&&(o=r<3||n[0]>a||a>m)&&(n[4]=r,n[5]=a,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,a}return function(o,d,m){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,m),l=d,s=m;(t=l<2?e:s)||!u;){n||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,n){if(l||(o="next"),t=n[o]){if(!(t=t.call(n,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=n.return)&&t.call(n),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);n=e}else if((t=(u=f.n<0)?s:r.call(a,f))!==i)break}catch(t){n=e,l=1,s=t}finally{c=1}}return{value:t,done:u}}}(r,o,n),!0),c}var i={};function l(){}function s(){}function c(){}t=Object.getPrototypeOf;var d=[][a]?t(t([][a]())):(le(t={},a,function(){return this}),t),u=c.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,le(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return s.prototype=c,le(u,"constructor",c),le(c,"constructor",s),s.displayName="GeneratorFunction",le(c,o,"GeneratorFunction"),le(u),le(u,o,"Generator"),le(u,a,function(){return this}),le(u,"toString",function(){return"[object Generator]"}),(ie=function(){return{w:n,m:f}})()}function le(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}le=function(e,t,r,a){function n(t,r){le(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(n("next",0),n("throw",1),n("return",2))},le(e,t,r,a)}function se(e,t,r,a,o,n,i){try{var l=e[n](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(a,o)}function ce(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var n=e.apply(t,r);function i(e){se(n,a,o,i,l,"next",e)}function l(e){se(n,a,o,i,l,"throw",e)}i(void 0)})}}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(a=n.call(r)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}const fe=function(e){var t=e.templateName,r=e.isNew,a=e.onSave,o=e.onCreateNew,n=e.onPreview,c=function(){var e=document.getElementById("pdf-builder-portals");return e||((e=document.createElement("div")).id="pdf-builder-portals",document.body.appendChild(e),console.warn("Portal container not found, created new one at body level")),e},d=de((0,i.useState)(!1),2),u=d[0],f=d[1],p=de((0,i.useState)(!1),2),m=p[0],h=p[1],b=de((0,i.useState)({name:"",width:595,height:842,orientation:"portrait"}),2),g=b[0],y=b[1],v=de((0,i.useState)({name:t||"",description:"",category:"autre"}),2),w=v[0],x=v[1],E=de((0,i.useState)(!1),2),C=E[0],S=E[1],N=de((0,i.useState)(""),2),_=N[0],k=N[1],P=function(){var e=ce(ie().m(function e(){return ie().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!a){e.n=5;break}return S(!0),k(""),e.p=1,e.n=2,a();case 2:k("Template sauvegardÃ© avec succÃ¨s !"),setTimeout(function(){return k("")},3e3),e.n=4;break;case 3:e.p=3,e.v,k("Erreur lors de la sauvegarde"),setTimeout(function(){return k("")},3e3);case 4:return e.p=4,S(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=ce(ie().m(function e(){var r,a,o,n,i,l,s,c;return ie().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n=null===(r=window.pdfBuilderData)||void 0===r?void 0:r.templateId){e.n=1;break}return console.error("ID du template non disponible"),x({name:t||"",description:"",category:"autre"}),h(!0),e.a(2);case 1:return(i=new FormData).append("action","pdf_builder_load_template_settings"),i.append("template_id",n),i.append("nonce",(null===(a=window.pdfBuilderData)||void 0===a?void 0:a.nonce)||""),console.log("Chargement des paramÃ¨tres du template:",n),e.n=2,fetch((null===(o=window.pdfBuilderData)||void 0===o?void 0:o.ajaxUrl)||window.ajaxurl,{method:"POST",body:i});case 2:return l=e.v,e.n=3,l.json();case 3:(s=e.v).success&&s.data?(console.log("ParamÃ¨tres chargÃ©s:",s.data),x({name:s.data.name||t||"",description:s.data.description||"",category:s.data.category||"autre"})):(console.log("Aucun paramÃ¨tre trouvÃ©, utilisation des valeurs par dÃ©faut"),x({name:t||"",description:"",category:"autre"})),e.n=5;break;case 4:e.p=4,c=e.v,console.error("Erreur lors du chargement des paramÃ¨tres:",c),x({name:t||"",description:"",category:"autre"});case 5:h(!0);case 6:return e.a(2)}},e,null,[[0,4]])}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=ce(ie().m(function e(){var t,r,a,o,n,i,l,s;return ie().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,o=null===(t=window.pdfBuilderData)||void 0===t?void 0:t.templateId){e.n=1;break}return console.error("ID du template non disponible"),alert("Erreur: ID du template non trouvÃ©"),e.a(2);case 1:return(n=new FormData).append("action","pdf_builder_save_template_settings"),n.append("template_id",o),n.append("name",w.name),n.append("description",w.description),n.append("category",w.category),n.append("nonce",(null===(r=window.pdfBuilderData)||void 0===r?void 0:r.nonce)||""),console.log("Sauvegarde des paramÃ¨tres du template:",{templateId:o,name:w.name,description:w.description,category:w.category}),e.n=2,fetch((null===(a=window.pdfBuilderData)||void 0===a?void 0:a.ajaxUrl)||window.ajaxurl,{method:"POST",body:n});case 2:return i=e.v,e.n=3,i.json();case 3:(l=e.v).success?(console.log("ParamÃ¨tres du template sauvegardÃ©s avec succÃ¨s"),alert("ParamÃ¨tres du template sauvegardÃ©s avec succÃ¨s !"),h(!1)):(console.error("Erreur lors de la sauvegarde:",l.data),alert("Erreur lors de la sauvegarde: "+(l.data||"Erreur inconnue"))),e.n=5;break;case 4:e.p=4,s=e.v,console.error("Erreur AJAX:",s),alert("Erreur lors de la sauvegarde des paramÃ¨tres");case 5:return e.a(2)}},e,null,[[0,4]])}));return function(){return e.apply(this,arguments)}}();return l().createElement(l().Fragment,null,l().createElement("div",{className:"template-header",style:{display:"none"}},l().createElement("div",{className:"header-left"},l().createElement("button",{className:"header-btn new-template-btn",onClick:function(){return f(!0)},title:"CrÃ©er un nouveau template"},l().createElement("span",{className:"btn-icon"},"ðŸ“„"),l().createElement("span",{className:"btn-text"},"Nouveau template"))),l().createElement("div",{className:"header-center"},l().createElement("h2",{className:"template-title"},r?"Nouveau template":"Modifier: ".concat(t||"Template sans nom")),_&&l().createElement("div",{className:"save-message ".concat(_.includes("succÃ¨s")?"success":"error")},_)),l().createElement("div",{className:"header-right"},l().createElement("button",{className:"header-btn settings-btn",onClick:T,title:"ParamÃ¨tres du template"},l().createElement("span",{className:"btn-icon"},"âš™ï¸"),l().createElement("span",{className:"btn-text"},"ParamÃ¨tres")),l().createElement("button",{className:"header-btn save-btn ".concat(C?"saving":""),onClick:P,disabled:C,title:r?"Sauvegarder le template":"Modifier le template"},l().createElement("span",{className:"btn-icon"},C?"â³":r?"ðŸ’¾":"âœï¸"),l().createElement("span",{className:"btn-text"},C?"Sauvegarde...":r?"Sauvegarder":"Modifier")),l().createElement("button",{className:"header-btn preview-btn",onClick:n,title:"AperÃ§u du PDF"},l().createElement("span",{className:"btn-icon"},"ðŸ‘ï¸"),l().createElement("span",{className:"btn-text"},"AperÃ§u")))),u&&(0,s.createPortal)(l().createElement("div",{className:"modal-overlay",onClick:function(){return f(!1)}},l().createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}},l().createElement("div",{className:"modal-header"},l().createElement("h3",null,"CrÃ©er un nouveau template"),l().createElement("button",{className:"modal-close",onClick:function(){return f(!1)}},"Ã—")),l().createElement("div",{className:"modal-body"},l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"template-name"},"Nom du template"),l().createElement("input",{id:"template-name",type:"text",value:g.name,onChange:function(e){return y(oe(oe({},g),{},{name:e.target.value}))},placeholder:"Entrez le nom du template"})),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"template-width"},"Largeur (px)"),l().createElement("input",{id:"template-width",type:"number",value:g.width,onChange:function(e){return y(oe(oe({},g),{},{width:parseInt(e.target.value)}))},min:"100",max:"2000"})),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"template-height"},"Hauteur (px)"),l().createElement("input",{id:"template-height",type:"number",value:g.height,onChange:function(e){return y(oe(oe({},g),{},{height:parseInt(e.target.value)}))},min:"100",max:"3000"})),l().createElement("div",{className:"form-group"},l().createElement("label",{htmlFor:"template-orientation"},"Orientation"),l().createElement("select",{id:"template-orientation",value:g.orientation,onChange:function(e){return y(oe(oe({},g),{},{orientation:e.target.value}))}},l().createElement("option",{value:"portrait"},"Portrait"),l().createElement("option",{value:"landscape"},"Paysage")))),l().createElement("div",{className:"modal-footer"},l().createElement("button",{className:"btn-secondary",onClick:function(){return f(!1)}},"Annuler"),l().createElement("button",{className:"btn-primary",onClick:function(){o&&o(g),f(!1),y({name:"",width:595,height:842,orientation:"portrait"})},disabled:!g.name.trim()},"CrÃ©er le template")))),c()),m&&(0,s.createPortal)(l().createElement("div",{className:"modal-overlay",onClick:function(){return h(!1)}},l().createElement("div",{className:"modal-content template-settings-modal",onClick:function(e){return e.stopPropagation()}},l().createElement("div",{className:"modal-header"},l().createElement("div",{className:"modal-header-content"},l().createElement("div",{className:"modal-header-icon"},l().createElement("div",{className:"settings-icon"},"âš™ï¸")),l().createElement("div",{className:"modal-header-text"},l().createElement("h3",null,"ParamÃ¨tres du template"),l().createElement("p",null,"Personnalisez votre template"))),l().createElement("button",{className:"modal-close",onClick:function(){return h(!1)}},"Ã—")),l().createElement("div",{className:"modal-body"},l().createElement("div",{className:"form-group"},l().createElement("div",{className:"form-group-accent"}),l().createElement("div",{className:"form-group-content"},l().createElement("label",{htmlFor:"settings-template-name"},l().createElement("span",{className:"label-icon"},"ðŸ“"),"Nom du template"),l().createElement("input",{id:"settings-template-name",type:"text",value:w.name,onChange:function(e){return x(oe(oe({},w),{},{name:e.target.value}))},placeholder:"Entrez le nom du template"}))),l().createElement("div",{className:"form-group"},l().createElement("div",{className:"form-group-accent"}),l().createElement("div",{className:"form-group-content"},l().createElement("label",{htmlFor:"settings-template-description"},l().createElement("span",{className:"label-icon"},"ðŸ“„"),"Description"),l().createElement("textarea",{id:"settings-template-description",value:w.description,onChange:function(e){return x(oe(oe({},w),{},{description:e.target.value}))},placeholder:"DÃ©crivez votre template (optionnel)",rows:"3"}))),l().createElement("div",{className:"form-group"},l().createElement("div",{className:"form-group-accent"}),l().createElement("div",{className:"form-group-content"},l().createElement("label",{htmlFor:"settings-template-category"},l().createElement("span",{className:"label-icon"},"ðŸ·ï¸"),"CatÃ©gorie"),l().createElement("select",{id:"settings-template-category",value:w.category,onChange:function(e){return x(oe(oe({},w),{},{category:e.target.value}))}},l().createElement("option",{value:"facture"},"Facture"),l().createElement("option",{value:"devis"},"Devis"),l().createElement("option",{value:"bon-commande"},"Bon de commande"),l().createElement("option",{value:"contrat"},"Contrat"),l().createElement("option",{value:"certificat"},"Certificat"),l().createElement("option",{value:"autre"},"Autre"))))),l().createElement("div",{className:"modal-footer"},l().createElement("button",{className:"btn-secondary",onClick:function(){return h(!1)}},"Annuler"),l().createElement("button",{className:"btn-primary",onClick:O},"Sauvegarder")))),c()))},pe=function(e){var t=e.canvasWidth,r=e.canvasHeight,a=e.dpi,o=e.zoom,n=e.showIndicator,s=void 0===n||n,c=((0,i.useMemo)(function(){return Math.round(t)},[t]),(0,i.useMemo)(function(){return Math.round(r)},[r]),(0,i.useMemo)(function(){return Math.round(t*o/100)},[t,o])),d=(0,i.useMemo)(function(){return Math.round(r*o/100)},[r,o]);return s?l().createElement("div",{className:"resolution-indicator"},l().createElement("div",{className:"resolution-info"},l().createElement("span",{className:"resolution-dimensions"},c," Ã— ",d,"px"),l().createElement("span",{className:"resolution-dpi"},a," DPI")),l().createElement("div",{className:"resolution-zoom"},Math.round(o),"%")):null};function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach(function(t){xe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ye(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function n(r,a,o,n){var s=a&&a.prototype instanceof l?a:l,c=Object.create(s.prototype);return ve(c,"_invoke",function(r,a,o){var n,l,s,c=0,d=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return n=t,l=0,s=e,f.n=r,i}};function p(r,a){for(l=r,s=a,t=0;!u&&c&&!o&&t<d.length;t++){var o,n=d[t],p=f.p,m=n[2];r>3?(o=m===a)&&(s=n[(l=n[4])?5:(l=3,3)],n[4]=n[5]=e):n[0]<=p&&((o=r<2&&p<n[1])?(l=0,f.v=a,f.n=n[1]):p<m&&(o=r<3||n[0]>a||a>m)&&(n[4]=r,n[5]=a,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,a}return function(o,d,m){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,m),l=d,s=m;(t=l<2?e:s)||!u;){n||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,n){if(l||(o="next"),t=n[o]){if(!(t=t.call(n,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=n.return)&&t.call(n),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);n=e}else if((t=(u=f.n<0)?s:r.call(a,f))!==i)break}catch(t){n=e,l=1,s=t}finally{c=1}}return{value:t,done:u}}}(r,o,n),!0),c}var i={};function l(){}function s(){}function c(){}t=Object.getPrototypeOf;var d=[][a]?t(t([][a]())):(ve(t={},a,function(){return this}),t),u=c.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,ve(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return s.prototype=c,ve(u,"constructor",c),ve(c,"constructor",s),s.displayName="GeneratorFunction",ve(c,o,"GeneratorFunction"),ve(u),ve(u,o,"Generator"),ve(u,a,function(){return this}),ve(u,"toString",function(){return"[object Generator]"}),(ye=function(){return{w:n,m:f}})()}function ve(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ve=function(e,t,r,a){function n(t,r){ve(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(n("next",0),n("throw",1),n("return",2))},ve(e,t,r,a)}function we(e,t,r,a,o,n,i){try{var l=e[n](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(a,o)}function xe(e,t,r){return(t=Ee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e){var t=function(e){if("object"!=me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==me(t)?t:t+""}var Ce=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sampleData={products:[{name:'Ordinateur Portable Pro 15"',sku:"LAPTOP-PRO-15",quantity:1,price:"999,99 â‚¬",regular_price:"1 199,99 â‚¬",sale_price:"999,99 â‚¬",total:"999,99 â‚¬",subtotal:"999,99 â‚¬",tax:"199,99 â‚¬",discount:"200,00 â‚¬",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNGY0NmU1Ii8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxBUFQ8L3RleHQ+Cjwvc3ZnPg==",description:'Ordinateur portable professionnel avec Ã©cran 15" 4K, processeur Intel i7, 16GB RAM, SSD 512GB.',short_description:'Ordinateur portable professionnel 15" 4K',categories:["Informatique","Ordinateurs Portables"],weight:"2.1 kg",dimensions:"35.5 x 24.5 x 1.8 cm",attributes:{Processeur:"Intel Core i7-11800H",RAM:"16GB DDR4",Stockage:"SSD 512GB NVMe",Ã‰cran:'15.6" 4K UHD'},stock_quantity:15,stock_status:"en_stock",product_type:"simple",is_on_sale:!0,is_virtual:!1,is_downloadable:!1,meta_data:{_custom_field:"Valeur personnalisÃ©e"}},{name:"Souris Gaming RGB Optique",sku:"MOUSE-RGB-001",quantity:2,price:"49,99 â‚¬",regular_price:"59,99 â‚¬",sale_price:"49,99 â‚¬",total:"99,98 â‚¬",subtotal:"99,98 â‚¬",tax:"19,99 â‚¬",discount:"20,00 â‚¬",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjMDU5NjY5Ii8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk1PVVNFPPC90ZXh0Pgo8L3N2Zz4=",description:"Souris gaming optique RGB avec capteur PixArt 3335, 16 000 DPI, switches Omron et Ã©clairage RGB personnalisable.",short_description:"Souris gaming RGB 16K DPI",categories:["Informatique","PÃ©riphÃ©riques","Gaming"],weight:"0.085 kg",dimensions:"12.5 x 6.8 x 3.8 cm",attributes:{DPI:"16 000",Switches:"Omron",Ã‰clairage:"RGB",Capteur:"PixArt 3335"},stock_quantity:45,stock_status:"en_stock",product_type:"simple",is_on_sale:!0,is_virtual:!1,is_downloadable:!1,meta_data:{}},{name:"Clavier MÃ©canique Gaming",sku:"KEYBOARD-MECH-001",quantity:1,price:"129,99 â‚¬",regular_price:"149,99 â‚¬",sale_price:"129,99 â‚¬",total:"129,99 â‚¬",subtotal:"129,99 â‚¬",tax:"25,99 â‚¬",discount:"20,00 â‚¬",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZGMyNjI2Ii8+Cjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPktFWUI8L3RleHQ+Cjwvc3ZnPg==",description:"Clavier mÃ©canique gaming avec switches Cherry MX Red, Ã©clairage RGB par touche, repose-poignets ergonomique.",short_description:"Clavier mÃ©canique RGB Cherry MX",categories:["Informatique","PÃ©riphÃ©riques","Gaming"],weight:"0.95 kg",dimensions:"43.5 x 13.5 x 3.8 cm",attributes:{Switches:"Cherry MX Red",Ã‰clairage:"RGB par touche",Disposition:"AZERTY",Connexion:"USB-C"},stock_quantity:8,stock_status:"en_stock",product_type:"simple",is_on_sale:!0,is_virtual:!1,is_downloadable:!1,meta_data:{_warranty:"2 ans"}}],customer:{name:"Marie Dubois",email:"marie.dubois@email.com",phone:"+33 6 12 34 56 78",address:"15 Avenue des Champs-Ã‰lysÃ©es\nBP 12345\n75008 Paris\nFrance",billing_address:"15 Avenue des Champs-Ã‰lysÃ©es\nBP 12345\n75008 Paris\nFrance",shipping_address:"456 Avenue des Roses\nBP 67890\n75016 Paris\nFrance",company:"TechCorp SARL",vat:"FR12345678901",siret:"12345678901234"},company:{name:"Ma SociÃ©tÃ© SARL",address:"123 Rue de la Paix\nBoÃ®te Postale 987\n75001 Paris\nFrance",phone:"+33 1 42 86 75 30",email:"contact@masociete.com",website:"www.masociete.com",vat:"FR98765432109",rcs:"Paris B 123 456 789",siret:"98765432109876"},order:{number:"CMD-2025-001",date:"19/10/2025",due_date:"19/11/2025",total:"1 229,96 â‚¬",subtotal:"1 129,97 â‚¬",tax:"99,99 â‚¬",shipping:"15,00 â‚¬",discount:"15,00 â‚¬",status:"Traitement en cours",paymentMethod:"Carte bancaire",shippingMethod:"Colissimo 48h",tableStyles:xe(xe(xe(xe(xe(xe(xe(xe(xe({default:{header_bg:[248,249,250],header_border:[226,232,240],row_border:[241,245,249],alt_row_bg:[250,251,252],headerTextColor:"#000000",rowTextColor:"#000000",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},classic:{header_bg:[30,41,59],header_border:[51,65,85],row_border:[51,65,85],alt_row_bg:[255,255,255],headerTextColor:"#ffffff",rowTextColor:"#1e293b",border_width:1.5,headerFontWeight:"700",headerFontSize:"11px",rowFontSize:"10px"},blue:{header_bg:[224,242,254],header_border:[14,165,233],row_border:[240,249,255],alt_row_bg:[248,249,252],headerTextColor:"#0c4a6e",rowTextColor:"#334155",border_width:1,headerFontWeight:"bold",headerFontSize:"11px",rowFontSize:"10px"},minimal:{header_bg:[255,255,255],header_border:[229,231,235],row_border:[229,231,235],alt_row_bg:[255,255,255],headerTextColor:"#374151",rowTextColor:"#374151",border_width:1,headerFontWeight:"600",headerFontSize:"12px",rowFontSize:"11px"},light:{header_bg:[249,250,251],header_border:[209,213,219],row_border:[229,231,235],alt_row_bg:[255,255,255],headerTextColor:"#111827",rowTextColor:"#374151",border_width:1,headerFontWeight:"500",headerFontSize:"12px",rowFontSize:"11px"},emerald_forest:{header_bg:[209,250,229],header_border:[16,185,129],row_border:[236,253,245],alt_row_bg:[236,253,245],headerTextColor:"#065f46",rowTextColor:"#065f46",border_width:1,headerFontWeight:"bold",headerFontSize:"11px",rowFontSize:"10px"},striped:{header_bg:[75,85,99],header_border:[107,114,128],row_border:[229,231,235],alt_row_bg:[249,250,251],headerTextColor:"#ffffff",rowTextColor:"#374151",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},bordered:{header_bg:[31,41,55],header_border:[55,65,81],row_border:[55,65,81],alt_row_bg:[255,255,255],headerTextColor:"#ffffff",rowTextColor:"#1f2937",border_width:2,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},modern:{header_bg:[17,24,39],header_border:[75,85,99],row_border:[209,213,219],alt_row_bg:[243,244,246],headerTextColor:"#ffffff",rowTextColor:"#374151",border_width:1,headerFontWeight:"600",headerFontSize:"13px",rowFontSize:"12px"},blue_ocean:{header_bg:[219,234,254],header_border:[59,130,246],row_border:[239,246,255],alt_row_bg:[239,246,255],headerTextColor:"#1e40af",rowTextColor:"#0c4a6e",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},sunset_orange:{header_bg:[253,215,170],header_border:[245,101,101],row_border:[255,247,237],alt_row_bg:[255,247,237],headerTextColor:"#c2410c",rowTextColor:"#9a3412",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},royal_purple:{header_bg:[233,213,255],header_border:[168,85,247],row_border:[250,245,255],alt_row_bg:[250,245,255],headerTextColor:"#7c3aed",rowTextColor:"#581c87",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},rose_pink:{header_bg:[254,226,243],header_border:[244,114,182],row_border:[253,242,248],alt_row_bg:[253,242,248],headerTextColor:"#db2777",rowTextColor:"#be123c",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},teal_aqua:{header_bg:[204,251,241],header_border:[20,184,166],row_border:[240,253,250],alt_row_bg:[236,253,245],headerTextColor:"#0d9488",rowTextColor:"#065f46",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},crimson_red:{header_bg:[254,202,202],header_border:[239,68,68],row_border:[254,242,242],alt_row_bg:[254,242,242],headerTextColor:"#dc2626",rowTextColor:"#991b1b",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},amber_gold:{header_bg:[254,243,199],header_border:[245,158,11],row_border:[254,252,232],alt_row_bg:[254,252,232],headerTextColor:"#d97706",rowTextColor:"#92400e",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},indigo_night:{header_bg:[238,242,255],header_border:[99,102,241],row_border:[238,242,255],alt_row_bg:[245,243,255],headerTextColor:"#4338ca",rowTextColor:"#312e81",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},slate_gray:{header_bg:[51,65,85],header_border:[100,116,139],row_border:[203,213,225],alt_row_bg:[248,250,252],headerTextColor:"#ffffff",rowTextColor:"#334155",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},coral_sunset:{header_bg:[194,65,12],header_border:[251,146,60],row_border:[253,186,116],alt_row_bg:[255,247,237],headerTextColor:"#ffffff",rowTextColor:"#9a3412",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},mint_green:{header_bg:[34,197,94],header_border:[74,222,128],row_border:[187,247,208],alt_row_bg:[240,253,244],headerTextColor:"#ffffff",rowTextColor:"#166534",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},violet_dream:{header_bg:[109,40,217],header_border:[168,85,247],row_border:[233,213,255],alt_row_bg:[251,245,255],headerTextColor:"#ffffff",rowTextColor:"#6b21a8",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},sky_blue:{header_bg:[3,105,161],header_border:[14,165,233],row_border:[125,211,252],alt_row_bg:[240,249,255],headerTextColor:"#ffffff",rowTextColor:"#0c4a6e",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},forest_green:{header_bg:[21,128,61],header_border:[34,197,94],row_border:[134,239,172],alt_row_bg:[236,253,245],headerTextColor:"#ffffff",rowTextColor:"#14532d",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},ruby_red:{header_bg:[185,28,28],header_border:[239,68,68],row_border:[252,165,165],alt_row_bg:[254,226,226],headerTextColor:"#ffffff",rowTextColor:"#991b1b",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}},"striped",{header_bg:[224,242,254],header_border:[14,165,233],row_border:[240,249,255],alt_row_bg:[248,249,252],headerTextColor:"#0c4a6e",rowTextColor:"#334155",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"bordered",{header_bg:[248,250,252],header_border:[148,163,184],row_border:[226,232,240],alt_row_bg:[255,255,255],headerTextColor:"#475569",rowTextColor:"#475569",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"minimal",{header_bg:[255,255,255],header_border:[243,244,246],row_border:[249,250,251],alt_row_bg:[255,255,255],headerTextColor:"#6b7280",rowTextColor:"#6b7280",border_width:.5,headerFontWeight:"normal",headerFontSize:"12px",rowFontSize:"11px"}),"modern",{header_bg:[233,213,255],header_border:[168,85,247],row_border:[243,232,255],alt_row_bg:[250,245,255],headerTextColor:"#6b21a8",rowTextColor:"#6b21a8",border_width:1,headerFontWeight:"600",headerFontSize:"13px",rowFontSize:"12px"}),"blue_ocean",{header_bg:[219,234,254],header_border:[59,130,246],row_border:[239,246,255],alt_row_bg:[239,246,255],headerTextColor:"#1e40af",rowTextColor:"#1e40af",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"coral",{header_bg:[254,242,242],header_border:[248,113,113],row_border:[254,242,242],alt_row_bg:[254,242,242],headerTextColor:"#dc2626",rowTextColor:"#dc2626",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"teal",{header_bg:[204,251,241],header_border:[13,148,136],row_border:[240,253,250],alt_row_bg:[240,253,250],headerTextColor:"#0f766e",rowTextColor:"#0f766e",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"indigo",{header_bg:[238,242,255],header_border:[99,102,241],row_border:[238,242,255],alt_row_bg:[238,242,255],headerTextColor:"#3730a3",rowTextColor:"#3730a3",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"}),"amber",{header_bg:[254,243,199],header_border:[245,158,11],row_border:[254,243,199],alt_row_bg:[254,243,199],headerTextColor:"#92400e",rowTextColor:"#92400e",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"})}}},t=[{key:"getElementData",value:(r=ye().m(function e(t,r){var a;return ye().w(function(e){for(;;)switch(e.n){case 0:a=t,e.n="product_table"===a?1:"customer_info"===a?2:"company_logo"===a?3:"company_info"===a?4:"order_number"===a?5:"dynamic-text"===a||"conditional-text"===a?6:"mentions"===a?7:"rectangle"===a||"line"===a||"shape-rectangle"===a||"shape-circle"===a||"shape-line"===a||"shape-arrow"===a||"shape-triangle"===a||"shape-star"===a||"divider"===a?8:"barcode"===a||"qrcode"===a?9:"progress-bar"===a?10:"watermark"===a?11:12;break;case 1:return e.a(2,this.generateProductTableData(r));case 2:return e.a(2,this.generateCustomerInfoData(r));case 3:return e.a(2,this.generateCompanyLogoData(r));case 4:return e.a(2,this.generateCompanyInfoData(r));case 5:return e.a(2,this.generateOrderNumberData(r));case 6:return e.a(2,this.generateDynamicTextData(r));case 7:return e.a(2,this.generateMentionsData(r));case 8:return e.a(2,this.generateRectangleData(r));case 9:return e.a(2,this.generateBarcodeData(r));case 10:return e.a(2,this.generateProgressBarData(r));case 11:return e.a(2,this.generateWatermarkData(r));case 12:return e.a(2,this.generateDefaultData(t,r));case 13:return e.a(2)}},e,this)}),a=function(){var e=this,t=arguments;return new Promise(function(a,o){var n=r.apply(e,t);function i(e){we(n,a,o,i,l,"next",e)}function l(e){we(n,a,o,i,l,"throw",e)}i(void 0)})},function(e,t){return a.apply(this,arguments)})},{key:"generateProductTableData",value:function(e){var t=e.columns,r=void 0===t?{}:t,a=e.showSubtotal,o=void 0!==a&&a,n=e.showShipping,i=void 0===n||n,l=e.showTaxes,s=void 0===l||l,c=e.showDiscount,d=void 0===c||c,u=e.showTotal,f=void 0===u||u,p=e.tableStyle,m=void 0===p?"default":p,h={headers:[],rows:[],totals:{},style:m},b=ge(ge({},{image:!1,name:!0,sku:!1,description:!1,short_description:!1,categories:!1,quantity:!0,price:!0,regular_price:!1,sale_price:!1,discount:!1,tax:!1,weight:!1,dimensions:!1,attributes:!1,stock_quantity:!1,stock_status:!1,total:!0}),r);return!1!==b.image&&h.headers.push("Image"),!1!==b.name&&h.headers.push("Produit"),!1!==b.sku&&h.headers.push("SKU"),!1!==b.description&&h.headers.push("Description"),!1!==b.short_description&&h.headers.push("Description courte"),!1!==b.categories&&h.headers.push("CatÃ©gories"),!1!==b.quantity&&h.headers.push("QtÃ©"),!1!==b.price&&h.headers.push("Prix"),!1!==b.regular_price&&h.headers.push("Prix rÃ©gulier"),!1!==b.sale_price&&h.headers.push("Prix soldÃ©"),!1!==b.discount&&h.headers.push("Remise"),!1!==b.tax&&h.headers.push("TVA"),!1!==b.weight&&h.headers.push("Poids"),!1!==b.dimensions&&h.headers.push("Dimensions"),!1!==b.attributes&&h.headers.push("Attributs"),!1!==b.stock_quantity&&h.headers.push("Stock"),!1!==b.stock_status&&h.headers.push("Statut stock"),!1!==b.total&&h.headers.push("Total"),h.rows=this.sampleData.products.map(function(e){var t=[];if(!1!==b.image&&t.push(e.image),!1!==b.name&&t.push(e.name),!1!==b.sku&&t.push(e.sku||"-"),!1!==b.description&&t.push(e.description||"-"),!1!==b.short_description&&t.push(e.short_description||"-"),!1!==b.categories&&t.push(e.categories?e.categories.join(", "):"-"),!1!==b.quantity&&t.push(e.quantity),!1!==b.price&&t.push(e.price),!1!==b.regular_price&&t.push(e.regular_price||"-"),!1!==b.sale_price&&t.push(e.sale_price||"-"),!1!==b.discount&&t.push(e.discount||"0,00 â‚¬"),!1!==b.tax&&t.push(e.tax||"0,00 â‚¬"),!1!==b.weight&&t.push(e.weight||"-"),!1!==b.dimensions&&t.push(e.dimensions||"-"),!1!==b.attributes){var r=e.attributes?Object.entries(e.attributes).map(function(e){var t=function(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,n,i=[],l=!0,s=!1;try{for(o=(t=t.call(e)).next;!(l=(r=o.call(t)).done)&&(i.push(r.value),2!==i.length);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=t.return&&(n=t.return(),Object(n)!==n))return}finally{if(s)throw a}}return i}}(e)||function(e){if(e){if("string"==typeof e)return he(e,2);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?he(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e),r=t[0],a=t[1];return"".concat(r,": ").concat(a)}).join("; "):"-";t.push(r)}return!1!==b.stock_quantity&&t.push(e.stock_quantity||"-"),!1!==b.stock_status&&t.push("en_stock"===e.stock_status?"En stock":"Rupture"),!1!==b.total&&t.push(e.total),t}),o&&(h.totals.subtotal=this.sampleData.order.subtotal),i&&(h.totals.shipping=this.sampleData.order.shipping),d&&(h.totals.discount=this.sampleData.order.discount),s&&(h.totals.tax=this.sampleData.order.tax),f&&(h.totals.total=this.sampleData.order.total),h.tableStyleData=this.sampleData.order.tableStyles[m]||this.sampleData.order.tableStyles.default,h}},{key:"generateCustomerInfoData",value:function(e){var t=this,r=e.fields,a={};return(void 0===r?[]:r).forEach(function(e){switch(e){case"name":a.name=t.sampleData.customer.name;break;case"email":a.email=t.sampleData.customer.email;break;case"phone":a.phone=t.sampleData.customer.phone;break;case"address":a.address=t.sampleData.customer.address;break;case"company":a.company=t.sampleData.customer.company;break;case"vat":a.vat=t.sampleData.customer.vat;break;case"siret":a.siret=t.sampleData.customer.siret}}),a}},{key:"generateCompanyLogoData",value:function(e){return{imageUrl:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjgwIiB2aWV3Qm94PSIwIDAgMjAwIDgwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjMjU2M2ViIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iNDAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5MT0dPPC90ZXh0Pgo8L3N2Zz4=",alt:"Logo de l'entreprise"}}},{key:"generateCompanyInfoData",value:function(e){var t=this,r=e.fields,a={};return(void 0===r?[]:r).forEach(function(e){switch(e){case"name":a.name=t.sampleData.company.name;break;case"address":a.address=t.sampleData.company.address;break;case"phone":a.phone=t.sampleData.company.phone;break;case"email":a.email=t.sampleData.company.email;break;case"website":a.website=t.sampleData.company.website;break;case"vat":a.vat=t.sampleData.company.vat;break;case"rcs":a.rcs=t.sampleData.company.rcs;break;case"siret":a.siret=t.sampleData.company.siret}}),a}},{key:"generateOrderNumberData",value:function(e){var t=e.format;return{formatted:(void 0===t?"Commande #{order_number} - {order_date}":t).replace("{order_number}",this.sampleData.order.number).replace("{order_date}",this.sampleData.order.date)}}},{key:"generateDynamicTextData",value:function(e){var t=e.template,r=void 0===t?"total_only":t,a=e.customContent,o=void 0===a?"":a,n=e.variables,i=void 0===n?{}:n,l=o,s={total_only:"{{order_total}} â‚¬",order_info:"Commande {{order_number}} - {{order_date}}",customer_info:"{{customer_name}} - {{customer_email}}",customer_address:"{{customer_name}}\n{{billing_address}}",full_header:"Facture NÂ° {{order_number}}\nClient: {{customer_name}}\nTotal: {{order_total}} â‚¬",invoice_header:"FACTURE NÂ° {{order_number}}\nDate: {{date}}\nClient: {{customer_name}}\n{{billing_address}}",order_summary:"Sous-total: {{order_subtotal}} â‚¬\nFrais de port: {{order_shipping}} â‚¬\nTVA: {{order_tax}} â‚¬\nTotal: {{order_total}} â‚¬",payment_info:"Ã‰chÃ©ance: {{due_date}}\nMontant: {{order_total}} â‚¬",payment_terms:"Conditions de paiement: 30 jours\nÃ‰chÃ©ance: {{due_date}}\nMontant dÃ»: {{order_total}} â‚¬",shipping_info:"Adresse de livraison:\n{{shipping_address}}",thank_you:"Merci pour votre commande !\nNous vous remercions de votre confiance.",legal_notice:"TVA non applicable - art. 293 B du CGI\nPaiement Ã  30 jours fin de mois",bank_details:"CoordonnÃ©es bancaires:\nIBAN: FR76 1234 5678 9012 3456 7890 123\nBIC: BNPAFRPP",contact_info:"Contact: contact@monentreprise.com\nTÃ©l: 01 23 45 67 89",order_confirmation:"CONFIRMATION DE COMMANDE\nCommande {{order_number}} du {{order_date}}\nStatut: ConfirmÃ©e",delivery_note:"BON DE LIVRAISON\nCommande {{order_number}}\nDestinataire: {{customer_name}}\n{{shipping_address}}",warranty_info:"Garantie: 2 ans piÃ¨ces et main d'Å“uvre\nService aprÃ¨s-vente: sav@monentreprise.com",return_policy:"Droit de rÃ©tractation: 14 jours\nRetour sous 30 jours pour dÃ©fauts",signature_line:"Signature du client:\n\n_______________________________\nDate: {{date}}",invoice_footer:"Facture gÃ©nÃ©rÃ©e automatiquement le {{date}}\nConservez cette facture pour vos archives",terms_conditions:"Conditions gÃ©nÃ©rales de vente disponibles sur notre site\nwww.monentreprise.com/conditions",quality_guarantee:"Tous nos produits sont garantis contre les dÃ©fauts\nService qualitÃ©: qualite@monentreprise.com",eco_friendly:"Entreprise engagÃ©e pour l'environnement\nEmballages recyclables et biodÃ©gradables",follow_up:"Suivi de commande: {{order_number}}\nContact: suivi@monentreprise.com",custom:o||"{{order_total}} â‚¬"};s[r]?l=s[r]:"custom"===r&&(l=o);var c=ge(ge(ge(ge({},this.sampleData.customer),this.sampleData.company),this.sampleData.order),i);if(Object.keys(c).forEach(function(e){var t=new RegExp("\\{\\{".concat(e,"\\}\\}"),"g");l=l.replace(t,c[e]||"")}),this.sampleData.products&&this.sampleData.products.length>0){var d=this.sampleData.products[0];Object.keys(d).forEach(function(e){var t=new RegExp("\\{\\{product_".concat(e,"\\}\\}"),"g");l=l.replace(t,d[e]||"")})}return{content:l}}},{key:"generateMentionsData",value:function(e){var t=e.showEmail,r=void 0===t||t,a=e.showPhone,o=void 0===a||a,n=e.showSiret,i=void 0===n||n,l=e.showVat,s=void 0!==l&&l,c=e.showAddress,d=void 0!==c&&c,u=e.showWebsite,f=void 0!==u&&u,p=e.showCustomText,m=void 0!==p&&p,h=e.customText,b=void 0===h?"":h,g=[];return r&&g.push(this.sampleData.company.email),o&&g.push(this.sampleData.company.phone),i&&g.push("SIRET: ".concat(this.sampleData.company.siret)),s&&g.push("TVA: ".concat(this.sampleData.company.vat)),d&&g.push(this.sampleData.company.address.replace("\n"," â€¢ ")),f&&g.push(this.sampleData.company.website),m&&b&&g.push(b),{mentions:g}}},{key:"generateRectangleData",value:function(e){return{rendered:!0}}},{key:"generateBarcodeData",value:function(e){var t=e.content;return{code:void 0===t?"123456789":t,format:"qrcode"===e.type?"QR_CODE":"CODE128"}}},{key:"generateProgressBarData",value:function(e){var t=e.progressValue,r=void 0===t?75:t;return{progress:Math.min(100,Math.max(0,r)),label:"".concat(r,"%")}}},{key:"generateWatermarkData",value:function(e){var t=e.content;return{text:void 0===t?"CONFIDENTIEL":t,angle:-45}}},{key:"generateDefaultData",value:function(e,t){return{type:e,placeholder:"DonnÃ©es d'exemple pour ".concat(e),properties:t}}}],t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ee(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,a}();function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _e(e,t,r){return(t=function(e){var t=function(e){if("object"!=Se(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Se(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ke=function(e){var t={tableStyle:"default",columns:"name,price,quantity",showHeaders:!0,showBorders:!0,showSubtotal:!0,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!0,evenRowBg:"#ffffff",evenRowTextColor:"#000000",oddRowBg:"#f8fafc",oddRowTextColor:"#000000"};return e.map(function(e){if("product_table"!==e.type)return e;var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach(function(t){_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return Object.keys(t).forEach(function(e){e in r||(r[e]=t[e])}),r.columns&&"string"!=typeof r.columns&&(r.columns=t.columns),r.tableStyle&&"string"!=typeof r.tableStyle&&(r.tableStyle=t.tableStyle),["evenRowBg","evenRowTextColor","oddRowBg","oddRowTextColor"].forEach(function(e){r[e]&&!/^#[0-9A-Fa-f]{6}$/.test(r[e])&&(r[e]=t[e])}),r})};function Pe(e){return function(e){if(Array.isArray(e))return Me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach(function(t){De(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function De(e,t,r){return(t=function(e){var t=function(e){if("object"!=je(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==je(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function n(r,a,o,n){var s=a&&a.prototype instanceof l?a:l,c=Object.create(s.prototype);return Ae(c,"_invoke",function(r,a,o){var n,l,s,c=0,d=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return n=t,l=0,s=e,f.n=r,i}};function p(r,a){for(l=r,s=a,t=0;!u&&c&&!o&&t<d.length;t++){var o,n=d[t],p=f.p,m=n[2];r>3?(o=m===a)&&(s=n[(l=n[4])?5:(l=3,3)],n[4]=n[5]=e):n[0]<=p&&((o=r<2&&p<n[1])?(l=0,f.v=a,f.n=n[1]):p<m&&(o=r<3||n[0]>a||a>m)&&(n[4]=r,n[5]=a,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,a}return function(o,d,m){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,m),l=d,s=m;(t=l<2?e:s)||!u;){n||(l?l<3?(l>1&&(f.n=-1),p(l,s)):f.n=s:f.v=s);try{if(c=2,n){if(l||(o="next"),t=n[o]){if(!(t=t.call(n,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=n.return)&&t.call(n),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);n=e}else if((t=(u=f.n<0)?s:r.call(a,f))!==i)break}catch(t){n=e,l=1,s=t}finally{c=1}}return{value:t,done:u}}}(r,o,n),!0),c}var i={};function l(){}function s(){}function c(){}t=Object.getPrototypeOf;var d=[][a]?t(t([][a]())):(Ae(t={},a,function(){return this}),t),u=c.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,Ae(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return s.prototype=c,Ae(u,"constructor",c),Ae(c,"constructor",s),s.displayName="GeneratorFunction",Ae(c,o,"GeneratorFunction"),Ae(u),Ae(u,o,"Generator"),Ae(u,a,function(){return this}),Ae(u,"toString",function(){return"[object Generator]"}),(Be=function(){return{w:n,m:f}})()}function Ae(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Ae=function(e,t,r,a){function n(t,r){Ae(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(n("next",0),n("throw",1),n("return",2))},Ae(e,t,r,a)}function Fe(e,t,r,a,o,n,i){try{var l=e[n](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(a,o)}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,o,n,i,l=[],s=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(a=n.call(r)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"==typeof e)return Me(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}var We=function(){var e={default:{headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#f1f5f9",rowBg:"#ffffff",altRowBg:"#fafbfc",borderWidth:1,headerTextColor:"#334155",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(0, 0, 0, 0.08)",shadowBlur:6,borderRadius:6},classic:{headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#e2e8f0",rowBg:"#ffffff",altRowBg:"#f8fafc",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e293b",headerFontWeight:"700",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(0, 0, 0, 0.15)",shadowBlur:8,borderRadius:0},striped:{headerBg:"#e0f2fe",headerBorder:"#0ea5e9",rowBorder:"#f0f9ff",rowBg:"#ffffff",altRowBg:"#f8fafc",borderWidth:1,headerTextColor:"#0c4a6e",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(59, 130, 246, 0.2)",shadowBlur:8,borderRadius:8},bordered:{headerBg:"#f8fafc",headerBorder:"#94a3b8",rowBorder:"#e2e8f0",rowBg:"#ffffff",altRowBg:"#ffffff",borderWidth:1,headerTextColor:"#475569",rowTextColor:"#111827",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:12,borderRadius:8},minimal:{headerBg:"#ffffff",headerBorder:"#d1d5db",rowBorder:"#f3f4f6",rowBg:"#ffffff",altRowBg:"#ffffff",borderWidth:.5,headerTextColor:"#6b7280",rowTextColor:"#6b7280",headerFontWeight:"500",headerFontSize:10,rowFontSize:9,shadowColor:"transparent",shadowBlur:0,borderRadius:0},modern:{headerBg:"#e9d5ff",headerBorder:"#a855f7",rowBorder:"#f3e8ff",rowBg:"#ffffff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#6b21a8",rowTextColor:"#6b21a8",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(102, 126, 234, 0.25)",shadowBlur:20,borderRadius:8},blue_ocean:{headerBg:"#dbeafe",headerBorder:"#3b82f6",rowBorder:"#eff6ff",rowBg:"#ffffff",altRowBg:"#eff6ff",borderWidth:1,headerTextColor:"#1e40af",rowTextColor:"#1e40af",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(59, 130, 246, 0.25)",shadowBlur:20,borderRadius:8},emerald_forest:{headerBg:"#d1fae5",headerBorder:"#10b981",rowBorder:"#ecfdf5",rowBg:"#ffffff",altRowBg:"#ecfdf5",borderWidth:1,headerTextColor:"#065f46",rowTextColor:"#065f46",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(16, 185, 129, 0.25)",shadowBlur:20,borderRadius:8},sunset_orange:{headerBg:"#fed7aa",headerBorder:"#f97316",rowBorder:"#fff7ed",rowBg:"#ffffff",altRowBg:"#fff7ed",borderWidth:1,headerTextColor:"#c2410c",rowTextColor:"#c2410c",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(249, 115, 22, 0.25)",shadowBlur:20,borderRadius:8},royal_purple:{headerBg:"#e9d5ff",headerBorder:"#a855f7",rowBorder:"#faf5ff",rowBg:"#ffffff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#7c3aed",rowTextColor:"#7c3aed",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(168, 85, 247, 0.25)",shadowBlur:20,borderRadius:8},rose_pink:{headerBg:"#fce7f3",headerBorder:"#f472b6",rowBorder:"#fdf2f8",rowBg:"#ffffff",altRowBg:"#fdf2f8",borderWidth:1,headerTextColor:"#db2777",rowTextColor:"#db2777",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(244, 114, 182, 0.25)",shadowBlur:20,borderRadius:8},teal_aqua:{headerBg:"#ccfbf1",headerBorder:"#14b8a6",rowBorder:"#f0fdfa",rowBg:"#ffffff",altRowBg:"#f0fdfa",borderWidth:1,headerTextColor:"#0d9488",rowTextColor:"#0d9488",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(20, 184, 166, 0.25)",shadowBlur:20,borderRadius:8}};return e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]||e.default},ze=function(e){var t=e.initialElements,r=void 0===t?[]:t,a=e.onSave,o=e.templateName,n=void 0===o?"":o,s=e.isNew,c=void 0===s||s,f=e.canvasSettings,p=void 0===f?{}:f,m=(0,u.$E)().actions.openPreview;console.log("[PDFEditor] PDFEditorContent called with:",{initialElements:r,templateName:n,isNew:c,canvasSettings:p}),console.log("[PDFEditor] initialElements type:",je(r),"length:",Array.isArray(r)?r.length:"not array");var h=p.width||794,g=p.height||1123,y=p.dpi||96;console.log("[PDFEditor] Canvas dimensions:",{width:h,height:g,dpi:y});var v=Re((0,i.useState)(function(){var e;e=Array.isArray(r)?r:r&&"object"===je(r)&&r.elements?r.elements:[],console.log("[PDFEditor] Processed initialData:",e);var t=ke(e);return console.log("[PDFEditor] Repaired elements:",t),t}),2),w=v[0],x=v[1],E=Re((0,i.useState)(null),2),C=E[0],N=E[1],_=C?w.find(function(e){return e.id===C}):null,k=Re((0,i.useState)([w]),2),P=k[0],T=k[1],O=Re((0,i.useState)(0),2),D=O[0],B=O[1];(0,i.useEffect)(function(){if(r&&"object"===je(r)&&r.settings){var e=r.settings;oe(e),void 0!==e.zoom&&I(e.zoom),void 0!==e.showGrid&&W(e.showGrid),void 0!==e.snapToGrid&&L(e.snapToGrid),void 0!==e.snapToElements&&Z(e.snapToElements),void 0!==e.showElementLibrary&&$(e.showElementLibrary),void 0!==e.showPropertiesPanel&&ee(e.showPropertiesPanel)}},[r]);var A=(0,i.useRef)();(0,i.useEffect)(function(){var e=A.current;if(JSON.stringify(e)!==JSON.stringify(r)&&(A.current=r,r)){var t=r;if(Array.isArray(r)?t=r:r&&"object"===je(r)&&r.elements&&(t=r.elements),t&&t.length>0){var a=ke(t);x(a),T([a]),B(0)}else Array.isArray(t)&&0===t.length&&(x([]),T([[]]),B(0))}},[r]);var F=Re((0,i.useState)(1),2),R=F[0],I=F[1],M=Re((0,i.useState)(!0),2),j=M[0],W=M[1],z=Re((0,i.useState)(!0),2),X=z[0],L=z[1],G=Re((0,i.useState)(!0),2),Y=G[0],Z=G[1],U=Re((0,i.useState)("select"),2),H=U[0],q=U[1],V=Re((0,i.useState)(!0),2),J=V[0],$=V[1],Q=Re((0,i.useState)(!1),2),K=Q[0],ee=Q[1],re=Re((0,i.useState)(function(){return r&&"object"===je(r)&&r.settings?r.settings:{}}),2),ae=re[0],oe=re[1];(0,i.useEffect)(function(){Ze()},[w,C,j,R]);var ne=Re((0,i.useState)(!1),2),ie=ne[0],le=ne[1],se=Re((0,i.useState)({x:0,y:0}),2),ce=se[0],de=se[1],ue=Re((0,i.useState)(null),2),me=ue[0],he=ue[1],be=Re((0,i.useState)(!1),2),ge=be[0],ye=be[1],ve=Re((0,i.useState)(null),2),we=ve[0],xe=ve[1],Ee=Re((0,i.useState)({x:0,y:0,width:0,height:0}),2),Se=Ee[0],Ne=Ee[1],_e=(0,i.useRef)(null),Te=function(){var e,t=(e=Be().m(function e(){var t;return Be().w(function(e){for(;;)switch(e.n){case 0:if(!a){e.n=1;break}return t={elements:w,settings:{zoom:R,showGrid:j,snapToGrid:X,snapToElements:Y,showElementLibrary:J,showPropertiesPanel:K}},e.n=1,a(t);case 1:return e.a(2)}},e)}),function(){var t=this,r=arguments;return new Promise(function(a,o){var n=e.apply(t,r);function i(e){Fe(n,a,o,i,l,"next",e)}function l(e){Fe(n,a,o,i,l,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}(),Ae=D>0,Ie=D<P.length-1,Me=function(){m("canvas",null,{elements:w})},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Oe({id:Date.now(),type:e,x:400*Math.random()+50,y:600*Math.random()+50},t),a=[].concat(Pe(w),[r]);Le(a),N(r.id)},Xe=function(e,t){x(function(r){var a=r.map(function(r){return r.id===e?Oe(Oe({},r),t):r}),o=P.slice(0,D+1);return o.push(a),T(o),B(o.length-1),a})},Le=function(e){var t=P.slice(0,D+1);t.push(e),T(t),B(t.length-1),x(e)},Ge=function(e,t){t.x=Math.max(0,Math.min(h-t.width,t.x)),t.y=Math.max(0,Math.min(g-t.height,t.y));if(t.width=Math.max(e.minWidth||1,Math.min(2e3,t.width)),t.height=Math.max(e.minHeight||1,Math.min(2e3,t.height)),X){var r=10;t.x=Math.round(t.x/r)*r,t.y=Math.round(t.y/r)*r,t.width=Math.round(t.width/r)*r,t.height=Math.round(t.height/r)*r}return t},Ye=function(){le(!1),ye(!1),he(null),xe(null)},Ze=function(){console.log("[PDFEditor] renderCanvas called, elements count:",w.length);var e=_e.current;if(e){console.log("[PDFEditor] renderCanvas: canvas found, starting render");var t=e.getContext("2d");if(t.clearRect(0,0,e.width,e.height),t.fillStyle="#ffffff",t.fillRect(0,0,e.width,e.height),console.log("[PDFEditor] renderCanvas: background drawn"),j){console.log("[PDFEditor] renderCanvas: drawing grid"),t.strokeStyle="#f0f0f0",t.lineWidth=1;for(var r=0;r<=e.width;r+=20)t.beginPath(),t.moveTo(r,0),t.lineTo(r,e.height),t.stroke();for(var a=0;a<=e.height;a+=20)t.beginPath(),t.moveTo(0,a),t.lineTo(e.width,a),t.stroke()}var o=Pe(w).sort(function(e,t){var r=e.zIndex||0,a=t.zIndex||0;return r!==a?r-a:"order_number"===e.type&&"order_number"!==t.type?1:"order_number"===t.type&&"order_number"!==e.type?-1:0});console.log("[PDFEditor] renderCanvas: rendering",o.length,"sorted elements"),o.forEach(function(e,r){if(console.log("[PDFEditor] renderCanvas: rendering element ".concat(r+1,"/").concat(o.length,":"),e.type,"at",e.x,e.y),(_&&_.id)===e.id){if(t.strokeStyle="#007cba",t.lineWidth=2,t.setLineDash([5,5]),"text"===e.type){var a=e.fontWeight?"".concat(e.fontWeight," "):"";t.font="".concat(a).concat(e.fontSize||16,"px ").concat(e.fontFamily||"Arial");var n=t.measureText(e.text||"Texte");t.strokeRect(e.x-5,e.y-e.fontSize-5,n.width+10,e.fontSize+10)}else"rectangle"===e.type?t.strokeRect(e.x-5,e.y-5,(e.width||100)+10,(e.height||50)+10):"circle"===e.type?(t.beginPath(),t.arc(e.x,e.y,(e.radius||25)+5,0,2*Math.PI),t.stroke()):"company_logo"===e.type||"dynamic-text"===e.type||"order_number"===e.type||"document_type"===e.type||"customer_info"===e.type||"company_info"===e.type||"product_table"===e.type||"mentions"===e.type?t.strokeRect(e.x-5,e.y-5,(e.width||100)+10,(e.height||30)+10):"line"===e.type&&t.strokeRect(e.x-5,e.y-10,(e.width||20)+10,(e.height||12)+20);t.setLineDash([])}if((_&&_.id)===e.id&&("rectangle"===e.type||"circle"===e.type||"company_logo"===e.type||"dynamic-text"===e.type||"order_number"===e.type||"document_type"===e.type||"customer_info"===e.type||"company_info"===e.type||"product_table"===e.type||"mentions"===e.type||"line"===e.type)){t.fillStyle="#007cba",t.strokeStyle="#ffffff",t.lineWidth=1;var i=e.width||100,l=e.height||30;"circle"===e.type&&(i=2*(e.radius||25),l=2*(e.radius||25)),[{x:e.x-4,y:e.y-4},{x:e.x+i-4,y:e.y-4},{x:e.x-4,y:e.y+l-4},{x:e.x+i-4,y:e.y+l-4},{x:e.x+i/2-4,y:e.y-4},{x:e.x+i/2-4,y:e.y+l-4},{x:e.x-4,y:e.y+l/2-4},{x:e.x+i-4,y:e.y+l/2-4}].forEach(function(e){t.fillRect(e.x,e.y,8,8),t.strokeRect(e.x,e.y,8,8)})}if(t.save(),e.rotation||void 0!==e.scaleX||void 0!==e.scaleY){var s=e.x+(e.width||100)/2,c=e.y+(e.height||50)/2;if(t.translate(s,c),e.rotation&&t.rotate(e.rotation*Math.PI/180),void 0!==e.scaleX||void 0!==e.scaleY){var d=void 0!==e.scaleX?e.scaleX:1,u=void 0!==e.scaleY?e.scaleY:1;t.scale(d,u)}t.translate(-s,-c)}if("text"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=e.shadowBlur||5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var f=e.x||10,p=e.y||30,m=e.width||200,h=e.height||30;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(f,p,m,h,e.borderRadius),t.fill()):t.fillRect(f,p,m,h)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(f,p,m,h,e.borderRadius),t.stroke()):t.strokeRect(f,p,m,h)),t.fillStyle=e.color||"#000000";var b="italic"===e.fontStyle?"italic ":"",g=e.fontWeight?"".concat(e.fontWeight," "):"";t.font="".concat(b).concat(g).concat(e.fontSize||16,"px ").concat(e.fontFamily||"Arial"),t.textAlign=e.textAlign||"left",e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY?(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0):(t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillText(e.text||"Texte",f,p+.8*(e.fontSize||16))}else if("rectangle"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var y=e.x||10,v=e.y||10,w=e.width||100,x=e.height||50;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(y,v,w,x,e.borderRadius),t.fill()):t.fillRect(y,v,w,x)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(y,v,w,x,e.borderRadius),t.stroke()):t.strokeRect(y,v,w,x)),t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("circle"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var E=e.x||10,C=e.y||10,S=e.radius||25;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,t.beginPath(),t.arc(E,C,S,0,2*Math.PI),t.fill()),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,t.beginPath(),t.arc(E,C,S,0,2*Math.PI),t.stroke()),t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("company_logo"===e.type){if(void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),void 0!==e.brightness||void 0!==e.contrast||void 0!==e.saturate){var N=void 0!==e.brightness?e.brightness/100:1,k=void 0!==e.contrast?e.contrast/100:1,P=void 0!==e.saturate?e.saturate/100:1,T=[];1!==N&&T.push("brightness(".concat(N,")")),1!==k&&T.push("contrast(".concat(k,")")),1!==P&&T.push("saturate(".concat(P,")")),T.length>0&&(t.filter=T.join(" "))}e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=e.shadowBlur||5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var O=e.x||10,D=e.y||10,B=e.width||120,A=e.height||90;if(e.backgroundColor&&"transparent"!==e.backgroundColor){if(e.backgroundColor.includes("gradient")){var F=t.createLinearGradient(O,D,O+B,D+A);e.backgroundColor.includes("linear-gradient")&&(F.addColorStop(0,"#667eea"),F.addColorStop(1,"#764ba2")),t.fillStyle=F}else t.fillStyle=e.backgroundColor;e.borderRadius>0?(t.beginPath(),t.roundRect(O,D,B,A,e.borderRadius),t.fill()):t.fillRect(O,D,B,A)}e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#e5e7eb",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(O,D,B,A,e.borderRadius),t.stroke()):t.strokeRect(O,D,B,A));var R=e.src||e.imageUrl;if(R){var I=new Image;I.onload=function(){var r=I.width/I.height,a=B,o=A,n=O,i=D,l=e.objectFit||"contain";"cover"===l?B/A>r?(o=A,n=O+(B-(a=A*r))/2):(a=B,i=D+(A-(o=B/r))/2):"contain"===l?r>B/A?(a=B,i=D+(A-(o=B/r))/2):(o=A,n=O+(B-(a=A*r))/2):"fill"===l&&(a=B,o=A,n=O,i=D),e.borderRadius>0?(t.save(),t.beginPath(),t.roundRect(O,D,B,A,e.borderRadius),t.clip(),t.drawImage(I,n,i,a,o),t.restore()):t.drawImage(I,n,i,a,o)},I.onerror=function(){Ue(t,O,D,B,A,e)},I.src=R}else Ue(t,O,D,B,A,e);t.filter="none",t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("dynamic-text"===e.type){if(void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),void 0!==e.brightness||void 0!==e.contrast||void 0!==e.saturate){var M=void 0!==e.brightness?e.brightness/100:1;void 0!==e.contrast&&e.contrast,void 0!==e.saturate&&e.saturate,1!==M&&(t.filter="brightness(".concat(M,")"))}e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=e.shadowBlur||5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var j=e.x||10,W=e.y||30,z=e.width||200,X=e.height||30;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(j,W,z,X,e.borderRadius),t.fill()):t.fillRect(j,W,z,X)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(j,W,z,X,e.borderRadius),t.stroke()):t.strokeRect(j,W,z,X)),t.fillStyle=e.color||"#333333";var L="italic"===e.fontStyle?"italic ":"",G=e.fontWeight||"normal",Y=e.fontSize||14,Z=e.fontFamily||"Arial",U=e.letterSpacing||0,H=e.lineHeight||1.2;t.font="".concat(L).concat(G," ").concat(Y,"px ").concat(Z),t.textAlign=e.textAlign||"left",(e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY)&&(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0);var q=e.text||"Texte dynamique";e.template&&"custom"!==e.template?q=(new Ce).generateDynamicTextData({template:e.template,customContent:e.customContent||"",variables:e.variables||{}}).content:e.customContent&&(q=e.customContent),"uppercase"===e.textTransform?q=q.toUpperCase():"lowercase"===e.textTransform?q=q.toLowerCase():"capitalize"===e.textTransform&&(q=q.replace(/\b\w/g,function(e){return e.toUpperCase()}));var V=q.split("\n"),J=Y*H,$=W+Y;"center"===e.textAlign?$=W+(X-(V.length-1)*J)/2+Y/2:"right"===e.textAlign&&($=W+Y),V.forEach(function(r,a){var o=$+a*J;if(U>0){var n=j;if("center"===e.textAlign){var i=t.measureText(r).width+(r.length-1)*U;n=j+(z-i)/2}else if("right"===e.textAlign){var l=t.measureText(r).width+(r.length-1)*U;n=j+z-l}for(var s=0;s<r.length;s++)t.fillText(r[s],n,o),n+=t.measureText(r[s]).width+U}else{var c=j;"center"===e.textAlign?c=j+z/2:"right"===e.textAlign&&(c=j+z),t.fillText(r,c,o)}if("underline"===e.textDecoration||"line-through"===e.textDecoration){var d=U>0?r.split("").reduce(function(e,r){return e+t.measureText(r).width+U},-U):t.measureText(r).width,u=j;"center"===e.textAlign?u=j+(z-d)/2:"right"===e.textAlign&&(u=j+z-d);var f=o+("underline"===e.textDecoration?2:.2*-Y);t.strokeStyle=e.color||"#333333",t.lineWidth=Math.max(1,Y/20),t.beginPath(),t.moveTo(u,f),t.lineTo(u+d,f),t.stroke()}}),t.filter="none",t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("order_number"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=e.shadowBlur||5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var Q=new Ce,K="Commande #{order_number}",ee=e.format,te=ee&&ee.includes("{order_date}")?K:ee||K,re=Q.generateOrderNumberData({format:te,previewOrderNumber:e.previewOrderNumber||"12345"}),ae=e.x||10,oe=e.y||30,ne=e.width||270,ie=e.height||40;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(ae,oe,ne,ie,e.borderRadius),t.fill()):t.fillRect(ae,oe,ne,ie)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(ae,oe,ne,ie,e.borderRadius),t.stroke()):t.strokeRect(ae,oe,ne,ie)),t.fillStyle=e.color||"#000000";var le="italic"===e.fontStyle?"italic ":"",se=e.fontWeight||"bold",ce=e.fontSize||14,de=e.fontFamily||"Arial",ue=e.letterSpacing||0,fe=e.textDecoration;t.font="".concat(le).concat(se," ").concat(ce,"px ").concat(de),(e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY)&&(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0);var pe=oe+8+ce,me=pe+ce+4,he=0,be=ne-16,ge="";if(e.showLabel&&e.labelText&&(ge=e.labelText,"uppercase"===e.textTransform?ge=ge.toUpperCase():"lowercase"===e.textTransform?ge=ge.toLowerCase():"capitalize"===e.textTransform&&(ge=ge.replace(/\b\w/g,function(e){return e.toUpperCase()})),he=ue>0?ge.split("").reduce(function(e,r){return e+t.measureText(r).width+ue},-ue):t.measureText(ge).width),e.showLabel&&e.labelText&&ge){var ye,ve=e.labelAlign||"left";if(ye="center"===ve?ae+ne/2:"right"===ve?ae+ne-8:ae+8,ue>0){var we;if("center"===ve){var xe=ge.split("").reduce(function(e,r){return e+t.measureText(r).width+ue},-ue);we=ye-xe/2+t.measureText(ge[0]).width/2}else if("right"===ve){we=ye-t.measureText(ge[ge.length-1]).width/2;for(var Ee=ge.length-1;Ee>=0;Ee--)we-=t.measureText(ge[Ee]).width+(Ee>0?ue:0);we+=t.measureText(ge[0]).width/2}else we=ye+t.measureText(ge[0]).width/2;for(var Se=0;Se<ge.length;Se++)t.fillText(ge[Se],we,pe),we+=t.measureText(ge[Se]).width+ue}else{var Ne=ye;t.textAlign="center"===ve?"center":"right"===ve?"right":"left",t.fillText(ge,Ne,pe)}if("underline"===fe||"line-through"===fe){var _e=ye;"center"===ve?_e=ye-he/2:"right"===ve&&(_e=ye-he);var ke=pe+("underline"===fe?2:.2*-ce);t.strokeStyle=e.color||"#000000",t.lineWidth=Math.max(1,ce/20),t.beginPath(),t.moveTo(_e,ke),t.lineTo(_e+he,ke),t.stroke()}}var Pe=ae+8+(e.showLabel&&e.labelText?he+10:0),Te=be-(e.showLabel&&e.labelText?he+10:0),De=re.formatted||"Commande #12345";if("uppercase"===e.textTransform?De=De.toUpperCase():"lowercase"===e.textTransform?De=De.toLowerCase():"capitalize"===e.textTransform&&(De=De.replace(/\b\w/g,function(e){return e.toUpperCase()})),t.textAlign=e.textAlign||"right",e.highlightNumber){var Be=ue>0?De.split("").reduce(function(e,r){return e+t.measureText(r).width+ue},-ue):t.measureText(De).width,Ae=Pe+Te-Be;"center"===e.textAlign?Ae=Pe+(Te-Be)/2:"left"===e.textAlign&&(Ae=Pe),t.fillStyle=e.numberBackground||"rgba(59, 130, 246, 0.1)",t.fillRect(Ae-4,me-.7*ce,Be+8,1.2*ce)}if(ue>0){var Fe;if("center"===e.textAlign){var Ie=De.split("").reduce(function(e,r){return e+t.measureText(r).width+ue},-ue);Fe=Pe+(Te-Ie)/2+t.measureText(De[0]).width/2}else if("left"===e.textAlign)Fe=Pe+t.measureText(De[0]).width/2;else{Fe=Pe+Te-t.measureText(De[De.length-1]).width/2;for(var Me=De.length-1;Me>=0;Me--)Fe-=t.measureText(De[Me]).width+(Me>0?ue:0);Fe+=t.measureText(De[0]).width/2}for(var ze=0;ze<De.length;ze++)t.fillText(De[ze],Fe,me),Fe+=t.measureText(De[ze]).width+ue}else{var Xe;"center"===e.textAlign?(Xe=Pe+Te/2,t.textAlign="center"):"left"===e.textAlign?(Xe=Pe,t.textAlign="left"):(Xe=Pe+Te,t.textAlign="right"),t.fillText(De,Xe,me)}if("underline"===fe||"line-through"===fe){var Le=ue>0?De.split("").reduce(function(e,r){return e+t.measureText(r).width+ue},-ue):t.measureText(De).width,Ge=Pe+Te-Le;"center"===e.textAlign?Ge=Pe+(Te-Le)/2:"left"===e.textAlign&&(Ge=Pe);var Ye=me+("underline"===fe?2:.2*-ce);t.strokeStyle=e.color||"#000000",t.lineWidth=Math.max(1,ce/20),t.beginPath(),t.moveTo(Ge,Ye),t.lineTo(Ge+Le,Ye),t.stroke()}t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("document_type"===e.type){t.fillStyle=e.color||"#000000";var Ze=e.fontWeight||"bold";t.font="".concat(Ze," ").concat(e.fontSize||18,"px ").concat(e.fontFamily||"Arial"),t.textAlign=e.textAlign||"center",(e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY)&&(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0);var He=e.x||10,qe=e.y||30;t.fillText("FACTURE",He+(e.width||120)/2,qe+(e.height||50)/2),t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("line"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2),t.strokeStyle=e.lineColor||e.color||"#64748b",t.lineWidth=e.lineWidth||2,t.beginPath();var Ve=e.x||10,Je=e.y||110,$e=e.width||20;t.moveTo(Ve,Je+(e.height||12)/2),t.lineTo(Ve+$e,Je+(e.height||12)/2),t.stroke(),t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("shape-triangle"===e.type){var Qe=e.x||10,Ke=e.y||10,et=e.width||60,tt=e.height||50;t.beginPath(),t.moveTo(Qe,Ke-tt/2),t.lineTo(Qe-et/2,Ke+tt/2),t.lineTo(Qe+et/2,Ke+tt/2),t.closePath(),e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,t.fill()),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,t.stroke())}else if("shape-star"===e.type){var rt=e.x||10,at=e.y||10,ot=(e.width||60)/2,nt=.5*ot;t.beginPath();for(var it=0;it<10;it++){var lt=it*Math.PI/5,st=it%2==0?ot:nt,ct=rt+Math.cos(lt)*st,dt=at+Math.sin(lt)*st;0===it?t.moveTo(ct,dt):t.lineTo(ct,dt)}t.closePath(),e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,t.fill()),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,t.stroke())}else if("mentions"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var ut=e.x||10,ft=e.y||10,pt=e.width||300,mt=e.height||40;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(ut,ft,pt,mt,e.borderRadius),t.fill()):t.fillRect(ut,ft,pt,mt)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#000000",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(ut,ft,pt,mt,e.borderRadius),t.stroke()):t.strokeRect(ut,ft,pt,mt)),t.fillStyle=e.color||"#666666";var ht="italic"===e.fontStyle?"italic ":"",bt=e.fontWeight||"normal",gt=e.textDecoration;t.font="".concat(ht).concat(bt," ").concat(e.fontSize||8,"px ").concat(e.fontFamily||"Arial"),t.textAlign=e.textAlign||"center",(e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY)&&(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0);var yt=[];e.showEmail&&yt.push("email@company.com"),e.showPhone&&yt.push("+33 1 23 45 67 89"),e.showSiret&&yt.push("SIRET: 123 456 789 00012");var vt=yt.join(e.separator||" â€¢ "),wt=ft+mt/2;if("underline"===gt||"line-through"===gt){var xt=t.measureText(vt),Et=wt+("underline"===gt?2:-2);t.strokeStyle=e.color||"#666666",t.lineWidth=1,t.beginPath(),t.moveTo(ut+(pt-xt.width)/2,Et),t.lineTo(ut+(pt+xt.width)/2,Et),t.stroke()}t.fillText(vt,ut+pt/2,wt),t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("customer_info"===e.type||"company_info"===e.type){void 0!==e.opacity&&e.opacity<1&&(t.globalAlpha=e.opacity),e.shadow&&(t.shadowColor=e.shadowColor||"#000000",t.shadowBlur=e.shadowBlur||5,t.shadowOffsetX=e.shadowOffsetX||2,t.shadowOffsetY=e.shadowOffsetY||2);var Ct,St=new Ce;Ct="customer_info"===e.type?St.generateCustomerInfoData({fields:e.fields||["name","email","phone","address"]}):St.generateCompanyInfoData({fields:e.fields||["name","address","phone","email"]});var Nt=e.x||10,_t=e.y||10,kt=e.width||250,Pt=e.height||120;e.backgroundColor&&"transparent"!==e.backgroundColor&&(t.fillStyle=e.backgroundColor,e.borderRadius>0?(t.beginPath(),t.roundRect(Nt,_t,kt,Pt,e.borderRadius),t.fill()):t.fillRect(Nt,_t,kt,Pt)),e.borderWidth>0&&(t.strokeStyle=e.borderColor||"#e2e8f0",t.lineWidth=e.borderWidth||1,e.borderRadius>0?(t.beginPath(),t.roundRect(Nt,_t,kt,Pt,e.borderRadius),t.stroke()):t.strokeRect(Nt,_t,kt,Pt)),t.fillStyle=e.color||"#1e293b";var Tt="italic"===e.fontStyle?"italic ":"",Ot=e.fontWeight||"normal",Dt=e.fontSize||12,Bt=e.fontFamily||"Arial",At=e.lineHeight||1.4,Ft=e.letterSpacing||0;t.font="".concat(Tt).concat(Ot," ").concat(Dt,"px ").concat(Bt),t.textAlign="left",(e.textShadowBlur>0||0!==e.textShadowOffsetX||0!==e.textShadowOffsetY)&&(t.shadowColor=e.textShadowColor||"#000000",t.shadowBlur=e.textShadowBlur||0,t.shadowOffsetX=e.textShadowOffsetX||0,t.shadowOffsetY=e.textShadowOffsetY||0);var Rt={name:"ðŸ‘¤",email:"ðŸ“§",phone:"ðŸ“ž",address:"ðŸ ",company:"ðŸ¢",vat:"ðŸ†”",siret:"ðŸ“‹"},It=Dt*At,Mt=e.layout||"vertical",jt=!1!==e.showLabels;if(e.labelStyle,"vertical"===Mt)Object.entries(Ct).forEach(function(r){var a=Re(r,2),o=a[0],n=a[1];if(n){var i=Rt[o]||"ðŸ“„";if("address"===o){var l=n.split("\n").map(function(e){return e.trim()}).filter(function(e){return e}),s=-1,c="";l.forEach(function(e,t){/\b(?:BP|boÃ®te postale|boite postale|b\.p\.|p\.o\. box|postbox|case postale)\b/i.test(e)&&(s=t,c=e)});var d=[];if(-1!==s){var u=l.slice(0,s),f=l.slice(s+1);d.push(u.join(" "));var p=f.join(" ")+(f.length>0?" ":"")+c;d.push(p)}else{var m=-1;if(l.forEach(function(e,t){(/\b\d{5}(?:-\d{4})?\b/.test(e)||/\b[A-Z]\d[A-Z] \d[A-Z]\d\b/i.test(e)||/\b[A-Z]{1,2}\d{1,2}[A-Z]? \d[A-Z]{2}\b/i.test(e)||/\b\d{4,6}\b/.test(e))&&(m=t)}),-1!==m){var h=l.slice(0,m),b=l.slice(m);d.push(h.join(" ")),d.push(b.join(" "))}else l.length>=2?(d.push(l[0]),d.push(l.slice(1).join(" "))):(d.push(l[0]||""),d.push(""))}d.forEach(function(r,a){if(r.trim()){var n=r;if("address"===o&&0===a)o.charAt(0).toUpperCase(),o.slice(1).replace("_"," "),n="".concat(i," ").concat(r);else if(jt&&0===a){var l=o.charAt(0).toUpperCase()+o.slice(1).replace("_"," ");n="".concat(i," ").concat(l,": ").concat(r)}else n="   ".concat(r);"uppercase"===e.textTransform?n=n.toUpperCase():"lowercase"===e.textTransform?n=n.toLowerCase():"capitalize"===e.textTransform&&(n=n.replace(/\b\w/g,function(e){return e.toUpperCase()}));var s=_t+Dt;if(Ft>0)for(var c=Nt,d=0;d<n.length;d++)t.fillText(n[d],c,s),c+=t.measureText(n[d]).width+Ft;else t.fillText(n,Nt,s);if("underline"===e.textDecoration||"line-through"===e.textDecoration){var u=Ft>0?n.split("").reduce(function(e,r){return e+t.measureText(r).width+Ft},-Ft):t.measureText(n).width,f=s+("underline"===e.textDecoration?2:.2*-Dt);t.strokeStyle=e.color||"#1e293b",t.lineWidth=Math.max(1,Dt/20),t.beginPath(),t.moveTo(Nt,f),t.lineTo(Nt+u,f),t.stroke()}_t+=It}})}else{var g=n;if(jt){var y=o.charAt(0).toUpperCase()+o.slice(1).replace("_"," ");g="".concat(i," ").concat(y,": ").concat(n)}else g="".concat(i," ").concat(n);"uppercase"===e.textTransform?g=g.toUpperCase():"lowercase"===e.textTransform?g=g.toLowerCase():"capitalize"===e.textTransform&&(g=g.replace(/\b\w/g,function(e){return e.toUpperCase()}));var v=_t+Dt;if(Ft>0)for(var w=Nt,x=0;x<g.length;x++)t.fillText(g[x],w,v),w+=t.measureText(g[x]).width+Ft;else t.fillText(g,Nt,v);if("underline"===e.textDecoration||"line-through"===e.textDecoration){var E=Ft>0?g.split("").reduce(function(e,r){return e+t.measureText(r).width+Ft},-Ft):t.measureText(g).width,C=v+("underline"===e.textDecoration?2:.2*-Dt);t.strokeStyle=e.color||"#1e293b",t.lineWidth=Math.max(1,Dt/20),t.beginPath(),t.moveTo(Nt,C),t.lineTo(Nt+E,C),t.stroke()}_t+=It}}});else for(var Wt=Object.entries(Ct),zt=Math.ceil(Wt.length/2),Xt=function(){var r=Wt[Lt],a=Wt[Lt+zt];if(r){var o=Re(r,2),n=o[0],i=o[1],l=Rt[n]||"ðŸ“„";if("address"===n){var s=i.split("\n").map(function(e){return e.trim()}).filter(function(e){return e}),c=-1,d="";s.forEach(function(e,t){/\b(?:BP|boÃ®te postale|boite postale|b\.p\.|p\.o\. box|postbox|case postale)\b/i.test(e)&&(c=t,d=e)});var u=[];if(-1!==c){var f=s.slice(0,c),p=s.slice(c+1);u.push(f.join(" "));var m=p.join(" ")+(p.length>0?" ":"")+d;u.push(m)}else{var h=-1;if(s.forEach(function(e,t){(/\b\d{5}(?:-\d{4})?\b/.test(e)||/\b[A-Z]\d[A-Z] \d[A-Z]\d\b/i.test(e)||/\b[A-Z]{1,2}\d{1,2}[A-Z]? \d[A-Z]{2}\b/i.test(e)||/\b\d{4,6}\b/.test(e))&&(h=t)}),-1!==h){var b=s.slice(0,h),g=s.slice(h);u.push(b.join(" ")),u.push(g.join(" "))}else s.length>=2?(u.push(s[0]),u.push(s.slice(1).join(" "))):(u.push(s[0]||""),u.push(""))}u.forEach(function(r,a){if(r.trim()){var o=r;if("address"===n&&0===a)n.charAt(0).toUpperCase(),n.slice(1).replace("_"," "),o="".concat(l," ").concat(r);else if(jt&&0===a){var i=n.charAt(0).toUpperCase()+n.slice(1).replace("_"," ");o="".concat(l," ").concat(i,": ").concat(r)}else o="   ".concat(r);"uppercase"===e.textTransform?o=o.toUpperCase():"lowercase"===e.textTransform?o=o.toLowerCase():"capitalize"===e.textTransform&&(o=o.replace(/\b\w/g,function(e){return e.toUpperCase()}));var s=_t+Dt;t.fillText(o,Nt,s),_t+=It}})}else{var y=i;if(jt){var v=n.charAt(0).toUpperCase()+n.slice(1).replace("_"," ");y="".concat(l," ").concat(v,": ").concat(i)}else y="".concat(l," ").concat(i);"uppercase"===e.textTransform?y=y.toUpperCase():"lowercase"===e.textTransform?y=y.toLowerCase():"capitalize"===e.textTransform&&(y=y.replace(/\b\w/g,function(e){return e.toUpperCase()}));var w=_t+Dt;t.fillText(y,Nt,w)}}if(a){var x=Re(a,2),E=x[0],C=x[1],S=Rt[E]||"ðŸ“„";if("address"===E){var N=C.split("\n").map(function(e){return e.trim()}).filter(function(e){return e}),_=-1,k="";N.forEach(function(e,t){/\b(?:BP|boÃ®te postale|boite postale|b\.p\.|p\.o\. box|postbox|case postale)\b/i.test(e)&&(_=t,k=e)});var P=[];if(-1!==_){var T=N.slice(0,_),O=N.slice(_+1);P.push(T.join(" "));var D=O.join(" ")+(O.length>0?" ":"")+k;P.push(D)}else{var B=-1;if(N.forEach(function(e,t){(/\b\d{5}(?:-\d{4})?\b/.test(e)||/\b[A-Z]\d[A-Z] \d[A-Z]\d\b/i.test(e)||/\b[A-Z]{1,2}\d{1,2}[A-Z]? \d[A-Z]{2}\b/i.test(e)||/\b\d{4,6}\b/.test(e))&&(B=t)}),-1!==B){var A=N.slice(0,B),F=N.slice(B);P.push(A.join(" ")),P.push(F.join(" "))}else N.length>=2?(P.push(N[0]),P.push(N.slice(1).join(" "))):(P.push(N[0]||""),P.push(""))}P.forEach(function(r,a){if(r.trim()){var o=r;if("address"===E&&0===a)E.charAt(0).toUpperCase(),E.slice(1).replace("_"," "),o="".concat(S," ").concat(r);else if(jt&&0===a){var n=E.charAt(0).toUpperCase()+E.slice(1).replace("_"," ");o="".concat(S," ").concat(n,": ").concat(r)}else o="   ".concat(r);"uppercase"===e.textTransform?o=o.toUpperCase():"lowercase"===e.textTransform?o=o.toLowerCase():"capitalize"===e.textTransform&&(o=o.replace(/\b\w/g,function(e){return e.toUpperCase()}));var i=_t+Dt,l=Nt+kt/2+10;t.fillText(o,l,i),_t+=It}})}else{var R=C;if(jt){var I=E.charAt(0).toUpperCase()+E.slice(1).replace("_"," ");R="".concat(S," ").concat(I,": ").concat(C)}else R="".concat(S," ").concat(C);"uppercase"===e.textTransform?R=R.toUpperCase():"lowercase"===e.textTransform?R=R.toLowerCase():"capitalize"===e.textTransform&&(R=R.replace(/\b\w/g,function(e){return e.toUpperCase()}));var M=_t+Dt,j=Nt+kt/2+10;t.fillText(R,j,M)}}r&&"address"===r[0]||a&&"address"===a[0]||(_t+=It)},Lt=0;Lt<zt;Lt++)Xt();t.globalAlpha=1,t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}else if("product_table"===e.type)try{var Gt,Yt,Zt,Ut,Ht,qt=new Ce,Vt={};try{if(e.columns)if("string"==typeof e.columns){var Jt=e.columns.split(",").map(function(e){return e.trim()}),$t={image:"image",name:"name",sku:"sku",quantity:"quantity",price:"price",total:"total",description:"description",short_description:"short_description",categories:"categories",regular_price:"regular_price",sale_price:"sale_price",discount:"discount",tax:"tax",weight:"weight",dimensions:"dimensions",attributes:"attributes",stock_quantity:"stock_quantity",stock_status:"stock_status"};Jt.forEach(function(e){Vt[$t[e]||e]=!0})}else"object"===je(e.columns)&&(Vt=Oe({},e.columns))}catch(e){Vt={name:!0,quantity:!0,price:!0,total:!0}}var Qt=qt.generateProductTableData({columns:Vt,showSubtotal:null!==(Gt=e.showSubtotal)&&void 0!==Gt&&Gt,showShipping:null===(Yt=e.showShipping)||void 0===Yt||Yt,showTaxes:null===(Zt=e.showTaxes)||void 0===Zt||Zt,showDiscount:null===(Ut=e.showDiscount)||void 0===Ut||Ut,showTotal:null===(Ht=e.showTotal)||void 0===Ht||Ht,tableStyle:e.tableStyle||"default"}),Kt=e.x||10,er=e.y||10,tr=Math.max(200,e.width||500),rr=Math.max(100,e.height||200),ar=We(e.tableStyle||"default"),or=12,nr=35,ir=28,lr=ar.borderRadius||6,sr=ar.shadowBlur||0;if(t.save(),sr>0&&(t.shadowColor=ar.shadowColor||"rgba(0, 0, 0, 0.1)",t.shadowBlur=sr,t.shadowOffsetX=2,t.shadowOffsetY=2),t.fillStyle=ar.rowBg||"#ffffff",lr>0?(t.beginPath(),t.roundRect(Kt,er,tr,rr,lr),t.fill()):t.fillRect(Kt,er,tr,rr),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.strokeStyle=ar.rowBorder||"#e2e8f0",t.lineWidth=ar.borderWidth||1,lr>0?(t.beginPath(),t.roundRect(Kt,er,tr,rr,lr),t.stroke()):t.strokeRect(Kt,er,tr,rr),t.fillStyle=ar.headerTextColor||"#1e293b",t.font="".concat(ar.headerFontWeight||"600"," ").concat(Math.max(14,ar.headerFontSize||14),"px Arial"),t.textAlign="left",t.fillText("TABLEAU DES PRODUITS",Kt+or,er+or+8),Qt&&Qt.headers&&Qt.rows){var cr=Qt.headers,dr=cr.length,ur=tr-24,fr=ur/dr,pr=er+or+20,mr=t.createLinearGradient(Kt+or,pr,Kt+or,pr+nr);mr.addColorStop(0,ar.headerBg||"#f8fafc"),mr.addColorStop(1,ar.headerBg?(kr=ar.headerBg.replace("#",""),Pr=parseInt(kr.substr(0,2),16),Tr=parseInt(kr.substr(2,2),16),Or=parseInt(kr.substr(4,2),16),Dr=Math.min(255,Math.floor(Pr+.1*(255-Pr))),Br=Math.min(255,Math.floor(Tr+.1*(255-Tr))),Ar=Math.min(255,Math.floor(Or+.1*(255-Or))),"rgb(".concat(Dr,", ").concat(Br,", ").concat(Ar,")")):"#ffffff"),t.fillStyle=mr,t.fillRect(Kt+or,pr,ur,nr),t.strokeStyle=ar.headerBorder||"#e2e8f0",t.lineWidth=1,t.strokeRect(Kt+or,pr,ur,nr),t.strokeStyle=ar.headerBorder||"#cbd5e1",t.lineWidth=2,t.beginPath(),t.moveTo(Kt+or,pr+nr),t.lineTo(Kt+or+ur,pr+nr),t.stroke(),t.font="".concat(ar.headerFontWeight||"600"," ").concat(ar.headerFontSize||12,"px Arial"),t.fillStyle=ar.headerTextColor||"#374151",t.textBaseline="middle",cr.forEach(function(e,r){try{var a=Kt+or+r*fr,o=a+fr/2,n="QtÃ©"===e||"Prix"===e||"Total"===e;t.textAlign=n?"center":"left";var i=n?o:a+8,l=pr+17.5;t.fillText(e,i,l),r<cr.length-1&&(t.strokeStyle=ar.headerBorder||"#e5e7eb",t.lineWidth=1,t.beginPath(),t.moveTo(a+fr,pr),t.lineTo(a+fr,pr+nr),t.stroke())}catch(e){}}),t.font="".concat(ar.rowFontSize||11,"px Arial"),t.textBaseline="middle";for(var hr=Math.min(5,Qt.rows.length),br=pr+nr+8,gr=function(){var e=Qt.rows[yr];if(Array.isArray(e)){var r=br+yr*ir;yr%2==1&&ar.altRowBg&&"transparent"!==ar.altRowBg&&(t.fillStyle=ar.altRowBg,t.fillRect(Kt+or,r,ur,ir)),t.strokeStyle=ar.rowBorder||"#f1f5f9",t.lineWidth=.5,t.beginPath(),t.moveTo(Kt+or,r+ir),t.lineTo(Kt+or+ur,r+ir),t.stroke(),t.fillStyle=ar.rowTextColor||"#374151",e.forEach(function(e,a){try{var o=Kt+or+a*fr,n=o+fr/2,i=cr[a],l="QtÃ©"===i||"Prix"===i||"Total"===i;t.textAlign=l?"center":"left";var s=l?n:o+8,c=r+14,d=null!=e?e.toString():"",u=l?12:18,f=d.length>u?d.substring(0,u)+"...":d;t.fillText(f,s,c),a<cr.length-1&&(t.strokeStyle=ar.rowBorder||"#f1f5f9",t.lineWidth=.5,t.beginPath(),t.moveTo(o+fr,r),t.lineTo(o+fr,r+ir),t.stroke())}catch(e){}})}},yr=0;yr<hr;yr++)gr();if(Qt.totals&&Object.keys(Qt.totals).length>0){var vr=br+hr*ir+15,wr=24*Object.keys(Qt.totals).length+16,xr=t.createLinearGradient(Kt+or,vr,Kt+or,vr+wr);xr.addColorStop(0,ar.headerBg?function(e){var t=e.replace("#",""),r=parseInt(t.substr(0,2),16),a=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16),n=Math.max(0,Math.floor(.9*r)),i=Math.max(0,Math.floor(.9*a)),l=Math.max(0,Math.floor(.9*o));return"rgb(".concat(n,", ").concat(i,", ").concat(l,")")}(ar.headerBg):"#f1f5f9"),xr.addColorStop(1,ar.headerBg||"#f8fafc"),t.fillStyle=xr,t.fillRect(Kt+or,vr,ur,wr),t.strokeStyle=ar.headerBorder||"#cbd5e1",t.lineWidth=1.5,t.strokeRect(Kt+or,vr,ur,wr),t.font="".concat(ar.headerFontWeight||"600"," ").concat(Math.max(11,ar.rowFontSize||11),"px Arial"),t.fillStyle=ar.headerTextColor||"#1e293b",t.textBaseline="middle";var Er=vr+12;Object.entries(Qt.totals).forEach(function(e){var r=Re(e,2),a=r[0],o=r[1];try{var n="total"===a?"TOTAL":"subtotal"===a?"Sous-total":"shipping"===a?"Livraison":"tax"===a?"TVA":"discount"===a?"Remise":a,i=null!=o?o.toString():"0";t.textAlign="left",t.fillText(n+":",Kt+or+8,Er),t.textAlign="right",t.fillText(i,Kt+or+ur-8,Er),Er+=24}catch(e){}})}}else t.fillStyle=ar.rowTextColor||"#666666",t.font="".concat(ar.rowFontSize||"12px"," Arial"),t.fillText("Aucune donnÃ©e disponible",Kt+10,er+rr/2);t.textAlign="left"}catch(r){t.fillStyle="#ff6b6b",t.font="12px Arial",t.fillText("Erreur product_table: ".concat(r.message),e.x||10,(e.y||10)+20)}else{t.fillStyle="#ff6b6b";var Cr=e.x||10,Sr=e.y||10,Nr=e.width||100,_r=e.height||30;t.fillRect(Cr,Sr,Nr,_r),t.strokeStyle="#ff0000",t.lineWidth=2,t.strokeRect(Cr,Sr,Nr,_r),t.fillStyle="#ffffff",t.font="12px Arial",t.fillText(e.type,Cr+5,Sr+20)}var kr,Pr,Tr,Or,Dr,Br,Ar;t.restore()})}else console.log("[PDFEditor] renderCanvas: canvas not found")};(0,i.useEffect)(function(){Ze()},[w,R,j,_]),(0,i.useEffect)(function(){Ze()},[]),(0,i.useEffect)(function(){},[r]),(0,i.useEffect)(function(){var e=function(e){"pdfBuilderPreview"===e.type&&Me()};return document.addEventListener("pdfBuilderPreview",e),window.pdfBuilderPro=window.pdfBuilderPro||{},window.pdfBuilderPro.triggerPreview=Me,function(){document.removeEventListener("pdfBuilderPreview",e)}},[w]);var Ue=function(e,t,r,a,o,n){var i=e.createLinearGradient(t,r,t+a,r+o);i.addColorStop(0,"#f8fafc"),i.addColorStop(1,"#e2e8f0"),e.fillStyle=i,e.fillRect(t,r,a,o),e.strokeStyle="#cbd5e1",e.lineWidth=1,e.strokeRect(t,r,a,o);var l=t+a/2,s=r+o/2,c=.4*Math.min(a,o);e.fillStyle="#64748b",e.beginPath(),e.arc(l,s,c/2,0,2*Math.PI),e.fill(),e.fillStyle="#ffffff",e.font="bold ".concat(.25*c,"px Arial"),e.textAlign="center",e.textBaseline="middle",e.fillText("LOGO",l,s),e.fillStyle="#94a3b8",e.font="".concat(Math.max(8,.08*c),"px Arial"),e.fillText("Cliquez pour ajouter",l,r+o-8),e.fillText("votre logo",l,r+o-2)};return l().createElement(l().Fragment,null,l().createElement("div",{id:"pdf-builder-portals"}),l().createElement("div",{className:"pdf-builder-container pdf-editor"},l().createElement(fe,{templateName:n,isNew:c,onSave:Te,onCreateNew:function(e){alert('Nouveau template "'.concat(e.name,'" crÃ©Ã© avec succÃ¨s!\nDimensions: ').concat(e.width,"x").concat(e.height,"px (").concat(e.orientation,")"))},onPreview:Me}),l().createElement("div",{className:"pdf-builder-toolbar"},l().createElement(d,{selectedTool:H,onToolSelect:function(e){q(e);var t={"add-text":{type:"text",text:"Nouveau texte",x:50,y:50,fontSize:16,color:"#000000"},"add-text-title":{type:"text",text:"Titre",x:50,y:50,fontSize:24,fontWeight:"bold",color:"#000000"},"add-text-subtitle":{type:"text",text:"Sous-titre",x:50,y:50,fontSize:18,fontWeight:"normal",color:"#666666"},"add-rectangle":{type:"rectangle",x:50,y:50,width:100,height:60,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#000000"},"add-circle":{type:"circle",x:75,y:75,radius:30,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#000000"},"add-line":{type:"line",x:50,y:50,width:100,height:2,lineColor:"#000000",lineWidth:2},"add-arrow":{type:"line",x:50,y:50,width:100,height:2,lineColor:"#000000",lineWidth:2},"add-triangle":{type:"shape-triangle",x:50,y:50,width:60,height:50,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#000000"},"add-star":{type:"shape-star",x:50,y:50,width:60,height:60,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#000000"},"add-divider":{type:"line",x:50,y:50,width:200,height:2,lineColor:"#cccccc",lineWidth:1},"add-image":{type:"image",x:50,y:50,width:100,height:100,src:""},"add-dynamic-text":{type:"dynamic-text",x:50,y:50,width:200,height:30,template:"total_only",customContent:"{{order_total}} â‚¬",fontSize:14,color:"#333333"}};t[e]&&ze(t[e].type,t[e])},zoom:R,onZoomChange:function(e){I(Math.max(.1,Math.min(3,e)))},showGrid:j,onShowGridChange:function(e){W(e)},snapToGrid:X,onSnapToGridChange:function(e){L(e)},snapToElements:Y,onSnapToElementsChange:function(e){Z(e)},onUndo:function(){D>0&&(B(D-1),x(P[D-1]))},onRedo:function(){D<P.length-1&&(B(D+1),x(P[D+1]))},canUndo:Ae,canRedo:Ie,settings:ae})),l().createElement("div",{className:"pdf-builder-workspace editor-workspace"},J&&l().createElement("div",{className:"pdf-builder-sidebar element-library-panel"},l().createElement(S,{onAddElement:ze,selectedTool:H,onToolSelect:q})),l().createElement("div",{className:"pdf-builder-canvas-container canvas-container"},l().createElement("canvas",{ref:_e,className:"pdf-canvas",width:h,height:g,style:{transform:"scale(".concat(R,")"),transformOrigin:"top left",cursor:"select"===H?"default":"crosshair"},onClick:function(e){var t=_e.current;if(t){var r=t.getBoundingClientRect(),a=(e.clientX-r.left)/R,o=(e.clientY-r.top)/R;if("select"!==H){var n;switch(H){case"add-text":n={id:Date.now(),type:"text",text:"Nouveau texte",x:a,y:o,fontSize:16,color:"#000000",fontFamily:"Arial"};break;case"add-rectangle":n={id:Date.now(),type:"rectangle",x:a,y:o,width:100,height:50,backgroundColor:"#ffffff",borderColor:"#000000",borderWidth:1};break;case"add-circle":n={id:Date.now(),type:"circle",x:a,y:o,radius:25,backgroundColor:"#ffffff",borderColor:"#000000",borderWidth:1};break;default:return}var i=[].concat(Pe(w),[n]);Le(i),N(n.id),q("select")}}},onMouseDown:function(e){var t=_e.current;if(t){var r=t.getBoundingClientRect(),a=(e.clientX-r.left)/R,o=(e.clientY-r.top)/R;if(_){var n=w.find(function(e){return e.id===(_&&_.id)});if(n){var i=function(e,t,r){var a=e.width||100,o=e.height||30;"circle"===e.type&&(a=2*(e.radius||25),o=2*(e.radius||25));for(var n=e.x,i=e.x+a,l=e.y,s=e.y+o,c={nw:{xMin:n-8,xMax:n+8,yMin:l-8,yMax:l+8},ne:{xMin:i-8,xMax:i+8,yMin:l-8,yMax:l+8},sw:{xMin:n-8,xMax:n+8,yMin:s-8,yMax:s+8},se:{xMin:i-8,xMax:i+8,yMin:s-8,yMax:s+8},n:{xMin:n+8,xMax:i-8,yMin:l-8,yMax:l+8},s:{xMin:n+8,xMax:i-8,yMin:s-8,yMax:s+8},w:{xMin:n-8,xMax:n+8,yMin:l+8,yMax:s-8},e:{xMin:i-8,xMax:i+8,yMin:l+8,yMax:s-8}},d=0,u=["nw","ne","sw","se","n","s","w","e"];d<u.length;d++){var f=u[d],p=c[f];if(t>=p.xMin&&t<=p.xMax&&r>=p.yMin&&r<=p.yMax)return f}return null}(n,a,o);if(i){ye(!0),xe(i);var l=n.width||100,s=n.height||30;return"circle"===n.type&&(l=2*(n.radius||25),s=2*(n.radius||25)),void Ne({x:a,y:o,width:l,height:s,elementX:n.x,elementY:n.y})}}}var c=w.find(function(e){if("text"===e.type){var r=t.getContext("2d"),n=e.fontWeight?"".concat(e.fontWeight," "):"";r.font="".concat(n).concat(e.fontSize||16,"px ").concat(e.fontFamily||"Arial");var i=r.measureText(e.text||"Texte");return a>=e.x&&a<=e.x+i.width&&o>=e.y-e.fontSize&&o<=e.y}if("rectangle"===e.type)return a>=e.x&&a<=e.x+(e.width||100)&&o>=e.y&&o<=e.y+(e.height||50);if("circle"===e.type){var l=a-e.x,s=o-e.y;return Math.sqrt(l*l+s*s)<=(e.radius||25)}return"company_logo"===e.type||"dynamic-text"===e.type||"order_number"===e.type||"document_type"===e.type||"customer_info"===e.type||"company_info"===e.type||"product_table"===e.type||"mentions"===e.type?a>=e.x&&a<=e.x+(e.width||100)&&o>=e.y&&o<=e.y+(e.height||30):"line"===e.type&&a>=e.x&&a<=e.x+(e.width||20)&&Math.abs(o-(e.y+(e.height||12)/2))<=5});c?(N(c.id),ee(!0),le(!0),he(c),de({x:a,y:o})):(N(null),ee(!1))}},onMouseMove:function(e){var t=_e.current;if(t){var r=t.getBoundingClientRect(),a=(e.clientX-r.left)/R,o=(e.clientY-r.top)/R;if(ge&&_&&we){var n=w.find(function(e){return e.id===(_&&_.id)});if(n){var i=Se.width,l=Se.height,s=n.x,c=n.y,d=n.radius,u=a-Se.x,f=o-Se.y;switch(we){case"nw":i=Math.max(20,Se.width-u),l=Math.max(20,Se.height-f),s=Se.elementX+u,c=Se.elementY+f;break;case"ne":i=Math.max(20,Se.width+u),l=Math.max(20,Se.height-f),c=Se.elementY+f;break;case"sw":i=Math.max(20,Se.width-u),l=Math.max(20,Se.height+f),s=Se.elementX+u;break;case"se":i=Math.max(20,Se.width+u),l=Math.max(20,Se.height+f);break;case"n":l=Math.max(20,Se.height-f),c=Se.elementY+f;break;case"s":l=Math.max(20,Se.height+f);break;case"w":i=Math.max(20,Se.width-u),s=Se.elementX+u;break;case"e":i=Math.max(20,Se.width+u)}if("circle"===n.type){var p={x:s,y:c,width:2*(d=Math.min(i,l)/2),height:2*d};p=Ge(n,p),Xe(_.id,{x:p.x,y:p.y,radius:Math.max(10,p.width/2)})}else{var m={x:s,y:c,width:i,height:l};if(m=Ge(n,m),("image"===n.type||n.lockAspectRatio)&&"n"!==we&&"s"!==we){var b=Se.width/Se.height;Math.abs(m.width/m.height-b)>.01&&(m.height=Math.round(m.width/b))}Xe(_.id,{x:m.x,y:m.y,width:m.width,height:m.height})}}}else if(ie&&me){var y=a-ce.x,v=o-ce.y,x=me.x+y,E=me.y+v;X&&(x=10*Math.round(x/10),E=10*Math.round(E/10)),x=Math.max(0,Math.min(h-(me.width||100),x)),E=Math.max(0,Math.min(g-(me.height||30),E)),Xe(me.id,{x,y:E})}}},onMouseUp:Ye,onMouseLeave:Ye,onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDrop:function(e){e.preventDefault();var t=_e.current;if(t){var r=t.getBoundingClientRect(),a=(e.clientX-r.left)/R,o=(e.clientY-r.top)/R;try{var n=JSON.parse(e.dataTransfer.getData("application/json"));if("element"===n.type){var i=Oe({id:Date.now(),type:n.elementType,x:a,y:o},n.defaultProperties),l=[].concat(Pe(w),[i]);Le(l),N(i.id)}}catch(e){}}}}),_&&l().createElement("button",{className:"properties-panel-toggle ".concat(K?"open":"closed"),onClick:function(){return ee(!K)},title:K?"Fermer les propriÃ©tÃ©s":"Ouvrir les propriÃ©tÃ©s"},l().createElement("span",{className:"toggle-arrow"},"â—€")),l().createElement(pe,{canvasWidth:h,canvasHeight:g,dpi:y,zoom:100*R,showIndicator:!0})),K&&_&&l().createElement("div",{className:"pdf-builder-properties properties-panel-container"},l().createElement(te,{selectedElements:_?[_]:[],elements:w,onPropertyChange:function(e,t,r){Xe(e,De({},t,r))},onBatchUpdate:function(e){e.forEach(function(e){Xe(e.elementId,e.properties)})}})))),l().createElement(b,null))},Xe=function(e){var t=e.initialElements,r=void 0===t?[]:t,a=e.onSave,o=e.templateName,n=void 0===o?"":o,i=e.isNew,s=void 0===i||i,c=e.canvasSettings,d=void 0===c?{}:c;return l().createElement(y,null,l().createElement(ze,{initialElements:r,onSave:a,templateName:n,isNew:s,canvasSettings:d}))};function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}try{if("undefined"!=typeof window&&(window.React=i,window.ReactDOM=s),"undefined"!=typeof window)window.pdfBuilderPro||(window.pdfBuilderPro={}),window.pdfBuilderPro.React=i,window.pdfBuilderPro.ReactDOM=s,window.pdfBuilderPro.init=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("[PDF Builder] ðŸŽ¨ ===== PDF EDITOR INIT START ====="),console.log("[PDF Builder] ðŸ“ Container ID:",e),console.log("[PDF Builder] ðŸ“‹ Options received:",r),console.log("[PDF Builder] ðŸ·ï¸ Template name:",r.templateName||"N/A"),console.log("[PDF Builder] ðŸ†” Template ID:",r.templateId||"N/A"),console.log("[PDF Builder] ðŸ†• Is new template:",r.isNew),console.log("[PDF Builder] ðŸ”¢ Initial elements count:",(null===(t=r.initialElements)||void 0===t?void 0:t.length)||0),r.initialElements&&"object"===Le(r.initialElements)&&!Array.isArray(r.initialElements)?(console.log("[PDF Builder] ðŸ”„ Converting initialElements object to array in editor init"),r.initialElements=Object.values(r.initialElements),console.log("[PDF Builder] âœ… Conversion completed, new count:",r.initialElements.length)):r.initialElements?console.log("[PDF Builder] âœ… initialElements already an array with length:",r.initialElements.length):(console.log("[PDF Builder] ðŸ“ Setting empty initialElements array"),r.initialElements=[]),(window.pdfBuilderDebug||"localhost"===window.location.hostname)&&(console.log("PDF Builder Pro init called for",e,"with options:",r),console.log("Initial elements received:",r.initialElements,"Count:",r.initialElements?r.initialElements.length:0));try{var a;if(console.log("[PDF Builder] ðŸ” Checking React availability..."),!i||!s)throw new Error("React not available for PDF Editor");if(console.log("[PDF Builder] âœ… React available"),console.log("[PDF Builder] ðŸ” Checking PDFEditor component..."),!Xe)throw new Error("PDFEditor component not available");console.log("[PDF Builder] âœ… PDFEditor component available"),console.log("[PDF Builder] ðŸ” Finding container element...");var o=document.getElementById(e);if(!o)throw new Error("Container element '"+e+"' not found");console.log("[PDF Builder] âœ… Container found:",o),console.log("[PDF Builder] ðŸŽ¨ Preparing React element for PDF Editor...");var n=window.pdfBuilderCanvasSettings||(null===(a=window.pdfBuilderData)||void 0===a?void 0:a.canvasSettings)||{};console.log("[PDF Builder] ðŸŽ¨ Canvas settings from global:",n),Object.keys(n).length>0&&setTimeout(function(){alert("Canvas Settings: "+JSON.stringify(n,null,2))},1e3);var l=i.createElement(Xe,{initialElements:r.initialElements||[],onSave:r.onSave||function(){},templateName:r.templateName||"",isNew:r.isNew||!1,templateId:r.templateId||null,canvasSettings:n});if(console.log("[PDF Builder] âœ… React element created for template:",r.templateName),console.log("[PDF Builder] ðŸ”§ Checking ReactDOM API..."),s.createRoot){console.log("[PDF Builder] âœ… Using React 18+ createRoot API");var c=s.createRoot(o);console.log("[PDF Builder] ðŸš€ Rendering PDF Editor with createRoot..."),c.render(l),console.log("[PDF Builder] âœ… PDF Editor rendered successfully with createRoot")}else console.log("[PDF Builder] âš ï¸ Using legacy render API"),s.render(l,o),console.log("[PDF Builder] âœ… PDF Editor rendered successfully with legacy render");return console.log("[PDF Builder] ðŸŽ‰ ===== PDF EDITOR INIT SUCCESS ====="),console.log("[PDF Builder] ðŸ“Š Template loaded in editor:",r.templateName,"with",r.initialElements.length,"elements"),(window.pdfBuilderDebug||"localhost"===window.location.hostname)&&(console.log("PDF Editor initialized successfully in container:",e),console.log("Initial elements count:",(r.initialElements||[]).length)),!0}catch(e){throw console.error("[PDF Builder] âŒ PDF Editor init failed:",e),console.error("[PDF Builder] ðŸ“‹ Failed options:",r),e}};else{console.error("Warning - pdfBuilderPro object not found, creating new one");var Ge={version:"2.0.0",React:i,ReactDOM:s,editors:new Map,init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(window.pdfBuilderDebug||"localhost"===window.location.hostname)&&console.log("PDF Builder Pro init called for",e,"with options:",t);try{if(!i||!s)throw new Error("React not available for PDF Editor");var r=document.getElementById(e);if(!r)throw new Error("Container element '"+e+"' not found");return s.render(i.createElement(Xe,{initialElements:t.initialElements||[],onSave:function(e){console.log("PDF Editor saved elements:",e)},templateName:t.templateName||"",isNew:t.isNew||!1}),r),!0}catch(e){return console.error("PDF Builder Pro init failed:",e),!1}},destroy:function(e){console.log("PDF Builder Pro destroy called for",e)},getData:function(e){return null},getElements:function(){return[]}};window.pdfBuilderPro=Ge,window.PDFBuilderPro=Ge,window.PDFBuilder={PDFEditor:Xe,React:i,ReactDOM:s},window.initializePDFBuilderPro=function(){return Ge}}window.pdfBuilderReact=window.pdfBuilderReact||{},window.pdfBuilderReact.initPDFBuilderReact=function(){if(console.log("[PDF Builder] ===== initPDFBuilderReact CALLED ====="),console.log("[PDF Builder] ðŸ“‹ Editor initialization started"),console.log("[PDF Builder] ðŸ” Checking for template data..."),!window.pdfBuilderData)return console.error("[PDF Builder] âŒ pdfBuilderData not found on window"),console.log("[PDF Builder] Available window keys with pdfBuilder:",Object.keys(window).filter(function(e){return e.includes("pdfBuilder")})),!1;if(console.log("[PDF Builder] âœ… pdfBuilderData found:",window.pdfBuilderData),console.log("[PDF Builder] pdfBuilderData keys:",Object.keys(window.pdfBuilderData)),console.log("[PDF Builder] ðŸ“„ Template ID from data:",window.pdfBuilderData.templateId),console.log("[PDF Builder] ðŸ“ Template Name from data:",window.pdfBuilderData.templateName),window.pdfBuilderData.templateId&&"0"!==window.pdfBuilderData.templateId){console.log("[PDF Builder] ðŸŽ¯ Template ID detected:",window.pdfBuilderData.templateId),console.log("[PDF Builder] ðŸ”„ Starting AJAX template loading process..."),console.log("[PDF Builder] ðŸ“¡ AJAX URL:",window.pdfBuilderData.ajaxUrl),console.log("[PDF Builder] ðŸ” Nonce:",window.pdfBuilderData.nonce);var e=new FormData;return e.append("action","pdf_builder_load_template"),e.append("template_id",window.pdfBuilderData.templateId),e.append("nonce",window.pdfBuilderData.nonce||""),console.log("[PDF Builder] ðŸ“¤ Sending AJAX request for template:",window.pdfBuilderData.templateId),fetch(window.pdfBuilderData.ajaxUrl,{method:"POST",body:e}).then(function(e){return console.log("[PDF Builder] ðŸ“¥ AJAX response received, status:",e.status),e.json()}).then(function(e){if(console.log("[PDF Builder] ðŸ“Š AJAX response parsed:",e),console.log("[PDF Builder] âœ…/âŒ Success flag:",e.success),e.success){var t,r;console.log("[PDF Builder] âœ… Template loaded successfully:",e.data),console.log("[PDF Builder] ðŸ“‹ Template data structure:",Le(e.data.template),e.data.template),console.log("[PDF Builder] ðŸ§© Template elements:",null===(t=e.data.template)||void 0===t?void 0:t.elements),console.log("[PDF Builder] ðŸ”¢ Template elements count:",(null===(r=e.data.template)||void 0===r||null===(r=r.elements)||void 0===r?void 0:r.length)||0),console.log("[PDF Builder] ðŸ“› Template name:",e.data.name),console.log("[PDF Builder] ðŸ†” Template ID:",e.data.id);var a=e.data.template.elements;console.log("[PDF Builder] ðŸ”„ Processing template elements..."),console.log("[PDF Builder] ðŸ“Š Elements type before processing:",Le(a)),Array.isArray(a)?console.log("[PDF Builder] âœ… Elements already in array format"):"object"===Le(a)&&null!==a?(console.log("[PDF Builder] ðŸ”„ Converting object elements to array (template loading fix)"),console.log("[PDF Builder] ðŸ“‹ Object keys:",Object.keys(a)),a=Object.values(a),console.log("[PDF Builder] âœ… Conversion completed, new length:",a.length)):(console.log("[PDF Builder] âš ï¸ No valid elements found, using empty array"),a=[]);var o={initialElements:a,templateName:e.data.name||window.pdfBuilderData.templateName||"",isNew:!1,templateId:window.pdfBuilderData.templateId};return console.log("[PDF Builder] ðŸŽ¯ Prepared options with loaded template:",o),console.log("[PDF Builder] ðŸ“Š Initial elements type:",Le(o.initialElements),"length:",o.initialElements.length),console.log("[PDF Builder] ðŸš€ Calling window.pdfBuilderPro.init with template data..."),console.log("[PDF Builder] ðŸŽ¨ About to render PDF Editor with template:",o.templateName),window.pdfBuilderPro.init("pdf-builder-react-root",o)}console.error("[PDF Builder] âŒ Failed to load template:",e.data),console.log("[PDF Builder] ðŸ”„ Using fallback empty template...");var n={initialElements:[],templateName:window.pdfBuilderData.templateName||"",isNew:!0,templateId:window.pdfBuilderData.templateId};return console.log("[PDF Builder] ðŸŽ¯ Fallback options:",n),console.log("[PDF Builder] ðŸš€ Calling window.pdfBuilderPro.init with fallback data..."),window.pdfBuilderPro.init("pdf-builder-react-root",n)}).catch(function(e){console.error("[PDF Builder] âŒ AJAX error loading template:",e),console.log("[PDF Builder] ðŸ”„ Using fallback empty template after error...");var t={initialElements:[],templateName:window.pdfBuilderData.templateName||"",isNew:!0,templateId:window.pdfBuilderData.templateId};return console.log("[PDF Builder] ðŸŽ¯ Fallback options after error:",t),console.log("[PDF Builder] ðŸš€ Calling window.pdfBuilderPro.init with error fallback data..."),window.pdfBuilderPro.init("pdf-builder-react-root",t)}),!0}console.log("[PDF Builder] ðŸ“ No template ID found, creating new template"),console.log("[PDF Builder] ðŸ†• Template ID is:",window.pdfBuilderData.templateId);var t={initialElements:[],templateName:window.pdfBuilderData.templateName||"",isNew:!0,templateId:null};return console.log("[PDF Builder] ðŸŽ¯ Prepared options for new template:",t),console.log("[PDF Builder] ðŸš€ Calling window.pdfBuilderPro.init for new template..."),window.pdfBuilderPro.init("pdf-builder-react-root",t)}}catch(e){console.error("PDF Builder Pro: Main bundle failed to load:",e)}var Ye=window;for(var Ze in n)Ye[Ze]=n[Ze];n.__esModule&&Object.defineProperty(Ye,"__esModule",{value:!0})})();