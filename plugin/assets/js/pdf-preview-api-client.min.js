"use strict";(Object("undefined"!=typeof window?window:global).webpackChunkwp_pdf_builder_pro_v2=Object("undefined"!=typeof window?window:global).webpackChunkwp_pdf_builder_pro_v2||[]).push([[297],{179(e,t,r){r.r(t),function(){const e={ajaxUrl:window.ajaxurl||"/wp-admin/admin-ajax.php",nonce:window.pdfBuilderNonce||"",endpoint:"pdf_builder_generate_preview"};async function t(t,r={}){try{const n=t?.template_id||null,a={action:e.endpoint,nonce:e.nonce,template_data:JSON.stringify(t),format:r.format||"png",quality:r.quality||150};n&&(a.template_id=n);const i=await fetch(e.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a)});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.json();if(!o.success)throw new Error(o.error||"Erreur lors de la génération du PDF");return{success:!0,data:{image_url:o.data?.image_url||o.image_url,format:r.format||"png"}}}catch(e){throw new Error(`Erreur backend: ${e.message}`)}}window.pdfPreviewApiClient={generatePreview:function(e,r){t(e).then(e=>{r&&r(e)}).catch(e=>{r&&r({error:e.message})})}},window.pdfPreviewAPI={generateEditorPreview:async function(e,r={}){try{return await t(e,r)}catch(e){const t=function(e="png"){const t=document.createElement("canvas");t.width=800,t.height=600;const r=t.getContext("2d");return r?(r.fillStyle="#ffffff",r.fillRect(0,0,t.width,t.height),r.strokeStyle="#cccccc",r.lineWidth=2,r.strokeRect(0,0,t.width,t.height),r.fillStyle="#666666",r.font="bold 24px Arial",r.textAlign="center",r.fillText("Aperçu PDF",t.width/2,t.height/2-50),r.font="16px Arial",r.fillText("Image placeholder (fallback)",t.width/2,t.height/2+20),t.toDataURL("jpg"===e?"image/jpeg":"image/png")):null}(r.format||"png");if(t)return{success:!0,data:{image_url:t,format:r.format||"png",fallback:!0}};throw e}},generateOrderPreview:async function(e,t,r={}){const n={...e,order_id:t};return this.generateEditorPreview(n,r)}}}(jQuery)}},e=>{var t=e(e.s=179),r=window;for(var n in t)r[n]=t[n];t.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})}]);