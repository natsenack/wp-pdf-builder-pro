{"version":3,"file":"js/tabs-root-monitor.bundle.js","mappings":";;;;;;;;;;;AAAA;AACA;;AAEA;AACA;AAEA;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAEA;AACA","sources":["webpack://pdfBuilderReact/./assets/js/tabs-root-monitor.js"],"sourcesContent":["(function() {\r\n    'use strict';\r\n\r\n    // Root monitor for debugging tab navigation conflicts\r\n    // Enables: logging of add/remove event listeners, stopPropagation calls, and click events\r\n\r\n    if (typeof window === 'undefined') return;\r\n\r\n    // Config flag - enable via window.PDF_BUILDER_CONFIG.debug = true\r\n    const DEBUG = !!(window.PDF_BUILDER_CONFIG && window.PDF_BUILDER_CONFIG.debug);\r\n\r\n    window.pdfBuilderRootLog = window.pdfBuilderRootLog || [];\r\n    function logRoot(message, data) {\r\n        try {\r\n            const ts = new Date().toISOString();\r\n            const entry = { ts: ts, msg: message, data: data };\r\n            window.pdfBuilderRootLog.push(entry);\r\n        } catch (e) {}\r\n    }\r\n\r\n    // Helper to stringify element for logs\r\n    function elementSummary(el) {\r\n        if (!el) return null;\r\n        try {\r\n            return {\r\n                tag: el.tagName,\r\n                id: el.id || null,\r\n                classes: el.className || null,\r\n                dataTab: el.dataset ? el.dataset.tab : null,\r\n                outer: el.outerHTML ? el.outerHTML.slice(0, 200) + (el.outerHTML.length > 200 ? '...' : '') : null\r\n            };\r\n        } catch (e) {\r\n            return { tag: el.tagName };\r\n        }\r\n    }\r\n\r\n    // Patch addEventListener/removeEventListener\r\n    (function() {\r\n        if (!EventTarget.prototype.__pb_addEventListenerPatched) {\r\n            const origAdd = EventTarget.prototype.addEventListener;\r\n            EventTarget.prototype.addEventListener = function(type, listener, options) {\r\n                try {\r\n                    const el = this;\r\n                    if (type === 'click' || type === 'keydown' || type === 'keyup' || type === 'hashchange' || type === 'change') {\r\n                        // Collect a stack trace\r\n                        const stack = (new Error()).stack.split('\\n').slice(1,6).map(s => s.trim());\r\n                        logRoot('addEventListener: ' + type, {\r\n                            target: elementSummary(el),\r\n                            options: options,\r\n                            stack: stack\r\n                        });\r\n                    }\r\n                } catch(e){}\r\n                return origAdd.apply(this, arguments);\r\n            };\r\n            const origRemove = EventTarget.prototype.removeEventListener;\r\n            EventTarget.prototype.removeEventListener = function(type, listener, options) {\r\n                try {\r\n                    const el = this;\r\n                    if (type === 'click' || type === 'keydown' || type === 'keyup') {\r\n                        logRoot('removeEventListener: ' + type, {\r\n                            target: elementSummary(el),\r\n                            options: options\r\n                        });\r\n                    }\r\n                } catch(e){}\r\n                return origRemove.apply(this, arguments);\r\n            };\r\n            EventTarget.prototype.__pb_addEventListenerPatched = true;\r\n        }\r\n    })();\r\n\r\n    // Patch stopImmediatePropagation/stopPropagation to log when used\r\n    (function() {\r\n        if (!Event.prototype.__pb_stopPatched) {\r\n            const origStopImmediate = Event.prototype.stopImmediatePropagation;\r\n            Event.prototype.stopImmediatePropagation = function() {\r\n                try {\r\n                    logRoot('stopImmediatePropagation called', {\r\n                        type: this.type,\r\n                        target: elementSummary(this.target),\r\n                        currentTarget: elementSummary(this.currentTarget),\r\n                        stack: (new Error()).stack.split('\\n').slice(1,6).map(s=>s.trim())\r\n                    });\r\n                } catch(e){}\r\n                return origStopImmediate.apply(this, arguments);\r\n            };\r\n\r\n            const origStop = Event.prototype.stopPropagation;\r\n            Event.prototype.stopPropagation = function() {\r\n                try {\r\n                    logRoot('stopPropagation called', {\r\n                        type: this.type,\r\n                        target: elementSummary(this.target),\r\n                        currentTarget: elementSummary(this.currentTarget),\r\n                        stack: (new Error()).stack.split('\\n').slice(1,6).map(s=>s.trim())\r\n                    });\r\n                } catch(e){}\r\n                return origStop.apply(this, arguments);\r\n            };\r\n\r\n            Event.prototype.__pb_stopPatched = true;\r\n        }\r\n    })();\r\n\r\n    // Global click/keyboard capturing observer to track events and phases\r\n    (function() {\r\n        function globalClickHandler(e) {\r\n            try {\r\n                logRoot('CLICK event captured', {\r\n                    type: e.type,\r\n                    target: elementSummary(e.target),\r\n                    currentTarget: elementSummary(e.currentTarget),\r\n                    eventPhase: e.eventPhase\r\n                });\r\n            } catch(e){}\r\n        }\r\n        function globalKeyHandler(e) {\r\n            try {\r\n                logRoot('KEY event captured', { type: e.type, key: e.key, target: elementSummary(e.target) });\r\n            } catch(e){}\r\n        }\r\n\r\n        document.addEventListener('click', globalClickHandler, true);\r\n        document.addEventListener('keydown', globalKeyHandler, true);\r\n\r\n        // Also a capture on body to detect when nav tabs are clicked/jumped\r\n        document.addEventListener('click', function(e) {\r\n            try {\r\n                const anchor = e.target.closest && e.target.closest('.nav-tab');\r\n                if (anchor) {\r\n                    logRoot('Nav tab clicked (capture): ' + (anchor.getAttribute('data-tab') || anchor.id || 'unknown'), elementSummary(anchor));\r\n                }\r\n            } catch(e){}\r\n        }, true);\r\n    })();\r\n\r\n    // Expose a helper function to dump collected log (and optionally print to server in future)\r\n    window.pdfBuilderRootLogDump = function() {\r\n        try {\r\n            console.group('PDF Builder Root Log Dump - ' + window.pdfBuilderRootLog.length + ' entries');\r\n            window.pdfBuilderRootLog.forEach(function(entry) {\r\n                console.info(entry.ts, entry.msg, entry.data || '');\r\n            });\r\n            console.groupEnd();\r\n        } catch(e) {\r\n            // Error logging disabled\r\n        }\r\n        return window.pdfBuilderRootLog;\r\n    };\r\n\r\n    logRoot('tabs-root-monitor initialized (DEBUG=' + DEBUG + ')');\r\n})();\r\n"],"names":[],"sourceRoot":""}