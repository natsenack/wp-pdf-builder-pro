/*! For license information please see 187.js.LICENSE.txt */
"use strict";(self.webpackChunkwp_pdf_builder_pro=self.webpackChunkwp_pdf_builder_pro||[]).push([[187],{1187:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(1609),a=n.n(r),o=n(2685),i=n(5571);function l(){var e={A4:{width:595,height:842},A3:{width:842,height:1191},Letter:{width:612,height:792},Legal:{width:612,height:1008}},t=e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A4"]||e.A4,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:96)/72;return{width:Math.round(t.width*n),height:Math.round(t.height*n)}}var c=["type","x","y","content"];function s(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return d(s,"_invoke",function(n,r,a){var o,l,c,s=0,d=a||[],u=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,l=0,c=e,f.n=n,i}};function m(n,r){for(l=n,c=r,t=0;!u&&s&&!a&&t<d.length;t++){var a,o=d[t],m=f.p,p=o[2];n>3?(a=p===r)&&(c=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(l=0,f.v=r,f.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,l=0))}if(a||n>1)return i;throw u=!0,r}return function(a,d,p){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,p),l=d,c=p;(t=l<2?e:c)||!u;){o||(l?l<3?(l>1&&(f.n=-1),m(l,c)):f.n=c:f.v=c);try{if(s=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(u=f.n<0)?c:n.call(r,f))!==i)break}catch(t){o=e,l=1,c=t}finally{s=1}}return{value:t,done:u}}}(n,a,o),!0),s}var i={};function l(){}function c(){}function u(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(d(t={},r,function(){return this}),t),m=u.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,d(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return c.prototype=u,d(m,"constructor",u),d(u,"constructor",c),c.displayName="GeneratorFunction",d(u,a,"GeneratorFunction"),d(m),d(m,a,"Generator"),d(m,r,function(){return this}),d(m,"toString",function(){return"[object Generator]"}),(s=function(){return{w:o,m:p}})()}function d(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}d=function(e,t,n,r){function o(t,n){d(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},d(e,t,n,r)}function u(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,l,"next",e)}function l(e){u(o,r,a,i,l,"throw",e)}i(void 0)})}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){e.element,e.previewData,e.mode,e.canvasScale;var t,n,o=(0,r.useRef)(null),d=(0,i.e)("PDFRenderer").measureOperation,u=(t=(0,r.useState)("idle"),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=u[0],h=u[1];(0,r.useEffect)(function(){pageData&&o.current&&(h("rendering"),d("PDF Page Render",f(s().m(function e(){var t,n,r,a,i;return s().w(function(e){for(;;)switch(e.n){case 0:try{t=o.current,n=t.getContext("2d"),r=l("A4",96),a=r.width*scale,i=r.height*scale,t.width=a,t.height=i,n.fillStyle="white",n.fillRect(0,0,a,i),n.save(),n.scale(scale,scale),v(n,pageData,r.width,r.height),n.restore(),h("complete")}catch(e){h("error")}case 1:return e.a(2)}},e)}))))},[pageData,scale,d]);var v=function(e,t,n,r){e.fillStyle="#ffffff",e.fillRect(0,0,n,r),e.strokeStyle="#e0e0e0",e.lineWidth=1,e.strokeRect(10,10,n-20,r-20),t.elements&&t.elements.forEach(function(t,n){b(e,t,n)}),e.fillStyle="#666666",e.font="12px Arial",e.textAlign="center",e.fillText("Page ".concat(t.number||1),n/2,r-20)},b=function(e,t,n){var r=t.type,a=t.x,o=void 0===a?0:a,i=t.y,l=void 0===i?0:i,s=t.content,d=void 0===s?"":s,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,c);switch(e.save(),r){case"text":e.fillStyle=u.color||"#000000",e.font="".concat(u.fontSize||12,"px ").concat(u.fontFamily||"Arial"),e.textAlign=u.textAlign||"left",e.fillText(d,o,l);break;case"rectangle":e.fillStyle=u.fillColor||"#cccccc",e.strokeStyle=u.strokeColor||"#000000",e.lineWidth=u.strokeWidth||1,u.fill&&e.fillRect(o,l,u.width||100,u.height||50),u.stroke&&e.strokeRect(o,l,u.width||100,u.height||50);break;case"line":e.strokeStyle=u.color||"#000000",e.lineWidth=u.width||1,e.beginPath(),e.moveTo(o,l),e.lineTo(u.x2||o+100,u.y2||l),e.stroke();break;default:e.fillStyle="#ffcccc",e.fillRect(o,l,50,20),e.fillStyle="#000000",e.font="10px Arial",e.fillText("".concat(r),o+5,l+15)}e.restore()};return a().createElement("div",{className:"pdf-renderer ".concat(className)},a().createElement("canvas",{ref:o,className:"pdf-canvas ".concat(p),style:{maxWidth:"100%",height:"auto",border:"error"===p?"2px solid #ff6b6b":"1px solid #e0e0e0",borderRadius:"4px"}}),"rendering"===p&&a().createElement("div",{className:"pdf-renderer-loading"},a().createElement("div",{className:"pdf-spinner"}),a().createElement("span",null,"Rendu en cours...")),"error"===p&&a().createElement("div",{className:"pdf-renderer-error"},a().createElement("span",null,"Erreur de rendu")))}const h=a().memo(p);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){return(t=function(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=e.elements,n=void 0===t?[]:t,o=e.scale,c=void 0===o?1:o,s=e.interactive,d=void 0!==s&&s,u=e.className,f=void 0===u?"":u,m=(0,r.useRef)(null),p=(0,r.useRef)(null),h=(0,i.e)("CanvasRenderer").measureOperation,v=l("A4",96),b=(0,r.useCallback)(function(e,t,n){e.fillStyle="white",e.fillRect(0,0,v.width*n,v.height*n),e.save(),e.scale(n,n),e.strokeStyle="#e0e0e0",e.lineWidth=1/n,e.strokeRect(10,10,v.width-20,v.height-20),e.strokeStyle="#f0f0f0",e.setLineDash([5,5]),e.strokeRect(50,50,v.width-100,v.height-100),e.setLineDash([]),t.forEach(function(t,r){y(e,t,r,n)}),e.restore()},[v]),y=function(e,t,n,r){var a=t.type,o=t.x,i=void 0===o?0:o,l=t.y,c=void 0===l?0:l,s=t.width,u=void 0===s?100:s,f=t.height,m=void 0===f?50:f,p=t.content,h=void 0===p?"":p,v=t.properties,b=void 0===v?{}:v;switch(e.save(),e.translate(i,c),a){case"text":x(e,g({content:h},b));break;case"dynamic-text":E(e,g({content:h},b));break;case"rectangle":w(e,g({width:u,height:m},b));break;case"image":S(e,g({width:u,height:m},b));break;case"line":k(e,g({width:u,height:m},b));break;case"product_table":N(e,g({width:u,height:m},b));break;default:A(e,{type:a,width:u,height:m})}d&&t.selected&&(e.strokeStyle="#007cba",e.lineWidth=2/r,e.strokeRect(-2,-2,u+4,m+4)),e.restore()},x=function(e,t){var n=t.content,r=t.fontSize,a=void 0===r?12:r,o=t.fontFamily,i=void 0===o?"Arial":o,l=t.color,c=void 0===l?"#000000":l,s=t.textAlign,d=void 0===s?"left":s;e.fillStyle=c,e.font="".concat(a,"px ").concat(i),e.textAlign=d,e.fillText(n,0,a)},E=function(e,t){e.fillStyle="#0066cc",x(e,t),e.strokeStyle="#0066cc",e.lineWidth=1,e.strokeRect(-2,-2,t.width+4,t.height+4)},w=function(e,t){var n=t.width,r=t.height,a=t.fillColor,o=void 0===a?"#cccccc":a,i=t.strokeColor,l=void 0===i?"#000000":i,c=t.strokeWidth,s=void 0===c?1:c,d=t.fill,u=void 0===d||d,f=t.stroke,m=void 0===f||f;u&&(e.fillStyle=o,e.fillRect(0,0,n,r)),m&&(e.strokeStyle=l,e.lineWidth=s,e.strokeRect(0,0,n,r))},S=function(e,t){var n=t.width,r=t.height,a=t.src,o=t.alt,i=void 0===o?"Image":o;if(a){var l=new Image;l.onload=function(){e.drawImage(l,0,0,n,r)},l.src=a}else e.fillStyle="#f0f0f0",e.fillRect(0,0,n,r),e.fillStyle="#666666",e.font="12px Arial",e.textAlign="center",e.fillText(i,n/2,r/2)},k=function(e,t){var n=t.x2,r=void 0===n?100:n,a=t.y2,o=void 0===a?0:a,i=t.color,l=void 0===i?"#000000":i,c=t.lineWidth,s=void 0===c?1:c;e.strokeStyle=l,e.lineWidth=s,e.beginPath(),e.moveTo(0,0),e.lineTo(r,o),e.stroke()},N=function(e,t){var n=t.width,r=t.height,a=t.products,o=void 0===a?[]:a,i=20,l=n/4;e.fillStyle="#f5f5f5",e.fillRect(0,0,n,i),e.fillStyle="#333333",e.font="12px Arial",e.textAlign="left",["Produit","QtÃ©","Prix","Total"].forEach(function(t,n){e.fillText(t,n*l+5,15)}),o.slice(0,Math.floor((r-i)/i)).forEach(function(t,r){var a=(r+1)*i;e.fillStyle=r%2==0?"#ffffff":"#f9f9f9",e.fillRect(0,a,n,i),e.fillStyle="#333333",e.fillText(t.name||"Produit",5,a+15),e.textAlign="center",e.fillText(t.qty||"1",l+l/2,a+15),e.fillText(t.price||"0â‚¬",2*l+l/2,a+15),e.fillText(t.total||"0â‚¬",3*l+l/2,a+15),e.textAlign="left"}),e.strokeStyle="#dddddd",e.lineWidth=1;for(var c=0;c<=o.length+1;c++)e.beginPath(),e.moveTo(0,c*i),e.lineTo(n,c*i),e.stroke();for(var s=0;s<=4;s++)e.beginPath(),e.moveTo(s*l,0),e.lineTo(s*l,r),e.stroke()},A=function(e,t){var n=t.type,r=t.width,a=t.height;e.fillStyle="#ffebee",e.fillRect(0,0,r,a),e.fillStyle="#c62828",e.font="10px Arial",e.textAlign="center",e.fillText("[".concat(n,"]"),r/2,a/2)};return(0,r.useEffect)(function(){m.current&&h("Canvas Render",function(){var e=m.current,t=e.getContext("2d"),r=v.width*c,a=v.height*c;e.width=r,e.height=a,b(t,n,c)})},[n,c,b,h,v]),(0,r.useEffect)(function(){var e=function(){if(p.current&&m.current){var e=p.current;m.current,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=t.width-2*n,a=t.height-2*n,o=r/e.width,i=a/e.height,l=Math.min(o,i,1);Math.max(.1,Math.min(2,l))}({width:v.width,height:v.height},{width:e.clientWidth,height:e.clientHeight})}};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}},[v]),a().createElement("div",{ref:p,className:"canvas-renderer ".concat(f)},a().createElement("canvas",{ref:m,className:"canvas-renderer-canvas",style:{maxWidth:"100%",height:"auto",border:"1px solid #e0e0e0",borderRadius:"4px",cursor:d?"crosshair":"default"}}),d&&a().createElement("div",{className:"canvas-renderer-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}}))}const E=a().memo(x);var w=n(7921),S=n(8844);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function N(e){var t,n,l=e.productId,c=e.templateData,s=e.className,d=void 0===s?"":s,u=e.compact,f=void 0===u||u,m=e.showControls,p=void 0===m||m,v=(0,o.$E)(),b=v.state,g=b.loading,y=b.error,x=b.data,N=v.actions,A=N.loadPreview,O=N.clearPreview,P=(0,i.e)("MetaboxMode").measureOperation,j=(t=(0,r.useState)("preview"),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),T=j[0],C=j[1];(0,r.useEffect)(function(){if(l&&c){var e=measureLoadTime("loadMetaboxPreview");A({type:"metabox",productId:l,templateData:c,mode:"compact"}),e.end()}return function(){O()}},[l,c,A,O,P]);var R=(0,r.useCallback)(function(e){C(e)},[]);return(0,r.useEffect)(function(){var e=document.createElement("style");return e.textContent="\n    .phase8-badge {\n      position: fixed !important;\n      top: 50px !important;\n      right: 20px !important;\n      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%) !important;\n      color: white !important;\n      padding: 8px 16px !important;\n      border-radius: 20px !important;\n      font-size: 14px !important;\n      font-weight: bold !important;\n      box-shadow: 0 4px 12px rgba(255,107,107,0.4) !important;\n      z-index: 999999 !important;\n      border: 3px solid white !important;\n      animation: phase8-pulse 2s infinite !important;\n    }\n    @keyframes phase8-pulse {\n      0% { transform: scale(1); }\n      50% { transform: scale(1.05); }\n      100% { transform: scale(1); }\n    }\n    .phase8-metrics {\n      font-size: 12px !important;\n      color: #ff6b6b !important;\n      background: #ffeaea !important;\n      padding: 4px 8px !important;\n      border-radius: 12px !important;\n      margin-left: 8px !important;\n      border: 1px solid #ff6b6b !important;\n      font-weight: bold !important;\n    }\n    .metabox-mode {\n      border: 3px solid #ff6b6b !important;\n      position: relative !important;\n    }\n  ",document.head.appendChild(e),function(){document.head.removeChild(e)}},[]),(0,r.useEffect)(function(){var e=setTimeout(function(){},1e3);return function(){return clearTimeout(e)}},[g,y,templateElements]),g?a().createElement("div",{className:"metabox-mode loading ".concat(d)},a().createElement("div",{className:"metabox-loading"},a().createElement("div",{className:"metabox-spinner"}),a().createElement("span",null,"Chargement de l'aperÃ§u..."))):y?a().createElement("div",{className:"metabox-mode error ".concat(d)},a().createElement("div",{className:"metabox-error"},a().createElement("span",{className:"error-icon"},"âš ï¸"),a().createElement("span",{className:"error-message"},"Erreur lors du chargement de l'aperÃ§u: ",y.message),a().createElement("button",{className:"error-retry-btn",onClick:function(){return A({type:"metabox",productId:l,templateData:c,mode:"compact"})}},"RÃ©essayer"))):a().createElement("div",{className:"metabox-mode ".concat(f?"compact":""," ").concat(d)},a().createElement("div",{style:{position:"fixed",top:"20px",left:"20px",background:"red",color:"white",padding:"10px",borderRadius:"10px",fontSize:"16px",fontWeight:"bold",zIndex:999999,border:"3px solid yellow"}},"ðŸ”¥ PHASE 8 ACTIVE - ",(new Date).toLocaleTimeString()),a().createElement("div",{className:"phase8-badge"},"ðŸš€ Phase 8 Active - ",templateElements&&templateElements.length||0," Ã©lÃ©ments"),a().createElement("div",{className:"metabox-header"},a().createElement("div",{className:"metabox-tabs"},a().createElement("button",{className:"metabox-tab ".concat("preview"===T?"active":""),onClick:function(){return R("preview")}},"AperÃ§u"),a().createElement("button",{className:"metabox-tab ".concat("settings"===T?"active":""),onClick:function(){return R("settings")}},"ParamÃ¨tres"),a().createElement("button",{className:"metabox-tab ".concat("export"===T?"active":""),onClick:function(){return R("export")}},"Export")),a().createElement("div",{className:"metabox-actions"},a().createElement("button",{className:"metabox-action-btn",title:"Actualiser"},"ðŸ”„"),a().createElement("button",{className:"metabox-action-btn",title:"Plein Ã©cran"},"â›¶"),a().createElement("div",{className:"phase8-metrics"},"âš¡ ",templateElements&&templateElements.length||0," Ã©lÃ©ments"))),a().createElement("div",{className:"metabox-content"},"preview"===T&&a().createElement("div",{className:"metabox-preview"},a().createElement("div",{className:"metabox-preview-canvas"},(x&&x.elements&&x.elements.map)(function(e){switch(e.type){case"pdf":return a().createElement(h,{key:e.id,element:e,previewData:x,mode:"metabox"});case"canvas":return a().createElement(E,{key:e.id,element:e,previewData:x,mode:"metabox"});case"image":case"company_logo":return a().createElement(w.d,{key:e.id,element:e,previewData:x,mode:"metabox"});default:return null}})),p&&a().createElement("div",{className:"metabox-controls"},a().createElement(S.A,{compact:!0}))),"settings"===T&&a().createElement("div",{className:"metabox-settings"},a().createElement("div",{className:"settings-group"},a().createElement("h4",null,"ParamÃ¨tres d'aperÃ§u"),a().createElement("div",{className:"setting-item"},a().createElement("label",null,a().createElement("input",{type:"checkbox",defaultChecked:!0}),"Afficher les marges")),a().createElement("div",{className:"setting-item"},a().createElement("label",null,a().createElement("input",{type:"checkbox",defaultChecked:!0}),"Mode haute qualitÃ©")),a().createElement("div",{className:"setting-item"},a().createElement("label",null,a().createElement("input",{type:"checkbox"}),"AperÃ§u en temps rÃ©el"))),a().createElement("div",{className:"settings-group"},a().createElement("h4",null,"ParamÃ¨tres du template"),a().createElement("div",{className:"setting-item"},a().createElement("label",null,"Taille de page:"),a().createElement("select",{defaultValue:"a4"},a().createElement("option",{value:"a4"},"A4"),a().createElement("option",{value:"letter"},"Letter"),a().createElement("option",{value:"legal"},"Legal"))),a().createElement("div",{className:"setting-item"},a().createElement("label",null,"Orientation:"),a().createElement("select",{defaultValue:"portrait"},a().createElement("option",{value:"portrait"},"Portrait"),a().createElement("option",{value:"landscape"},"Paysage"))))),"export"===T&&a().createElement("div",{className:"metabox-export"},a().createElement("div",{className:"export-options"},a().createElement("button",{className:"export-btn export-pdf"},"ðŸ“„ Exporter en PDF"),a().createElement("button",{className:"export-btn export-png"},"ðŸ–¼ï¸ Exporter en PNG"),a().createElement("button",{className:"export-btn export-jpeg"},"ðŸ“· Exporter en JPEG")),a().createElement("div",{className:"export-settings"},a().createElement("div",{className:"setting-item"},a().createElement("label",null,a().createElement("input",{type:"checkbox",defaultChecked:!0}),"Inclure les marges")),a().createElement("div",{className:"setting-item"},a().createElement("label",null,"RÃ©solution:"),a().createElement("select",{defaultValue:"high"},a().createElement("option",{value:"low"},"Basse (72 DPI)"),a().createElement("option",{value:"medium"},"Moyenne (150 DPI)"),a().createElement("option",{value:"high"},"Haute (300 DPI)")))))))}const A=a().memo(N)},7921:(e,t,n)=>{n.d(t,{d:()=>l});var r=n(1609),a=n.n(r);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e){var t=e.element,n=e.previewData,i=(e.mode,e.canvasScale),l=void 0===i?1:i,c=o((0,r.useState)(!0),2),s=c[0],d=c[1],u=o((0,r.useState)(!1),2),f=u[0],m=u[1],p=t.x,h=void 0===p?0:p,v=t.y,b=void 0===v?0:v,g=t.width,y=void 0===g?150:g,x=t.height,E=void 0===x?80:x,w=t.imageUrl,S=void 0===w?"":w,k=t.alt,N=void 0===k?"Image":k,A=t.objectFit,O=void 0===A?"contain":A,P=t.backgroundColor,j=void 0===P?"transparent":P,T=t.borderWidth,C=void 0===T?0:T,R=t.borderColor,I=void 0===R?"#000000":R,D=t.borderRadius,W=void 0===D?0:D,_=t.opacity,z=void 0===_?1:_,M=t.rotation,L=void 0===M?0:M,F=t.scale,G=void 0===F?1:F,U=t.visible,V=void 0===U||U,$=t.shadow,H=void 0!==$&&$,q=t.shadowColor,B=void 0===q?"#000000":q,J=t.shadowOffsetX,Q=void 0===J?2:J,X=t.shadowOffsetY,Y=void 0===X?2:X,K=t.brightness,Z=void 0===K?100:K,ee=t.contrast,te=void 0===ee?100:ee,ne=t.saturate,re=void 0===ne?100:ne,ae=(n["".concat(t.type,"_").concat(t.id)]||{}).imageUrl||S,oe={position:"absolute",left:"".concat(h*l,"px"),top:"".concat(b*l,"px"),width:"".concat(y*l,"px"),height:"".concat(E*l,"px"),backgroundColor:j,border:C>0?"".concat(C,"px solid ").concat(I):"none",borderRadius:"".concat(W,"px"),opacity:z,display:V?"flex":"none",alignItems:"center",justifyContent:"center",boxSizing:"border-box",overflow:"hidden",transform:"rotate(".concat(L,"deg) scale(").concat(G,")"),transformOrigin:"top left",boxShadow:H?"".concat(Q,"px ").concat(Y,"px 4px ").concat(B):"none"},ie={width:"100%",height:"100%",objectFit:O,borderRadius:C>0?"0":"".concat(W,"px"),filter:"brightness(".concat(Z,"%) contrast(").concat(te,"%) saturate(").concat(re,"%)"),display:s&&!f?"block":"none"},le={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa",border:"2px dashed #dee2e6",borderRadius:"".concat(W,"px"),color:"#6c757d",fontSize:"12px",textAlign:"center",padding:"8px",boxSizing:"border-box"};return a().createElement("div",{className:"preview-element preview-image-element",style:oe,"data-element-id":t.id,"data-element-type":t.type},ae&&!f?a().createElement("img",{src:ae,alt:N,style:ie,onLoad:function(){d(!0),m(!1)},onError:function(){d(!1),m(!0),console.warn("Failed to load image: ".concat(ae))}}):null,!ae||f?a().createElement("div",{style:le},a().createElement("div",null,a().createElement("div",{style:{fontSize:"16px",marginBottom:"4px"}},"ðŸ“·"),a().createElement("div",null,"company_logo"===t.type?"Logo":"Image"),f&&a().createElement("div",{style:{fontSize:"10px",marginTop:"4px",color:"#dc3545"}},"Erreur de chargement"))):null)}}}]);