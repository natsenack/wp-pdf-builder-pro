/*! For license information please see 483.js.LICENSE.txt */
(window.webpackChunkpdfBuilderReact=window.webpackChunkpdfBuilderReact||[]).push([[483],{411:()=>{function _regeneratorValues(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(_typeof(e)+" is not iterable")}function _regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function i(r,n,a,u){var s=Object.create((n&&n.prototype instanceof Generator?n:Generator).prototype);return _regeneratorDefine2(s,"_invoke",function(r,n,a){var u,s,l,m=0,p=a||[],h=!1,y={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return u=t,s=0,l=e,y.n=r,c}};function d(r,n){for(s=r,l=n,t=0;!h&&m&&!a&&t<p.length;t++){var a,u=p[t],_=y.p,v=u[2];r>3?(a=v===n)&&(l=u[(s=u[4])?5:(s=3,3)],u[4]=u[5]=e):u[0]<=_&&((a=r<2&&_<u[1])?(s=0,y.v=n,y.n=u[1]):_<v&&(a=r<3||u[0]>n||n>v)&&(u[4]=r,u[5]=n,y.n=v,s=0))}if(a||r>1)return c;throw h=!0,n}return function(a,p,_){if(m>1)throw TypeError("Generator is already running");for(h&&1===p&&d(p,_),s=p,l=_;(t=s<2?e:l)||!h;){u||(s?s<3?(s>1&&(y.n=-1),d(s,l)):y.n=l:y.v=l);try{if(m=2,u){if(s||(a="next"),t=u[a]){if(!(t=t.call(u,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=u.return)&&t.call(u),s<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),s=1);u=e}else if((t=(h=y.n<0)?l:r.call(n,y))!==c)break}catch(t){u=e,s=1,l=t}finally{m=1}}return{value:t,done:h}}}(r,a,u),!0),s}var c={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,function(){return this}),t),s=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,a,"GeneratorFunction")),e.prototype=Object.create(s),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(s,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,a,"GeneratorFunction"),_regeneratorDefine2(s),_regeneratorDefine2(s,a,"Generator"),_regeneratorDefine2(s,n,function(){return this}),_regeneratorDefine2(s,"toString",function(){return"[object Generator]"}),(_regenerator=function(){return{w:i,m:f}})()}function _regeneratorDefine2(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}_regeneratorDefine2=function(e,t,r,n){function o(t,r){_regeneratorDefine2(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},_regeneratorDefine2(e,t,r,n)}function asyncGeneratorStep(e,t,r,n,a,c,u){try{var s=e[c](u),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var c=e.apply(t,r);function _next(e){asyncGeneratorStep(c,n,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(c,n,a,_next,_throw,"throw",e)}_next(void 0)})}}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,c,u,s=[],l=!0,m=!1;try{if(c=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=c.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){m=!0,a=e}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(m)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}!function(e,t){"use strict";var r,n;function initializeUtilities(){e.PDF_BUILDER_CONFIG&&e.PDF_BUILDER_CONFIG.debug&&console.log("PDF Builder Utilities initialized"),e.LocalCache.load()}e.PerformanceMetrics={metrics:{},start:function(e){this.metrics[e]||(this.metrics[e]={count:0,totalTime:0,avgTime:0,errorCount:0,minTime:1/0,maxTime:0}),this.metrics[e].startTime=Date.now()},end:function(e){if(this.metrics[e]&&this.metrics[e].startTime){var t=Date.now()-this.metrics[e].startTime,r=this.metrics[e];r.count++,r.totalTime+=t,r.avgTime=r.totalTime/r.count,r.minTime=Math.min(r.minTime,t),r.maxTime=Math.max(r.maxTime,t),delete r.startTime}},error:function(t,r){this.metrics[t]||(this.metrics[t]={count:0,totalTime:0,avgTime:0,errorCount:0,minTime:1/0,maxTime:0}),this.metrics[t].errorCount++,e.PDF_BUILDER_CONFIG&&e.PDF_BUILDER_CONFIG.debug&&console.error("PerformanceMetrics error for "+t+":",r)},getMetrics:function(){return JSON.parse(JSON.stringify(this.metrics))},reset:function(){this.metrics={}}},e.LocalCache={VERSION:"1.1",EXPIRY_HOURS:3,clear:function(){try{sessionStorage.removeItem("pdf_builder_settings_backup"),sessionStorage.removeItem("pdf_builder_cache_metadata")}catch(e){console.warn("LocalCache: Unable to clear cache",e)}},save:function(e){try{var t={data:e,timestamp:Date.now(),version:this.VERSION,hash:this.simpleHash(JSON.stringify(e)),sessionId:this.getSessionId()};sessionStorage.setItem("pdf_builder_settings_backup",JSON.stringify(t)),sessionStorage.setItem("pdf_builder_cache_metadata",JSON.stringify({timestamp:t.timestamp,version:t.version,hash:t.hash}))}catch(r){console.warn("LocalCache: Unable to save data",r)}},load:function(){try{var e=sessionStorage.getItem("pdf_builder_settings_backup");if(!e)return null;var t=JSON.parse(e);return Date.now()-t.timestamp>=60*this.EXPIRY_HOURS*60*1e3||(t.version!==this.VERSION||t.hash!==this.simpleHash(JSON.stringify(t.data))||t.sessionId!==this.getSessionId())?(this.clear(),null):t.data}catch(r){return console.warn("LocalCache: Corrupted data, clearing cache",r),this.clear(),null}},simpleHash:function(e){var t=0;if(0===e.length)return t.toString();for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t.toString()},getSessionId:function(){var e=sessionStorage.getItem("pdf_builder_session_id");return e||(e="session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),sessionStorage.setItem("pdf_builder_session_id",e)),e}},e.validateFormData=function(t,r){if(!r||"object"!==_typeof(r))return e.validatePDFFormData(t);var n={isValid:!0,errors:{}};if(!t||"object"!==_typeof(t))return n.isValid=!1,n.errors.general=["Données invalides"],n;for(var a=0,c=Object.entries(r);a<c.length;a++){var u=_slicedToArray(c[a],2),s=u[0],l=u[1],m=t[s],p=[];if(!l.required||null!=m&&""!==m||p.push("requis"),null!=m&&""!==m||l.required){if(l.type)switch(l.type){case"string":"string"!=typeof m&&p.push("doit être une chaîne de caractères");break;case"number":"number"!=typeof m&&isNaN(Number(m))&&p.push("doit être un nombre");break;case"boolean":"boolean"!=typeof m&&"true"!==m&&"false"!==m&&p.push("doit être un booléen");break;case"array":Array.isArray(m)||p.push("doit être un tableau");break;case"email":"string"==typeof m&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)||p.push("doit être une adresse email valide")}if("string"!==l.type&&"string"!=typeof m||(l.minLength&&m.length<l.minLength&&p.push("minimum ".concat(l.minLength," caractères")),l.maxLength&&m.length>l.maxLength&&p.push("maximum ".concat(l.maxLength," caractères")),l.length&&m.length!==l.length&&p.push("doit faire exactement ".concat(l.length," caractères"))),"number"===l.type||"number"==typeof m||!isNaN(Number(m))){var h=Number(m);void 0!==l.min&&h<l.min&&p.push("minimum ".concat(l.min)),void 0!==l.max&&h>l.max&&p.push("maximum ".concat(l.max))}p.length>0&&(n.errors[s]=p,n.isValid=!1)}}return n},e.validatePDFFormData=function(e){var t=[];if(!e||"object"!==_typeof(e))return t.push("Données de formulaire invalides"),t;for(var r=0,n=["pdf_builder_cache_max_size","pdf_builder_cache_ttl","pdf_builder_max_execution_time","pdf_builder_memory_limit"];r<n.length;r++){var a=n[r];if(void 0!==e[a]&&""!==e[a]){var c=parseInt(e[a]);(isNaN(c)||c<0)&&t.push("".concat(a.replace("pdf_builder_","").replace(/_/g," ")," doit être un nombre positif"))}}for(var u=0,s=["pdf_builder_company_email"];u<s.length;u++){var l=s[u];if(e[l]&&e[l].trim()){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e[l])||t.push("".concat(l.replace("pdf_builder_","").replace(/_/g," ")," doit être une adresse email valide"))}}for(var m=0,p=["pdf_builder_logo_url","pdf_builder_custom_css_url"];m<p.length;m++){var h=p[m];if(e[h]&&e[h].trim())try{new URL(e[h])}catch(b){t.push("".concat(h.replace("pdf_builder_","").replace(/_/g," ")," doit être une URL valide"))}}for(var y=0,_=["pdf_builder_company_name"];y<_.length;y++){var v=_[y];e[v]&&e[v].trim()||t.push("".concat(v.replace("pdf_builder_","").replace(/_/g," ")," est obligatoire"))}return t},e.AjaxCompat={cache:new Map,lastRequestTime:0,throttleDelay:100,reset:function(){this.cache.clear(),this.lastRequestTime=0},request:(n=_asyncToGenerator(_regenerator().m(function _callee(e){var t,r,n,a,c,u,s,l,m,p,h=this,y=arguments;return _regenerator().w(function(_){for(;;)switch(_.n){case 0:if(t=y.length>1&&void 0!==y[1]?y[1]:{},!(n=!1!==(r=y.length>2&&void 0!==y[2]?y[2]:{}).cache?JSON.stringify({action:e,data:t}):null)||!this.cache.has(n)){_.n=1;break}return _.a(2,this.cache.get(n));case 1:if(a=Date.now(),!((c=a-this.lastRequestTime)<this.throttleDelay)){_.n=2;break}return _.n=2,new Promise(function(e){return setTimeout(e,h.throttleDelay-c)});case 2:this.lastRequestTime=Date.now(),u=r.retries||0,l=_regenerator().m(function _loop(r){var a;return _regenerator().w(function(c){for(;;)switch(c.p=c.n){case 0:return c.p=0,c.n=1,h._executeRequest(e,t);case 1:return a=c.v,n&&h.cache.set(n,a),c.a(2,{v:a});case 2:if(c.p=2,s=c.v,!(r<u)){c.n=3;break}return c.n=3,new Promise(function(e){return setTimeout(e,1e3*Math.pow(2,r))});case 3:return c.a(2)}},_loop,null,[[0,2]])}),p=0;case 3:if(!(p<=u)){_.n=6;break}return _.d(_regeneratorValues(l(p)),4);case 4:if(!(m=_.v)){_.n=5;break}return _.a(2,m.v);case 5:p++,_.n=3;break;case 6:throw s;case 7:return _.a(2)}},_callee,this)})),function(e){return n.apply(this,arguments)}),_executeRequest:(r=_asyncToGenerator(_regenerator().m(function _callee2(t,r){var n,a,c,u,s,l,m,p;return _regenerator().w(function(h){for(;;)switch(h.p=h.n){case 0:for(n="ajax_"+t+"_"+Date.now(),e.PerformanceMetrics.start(n),h.p=1,(a=new FormData).append("action",t),e.PDF_BUILDER_CONFIG&&e.PDF_BUILDER_CONFIG.nonce&&a.append("nonce",e.PDF_BUILDER_CONFIG.nonce),c=0,u=Object.entries(r);c<u.length;c++)s=_slicedToArray(u[c],2),a.append(s[0],s[1]);return h.n=2,fetch(e.PDF_BUILDER_CONFIG.ajaxurl||"/wp-admin/admin-ajax.php",{method:"POST",body:a});case 2:if((l=h.v).ok){h.n=3;break}throw new Error("HTTP ".concat(l.status,": ").concat(l.statusText));case 3:return h.n=4,l.json();case 4:return m=h.v,e.PerformanceMetrics.end(n),h.a(2,m);case 5:throw h.p=5,e.PerformanceMetrics.error(n,p=h.v),p;case 6:return h.a(2)}},_callee2,null,[[1,5]])})),function(e,t){return r.apply(this,arguments)}),fetch:function(e){function fetch(t){return e.apply(this,arguments)}return fetch.toString=function(){return e.toString()},fetch}(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="ajax_"+Date.now();return e.PerformanceMetrics.start(n),fetch(t,r).then(function(t){if(e.PerformanceMetrics.end(n),!t.ok)throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText));return t}).catch(function(t){throw e.PerformanceMetrics.error(n,t),t})}),post:function(t,r){var n=new FormData;for(var a in e.PDF_BUILDER_CONFIG&&e.PDF_BUILDER_CONFIG.nonce&&n.append("nonce",e.PDF_BUILDER_CONFIG.nonce),r)n.append(a,r[a]);return this.fetch(t,{method:"POST",body:n}).then(function(e){return e.json()})},get:function(e){return this.fetch(e).then(function(e){return e.json()})}},"loading"===t.readyState?t.addEventListener("DOMContentLoaded",function(){initializeUtilities()}):initializeUtilities()}(window,document)},483:(e,t,r)=>{"use strict";r.r(t);r(411);function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,c,u,s=[],l=!0,m=!1;try{if(c=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=c.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){m=!0,a=e}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(m)throw a}}return s}}(e,t)||_unsupportedIterableToArray(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,F=function(){};return{s:F,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function debugLog(){}void 0===window.PDF_BUILDER_CONFIG&&(window.PDF_BUILDER_CONFIG={debug:!1,ajaxurl:"",nonce:""}),document.addEventListener("DOMContentLoaded",function(){window.PerformanceMetrics&&window.PerformanceMetrics.start("tabs_initialization");var e=document.getElementById("pdf-builder-tabs"),t=document.getElementById("pdf-builder-tab-content");if(e&&t){e.addEventListener("click",function(r){var n=r.target.closest(".nav-tab");if(n){r.preventDefault();var a=n.getAttribute("data-tab");if(a){e.querySelectorAll(".nav-tab").forEach(function(e){e.classList.remove("nav-tab-active"),e.setAttribute("aria-selected","false")}),t.querySelectorAll(".tab-content").forEach(function(e){e.classList.remove("active")}),n.classList.add("nav-tab-active"),n.setAttribute("aria-selected","true");var c=document.getElementById("tab-content-"+a);c&&c.classList.add("active"),window.LocalCache&&window.LocalCache.save({activeTab:a,timestamp:Date.now()});try{localStorage.setItem("pdf_builder_active_tab",a)}catch(r){}}}});var r=!1;if(window.LocalCache){var n=window.LocalCache.load();if(n&&n.activeTab){var a=e.querySelector('[data-tab="'+n.activeTab+'"]'),c=document.getElementById("tab-content-"+n.activeTab);a&&c&&(a.click(),r=!0)}}if(!r)try{var u=localStorage.getItem("pdf_builder_active_tab");if(u){var s=e.querySelector('[data-tab="'+u+'"]'),l=document.getElementById("tab-content-"+u);s&&l&&(s.click(),r=!0)}}catch(p){}if(!r){var m=e.querySelector(".nav-tab");m&&m.click()}window.PerformanceMetrics&&window.PerformanceMetrics.end("tabs_initialization")}else window.PerformanceMetrics&&window.PerformanceMetrics.error("tabs_initialization","Containers not found")});var n=!1;document.addEventListener("DOMContentLoaded",function initSaveButton(){if(!("undefined"!=typeof window&&window.location&&-1===window.location.href.indexOf("page=pdf-builder-settings")||n)){var e=document.getElementById("pdf-builder-save-floating-btn"),t=document.getElementById("pdf-builder-save-floating");e&&t?(e.addEventListener("click",function(t){t.preventDefault();var r=document.querySelector('form[action="options.php"]');if(!r){var n,a=_createForOfIteratorHelper(document.querySelectorAll("form"));try{for(a.s();!(n=a.n()).done;){var c=n.value;if(c.querySelector('[name*="pdf_builder_settings"]')){r=c,debugLog();break}}}catch(h){a.e(h)}finally{a.f()}}if(r||(r=document.querySelector("form")),r){var u,s=_createForOfIteratorHelper(new FormData(r).entries());try{for(s.s();!(u=s.n()).done;){var l=_slicedToArray(u.value,2),m=l[0];(m.includes("template")||m.includes("pdf_builder_settings"))&&0}}catch(h){s.e(h)}finally{s.f()}var p=e.textContent;e.textContent="Sauvegarde...",e.disabled=!0,r.submit(),setTimeout(function(){e.textContent=p,e.disabled=!1},5e3)}else{document.querySelectorAll("form").forEach(function(e,t){e.querySelectorAll('[name*="template"], [name*="pdf_builder_settings"]')})}}),n=!0):setTimeout(initSaveButton,1e3)}}),window.PDFBuilderTabsAPI={switchToTab:function(e){var t=document.querySelector('[data-tab="'+e+'"]');t&&t.click()},getActiveTab:function(){try{return localStorage.getItem("pdf_builder_active_tab")}catch(e){return null}},toggleAdvancedSection:function(){var e=document.getElementById("advanced-section"),t=document.getElementById("advanced-toggle");if(e&&t){var r="none"!==e.style.display;e.style.display=r?"none":"block",t.textContent=r?"▼":"▲"}},resetTemplatesStatus:function(){confirm("Êtes-vous sûr de vouloir réinitialiser tous les mappings de templates ? Cette action ne peut pas être annulée.")&&(document.querySelectorAll('#templates-status-form select[name^="pdf_builder_order_status_templates"]').forEach(function(e){e.value=""}),alert("Les mappings de templates ont été réinitialisés. N'oubliez pas de sauvegarder vos modifications."))}}}}]);