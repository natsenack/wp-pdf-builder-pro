(()=>{function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||_unsupportedIterableToArray(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,F=function(){};return{s:F,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function debugLog(){}void 0===window.PDF_BUILDER_CONFIG&&(window.PDF_BUILDER_CONFIG={debug:!1,ajaxurl:"",nonce:""}),document.addEventListener("DOMContentLoaded",function(){window.PerformanceMetrics&&window.PerformanceMetrics.start("tabs_initialization");var e=document.getElementById("pdf-builder-tabs"),t=document.getElementById("pdf-builder-tab-content");if(e&&t){e.addEventListener("click",function(r){var n=r.target.closest(".nav-tab");if(n){r.preventDefault();var a=n.getAttribute("data-tab");if(a){e.querySelectorAll(".nav-tab").forEach(function(e){e.classList.remove("nav-tab-active"),e.setAttribute("aria-selected","false")}),t.querySelectorAll(".tab-content").forEach(function(e){e.classList.remove("active")}),n.classList.add("nav-tab-active"),n.setAttribute("aria-selected","true");var o=document.getElementById("tab-content-"+a);o&&o.classList.add("active"),window.LocalCache&&window.LocalCache.save({activeTab:a,timestamp:Date.now()});try{localStorage.setItem("pdf_builder_active_tab",a)}catch(r){}}}});var r=!1;if(window.LocalCache){var n=window.LocalCache.load();if(n&&n.activeTab){var a=e.querySelector('[data-tab="'+n.activeTab+'"]'),o=document.getElementById("tab-content-"+n.activeTab);a&&o&&(a.click(),r=!0)}}if(!r)try{var i=localStorage.getItem("pdf_builder_active_tab");if(i){var l=e.querySelector('[data-tab="'+i+'"]'),c=document.getElementById("tab-content-"+i);l&&c&&(l.click(),r=!0)}}catch(d){}if(!r){var u=e.querySelector(".nav-tab");u&&u.click()}window.PerformanceMetrics&&window.PerformanceMetrics.end("tabs_initialization")}else window.PerformanceMetrics&&window.PerformanceMetrics.error("tabs_initialization","Containers not found")});var e=!1;document.addEventListener("DOMContentLoaded",function initSaveButton(){if(!("undefined"!=typeof window&&window.location&&-1===window.location.href.indexOf("page=pdf-builder-settings")||e)){var t=document.getElementById("pdf-builder-save-floating-btn"),r=document.getElementById("pdf-builder-save-floating");t&&r?(t.addEventListener("click",function(e){e.preventDefault();var r=document.querySelector('form[action="options.php"]');if(!r){var n,a=_createForOfIteratorHelper(document.querySelectorAll("form"));try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.querySelector('[name*="pdf_builder_settings"]')){r=o,debugLog();break}}}catch(s){a.e(s)}finally{a.f()}}if(r||(r=document.querySelector("form")),r){var i,l=_createForOfIteratorHelper(new FormData(r).entries());try{for(l.s();!(i=l.n()).done;){var c=_slicedToArray(i.value,2),u=c[0];(u.includes("template")||u.includes("pdf_builder_settings"))&&0}}catch(s){l.e(s)}finally{l.f()}var d=t.textContent;t.textContent="Sauvegarde...",t.disabled=!0,r.submit(),setTimeout(function(){t.textContent=d,t.disabled=!1},5e3)}else{document.querySelectorAll("form").forEach(function(e,t){e.querySelectorAll('[name*="template"], [name*="pdf_builder_settings"]')})}}),e=!0):setTimeout(initSaveButton,1e3)}}),window.PDFBuilderTabsAPI={switchToTab:function(e){var t=document.querySelector('[data-tab="'+e+'"]');t&&t.click()},getActiveTab:function(){try{return localStorage.getItem("pdf_builder_active_tab")}catch(e){return null}},toggleAdvancedSection:function(){var e=document.getElementById("advanced-section"),t=document.getElementById("advanced-toggle");if(e&&t){var r="none"!==e.style.display;e.style.display=r?"none":"block",t.textContent=r?"▼":"▲"}},resetTemplatesStatus:function(){confirm("Êtes-vous sûr de vouloir réinitialiser tous les mappings de templates ? Cette action ne peut pas être annulée.")&&(document.querySelectorAll('#templates-status-form select[name^="pdf_builder_order_status_templates"]').forEach(function(e){e.value=""}),alert("Les mappings de templates ont été réinitialisés. N'oubliez pas de sauvegarder vos modifications."))}},self.pdfBuilderReact={}})();