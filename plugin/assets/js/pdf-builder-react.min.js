"use strict";
(Object(typeof window !== "undefined" ? window : global)["webpackChunkwp_pdf_builder_pro_v2"] = Object(typeof window !== "undefined" ? window : global)["webpackChunkwp_pdf_builder_pro_v2"] || []).push([[763],{

/***/ 463
(__unused_webpack_module, exports) {

/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}
function g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D="function"===typeof setTimeout?setTimeout:null,E="function"===typeof clearTimeout?clearTimeout:null,F="undefined"!==typeof setImmediate?setImmediate:null;
"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}
function J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if("function"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();"function"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;
function M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if("function"===typeof F)S=function(){F(R)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}
exports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};
exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};
exports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};
exports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();"object"===typeof c&&null!==c?(c=c.delay,c="number"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};
exports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};


/***/ },

/***/ 560
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  PDFBuilder: () => (/* reexport */ PDFBuilder),
  api: () => (/* binding */ api),
  "default": () => (/* binding */ js_react),
  initPDFBuilderReact: () => (/* binding */ initPDFBuilderReact)
});

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(540);
// EXTERNAL MODULE: ./node_modules/react-dom/client.js
var client = __webpack_require__(338);
;// ./src/js/react/utils/debug.ts
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
// Fonction pour vÃ©rifier si on est sur la page de l'Ã©diteur PDF
function isPDFEditorPage() {
  // VÃ©rifier si l'Ã©lÃ©ment avec la classe 'pdf-builder' existe (composant PDFBuilderContent)
  return typeof document !== 'undefined' && document.querySelector('.pdf-builder') !== null;
}

// Fonction pour vÃ©rifier si on est sur la page des paramÃ¨tres
function isSettingsPage() {
  // VÃ©rifier si on est sur la page des paramÃ¨tres (admin.php?page=pdf-builder-settings)
  return typeof window !== 'undefined' && typeof window.location !== 'undefined' && window.location.href.indexOf('pdf-builder-settings') !== -1;
}

// Fonction pour vÃ©rifier si le debug est activÃ©
function isDebugEnabled() {
  var _window$location;
  // Debug activÃ© si explicitement forcÃ©
  if ((_window$location = window.location) !== null && _window$location !== void 0 && (_window$location = _window$location.search) !== null && _window$location !== void 0 && _window$location.includes('debug=force')) {
    return true;
  }

  // VÃ©rifier les paramÃ¨tres de debug centralisÃ©s
  if (typeof window.pdfBuilderDebugSettings !== 'undefined' && window.pdfBuilderDebugSettings && _typeof(window.pdfBuilderDebugSettings) === 'object') {
    return !!window.pdfBuilderDebugSettings.javascript;
  }

  // Fallback vers pdfBuilderCanvasSettings pour la compatibilitÃ©
  if (typeof window.pdfBuilderCanvasSettings !== 'undefined' && window.pdfBuilderCanvasSettings && _typeof(window.pdfBuilderCanvasSettings) === 'object') {
    var debugSettings = window.pdfBuilderCanvasSettings.debug;
    if (debugSettings && _typeof(debugSettings) === 'object') {
      return !!debugSettings.javascript;
    }
  }
  return false;
}

// Extension de Window pour le debug

// Fonction de logging conditionnel
function debugLog() {
  if (isDebugEnabled()) {}
}

// Fonction de debug pour les sauvegardes (activable sÃ©parÃ©ment)
function debugSave() {
  if (isDebugEnabled()) {}
}
function debug_debugError() {
  if (isDebugEnabled()) {}
}
function debugWarn() {
  if (isDebugEnabled()) {}
}
function debugTable(data) {
  if (isDebugEnabled()) {
    console.table(data);
  }
}

// Keep an internal verbose flag in sync with window.pdfBuilderDebugSettings
if (typeof window !== 'undefined') {
  try {
    window.PDF_BUILDER_VERBOSE = !!(window.pdfBuilderDebugSettings && window.pdfBuilderDebugSettings.javascript);
  } catch (e) {
    // ignore
  }
  // Listener to update verbose flag at runtime
  if (window.addEventListener) {
    window.addEventListener('pdfBuilder:debugSettingsChanged', function (e) {
      try {
        var detail = e && e.detail ? e.detail : window.pdfBuilderDebugSettings;
        window.PDF_BUILDER_VERBOSE = !!(detail && detail.javascript);
        if (typeof window.console !== 'undefined' && window.PDF_BUILDER_VERBOSE) {}
      } catch (err) {
        if (typeof window.console !== 'undefined') {}
      }
    });
  }
}
// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(848);
;// ./src/js/react/contexts/CanvasSettingsContext.tsx
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function CanvasSettingsContext_typeof(o) { "@babel/helpers - typeof"; return CanvasSettingsContext_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, CanvasSettingsContext_typeof(o); }
function _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", _regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, "Generator"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, _regeneratorDefine2(e, r, n, t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == CanvasSettingsContext_typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != CanvasSettingsContext_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != CanvasSettingsContext_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }



var CanvasSettingsContext = /*#__PURE__*/(0,react.createContext)(undefined);

// Valeurs par dÃ©faut
var DEFAULT_SETTINGS = {
  canvasWidth: 210,
  canvasHeight: 297,
  canvasUnit: "mm",
  canvasOrientation: "portrait",
  canvasBackgroundColor: "#ffffff",
  containerBackgroundColor: "#f8f9fa",
  borderColor: "#cccccc",
  borderWidth: 1,
  shadowEnabled: false,
  marginTop: 20,
  marginRight: 20,
  marginBottom: 20,
  marginLeft: 20,
  showMargins: false,
  gridShow: true,
  gridSize: 10,
  gridColor: "#e5e7eb",
  gridSnapEnabled: true,
  gridSnapTolerance: 8,
  guidesEnabled: true,
  // ðŸ” Zoom & Navigation
  navigationEnabled: true,
  zoomDefault: 100,
  zoomMin: 10,
  zoomMax: 500,
  zoomStep: 25,
  selectionDragEnabled: true,
  selectionMultiSelectEnabled: true,
  selectionRotationEnabled: false,
  selectionCopyPasteEnabled: true,
  selectionShowHandles: true,
  selectionHandleSize: 8,
  selectionHandleColor: "#0066cc",
  canvasSelectionMode: "click",
  exportQuality: 100,
  exportFormat: "pdf",
  exportCompression: true,
  exportIncludeMetadata: true,
  historyUndoLevels: 50,
  historyRedoLevels: 50,
  // Performance & Lazy Loading
  lazyLoadingEditor: true,
  lazyLoadingPlugin: true,
  debugMode: false,
  memoryLimitJs: 256,
  fpsTarget: 60,
  responseTimeout: 5000,
  performanceMonitoring: false,
  errorReporting: false,
  isLoading: true,
  isReady: false,
  error: null,
  refreshSettings: function refreshSettings() {}
};

// Export des valeurs par dÃ©faut pour utilisation dans les composants

function loadSettingsFromWindowObj() {
  try {
    var _window$pdfBuilderDat, _window$pdfBuilderSet, _ref, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref0, _ref1, _ref10, _ref11, _ref12, _ref13, _ref17, _ref20, _ref21, _ref22, _ref23, _ref24, _ref25, _ref26, _ref27, _ref28, _ref29, _ref30, _ref31;
    var windowSettings = ((_window$pdfBuilderDat = window.pdfBuilderData) === null || _window$pdfBuilderDat === void 0 ? void 0 : _window$pdfBuilderDat.canvasSettings) || ((_window$pdfBuilderSet = window.pdfBuilderSettings) === null || _window$pdfBuilderSet === void 0 ? void 0 : _window$pdfBuilderSet.canvas) || window.pdfBuilderCanvasSettings;

    // Debug: Check if window settings exist
    if (typeof window !== "undefined") {
      // Uncomment for debugging: console.log('[CanvasSettings] Selected windowSettings:', windowSettings);
    }
    if (!windowSettings) {
      return _objectSpread(_objectSpread({}, DEFAULT_SETTINGS), {}, {
        isLoading: false,
        isReady: true,
        updateGridSettings: function updateGridSettings() {},
        saveGridSettings: function () {
          var _saveGridSettings = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {
            return _regenerator().w(function (_context) {
              while (1) switch (_context.n) {
                case 0:
                  return _context.a(2);
              }
            }, _callee);
          }));
          function saveGridSettings() {
            return _saveGridSettings.apply(this, arguments);
          }
          return saveGridSettings;
        }()
      });
    }

    // VÃ©rifier que windowSettings est un objet
    if (CanvasSettingsContext_typeof(windowSettings) !== "object" || windowSettings === null) {
      throw new Error("Les paramÃ¨tres du canvas ne sont pas un objet valide");
    }

    // Mapper les paramÃ¨tres depuis le format WordPress vers notre format
    var newSettings = {
      // Dimensions
      canvasWidth: (_ref = windowSettings.default_canvas_width) !== null && _ref !== void 0 ? _ref : DEFAULT_SETTINGS.canvasWidth,
      canvasHeight: (_ref2 = windowSettings.default_canvas_height) !== null && _ref2 !== void 0 ? _ref2 : DEFAULT_SETTINGS.canvasHeight,
      canvasUnit: (_ref3 = windowSettings.default_canvas_unit) !== null && _ref3 !== void 0 ? _ref3 : DEFAULT_SETTINGS.canvasUnit,
      canvasOrientation: (_ref4 = windowSettings.default_canvas_orientation) !== null && _ref4 !== void 0 ? _ref4 : DEFAULT_SETTINGS.canvasOrientation,
      // Couleurs
      canvasBackgroundColor: (_ref5 = windowSettings.canvas_background_color) !== null && _ref5 !== void 0 ? _ref5 : DEFAULT_SETTINGS.canvasBackgroundColor,
      containerBackgroundColor: (_ref6 = windowSettings.container_background_color) !== null && _ref6 !== void 0 ? _ref6 : DEFAULT_SETTINGS.containerBackgroundColor,
      borderColor: (_ref7 = windowSettings.border_color) !== null && _ref7 !== void 0 ? _ref7 : DEFAULT_SETTINGS.borderColor,
      borderWidth: (_ref8 = windowSettings.border_width) !== null && _ref8 !== void 0 ? _ref8 : DEFAULT_SETTINGS.borderWidth,
      shadowEnabled: windowSettings.shadow_enabled === true || windowSettings.shadow_enabled === "1",
      // Marges
      marginTop: (_ref9 = windowSettings.margin_top) !== null && _ref9 !== void 0 ? _ref9 : DEFAULT_SETTINGS.marginTop,
      marginRight: (_ref0 = windowSettings.margin_right) !== null && _ref0 !== void 0 ? _ref0 : DEFAULT_SETTINGS.marginRight,
      marginBottom: (_ref1 = windowSettings.margin_bottom) !== null && _ref1 !== void 0 ? _ref1 : DEFAULT_SETTINGS.marginBottom,
      marginLeft: (_ref10 = windowSettings.margin_left) !== null && _ref10 !== void 0 ? _ref10 : DEFAULT_SETTINGS.marginLeft,
      showMargins: windowSettings.show_margins === true || windowSettings.show_margins === "1",
      // Grille
      gridShow: windowSettings.show_grid === true || windowSettings.show_grid === "1",
      gridSize: windowSettings.show_grid === true || windowSettings.show_grid === "1" ? (_ref11 = windowSettings.grid_size) !== null && _ref11 !== void 0 ? _ref11 : DEFAULT_SETTINGS.gridSize : 0,
      // DÃ©sactiver gridSize si gridShow est false
      gridColor: (_ref12 = windowSettings.grid_color) !== null && _ref12 !== void 0 ? _ref12 : DEFAULT_SETTINGS.gridColor,
      gridSnapEnabled: (windowSettings.show_grid === true || windowSettings.show_grid === "1") && (windowSettings.snap_to_grid === true || windowSettings.snap_to_grid === "1"),
      gridSnapTolerance: (_ref13 = windowSettings.snap_tolerance) !== null && _ref13 !== void 0 ? _ref13 : DEFAULT_SETTINGS.gridSnapTolerance,
      guidesEnabled: windowSettings.show_guides === true || windowSettings.show_guides === "1",
      // ðŸ” Zoom & Navigation
      navigationEnabled: windowSettings.pan_with_mouse === true || windowSettings.pan_with_mouse === "1",
      zoomDefault: function (_ref14, _ref15, _ref16) {
        var minZoom = Math.max(1, (_ref14 = windowSettings.min_zoom) !== null && _ref14 !== void 0 ? _ref14 : DEFAULT_SETTINGS.zoomMin);
        var maxZoom = Math.max(minZoom, (_ref15 = windowSettings.max_zoom) !== null && _ref15 !== void 0 ? _ref15 : DEFAULT_SETTINGS.zoomMax);
        var defaultZoom = (_ref16 = windowSettings.default_zoom) !== null && _ref16 !== void 0 ? _ref16 : DEFAULT_SETTINGS.zoomDefault;
        return Math.max(minZoom, Math.min(maxZoom, defaultZoom));
      }(),
      zoomMin: Math.max(1, (_ref17 = windowSettings.min_zoom) !== null && _ref17 !== void 0 ? _ref17 : DEFAULT_SETTINGS.zoomMin),
      zoomMax: function (_ref18, _ref19) {
        var minZoom = Math.max(1, (_ref18 = windowSettings.min_zoom) !== null && _ref18 !== void 0 ? _ref18 : DEFAULT_SETTINGS.zoomMin);
        var maxZoom = (_ref19 = windowSettings.max_zoom) !== null && _ref19 !== void 0 ? _ref19 : DEFAULT_SETTINGS.zoomMax;
        return Math.max(minZoom, maxZoom);
      }(),
      zoomStep: Math.max(1, (_ref20 = windowSettings.zoom_step) !== null && _ref20 !== void 0 ? _ref20 : DEFAULT_SETTINGS.zoomStep),
      // SÃ©lection
      selectionDragEnabled: true,
      // Default to enabled
      selectionMultiSelectEnabled: windowSettings.multi_select === true || windowSettings.multi_select === "1",
      selectionRotationEnabled: (_ref21 = windowSettings.enable_rotation === true || windowSettings.enable_rotation === "1") !== null && _ref21 !== void 0 ? _ref21 : DEFAULT_SETTINGS.selectionRotationEnabled,
      selectionCopyPasteEnabled: windowSettings.copy_paste_enabled === true || windowSettings.copy_paste_enabled === "1",
      selectionShowHandles: windowSettings.show_resize_handles === true || windowSettings.show_resize_handles === "1",
      selectionHandleSize: (_ref22 = windowSettings.handle_size) !== null && _ref22 !== void 0 ? _ref22 : DEFAULT_SETTINGS.selectionHandleSize,
      selectionHandleColor: (_ref23 = windowSettings.handle_color) !== null && _ref23 !== void 0 ? _ref23 : DEFAULT_SETTINGS.selectionHandleColor,
      canvasSelectionMode: (_ref24 = windowSettings.canvas_selection_mode) !== null && _ref24 !== void 0 ? _ref24 : DEFAULT_SETTINGS.canvasSelectionMode,
      // Export
      exportQuality: (_ref25 = windowSettings.image_quality) !== null && _ref25 !== void 0 ? _ref25 : DEFAULT_SETTINGS.exportQuality,
      exportFormat: (_ref26 = windowSettings.export_format) !== null && _ref26 !== void 0 ? _ref26 : DEFAULT_SETTINGS.exportFormat,
      exportCompression: windowSettings.compress_images === true || windowSettings.compress_images === "1",
      exportIncludeMetadata: windowSettings.include_metadata === true || windowSettings.include_metadata === "1",
      // Historique
      historyUndoLevels: (_ref27 = windowSettings.undo_levels) !== null && _ref27 !== void 0 ? _ref27 : DEFAULT_SETTINGS.historyUndoLevels,
      historyRedoLevels: (_ref28 = windowSettings.redo_levels) !== null && _ref28 !== void 0 ? _ref28 : DEFAULT_SETTINGS.historyRedoLevels,
      // Performance & Lazy Loading
      lazyLoadingEditor: false,
      // Default to disabled
      lazyLoadingPlugin: false,
      // Default to disabled
      debugMode: windowSettings.debugEnabled === true || windowSettings.debugEnabled === "1",
      memoryLimitJs: (_ref29 = windowSettings.memoryLimitJs) !== null && _ref29 !== void 0 ? _ref29 : DEFAULT_SETTINGS.memoryLimitJs,
      fpsTarget: (_ref30 = windowSettings.fpsTarget) !== null && _ref30 !== void 0 ? _ref30 : DEFAULT_SETTINGS.fpsTarget,
      responseTimeout: (_ref31 = windowSettings.responseTimeout) !== null && _ref31 !== void 0 ? _ref31 : DEFAULT_SETTINGS.responseTimeout,
      performanceMonitoring: windowSettings.performanceMonitoring === true || windowSettings.performanceMonitoring === "1",
      errorReporting: windowSettings.errorReporting === true || windowSettings.errorReporting === "1",
      isLoading: false,
      isReady: true,
      error: null,
      refreshSettings: function refreshSettings() {},
      updateGridSettings: function updateGridSettings() {},
      saveGridSettings: function () {
        var _saveGridSettings2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {
          return _regenerator().w(function (_context2) {
            while (1) switch (_context2.n) {
              case 0:
                return _context2.a(2);
            }
          }, _callee2);
        }));
        function saveGridSettings() {
          return _saveGridSettings2.apply(this, arguments);
        }
        return saveGridSettings;
      }()
    };
    return newSettings;
  } catch (_err) {
    var errorMsg = _err instanceof Error ? _err.message : "Erreur inconnue";
    return _objectSpread(_objectSpread({}, DEFAULT_SETTINGS), {}, {
      isLoading: false,
      isReady: false,
      error: errorMsg,
      refreshSettings: function refreshSettings() {},
      updateGridSettings: function updateGridSettings() {},
      saveGridSettings: function () {
        var _saveGridSettings3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {
          return _regenerator().w(function (_context3) {
            while (1) switch (_context3.n) {
              case 0:
                return _context3.a(2);
            }
          }, _callee3);
        }));
        function saveGridSettings() {
          return _saveGridSettings3.apply(this, arguments);
        }
        return saveGridSettings;
      }()
    });
  }
}
function CanvasSettingsProvider(_ref32) {
  var children = _ref32.children;
  var _useState = (0,react.useState)(function () {
      // Try to load from window object first
      var windowSettings = loadSettingsFromWindowObj();
      return windowSettings;
    }),
    _useState2 = _slicedToArray(_useState, 2),
    settings = _useState2[0],
    setSettings = _useState2[1];

  // âœ… CORRECTION: Flag pour Ã©viter les boucles infinies lors des mises Ã  jour d'Ã©vÃ©nements
  var isUpdatingFromEventRef = (0,react.useRef)(false);
  var hasInitializedRef = (0,react.useRef)(false);

  // Function to refresh settings from window object
  var handleRefresh = function handleRefresh() {
    var windowSettings = loadSettingsFromWindowObj();
    setSettings(windowSettings);
  };

  // Load settings from server on mount - simplified - ONLY ONCE
  (0,react.useEffect)(function () {
    if (hasInitializedRef.current) return; // Ã‰viter les doublons au montage
    hasInitializedRef.current = true;

    // For now, just use window settings - AJAX calls can be added later if needed
    var windowSettings = loadSettingsFromWindowObj();
    setSettings(windowSettings);
  }, []);

  // Listen for settings update events
  (0,react.useEffect)(function () {
    var handleSettingsUpdate = function handleSettingsUpdate() {
      if (isUpdatingFromEventRef.current) return; // Ã‰viter les boucles infinies

      isUpdatingFromEventRef.current = true;
      var windowSettings = loadSettingsFromWindowObj();
      setSettings(windowSettings);

      // Reset flag after a short delay
      setTimeout(function () {
        isUpdatingFromEventRef.current = false;
      }, 100);
    };
    window.addEventListener("pdfBuilderCanvasSettingsUpdated", handleSettingsUpdate, {
      passive: true
    });
    return function () {
      return window.removeEventListener("pdfBuilderCanvasSettingsUpdated", handleSettingsUpdate);
    };
  }, []);

  // Synchronisation automatique : si gridShow est dÃ©sactivÃ©, dÃ©sactiver gridSnapEnabled et gridSize
  // CommentÃ© pour Ã©viter les boucles infinies de rendu
  // useEffect(() => {
  //   if (!settings.gridShow) {
  //     let needsUpdate = false;
  //     const updates: Partial<CanvasSettingsContextType> = {};

  //     if (settings.gridSnapEnabled) {
  //       updates.gridSnapEnabled = false;
  //       needsUpdate = true;
  //     }

  //     if (settings.gridSize !== 0) {
  //       updates.gridSize = 0;
  //       needsUpdate = true;
  //     }

  //     if (needsUpdate) {
  //       setSettings(prev => ({
  //         ...prev,
  //         ...updates
  //       }));
  //     }
  //   }
  // }, [settings.gridShow, settings.gridSnapEnabled, settings.gridSize]);

  // Ajouter la fonction refreshSettings au contexte final
  var contextValue = _objectSpread(_objectSpread({}, settings), {}, {
    updateGridSettings: function updateGridSettings(newSettings) {
      setSettings(function (prev) {
        return _objectSpread(_objectSpread({}, prev), newSettings);
      });
    },
    saveGridSettings: function () {
      var _saveGridSettings4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(newSettings) {
        var _window$pdfBuilderAja, _window$pdfBuilderAja2, syncedSettings, formData, response, result, _t;
        return _regenerator().w(function (_context4) {
          while (1) switch (_context4.p = _context4.n) {
            case 0:
              _context4.p = 0;
              // Appliquer la synchronisation automatique
              syncedSettings = _objectSpread({}, newSettings);
              if (newSettings.gridShow === false) {
                syncedSettings.gridSize = 0;
                syncedSettings.gridSnapEnabled = false;
              }

              // PrÃ©parer les donnÃ©es pour l'AJAX
              formData = new URLSearchParams();
              formData.append("action", "pdf_builder_save_canvas_settings");
              formData.append("nonce", ((_window$pdfBuilderAja = window.pdfBuilderAjax) === null || _window$pdfBuilderAja === void 0 ? void 0 : _window$pdfBuilderAja.nonce) || "");
              if (syncedSettings.gridShow !== undefined) {
                formData.append("canvas_grid_enabled", syncedSettings.gridShow ? "1" : "0");
              }
              if (syncedSettings.gridSize !== undefined) {
                formData.append("canvas_grid_size", syncedSettings.gridSize.toString());
              }
              if (syncedSettings.gridSnapEnabled !== undefined) {
                formData.append("canvas_snap_to_grid", syncedSettings.gridSnapEnabled ? "1" : "0");
              }

              // Sauvegarder cÃ´tÃ© serveur
              _context4.n = 1;
              return fetch(((_window$pdfBuilderAja2 = window.pdfBuilderAjax) === null || _window$pdfBuilderAja2 === void 0 ? void 0 : _window$pdfBuilderAja2.ajax_url) || "/wp-admin/admin-ajax.php", {
                method: "POST",
                headers: {
                  "Content-Type": "application/x-www-form-urlencoded"
                },
                body: formData
              });
            case 1:
              response = _context4.v;
              if (!response.ok) {
                _context4.n = 3;
                break;
              }
              _context4.n = 2;
              return response.json();
            case 2:
              result = _context4.v;
              if (result.success) {
                // Mettre Ã  jour l'Ã©tat local
                setSettings(function (prev) {
                  return _objectSpread(_objectSpread({}, prev), syncedSettings);
                });
              } else {
                debug_debugError("Erreur lors de la sauvegarde des paramÃ¨tres de grille:", result.message);
              }
              _context4.n = 4;
              break;
            case 3:
              debug_debugError("Erreur HTTP lors de la sauvegarde des paramÃ¨tres de grille");
            case 4:
              _context4.n = 6;
              break;
            case 5:
              _context4.p = 5;
              _t = _context4.v;
              debug_debugError("Erreur lors de la sauvegarde des paramÃ¨tres de grille:", _t);
            case 6:
              return _context4.a(2);
          }
        }, _callee4, null, [[0, 5]]);
      }));
      function saveGridSettings(_x) {
        return _saveGridSettings4.apply(this, arguments);
      }
      return saveGridSettings;
    }(),
    refreshSettings: handleRefresh
  });
  return /*#__PURE__*/(0,jsx_runtime.jsx)(CanvasSettingsContext.Provider, {
    value: contextValue,
    children: children
  });
}
function CanvasSettingsContext_useCanvasSettings() {
  var context = (0,react.useContext)(CanvasSettingsContext);
  if (context === undefined) {
    throw new Error("useCanvasSettings must be used within CanvasSettingsProvider");
  }
  return context;
}
;// ./src/js/react/contexts/builder/BuilderContext.tsx
function BuilderContext_typeof(o) { "@babel/helpers - typeof"; return BuilderContext_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, BuilderContext_typeof(o); }
function BuilderContext_slicedToArray(r, e) { return BuilderContext_arrayWithHoles(r) || BuilderContext_iterableToArrayLimit(r, e) || BuilderContext_unsupportedIterableToArray(r, e) || BuilderContext_nonIterableRest(); }
function BuilderContext_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function BuilderContext_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function BuilderContext_arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || BuilderContext_unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function BuilderContext_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return BuilderContext_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? BuilderContext_arrayLikeToArray(r, a) : void 0; } }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return BuilderContext_arrayLikeToArray(r); }
function BuilderContext_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function BuilderContext_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function BuilderContext_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? BuilderContext_ownKeys(Object(t), !0).forEach(function (r) { BuilderContext_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : BuilderContext_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function BuilderContext_defineProperty(e, r, t) { return (r = BuilderContext_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function BuilderContext_toPropertyKey(t) { var i = BuilderContext_toPrimitive(t, "string"); return "symbol" == BuilderContext_typeof(i) ? i : i + ""; }
function BuilderContext_toPrimitive(t, r) { if ("object" != BuilderContext_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != BuilderContext_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }




// Type pour les propriÃ©tÃ©s des Ã©lÃ©ments product_table

// Fonction helper pour corriger les positions des Ã©lÃ©ments hors limites
// âœ… BUGFIX-014: Accept canvas dimensions as parameters for dynamic sizing
var clampElementPositions = function clampElementPositions(elements) {
  var canvasWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 794;
  var canvasHeight = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1123;
  return elements.map(function (element) {
    var newX = element.x;
    var newY = element.y;

    // Clamp X position (laisser au moins 5px visible)
    var minVisibleWidth = Math.min(15, element.width * 0.3);
    if (newX < 0) newX = 0;
    if (newX + minVisibleWidth > canvasWidth) newX = Math.max(0, canvasWidth - minVisibleWidth);

    // Clamp Y position (laisser au moins 5px visible)
    var minVisibleHeight = Math.min(10, element.height * 0.3);
    if (newY < 0) newY = 0;
    if (newY + minVisibleHeight > canvasHeight) newY = Math.max(0, canvasHeight - minVisibleHeight);
    if (newX !== element.x || newY !== element.y) {
      return BuilderContext_objectSpread(BuilderContext_objectSpread({}, element), {}, {
        x: newX,
        y: newY
      });
    }
    return element;
  });
};

// Fonction helper pour rÃ©parer les propriÃ©tÃ©s des Ã©lÃ©ments product_table
var repairProductTableProperties = function repairProductTableProperties(elements) {
  var defaultProperties = {
    // FonctionnalitÃ©s de base
    showHeaders: true,
    showBorders: true,
    showAlternatingRows: true,
    showSku: true,
    showDescription: true,
    showQuantity: true,
    // Style et apparence
    fontSize: 11,
    currency: 'â‚¬',
    tableStyle: 'default',
    // Alignements
    textAlign: 'left',
    verticalAlign: 'top',
    // Couleurs
    backgroundColor: '#ffffff',
    headerBackgroundColor: '#f9fafb',
    headerTextColor: '#111827',
    alternateRowColor: '#f9fafb',
    borderColor: '#e5e7eb',
    textColor: '#374151'
  };
  return elements.map(function (element) {
    if (element.type !== 'product_table') return element;
    var repairedElement = BuilderContext_objectSpread({}, element);

    // Ajouter les propriÃ©tÃ©s manquantes
    Object.keys(defaultProperties).forEach(function (prop) {
      if (!(prop in repairedElement)) {
        repairedElement[prop] = defaultProperties[prop];
      }
    });

    // Validation des boolÃ©ens
    var booleanProps = ['showHeaders', 'showBorders', 'showAlternatingRows', 'showSku', 'showDescription', 'showQuantity'];
    booleanProps.forEach(function (prop) {
      if (typeof repairedElement[prop] !== 'boolean') {
        repairedElement[prop] = defaultProperties[prop];
      }
    });

    // Validation des nombres
    var numberProps = ['fontSize'];
    numberProps.forEach(function (prop) {
      if (typeof repairedElement[prop] !== 'number') {
        repairedElement[prop] = defaultProperties[prop];
      }
    });

    // Validation des alignements
    var validHorizontalAligns = ['left', 'center', 'right'];
    if (!validHorizontalAligns.includes(repairedElement.textAlign)) {
      repairedElement.textAlign = defaultProperties.textAlign;
    }
    var validVerticalAligns = ['top', 'middle', 'bottom'];
    if (!validVerticalAligns.includes(repairedElement.verticalAlign)) {
      repairedElement.verticalAlign = defaultProperties.verticalAlign;
    }

    // Validation des couleurs (format hexadÃ©cimal)
    var colorProperties = ['backgroundColor', 'headerBackgroundColor', 'alternateRowColor', 'borderColor', 'headerTextColor', 'textColor'];
    colorProperties.forEach(function (prop) {
      if (repairedElement[prop] && !/^#[0-9A-Fa-f]{6}$/.test(repairedElement[prop])) {
        repairedElement[prop] = defaultProperties[prop];
      }
    });

    // Validation de la devise
    if (!repairedElement.currency || typeof repairedElement.currency !== 'string') {
      repairedElement.currency = defaultProperties.currency;
    }
    return repairedElement;
  });
};

// Ã‰tat initial
var initialCanvasState = {
  zoom: 100,
  pan: {
    x: 0,
    y: 0
  },
  showGrid: false,
  gridSize: 20,
  snapToGrid: false,
  // DÃ©sactivÃ© par dÃ©faut pour les utilisateurs gratuits
  backgroundColor: '#ffffff'
};
var initialSelectionState = {
  selectedElements: [],
  isSelecting: false
};
var initialDragState = {
  isDragging: false,
  draggedElements: []
};
var initialHistoryState = {
  past: [],
  present: {
    elements: [],
    canvas: initialCanvasState,
    selection: initialSelectionState,
    drag: initialDragState,
    mode: 'select',
    template: {
      isNew: true,
      isModified: false,
      isSaving: false,
      isLoading: true // âœ… Start as loading
    },
    previewMode: 'editor',
    history: {
      past: [],
      present: null,
      // Ã‰vite la rÃ©cursion infinie
      future: [],
      canUndo: false,
      canRedo: false
    }
  },
  future: [],
  canUndo: false,
  canRedo: false
};
var initialState = {
  elements: [],
  canvas: initialCanvasState,
  selection: initialSelectionState,
  drag: initialDragState,
  mode: 'select',
  template: {
    isNew: true,
    isModified: false,
    isSaving: false,
    isLoading: true,
    // âœ… Start as loading until template is fetched
    name: 'Nouveau template',
    description: '',
    tags: [],
    canvasWidth: 794,
    // A4 width in PX (portrait)
    canvasHeight: 1123,
    // A4 height in PX
    marginTop: 28,
    // ~10mm in PX
    marginBottom: 28,
    // ~10mm in PX
    showGuides: false,
    // DÃ©sactivÃ© par dÃ©faut pour les utilisateurs gratuits
    snapToGrid: false
  },
  previewMode: 'editor',
  history: initialHistoryState
};

// Reducer
function builderReducer(state, action) {
  switch (action.type) {
    case 'ADD_ELEMENT':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          elements: [].concat(_toConsumableArray(state.elements), [action.payload]),
          template: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.template), {}, {
            isModified: true
          }),
          history: updateHistory(state, BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
            elements: [].concat(_toConsumableArray(state.elements), [action.payload])
          }))
        });
      }
    case 'UPDATE_ELEMENT':
      {
        // âœ… BUGFIX-003: Comprehensive property preservation
        // Ensure ALL existing properties are retained when updating
        var updateElement = function updateElement(element) {
          if (element.id !== action.payload.id) return element;

          // Merge updates while preserving all existing properties
          var updated = BuilderContext_objectSpread(BuilderContext_objectSpread(BuilderContext_objectSpread({}, element), action.payload.updates), {}, {
            // Then apply updates (only specified properties)
            updatedAt: new Date() // Always update timestamp
          });
          return updated;
        };
        var updatedElements = state.elements.map(updateElement);
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          elements: updatedElements,
          template: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.template), {}, {
            isModified: true
          }),
          history: updateHistory(state, BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
            elements: updatedElements
          }))
        });
      }
    case 'REMOVE_ELEMENT':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          elements: state.elements.filter(function (el) {
            return el.id !== action.payload;
          }),
          selection: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.selection), {}, {
            selectedElements: state.selection.selectedElements.filter(function (id) {
              return id !== action.payload;
            })
          }),
          template: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.template), {}, {
            isModified: true
          }),
          history: updateHistory(state, BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
            elements: state.elements.filter(function (el) {
              return el.id !== action.payload;
            }),
            selection: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.selection), {}, {
              selectedElements: state.selection.selectedElements.filter(function (id) {
                return id !== action.payload;
              })
            })
          }))
        });
      }
    case 'SET_ELEMENTS':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          elements: action.payload,
          history: updateHistory(state, BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
            elements: action.payload
          }))
        });
      }
    case 'SET_SELECTION':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          selection: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.selection), {}, {
            selectedElements: action.payload,
            selectionBounds: calculateSelectionBounds(action.payload, state.elements)
          })
        });
      }
    case 'CLEAR_SELECTION':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          selection: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.selection), {}, {
            selectedElements: [],
            selectionBounds: undefined
          })
        });
      }
    case 'SET_CANVAS':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          canvas: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.canvas), action.payload)
        });
      }
    case 'SET_MODE':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          mode: action.payload
        });
      }
    case 'SET_DRAG_STATE':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          drag: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.drag), action.payload)
        });
      }
    case 'SET_PREVIEW_MODE':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          previewMode: action.payload
        });
      }
    case 'SET_ORDER_ID':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          orderId: action.payload
        });
      }
    case 'UNDO':
      {
        if (!state.history.canUndo) return state;
        var previousState = state.history.past[state.history.past.length - 1];
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, previousState), {}, {
          history: {
            past: state.history.past.slice(0, -1),
            present: previousState,
            future: [state].concat(_toConsumableArray(state.history.future)),
            canUndo: state.history.past.length > 1,
            canRedo: true
          }
        });
      }
    case 'REDO':
      {
        if (!state.history.canRedo) return state;
        var nextState = state.history.future[0];
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, nextState), {}, {
          history: {
            past: [].concat(_toConsumableArray(state.history.past), [state]),
            present: nextState,
            future: state.history.future.slice(1),
            canUndo: true,
            canRedo: state.history.future.length > 1
          }
        });
      }
    case 'RESET':
      {
        return initialState;
      }
    case 'SAVE_TEMPLATE':
      {
        var _action$payload, _action$payload2;
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          template: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.template), {}, {
            isNew: false,
            isModified: false,
            isSaving: false,
            lastSaved: new Date(),
            id: ((_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.id) || state.template.id,
            name: ((_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.name) || state.template.name
          })
        });
      }
    case 'SET_TEMPLATE_MODIFIED':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          template: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.template), {}, {
            isModified: action.payload
          })
        });
      }
    case 'SET_TEMPLATE_SAVING':
      return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
        template: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.template), {}, {
          isSaving: action.payload
        })
      });
    case 'UPDATE_TEMPLATE_SETTINGS':
      return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
        template: BuilderContext_objectSpread(BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.template), action.payload), {}, {
          isModified: true
        })
      });
    case 'SET_TEMPLATE_LOADING':
      return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
        template: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.template), {}, {
          isLoading: action.payload
        })
      });
    case 'TOGGLE_GUIDES':
      return BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
        template: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.template), {}, {
          showGuides: !state.template.showGuides
          // Note: isModified is NOT set to true for guides toggle
        })
      });
    case 'LOAD_TEMPLATE':
      {
        var _ref, _ref2, _ref3, _ref4;
        var rawElements = action.payload.elements || [];
        var repairedElements = repairProductTableProperties(rawElements);

        // Ne pas convertir, garder les PX directement
        var clampedElements = clampElementPositions(repairedElements);

        // Garder les dimensions du canvas si prÃ©sentes
        var canvasData = action.payload.canvas ? BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.canvas), action.payload.canvas) : state.canvas;
        var newState = BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
          elements: clampedElements,
          canvas: canvasData,
          template: BuilderContext_objectSpread(BuilderContext_objectSpread({}, state.template), {}, {
            // âœ… Preserve existing template properties
            id: action.payload.id,
            name: action.payload.name,
            description: action.payload.description || "",
            showGuides: (_ref = action.payload.showGuides) !== null && _ref !== void 0 ? _ref : true,
            snapToGrid: (_ref2 = action.payload.snapToGrid) !== null && _ref2 !== void 0 ? _ref2 : false,
            marginTop: (_ref3 = action.payload.marginTop) !== null && _ref3 !== void 0 ? _ref3 : 0,
            marginBottom: (_ref4 = action.payload.marginBottom) !== null && _ref4 !== void 0 ? _ref4 : 0,
            isNew: false,
            isModified: false,
            // âœ… Template chargÃ© de la DB n'est PAS modifiÃ©
            isSaving: false,
            isLoading: false,
            // âœ… Template is loaded
            lastSaved: action.payload.lastSaved
          }),
          history: updateHistory(state, BuilderContext_objectSpread(BuilderContext_objectSpread({}, state), {}, {
            elements: clampedElements,
            canvas: canvasData
          }))
        });
        return newState;
      }
    case 'NEW_TEMPLATE':
      {
        return BuilderContext_objectSpread(BuilderContext_objectSpread({}, initialState), {}, {
          template: {
            isNew: true,
            isModified: false,
            isSaving: false,
            isLoading: false // âœ… New template ready immediately
          }
        });
      }
    default:
      {
        return state;
      }
  }
}

// Fonctions utilitaires
function updateHistory(currentState, newState) {
  // âœ… BUGFIX-011: Deep copy the state before storing in history to ensure immutability
  var stateCopy = BuilderContext_objectSpread(BuilderContext_objectSpread({}, currentState), {}, {
    elements: currentState.elements.map(function (el) {
      return BuilderContext_objectSpread({}, el);
    }),
    // Shallow copy of array + elements
    canvas: BuilderContext_objectSpread({}, currentState.canvas),
    selection: BuilderContext_objectSpread(BuilderContext_objectSpread({}, currentState.selection), {}, {
      selectedElements: _toConsumableArray(currentState.selection.selectedElements)
    }),
    drag: BuilderContext_objectSpread({}, currentState.drag),
    template: BuilderContext_objectSpread({}, currentState.template),
    history: currentState.history // Don't deep copy history recursively
  });
  return {
    past: [].concat(_toConsumableArray(currentState.history.past), [stateCopy]),
    present: newState,
    future: [],
    canUndo: true,
    canRedo: false
  };
}
function calculateSelectionBounds(selectedIds, elements) {
  if (selectedIds.length === 0) return undefined;
  var selectedElements = elements.filter(function (el) {
    return selectedIds.includes(el.id);
  });
  if (selectedElements.length === 0) return undefined;
  var minX = Infinity,
    minY = Infinity,
    maxX = -Infinity,
    maxY = -Infinity;
  selectedElements.forEach(function (el) {
    minX = Math.min(minX, el.x);
    minY = Math.min(minY, el.y);
    maxX = Math.max(maxX, el.x + el.width);
    maxY = Math.max(maxY, el.y + el.height);
  });
  return {
    x: minX,
    y: minY,
    width: maxX - minX,
    height: maxY - minY
  };
}

// Contexte

var BuilderContext = /*#__PURE__*/(0,react.createContext)(undefined);

// Provider

function BuilderProvider(_ref5) {
  var children = _ref5.children,
    initialStateProp = _ref5.initialState;
  // fusionne l'Ã©tat par dÃ©faut avec l'Ã©ventuel initialState passÃ© en prop
  var mergedInitialState = BuilderContext_objectSpread(BuilderContext_objectSpread({}, initialState), initialStateProp || {});
  var _useReducer = (0,react.useReducer)(builderReducer, mergedInitialState),
    _useReducer2 = BuilderContext_slicedToArray(_useReducer, 2),
    state = _useReducer2[0],
    dispatch = _useReducer2[1];
  var canvasSettings = CanvasSettingsContext_useCanvasSettings();

  // âœ… CORRECTION: Flags pour Ã©viter les boucles infinies
  var zoomInitializedRef = (0,react.useRef)(false);
  var gridInitializedRef = (0,react.useRef)(false);

  // Appliquer les paramÃ¨tres de zoom depuis Canvas Settings au dÃ©marrage
  (0,react.useEffect)(function () {
    // Appliquer le zoom par dÃ©faut depuis les paramÃ¨tres UNIQUEMENT au dÃ©marrage
    // Le zoom initial du state est 100, donc appliquer seulement si diffÃ©rent et prÃªt
    var initialZoom = 100; // Valeur initiale du state
    if (canvasSettings.isReady && canvasSettings.zoomDefault !== initialZoom && !zoomInitializedRef.current) {
      zoomInitializedRef.current = true;
      dispatch({
        type: 'SET_CANVAS',
        payload: {
          zoom: Math.max(canvasSettings.zoomMin, Math.min(canvasSettings.zoomDefault, canvasSettings.zoomMax))
        }
      });
    }
  }, [canvasSettings.zoomDefault, canvasSettings.zoomMax, canvasSettings.zoomMin, canvasSettings.isReady]);

  // Synchroniser les paramÃ¨tres de grille depuis CanvasSettingsContext (uniquement Ã  l'initialisation)
  (0,react.useEffect)(function () {
    if (!canvasSettings.isReady || gridInitializedRef.current) return;
    var canvasUpdates = {};
    var templateUpdates = {};

    // Synchroniser gridSize toujours
    if (canvasSettings.gridSize !== state.canvas.gridSize) {
      canvasUpdates.gridSize = canvasSettings.gridSize;
    }

    // Synchroniser showGrid : activer si disponible, sinon forcer Ã  false
    if (canvasSettings.gridShow && canvasSettings.gridShow !== state.canvas.showGrid) {
      canvasUpdates.showGrid = canvasSettings.gridShow;
    } else if (!canvasSettings.gridShow && state.canvas.showGrid !== false) {
      canvasUpdates.showGrid = false;
    }

    // Synchroniser snapToGrid : activer si disponible, sinon forcer Ã  false
    if (canvasSettings.gridShow && canvasSettings.gridSnapEnabled && canvasSettings.gridSnapEnabled !== state.canvas.snapToGrid) {
      canvasUpdates.snapToGrid = canvasSettings.gridSnapEnabled;
    } else if ((!canvasSettings.gridShow || !canvasSettings.gridSnapEnabled) && state.canvas.snapToGrid !== false) {
      canvasUpdates.snapToGrid = false;
    }

    // Synchroniser showGuides : activer si disponible, sinon forcer Ã  false
    if (canvasSettings.guidesEnabled && canvasSettings.guidesEnabled !== state.template.showGuides) {
      templateUpdates.showGuides = canvasSettings.guidesEnabled;
    } else if (!canvasSettings.guidesEnabled && state.template.showGuides !== false) {
      templateUpdates.showGuides = false;
    }
    if (Object.keys(canvasUpdates).length > 0) {
      dispatch({
        type: 'SET_CANVAS',
        payload: canvasUpdates
      });
    }
    if (Object.keys(templateUpdates).length > 0) {
      dispatch({
        type: 'SET_TEMPLATE',
        payload: templateUpdates
      });
    }
    if (Object.keys(canvasUpdates).length > 0 || Object.keys(templateUpdates).length > 0) {
      gridInitializedRef.current = true;
    }
  }, [canvasSettings.gridSize, canvasSettings.gridShow, canvasSettings.gridSnapEnabled, canvasSettings.guidesEnabled, canvasSettings.isReady, state.canvas.gridSize, state.canvas.showGrid, state.canvas.snapToGrid, state.template.showGuides]);

  // âœ… DISABLED: Template loading is now EXCLUSIVELY handled by useTemplate hook
  // which reads template_id from URL/localized data and calls AJAX GET
  // This prevents duplicate/race condition loads which caused double canvas renders
  // Previously: BuilderContext useEffect loaded â†’ dispatch â†’ Canvas renders
  //             useTemplate hook also loaded â†’ dispatch â†’ Canvas renders AGAIN (1/10th sec later)
  // Now: Only useTemplate.ts loads the template, ensuring single source of truth

  // Ã‰couteur pour le chargement de template via API globale
  (0,react.useEffect)(function () {
    var handleLoadTemplate = function handleLoadTemplate(event) {
      var templateData = event.detail;
      if (templateData) {
        dispatch({
          type: 'LOAD_TEMPLATE',
          payload: templateData
        });
      } else {
        debugWarn('[BuilderContext] No template data in event detail');
      }
    };
    document.addEventListener('pdfBuilderLoadTemplate', handleLoadTemplate, {
      passive: true
    });
    return function () {
      document.removeEventListener('pdfBuilderLoadTemplate', handleLoadTemplate);
    };
  }, []);

  // Actions helpers
  var addElement = function addElement(element) {
    dispatch({
      type: 'ADD_ELEMENT',
      payload: element
    });
  };
  var updateElement = function updateElement(id, updates) {
    dispatch({
      type: 'UPDATE_ELEMENT',
      payload: {
        id: id,
        updates: updates
      }
    });
  };
  var removeElement = function removeElement(id) {
    dispatch({
      type: 'REMOVE_ELEMENT',
      payload: id
    });
  };
  var setSelection = function setSelection(ids) {
    dispatch({
      type: 'SET_SELECTION',
      payload: ids
    });
  };
  var clearSelection = function clearSelection() {
    dispatch({
      type: 'CLEAR_SELECTION'
    });
  };
  var setCanvas = function setCanvas(canvas) {
    dispatch({
      type: 'SET_CANVAS',
      payload: canvas
    });
  };
  var setMode = function setMode(mode) {
    dispatch({
      type: 'SET_MODE',
      payload: mode
    });
  };
  var undo = function undo() {
    dispatch({
      type: 'UNDO'
    });
  };
  var redo = function redo() {
    dispatch({
      type: 'REDO'
    });
  };
  var reset = function reset() {
    dispatch({
      type: 'RESET'
    });
  };
  var toggleGrid = function toggleGrid() {
    setCanvas({
      showGrid: !state.canvas.showGrid
    });
  };
  var toggleGuides = function toggleGuides() {
    dispatch({
      type: 'TOGGLE_GUIDES'
    });
  };
  var value = {
    state: state,
    dispatch: dispatch,
    addElement: addElement,
    updateElement: updateElement,
    removeElement: removeElement,
    setSelection: setSelection,
    clearSelection: clearSelection,
    setCanvas: setCanvas,
    setMode: setMode,
    undo: undo,
    redo: redo,
    reset: reset,
    toggleGrid: toggleGrid,
    toggleGuides: toggleGuides,
    zoomIn: function zoomIn() {
      return setCanvas({
        zoom: Math.min(state.canvas.zoom + canvasSettings.zoomStep, canvasSettings.zoomMax)
      });
    },
    zoomOut: function zoomOut() {
      return setCanvas({
        zoom: Math.max(state.canvas.zoom - canvasSettings.zoomStep, canvasSettings.zoomMin)
      });
    },
    setZoom: function setZoom(zoom) {
      return setCanvas({
        zoom: Math.max(canvasSettings.zoomMin, Math.min(zoom, canvasSettings.zoomMax))
      });
    },
    resetZoom: function resetZoom() {
      return setCanvas({
        zoom: Math.max(canvasSettings.zoomMin, Math.min(canvasSettings.zoomDefault, canvasSettings.zoomMax))
      });
    }
  };
  return /*#__PURE__*/(0,jsx_runtime.jsx)(BuilderContext.Provider, {
    value: value,
    children: children
  });
}

// Hook pour utiliser le contexte
function useBuilder() {
  var context = (0,react.useContext)(BuilderContext);
  if (context === undefined) {
    throw new Error('useBuilder must be used within a BuilderProvider');
  }
  return context;
}

// Hook spÃ©cialisÃ© pour les Ã©lÃ©ments
function useElements() {
  var _useBuilder = useBuilder(),
    state = _useBuilder.state,
    addElement = _useBuilder.addElement,
    updateElement = _useBuilder.updateElement,
    removeElement = _useBuilder.removeElement;
  return {
    elements: state.elements,
    addElement: addElement,
    updateElement: updateElement,
    removeElement: removeElement,
    getElement: function getElement(id) {
      return state.elements.find(function (el) {
        return el.id === id;
      });
    },
    getElementsByType: function getElementsByType(type) {
      return state.elements.filter(function (el) {
        return el.type === type;
      });
    }
  };
}

// Hook spÃ©cialisÃ© pour la sÃ©lection
function useSelection() {
  var _useBuilder2 = useBuilder(),
    state = _useBuilder2.state,
    setSelection = _useBuilder2.setSelection,
    clearSelection = _useBuilder2.clearSelection;
  return {
    selectedElements: state.selection.selectedElements,
    selectionBounds: state.selection.selectionBounds,
    isSelecting: state.selection.isSelecting,
    setSelection: setSelection,
    clearSelection: clearSelection,
    isSelected: function isSelected(id) {
      return state.selection.selectedElements.includes(id);
    },
    toggleSelection: function toggleSelection(id) {
      var isSelected = state.selection.selectedElements.includes(id);
      if (isSelected) {
        setSelection(state.selection.selectedElements.filter(function (selectedId) {
          return selectedId !== id;
        }));
      } else {
        setSelection([].concat(_toConsumableArray(state.selection.selectedElements), [id]));
      }
    }
  };
}

// Hook spÃ©cialisÃ© pour le canvas
function useCanvas() {
  var _useBuilder3 = useBuilder(),
    state = _useBuilder3.state,
    setCanvas = _useBuilder3.setCanvas;
  var canvasSettings = useCanvasSettings();
  return {
    canvas: state.canvas,
    setCanvas: setCanvas,
    zoomIn: function zoomIn() {
      return setCanvas({
        zoom: Math.min(state.canvas.zoom + canvasSettings.zoomStep, canvasSettings.zoomMax)
      });
    },
    zoomOut: function zoomOut() {
      return setCanvas({
        zoom: Math.max(state.canvas.zoom - canvasSettings.zoomStep, canvasSettings.zoomMin)
      });
    },
    setZoom: function setZoom(zoom) {
      return setCanvas({
        zoom: Math.max(canvasSettings.zoomMin, Math.min(zoom, canvasSettings.zoomMax))
      });
    },
    resetZoom: function resetZoom() {
      return setCanvas({
        zoom: Math.max(canvasSettings.zoomMin, Math.min(canvasSettings.zoomDefault, canvasSettings.zoomMax))
      });
    },
    toggleGrid: function toggleGrid() {
      return setCanvas({
        showGrid: !state.canvas.showGrid
      });
    },
    setBackgroundColor: function setBackgroundColor(color) {
      return setCanvas({
        backgroundColor: color
      });
    }
  };
}

// Pas d'export de conversion MM/PX - on utilise que PX
;// ./src/js/react/hooks/useCanvasSettings.ts
function useCanvasSettings_typeof(o) { "@babel/helpers - typeof"; return useCanvasSettings_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, useCanvasSettings_typeof(o); }
function useCanvasSettings_regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return useCanvasSettings_regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (useCanvasSettings_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, useCanvasSettings_regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, useCanvasSettings_regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), useCanvasSettings_regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", useCanvasSettings_regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), useCanvasSettings_regeneratorDefine2(u), useCanvasSettings_regeneratorDefine2(u, o, "Generator"), useCanvasSettings_regeneratorDefine2(u, n, function () { return this; }), useCanvasSettings_regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (useCanvasSettings_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function useCanvasSettings_regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } useCanvasSettings_regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { useCanvasSettings_regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, useCanvasSettings_regeneratorDefine2(e, r, n, t); }
function useCanvasSettings_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function useCanvasSettings_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? useCanvasSettings_ownKeys(Object(t), !0).forEach(function (r) { useCanvasSettings_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : useCanvasSettings_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function useCanvasSettings_defineProperty(e, r, t) { return (r = useCanvasSettings_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function useCanvasSettings_toPropertyKey(t) { var i = useCanvasSettings_toPrimitive(t, "string"); return "symbol" == useCanvasSettings_typeof(i) ? i : i + ""; }
function useCanvasSettings_toPrimitive(t, r) { if ("object" != useCanvasSettings_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != useCanvasSettings_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function useCanvasSettings_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function useCanvasSettings_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { useCanvasSettings_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { useCanvasSettings_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function useCanvasSettings_slicedToArray(r, e) { return useCanvasSettings_arrayWithHoles(r) || useCanvasSettings_iterableToArrayLimit(r, e) || useCanvasSettings_unsupportedIterableToArray(r, e) || useCanvasSettings_nonIterableRest(); }
function useCanvasSettings_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function useCanvasSettings_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return useCanvasSettings_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? useCanvasSettings_arrayLikeToArray(r, a) : void 0; } }
function useCanvasSettings_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function useCanvasSettings_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function useCanvasSettings_arrayWithHoles(r) { if (Array.isArray(r)) return r; }



/**
 * Hook pour accÃ©der aux paramÃ¨tres du canvas
 * Retourne tous les paramÃ¨tres canvas depuis les options WordPress
 * Se met Ã  jour automatiquement quand les paramÃ¨tres changent
 *
 * @returns {Object} Les paramÃ¨tres du canvas
 */
var useCanvasSettings_useCanvasSettings = function useCanvasSettings() {
  var _useState = (0,react.useState)(function () {
      return window.pdfBuilderCanvasSettings || getDefaultCanvasSettings();
    }),
    _useState2 = useCanvasSettings_slicedToArray(_useState, 2),
    settings = _useState2[0],
    setSettings = _useState2[1];
  var _useState3 = (0,react.useState)(false),
    _useState4 = useCanvasSettings_slicedToArray(_useState3, 2),
    isLoading = _useState4[0],
    setIsLoading = _useState4[1];

  // Ã‰couter les changements de paramÃ¨tres
  (0,react.useEffect)(function () {
    var isMounted = true;
    var fetchSettings = /*#__PURE__*/function () {
      var _ref = useCanvasSettings_asyncToGenerator(/*#__PURE__*/useCanvasSettings_regenerator().m(function _callee() {
        var _window$pdfBuilderDat, _window$pdfBuilderDat2, ajaxUrl, response, data, _t;
        return useCanvasSettings_regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              if (!isLoading) {
                _context.n = 1;
                break;
              }
              return _context.a(2);
            case 1:
              _context.p = 1;
              setIsLoading(true);
              ajaxUrl = ((_window$pdfBuilderDat = window.pdfBuilderData) === null || _window$pdfBuilderDat === void 0 ? void 0 : _window$pdfBuilderDat.ajaxUrl) || '/wp-admin/admin-ajax.php';
              _context.n = 2;
              return fetch(ajaxUrl, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: new URLSearchParams({
                  action: 'pdf_builder_get_canvas_settings',
                  nonce: ((_window$pdfBuilderDat2 = window.pdfBuilderData) === null || _window$pdfBuilderDat2 === void 0 ? void 0 : _window$pdfBuilderDat2.nonce) || ''
                })
              });
            case 2:
              response = _context.v;
              if (isMounted) {
                _context.n = 3;
                break;
              }
              return _context.a(2);
            case 3:
              _context.n = 4;
              return response.json();
            case 4:
              data = _context.v;
              if (data.success && data.data) {
                window.pdfBuilderCanvasSettings = useCanvasSettings_objectSpread(useCanvasSettings_objectSpread({}, window.pdfBuilderCanvasSettings), data.data);
                setSettings(window.pdfBuilderCanvasSettings);
              } else {
                debugWarn('REACT: Invalid AJAX response:', data);
              }
              _context.n = 6;
              break;
            case 5:
              _context.p = 5;
              _t = _context.v;
              if (isMounted) {
                debugWarn('REACT: Failed to fetch updated settings:', _t);
              }
            case 6:
              _context.p = 6;
              if (isMounted) {
                setIsLoading(false);
              }
              return _context.f(6);
            case 7:
              return _context.a(2);
          }
        }, _callee, null, [[1, 5, 6, 7]]);
      }));
      return function fetchSettings() {
        return _ref.apply(this, arguments);
      };
    }();
    var handleSettingsUpdate = function handleSettingsUpdate() {
      if (isMounted) {
        setSettings(window.pdfBuilderCanvasSettings);
      }
    };
    var handleStorageChange = /*#__PURE__*/function () {
      var _ref2 = useCanvasSettings_asyncToGenerator(/*#__PURE__*/useCanvasSettings_regenerator().m(function _callee2(event) {
        return useCanvasSettings_regenerator().w(function (_context2) {
          while (1) switch (_context2.n) {
            case 0:
              if (!(event.key === 'pdfBuilderSettingsUpdated' && isMounted)) {
                _context2.n = 1;
                break;
              }
              _context2.n = 1;
              return fetchSettings();
            case 1:
              return _context2.a(2);
          }
        }, _callee2);
      }));
      return function handleStorageChange(_x) {
        return _ref2.apply(this, arguments);
      };
    }();

    // Ne fetch que si les settings ne sont pas dÃ©jÃ  chargÃ©s
    if (!window.pdfBuilderCanvasSettings) {
      fetchSettings();
    }

    // Check if settings were updated while this tab was closed
    if (localStorage.getItem('pdfBuilderSettingsUpdated')) {
      fetchSettings();
    }
    window.addEventListener('pdfBuilderCanvasSettingsUpdated', handleSettingsUpdate);
    window.addEventListener('storage', handleStorageChange);
    return function () {
      isMounted = false;
      window.removeEventListener('pdfBuilderCanvasSettingsUpdated', handleSettingsUpdate);
      window.removeEventListener('storage', handleStorageChange);
    };
  }, []); // DÃ©pendances vides pour un seul appel au montage

  return settings;
};

/**
 * Hook pour accÃ©der Ã  un paramÃ¨tre canvas spÃ©cifique
 *
 * @param {string} key - ClÃ© du paramÃ¨tre
 * @param {unknown} defaultValue - Valeur par dÃ©faut
 * @returns {unknown} La valeur du paramÃ¨tre
 */
var useCanvasSetting = function useCanvasSetting(key) {
  var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  var settings = useCanvasSettings_useCanvasSettings();
  return (0,react.useMemo)(function () {
    var value = key in settings ? settings[key] : defaultValue;
    return value;
  }, [key, settings, defaultValue]);
};

/**
 * Hook pour accÃ©der aux dimensions du canvas
 * 
 * @returns {Object} Les dimensions (width, height, unit, orientation)
 */
var useCanvasDimensions = function useCanvasDimensions() {
  var settings = useCanvasSettings_useCanvasSettings();
  return useMemo(function () {
    return {
      width: settings.default_canvas_width || 794,
      height: settings.default_canvas_height || 1123,
      unit: settings.default_canvas_unit || 'px',
      orientation: settings.default_orientation || 'portrait'
    };
  }, [settings]);
};

/**
 * Hook pour accÃ©der aux marges du canvas
 * 
 * @returns {Object} Les marges (top, right, bottom, left)
 */
var useCanvasMargins = function useCanvasMargins() {
  var settings = useCanvasSettings_useCanvasSettings();
  return useMemo(function () {
    return {
      top: settings.margin_top || 28,
      right: settings.margin_right || 28,
      bottom: settings.margin_bottom || 10,
      left: settings.margin_left || 10
    };
  }, [settings]);
};

/**
 * Hook pour accÃ©der aux paramÃ¨tres de grille
 * 
 * @returns {Object} Les paramÃ¨tres de grille
 */
var useGridSettings = function useGridSettings() {
  var settings = useCanvasSettings_useCanvasSettings();
  return useMemo(function () {
    return {
      show: settings.show_grid || false,
      size: settings.grid_size || 10,
      color: settings.grid_color || '#e0e0e0',
      snapEnabled: settings.snap_to_grid || false,
      snapTolerance: settings.snap_tolerance || 5
    };
  }, [settings]);
};

/**
 * Hook pour accÃ©der aux paramÃ¨tres de zoom
 * 
 * @returns {Object} Les paramÃ¨tres de zoom
 */
var useZoomSettings = function useZoomSettings() {
  var settings = useCanvasSettings_useCanvasSettings();
  return useMemo(function () {
    return {
      "default": settings.default_zoom || 100,
      step: settings.zoom_step || 25,
      min: settings.min_zoom || 10,
      max: settings.max_zoom || 500,
      wheelEnabled: settings.zoom_with_wheel || false
    };
  }, [settings]);
};

/**
 * Hook pour accÃ©der aux paramÃ¨tres de sÃ©lection
 * 
 * @returns {Object} Les paramÃ¨tres de sÃ©lection
 */
var useSelectionSettings = function useSelectionSettings() {
  var settings = useCanvasSettings_useCanvasSettings();
  return useMemo(function () {
    return {
      multiSelect: settings.multi_select || false,
      copyPaste: settings.copy_paste_enabled || false,
      rotation: settings.enable_rotation || false,
      rotationStep: settings.rotation_step || 15,
      showHandles: settings.show_resize_handles || false,
      handleSize: settings.handle_size || 8
    };
  }, [settings]);
};

/**
 * Hook pour accÃ©der aux paramÃ¨tres d'export
 * 
 * @returns {Object} Les paramÃ¨tres d'export
 */
var useExportSettings = function useExportSettings() {
  var settings = useCanvasSettings_useCanvasSettings();
  return useMemo(function () {
    return {
      quality: settings.export_quality || 'print',
      format: settings.export_format || 'pdf',
      compressImages: settings.compress_images || true,
      imageQuality: settings.image_quality || 85,
      maxImageSize: settings.max_image_size || 2048,
      includeMetadata: settings.include_metadata || true
    };
  }, [settings]);
};

/**
 * Hook pour accÃ©der aux paramÃ¨tres d'historique
 * 
 * @returns {Object} Les paramÃ¨tres d'historique
 */
var useHistorySettings = function useHistorySettings() {
  var settings = useCanvasSettings_useCanvasSettings();
  return useMemo(function () {
    return {
      undoLevels: settings.undo_levels || 50,
      redoLevels: settings.redo_levels || 50
    };
  }, [settings]);
};

/**
 * Retourne les paramÃ¨tres par dÃ©faut du canvas
 * 
 * @returns {Object} ParamÃ¨tres par dÃ©faut
 */
var getDefaultCanvasSettings = function getDefaultCanvasSettings() {
  return {
    default_canvas_width: 794,
    default_canvas_height: 1123,
    default_canvas_unit: 'px',
    default_orientation: 'portrait',
    canvas_background_color: '#ffffff',
    canvas_show_transparency: false,
    container_background_color: '#f8f9fa',
    container_show_transparency: false,
    margin_top: 28,
    margin_right: 28,
    margin_bottom: 10,
    margin_left: 10,
    show_margins: false,
    show_grid: false,
    grid_size: 10,
    grid_color: '#e0e0e0',
    snap_to_grid: false,
    snap_to_elements: false,
    snap_tolerance: 5,
    show_guides: false,
    default_zoom: 100,
    zoom_step: 25,
    min_zoom: 10,
    max_zoom: 500,
    zoom_with_wheel: false,
    pan_with_mouse: false,
    show_resize_handles: false,
    handle_size: 8,
    handle_color: '#007cba',
    enable_rotation: false,
    rotation_step: 15,
    multi_select: false,
    copy_paste_enabled: false,
    export_quality: 'print',
    export_format: 'pdf',
    compress_images: true,
    image_quality: 85,
    max_image_size: 2048,
    include_metadata: true,
    pdf_author: 'PDF Builder Pro',
    pdf_subject: '',
    auto_crop: false,
    embed_fonts: true,
    optimize_for_web: true,
    enable_hardware_acceleration: true,
    limit_fps: true,
    max_fps: 60,
    auto_save_enabled: true,
    auto_save_interval: 5,
    // 5 minutes par dÃ©faut (comme PHP)
    auto_save_versions: 10,
    undo_levels: 50,
    redo_levels: 50,
    enable_keyboard_shortcuts: true,
    debug_mode: false,
    show_fps: false
  };
};
;// ./src/js/react/hooks/useCanvasDrop.ts
function useCanvasDrop_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function useCanvasDrop_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? useCanvasDrop_ownKeys(Object(t), !0).forEach(function (r) { useCanvasDrop_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : useCanvasDrop_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function useCanvasDrop_defineProperty(e, r, t) { return (r = useCanvasDrop_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function useCanvasDrop_toPropertyKey(t) { var i = useCanvasDrop_toPrimitive(t, "string"); return "symbol" == useCanvasDrop_typeof(i) ? i : i + ""; }
function useCanvasDrop_toPrimitive(t, r) { if ("object" != useCanvasDrop_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != useCanvasDrop_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function useCanvasDrop_typeof(o) { "@babel/helpers - typeof"; return useCanvasDrop_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, useCanvasDrop_typeof(o); }
function useCanvasDrop_slicedToArray(r, e) { return useCanvasDrop_arrayWithHoles(r) || useCanvasDrop_iterableToArrayLimit(r, e) || useCanvasDrop_unsupportedIterableToArray(r, e) || useCanvasDrop_nonIterableRest(); }
function useCanvasDrop_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function useCanvasDrop_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return useCanvasDrop_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? useCanvasDrop_arrayLikeToArray(r, a) : void 0; } }
function useCanvasDrop_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function useCanvasDrop_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function useCanvasDrop_arrayWithHoles(r) { if (Array.isArray(r)) return r; }



var useCanvasDrop = function useCanvasDrop(_ref) {
  var canvasRef = _ref.canvasRef,
    canvasWidth = _ref.canvasWidth,
    canvasHeight = _ref.canvasHeight,
    elements = _ref.elements,
    _ref$dragEnabled = _ref.dragEnabled,
    dragEnabled = _ref$dragEnabled === void 0 ? true : _ref$dragEnabled;
  var _useBuilder = useBuilder(),
    state = _useBuilder.state,
    dispatch = _useBuilder.dispatch;
  var _useState = (0,react.useState)(false),
    _useState2 = useCanvasDrop_slicedToArray(_useState, 2),
    isDragOver = _useState2[0],
    setIsDragOver = _useState2[1];

  // âœ… Validation des donnÃ©es de drag
  var validateDragData = (0,react.useCallback)(function (data) {
    if (!data || useCanvasDrop_typeof(data) !== "object") return false;
    var dragData = data;
    return typeof dragData.type === "string" && typeof dragData.label === "string" && useCanvasDrop_typeof(dragData.defaultProps) === "object" && dragData.defaultProps !== null;
  }, []);

  // âœ… Calcul correct des coordonnÃ©es avec zoom/pan
  var calculateDropPosition = (0,react.useCallback)(function (clientX, clientY) {
    var elementWidth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;
    var elementHeight = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 50;
    var wrapper = canvasRef.current;
    if (!wrapper) {
      throw new Error("Canvas wrapper ref not available");
    }
    var rect = wrapper.getBoundingClientRect();

    // Validation du rectangle canvas
    if (rect.width <= 0 || rect.height <= 0) {
      throw new Error("Invalid canvas dimensions");
    }

    // Calcul des coordonnÃ©es dans l'espace canvas (avant transformation)
    var canvasX = clientX - rect.left;
    var canvasY = clientY - rect.top;

    // Validation des coordonnÃ©es
    if (canvasX < 0 || canvasY < 0 || canvasX > rect.width || canvasY > rect.height) {}

    // Appliquer la transformation inverse (zoom/pan)
    // Note: zoom est en pourcentage (100 = 100%), donc diviser par 100
    var zoomScale = state.canvas.zoom / 100;

    // Position dans l'espace canvas transformÃ©
    var transformedX = (canvasX - state.canvas.pan.x) / zoomScale;
    var transformedY = (canvasY - state.canvas.pan.y) / zoomScale;

    // Centrer l'Ã©lÃ©ment sur le point de drop
    var centeredX = Math.max(0, transformedX - elementWidth / 2);
    var centeredY = Math.max(0, transformedY - elementHeight / 2);

    // S'assurer que l'Ã©lÃ©ment reste dans les limites du canvas
    var clampedX = Math.max(0, Math.min(centeredX, canvasWidth - elementWidth));
    var clampedY = Math.max(0, Math.min(centeredY, canvasHeight - elementHeight));
    debugLog("[CanvasDrop] Position calculation: client(".concat(clientX, ", ").concat(clientY, ") -> canvas(").concat(canvasX, ", ").concat(canvasY, ") -> transformed(").concat(transformedX, ", ").concat(transformedY, ") -> final(").concat(clampedX, ", ").concat(clampedY, ")"));
    return {
      x: clampedX,
      y: clampedY,
      originalCanvasX: canvasX,
      originalCanvasY: canvasY,
      transformedX: transformedX,
      transformedY: transformedY
    };
  }, [canvasRef, canvasWidth, canvasHeight, state.canvas]);

  // âœ… GÃ©nÃ©ration d'ID unique pour les Ã©lÃ©ments
  var generateElementId = (0,react.useCallback)(function (type) {
    var timestamp = Date.now();
    var random = Math.random().toString(36).substr(2, 9);
    return "element_".concat(type, "_").concat(timestamp, "_").concat(random);
  }, []);

  // âœ… CrÃ©ation d'Ã©lÃ©ment avec validation
  var createElementFromDragData = (0,react.useCallback)(function (dragData, position) {
    var elementId = generateElementId(dragData.type);

    // S'assurer que width et height sont dÃ©finis
    var width = dragData.defaultProps.width || 100;
    var height = dragData.defaultProps.height || 50;

    // Fusion des propriÃ©tÃ©s par dÃ©faut avec les propriÃ©tÃ©s calculÃ©es
    var element = useCanvasDrop_objectSpread(useCanvasDrop_objectSpread({
      id: elementId,
      type: dragData.type
    }, dragData.defaultProps), {}, {
      // Position calculÃ©e (override x, y des defaultProps)
      x: position.x,
      y: position.y,
      width: width,
      height: height,
      // PropriÃ©tÃ©s systÃ¨me requises
      visible: true,
      locked: false,
      createdAt: new Date(),
      updatedAt: new Date()
    });
    return element;
  }, [generateElementId]);
  var handleDrop = (0,react.useCallback)(function (e) {
    if (!dragEnabled) {
      debugLog("[CanvasDrop] Drop ignored - drag disabled");
      return;
    }
    e.preventDefault();
    e.stopPropagation();
    setIsDragOver(false);
    debugLog("[CanvasDrop] Processing drop event");
    try {
      // Parsing des donnÃ©es de drag
      var rawData = e.dataTransfer.getData("application/json");
      if (!rawData) {
        debugWarn("[CanvasDrop] No drag data received");
        throw new Error("No drag data received");
      }
      var dragData = JSON.parse(rawData);
      debugLog("[CanvasDrop] Parsed drag data:", dragData);

      // Validation des donnÃ©es
      if (!validateDragData(dragData)) {
        throw new Error("Invalid drag data structure");
      }

      // Calcul de la position avec zoom/pan
      var elementWidth = dragData.defaultProps.width || 100;
      var elementHeight = dragData.defaultProps.height || 50;
      debugLog("[CanvasDrop] Element dimensions: ".concat(elementWidth, "x").concat(elementHeight));
      var position = calculateDropPosition(e.clientX, e.clientY, elementWidth, elementHeight);
      debugLog("[CanvasDrop] Calculated drop position:", position);

      // CrÃ©ation de l'Ã©lÃ©ment
      var newElement = createElementFromDragData(dragData, position);
      debugLog("[CanvasDrop] Created element:", {
        id: newElement.id,
        type: newElement.type,
        x: newElement.x,
        y: newElement.y
      });

      // VÃ©rification des conflits d'ID
      var existingElement = elements.find(function (el) {
        return el.id === newElement.id;
      });
      if (existingElement) {
        newElement.id = generateElementId(dragData.type);
        debugWarn("[CanvasDrop] ID conflict resolved, new ID: ".concat(newElement.id));
      }

      // Ajout au state

      dispatch({
        type: "ADD_ELEMENT",
        payload: newElement
      });
      debugLog("[CanvasDrop] Element added to canvas successfully");
    } catch (error) {
      debug_debugError("[CanvasDrop] Drop failed:", error);
    }
  }, [validateDragData, calculateDropPosition, createElementFromDragData, elements, dispatch, generateElementId, dragEnabled]);
  var handleDragOver = (0,react.useCallback)(function (e) {
    if (!dragEnabled) {
      return;
    }

    // IMPORTANT: Must call preventDefault to allow drop
    e.preventDefault();
    e.stopPropagation();
    e.dataTransfer.dropEffect = "copy";
    if (!isDragOver) {
      debugLog("[CanvasDrop] Drag over started - element hovering canvas");
      setIsDragOver(true);
    }
  }, [isDragOver, dragEnabled]);
  var handleDragLeave = (0,react.useCallback)(function (e) {
    if (!dragEnabled) {
      return;
    }

    // VÃ©rifier que le curseur sort vraiment du wrapper
    var target = e.currentTarget;
    if (!target.contains(e.relatedTarget)) {
      debugLog("[CanvasDrop] Drag leave detected - element left canvas");
      setIsDragOver(false);
    }
  }, [dragEnabled]);
  var handleDragEnter = (0,react.useCallback)(function (e) {
    if (!dragEnabled) {
      return;
    }
    e.preventDefault();
    e.stopPropagation();
  }, [dragEnabled]);
  return {
    handleDrop: handleDrop,
    handleDragOver: handleDragOver,
    handleDragLeave: handleDragLeave,
    handleDragEnter: handleDragEnter,
    isDragOver: isDragOver
  };
};
;// ./src/js/react/hooks/useCanvasInteraction.ts
function useCanvasInteraction_typeof(o) { "@babel/helpers - typeof"; return useCanvasInteraction_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, useCanvasInteraction_typeof(o); }
function useCanvasInteraction_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function useCanvasInteraction_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? useCanvasInteraction_ownKeys(Object(t), !0).forEach(function (r) { useCanvasInteraction_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : useCanvasInteraction_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function useCanvasInteraction_defineProperty(e, r, t) { return (r = useCanvasInteraction_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function useCanvasInteraction_toPropertyKey(t) { var i = useCanvasInteraction_toPrimitive(t, "string"); return "symbol" == useCanvasInteraction_typeof(i) ? i : i + ""; }
function useCanvasInteraction_toPrimitive(t, r) { if ("object" != useCanvasInteraction_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != useCanvasInteraction_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function useCanvasInteraction_toConsumableArray(r) { return useCanvasInteraction_arrayWithoutHoles(r) || useCanvasInteraction_iterableToArray(r) || useCanvasInteraction_unsupportedIterableToArray(r) || useCanvasInteraction_nonIterableSpread(); }
function useCanvasInteraction_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function useCanvasInteraction_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function useCanvasInteraction_arrayWithoutHoles(r) { if (Array.isArray(r)) return useCanvasInteraction_arrayLikeToArray(r); }
function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = useCanvasInteraction_unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function useCanvasInteraction_slicedToArray(r, e) { return useCanvasInteraction_arrayWithHoles(r) || useCanvasInteraction_iterableToArrayLimit(r, e) || useCanvasInteraction_unsupportedIterableToArray(r, e) || useCanvasInteraction_nonIterableRest(); }
function useCanvasInteraction_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function useCanvasInteraction_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return useCanvasInteraction_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? useCanvasInteraction_arrayLikeToArray(r, a) : void 0; } }
function useCanvasInteraction_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function useCanvasInteraction_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function useCanvasInteraction_arrayWithHoles(r) { if (Array.isArray(r)) return r; }





// DÃ©claration des APIs globales du navigateur

var useCanvasInteraction = function useCanvasInteraction(_ref) {
  var canvasRef = _ref.canvasRef,
    _ref$canvasWidth = _ref.canvasWidth,
    canvasWidth = _ref$canvasWidth === void 0 ? 794 : _ref$canvasWidth,
    _ref$canvasHeight = _ref.canvasHeight,
    canvasHeight = _ref$canvasHeight === void 0 ? 1123 : _ref$canvasHeight;
  var _useBuilder = useBuilder(),
    state = _useBuilder.state,
    dispatch = _useBuilder.dispatch;
  var canvasSettings = CanvasSettingsContext_useCanvasSettings();

  // DÃ©terminer le mode de sÃ©lection effectif : si sÃ©lection multiple dÃ©sactivÃ©e, forcer le mode 'click'
  var selectionMode = canvasSettings.selectionMultiSelectEnabled ? canvasSettings.canvasSelectionMode : 'click';

  // Ã‰tat pour dÃ©clencher le re-rendu du canvas pendant la sÃ©lection
  var _useState = (0,react.useState)(0),
    _useState2 = useCanvasInteraction_slicedToArray(_useState, 2),
    selectionUpdateTrigger = _useState2[0],
    setSelectionUpdateTrigger = _useState2[1];

  // Ã‰tats pour le drag et resize
  var isDraggingRef = (0,react.useRef)(false);
  var isResizingRef = (0,react.useRef)(false);
  var isRotatingRef = (0,react.useRef)(false);
  var dragStartRef = (0,react.useRef)({}); // Pour drag multiple : positions initiales de tous les Ã©lÃ©ments
  var dragMouseStartRef = (0,react.useRef)({
    x: 0,
    y: 0
  }); // Position souris au dÃ©but du drag
  var resizeMouseStartRef = (0,react.useRef)({
    x: 0,
    y: 0
  }); // Position souris au dÃ©but du resize
  var rotationMouseStartRef = (0,react.useRef)({
    x: 0,
    y: 0
  }); // Position souris au dÃ©but de la rotation
  var rotationStartRef = (0,react.useRef)({}); // Rotations initiales des Ã©lÃ©ments
  var selectedElementRef = (0,react.useRef)(null);
  var selectedElementsRef = (0,react.useRef)([]); // âœ… Track locally instead of relying on stale state
  var resizeHandleRef = (0,react.useRef)(null);
  var currentCursorRef = (0,react.useRef)('default');

  // Ã‰tats pour les modes de sÃ©lection avancÃ©s
  var isSelectingRef = (0,react.useRef)(false); // En cours de sÃ©lection lasso/rectangle
  var selectionStartRef = (0,react.useRef)({
    x: 0,
    y: 0
  }); // Point de dÃ©part de la sÃ©lection
  var selectionPointsRef = (0,react.useRef)([]); // Points pour le lasso
  var selectionRectRef = (0,react.useRef)({
    x: 0,
    y: 0,
    width: 0,
    height: 0
  }); // Rectangle de sÃ©lection

  // Refs pour les event listeners globaux pendant la sÃ©lection
  var globalMouseMoveRef = (0,react.useRef)(null);
  var globalMouseUpRef = (0,react.useRef)(null);

  // âœ… OPTIMISATION FLUIDITÃ‰: requestAnimationFrame pour synchroniser avec le refresh rate
  var rafIdRef = (0,react.useRef)(null);
  var pendingDragUpdateRef = (0,react.useRef)(null);
  var pendingRotationUpdateRef = (0,react.useRef)(null);

  // âœ… SYSTÃˆME PARAMÃˆTRES: FPS limiting et monitoring de performance
  var lastFrameTimeRef = (0,react.useRef)(0);
  var frameCountRef = (0,react.useRef)(0);
  var fpsIntervalRef = (0,react.useRef)(null);
  var performanceMetricsRef = (0,react.useRef)({
    fps: 0,
    memoryUsage: 0,
    lastUpdate: Date.now()
  });

  // âœ… CORRECTION 5: Dernier state connu pour Ã©viter closure stale
  var lastKnownStateRef = (0,react.useRef)(state);

  // âœ… SYSTÃˆME PARAMÃˆTRES: Helper pour requestAnimationFrame avec FPS limiting
  var requestAnimationFrameLimited = (0,react.useCallback)(function (callback) {
    var fpsTarget = canvasSettings.fpsTarget;
    var now = performance.now();
    var frameInterval = 1000 / fpsTarget; // Intervalle minimum entre frames

    if (now - lastFrameTimeRef.current >= frameInterval) {
      lastFrameTimeRef.current = now;
      return requestAnimationFrame(callback);
    } else {
      // Si on dÃ©passe le FPS target, diffÃ©rer l'appel
      var delay = frameInterval - (now - lastFrameTimeRef.current);
      return setTimeout(function () {
        return requestAnimationFrame(callback);
      }, delay);
    }
  }, [canvasSettings.fpsTarget]);

  // Fonctions pour gÃ©rer les Ã©vÃ©nements globaux pendant la sÃ©lection
  var startGlobalSelectionListeners = (0,react.useCallback)(function () {
    if (globalMouseMoveRef.current || globalMouseUpRef.current) return; // DÃ©jÃ  actifs

    globalMouseMoveRef.current = function (event) {
      var canvas = canvasRef.current;
      if (!canvas) return;
      var rect = canvas.getBoundingClientRect();
      var zoomScale = state.canvas.zoom / 100;

      // Calcul des coordonnÃ©es mÃªme si la souris est hors du canvas
      var canvasRelativeX = event.clientX - rect.left;
      var canvasRelativeY = event.clientY - rect.top;
      var x = (canvasRelativeX - state.canvas.pan.x) / zoomScale;
      var y = (canvasRelativeY - state.canvas.pan.y) / zoomScale;

      // Mettre Ã  jour la sÃ©lection
      if (selectionMode === 'lasso') {
        selectionPointsRef.current.push({
          x: x,
          y: y
        });
        setSelectionUpdateTrigger(function (prev) {
          return prev + 1;
        });
      } else if (selectionMode === 'rectangle') {
        var startX = Math.min(selectionStartRef.current.x, x);
        var startY = Math.min(selectionStartRef.current.y, y);
        var width = Math.abs(x - selectionStartRef.current.x);
        var height = Math.abs(y - selectionStartRef.current.y);
        selectionRectRef.current = {
          x: startX,
          y: startY,
          width: width,
          height: height
        };
        setSelectionUpdateTrigger(function (prev) {
          return prev + 1;
        });
      }
    };
    globalMouseUpRef.current = function () {
      stopGlobalSelectionListeners();
      // Terminer la sÃ©lection directement ici
      if (isSelectingRef.current) {
        var selectedElementIds = [];
        if (selectionMode === 'lasso' && selectionPointsRef.current.length > 2) {
          // Utiliser la mÃªme logique que isElementInLasso
          selectedElementIds = state.elements.filter(function (element) {
            var centerX = element.x + element.width / 2;
            var centerY = element.y + element.height / 2;
            // Logique de isPointInPolygon dupliquÃ©e
            var inside = false;
            var polygon = selectionPointsRef.current;
            for (var i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {
              var xi = polygon[i].x,
                yi = polygon[i].y;
              var xj = polygon[j].x,
                yj = polygon[j].y;
              if (yi > centerY !== yj > centerY && centerX < (xj - xi) * (centerY - yi) / (yj - yi) + xi) {
                inside = !inside;
              }
            }
            return inside;
          }).map(function (element) {
            return element.id;
          });
        } else if (selectionMode === 'rectangle' && selectionRectRef.current.width > 0 && selectionRectRef.current.height > 0) {
          // Utiliser la mÃªme logique que isElementInRectangle
          selectedElementIds = state.elements.filter(function (element) {
            var elementRight = element.x + element.width;
            var elementBottom = element.y + element.height;
            var rectRight = selectionRectRef.current.x + selectionRectRef.current.width;
            var rectBottom = selectionRectRef.current.y + selectionRectRef.current.height;
            return !(element.x > rectRight || elementRight < selectionRectRef.current.x || element.y > rectBottom || elementBottom < selectionRectRef.current.y);
          }).map(function (element) {
            return element.id;
          });
        }
        if (selectedElementIds.length > 0) {
          dispatch({
            type: 'SET_SELECTION',
            payload: selectedElementIds
          });
        } else {
          dispatch({
            type: 'CLEAR_SELECTION'
          });
        }

        // RÃ©initialiser l'Ã©tat de sÃ©lection
        isSelectingRef.current = false;
        selectionPointsRef.current = [];
        selectionRectRef.current = {
          x: 0,
          y: 0,
          width: 0,
          height: 0
        };
      }
    };
    document.addEventListener('mousemove', globalMouseMoveRef.current, {
      passive: false
    });
    document.addEventListener('mouseup', globalMouseUpRef.current, {
      passive: false
    });
  }, [canvasRef, state.canvas.zoom, state.canvas.pan, state.elements, selectionMode, dispatch]);
  var stopGlobalSelectionListeners = (0,react.useCallback)(function () {
    if (globalMouseMoveRef.current) {
      document.removeEventListener('mousemove', globalMouseMoveRef.current);
      globalMouseMoveRef.current = null;
    }
    if (globalMouseUpRef.current) {
      document.removeEventListener('mouseup', globalMouseUpRef.current);
      globalMouseUpRef.current = null;
    }
  }, []);

  // âœ… OPTIMISATION FLUIDITÃ‰: Fonction pour effectuer les updates de drag avec RAF
  var performDragUpdate = (0,react.useCallback)(function () {
    if (!pendingDragUpdateRef.current) {
      rafIdRef.current = null;
      return;
    }
    var _pendingDragUpdateRef = pendingDragUpdateRef.current,
      currentMouseX = _pendingDragUpdateRef.x,
      currentMouseY = _pendingDragUpdateRef.y;
    var lastState = lastKnownStateRef.current;

    // âœ… MODIFICATION: GÃ©rer le drag multiple
    var selectedIds = lastState.selection.selectedElements;
    if (selectedIds.length === 0) {
      rafIdRef.current = null;
      return;
    }

    // Calculer le delta de dÃ©placement de la souris depuis le dÃ©but du drag
    var mouseDeltaX = currentMouseX - dragMouseStartRef.current.x;
    var mouseDeltaY = currentMouseY - dragMouseStartRef.current.y;

    // Mettre Ã  jour tous les Ã©lÃ©ments sÃ©lectionnÃ©s
    selectedIds.forEach(function (elementId) {
      var element = lastState.elements.find(function (el) {
        return el.id === elementId;
      });
      if (!element) return;

      // RÃ©cupÃ©rer la position de dÃ©part de cet Ã©lÃ©ment spÃ©cifique
      var elementStartPos = dragStartRef.current[elementId];
      if (!elementStartPos) return;

      // Calculer la nouvelle position en appliquant le delta de la souris Ã  la position de dÃ©part
      var finalX = elementStartPos.x + mouseDeltaX;
      var finalY = elementStartPos.y + mouseDeltaY;

      // âœ… AJOUT: Logique d'accrochage Ã  la grille
      if (lastState.template.snapToGrid && lastState.canvas.gridSize > 0) {
        var gridSize = lastState.canvas.gridSize;
        var snapTolerance = 5; // TolÃ©rance de 5px pour l'accrochage

        // Calculer la distance Ã  la grille la plus proche
        var nearestGridX = Math.round(finalX / gridSize) * gridSize;
        var nearestGridY = Math.round(finalY / gridSize) * gridSize;

        // Appliquer l'accrochage seulement si on est assez proche de la grille
        if (Math.abs(finalX - nearestGridX) <= snapTolerance) {
          finalX = nearestGridX;
        }
        if (Math.abs(finalY - nearestGridY) <= snapTolerance) {
          finalY = nearestGridY;
        }
      }

      // S'assurer que l'Ã©lÃ©ment reste dans les limites du canvas
      var canvasWidthPx = canvasWidth;
      var canvasHeightPx = canvasHeight;

      // Clamp X position (laisser au moins 20px visible)
      var minVisibleWidth = Math.min(50, element.width * 0.3);
      if (finalX < 0) finalX = 0;
      if (finalX + minVisibleWidth > canvasWidthPx) finalX = canvasWidthPx - minVisibleWidth;

      // Clamp Y position (laisser au moins 20px visible)
      var minVisibleHeight = Math.min(30, element.height * 0.3);
      if (finalY < 0) finalY = 0;
      if (finalY + minVisibleHeight > canvasHeightPx) finalY = canvasHeightPx - minVisibleHeight;

      // âœ… CORRECTION 6: AmÃ©liorer la prÃ©servation des propriÃ©tÃ©s
      var completeUpdates = {
        x: finalX,
        y: finalY
      };

      // âœ… PrÃ©server TOUTES les propriÃ©tÃ©s
      var elementAsRecord = element;
      Object.keys(elementAsRecord).forEach(function (key) {
        if (key !== 'x' && key !== 'y' && key !== 'updatedAt') {
          completeUpdates[key] = elementAsRecord[key];
        }
      });

      // âœ… CRITICAL: Explicitement prÃ©server ces propriÃ©tÃ©s critiques
      if ('src' in elementAsRecord) {
        completeUpdates.src = elementAsRecord.src;
      }
      if ('logoUrl' in elementAsRecord) {
        completeUpdates.logoUrl = elementAsRecord.logoUrl;
      }
      if ('alignment' in elementAsRecord) {
        completeUpdates.alignment = elementAsRecord.alignment;
      }
      dispatch({
        type: 'UPDATE_ELEMENT',
        payload: {
          id: elementId,
          updates: completeUpdates
        }
      });
    });
    pendingDragUpdateRef.current = null;
    rafIdRef.current = null;
  }, [dispatch, canvasWidth, canvasHeight]);

  // âœ… OPTIMISATION FLUIDITÃ‰: Fonction pour effectuer les updates de rotation avec RAF
  var performRotationUpdate = (0,react.useCallback)(function () {
    if (!pendingRotationUpdateRef.current) {
      rafIdRef.current = null;
      return;
    }
    var _pendingRotationUpdat = pendingRotationUpdateRef.current,
      currentMouseX = _pendingRotationUpdat.x,
      currentMouseY = _pendingRotationUpdat.y;
    var lastState = lastKnownStateRef.current;

    // âœ… MODIFICATION: GÃ©rer la rotation multiple
    var selectedIds = lastState.selection.selectedElements;
    if (selectedIds.length === 0) {
      rafIdRef.current = null;
      return;
    }

    // Calculer le centre de rotation (centre de la sÃ©lection)
    var selectedElements = lastState.elements.filter(function (el) {
      return selectedIds.includes(el.id);
    });
    var minX = Infinity,
      minY = Infinity,
      maxX = -Infinity,
      maxY = -Infinity;
    selectedElements.forEach(function (el) {
      minX = Math.min(minX, el.x);
      minY = Math.min(minY, el.y);
      maxX = Math.max(maxX, el.x + el.width);
      maxY = Math.max(maxY, el.y + el.height);
    });
    var centerX = (minX + maxX) / 2;
    var centerY = (minY + maxY) / 2;

    // Calculer l'angle de rotation basÃ© sur la position de la souris
    var startAngle = Math.atan2(rotationMouseStartRef.current.y - centerY, rotationMouseStartRef.current.x - centerX);
    var currentAngle = Math.atan2(currentMouseY - centerY, currentMouseX - centerX);

    // Calculer la diffÃ©rence angulaire avec gestion du wrap-around
    var angleDelta = currentAngle - startAngle;

    // Normaliser l'angle entre -Ï€ et Ï€ pour Ã©viter les sauts
    while (angleDelta > Math.PI) angleDelta -= 2 * Math.PI;
    while (angleDelta < -Math.PI) angleDelta += 2 * Math.PI;

    // Ajuster la sensibilitÃ© de la rotation (moins violent)
    angleDelta *= 1.3; // Multiplier par 1.3 pour une rotation douce mais perceptible

    // Convertir en degrÃ©s
    var totalRotationDegrees = angleDelta * 180 / Math.PI;

    // âœ… AJOUT: Snap magnÃ©tique ULTRA SIMPLE - forcer Ã  0Â° quand proche
    var zeroSnapTolerance = 8; // 8 degrees (moins agressif)

    // Calculer la rotation actuelle pour chaque Ã©lÃ©ment
    selectedIds.forEach(function (elementId) {
      var element = lastState.elements.find(function (el) {
        return el.id === elementId;
      });
      if (element) {
        var initialRotation = rotationStartRef.current[elementId] || 0;
        var currentRotation = initialRotation + totalRotationDegrees;

        // Normaliser l'angle entre -180Â° et 180Â°
        var normalizedRotation = currentRotation % 360;
        if (normalizedRotation > 180) normalizedRotation -= 360;
        if (normalizedRotation < -180) normalizedRotation += 360;

        // Distance Ã  0Â°
        var distanceToZero = Math.abs(normalizedRotation);

        // SI PROCHE DE 0Â°, FORCER totalRotationDegrees pour que la rotation finale soit 0Â°
        if (distanceToZero <= zeroSnapTolerance) {
          // Forcer totalRotationDegrees pour que newRotation = 0
          totalRotationDegrees = -initialRotation;
        }
      }
    });

    // Mettre Ã  jour la rotation de tous les Ã©lÃ©ments sÃ©lectionnÃ©s
    selectedIds.forEach(function (elementId) {
      var element = lastState.elements.find(function (el) {
        return el.id === elementId;
      });
      if (element) {
        var initialRotation = rotationStartRef.current[elementId] || 0;
        var newRotation = initialRotation + totalRotationDegrees;
        dispatch({
          type: 'UPDATE_ELEMENT',
          payload: {
            id: elementId,
            updates: {
              rotation: newRotation
            }
          }
        });
      }
    });
    pendingRotationUpdateRef.current = null;
    rafIdRef.current = null;
  }, [dispatch]); // âœ… CORRECTION 3: Throttling pour handleMouseMove - optimisÃ© pour fluiditÃ© maximale
  var lastMouseMoveTimeRef = (0,react.useRef)(0);
  var MOUSEMOVE_THROTTLE_MS = 8; // RÃ©duit de 100ms Ã  8ms pour fluiditÃ© maximale (120Hz)

  // Fonction utilitaire pour dÃ©tecter les poignÃ©es de redimensionnement
  // âœ… BUGFIX-018: Consistent margin for hit detection across all element types
  var getResizeHandleAtPosition = (0,react.useCallback)(function (x, y, selectedIds, elements) {
    var handleSize = 8;
    var handleMargin = 6; // Consistent margin for all elements
    var selectedElements = elements.filter(function (el) {
      return selectedIds.includes(el.id);
    });
    var _iterator = _createForOfIteratorHelper(selectedElements),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var element = _step.value;
        // Calculer les positions des poignÃ©es (8 poignÃ©es : 4 coins + 4 milieux)
        var handles = [
        // Coins
        {
          name: 'nw',
          x: element.x - handleSize / 2,
          y: element.y - handleSize / 2
        }, {
          name: 'ne',
          x: element.x + element.width - handleSize / 2,
          y: element.y - handleSize / 2
        }, {
          name: 'sw',
          x: element.x - handleSize / 2,
          y: element.y + element.height - handleSize / 2
        }, {
          name: 'se',
          x: element.x + element.width - handleSize / 2,
          y: element.y + element.height - handleSize / 2
        },
        // Milieux des cÃ´tÃ©s
        {
          name: 'n',
          x: element.x + element.width / 2 - handleSize / 2,
          y: element.y - handleSize / 2
        }, {
          name: 's',
          x: element.x + element.width / 2 - handleSize / 2,
          y: element.y + element.height - handleSize / 2
        }, {
          name: 'w',
          x: element.x - handleSize / 2,
          y: element.y + element.height / 2 - handleSize / 2
        }, {
          name: 'e',
          x: element.x + element.width - handleSize / 2,
          y: element.y + element.height / 2 - handleSize / 2
        }];
        for (var _i = 0, _handles = handles; _i < _handles.length; _i++) {
          var handle = _handles[_i];
          // Use consistent margin for all element types
          if (x >= handle.x - handleMargin && x <= handle.x + handleSize + handleMargin && y >= handle.y - handleMargin && y <= handle.y + handleSize + handleMargin) {
            return {
              elementId: element.id,
              handle: handle.name
            };
          }
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return null;
  }, []);

  // Fonction pour crÃ©er un Ã©lÃ©ment selon le mode Ã  une position donnÃ©e
  var createElementAtPosition = (0,react.useCallback)(function (x, y, mode) {
    var elementId = "element_".concat(Date.now(), "_").concat(Math.random().toString(36).substr(2, 9));

    // âœ… AJOUT: Appliquer le snap Ã  la grille lors de la crÃ©ation d'Ã©lÃ©ments
    var finalX = x;
    var finalY = y;
    if (state.template.snapToGrid && state.canvas.gridSize > 0) {
      var gridSize = state.canvas.gridSize;
      finalX = Math.round(x / gridSize) * gridSize;
      finalY = Math.round(y / gridSize) * gridSize;
    }
    var newElement;
    switch (mode) {
      case 'rectangle':
        newElement = {
          id: elementId,
          type: 'rectangle',
          x: finalX - 50,
          // Centrer sur le clic (snapped)
          y: finalY - 50,
          width: 100,
          height: 100,
          fillColor: '#ffffff',
          strokeColor: '#000000',
          strokeWidth: 1,
          borderRadius: 0,
          rotation: 0,
          visible: true,
          locked: false,
          createdAt: new Date(),
          updatedAt: new Date()
        };
        break;
      case 'circle':
        newElement = {
          id: elementId,
          type: 'circle',
          x: finalX - 50,
          y: finalY - 50,
          width: 100,
          height: 100,
          fillColor: '#ffffff',
          strokeColor: '#000000',
          strokeWidth: 1,
          rotation: 0,
          visible: true,
          locked: false,
          createdAt: new Date(),
          updatedAt: new Date()
        };
        break;
      case 'line':
        newElement = {
          id: elementId,
          type: 'line',
          x: finalX - 50,
          y: finalY - 1,
          // Centrer verticalement sur le clic
          width: 100,
          height: 2,
          // Ã‰paisseur de la ligne
          strokeColor: '#000000',
          strokeWidth: 2,
          rotation: 0,
          visible: true,
          locked: false,
          createdAt: new Date(),
          updatedAt: new Date()
        };
        break;
      case 'text':
        newElement = {
          id: elementId,
          type: 'text',
          x: finalX - 50,
          y: finalY - 10,
          width: 100,
          height: 30,
          text: 'Texte',
          fontSize: 16,
          color: '#000000',
          align: 'left',
          rotation: 0,
          visible: true,
          locked: false,
          createdAt: new Date(),
          updatedAt: new Date()
        };
        break;
      case 'image':
        newElement = {
          id: elementId,
          type: 'image',
          x: finalX - 50,
          y: finalY - 50,
          width: 100,
          height: 100,
          src: '',
          // URL de l'image Ã  dÃ©finir
          rotation: 0,
          visible: true,
          locked: false,
          createdAt: new Date(),
          updatedAt: new Date()
        };
        break;
      default:
        return;
    }

    // Ajouter l'Ã©lÃ©ment au state
    dispatch({
      type: 'ADD_ELEMENT',
      payload: newElement
    });

    // SÃ©lectionner le nouvel Ã©lÃ©ment
    dispatch({
      type: 'SET_SELECTION',
      payload: [elementId]
    });
    selectedElementRef.current = elementId;

    // Remettre en mode sÃ©lection aprÃ¨s crÃ©ation
    dispatch({
      type: 'SET_MODE',
      payload: 'select'
    });
  }, [dispatch, state.template.snapToGrid, state.canvas.gridSize]);

  // âœ… Syncer la ref avec l'Ã©tat Redux (correction: Ã©viter la dÃ©pendance sur state entier)
  (0,react.useEffect)(function () {
    selectedElementsRef.current = state.selection.selectedElements;
    // âœ… CORRECTION 5: Garder un snapshot du state courant
    lastKnownStateRef.current = state;
  }, [state.selection.selectedElements, state.elements, state.canvas]); // DÃ©pendances spÃ©cifiques au lieu de state entier

  // âœ… SYSTÃˆME PARAMÃˆTRES: Initialiser le monitoring de performance et FPS limiting
  (0,react.useEffect)(function () {
    var fpsTarget = canvasSettings.fpsTarget,
      performanceMonitoring = canvasSettings.performanceMonitoring,
      debugMode = canvasSettings.debugMode,
      memoryLimitJs = canvasSettings.memoryLimitJs;

    // Initialiser le monitoring FPS si activÃ©
    if (performanceMonitoring || debugMode) {
      var updateFPS = function updateFPS() {
        var now = performance.now();
        frameCountRef.current++;
        if (now - lastFrameTimeRef.current >= 1000) {
          performanceMetricsRef.current.fps = Math.round(frameCountRef.current * 1000 / (now - lastFrameTimeRef.current));
          frameCountRef.current = 0;
          lastFrameTimeRef.current = now;

          // Monitoring mÃ©moire si activÃ©
          if (performanceMonitoring && 'memory' in performance) {
            var memory = performance.memory;
            performanceMetricsRef.current.memoryUsage = Math.round(memory.usedJSHeapSize / 1024 / 1024); // MB

            // VÃ©rifier la limite mÃ©moire
            if (memory.usedJSHeapSize > memoryLimitJs * 1024 * 1024) {
              debugWarn("[Canvas Performance] M\xE9moire JS d\xE9pass\xE9e: ".concat(performanceMetricsRef.current.memoryUsage, "MB / ").concat(memoryLimitJs, "MB"));
            }
          }
          performanceMetricsRef.current.lastUpdate = Date.now();
        }
      };

      // DÃ©marrer le monitoring FPS
      fpsIntervalRef.current = setInterval(updateFPS, 100);
      if (debugMode) {
        debugLog("[Canvas Performance] Monitoring activ\xE9 - FPS cible: ".concat(fpsTarget, ", M\xE9moire limite: ").concat(memoryLimitJs, "MB"));
      }
    }

    // Cleanup
    return function () {
      if (fpsIntervalRef.current) {
        clearInterval(fpsIntervalRef.current);
        fpsIntervalRef.current = null;
      }
    };
  }, [canvasSettings.fpsTarget, canvasSettings.performanceMonitoring, canvasSettings.debugMode, canvasSettings.memoryLimitJs]);

  // âœ… CORRECTION 4: Fonction helper pour vÃ©rifier que rect est valide
  var validateCanvasRect = function validateCanvasRect(rect) {
    // VÃ©rifier que rect a des dimensions positives et que left/top sont raisonnables
    if (!rect || rect.width <= 0 || rect.height <= 0) {
      return false;
    }

    // Si rect.left ou rect.top sont trÃ¨s nÃ©gatifs (canvas hors-Ã©cran), c'est OK
    // Mais si ils sont NaN, c'est un problÃ¨me
    if (isNaN(rect.left) || isNaN(rect.top) || isNaN(rect.right) || isNaN(rect.bottom)) {
      return false;
    }
    return true;
  };

  // Gestionnaire de clic pour la sÃ©lection et crÃ©ation d'Ã©lÃ©ments
  // Fonction utilitaire pour vÃ©rifier si un point est dans la hitbox d'un Ã©lÃ©ment (avec marge pour les lignes)
  var isPointInElement = function isPointInElement(x, y, element) {
    // Pour les lignes, ajouter une marge RÃ‰DUITE pour faciliter la sÃ©lection sans overlap excessif
    // Pour les autres Ã©lÃ©ments, pas de marge
    var hitboxMargin = 0;
    if (element.type === 'line') {
      // Marge trÃ¨s rÃ©duite: 1-2px max pour les lignes fines
      hitboxMargin = Math.max(1, Math.min(2, element.height * 0.5));
    }
    var left = element.x - hitboxMargin;
    var right = element.x + element.width + hitboxMargin;
    var top = element.y - hitboxMargin;
    var bottom = element.y + element.height + hitboxMargin;
    return x >= left && x <= right && y >= top && y <= bottom;
  };
  var handleCanvasClick = (0,react.useCallback)(function (event) {
    var canvas = canvasRef.current;
    if (!canvas) return;
    var rect = canvas.getBoundingClientRect();

    // âœ… BUGFIX-008: Validate rect BEFORE using it
    if (!validateCanvasRect(rect)) {
      return;
    }

    // Note: zoom est en pourcentage (100%), donc diviser par 100 pour obtenir le facteur d'Ã©chelle
    var zoomScale = state.canvas.zoom / 100;
    var x = (event.clientX - rect.left - state.canvas.pan.x) / zoomScale;
    var y = (event.clientY - rect.top - state.canvas.pan.y) / zoomScale;

    // âœ… CORRECTION: VÃ©rifier qu'aucun Ã©lÃ©ment n'est cliquÃ© (pour Ã©viter duplication avec handleMouseDown)
    // Note: On cherche du dernier vers le premier pour cohÃ©rence avec handleMouseDown
    var clickedElement = useCanvasInteraction_toConsumableArray(state.elements).reverse().find(function (el) {
      return isPointInElement(x, y, el);
    });

    // Ne crÃ©er un Ã©lÃ©ment que si on clique dans le vide ET qu'on n'est pas en mode sÃ©lection
    if (!clickedElement && state.mode !== 'select') {
      createElementAtPosition(x, y, state.mode);
    }
    // Note: La sÃ©lection est gÃ©rÃ©e exclusivement par handleMouseDown
  }, [state, canvasRef, createElementAtPosition]);

  // Gestionnaire de mouse down pour commencer le drag ou resize
  var handleMouseDown = (0,react.useCallback)(function (event) {
    var canvas = canvasRef.current;
    if (!canvas) {
      debugLog('[CanvasInteraction] Mouse down ignored - canvas ref null');
      return;
    }
    var rect = canvas.getBoundingClientRect();

    // âœ… CORRECTION 4: VÃ©rifier que rect est valide avant de l'utiliser
    if (!validateCanvasRect(rect)) {
      debugLog('[CanvasInteraction] Mouse down ignored - invalid canvas rect');
      return;
    }

    // Note: zoom est en pourcentage (100%), donc diviser par 100 pour obtenir le facteur d'Ã©chelle
    var zoomScale = state.canvas.zoom / 100;

    // Calcul des coordonnÃ©es du canvas:
    // 1. (event.clientX - rect.left) = position relative au canvas en viewport space
    // 2. - state.canvas.pan.x = appliquer le pan (qui est en canvas space)
    // 3. / zoomScale = appliquer le zoom
    var canvasRelativeX = event.clientX - rect.left;
    var canvasRelativeY = event.clientY - rect.top;
    var x = (canvasRelativeX - state.canvas.pan.x) / zoomScale;
    var y = (canvasRelativeY - state.canvas.pan.y) / zoomScale;
    debugLog("[CanvasInteraction] Mouse down at canvas coords (".concat(x.toFixed(1), ", ").concat(y.toFixed(1), "), zoom: ").concat(zoomScale, ", pan: (").concat(state.canvas.pan.x.toFixed(1), ", ").concat(state.canvas.pan.y.toFixed(1), ")"));

    // âœ… Chercher n'importe quel Ã©lÃ©ment au clic (sÃ©lectionnÃ© ou pas)
    // Note: On cherche du dernier vers le premier pour sÃ©lectionner l'Ã©lÃ©ment rendu au-dessus
    var clickedElement = useCanvasInteraction_toConsumableArray(state.elements).reverse().find(function (el) {
      var isIn = isPointInElement(x, y, el);
      return isIn;
    });

    // Si on a cliquÃ© sur un Ã©lÃ©ment
    if (clickedElement) {
      debugLog("[CanvasInteraction] Clicked element: ".concat(clickedElement.type, " (").concat(clickedElement.id, ")"));
      // âœ… Utiliser state.selection directement (plus fiable que ref)
      var isAlreadySelected = state.selection.selectedElements.includes(clickedElement.id);

      // âœ… VÃ©rifier si la sÃ©lection multiple est activÃ©e et si Ctrl est enfoncÃ©
      var isMultiSelect = canvasSettings.selectionMultiSelectEnabled && event.ctrlKey;
      if (isMultiSelect) {
        debugLog("[CanvasInteraction] Multi-select mode - ".concat(isAlreadySelected ? 'removing' : 'adding', " element ").concat(clickedElement.id));
        // âœ… Mode sÃ©lection multiple
        if (isAlreadySelected) {
          // Retirer l'Ã©lÃ©ment de la sÃ©lection
          var newSelection = state.selection.selectedElements.filter(function (id) {
            return id !== clickedElement.id;
          });
          dispatch({
            type: 'SET_SELECTION',
            payload: newSelection
          });
        } else {
          // Ajouter l'Ã©lÃ©ment Ã  la sÃ©lection
          var _newSelection = [].concat(useCanvasInteraction_toConsumableArray(state.selection.selectedElements), [clickedElement.id]);
          dispatch({
            type: 'SET_SELECTION',
            payload: _newSelection
          });
        }
        event.preventDefault();
        return;
      } else {
        // âœ… Mode sÃ©lection simple (comportement actuel)
        if (!isAlreadySelected) {
          debugLog("[CanvasInteraction] Selecting element ".concat(clickedElement.id));
          dispatch({
            type: 'SET_SELECTION',
            payload: [clickedElement.id]
          });
          // âœ… CORRECTION: PrÃ©parer le drag immÃ©diatement pour permettre drag aprÃ¨s sÃ©lection
          isDraggingRef.current = true;
          // Stocker les positions de dÃ©part de tous les Ã©lÃ©ments sÃ©lectionnÃ©s
          dragStartRef.current = useCanvasInteraction_defineProperty({}, clickedElement.id, {
            x: clickedElement.x,
            y: clickedElement.y
          });
          dragMouseStartRef.current = {
            x: x,
            y: y
          }; // Position souris
          selectedElementRef.current = clickedElement.id;
          event.preventDefault();
          return;
        }

        // âœ… L'Ã©lÃ©ment est dÃ©jÃ  sÃ©lectionnÃ© - prÃ©parer le drag
        debugLog("[CanvasInteraction] Starting drag for ".concat(state.selection.selectedElements.length, " selected elements"));
        isDraggingRef.current = true;
        // Stocker les positions de dÃ©part de tous les Ã©lÃ©ments sÃ©lectionnÃ©s
        var startPositions = {};
        state.selection.selectedElements.forEach(function (id) {
          var element = state.elements.find(function (el) {
            return el.id === id;
          });
          if (element) {
            startPositions[id] = {
              x: element.x,
              y: element.y
            };
          }
        });
        dragStartRef.current = startPositions;
        dragMouseStartRef.current = {
          x: x,
          y: y
        }; // Position souris
        selectedElementRef.current = clickedElement.id;
        event.preventDefault();
        return;
      }
    }

    // VÃ©rifier si on clique sur une poignÃ©e de redimensionnement
    var resizeHandle = getResizeHandleAtPosition(x, y, state.selection.selectedElements, state.elements);
    if (resizeHandle) {
      debugLog("[CanvasInteraction] Starting resize - element: ".concat(resizeHandle.elementId, ", handle: ").concat(resizeHandle.handle));
      isResizingRef.current = true;
      resizeHandleRef.current = resizeHandle.handle;
      selectedElementRef.current = resizeHandle.elementId;
      resizeMouseStartRef.current = {
        x: x,
        y: y
      }; // Position souris au dÃ©but du resize
      event.preventDefault();
      return;
    }

    // VÃ©rifier si on clique sur une poignÃ©e de rotation
    if ((canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.selectionRotationEnabled) !== false && state.selection.selectedElements.length > 0) {
      var selectedElements = state.elements.filter(function (el) {
        return state.selection.selectedElements.includes(el.id);
      });
      if (selectedElements.length > 0) {
        // Calculer les bounds de sÃ©lection
        var minX = Infinity,
          minY = Infinity,
          maxX = -Infinity,
          maxY = -Infinity;
        selectedElements.forEach(function (el) {
          minX = Math.min(minX, el.x);
          minY = Math.min(minY, el.y);
          maxX = Math.max(maxX, el.x + el.width);
          maxY = Math.max(maxY, el.y + el.height);
        });

        // Position de la poignÃ©e de rotation
        var centerX = (minX + maxX) / 2;
        var rotationHandleY = minY - 20;
        var rotationHandleSize = 8;

        // VÃ©rifier si on est sur la poignÃ©e de rotation
        var distance = Math.sqrt(Math.pow(x - centerX, 2) + Math.pow(y - rotationHandleY, 2));
        if (distance <= rotationHandleSize / 2) {
          debugLog("[CanvasInteraction] Starting rotation for ".concat(state.selection.selectedElements.length, " elements"));
          isRotatingRef.current = true;
          rotationMouseStartRef.current = {
            x: x,
            y: y
          };

          // Stocker les rotations initiales de tous les Ã©lÃ©ments sÃ©lectionnÃ©s
          var initialRotations = {};
          state.selection.selectedElements.forEach(function (elementId) {
            var element = state.elements.find(function (el) {
              return el.id === elementId;
            });
            if (element) {
              initialRotations[elementId] = element.rotation || 0;
            }
          });
          rotationStartRef.current = initialRotations;
          event.preventDefault();
          return;
        }
      }
    }

    // âœ… Sinon on a cliquÃ© sur le vide - gÃ©rer selon le mode de sÃ©lection
    if (selectionMode === 'lasso' || selectionMode === 'rectangle') {
      debugLog("[CanvasInteraction] Starting ".concat(selectionMode, " selection at (").concat(x.toFixed(1), ", ").concat(y.toFixed(1), ")"));
      // Commencer une nouvelle sÃ©lection
      isSelectingRef.current = true;
      selectionStartRef.current = {
        x: x,
        y: y
      };
      selectionPointsRef.current = [{
        x: x,
        y: y
      }];
      if (selectionMode === 'rectangle') {
        selectionRectRef.current = {
          x: x,
          y: y,
          width: 0,
          height: 0
        };
      }
      // DÃ©marrer les listeners globaux pour permettre la sÃ©lection hors canvas
      startGlobalSelectionListeners();
      // Ne pas dÃ©sÃ©lectionner immÃ©diatement, attendre la fin de la sÃ©lection
      event.preventDefault();
      return;
    } else {
      // Mode clic simple - dÃ©sÃ©lectionner
      if (state.selection.selectedElements.length > 0) {
        debugLog("[CanvasInteraction] Clearing selection (".concat(state.selection.selectedElements.length, " elements)"));
        dispatch({
          type: 'CLEAR_SELECTION'
        });
        selectedElementRef.current = null;
      }
    }
  }, [state, canvasRef, dispatch, getResizeHandleAtPosition]);

  // Gestionnaire de mouse up pour terminer le drag ou resize
  var handleMouseUp = (0,react.useCallback)(function () {
    debugLog("[CanvasInteraction] Mouse up - ending interactions (dragging: ".concat(isDraggingRef.current, ", resizing: ").concat(isResizingRef.current, ", rotating: ").concat(isRotatingRef.current, ", selecting: ").concat(isSelectingRef.current, ")"));

    // Annuler tout RAF en cours et effectuer un dernier update si nÃ©cessaire
    if (rafIdRef.current !== null) {
      cancelAnimationFrame(rafIdRef.current);
      rafIdRef.current = null;

      // Effectuer un dernier update si il y en a un en attente
      if (pendingDragUpdateRef.current) {
        performDragUpdate();
      }
      if (pendingRotationUpdateRef.current) {
        performRotationUpdate();
      }
    }

    // âœ… AJOUT: Snap final ultra simple
    var lastState = lastKnownStateRef.current;
    var selectedIds = lastState.selection.selectedElements;
    if (selectedIds.length > 0 && isRotatingRef.current) {
      selectedIds.forEach(function (elementId) {
        var element = lastState.elements.find(function (el) {
          return el.id === elementId;
        });
        if (element) {
          var currentRotation = element.rotation || 0;

          // Normaliser
          var normalizedRotation = currentRotation % 360;
          if (normalizedRotation > 180) normalizedRotation -= 360;
          if (normalizedRotation < -180) normalizedRotation += 360;

          // Si dans les 10Â°, forcer Ã  0Â°
          var finalSnapThreshold = 10; // 10 degrees (moins agressif)
          if (Math.abs(normalizedRotation) <= finalSnapThreshold) {
            dispatch({
              type: 'UPDATE_ELEMENT',
              payload: {
                id: elementId,
                updates: {
                  rotation: 0
                }
              }
            });
          }
        }
      });
    }

    // Finaliser la sÃ©lection lasso/rectangle si en cours
    if (isSelectingRef.current) {
      var selectedElementIds = [];
      if (selectionMode === 'lasso' && selectionPointsRef.current.length > 2) {
        // SÃ©lection lasso : vÃ©rifier quels Ã©lÃ©ments sont Ã  l'intÃ©rieur du polygone
        selectedElementIds = state.elements.filter(function (element) {
          return isElementInLasso(element, selectionPointsRef.current);
        }).map(function (element) {
          return element.id;
        });
        debugLog("[CanvasInteraction] Lasso selection completed - ".concat(selectedElementIds.length, " elements selected"));
      } else if (selectionMode === 'rectangle' && selectionRectRef.current.width > 0 && selectionRectRef.current.height > 0) {
        // SÃ©lection rectangle : vÃ©rifier quels Ã©lÃ©ments intersectent le rectangle
        selectedElementIds = state.elements.filter(function (element) {
          return isElementInRectangle(element, selectionRectRef.current);
        }).map(function (element) {
          return element.id;
        });
        debugLog("[CanvasInteraction] Rectangle selection completed - ".concat(selectedElementIds.length, " elements selected"));
      }

      // Appliquer la sÃ©lection
      if (selectedElementIds.length > 0) {
        debugLog("[CanvasInteraction] Applying selection: ".concat(selectedElementIds.join(', ')));
        dispatch({
          type: 'SET_SELECTION',
          payload: selectedElementIds
        });
      } else {
        debugLog("[CanvasInteraction] No elements selected - clearing selection");
        dispatch({
          type: 'CLEAR_SELECTION'
        });
      }

      // RÃ©initialiser l'Ã©tat de sÃ©lection
      isSelectingRef.current = false;
      selectionPointsRef.current = [];
      selectionRectRef.current = {
        x: 0,
        y: 0,
        width: 0,
        height: 0
      };
    }
    isDraggingRef.current = false;
    isResizingRef.current = false;
    isRotatingRef.current = false;
    resizeHandleRef.current = null;
    selectedElementRef.current = null;
    rotationStartRef.current = {};
    pendingRotationUpdateRef.current = null;
  }, [performDragUpdate, performRotationUpdate, dispatch]);

  // Fonction pour obtenir le curseur de redimensionnement selon la poignÃ©e
  var getResizeCursor = function getResizeCursor(handle) {
    switch (handle) {
      case 'nw':
      case 'se':
        return 'nw-resize';
      case 'ne':
      case 'sw':
        return 'ne-resize';
      case 'n':
        return 'n-resize';
      case 's':
        return 's-resize';
      case 'w':
        return 'w-resize';
      case 'e':
        return 'e-resize';
      default:
        return 'default';
    }
  };

  // Fonction pour dÃ©terminer le curseur appropriÃ© selon la position
  var getCursorAtPosition = (0,react.useCallback)(function (x, y) {
    // Si on est en train de draguer ou redimensionner, garder le curseur appropriÃ©
    if (isDraggingRef.current) {
      return 'grabbing';
    }
    if (isResizingRef.current) {
      return getResizeCursor(resizeHandleRef.current);
    }
    if (isRotatingRef.current) {
      return 'grabbing';
    }

    // VÃ©rifier si on est sur une poignÃ©e de rotation
    if ((canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.selectionRotationEnabled) !== false && state.selection.selectedElements.length > 0) {
      var selectedElements = state.elements.filter(function (el) {
        return state.selection.selectedElements.includes(el.id);
      });
      if (selectedElements.length > 0) {
        // Calculer les bounds de sÃ©lection
        var minX = Infinity,
          minY = Infinity,
          maxX = -Infinity,
          maxY = -Infinity;
        selectedElements.forEach(function (el) {
          minX = Math.min(minX, el.x);
          minY = Math.min(minY, el.y);
          maxX = Math.max(maxX, el.x + el.width);
          maxY = Math.max(maxY, el.y + el.height);
        });

        // Position de la poignÃ©e de rotation
        var centerX = (minX + maxX) / 2;
        var rotationHandleY = minY - 20;
        var rotationHandleSize = 8;

        // VÃ©rifier si on est sur la poignÃ©e de rotation
        var distance = Math.sqrt(Math.pow(x - centerX, 2) + Math.pow(y - rotationHandleY, 2));
        if (distance <= rotationHandleSize / 2) {
          return 'grab';
        }
      }
    }

    // VÃ©rifier si on est sur une poignÃ©e de redimensionnement
    var resizeHandle = getResizeHandleAtPosition(x, y, state.selection.selectedElements, state.elements);
    if (resizeHandle) {
      return getResizeCursor(resizeHandle.handle);
    }

    // VÃ©rifier si on est sur un Ã©lÃ©ment sÃ©lectionnÃ© (pour le dÃ©placement)
    if (state.selection.selectedElements.length > 0) {
      var elementUnderMouse = state.elements.find(function (el) {
        return state.selection.selectedElements.includes(el.id) && isPointInElement(x, y, el);
      });
      if (elementUnderMouse) {
        return 'grab';
      }
    }

    // Curseur par dÃ©faut
    return 'default';
  }, [state.selection.selectedElements, state.elements, getResizeHandleAtPosition, canvasSettings.selectionRotationEnabled]);

  // Fonction pour mettre Ã  jour le curseur du canvas
  var updateCursor = (0,react.useCallback)(function (cursor) {
    var canvas = canvasRef.current;
    if (canvas && cursor !== currentCursorRef.current) {
      canvas.style.cursor = cursor;
      currentCursorRef.current = cursor;
    }
  }, [canvasRef]);

  // Fonction utilitaire pour calculer le redimensionnement
  var calculateResize = (0,react.useCallback)(function (element, handle, currentX, currentY, _startPos) {
    var updates = {};
    var MIN_SIZE = 20;
    switch (handle) {
      case 'se':
        {
          // Sud-Est (coin bas-droit) - coin suit directement la souris
          updates.width = Math.max(MIN_SIZE, currentX - element.x);
          updates.height = Math.max(MIN_SIZE, currentY - element.y);
          break;
        }
      case 'sw':
        {
          // Sud-Ouest (coin bas-gauche)
          var newX = Math.min(currentX, element.x + element.width - MIN_SIZE);
          updates.width = Math.max(MIN_SIZE, element.x + element.width - newX);
          updates.x = newX;
          updates.height = Math.max(MIN_SIZE, currentY - element.y);
          break;
        }
      case 'ne':
        {
          // Nord-Est (coin haut-droit)
          var newY = Math.min(currentY, element.y + element.height - MIN_SIZE);
          updates.width = Math.max(MIN_SIZE, currentX - element.x);
          updates.height = Math.max(MIN_SIZE, element.y + element.height - newY);
          updates.y = newY;
          break;
        }
      case 'nw':
        {
          // Nord-Ouest (coin haut-gauche) - coin suit directement la souris
          var _newX = Math.min(currentX, element.x + element.width - MIN_SIZE);
          var _newY = Math.min(currentY, element.y + element.height - MIN_SIZE);
          updates.width = Math.max(MIN_SIZE, element.x + element.width - _newX);
          updates.height = Math.max(MIN_SIZE, element.y + element.height - _newY);
          updates.x = _newX;
          updates.y = _newY;
          break;
        }
      case 'n':
        {
          // Nord (haut)
          var _newY2 = Math.min(currentY, element.y + element.height - MIN_SIZE);
          updates.height = Math.max(MIN_SIZE, element.y + element.height - _newY2);
          updates.y = _newY2;
          break;
        }
      case 's':
        {
          // Sud (bas) - coin suit directement la souris
          updates.height = Math.max(MIN_SIZE, currentY - element.y);
          break;
        }
      case 'w':
        {
          // Ouest (gauche)
          var _newX2 = Math.min(currentX, element.x + element.width - MIN_SIZE);
          updates.width = Math.max(MIN_SIZE, element.x + element.width - _newX2);
          updates.x = _newX2;
          break;
        }
      case 'e':
        {
          // Est (droite) - coin suit directement la souris
          updates.width = Math.max(MIN_SIZE, currentX - element.x);
          break;
        }
    }

    // âœ… AJOUT: Appliquer le snap Ã  la grille pour les positions lors du redimensionnement
    if (state.template.snapToGrid && state.canvas.gridSize > 0) {
      var gridSize = state.canvas.gridSize;
      var snapTolerance = 5;
      if (updates.x !== undefined) {
        var nearestGridX = Math.round(updates.x / gridSize) * gridSize;
        if (Math.abs(updates.x - nearestGridX) <= snapTolerance) {
          updates.x = nearestGridX;
        }
      }
      if (updates.y !== undefined) {
        var nearestGridY = Math.round(updates.y / gridSize) * gridSize;
        if (Math.abs(updates.y - nearestGridY) <= snapTolerance) {
          updates.y = nearestGridY;
        }
      }
    }
    return updates;
  }, [state.template.snapToGrid, state.canvas.gridSize]);

  // Gestionnaire de mouse move pour le drag, resize et curseur
  var handleMouseMove = (0,react.useCallback)(function (event) {
    // âœ… CORRECTION 3: Throttling - limiter la frÃ©quence des updates
    var now = Date.now();
    if (now - lastMouseMoveTimeRef.current < MOUSEMOVE_THROTTLE_MS) {
      return; // Skip cet event, trop rapide
    }
    lastMouseMoveTimeRef.current = now;
    var canvas = canvasRef.current;
    if (!canvas) return;
    var rect = canvas.getBoundingClientRect();
    // Note: zoom est en pourcentage (100%), donc diviser par 100 pour obtenir le facteur d'Ã©chelle
    var zoomScale = state.canvas.zoom / 100;

    // Calcul correct des coordonnÃ©es avec zoom et pan
    var canvasRelativeX = event.clientX - rect.left;
    var canvasRelativeY = event.clientY - rect.top;
    var x = (canvasRelativeX - state.canvas.pan.x) / zoomScale;
    var y = (canvasRelativeY - state.canvas.pan.y) / zoomScale;

    // Mettre Ã  jour le curseur
    var cursor = getCursorAtPosition(x, y);
    updateCursor(cursor);

    // GÃ©rer la sÃ©lection lasso/rectangle en cours
    // Note: Si les listeners globaux sont actifs, la gestion se fait dans globalMouseMoveRef
    if (isSelectingRef.current && !globalMouseMoveRef.current) {
      if (selectionMode === 'lasso') {
        // Ajouter le point actuel au lasso
        selectionPointsRef.current.push({
          x: x,
          y: y
        });
        // Forcer le re-rendu pour afficher le lasso en temps rÃ©el
        setSelectionUpdateTrigger(function (prev) {
          return prev + 1;
        });
      } else if (selectionMode === 'rectangle') {
        // Mettre Ã  jour le rectangle de sÃ©lection
        var startX = Math.min(selectionStartRef.current.x, x);
        var startY = Math.min(selectionStartRef.current.y, y);
        var width = Math.abs(x - selectionStartRef.current.x);
        var height = Math.abs(y - selectionStartRef.current.y);
        selectionRectRef.current = {
          x: startX,
          y: startY,
          width: width,
          height: height
        };
        // Forcer le re-rendu pour afficher le rectangle en temps rÃ©el
        setSelectionUpdateTrigger(function (prev) {
          return prev + 1;
        });
      }
      return;
    }
    if (isDraggingRef.current && selectedElementRef.current) {
      // âœ… OPTIMISATION FLUIDITÃ‰: Pour le drag multiple, passer directement les coordonnÃ©es actuelles de la souris
      // performDragUpdate calculera la nouvelle position pour chaque Ã©lÃ©ment individuellement
      pendingDragUpdateRef.current = {
        x: x,
        y: y
      };

      // Programmer l'update avec RAF limitÃ© si pas dÃ©jÃ  programmÃ©
      if (rafIdRef.current === null) {
        rafIdRef.current = requestAnimationFrameLimited(performDragUpdate);
      }
    } else if (isResizingRef.current && selectedElementRef.current && resizeHandleRef.current) {
      debugLog("[CanvasInteraction] Resizing element ".concat(selectedElementRef.current, " with handle ").concat(resizeHandleRef.current, " at (").concat(x.toFixed(1), ", ").concat(y.toFixed(1), ")"));

      // âœ… BALANCED: Preserve essential properties without overkill
      var lastState = lastKnownStateRef.current;
      var element = lastState.elements.find(function (el) {
        return el.id === selectedElementRef.current;
      });
      if (!element) return;
      var resizeUpdates = calculateResize(element, resizeHandleRef.current, x, y, resizeMouseStartRef.current);

      // âœ… Preserve essential visual properties (corners, styling, etc.)
      var essentialUpdates = useCanvasInteraction_objectSpread({}, resizeUpdates);

      // Keep all properties except the ones we're updating and updatedAt
      var elementAsRecord = element;
      Object.keys(elementAsRecord).forEach(function (key) {
        if (!(key in resizeUpdates) && key !== 'updatedAt') {
          essentialUpdates[key] = elementAsRecord[key];
        }
      });
      dispatch({
        type: 'UPDATE_ELEMENT',
        payload: {
          id: selectedElementRef.current,
          updates: essentialUpdates
        }
      });
    } else if (isRotatingRef.current && state.selection.selectedElements.length > 0) {
      debugLog("[CanvasInteraction] Rotating ".concat(state.selection.selectedElements.length, " elements at mouse position (").concat(x.toFixed(1), ", ").concat(y.toFixed(1), ")"));

      // âœ… OPTIMISATION FLUIDITÃ‰: Pour la rotation, passer les coordonnÃ©es actuelles de la souris
      // performRotationUpdate calculera la rotation pour tous les Ã©lÃ©ments
      pendingRotationUpdateRef.current = {
        x: x,
        y: y
      };

      // Programmer l'update avec RAF limitÃ© si pas dÃ©jÃ  programmÃ©
      if (rafIdRef.current === null) {
        rafIdRef.current = requestAnimationFrameLimited(performRotationUpdate);
      }
    }
  }, [dispatch, canvasRef, getCursorAtPosition, updateCursor, calculateResize, state.canvas, performDragUpdate]);

  // âœ… SYSTÃˆME PARAMÃˆTRES: Fonction pour obtenir les mÃ©triques de performance
  var getPerformanceMetrics = (0,react.useCallback)(function () {
    return {
      fps: performanceMetricsRef.current.fps,
      memoryUsage: performanceMetricsRef.current.memoryUsage,
      memoryLimit: canvasSettings.memoryLimitJs,
      fpsTarget: canvasSettings.fpsTarget,
      lastUpdate: performanceMetricsRef.current.lastUpdate
    };
  }, [canvasSettings.memoryLimitJs, canvasSettings.fpsTarget]);

  // âœ… SYSTÃˆME PARAMÃˆTRES: Gestionnaire d'erreurs avec reporting
  var reportError = (0,react.useCallback)(function (error, context) {
    if (canvasSettings.errorReporting) {
      debug_debugError("[Canvas Error Report] ".concat(context, ":"), error);
      // Ici on pourrait envoyer l'erreur Ã  un service de monitoring
      // Pour l'instant, on log juste avec plus de dÃ©tails
      console.error("[PDF Builder Canvas Error] ".concat(context, ":"), {
        message: error.message,
        stack: error.stack,
        timestamp: new Date().toISOString(),
        canvasSettings: {
          fpsTarget: canvasSettings.fpsTarget,
          memoryLimitJs: canvasSettings.memoryLimitJs,
          performanceMonitoring: canvasSettings.performanceMonitoring
        },
        performanceMetrics: getPerformanceMetrics()
      });
    }
  }, [canvasSettings.errorReporting, canvasSettings, getPerformanceMetrics]);

  // Cleanup des listeners globaux au dÃ©montage du composant
  (0,react.useEffect)(function () {
    return function () {
      stopGlobalSelectionListeners();
    };
  }, [stopGlobalSelectionListeners]);

  // Gestionnaire de clic droit pour afficher le menu contextuel
  var handleContextMenu = (0,react.useCallback)(function (event, onContextMenu) {
    event.preventDefault(); // EmpÃªcher le menu contextuel par dÃ©faut du navigateur

    var canvas = canvasRef.current;
    if (!canvas) return;

    // Pour le menu contextuel, nous utilisons les coordonnÃ©es absolues de la souris
    // (pas les coordonnÃ©es transformÃ©es du canvas)
    var menuX = event.clientX;
    var menuY = event.clientY;

    // Pour la dÃ©tection d'Ã©lÃ©ment, nous utilisons les coordonnÃ©es du canvas
    // Les Ã©lÃ©ments sont stockÃ©s dans l'espace monde (avec pan et zoom)
    // Pour la dÃ©tection, utilisons les coordonnÃ©es dans l'espace canvas
    var rect = canvas.getBoundingClientRect();
    var rawCanvasX = event.clientX - rect.left;
    var rawCanvasY = event.clientY - rect.top;

    // Transformer en coordonnÃ©es monde (inverse des transformations du canvas)
    // Note: zoom est en pourcentage (100%), donc diviser par 100 pour obtenir le facteur d'Ã©chelle
    var zoomScale = state.canvas.zoom / 100;
    var canvasX = (rawCanvasX - state.canvas.pan.x) / zoomScale;
    var canvasY = (rawCanvasY - state.canvas.pan.y) / zoomScale;

    // Trouver l'Ã©lÃ©ment cliquÃ© (avec hitbox adaptÃ©e)
    var clickedElement = state.elements.find(function (el) {
      return isPointInElement(canvasX, canvasY, el);
    });
    if (clickedElement) {
      // Ouvrir le menu contextuel pour l'Ã©lÃ©ment
      onContextMenu(menuX, menuY, clickedElement.id);
    } else {
      // Ouvrir le menu contextuel gÃ©nÃ©ral du canvas
      onContextMenu(menuX, menuY);
    }
  }, [state, canvasRef]);

  // Fonctions helper pour la sÃ©lection avancÃ©e
  var isElementInRectangle = (0,react.useCallback)(function (element, rect) {
    // VÃ©rifier si l'Ã©lÃ©ment intersecte ou est contenu dans le rectangle
    var elementRight = element.x + element.width;
    var elementBottom = element.y + element.height;
    var rectRight = rect.x + rect.width;
    var rectBottom = rect.y + rect.height;

    // VÃ©rifier l'intersection
    return !(element.x > rectRight || elementRight < rect.x || element.y > rectBottom || elementBottom < rect.y);
  }, []);
  var isElementInLasso = (0,react.useCallback)(function (element, points) {
    if (points.length < 3) return false;

    // Utiliser l'algorithme du point dans le polygone (ray casting)
    // VÃ©rifier si le centre de l'Ã©lÃ©ment est dans le lasso
    var centerX = element.x + element.width / 2;
    var centerY = element.y + element.height / 2;
    return isPointInPolygon(centerX, centerY, points);
  }, []);
  var isPointInPolygon = function isPointInPolygon(x, y, polygon) {
    var inside = false;
    for (var i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {
      var xi = polygon[i].x,
        yi = polygon[i].y;
      var xj = polygon[j].x,
        yj = polygon[j].y;
      if (yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi) {
        inside = !inside;
      }
    }
    return inside;
  };
  return {
    handleCanvasClick: handleCanvasClick,
    handleMouseDown: handleMouseDown,
    handleMouseMove: handleMouseMove,
    handleMouseUp: handleMouseUp,
    handleContextMenu: handleContextMenu,
    // âœ… SYSTÃˆME PARAMÃˆTRES: Exposer les mÃ©triques et fonctions systÃ¨me
    getPerformanceMetrics: getPerformanceMetrics,
    reportError: reportError,
    // Informations pour le rendu visuel de la sÃ©lection
    selectionState: {
      isSelecting: isSelectingRef.current,
      selectionMode: selectionMode,
      selectionRect: selectionRectRef.current,
      selectionPoints: selectionPointsRef.current,
      updateTrigger: selectionUpdateTrigger
    }
  };
};
;// ./src/js/react/hooks/useKeyboardShortcuts.ts





/**
 * Hook pour gÃ©rer les raccourcis clavier du canvas
 * ImplÃ©mente les raccourcis configurables via les paramÃ¨tres canvas
 */
var useKeyboardShortcuts = function useKeyboardShortcuts() {
  var _useBuilder = useBuilder(),
    state = _useBuilder.state,
    dispatch = _useBuilder.dispatch;
  var keyboardShortcutsEnabled = useCanvasSetting('enable_keyboard_shortcuts', true);

  // RÃ©fÃ©rences pour Ã©viter les closures stale
  var stateRef = (0,react.useRef)(state);
  var dispatchRef = (0,react.useRef)(dispatch);

  // Mettre Ã  jour les rÃ©fÃ©rences
  (0,react.useEffect)(function () {
    stateRef.current = state;
    dispatchRef.current = dispatch;
  }, [state, dispatch]);

  /**
   * GÃ¨re les Ã©vÃ©nements clavier
   */
  var handleKeyDown = (0,react.useCallback)(function (event) {
    var keyboardEvent = event;

    // Ne pas traiter si les raccourcis sont dÃ©sactivÃ©s
    if (!keyboardShortcutsEnabled) {
      debugLog('[KeyboardShortcuts] Shortcuts disabled - ignoring key event');
      return;
    }

    // Ne pas traiter si on est dans un champ de saisie
    var target = event.target;
    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.contentEditable === 'true') {
      debugLog('[KeyboardShortcuts] Ignoring key event in input field');
      return;
    }
    var ctrlKey = keyboardEvent.ctrlKey,
      metaKey = keyboardEvent.metaKey,
      key = keyboardEvent.key,
      shiftKey = keyboardEvent.shiftKey;
    var isCtrlOrCmd = ctrlKey || metaKey;
    var shortcut = "".concat(isCtrlOrCmd ? ctrlKey ? 'Ctrl' : 'Cmd' : '').concat(shiftKey ? '+Shift' : '', "+").concat(key.toUpperCase());
    debugLog("[KeyboardShortcuts] Key pressed: ".concat(shortcut));
    switch (key.toLowerCase()) {
      case 'z':
        if (isCtrlOrCmd) {
          event.preventDefault();
          if (shiftKey) {
            // Ctrl+Y ou Cmd+Shift+Z pour redo
            debugLog('[KeyboardShortcuts] Executing redo (Ctrl+Shift+Z)');
            dispatchRef.current({
              type: 'REDO'
            });
          } else {
            // Ctrl+Z pour undo
            debugLog('[KeyboardShortcuts] Executing undo (Ctrl+Z)');
            dispatchRef.current({
              type: 'UNDO'
            });
          }
        }
        break;
      case 'y':
        if (isCtrlOrCmd && !shiftKey) {
          event.preventDefault();
          // Ctrl+Y pour redo
          debugLog('[KeyboardShortcuts] Executing redo (Ctrl+Y)');
          dispatchRef.current({
            type: 'REDO'
          });
        }
        break;
      case 'a':
        if (isCtrlOrCmd) {
          event.preventDefault();
          // Ctrl+A pour tout sÃ©lectionner
          var allElementIds = stateRef.current.elements.map(function (el) {
            return el.id;
          });
          debugLog("[KeyboardShortcuts] Selecting all elements (".concat(allElementIds.length, " elements)"));
          dispatchRef.current({
            type: 'SET_SELECTION',
            payload: allElementIds
          });
        }
        break;
      case 'delete':
      case 'backspace':
        // Supprimer les Ã©lÃ©ments sÃ©lectionnÃ©s
        if (stateRef.current.selection.selectedElements.length > 0) {
          event.preventDefault();
          debugLog("[KeyboardShortcuts] Deleting ".concat(stateRef.current.selection.selectedElements.length, " selected elements"));
          // Supprimer tous les Ã©lÃ©ments sÃ©lectionnÃ©s
          stateRef.current.selection.selectedElements.forEach(function (elementId) {
            dispatchRef.current({
              type: 'REMOVE_ELEMENT',
              payload: elementId
            });
          });
          // Vider la sÃ©lection aprÃ¨s suppression
          dispatchRef.current({
            type: 'CLEAR_SELECTION'
          });
        }
        break;
      case 'c':
        if (isCtrlOrCmd) {
          event.preventDefault();
          // Ctrl+C pour copier (si des Ã©lÃ©ments sont sÃ©lectionnÃ©s)
          if (stateRef.current.selection.selectedElements.length > 0) {
            debugLog("[KeyboardShortcuts] Copying ".concat(stateRef.current.selection.selectedElements.length, " selected elements"));
            // TODO: ImplÃ©menter la logique de copie
          }
        }
        break;
      case 'v':
        if (isCtrlOrCmd) {
          event.preventDefault();
          // Ctrl+V pour coller
          debugLog('[KeyboardShortcuts] Pasting elements');
          // TODO: ImplÃ©menter la logique de collage
        }
        break;
      case 'd':
        if (isCtrlOrCmd) {
          event.preventDefault();
          // Ctrl+D pour dupliquer (optionnel)
          if (stateRef.current.selection.selectedElements.length > 0) {
            debugLog("[KeyboardShortcuts] Duplicating ".concat(stateRef.current.selection.selectedElements.length, " selected elements"));
            // TODO: ImplÃ©menter la logique de duplication
          }
        }
        break;
      default:
        // Autres raccourcis peuvent Ãªtre ajoutÃ©s ici
        debugLog("[KeyboardShortcuts] Unhandled key: ".concat(shortcut));
        break;
    }
  }, [keyboardShortcutsEnabled]);

  /**
   * Configure les Ã©couteurs d'Ã©vÃ©nements
   */
  (0,react.useEffect)(function () {
    if (!keyboardShortcutsEnabled) {
      debugLog('[KeyboardShortcuts] Keyboard shortcuts disabled');
      return;
    }
    debugLog('[KeyboardShortcuts] Initializing keyboard shortcuts');
    // Ajouter l'Ã©couteur d'Ã©vÃ©nements
    document.addEventListener('keydown', handleKeyDown);

    // Nettoyer l'Ã©couteur
    return function () {
      debugLog('[KeyboardShortcuts] Cleaning up keyboard shortcuts');
      document.removeEventListener('keydown', handleKeyDown);
    };
  }, [handleKeyDown, keyboardShortcutsEnabled]);

  // Retourner des informations sur l'Ã©tat des raccourcis
  return {
    keyboardShortcutsEnabled: keyboardShortcutsEnabled,
    hasSelection: state.selection.selectedElements.length > 0,
    canUndo: state.history.past.length > 0,
    canRedo: state.history.future.length > 0
  };
};
;// ./src/js/react/utils/WooCommerceElementsManager.ts
function WooCommerceElementsManager_typeof(o) { "@babel/helpers - typeof"; return WooCommerceElementsManager_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, WooCommerceElementsManager_typeof(o); }
function WooCommerceElementsManager_regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return WooCommerceElementsManager_regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (WooCommerceElementsManager_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, WooCommerceElementsManager_regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, WooCommerceElementsManager_regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), WooCommerceElementsManager_regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", WooCommerceElementsManager_regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), WooCommerceElementsManager_regeneratorDefine2(u), WooCommerceElementsManager_regeneratorDefine2(u, o, "Generator"), WooCommerceElementsManager_regeneratorDefine2(u, n, function () { return this; }), WooCommerceElementsManager_regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (WooCommerceElementsManager_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function WooCommerceElementsManager_regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } WooCommerceElementsManager_regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { WooCommerceElementsManager_regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, WooCommerceElementsManager_regeneratorDefine2(e, r, n, t); }
function WooCommerceElementsManager_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function WooCommerceElementsManager_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { WooCommerceElementsManager_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { WooCommerceElementsManager_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, WooCommerceElementsManager_toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function WooCommerceElementsManager_defineProperty(e, r, t) { return (r = WooCommerceElementsManager_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function WooCommerceElementsManager_toPropertyKey(t) { var i = WooCommerceElementsManager_toPrimitive(t, "string"); return "symbol" == WooCommerceElementsManager_typeof(i) ? i : i + ""; }
function WooCommerceElementsManager_toPrimitive(t, r) { if ("object" != WooCommerceElementsManager_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != WooCommerceElementsManager_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var WooCommerceElementsManager = /*#__PURE__*/function () {
  function WooCommerceElementsManager() {
    _classCallCheck(this, WooCommerceElementsManager);
    WooCommerceElementsManager_defineProperty(this, "orderData", null);
    WooCommerceElementsManager_defineProperty(this, "customerData", null);
  }
  return _createClass(WooCommerceElementsManager, [{
    key: "loadOrderData",
    value: (
    /**
     * Charge les donnÃ©es de commande WooCommerce
     */
    function () {
      var _loadOrderData = WooCommerceElementsManager_asyncToGenerator(/*#__PURE__*/WooCommerceElementsManager_regenerator().m(function _callee(orderId) {
        var response;
        return WooCommerceElementsManager_regenerator().w(function (_context) {
          while (1) switch (_context.n) {
            case 0:
              _context.n = 1;
              return this.mockFetchOrderData(orderId);
            case 1:
              response = _context.v;
              this.orderData = response;
              return _context.a(2, response);
          }
        }, _callee, this);
      }));
      function loadOrderData(_x) {
        return _loadOrderData.apply(this, arguments);
      }
      return loadOrderData;
    }()
    /**
     * Charge les donnÃ©es client WooCommerce
     */
    )
  }, {
    key: "loadCustomerData",
    value: (function () {
      var _loadCustomerData = WooCommerceElementsManager_asyncToGenerator(/*#__PURE__*/WooCommerceElementsManager_regenerator().m(function _callee2(customerId) {
        var response;
        return WooCommerceElementsManager_regenerator().w(function (_context2) {
          while (1) switch (_context2.n) {
            case 0:
              _context2.n = 1;
              return this.mockFetchCustomerData(customerId);
            case 1:
              response = _context2.v;
              this.customerData = response;
              return _context2.a(2, response);
          }
        }, _callee2, this);
      }));
      function loadCustomerData(_x2) {
        return _loadCustomerData.apply(this, arguments);
      }
      return loadCustomerData;
    }()
    /**
     * Obtient les donnÃ©es de commande actuelles
     */
    )
  }, {
    key: "getOrderData",
    value: function getOrderData() {
      return this.orderData;
    }

    /**
     * Obtient les donnÃ©es client actuelles
     */
  }, {
    key: "getCustomerData",
    value: function getCustomerData() {
      return this.customerData;
    }

    /**
     * Obtient le numÃ©ro de commande formatÃ©
     */
  }, {
    key: "getOrderNumber",
    value: function getOrderNumber() {
      if (!this.orderData) return 'CMD-XXXX-XXXX';
      return this.orderData.order_number || "CMD-".concat(this.orderData.id);
    }

    /**
     * Obtient les informations client formatÃ©es
     */
  }, {
    key: "getCustomerInfo",
    value: function getCustomerInfo() {
      var _this$customerData, _this$orderData;
      if (!this.customerData && !this.orderData) {
        return {
          name: 'Client Inconnu',
          address: 'Adresse non disponible',
          email: 'email@inconnu.com',
          phone: '+33 0 00 00 00 00'
        };
      }
      var billing = ((_this$customerData = this.customerData) === null || _this$customerData === void 0 ? void 0 : _this$customerData.billing) || ((_this$orderData = this.orderData) === null || _this$orderData === void 0 ? void 0 : _this$orderData.billing);
      if (!billing) {
        return {
          name: 'Client Inconnu',
          address: 'Adresse non disponible',
          email: 'email@inconnu.com',
          phone: '+33 0 00 00 00 00'
        };
      }
      var fullName = "".concat(billing.first_name, " ").concat(billing.last_name).trim();
      var address = [billing.address_1, billing.address_2, "".concat(billing.postcode, " ").concat(billing.city), billing.country].filter(Boolean).join(', ');
      return {
        name: fullName || 'Client Inconnu',
        address: address || 'Adresse non disponible',
        email: billing.email || 'email@inconnu.com',
        phone: billing.phone || '+33 0 00 00 00 00'
      };
    }

    /**
     * Obtient les articles de commande formatÃ©s pour l'affichage
     */
  }, {
    key: "getOrderItems",
    value: function getOrderItems() {
      var _this = this;
      if (!this.orderData) {
        return [];
      }
      return this.orderData.line_items.map(function (item) {
        return {
          sku: item.sku || "SKU-".concat(item.product_id),
          name: item.name,
          description: _this.getProductDescription(item),
          qty: item.quantity,
          price: parseFloat(item.subtotal) / item.quantity,
          discount: _this.calculateItemDiscount(item),
          total: parseFloat(item.total)
        };
      });
    }

    /**
     * Calcule les totaux de commande
     */
  }, {
    key: "getOrderTotals",
    value: function getOrderTotals() {
      if (!this.orderData) {
        return {
          subtotal: 0,
          discount: 0,
          shipping: 0,
          tax: 0,
          total: 0,
          currency: 'EUR'
        };
      }
      var subtotal = parseFloat(this.orderData.subtotal);
      var discount = parseFloat(this.orderData.discount_total);
      var shipping = parseFloat(this.orderData.shipping_total);
      var tax = parseFloat(this.orderData.total_tax);
      var total = parseFloat(this.orderData.total);
      return {
        subtotal: subtotal,
        discount: discount,
        shipping: shipping,
        tax: tax,
        total: total,
        currency: this.orderData.currency
      };
    }

    /**
     * Obtient la date de commande formatÃ©e
     */
  }, {
    key: "getOrderDate",
    value: function getOrderDate() {
      if (!this.orderData) return new Date().toLocaleDateString('fr-FR');
      return new Date(this.orderData.date_created).toLocaleDateString('fr-FR');
    }

    /**
     * RÃ©initialise les donnÃ©es
     */
  }, {
    key: "reset",
    value: function reset() {
      this.orderData = null;
      this.customerData = null;
    }

    // MÃ©thodes privÃ©es
  }, {
    key: "getProductDescription",
    value: function getProductDescription(item) {
      // Recherche dans les meta_data pour une description
      var descriptionMeta = item.meta_data.find(function (meta) {
        return meta.key === '_description';
      });
      return (descriptionMeta === null || descriptionMeta === void 0 ? void 0 : descriptionMeta.value) || 'Description non disponible';
    }
  }, {
    key: "calculateItemDiscount",
    value: function calculateItemDiscount(item) {
      var subtotal = parseFloat(item.subtotal);
      var total = parseFloat(item.total);
      return Math.max(0, subtotal - total);
    }

    // MÃ©thodes de simulation (Ã  remplacer par de vrais appels API)
  }, {
    key: "mockFetchOrderData",
    value: function () {
      var _mockFetchOrderData = WooCommerceElementsManager_asyncToGenerator(/*#__PURE__*/WooCommerceElementsManager_regenerator().m(function _callee3(orderId) {
        return WooCommerceElementsManager_regenerator().w(function (_context3) {
          while (1) switch (_context3.n) {
            case 0:
              _context3.n = 1;
              return new Promise(function (resolve) {
                return setTimeout(resolve, 100);
              });
            case 1:
              return _context3.a(2, {
                id: parseInt(orderId),
                order_number: "CMD-2024-".concat(orderId.padStart(4, '0')),
                status: 'completed',
                currency: 'EUR',
                date_created: new Date().toISOString(),
                date_modified: new Date().toISOString(),
                total: '279.96',
                subtotal: '259.96',
                total_tax: '20.00',
                shipping_total: '8.50',
                discount_total: '15.00',
                customer_id: 123,
                billing: {
                  first_name: 'Marie',
                  last_name: 'Dupont',
                  company: '',
                  address_1: '15 rue des Lilas',
                  address_2: '',
                  city: 'Paris',
                  state: '',
                  postcode: '75001',
                  country: 'FR',
                  email: 'marie.dupont@email.com',
                  phone: '+33 6 12 34 56 78'
                },
                shipping: {
                  first_name: 'Marie',
                  last_name: 'Dupont',
                  company: '',
                  address_1: '15 rue des Lilas',
                  address_2: '',
                  city: 'Paris',
                  state: '',
                  postcode: '75001',
                  country: 'FR'
                },
                line_items: [{
                  id: 1,
                  name: 'T-shirt Premium Bio',
                  product_id: 123,
                  variation_id: 0,
                  quantity: 2,
                  tax_class: '',
                  subtotal: '59.98',
                  subtotal_tax: '11.996',
                  total: '59.98',
                  total_tax: '11.996',
                  taxes: [{
                    id: 1,
                    total: '11.996',
                    subtotal: '11.996'
                  }],
                  meta_data: [],
                  sku: 'TSHIRT-001',
                  price: 29.99
                }, {
                  id: 2,
                  name: 'Jean Slim Fit Noir',
                  product_id: 456,
                  variation_id: 0,
                  quantity: 1,
                  tax_class: '',
                  subtotal: '89.99',
                  subtotal_tax: '17.998',
                  total: '79.99',
                  total_tax: '15.998',
                  taxes: [{
                    id: 1,
                    total: '15.998',
                    subtotal: '17.998'
                  }],
                  meta_data: [],
                  sku: 'JEAN-045',
                  price: 89.99
                }],
                shipping_lines: [{
                  id: 1,
                  method_title: 'Livraison Standard',
                  method_id: 'flat_rate',
                  total: '8.50',
                  total_tax: '0.00',
                  taxes: []
                }],
                tax_lines: [{
                  id: 1,
                  rate_code: 'FR-TVA-20',
                  rate_id: 1,
                  label: 'TVA (20%)',
                  compound: false,
                  tax_total: '20.00',
                  shipping_tax_total: '0.00',
                  rate_percent: 20
                }],
                coupon_lines: [{
                  id: 1,
                  code: 'ETE2024',
                  discount: '15.00',
                  discount_tax: '0.00'
                }]
              });
          }
        }, _callee3);
      }));
      function mockFetchOrderData(_x3) {
        return _mockFetchOrderData.apply(this, arguments);
      }
      return mockFetchOrderData;
    }()
  }, {
    key: "mockFetchCustomerData",
    value: function () {
      var _mockFetchCustomerData = WooCommerceElementsManager_asyncToGenerator(/*#__PURE__*/WooCommerceElementsManager_regenerator().m(function _callee4(customerId) {
        return WooCommerceElementsManager_regenerator().w(function (_context4) {
          while (1) switch (_context4.n) {
            case 0:
              _context4.n = 1;
              return new Promise(function (resolve) {
                return setTimeout(resolve, 50);
              });
            case 1:
              return _context4.a(2, {
                id: customerId,
                date_created: new Date().toISOString(),
                date_modified: new Date().toISOString(),
                email: 'marie.dupont@email.com',
                first_name: 'Marie',
                last_name: 'Dupont',
                role: 'customer',
                username: 'marie_dupont',
                billing: {
                  first_name: 'Marie',
                  last_name: 'Dupont',
                  company: '',
                  address_1: '15 rue des Lilas',
                  address_2: '',
                  city: 'Paris',
                  state: '',
                  postcode: '75001',
                  country: 'FR',
                  email: 'marie.dupont@email.com',
                  phone: '+33 6 12 34 56 78'
                },
                shipping: {
                  first_name: 'Marie',
                  last_name: 'Dupont',
                  company: '',
                  address_1: '15 rue des Lilas',
                  address_2: '',
                  city: 'Paris',
                  state: '',
                  postcode: '75001',
                  country: 'FR'
                }
              });
          }
        }, _callee4);
      }));
      function mockFetchCustomerData(_x4) {
        return _mockFetchCustomerData.apply(this, arguments);
      }
      return mockFetchCustomerData;
    }()
  }]);
}();

// Instance singleton
var wooCommerceManager = new WooCommerceElementsManager();
;// ./src/js/react/utils/ElementChangeTracker.ts
function ElementChangeTracker_typeof(o) { "@babel/helpers - typeof"; return ElementChangeTracker_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, ElementChangeTracker_typeof(o); }
function ElementChangeTracker_toConsumableArray(r) { return ElementChangeTracker_arrayWithoutHoles(r) || ElementChangeTracker_iterableToArray(r) || ElementChangeTracker_unsupportedIterableToArray(r) || ElementChangeTracker_nonIterableSpread(); }
function ElementChangeTracker_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function ElementChangeTracker_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return ElementChangeTracker_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? ElementChangeTracker_arrayLikeToArray(r, a) : void 0; } }
function ElementChangeTracker_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function ElementChangeTracker_arrayWithoutHoles(r) { if (Array.isArray(r)) return ElementChangeTracker_arrayLikeToArray(r); }
function ElementChangeTracker_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function ElementChangeTracker_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function ElementChangeTracker_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ElementChangeTracker_ownKeys(Object(t), !0).forEach(function (r) { ElementChangeTracker_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ElementChangeTracker_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function ElementChangeTracker_classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function ElementChangeTracker_defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, ElementChangeTracker_toPropertyKey(o.key), o); } }
function ElementChangeTracker_createClass(e, r, t) { return r && ElementChangeTracker_defineProperties(e.prototype, r), t && ElementChangeTracker_defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function ElementChangeTracker_defineProperty(e, r, t) { return (r = ElementChangeTracker_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function ElementChangeTracker_toPropertyKey(t) { var i = ElementChangeTracker_toPrimitive(t, "string"); return "symbol" == ElementChangeTracker_typeof(i) ? i : i + ""; }
function ElementChangeTracker_toPrimitive(t, r) { if ("object" != ElementChangeTracker_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != ElementChangeTracker_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * ðŸ” REAL-TIME ELEMENT & PROPERTY CHANGE TRACKER
 * 
 * Tracks all element changes, property modifications, and canvas updates
 * in real-time with detailed logging and diff detection.
 */

var ElementChangeTracker = /*#__PURE__*/function () {
  function ElementChangeTracker() {
    ElementChangeTracker_classCallCheck(this, ElementChangeTracker);
    ElementChangeTracker_defineProperty(this, "previousSnapshots", new Map());
    ElementChangeTracker_defineProperty(this, "changeHistory", []);
    ElementChangeTracker_defineProperty(this, "maxHistorySize", 500);
    ElementChangeTracker_defineProperty(this, "listeners", []);
    ElementChangeTracker_defineProperty(this, "debugEnabled", false);
  }
  return ElementChangeTracker_createClass(ElementChangeTracker, [{
    key: "trackElements",
    value:
    // Set to true to enable logging

    /**
     * Track element state at a specific point in time
     */
    function trackElements(elements) {
      var _this = this;
      var currentSnapshots = new Map();
      var changes = [];
      elements.forEach(function (element) {
        var snapshot = ElementChangeTracker_objectSpread(ElementChangeTracker_objectSpread({}, element), {}, {
          timestamp: Date.now()
        });
        currentSnapshots.set(element.id, snapshot);
        var previousSnapshot = _this.previousSnapshots.get(element.id);
        if (!previousSnapshot) {
          // Element created
          changes.push({
            elementId: element.id,
            property: '__created__',
            oldValue: undefined,
            newValue: snapshot,
            timestamp: snapshot.timestamp,
            changeType: 'created'
          });
        } else {
          // Check for property changes
          _this.detectPropertyChanges(previousSnapshot, snapshot, changes);
        }
      });

      // Check for deleted elements
      this.previousSnapshots.forEach(function (snapshot, elementId) {
        if (!currentSnapshots.has(elementId)) {
          changes.push({
            elementId: elementId,
            property: '__deleted__',
            oldValue: snapshot,
            newValue: undefined,
            timestamp: Date.now(),
            changeType: 'deleted'
          });
        }
      });
      this.previousSnapshots = currentSnapshots;
      this.addChangesToHistory(changes);
      this.notifyListeners(changes);
      return changes;
    }

    /**
     * Detect all property changes between two snapshots
     */
  }, {
    key: "detectPropertyChanges",
    value: function detectPropertyChanges(previous, current, changes) {
      var allKeys = new Set([].concat(ElementChangeTracker_toConsumableArray(Object.keys(previous)), ElementChangeTracker_toConsumableArray(Object.keys(current))));
      allKeys.forEach(function (key) {
        if (key === 'timestamp') return;
        var oldValue = previous[key];
        var newValue = current[key];

        // Deep comparison for objects/arrays
        if (JSON.stringify(oldValue) !== JSON.stringify(newValue)) {
          changes.push({
            elementId: previous.id,
            property: key,
            oldValue: oldValue,
            newValue: newValue,
            timestamp: current.timestamp,
            changeType: 'property_changed'
          });
        }
      });
    }

    /**
     * Get emoji for different property types
     */
  }, {
    key: "getPropertyEmoji",
    value: function getPropertyEmoji(property) {
      var emojiMap = {
        x: 'ðŸ“',
        y: 'ðŸ“',
        width: 'ðŸ“',
        height: 'ðŸ“',
        rotation: 'ðŸ”„',
        opacity: 'ðŸ‘ï¸',
        visible: 'ðŸ‘ï¸',
        locked: 'ðŸ”’',
        color: 'ðŸŽ¨',
        fillColor: 'ðŸŽ¨',
        strokeColor: 'ðŸ–Œï¸',
        fontSize: 'ðŸ“',
        fontFamily: 'ðŸ“',
        text: 'ðŸ“„',
        src: 'ðŸ–¼ï¸',
        url: 'ðŸ”—',
        backgroundColor: 'ðŸŽ¨',
        textColor: 'ðŸŽ¨',
        borderColor: 'ðŸ–Œï¸',
        borderRadius: 'ðŸ”²',
        showHeaders: 'ðŸ“Š',
        showBorders: 'ðŸ“Š',
        showAlternatingRows: 'ðŸ“Š'
      };
      return emojiMap[property] || 'ðŸ”§';
    }

    /**
     * Determine the type of property
     */
  }, {
    key: "getPropertyType",
    value: function getPropertyType(value) {
      if (value === null) return 'null';
      if (Array.isArray(value)) return "array[".concat(value.length, "]");
      if (ElementChangeTracker_typeof(value) === 'object') return "object{".concat(Object.keys(value).length, "}");
      return ElementChangeTracker_typeof(value);
    }

    /**
     * Format value for logging
     */
  }, {
    key: "formatValue",
    value: function formatValue(value) {
      var maxLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 50;
      if (value === undefined) return 'undefined';
      if (value === null) return 'null';
      if (typeof value === 'boolean') return value ? 'âœ“ true' : 'âœ— false';
      if (typeof value === 'number') return value.toFixed(2);
      if (typeof value === 'string') {
        var truncated = value.length > maxLength ? value.slice(0, maxLength) + '...' : value;
        return "\"".concat(truncated, "\"");
      }
      if (Array.isArray(value)) return "[".concat(value.length, " items]");
      if (ElementChangeTracker_typeof(value) === 'object') return "{".concat(Object.keys(value).length, " props}");
      return String(value);
    }

    /**
     * Add changes to history with size limit
     */
  }, {
    key: "addChangesToHistory",
    value: function addChangesToHistory(changes) {
      var _this$changeHistory;
      (_this$changeHistory = this.changeHistory).push.apply(_this$changeHistory, ElementChangeTracker_toConsumableArray(changes));
      if (this.changeHistory.length > this.maxHistorySize) {
        this.changeHistory = this.changeHistory.slice(-this.maxHistorySize);
      }
    }

    /**
     * Notify all registered listeners
     */
  }, {
    key: "notifyListeners",
    value: function notifyListeners(changes) {
      var _this2 = this;
      changes.forEach(function (change) {
        _this2.listeners.forEach(function (listener) {
          return listener(change);
        });
      });
    }

    /**
     * Subscribe to changes
     */
  }, {
    key: "onChange",
    value: function onChange(callback) {
      var _this3 = this;
      this.listeners.push(callback);
      return function () {
        _this3.listeners = _this3.listeners.filter(function (l) {
          return l !== callback;
        });
      };
    }

    /**
     * Get change history
     */
  }, {
    key: "getHistory",
    value: function getHistory() {
      return ElementChangeTracker_toConsumableArray(this.changeHistory);
    }

    /**
     * Get changes for a specific element
     */
  }, {
    key: "getElementHistory",
    value: function getElementHistory(elementId) {
      return this.changeHistory.filter(function (c) {
        return c.elementId === elementId;
      });
    }

    /**
     * Get all changes for a specific property
     */
  }, {
    key: "getPropertyHistory",
    value: function getPropertyHistory(property) {
      return this.changeHistory.filter(function (c) {
        return c.property === property || c.changeType === 'created';
      });
    }

    /**
     * Get changes within a time range
     */
  }, {
    key: "getChangesBetween",
    value: function getChangesBetween(startTime, endTime) {
      return this.changeHistory.filter(function (c) {
        return c.timestamp >= startTime && c.timestamp <= endTime;
      });
    }

    /**
     * Reset history (but keep current snapshots)
     */
  }, {
    key: "clearHistory",
    value: function clearHistory() {
      this.changeHistory = [];
    }

    /**
     * Get current snapshots
     */
  }, {
    key: "getSnapshots",
    value: function getSnapshots() {
      return new Map(this.previousSnapshots);
    }

    /**
     * Generate a detailed report
     */
  }, {
    key: "generateReport",
    value: function generateReport() {
      var totalChanges = this.changeHistory.length;
      var elementsTracked = this.previousSnapshots.size;
      var changeSummary = this.changeHistory.reduce(function (acc, change) {
        acc[change.changeType] = (acc[change.changeType] || 0) + 1;
        return acc;
      }, {});
      return "\n\uD83D\uDCCA ELEMENT TRACKER REPORT\n========================\nTotal Changes: ".concat(totalChanges, "\nElements Tracked: ").concat(elementsTracked, "\nChange Breakdown:\n  - Created: ").concat(changeSummary.created || 0, "\n  - Updated: ").concat(changeSummary.updated || 0, "\n  - Deleted: ").concat(changeSummary.deleted || 0, "\n  - Property Changes: ").concat(changeSummary.property_changed || 0, "\n========================\n    ").trim();
    }
  }]);
}();

// Export singleton instance
var elementChangeTracker = new ElementChangeTracker();
;// ./src/js/react/utils/CanvasMonitoringDashboard.ts
function CanvasMonitoringDashboard_typeof(o) { "@babel/helpers - typeof"; return CanvasMonitoringDashboard_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, CanvasMonitoringDashboard_typeof(o); }
function CanvasMonitoringDashboard_classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function CanvasMonitoringDashboard_defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, CanvasMonitoringDashboard_toPropertyKey(o.key), o); } }
function CanvasMonitoringDashboard_createClass(e, r, t) { return r && CanvasMonitoringDashboard_defineProperties(e.prototype, r), t && CanvasMonitoringDashboard_defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function CanvasMonitoringDashboard_defineProperty(e, r, t) { return (r = CanvasMonitoringDashboard_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function CanvasMonitoringDashboard_toPropertyKey(t) { var i = CanvasMonitoringDashboard_toPrimitive(t, "string"); return "symbol" == CanvasMonitoringDashboard_typeof(i) ? i : i + ""; }
function CanvasMonitoringDashboard_toPrimitive(t, r) { if ("object" != CanvasMonitoringDashboard_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != CanvasMonitoringDashboard_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * ðŸŽ¯ CANVAS MONITORING DASHBOARD
 * 
 * Provides real-time monitoring, visualization, and debugging tools
 * for element changes, renders, and performance metrics.
 */


var CanvasMonitoringDashboard = /*#__PURE__*/function () {
  function CanvasMonitoringDashboard() {
    CanvasMonitoringDashboard_classCallCheck(this, CanvasMonitoringDashboard);
  }
  return CanvasMonitoringDashboard_createClass(CanvasMonitoringDashboard, null, [{
    key: "initialize",
    value:
    /**
     * Initialize and start monitoring
     */
    function initialize() {
      this.monitoringEnabled = true;
      this.startTime = Date.now();
      // Silent initialization - dashboard is available via showDashboard()
    }

    /**
     * Increment render counter
     */
  }, {
    key: "recordRender",
    value: function recordRender() {
      if (this.monitoringEnabled) {
        this.renderCount++;
      }
    }

    /**
     * Record element changes
     */
  }, {
    key: "recordChanges",
    value: function recordChanges(count) {
      if (this.monitoringEnabled) {
        this.elementChanges += count;
      }
    }

    /**
     * Get formatted history
     */
  }, {
    key: "getHistory",
    value: function getHistory() {
      return elementChangeTracker.getHistory();
    }

    /**
     * Get history for specific element
     */
  }, {
    key: "getElementHistory",
    value: function getElementHistory(elementId) {
      return elementChangeTracker.getElementHistory(elementId);
    }

    /**
     * Get history for specific property
     */
  }, {
    key: "getPropertyHistory",
    value: function getPropertyHistory(property) {
      return elementChangeTracker.getPropertyHistory(property);
    }

    /**
     * Generate detailed report
     */
  }, {
    key: "generateReport",
    value: function generateReport() {
      var history = elementChangeTracker.getHistory();
      var snapshots = elementChangeTracker.getSnapshots();
      var report = '\nðŸ“‹ DETAILED MONITORING REPORT\n';
      report += 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n';
      report += "Total Events: ".concat(history.length, "\n");
      report += "Elements: ".concat(snapshots.size, "\n\n");

      // Recent changes
      report += 'Recent Changes (last 10):\n';
      history.slice(-10).forEach(function (change) {
        var time = new Date(change.timestamp).toLocaleTimeString();
        if (change.changeType === 'created') {
          report += "  [".concat(time, "] \u2728 Created: ").concat(change.elementId, "\n");
        } else if (change.changeType === 'deleted') {
          report += "  [".concat(time, "] \uD83D\uDDD1\uFE0F Deleted: ").concat(change.elementId, "\n");
        } else {
          report += "  [".concat(time, "] \uD83D\uDD27 ").concat(change.elementId, ".").concat(change.property, ": ").concat(change.oldValue, " \u2192 ").concat(change.newValue, "\n");
        }
      });
      return report;
    }

    /**
     * Get emoji for change type
     */
  }, {
    key: "getChangeTypeEmoji",
    value: function getChangeTypeEmoji(type) {
      var emojiMap = {
        created: 'âœ¨',
        deleted: 'ðŸ—‘ï¸',
        updated: 'ðŸ”„',
        property_changed: 'ðŸ”§'
      };
      return emojiMap[type] || 'â“';
    }

    /**
     * Get emoji for property
     */
  }, {
    key: "getPropertyEmoji",
    value: function getPropertyEmoji(prop) {
      var emojiMap = {
        x: 'ðŸ“',
        y: 'ðŸ“',
        width: 'ðŸ“',
        height: 'ðŸ“',
        rotation: 'ðŸ”„',
        opacity: 'ðŸ‘ï¸',
        visible: 'ðŸ‘ï¸',
        locked: 'ðŸ”’',
        color: 'ðŸŽ¨',
        fillColor: 'ðŸŽ¨',
        strokeColor: 'ðŸ–Œï¸',
        fontSize: 'ðŸ“',
        fontFamily: 'ðŸ“',
        text: 'ðŸ“„'
      };
      return emojiMap[prop] || 'ðŸ”§';
    }

    /**
     * Export history as JSON
     */
  }, {
    key: "exportHistory",
    value: function exportHistory() {
      return JSON.stringify({
        timestamp: new Date().toISOString(),
        history: elementChangeTracker.getHistory(),
        snapshots: Array.from(elementChangeTracker.getSnapshots().values())
      }, null, 2);
    }

    /**
     * Clear all history
     */
  }, {
    key: "clearHistory",
    value: function clearHistory() {
      elementChangeTracker.clearHistory();
      this.renderCount = 0;
      this.elementChanges = 0;
    }
  }]);
}();

// Make available globally for console debugging
CanvasMonitoringDashboard_defineProperty(CanvasMonitoringDashboard, "monitoringEnabled", false);
CanvasMonitoringDashboard_defineProperty(CanvasMonitoringDashboard, "startTime", 0);
CanvasMonitoringDashboard_defineProperty(CanvasMonitoringDashboard, "renderCount", 0);
CanvasMonitoringDashboard_defineProperty(CanvasMonitoringDashboard, "elementChanges", 0);
if (typeof window !== 'undefined') {
  window.CanvasMonitoringDashboard = CanvasMonitoringDashboard;
}
// EXTERNAL MODULE: ./node_modules/react-dom/index.js
var react_dom = __webpack_require__(961);
;// ./src/js/react/components/ui/ContextMenu.tsx
function ContextMenu_slicedToArray(r, e) { return ContextMenu_arrayWithHoles(r) || ContextMenu_iterableToArrayLimit(r, e) || ContextMenu_unsupportedIterableToArray(r, e) || ContextMenu_nonIterableRest(); }
function ContextMenu_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function ContextMenu_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return ContextMenu_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? ContextMenu_arrayLikeToArray(r, a) : void 0; } }
function ContextMenu_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function ContextMenu_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function ContextMenu_arrayWithHoles(r) { if (Array.isArray(r)) return r; }




var _ContextMenu = function ContextMenu(_ref) {
  var items = _ref.items,
    position = _ref.position,
    onClose = _ref.onClose,
    isVisible = _ref.isVisible;
  var menuRef = (0,react.useRef)(null);
  var _useState = (0,react.useState)(null),
    _useState2 = ContextMenu_slicedToArray(_useState, 2),
    hoveredItem = _useState2[0],
    setHoveredItem = _useState2[1];
  var _useState3 = (0,react.useState)(null),
    _useState4 = ContextMenu_slicedToArray(_useState3, 2),
    openSubmenu = _useState4[0],
    setOpenSubmenu = _useState4[1];
  var _useState5 = (0,react.useState)(null),
    _useState6 = ContextMenu_slicedToArray(_useState5, 2),
    submenuPosition = _useState6[0],
    setSubmenuPosition = _useState6[1];
  var closeTimeoutRef = (0,react.useRef)(null);

  // Calculer la position corrigÃ©e pour garder le menu Ã  l'Ã©cran
  var adjustedPosition = (0,react.useMemo)(function () {
    var adjustedX = position.x;
    var adjustedY = position.y;
    if (typeof window !== 'undefined') {
      // Largeur et hauteur estimÃ©es du menu compact
      var menuWidth = 160; // Max width du menu compact

      // Calculer la hauteur rÃ©elle en fonction du type d'Ã©lÃ©ments
      var menuHeight = 0;
      items.forEach(function (item) {
        if (item.section) {
          menuHeight += 14; // Hauteur des sections avec padding
        } else if (item.separator) {
          menuHeight += 3; // Hauteur des sÃ©parateurs avec margin
        } else {
          menuHeight += 18; // Hauteur des Ã©lÃ©ments normaux
        }
      });
      menuHeight += 2; // Padding vertical du menu

      // VÃ©rifier si le menu sort Ã  droite
      if (adjustedX + menuWidth > window.innerWidth) {
        adjustedX = window.innerWidth - menuWidth - 10;
      }

      // VÃ©rifier si le menu sort en bas
      if (adjustedY + menuHeight > window.innerHeight) {
        adjustedY = window.innerHeight - menuHeight - 10;
      }

      // VÃ©rifier si le menu sort en haut (aprÃ¨s ajustement vers le bas)
      if (adjustedY < 0) {
        adjustedY = 10; // Positionner en haut avec une marge
      }

      // VÃ©rifier les limites Ã  gauche
      if (adjustedX < 0) adjustedX = 10;
    }
    return {
      x: adjustedX,
      y: adjustedY
    };
  }, [position, items]);

  // Nettoyer les timeouts quand le composant se dÃ©monte
  (0,react.useEffect)(function () {
    return function () {
      if (closeTimeoutRef.current) {
        clearTimeout(closeTimeoutRef.current);
      }
    };
  }, []);

  // Calculer la position du sous-menu quand il s'ouvre
  (0,react.useLayoutEffect)(function () {
    if (openSubmenu && menuRef.current) {
      var _menuElement = menuRef.current;
      var parentItem = _menuElement.querySelector("[data-item-id=\"".concat(openSubmenu, "\"]"));
      if (parentItem) {
        var menuRect = _menuElement.getBoundingClientRect();
        var parentRect = parentItem.getBoundingClientRect();
        var submenuX = menuRect.right - 2; // Positionner Ã  droite du menu parent
        var submenuY = parentRect.top; // Aligner avec l'Ã©lÃ©ment parent

        // VÃ©rifier si le sous-menu sort Ã  droite de l'Ã©cran
        var submenuWidth = 160;
        if (submenuX + submenuWidth > window.innerWidth) {
          submenuX = menuRect.left - submenuWidth + 2; // Positionner Ã  gauche
        }

        // VÃ©rifier si le sous-menu sort en bas de l'Ã©cran
        var submenuHeight = 200; // Estimation
        if (submenuY + submenuHeight > window.innerHeight) {
          submenuY = window.innerHeight - submenuHeight - 10;
        }

        // VÃ©rifier si le sous-menu sort en haut
        if (submenuY < 0) {
          submenuY = 10;
        }
        setSubmenuPosition(function (_prev) {
          return {
            x: submenuX,
            y: submenuY
          };
        });
      }
    } else {
      setSubmenuPosition(null);
    }
  }, [openSubmenu]);
  (0,react.useEffect)(function () {
    if (!isVisible) return;
    var handleClickOutside = function handleClickOutside(event) {
      // Petite attente pour permettre au menu de s'ouvrir d'abord
      setTimeout(function () {
        if (!menuRef.current) return;
        var mouseEvent = event;
        // Ne pas fermer si c'est un clic droit (pour Ã©viter de fermer immÃ©diatement)
        if (mouseEvent.button === 2) return;

        // VÃ©rifier si le clic est en dehors du menu
        if (!menuRef.current.contains(event.target)) {
          onClose();
        }
      }, 10);
    };
    var handleContextMenu = function handleContextMenu(event) {
      // EmpÃªcher l'ouverture d'un nouveau menu contextuel sur le menu existant
      if (menuRef.current && menuRef.current.contains(event.target)) {
        event.preventDefault();
      }
    };
    var handleEscape = function handleEscape(event) {
      var keyboardEvent = event;
      if (keyboardEvent.key === 'Escape') {
        onClose();
      }
    };

    // DÃ©lai minimal pour permettre au menu de se rendre
    var timer = setTimeout(function () {
      document.addEventListener('mousedown', handleClickOutside, {
        passive: true
      });
      document.addEventListener('contextmenu', handleContextMenu, {
        passive: true
      });
      document.addEventListener('keydown', handleEscape, {
        passive: true
      });
    }, 50);
    return function () {
      clearTimeout(timer);
      document.removeEventListener('mousedown', handleClickOutside);
      document.removeEventListener('contextmenu', handleContextMenu);
      document.removeEventListener('keydown', handleEscape);
    };
  }, [isVisible, onClose]);
  if (!isVisible) {
    return null;
  }
  var handleItemClick = function handleItemClick(item) {
    if (!item.disabled && !item.separator && item.action) {
      item.action();
      onClose();
    }
  };
  var menuElement = /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
    ref: menuRef,
    className: "context-menu",
    onMouseLeave: function onMouseLeave() {
      // DÃ©lai plus long pour permettre la navigation vers les sous-menus
      if (closeTimeoutRef.current) {
        clearTimeout(closeTimeoutRef.current);
      }
      closeTimeoutRef.current = window.setTimeout(function () {
        setOpenSubmenu(null);
        setHoveredItem(null);
      }, 300);
    },
    onMouseEnter: function onMouseEnter() {
      // Annuler la fermeture si on revient dans le menu
      if (closeTimeoutRef.current) {
        clearTimeout(closeTimeoutRef.current);
        closeTimeoutRef.current = null;
      }
    },
    style: {
      position: 'fixed',
      left: "".concat(adjustedPosition.x, "px"),
      top: "".concat(adjustedPosition.y, "px"),
      opacity: 1,
      visibility: 'visible',
      pointerEvents: 'auto',
      zIndex: 999999,
      background: 'linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)',
      border: '1px solid #e2e8f0',
      WebkitBorderRadius: '8px',
      MozBorderRadius: '8px',
      borderRadius: '8px',
      WebkitBoxShadow: '0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04)',
      MozBoxShadow: '0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04)',
      boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04)',
      minWidth: '120px',
      maxWidth: '160px',
      padding: '1px 0',
      WebkitTransition: 'opacity 0.15s ease-in-out',
      MozTransition: 'opacity 0.15s ease-in-out',
      OTransition: 'opacity 0.15s ease-in-out',
      transition: 'opacity 0.15s ease-in-out',
      WebkitTransformOrigin: 'top left',
      MozTransformOrigin: 'top left',
      msTransformOrigin: 'top left',
      OTransformOrigin: 'top left',
      transformOrigin: 'top left'
    },
    children: items.map(function (item) {
      return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        children: item.section ? /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          className: "context-menu-section",
          style: {
            padding: '2px 6px 1px'
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            className: "context-menu-section-title",
            style: {
              fontSize: '8px',
              fontWeight: '600',
              color: '#64748b',
              textTransform: 'uppercase',
              letterSpacing: '0.5px',
              padding: '0px',
              marginBottom: '0px'
            },
            children: item.section
          })
        }) : item.separator ? /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          className: "context-menu-separator",
          style: {
            height: '1px',
            background: 'linear-gradient(90deg, transparent 0%, #e2e8f0 20%, #e2e8f0 80%, transparent 100%)',
            margin: '1px 0',
            border: 'none'
          }
        }) : /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          className: "context-menu-item ".concat(item.disabled ? 'disabled' : ''),
          "data-item-id": item.id,
          onClick: function onClick() {
            return handleItemClick(item);
          },
          onMouseEnter: function onMouseEnter() {
            setHoveredItem(item.id);
            if (item.children && item.children.length > 0) {
              setOpenSubmenu(item.id);
            } else {
              setOpenSubmenu(null);
            }
          },
          style: {
            display: 'flex',
            alignItems: 'center',
            padding: '1px 4px',
            cursor: item.disabled ? 'not-allowed' : 'pointer',
            userSelect: 'none',
            transition: 'all 0.15s cubic-bezier(0.4, 0, 0.2, 1)',
            position: 'relative',
            minHeight: '16px',
            border: 'none',
            background: hoveredItem === item.id ? '#f1f5f9' : 'transparent',
            color: item.disabled ? '#94a3b8' : '#334155',
            fontSize: '11px',
            fontWeight: '500'
          },
          children: [item.icon && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            className: "context-menu-item-icon",
            style: {
              width: '10px',
              height: '10px',
              marginRight: '3px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              color: item.disabled ? '#94a3b8' : '#64748b',
              fontSize: '9px'
            },
            children: item.icon
          }), item.label && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            className: "context-menu-item-text",
            style: {
              flex: '1',
              fontSize: '10px',
              fontWeight: '500',
              color: item.disabled ? '#94a3b8' : '#334155'
            },
            children: item.label
          }), item.shortcut && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            className: "context-menu-item-shortcut",
            style: {
              fontSize: '8px',
              fontWeight: '500',
              color: item.disabled ? '#94a3b8' : '#64748b',
              background: 'rgba(148, 163, 184, 0.1)',
              padding: '0px 1px',
              borderRadius: '1px',
              marginLeft: '3px'
            },
            children: item.shortcut
          }), item.children && item.children.length > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            className: "context-menu-submenu-arrow",
            style: {
              marginLeft: '4px',
              color: '#64748b',
              fontSize: '8px'
            },
            children: "\u25B6"
          })]
        })
      }, item.id);
    })
  });

  // Rendre les sous-menus ouverts
  var renderSubmenus = function renderSubmenus() {
    if (!openSubmenu || !submenuPosition) return null;
    var parentItem = items.find(function (item) {
      return item.id === openSubmenu;
    });
    if (!parentItem || !parentItem.children) return null;
    return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      onMouseEnter: function onMouseEnter() {
        // Annuler la fermeture si on entre dans le sous-menu
        if (closeTimeoutRef.current) {
          clearTimeout(closeTimeoutRef.current);
          closeTimeoutRef.current = null;
        }
      },
      onMouseLeave: function onMouseLeave() {
        // DÃ©lai pour permettre le retour au menu principal
        if (closeTimeoutRef.current) {
          clearTimeout(closeTimeoutRef.current);
        }
        closeTimeoutRef.current = window.setTimeout(function () {
          setOpenSubmenu(null);
          setHoveredItem(null);
        }, 300);
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(_ContextMenu, {
        items: parentItem.children,
        position: submenuPosition,
        onClose: function onClose() {
          return setOpenSubmenu(null);
        },
        isVisible: true
      })
    });
  };

  // Utiliser un Portal pour rendre le menu au niveau du document body
  return /*#__PURE__*/(0,react_dom.createPortal)(/*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [menuElement, renderSubmenus()]
  }), document.body);
};

;// ./src/js/react/components/canvas/Canvas.tsx
function Canvas_typeof(o) { "@babel/helpers - typeof"; return Canvas_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, Canvas_typeof(o); }
function Canvas_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function Canvas_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? Canvas_ownKeys(Object(t), !0).forEach(function (r) { Canvas_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Canvas_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function Canvas_defineProperty(e, r, t) { return (r = Canvas_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function Canvas_toPropertyKey(t) { var i = Canvas_toPrimitive(t, "string"); return "symbol" == Canvas_typeof(i) ? i : i + ""; }
function Canvas_toPrimitive(t, r) { if ("object" != Canvas_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != Canvas_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function Canvas_createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = Canvas_unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function Canvas_toConsumableArray(r) { return Canvas_arrayWithoutHoles(r) || Canvas_iterableToArray(r) || Canvas_unsupportedIterableToArray(r) || Canvas_nonIterableSpread(); }
function Canvas_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function Canvas_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function Canvas_arrayWithoutHoles(r) { if (Array.isArray(r)) return Canvas_arrayLikeToArray(r); }
function Canvas_slicedToArray(r, e) { return Canvas_arrayWithHoles(r) || Canvas_iterableToArrayLimit(r, e) || Canvas_unsupportedIterableToArray(r, e) || Canvas_nonIterableRest(); }
function Canvas_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function Canvas_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return Canvas_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? Canvas_arrayLikeToArray(r, a) : void 0; } }
function Canvas_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function Canvas_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function Canvas_arrayWithHoles(r) { if (Array.isArray(r)) return r; }










// DÃ©claration pour l'API Performance

// Fonctions utilitaires pour la gestion mÃ©moire des images
var estimateImageMemorySize = function estimateImageMemorySize(img) {
  // Estimation basÃ©e sur les dimensions et le nombre de canaux (RGBA = 4 octets par pixel)
  var bytesPerPixel = 4;
  return img.naturalWidth * img.naturalHeight * bytesPerPixel;
};
var cleanupImageCache = function cleanupImageCache(imageCache) {
  var cache = imageCache.current;
  if (cache.size <= 100) return; // Max 100 images

  // Trier par date d'utilisation et supprimer les plus anciennes
  var entries = Array.from(cache.entries()).sort(function (_ref, _ref2) {
    var _ref3 = Canvas_slicedToArray(_ref, 2),
      a = _ref3[1];
    var _ref4 = Canvas_slicedToArray(_ref2, 2),
      b = _ref4[1];
    return a.lastUsed - b.lastUsed;
  });
  var toRemove = entries.slice(0, Math.ceil(cache.size * 0.2)); // Supprimer 20%

  toRemove.forEach(function (_ref5) {
    var _ref6 = Canvas_slicedToArray(_ref5, 1),
      url = _ref6[0];
    return cache["delete"](url);
  });
};



// Fonctions utilitaires de dessin (dÃ©placÃ©es en dehors du composant pour Ã©viter les avertissements React Compiler)

// Fonction helper pour normaliser les couleurs

var normalizeColor = function normalizeColor(color) {
  if (!color || color === "transparent") {
    return "rgba(0,0,0,0)"; // Transparent
  }
  return color;
};

// Fonction utilitaire pour rectangle arrondi
var roundedRect = function roundedRect(ctx, x, y, width, height, radius) {
  ctx.beginPath();
  ctx.moveTo(x + radius, y);
  ctx.lineTo(x + width - radius, y);
  ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
  ctx.lineTo(x + width, y + height - radius);
  ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
  ctx.lineTo(x + radius, y + height);
  ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
  ctx.lineTo(x, y + radius);
  ctx.quadraticCurveTo(x, y, x + radius, y);
  ctx.closePath();
};

// Fonctions de dessin pour les Ã©lÃ©ments
var drawRectangle = function drawRectangle(ctx, element) {
  var props = element;
  var fillColor = normalizeColor(props.fillColor || "#ffffff");
  var strokeColor = normalizeColor(props.strokeColor || "#000000");
  var strokeWidth = props.strokeWidth || 1;
  var borderRadius = props.borderRadius || 0;
  ctx.fillStyle = fillColor;
  ctx.strokeStyle = strokeColor;
  ctx.lineWidth = strokeWidth;
  if (borderRadius > 0) {
    roundedRect(ctx, 0, 0, element.width, element.height, borderRadius);
    ctx.fill();
    ctx.stroke();
  } else {
    ctx.fillRect(0, 0, element.width, element.height);
    ctx.strokeRect(0, 0, element.width, element.height);
  }
};
var drawCircle = function drawCircle(ctx, element) {
  var props = element;
  var fillColor = normalizeColor(props.fillColor || "#ffffff");
  var strokeColor = normalizeColor(props.strokeColor || "#000000");
  var strokeWidth = props.strokeWidth || 1;
  var centerX = element.width / 2;
  var centerY = element.height / 2;
  var radius = Math.min(centerX, centerY);
  ctx.fillStyle = fillColor;
  ctx.strokeStyle = strokeColor;
  ctx.lineWidth = strokeWidth;
  ctx.beginPath();
  ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
  ctx.fill();
  ctx.stroke();
};
var drawText = function drawText(ctx, element) {
  var props = element;
  var text = props.text || "Text";
  var fontSize = props.fontSize || 16;
  var color = normalizeColor(props.color || "#000000");
  var align = props.align || "left";
  ctx.fillStyle = color;
  ctx.font = "".concat(fontSize, "px Arial");
  ctx.textAlign = align;
  var x = align === "center" ? element.width / 2 : align === "right" ? element.width : 0;
  ctx.fillText(text, x, fontSize);
};
var drawLine = function drawLine(ctx, element) {
  var props = element;
  var strokeColor = normalizeColor(props.strokeColor || "#000000");
  var strokeWidth = props.strokeWidth || 2;
  ctx.strokeStyle = strokeColor;
  ctx.lineWidth = strokeWidth;
  ctx.beginPath();
  ctx.moveTo(0, element.height / 2); // Centre verticalement
  ctx.lineTo(element.width, element.height / 2); // Ligne horizontale droite
  ctx.stroke();
};

// Fonction pour dessiner une image
var drawImage = function drawImage(ctx, element, imageCache) {
  var props = element;
  var imageUrl = props.src || "";
  if (!imageUrl) {
    // Pas d'URL, dessiner un placeholder
    ctx.fillStyle = "#f0f0f0";
    ctx.fillRect(0, 0, element.width, element.height);
    ctx.strokeStyle = "#cccccc";
    ctx.lineWidth = 1;
    ctx.strokeRect(0, 0, element.width, element.height);
    ctx.fillStyle = "#999999";
    ctx.font = "14px Arial";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText("Image", element.width / 2, element.height / 2);
    return;
  }

  // VÃ©rifier si l'image est en cache
  var cachedImage = imageCache.current.get(imageUrl);
  if (!cachedImage) {
    // CrÃ©er une nouvelle image et la mettre en cache
    var _img = document.createElement("img");
    _img.crossOrigin = "anonymous";
    _img.src = imageUrl;

    // Attendre que l'image soit chargÃ©e pour calculer sa taille mÃ©moire
    _img.onload = function () {
      var size = estimateImageMemorySize(_img);
      imageCache.current.set(imageUrl, {
        image: _img,
        size: size,
        lastUsed: Date.now()
      });
      // DÃ©clencher un nettoyage aprÃ¨s ajout
      cleanupImageCache(imageCache);
    };
    _img.onerror = function () {
      debugWarn("[Canvas] Failed to load image: ".concat(imageUrl));
    };

    // Retourner temporairement pour Ã©viter les erreurs
    return;
  }
  var img = cachedImage.image;
  // Mettre Ã  jour la date d'utilisation
  cachedImage.lastUsed = Date.now();

  // Si l'image est chargÃ©e, la dessiner
  if (img.complete && img.naturalHeight !== 0) {
    // Appliquer object-fit
    var objectFit = props.objectFit || "cover";
    var drawX = 0,
      drawY = 0,
      drawWidth = element.width,
      drawHeight = element.height;
    var sourceX = 0,
      sourceY = 0,
      sourceWidth = img.naturalWidth,
      sourceHeight = img.naturalHeight;
    if (objectFit === "contain") {
      var ratio = Math.min(element.width / img.naturalWidth, element.height / img.naturalHeight);
      drawWidth = img.naturalWidth * ratio;
      drawHeight = img.naturalHeight * ratio;
      drawX = (element.width - drawWidth) / 2;
      drawY = (element.height - drawHeight) / 2;
    } else if (objectFit === "cover") {
      var _ratio = Math.max(element.width / img.naturalWidth, element.height / img.naturalHeight);
      sourceWidth = element.width / _ratio;
      sourceHeight = element.height / _ratio;
      sourceX = (img.naturalWidth - sourceWidth) / 2;
      sourceY = (img.naturalHeight - sourceHeight) / 2;
    } else if (objectFit === "fill") {
      // Utiliser les dimensions de l'Ã©lÃ©ment directement
    } else if (objectFit === "scale-down") {
      if (img.naturalWidth > element.width || img.naturalHeight > element.height) {
        var _ratio2 = Math.min(element.width / img.naturalWidth, element.height / img.naturalHeight);
        drawWidth = img.naturalWidth * _ratio2;
        drawHeight = img.naturalHeight * _ratio2;
        drawX = (element.width - drawWidth) / 2;
        drawY = (element.height - drawHeight) / 2;
      }
    }
    ctx.drawImage(img, sourceX, sourceY, sourceWidth, sourceHeight, drawX, drawY, drawWidth, drawHeight);
  } else {
    // Image en cours de chargement ou erreur, dessiner un placeholder
    ctx.fillStyle = "#e0e0e0";
    ctx.fillRect(0, 0, element.width, element.height);
    ctx.strokeStyle = "#999999";
    ctx.lineWidth = 1;
    ctx.strokeRect(0, 0, element.width, element.height);
    ctx.fillStyle = "#666666";
    ctx.font = "12px Arial";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(img.complete ? "Erreur" : "Chargement...", element.width / 2, element.height / 2);
  }
};

// Fonctions de rendu WooCommerce avec donnÃ©es fictives ou rÃ©elles selon le mode
var drawProductTable = function drawProductTable(ctx, element, state) {
  var _wooCommerceManager$g;
  var props = element;

  // âœ… BUGFIX-020: Validate element has minimum size for rendering
  var minWidth = 100;
  var minHeight = 50;
  if (element.width < minWidth || element.height < minHeight) {
    // Element too small, draw placeholder
    ctx.fillStyle = "#f0f0f0";
    ctx.fillRect(0, 0, element.width, element.height);
    ctx.fillStyle = "#999999";
    ctx.font = "12px Arial";
    ctx.textAlign = "center";
    ctx.fillText("Trop petit", element.width / 2, element.height / 2);
    return;
  }
  var showHeaders = props.showHeaders !== false;
  var showBorders = props.showBorders !== false;
  var showAlternatingRows = props.showAlternatingRows !== false;
  var fontSize = props.fontSize || 11;
  var fontFamily = props.fontFamily || "Arial";
  var fontWeight = props.fontWeight || "normal";
  var fontStyle = props.fontStyle || "normal";
  var showSku = props.showSku !== false;
  var showDescription = props.showDescription !== false;
  var showQuantity = props.showQuantity !== false;
  var showShipping = props.showShipping !== false;
  var showTax = props.showTax !== false;
  var showGlobalDiscount = props.showGlobalDiscount !== false;
  var textColor = normalizeColor(props.textColor || "#000000");
  var borderRadius = props.borderRadius || 0;
  var products;
  var shippingCost;
  var taxRate;
  var globalDiscount;
  var orderFees;
  var currency;

  // Utiliser les donnÃ©es WooCommerce si en mode commande, sinon donnÃ©es fictives
  // âœ… BUGFIX-015: Validate WooCommerceManager access safely
  if (state.previewMode === "command" && wooCommerceManager !== null && wooCommerceManager !== void 0 && (_wooCommerceManager$g = wooCommerceManager.getOrderData) !== null && _wooCommerceManager$g !== void 0 && _wooCommerceManager$g.call(wooCommerceManager)) {
    var orderData = wooCommerceManager.getOrderData();
    if (orderData) {
      var _wooCommerceManager$g2, _wooCommerceManager$g3;
      var orderItems = ((_wooCommerceManager$g2 = wooCommerceManager.getOrderItems) === null || _wooCommerceManager$g2 === void 0 ? void 0 : _wooCommerceManager$g2.call(wooCommerceManager)) || [];
      var orderTotals = ((_wooCommerceManager$g3 = wooCommerceManager.getOrderTotals) === null || _wooCommerceManager$g3 === void 0 ? void 0 : _wooCommerceManager$g3.call(wooCommerceManager)) || {
        shipping: 0,
        tax: 0,
        subtotal: 0,
        discount: 0
      };
      products = orderItems;
      shippingCost = orderTotals.shipping;
      taxRate = orderTotals.tax > 0 ? orderTotals.tax / orderTotals.subtotal * 100 : 20;
      globalDiscount = orderTotals.discount;
      orderFees = 0; // Les frais de commande sont dÃ©jÃ  inclus dans les items
      currency = orderData.currency || "â‚¬";
    } else {
      // Fallback if orderData is null despite passing the check - use demo data
      shippingCost = props.shippingCost || 8.5;
      taxRate = props.taxRate || 20;
      globalDiscount = props.globalDiscount || 5;
      orderFees = props.orderFees || 2.5;
      currency = "â‚¬";
      products = [{
        sku: "DEMO-001",
        name: "Sample Product",
        description: "Demo product",
        qty: 1,
        price: 29.99,
        discount: 0,
        total: 29.99
      }];
    }
  } else {
    // DonnÃ©es fictives pour le mode Ã©diteur
    shippingCost = props.shippingCost || 8.5;
    taxRate = props.taxRate || 20;
    globalDiscount = props.globalDiscount || 5;
    orderFees = props.orderFees || 2.5;
    currency = "â‚¬";
    products = [{
      sku: "TSHIRT-001",
      name: "T-shirt Premium Bio",
      description: "T-shirt en coton biologique, coupe slim",
      qty: 2,
      price: 29.99,
      discount: 0,
      total: 59.98
    }, {
      sku: "JEAN-045",
      name: "Jean Slim Fit Noir",
      description: "Jean stretch confort, taille haute",
      qty: 1,
      price: 89.99,
      discount: 10.0,
      total: 79.99
    }, {
      sku: "SHOES-089",
      name: "Chaussures Running Pro",
      description: "Chaussures de running avec semelle amortissante",
      qty: 1,
      price: 129.99,
      discount: 0,
      total: 129.99
    }, {
      sku: "HOODIE-112",
      name: "Sweat Ã  Capuche",
      description: "Sweat molletonnÃ©, capuche ajustable",
      qty: 1,
      price: 49.99,
      discount: 5.0,
      total: 44.99
    }];
  }

  // Calcul du total avec remises (mÃªme logique pour donnÃ©es fictives et rÃ©elles)
  var subtotal = products.reduce(function (sum, product) {
    return sum + product.price * product.qty;
  }, 0);
  var itemDiscounts = products.reduce(function (sum, product) {
    return sum + product.discount;
  }, 0);
  var subtotalAfterItemDiscounts = subtotal - itemDiscounts;

  // Sous-total incluant les frais de commande
  var subtotalWithOrderFees = subtotalAfterItemDiscounts + orderFees;

  // Appliquer la remise globale sur le sous-total incluant les frais de commande (seulement si affichÃ©e)
  var globalDiscountAmount = globalDiscount > 0 && showGlobalDiscount ? subtotalWithOrderFees * globalDiscount / 100 : 0;
  var subtotalAfterGlobalDiscount = subtotalWithOrderFees - globalDiscountAmount; // Ajouter les frais de port (seulement si affichÃ©s)
  var subtotalWithShipping = subtotalAfterGlobalDiscount + (showShipping ? shippingCost : 0);

  // Calculer les taxes (seulement si affichÃ©es)
  var taxAmount = taxRate > 0 && showTax ? subtotalWithShipping * taxRate / 100 : 0;

  // Total final
  var finalTotal = subtotalWithShipping + taxAmount;

  // Configuration des colonnes

  var columns = [];
  columns.push({
    key: "name",
    label: "Produit",
    width: showSku && showDescription ? 0.35 : showSku || showDescription ? 0.45 : 0.55,
    align: "left",
    x: 0
  });
  if (showSku) columns.push({
    key: "sku",
    label: "SKU",
    width: 0.15,
    align: "left",
    x: 0
  });
  if (showDescription) columns.push({
    key: "description",
    label: "Description",
    width: 0.25,
    align: "left",
    x: 0
  });
  if (showQuantity) columns.push({
    key: "qty",
    label: "QtÃ©",
    width: 0.08,
    align: "center",
    x: 0
  });
  columns.push({
    key: "price",
    label: "Prix",
    width: 0.12,
    align: "right",
    x: 0
  });
  columns.push({
    key: "total",
    label: "Total",
    width: 0.12,
    align: "right",
    x: 0
  });

  // Normaliser les largeurs
  var totalWidth = columns.reduce(function (sum, col) {
    return sum + col.width;
  }, 0);
  columns.forEach(function (col) {
    return col.width = col.width / totalWidth;
  });

  // Calcul des positions X des colonnes
  var currentX = 8;
  columns.forEach(function (col) {
    col.x = currentX;
    currentX += col.width * (element.width - 16);
  });

  // âœ… Appliquer l'alignement vertical seulement (plus simple et moins risquÃ©)
  var verticalAlign = props.verticalAlign || "top";

  // Calculer la hauteur totale du tableau pour l'alignement vertical
  var rowHeight = showDescription ? 50 : 35;
  var headerHeight = showHeaders ? 35 : 0;
  var productsCount = products.length;
  var tableHeight = headerHeight + productsCount * (rowHeight + 4) + 60; // +60 pour les totaux

  // Offset vertical seulement
  var offsetY = 0;

  // Alignement vertical - dÃ©place le point d'origine vertical du tableau
  if (verticalAlign === "middle") {
    offsetY = Math.max(0, (element.height - tableHeight) / 2);
  } else if (verticalAlign === "bottom") {
    offsetY = Math.max(0, element.height - tableHeight - 10);
  }

  // Fond
  ctx.fillStyle = props.backgroundColor || "#ffffff";
  ctx.fillRect(0, 0, element.width, element.height);

  // Bordure extÃ©rieure
  if (showBorders) {
    ctx.strokeStyle = props.borderColor || "#d1d5db";
    ctx.lineWidth = props.borderWidth || 1;
    if (borderRadius > 0) {
      roundedRect(ctx, 0, 0, element.width, element.height, borderRadius);
      ctx.stroke();
    } else {
      ctx.strokeRect(0, 0, element.width, element.height);
    }
  }
  ctx.textAlign = "left";
  var currentY = (showHeaders ? 25 : 15) + offsetY;

  // En-tÃªtes avec style professionnel
  if (showHeaders) {
    ctx.fillStyle = props.headerBackgroundColor || "#f9fafb";
    // Utiliser roundedRect si borderRadius > 0, sinon fillRect normal
    if (borderRadius > 0) {
      roundedRect(ctx, 1, 1 + offsetY, element.width - 2, 32, borderRadius);
      ctx.fill();
    } else {
      ctx.fillRect(1, 1 + offsetY, element.width - 2, 32);
    }
    ctx.fillStyle = props.headerTextColor || "#374151";
    ctx.font = "".concat(fontStyle, " ").concat(fontWeight, " ").concat(fontSize + 1, "px ").concat(fontFamily);
    ctx.textBaseline = "top";
    columns.forEach(function (col) {
      ctx.textAlign = col.align;
      var textX = col.align === "right" ? col.x + col.width * (element.width - 16) - 4 : col.align === "center" ? col.x + col.width * (element.width - 16) / 2 : col.x;
      ctx.fillText(col.label, textX, 10 + offsetY); // AjustÃ© pour centrer dans la hauteur plus grande
    });

    // Ligne de sÃ©paration sous les en-tÃªtes
    ctx.strokeStyle = "#e5e7eb";
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(4, 34 + offsetY); // AjustÃ© pour la nouvelle hauteur
    ctx.lineTo(element.width - 4, 34 + offsetY);
    ctx.stroke();
    currentY = 42 + offsetY; // AjustÃ© pour la nouvelle hauteur d'entÃªte
  } else {
    currentY = 15 + offsetY;
  }

  // Produits avec alternance de couleurs
  ctx.font = "".concat(fontStyle, " ").concat(fontWeight, " ").concat(fontSize, "px ").concat(fontFamily);
  ctx.textBaseline = "middle";
  products.forEach(function (product, index) {
    // Calcul de la position Y absolue pour cette ligne
    var rowY = currentY + index * (rowHeight + 4);

    // Fond alternÃ© pour les lignes (sans bordures)
    if (showAlternatingRows && index % 2 === 1) {
      ctx.fillStyle = props.alternateRowColor || "#f9fafb";
      // Utiliser roundedRect si borderRadius > 0
      if (borderRadius > 0) {
        roundedRect(ctx, 1, rowY, element.width - 2, rowHeight, borderRadius);
        ctx.fill();
      } else {
        ctx.fillRect(1, rowY, element.width - 2, rowHeight);
      }
    }
    ctx.fillStyle = textColor; // Utiliser la couleur du texte depuis les propriÃ©tÃ©s

    columns.forEach(function (col) {
      ctx.textAlign = col.align;
      var textX = col.align === "right" ? col.x + col.width * (element.width - 16) - 4 : col.align === "center" ? col.x + col.width * (element.width - 16) / 2 : col.x;
      var text = "";
      switch (col.key) {
        case "name":
          text = product.name;
          break;
        case "sku":
          text = product.sku;
          break;
        case "description":
          text = product.description;
          break;
        case "qty":
          text = product.qty.toString();
          break;
        case "price":
          text = "".concat(product.price.toFixed(2)).concat(currency);
          break;
        case "discount":
          text = product.discount > 0 ? "".concat(product.discount.toFixed(2)).concat(currency) : "-";
          break;
        case "total":
          text = "".concat(product.total.toFixed(2)).concat(currency);
          break;
      }

      // Gestion du texte qui dÃ©passe
      var maxWidth = col.width * (element.width - 16) - 8;
      if (ctx.measureText(text).width > maxWidth && col.key === "name") {
        // Tronquer avec "..."
        var truncated = text;
        while (ctx.measureText(truncated + "...").width > maxWidth && truncated.length > 0) {
          truncated = truncated.slice(0, -1);
        }
        text = truncated + "...";
      }
      ctx.fillText(text, textX, rowY + rowHeight / 2);
    });
  });

  // Positionnement pour la section des totaux (aprÃ¨s toutes les lignes de produits)
  currentY = 55 + products.length * (rowHeight + 4) + 8;

  // Section des totaux

  // Ligne de sÃ©paration avant les totaux
  ctx.strokeStyle = "#d1d5db";
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.moveTo(element.width - 200, currentY);
  ctx.lineTo(element.width - 8, currentY);
  ctx.stroke();
  currentY += 20;

  // Affichage des totaux
  ctx.font = "bold ".concat(fontSize, "px Arial");
  ctx.fillStyle = textColor; // Utiliser la couleur du texte
  ctx.textAlign = "left";
  var totalsY = currentY;
  ctx.fillText("Sous-total:", element.width - 200, totalsY);
  ctx.textAlign = "right";
  ctx.fillText("".concat(subtotalWithOrderFees.toFixed(2)).concat(currency), element.width - 8, totalsY);
  currentY += 18;

  // Remises combinÃ©es (articles + globale) - proviennent de coupons WooCommerce
  var totalDiscounts = itemDiscounts + (showGlobalDiscount ? globalDiscountAmount : 0);
  if (totalDiscounts > 0) {
    ctx.textAlign = "left";
    ctx.fillStyle = "#059669"; // Garder le vert pour la remise (couleur spÃ©ciale)
    ctx.fillText("Coupon:", element.width - 200, currentY);
    ctx.textAlign = "right";
    ctx.fillText("-".concat(totalDiscounts.toFixed(2)).concat(currency), element.width - 8, currentY);
    currentY += 18;
  }

  // Frais de port
  if (shippingCost > 0 && showShipping) {
    ctx.textAlign = "left";
    ctx.fillStyle = textColor; // Utiliser la couleur du texte
    ctx.fillText("Frais de port:", element.width - 200, currentY);
    ctx.textAlign = "right";
    ctx.fillText("".concat(shippingCost.toFixed(2)).concat(currency), element.width - 8, currentY);
    currentY += 18;
  }

  // Taxes
  if (taxAmount > 0 && showTax) {
    ctx.textAlign = "left";
    ctx.fillStyle = textColor; // Utiliser la couleur du texte
    ctx.fillText("TVA (".concat(taxRate, "%):"), element.width - 200, currentY);
    ctx.textAlign = "right";
    ctx.fillText("".concat(taxAmount.toFixed(2)).concat(currency), element.width - 8, currentY);
    currentY += 18;
  }
  currentY += 8; // Plus d'espace avant la ligne de sÃ©paration du total
  ctx.strokeStyle = textColor; // Utiliser la couleur du texte pour la ligne
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(element.width - 200, currentY - 5);
  ctx.lineTo(element.width - 8, currentY - 5);
  ctx.stroke();
  currentY += 8; // Plus d'espace aprÃ¨s la ligne de sÃ©paration
  ctx.font = "".concat(fontStyle, " bold ").concat(fontSize + 2, "px ").concat(fontFamily);
  ctx.fillStyle = textColor; // Utiliser la couleur du texte pour le total
  ctx.textAlign = "left";
  ctx.fillText("TOTAL:", element.width - 200, currentY);
  ctx.textAlign = "right";
  ctx.fillText("".concat(finalTotal.toFixed(2)).concat(currency), element.width - 8, currentY);
};

// Fonctions de rendu WooCommerce avec donnÃ©es fictives ou rÃ©elles selon le mode
var drawCustomerInfo = function drawCustomerInfo(ctx, element, state) {
  var props = element;
  var fontSize = props.fontSize || 12;
  var fontFamily = props.fontFamily || "Arial";
  var fontWeight = props.fontWeight || "normal";
  var fontStyle = props.fontStyle || "normal";
  // PropriÃ©tÃ©s de police pour l'en-tÃªte
  var headerFontSize = props.headerFontSize || fontSize + 2;
  var headerFontFamily = props.headerFontFamily || fontFamily;
  var headerFontWeight = props.headerFontWeight || fontWeight;
  var headerFontStyle = props.headerFontStyle || fontStyle;
  // PropriÃ©tÃ©s de police pour le corps du texte
  var bodyFontSize = props.bodyFontSize || fontSize;
  var bodyFontFamily = props.bodyFontFamily || fontFamily;
  var bodyFontWeight = props.bodyFontWeight || fontWeight;
  var bodyFontStyle = props.bodyFontStyle || fontStyle;
  var layout = props.layout || "vertical";
  var showHeaders = props.showHeaders !== false;
  var showBorders = props.showBorders !== false;
  var showFullName = props.showFullName !== false;
  var showAddress = props.showAddress !== false;
  var showEmail = props.showEmail !== false;
  var showPhone = props.showPhone !== false;
  var showPaymentMethod = props.showPaymentMethod !== false;
  var showTransactionId = props.showTransactionId !== false;

  // Fond
  if (props.showBackground !== false) {
    ctx.fillStyle = props.backgroundColor || "#ffffff";
    ctx.fillRect(0, 0, element.width, element.height);
  }

  // Bordures
  if (showBorders) {
    ctx.strokeStyle = props.borderColor || "#e5e7eb";
    ctx.lineWidth = 1;
    ctx.strokeRect(0, 0, element.width, element.height);
  }
  ctx.fillStyle = normalizeColor(props.textColor || "#000000");
  ctx.font = "".concat(headerFontStyle, " ").concat(headerFontWeight, " ").concat(headerFontSize, "px ").concat(headerFontFamily);
  ctx.textAlign = "left";
  var y = showHeaders ? 25 : 15;

  // En-tÃªte
  if (showHeaders) {
    ctx.fillStyle = normalizeColor(props.headerTextColor || "#111827");
    ctx.fillText("Informations Client", 10, y);
    y += 20;
    ctx.fillStyle = normalizeColor(props.textColor || "#000000");
  }

  // Informations client fictives ou rÃ©elles selon le mode
  var customerData;
  if (state.previewMode === "command") {
    customerData = wooCommerceManager.getCustomerInfo();
  } else {
    // DonnÃ©es fictives pour le mode Ã©diteur
    customerData = {
      name: "Marie Dupont",
      address: "15 rue des Lilas, 75001 Paris",
      email: "marie.dupont@email.com",
      phone: "+33 6 12 34 56 78"
    };
  }
  ctx.font = "".concat(bodyFontStyle, " ").concat(bodyFontWeight, " ").concat(bodyFontSize, "px ").concat(bodyFontFamily);
  if (layout === "vertical") {
    if (showFullName) {
      ctx.fillText(customerData.name, 10, y);
      y += 18;
    }
    if (showAddress) {
      ctx.fillText(customerData.address, 10, y);
      y += 18;
    }
    if (showEmail) {
      ctx.fillText(customerData.email, 10, y);
      y += 18;
    }
    if (showPhone) {
      ctx.fillText(customerData.phone, 10, y);
      y += 18;
    }
    if (showPaymentMethod) {
      ctx.fillText("Paiement: Carte bancaire", 10, y);
      y += 18;
    }
    if (showTransactionId) {
      ctx.fillText("ID: TXN123456789", 10, y);
    }
  } else if (layout === "horizontal") {
    var text = "";
    if (showFullName) text += customerData.name;
    if (showEmail) text += (text ? " - " : "") + customerData.email;
    if (text) ctx.fillText(text, 10, y);
    if (showPhone) {
      ctx.fillText(customerData.phone, element.width - ctx.measureText(customerData.phone).width - 10, y);
    }
  } else if (layout === "compact") {
    var compactText = "";
    if (showFullName) compactText += customerData.name;
    if (showAddress) compactText += (compactText ? " â€¢ " : "") + customerData.address.split(",")[0];
    if (showEmail) compactText += (compactText ? " â€¢ " : "") + customerData.email;
    if (showPhone) compactText += (compactText ? " â€¢ " : "") + customerData.phone;

    // Wrap text if too long
    var maxWidth = element.width - 20;
    var words = compactText.split(" ");
    var line = "";
    var compactY = y;
    for (var i = 0; i < words.length; i++) {
      var testLine = line + words[i] + " ";
      var metrics = ctx.measureText(testLine);
      if (metrics.width > maxWidth && i > 0) {
        ctx.fillText(line, 10, compactY);
        line = words[i] + " ";
        compactY += 16;
      } else {
        line = testLine;
      }
    }
    ctx.fillText(line, 10, compactY);
  }
};
var drawCompanyInfo = function drawCompanyInfo(ctx, element, canvasSettings) {
  var props = element;
  var fontSize = props.fontSize || 12;
  var fontFamily = props.fontFamily || "Arial";
  var fontWeight = props.fontWeight || "normal";
  var fontStyle = props.fontStyle || "normal";
  // PropriÃ©tÃ©s de police pour l'en-tÃªte (nom de l'entreprise)
  var headerFontSize = props.headerFontSize || Math.round(fontSize * 1.2);
  var headerFontFamily = props.headerFontFamily || fontFamily;
  var headerFontWeight = props.headerFontWeight || "bold";
  var headerFontStyle = props.headerFontStyle || fontStyle;
  // PropriÃ©tÃ©s de police pour le corps du texte
  var bodyFontSize = props.bodyFontSize || fontSize;
  var bodyFontFamily = props.bodyFontFamily || fontFamily;
  var bodyFontWeight = props.bodyFontWeight || fontWeight;
  var bodyFontStyle = props.bodyFontStyle || fontStyle;
  var textAlign = "left"; // Forcer alignement Ã  gauche pour company_info
  var theme = props.theme || "corporate";
  var showBackground = props.showBackground !== false; // Par dÃ©faut true
  var showBorders = props.showBorders !== false; // Par dÃ©faut true
  var showCompanyName = props.showCompanyName !== false; // Par dÃ©faut true
  var showAddress = props.showAddress !== false; // Par dÃ©faut true
  var showPhone = props.showPhone !== false; // Par dÃ©faut true
  var showEmail = props.showEmail !== false; // Par dÃ©faut true
  var showSiret = props.showSiret !== false; // Par dÃ©faut true
  var showVat = props.showVat !== false; // Par dÃ©faut true
  var showRcs = props.showRcs !== false; // Par dÃ©faut true
  var showCapital = props.showCapital !== false; // Par dÃ©faut true

  // DÃ©finition des thÃ¨mes
  var themes = {
    corporate: {
      backgroundColor: "#ffffff",
      borderColor: "#1f2937",
      textColor: "#374151",
      headerTextColor: "#111827"
    },
    modern: {
      backgroundColor: "#ffffff",
      borderColor: "#3b82f6",
      textColor: "#1e40af",
      headerTextColor: "#1e3a8a"
    },
    elegant: {
      backgroundColor: "#ffffff",
      borderColor: "#8b5cf6",
      textColor: "#6d28d9",
      headerTextColor: "#581c87"
    },
    minimal: {
      backgroundColor: "#ffffff",
      borderColor: "#e5e7eb",
      textColor: "#374151",
      headerTextColor: "#111827"
    },
    professional: {
      backgroundColor: "#ffffff",
      borderColor: "#059669",
      textColor: "#047857",
      headerTextColor: "#064e3b"
    }
  };
  var currentTheme = themes[theme] || themes.corporate;

  // Utiliser les couleurs depuis les props de l'Ã©lÃ©ment ou le thÃ¨me (PAS les paramÃ¨tres canvas globaux)
  var bgColor = normalizeColor(props.backgroundColor || currentTheme.backgroundColor);
  var borderCol = normalizeColor(props.borderColor || currentTheme.borderColor);
  var txtColor = normalizeColor(props.textColor || currentTheme.textColor);
  var headerTxtColor = normalizeColor(props.headerTextColor || currentTheme.headerTextColor);

  // Appliquer le fond si demandÃ©
  if (showBackground) {
    ctx.fillStyle = bgColor;
    ctx.fillRect(0, 0, element.width, element.height);
  }

  // Appliquer les bordures si demandÃ©
  if (showBorders) {
    ctx.strokeStyle = borderCol;
    ctx.lineWidth = props.borderWidth || 1;
    ctx.strokeRect(0, 0, element.width, element.height);
  }
  ctx.fillStyle = txtColor;
  ctx.textAlign = textAlign;

  // Calcul de la position X (toujours alignÃ© Ã  gauche pour company_info)
  var x = 10;
  var y = 20;

  // Informations entreprise hybrides : props configurables + valeurs par dÃ©faut
  var companyData = {
    name: props.companyName || "Ma Boutique En Ligne",
    address: props.companyAddress || "25 avenue des CommerÃ§ants",
    city: props.companyCity || "69000 Lyon",
    siret: props.companySiret || "SIRET: 123 456 789 00012",
    tva: props.companyTva || "TVA: FR 12 345 678 901",
    rcs: props.companyRcs || "RCS: Lyon B 123 456 789",
    capital: props.companyCapital || "Capital social: 10 000 â‚¬",
    email: props.companyEmail || "contact@maboutique.com",
    phone: props.companyPhone || "+33 4 12 34 56 78"
  };

  // Afficher le nom de l'entreprise si demandÃ©
  if (showCompanyName) {
    ctx.fillStyle = headerTxtColor;
    ctx.font = "".concat(headerFontStyle, " ").concat(headerFontWeight, " ").concat(headerFontSize, "px ").concat(headerFontFamily);
    ctx.fillText(companyData.name, x, y);
    y += Math.round(fontSize * 1.5);
    ctx.fillStyle = txtColor;
  }

  // Police normale pour les autres Ã©lÃ©ments
  ctx.font = "".concat(bodyFontStyle, " ").concat(bodyFontWeight, " ").concat(bodyFontSize, "px ").concat(bodyFontFamily);

  // Afficher l'adresse si demandÃ©e
  if (showAddress) {
    ctx.fillText(companyData.address, x, y);
    y += Math.round(fontSize * 1.2);
    ctx.fillText(companyData.city, x, y);
    y += Math.round(fontSize * 1.5);
  }

  // Afficher le SIRET si demandÃ©
  if (showSiret) {
    ctx.fillText(companyData.siret, x, y);
    y += Math.round(fontSize * 1.2);
  }

  // Afficher la TVA si demandÃ©e
  if (showVat) {
    ctx.fillText(companyData.tva, x, y);
    y += Math.round(fontSize * 1.2);
  }

  // Afficher le RCS si demandÃ©
  if (showRcs) {
    ctx.fillText(companyData.rcs, x, y);
    y += Math.round(fontSize * 1.2);
  }

  // Afficher le Capital social si demandÃ©
  if (showCapital) {
    ctx.fillText(companyData.capital, x, y);
    y += Math.round(fontSize * 1.2);
  }

  // Afficher l'email si demandÃ©
  if (showEmail) {
    ctx.fillText(companyData.email, x, y);
    y += Math.round(fontSize * 1.2);
  }

  // Afficher le tÃ©lÃ©phone si demandÃ©
  if (showPhone) {
    ctx.fillText(companyData.phone, x, y);
  }
};
var drawOrderNumber = function drawOrderNumber(ctx, element, state) {
  var props = element;
  var fontSize = props.fontSize || 14;
  var fontFamily = props.fontFamily || "Arial";
  var fontWeight = props.fontWeight || "normal";
  var fontStyle = props.fontStyle || "normal";
  // PropriÃ©tÃ©s de police pour le label
  var labelFontSize = props.headerFontSize || fontSize;
  var labelFontFamily = props.headerFontFamily || fontFamily;
  var labelFontWeight = props.headerFontWeight || "bold";
  var labelFontStyle = props.headerFontStyle || fontStyle;
  // PropriÃ©tÃ©s de police pour le numÃ©ro
  var numberFontSize = props.numberFontSize || fontSize;
  var numberFontFamily = props.numberFontFamily || fontFamily;
  var numberFontWeight = props.numberFontWeight || fontWeight;
  var numberFontStyle = props.numberFontStyle || fontStyle;
  // PropriÃ©tÃ©s de police pour la date
  var dateFontSize = props.dateFontSize || fontSize - 2;
  var dateFontFamily = props.dateFontFamily || fontFamily;
  var dateFontWeight = props.dateFontWeight || fontWeight;
  var dateFontStyle = props.dateFontStyle || fontStyle;
  // const textAlign = props.textAlign || 'left'; // left, center, right
  // PropriÃ©tÃ©s d'alignement spÃ©cifiques
  // const labelTextAlign = props.labelTextAlign || textAlign;
  // const numberTextAlign = props.numberTextAlign || textAlign;
  // const dateTextAlign = props.dateTextAlign || textAlign;
  var contentAlign = props.contentAlign || "left"; // Alignement gÃ©nÃ©ral du contenu dans l'Ã©lÃ©ment
  var showLabel = props.showLabel !== false; // Par dÃ©faut true
  var showDate = props.showDate !== false; // Par dÃ©faut true
  var labelPosition = props.labelPosition || "above"; // above, left, right, below
  var labelText = props.labelText || "NÂ° de commande:"; // Texte personnalisable du libellÃ©

  // Fonction helper pour calculer la position X selon l'alignement gÃ©nÃ©ral du contenu
  // const calculateContentX = (align: string) => {
  //   if (align === 'left') {
  //     return 10;
  //   } else if (align === 'center') {
  //     return element.width / 2;
  //   } else { // right
  //     return element.width - 10;
  //   }
  // };

  // Fonction helper pour calculer la position X selon l'alignement du texte
  // const calculateX = (align: string) => {
  //   if (align === 'left') {
  //     return 10;
  //   } else if (align === 'center') {
  //     return element.width / 2;
  //   } else { // right
  //     return element.width - 10;
  //   }
  // };

  // Appliquer le fond seulement si showBackground est activÃ©
  if (props.showBackground !== false) {
    ctx.fillStyle = props.backgroundColor || "#e5e7eb";
    ctx.fillRect(0, 0, element.width, element.height);
  }
  ctx.fillStyle = "#000000";

  // NumÃ©ro de commande et date fictifs ou rÃ©els selon le mode
  var orderNumber;
  var orderDate;
  if (state.previewMode === "command") {
    orderNumber = wooCommerceManager.getOrderNumber();
    orderDate = wooCommerceManager.getOrderDate();
  } else {
    // Utiliser les donnÃ©es WooCommerce si disponibles, sinon valeurs par dÃ©faut
    orderNumber = wooCommerceManager.getOrderNumber() || "CMD-2024-01234";
    orderDate = wooCommerceManager.getOrderDate() || "27/10/2024";
  }
  var y = 20;

  // Calculer la largeur totale du contenu pour l'alignement gÃ©nÃ©ral
  var totalContentWidth = 0;
  if (showLabel) {
    if (labelPosition === "above" || labelPosition === "below") {
      // Pour les positions verticales, prendre la largeur maximale
      ctx.font = "".concat(labelFontStyle, " ").concat(labelFontWeight, " ").concat(labelFontSize, "px ").concat(labelFontFamily);
      var labelWidth = ctx.measureText(labelText).width;
      ctx.font = "".concat(numberFontStyle, " ").concat(numberFontWeight, " ").concat(numberFontSize, "px ").concat(numberFontFamily);
      var numberWidth = ctx.measureText(orderNumber).width;
      totalContentWidth = Math.max(labelWidth, numberWidth);
    } else {
      // Pour les positions latÃ©rales, calculer la largeur combinÃ©e
      ctx.font = "".concat(labelFontStyle, " ").concat(labelFontWeight, " ").concat(labelFontSize, "px ").concat(labelFontFamily);
      var _labelWidth = ctx.measureText(labelText).width;
      ctx.font = "".concat(numberFontStyle, " ").concat(numberFontWeight, " ").concat(numberFontSize, "px ").concat(numberFontFamily);
      var _numberWidth = ctx.measureText(orderNumber).width;
      totalContentWidth = _labelWidth + _numberWidth + 15; // 15px d'espace
    }
  } else {
    // Juste le numÃ©ro
    ctx.font = "".concat(numberFontStyle, " ").concat(numberFontWeight, " ").concat(numberFontSize, "px ").concat(numberFontFamily);
    totalContentWidth = ctx.measureText(orderNumber).width;
  }

  // Calculer le dÃ©calage pour l'alignement gÃ©nÃ©ral du contenu
  var contentOffsetX = 0;
  if (contentAlign === "center") {
    contentOffsetX = (element.width - totalContentWidth) / 2 - 10; // -10 car on commence Ã  10
  } else if (contentAlign === "right") {
    contentOffsetX = element.width - totalContentWidth - 20; // -20 pour les marges
  }
  if (showLabel) {
    if (labelPosition === "above") {
      // LibellÃ© au-dessus, numÃ©ro en-dessous - utiliser l'alignement gÃ©nÃ©ral du contenu
      ctx.font = "".concat(labelFontStyle, " ").concat(labelFontWeight, " ").concat(labelFontSize, "px ").concat(labelFontFamily);
      ctx.textAlign = contentAlign;
      var labelX = contentAlign === "left" ? 10 + contentOffsetX : contentAlign === "center" ? element.width / 2 : element.width - 10;
      ctx.fillText(labelText, labelX, y);
      y += 18;
      ctx.font = "".concat(numberFontStyle, " ").concat(numberFontWeight, " ").concat(numberFontSize, "px ").concat(numberFontFamily);
      ctx.textAlign = contentAlign;
      var numberX = contentAlign === "left" ? 10 + contentOffsetX : contentAlign === "center" ? element.width / 2 : element.width - 10;
      ctx.fillText(orderNumber, numberX, y);
    } else if (labelPosition === "below") {
      // NumÃ©ro au-dessus, libellÃ© en-dessous - utiliser l'alignement gÃ©nÃ©ral du contenu
      ctx.font = "".concat(numberFontStyle, " ").concat(numberFontWeight, " ").concat(numberFontSize, "px ").concat(numberFontFamily);
      ctx.textAlign = contentAlign;
      var _numberX = contentAlign === "left" ? 10 + contentOffsetX : contentAlign === "center" ? element.width / 2 : element.width - 10;
      ctx.fillText(orderNumber, _numberX, y);
      y += 18;
      ctx.font = "".concat(labelFontStyle, " ").concat(labelFontWeight, " ").concat(labelFontSize, "px ").concat(labelFontFamily);
      ctx.textAlign = contentAlign;
      var _labelX = contentAlign === "left" ? 10 + contentOffsetX : contentAlign === "center" ? element.width / 2 : element.width - 10;
      ctx.fillText(labelText, _labelX, y);
    } else if (labelPosition === "left") {
      // LibellÃ© Ã  gauche, numÃ©ro Ã  droite - avec espacement optimal et alignement gÃ©nÃ©ral
      ctx.font = "".concat(labelFontStyle, " ").concat(labelFontWeight, " ").concat(labelFontSize, "px ").concat(labelFontFamily);
      ctx.textAlign = "left";
      var _labelX2 = 10 + contentOffsetX;
      ctx.fillText(labelText, _labelX2, y);

      // Calculer l'espace disponible pour centrer le numÃ©ro ou l'aligner intelligemment
      var _labelWidth2 = ctx.measureText(labelText).width;
      var _numberX2 = _labelX2 + _labelWidth2 + 15; // 15px d'espace aprÃ¨s le libellÃ©

      ctx.font = "".concat(numberFontStyle, " ").concat(numberFontWeight, " ").concat(numberFontSize, "px ").concat(numberFontFamily);
      ctx.textAlign = "left";
      ctx.fillText(orderNumber, _numberX2, y);
    } else if (labelPosition === "right") {
      // NumÃ©ro Ã  gauche, libellÃ© Ã  droite - avec espacement optimal et alignement gÃ©nÃ©ral
      ctx.font = "".concat(numberFontStyle, " ").concat(numberFontWeight, " ").concat(numberFontSize, "px ").concat(numberFontFamily);
      ctx.textAlign = "left";
      var _numberX3 = 10 + contentOffsetX;
      ctx.fillText(orderNumber, _numberX3, y);

      // Calculer la position du libellÃ© aprÃ¨s le numÃ©ro
      var _numberWidth2 = ctx.measureText(orderNumber).width;
      var _labelX3 = _numberX3 + _numberWidth2 + 15; // 15px d'espace aprÃ¨s le numÃ©ro

      ctx.font = "".concat(labelFontStyle, " ").concat(labelFontWeight, " ").concat(labelFontSize, "px ").concat(labelFontFamily);
      ctx.textAlign = "left";
      ctx.fillText(labelText, _labelX3, y);
    }
  } else {
    // Pas de libellÃ©, juste le numÃ©ro avec alignement gÃ©nÃ©ral du contenu
    ctx.font = "".concat(numberFontStyle, " ").concat(numberFontWeight, " ").concat(numberFontSize, "px ").concat(numberFontFamily);
    ctx.textAlign = contentAlign;
    // Pour le cas sans libellÃ©, utiliser directement calculateContentX sans contentOffsetX
    // car contentOffsetX est calculÃ© pour centrer le contenu total, mais ici on n'a que le numÃ©ro
    if (contentAlign === "left") {
      ctx.fillText(orderNumber, 10, y);
    } else if (contentAlign === "center") {
      ctx.fillText(orderNumber, element.width / 2, y);
    } else {
      // right
      ctx.fillText(orderNumber, element.width - 10, y);
    }
  }

  // Afficher la date sur une nouvelle ligne avec le mÃªme alignement gÃ©nÃ©ral
  if (showDate) {
    ctx.font = "".concat(dateFontStyle, " ").concat(dateFontWeight, " ").concat(dateFontSize, "px ").concat(dateFontFamily);
    ctx.textAlign = contentAlign;
    // Pour la date, utiliser directement calculateContentX sans contentOffsetX
    // car contentOffsetX est calculÃ© pour centrer le contenu total
    if (contentAlign === "left") {
      ctx.fillText("Date: ".concat(orderDate), 10, y + 20);
    } else if (contentAlign === "center") {
      ctx.fillText("Date: ".concat(orderDate), element.width / 2, y + 20);
    } else {
      // right
      ctx.fillText("Date: ".concat(orderDate), element.width - 10, y + 20);
    }
  }
};
var drawWoocommerceOrderDate = function drawWoocommerceOrderDate(ctx, element, state) {
  var props = element.properties || {};
  var fontSize = props.fontSize || 12;
  var fontFamily = props.fontFamily || "Arial";
  var fontWeight = props.fontWeight || "normal";
  var fontStyle = props.fontStyle || "normal";
  var textAlign = props.textAlign || "left";
  var color = props.color || "#000000";
  var backgroundColor = props.backgroundColor || "transparent";
  var dateFormat = props.dateFormat || "d/m/Y";
  var showTime = props.showTime || false;

  // Appliquer le fond si spÃ©cifiÃ©
  if (backgroundColor !== "transparent") {
    ctx.fillStyle = backgroundColor;
    ctx.fillRect(0, 0, element.width, element.height);
  }

  // Appliquer la bordure si spÃ©cifiÃ©e
  if (props.border && props.border.width > 0) {
    ctx.strokeStyle = props.border.color || "#000000";
    ctx.lineWidth = props.border.width;
    if (props.border.style === "dashed") {
      ctx.setLineDash([5, 5]);
    } else if (props.border.style === "dotted") {
      ctx.setLineDash([2, 2]);
    }
    ctx.strokeRect(0, 0, element.width, element.height);
    ctx.setLineDash([]);
  }

  // RÃ©cupÃ©rer la date de la commande
  var orderDate;
  if (state.previewMode === "command") {
    orderDate = wooCommerceManager.getOrderDate();
  } else {
    orderDate = wooCommerceManager.getOrderDate() || "27/10/2024";
  }

  // Formater la date selon le format spÃ©cifiÃ©
  var displayDate = orderDate;
  try {
    var dateObj = new Date(orderDate);
    if (!isNaN(dateObj.getTime())) {
      // Formater selon le format spÃ©cifiÃ©
      var day = String(dateObj.getDate()).padStart(2, "0");
      var month = String(dateObj.getMonth() + 1).padStart(2, "0");
      var year = dateObj.getFullYear();
      if (dateFormat === "m/d/Y") {
        displayDate = "".concat(month, "/").concat(day, "/").concat(year);
      } else if (dateFormat === "Y-m-d") {
        displayDate = "".concat(year, "-").concat(month, "-").concat(day);
      } else if (dateFormat === "d-m-Y") {
        displayDate = "".concat(day, "-").concat(month, "-").concat(year);
      } else if (dateFormat === "d.m.Y") {
        displayDate = "".concat(day, ".").concat(month, ".").concat(year);
      } else {
        // d/m/Y par dÃ©faut
        displayDate = "".concat(day, "/").concat(month, "/").concat(year);
      }

      // Ajouter l'heure si demandÃ©
      if (showTime) {
        var hours = String(dateObj.getHours()).padStart(2, "0");
        var minutes = String(dateObj.getMinutes()).padStart(2, "0");
        displayDate += " ".concat(hours, ":").concat(minutes);
      }
    }
  } catch (e) {
    // Utiliser la date brute en cas d'erreur
  }

  // Appliquer le padding
  var padding = props.padding || {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  };
  var yOffset = padding.top || 0;
  var xOffset = padding.left || 0;

  // Configurer le contexte de rendu
  ctx.fillStyle = color;
  ctx.font = "".concat(fontStyle, " ").concat(fontWeight, " ").concat(fontSize, "px ").concat(fontFamily);
  ctx.textAlign = textAlign;
  ctx.textBaseline = "top";

  // Calculer la position X selon l'alignement
  var x = xOffset;
  if (textAlign === "center") {
    x = element.width / 2;
  } else if (textAlign === "right") {
    x = element.width - (padding.right || 0);
  }

  // Afficher la date
  ctx.fillText(displayDate, x, yOffset + 10);
};
var drawWoocommerceInvoiceNumber = function drawWoocommerceInvoiceNumber(ctx, element) {
  var _wooCommerceManager$g4;
  var props = element.properties || {};
  var fontSize = props.fontSize || 12;
  var fontFamily = props.fontFamily || "Arial";
  var fontWeight = props.fontWeight || "normal";
  var fontStyle = props.fontStyle || "normal";
  var textAlign = props.textAlign || "left";
  var color = props.color || "#000000";
  var backgroundColor = props.backgroundColor || "transparent";
  var prefix = props.prefix || "";
  var suffix = props.suffix || "";

  // Appliquer le fond si spÃ©cifiÃ©
  if (backgroundColor !== "transparent") {
    ctx.fillStyle = backgroundColor;
    ctx.fillRect(0, 0, element.width, element.height);
  }

  // Appliquer la bordure si spÃ©cifiÃ©e
  if (props.border && props.border.width > 0) {
    ctx.strokeStyle = props.border.color || "#000000";
    ctx.lineWidth = props.border.width;
    if (props.border.style === "dashed") {
      ctx.setLineDash([5, 5]);
    } else if (props.border.style === "dotted") {
      ctx.setLineDash([2, 2]);
    }
    ctx.strokeRect(0, 0, element.width, element.height);
    ctx.setLineDash([]);
  }

  // RÃ©cupÃ©rer le numÃ©ro de facture WooCommerce
  var invoiceNumber = ((_wooCommerceManager$g4 = wooCommerceManager.getInvoiceNumber) === null || _wooCommerceManager$g4 === void 0 ? void 0 : _wooCommerceManager$g4.call(wooCommerceManager)) || "INV-2024-00001";

  // Construire le texte avec prÃ©fixe et suffixe
  var displayText = "".concat(prefix).concat(invoiceNumber).concat(suffix);

  // Appliquer le padding
  var padding = props.padding || {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  };
  var yOffset = padding.top || 0;
  var xOffset = padding.left || 0;

  // Configurer le contexte de rendu
  ctx.fillStyle = color;
  ctx.font = "".concat(fontStyle, " ").concat(fontWeight, " ").concat(fontSize, "px ").concat(fontFamily);
  ctx.textAlign = textAlign;
  ctx.textBaseline = "top";

  // Calculer la position X selon l'alignement
  var x = xOffset;
  if (textAlign === "center") {
    x = element.width / 2;
  } else if (textAlign === "right") {
    x = element.width - (padding.right || 0);
  }

  // Afficher le numÃ©ro de facture
  ctx.fillText(displayText, x, yOffset + 10);
};
var drawDocumentType = function drawDocumentType(ctx, element, state) {
  var props = element;
  var fontSize = props.fontSize || 18;
  var fontFamily = props.fontFamily || "Arial";
  var fontWeight = props.fontWeight || "bold";
  var fontStyle = props.fontStyle || "normal";
  var textAlign = props.textAlign || "left";
  var textColor = props.textColor || "#000000";

  // Appliquer le fond seulement si showBackground est activÃ©
  if (props.showBackground !== false) {
    ctx.fillStyle = props.backgroundColor || "#e5e7eb";
    ctx.fillRect(0, 0, element.width, element.height);
  }
  ctx.fillStyle = textColor;
  ctx.font = "".concat(fontStyle, " ").concat(fontWeight, " ").concat(fontSize, "px ").concat(fontFamily);
  ctx.textAlign = textAlign;

  // Type de document fictif ou rÃ©el selon le mode
  var documentType;
  if (state.previewMode === "command") {
    // En mode commande rÃ©el, on pourrait rÃ©cupÃ©rer le type depuis WooCommerce
    // Pour l'instant, on utilise la valeur configurÃ©e ou une valeur par dÃ©faut
    documentType = props.documentType || "FACTURE";
  } else {
    // DonnÃ©es fictives pour le mode Ã©diteur
    documentType = props.documentType || "FACTURE";
  }

  // Convertir les valeurs techniques en texte lisible
  var documentTypeLabels = {
    FACTURE: "FACTURE",
    DEVIS: "DEVIS",
    BON_COMMANDE: "BON DE COMMANDE",
    AVOIR: "AVOIR",
    RELEVE: "RELEVE",
    CONTRAT: "CONTRAT"
  };
  documentType = documentTypeLabels[documentType] || documentType;
  var x = textAlign === "center" ? element.width / 2 : textAlign === "right" ? element.width - 10 : 10;
  var y = element.height / 2 + fontSize / 3; // Centrer verticalement

  ctx.fillText(documentType, x, y);
};
// Flag global pour afficher les logs dÃ©taillÃ©s des Ã©lÃ©ments (debug)
// Debug flags - set to true to enable verbose logging

// Constantes pour le cache des images
var MAX_CACHE_ITEMS = 100; // Max 100 images in cache

var Canvas = function Canvas(_ref7) {
  var _window$pdfBuilderDat, _window$pdfBuilderDat2, _window$pdfBuilderDat3, _window$pdfBuilderDat4;
  var width = _ref7.width,
    height = _ref7.height,
    className = _ref7.className;
  // DEBUG: Log component initialization and data reception
  console.log('ðŸš€ [Canvas DEBUG] Component initialized, checking window data:', {
    windowPdfBuilderData: window.pdfBuilderData,
    license: (_window$pdfBuilderDat = window.pdfBuilderData) === null || _window$pdfBuilderDat === void 0 ? void 0 : _window$pdfBuilderDat.license,
    canvasSettings: (_window$pdfBuilderDat2 = window.pdfBuilderData) === null || _window$pdfBuilderDat2 === void 0 ? void 0 : _window$pdfBuilderDat2.canvasSettings
  });
  var canvasRef = (0,react.useRef)(null);
  var canvasWrapperRef = (0,react.useRef)(null);

  // âœ… Track derniers Ã©lÃ©ments rendus pour Ã©viter double rendu
  var lastRenderedElementsRef = (0,react.useRef)("");
  var renderCountRef = (0,react.useRef)(0);
  var _useBuilder = useBuilder(),
    state = _useBuilder.state,
    dispatch = _useBuilder.dispatch;
  var canvasSettings = CanvasSettingsContext_useCanvasSettings();
  debugLog("ðŸŽ¨ Canvas: Component initialized with props:", {
    width: width,
    height: height,
    className: className
  });
  debugLog("ðŸ“Š Canvas: Initial state:", {
    elements: state.elements.length,
    selection: state.selection.selectedElements.length,
    zoom: state.canvas.zoom
  });
  debugLog("[Canvas] Component initialized - Dimensions: ".concat(width, "x").concat(height, ", Settings loaded: ").concat(!!canvasSettings));

  // Force re-render when canvas settings change (commentÃ© pour Ã©viter les boucles)
  // const [, forceUpdate] = useState({});
  // useEffect(() => {
  //   forceUpdate({});
  // }, [canvasSettings.canvasBackgroundColor, canvasSettings.borderColor, canvasSettings.borderWidth, canvasSettings.shadowEnabled, canvasSettings.containerBackgroundColor]);

  // Ã‰tat pour le menu contextuel
  var _useState = (0,react.useState)({
      isVisible: false,
      position: {
        x: 0,
        y: 0
      }
    }),
    _useState2 = Canvas_slicedToArray(_useState, 2),
    contextMenu = _useState2[0],
    setContextMenu = _useState2[1];

  // âœ… STATE for image loading - force redraw when images load
  var _useState3 = (0,react.useState)(0),
    _useState4 = Canvas_slicedToArray(_useState3, 2),
    imageLoadCount = _useState4[0],
    setImageLoadCount = _useState4[1];

  // RÃ©cupÃ©rer la limite mÃ©moire JavaScript depuis les paramÃ¨tres
  var memoryLimitJs = useCanvasSetting("memory_limit_js", 256); // En MB, dÃ©faut 256MB

  // âœ… LAZY LOADING: RÃ©cupÃ©rer le paramÃ¨tre depuis les settings
  var lazyLoadingEnabled = canvasSettings.lazyLoadingEditor;

  // âœ… LAZY LOADING: Ã‰tat pour tracker les Ã©lÃ©ments visibles
  var _useState5 = (0,react.useState)(new Set()),
    _useState6 = Canvas_slicedToArray(_useState5, 2),
    visibleElements = _useState6[0],
    setVisibleElements = _useState6[1];
  var _useState7 = (0,react.useState)({
      x: 0,
      y: 0,
      width: width,
      height: height
    }),
    _useState8 = Canvas_slicedToArray(_useState7, 2),
    viewportBounds = _useState8[0],
    setViewportBounds = _useState8[1];

  // âœ… LAZY LOADING: Fonction pour dÃ©terminer si un Ã©lÃ©ment est visible dans le viewport
  var isElementVisible = (0,react.useCallback)(function (element, viewport) {
    // Calculer les bounds de l'Ã©lÃ©ment (simplifiÃ© - on pourrait amÃ©liorer avec rotation, etc.)
    var elementBounds = {
      x: element.x,
      y: element.y,
      width: element.width,
      height: element.height
    };

    // VÃ©rifier si l'Ã©lÃ©ment intersecte le viewport (avec une marge de 100px)
    var margin = 100;
    return !(elementBounds.x + elementBounds.width < viewportBounds.x - margin || elementBounds.x > viewportBounds.x + viewportBounds.width + margin || elementBounds.y + elementBounds.height < viewportBounds.y - margin || elementBounds.y > viewportBounds.y + viewportBounds.height + margin);
  }, [viewportBounds]); // âœ… LAZY LOADING: Filtrer les Ã©lÃ©ments visibles
  var visibleElementsList = (0,react.useMemo)(function () {
    if (!lazyLoadingEnabled) {
      return state.elements; // Tous les Ã©lÃ©ments si lazy loading dÃ©sactivÃ©
    }

    // Toujours inclure les 5 premiers Ã©lÃ©ments pour Ã©viter les sauts visuels
    var alwaysVisible = state.elements.slice(0, 5);
    var potentiallyVisible = state.elements.slice(5).filter(function (element) {
      return isElementVisible(element, viewportBounds);
    });
    return [].concat(Canvas_toConsumableArray(alwaysVisible), Canvas_toConsumableArray(potentiallyVisible));
  }, [state.elements, lazyLoadingEnabled, viewportBounds, isElementVisible]);

  // Cache pour les images chargÃ©es avec mÃ©tadonnÃ©es de mÃ©moire
  var imageCache = (0,react.useRef)(new Map());

  // âœ… LAZY LOADING: Hook pour mettre Ã  jour le viewport quand le canvas change
  (0,react.useEffect)(function () {
    if (!canvasRef.current) return;
    var updateViewport = function updateViewport() {
      var canvas = canvasRef.current;
      if (!canvas) return;
      var rect = canvas.getBoundingClientRect();
      setViewportBounds({
        x: -rect.left,
        y: -rect.top,
        width: window.innerWidth,
        height: window.innerHeight
      });
    };

    // Mettre Ã  jour initialement
    updateViewport();

    // Ã‰couter les changements de scroll et resize avec passive: true
    window.addEventListener("scroll", updateViewport, {
      passive: true
    });
    window.addEventListener("resize", updateViewport, {
      passive: true
    });
    return function () {
      window.removeEventListener("scroll", updateViewport);
      window.removeEventListener("resize", updateViewport);
    };
  }, []);

  // âœ… CORRECTION 7: Tracker les URLs rendues pour dÃ©tecter changements
  var renderedLogoUrlsRef = (0,react.useRef)(new Map()); // elementId -> logoUrl

  // âœ… Flag: Track if we've done initial render check for images
  var initialImageCheckDoneRef = (0,react.useRef)(false);

  // Fonction pour estimer la taille mÃ©moire d'une image (approximation)
  var estimateImageMemorySize = (0,react.useCallback)(function (img) {
    // Estimation basÃ©e sur : largeur * hauteur * 4 octets (RGBA) + overhead
    var pixelData = img.naturalWidth * img.naturalHeight * 4;
    var overhead = 1024; // Overhead approximatif par image
    return pixelData + overhead;
  }, []);

  // Fonction pour calculer l'usage mÃ©moire total du cache
  var calculateCacheMemoryUsage = (0,react.useCallback)(function () {
    var totalSize = 0;
    var _iterator = Canvas_createForOfIteratorHelper(imageCache.current),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _step$value = Canvas_slicedToArray(_step.value, 2),
          data = _step$value[1];
        totalSize += data.size;
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return totalSize / (1024 * 1024); // Convertir en MB
  }, []);

  // Fonction pour vÃ©rifier si la limite mÃ©moire est dÃ©passÃ©e
  var isMemoryLimitExceeded = (0,react.useCallback)(function () {
    var currentUsage = calculateCacheMemoryUsage();
    var limit = memoryLimitJs;

    // VÃ©rifier aussi la mÃ©moire globale du navigateur si disponible
    if ("memory" in performance) {
      var perfMemory = performance.memory;
      var browserMemoryUsage = perfMemory.usedJSHeapSize / (1024 * 1024); // MB
      var browserLimit = perfMemory.jsHeapSizeLimit / (1024 * 1024); // MB

      // Si le navigateur approche sa limite, Ãªtre plus agressif
      if (browserMemoryUsage > browserLimit * 0.8) {
        debugWarn("[Canvas Memory] Browser memory usage high: ".concat(browserMemoryUsage.toFixed(1), "MB / ").concat(browserLimit.toFixed(1), "MB"));
        return true;
      }
    }
    return currentUsage > limit * 0.8; // DÃ©clencher le nettoyage Ã  80% de la limite
  }, [calculateCacheMemoryUsage, memoryLimitJs]);

  // âœ… CORRECTION 2: Fonction pour nettoyer le cache des images avec gestion mÃ©moire
  var cleanupImageCache = (0,react.useCallback)(function () {
    var cache = imageCache.current;
    var currentMemoryUsage = calculateCacheMemoryUsage();
    var memoryLimit = memoryLimitJs;
    debugLog("[Canvas Memory] Starting cache cleanup - Current usage: ".concat(currentMemoryUsage.toFixed(2), "MB, Limit: ").concat(memoryLimit, "MB, Items: ").concat(cache.size));

    // Nettoyer si limite dÃ©passÃ©e ou trop d'Ã©lÃ©ments
    if (isMemoryLimitExceeded() || cache.size > MAX_CACHE_ITEMS) {
      // Trier par date d'utilisation (LRU - Least Recently Used)
      var entries = Array.from(cache.entries()).sort(function (_ref8, _ref9) {
        var _ref0 = Canvas_slicedToArray(_ref8, 2),
          a = _ref0[1];
        var _ref1 = Canvas_slicedToArray(_ref9, 2),
          b = _ref1[1];
        return a.lastUsed - b.lastUsed;
      });

      // Calculer combien supprimer pour revenir sous 70% de la limite
      var targetMemoryUsage = memoryLimit * 0.7;
      var memoryToFree = Math.max(0, currentMemoryUsage - targetMemoryUsage);
      var itemsToRemove = Math.min(20, Math.ceil(cache.size * 0.2)); // Au moins 20% des Ã©lÃ©ments ou 20 Ã©lÃ©ments max

      var removed = 0;
      var memoryFreed = 0;
      var _iterator2 = Canvas_createForOfIteratorHelper(entries),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var _step2$value = Canvas_slicedToArray(_step2.value, 2),
            url = _step2$value[0],
            data = _step2$value[1];
          if (removed >= itemsToRemove && memoryFreed >= memoryToFree) break;
          cache["delete"](url);
          memoryFreed += data.size / (1024 * 1024); // MB
          removed++;
          debugLog("[Canvas Memory] Removed image from cache: ".concat(url.split("/").pop(), ", Freed: ").concat((data.size / (1024 * 1024)).toFixed(2), "MB"));
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      debugLog("[Canvas Memory] Cache cleanup completed - Removed ".concat(removed, " items, Freed ").concat(memoryFreed.toFixed(2), "MB, New usage: ").concat((currentMemoryUsage - memoryFreed).toFixed(2), "MB"));
    } else {
      debugLog("[Canvas Memory] Cache cleanup not needed - Usage within limits");
    }
  }, [calculateCacheMemoryUsage, memoryLimitJs, isMemoryLimitExceeded]);

  // Fonction pour forcer un nettoyage manuel (utile pour le dÃ©bogage)
  var forceCacheCleanup = (0,react.useCallback)(function () {
    cleanupImageCache();
  }, [cleanupImageCache]);

  // Exposer les fonctions de gestion mÃ©moire globalement pour le dÃ©bogage
  (0,react.useEffect)(function () {
    window.canvasMemoryDebug = {
      getCacheStats: function getCacheStats() {
        return {
          itemCount: imageCache.current.size,
          memoryUsage: calculateCacheMemoryUsage(),
          memoryLimit: memoryLimitJs,
          items: Array.from(imageCache.current.entries()).map(function (_ref10) {
            var _ref11 = Canvas_slicedToArray(_ref10, 2),
              url = _ref11[0],
              data = _ref11[1];
            return {
              url: url.split("/").pop(),
              size: (data.size / (1024 * 1024)).toFixed(2) + "MB",
              lastUsed: new Date(data.lastUsed).toLocaleTimeString()
            };
          })
        };
      },
      forceCleanup: forceCacheCleanup,
      getBrowserMemory: function getBrowserMemory() {
        if ("memory" in performance) {
          var perfMemory = performance.memory;
          return {
            used: (perfMemory.usedJSHeapSize / (1024 * 1024)).toFixed(1) + "MB",
            total: (perfMemory.totalJSHeapSize / (1024 * 1024)).toFixed(1) + "MB",
            limit: (perfMemory.jsHeapSizeLimit / (1024 * 1024)).toFixed(1) + "MB"
          };
        }
        return {
          error: "Performance.memory not available"
        };
      }
    };
    return function () {
      delete window.canvasMemoryDebug;
    };
  }, [calculateCacheMemoryUsage, memoryLimitJs, forceCacheCleanup]); // Surveillance pÃ©riodique de la mÃ©moire globale du navigateur
  (0,react.useEffect)(function () {
    var memoryCheckInterval = setInterval(function () {
      if ("memory" in performance) {
        var perfMemory = performance.memory;
        var browserMemoryUsage = perfMemory.usedJSHeapSize / (1024 * 1024); // MB
        var browserLimit = perfMemory.jsHeapSizeLimit / (1024 * 1024); // MB
        var cacheMemoryUsage = calculateCacheMemoryUsage();

        // Log dÃ©taillÃ© de la mÃ©moire si activÃ©
        if (canvasSettings.debugMode) {}

        // Nettoyage d'urgence si mÃ©moire critique
        if (browserMemoryUsage > browserLimit * 0.9) {
          debugWarn("[Canvas Memory] Critical memory usage! Forcing cache cleanup...");
          cleanupImageCache();
        }
      }
    }, 10000); // VÃ©rification toutes les 10 secondes

    return function () {
      return clearInterval(memoryCheckInterval);
    };
  }, [calculateCacheMemoryUsage, memoryLimitJs, cleanupImageCache, canvasSettings.debugMode]);

  // Utiliser les hooks pour les interactions
  var _useCanvasDrop = useCanvasDrop({
      canvasRef: canvasWrapperRef,
      canvasWidth: width,
      canvasHeight: height,
      elements: state.elements || [],
      dragEnabled: true
    }),
    handleDrop = _useCanvasDrop.handleDrop,
    handleDragOver = _useCanvasDrop.handleDragOver,
    handleDragLeave = _useCanvasDrop.handleDragLeave,
    handleDragEnter = _useCanvasDrop.handleDragEnter,
    isDragOver = _useCanvasDrop.isDragOver;
  var _useCanvasInteraction = useCanvasInteraction({
      canvasRef: canvasRef,
      canvasWidth: width,
      canvasHeight: height
    }),
    handleCanvasClick = _useCanvasInteraction.handleCanvasClick,
    handleMouseDown = _useCanvasInteraction.handleMouseDown,
    handleMouseMove = _useCanvasInteraction.handleMouseMove,
    handleMouseUp = _useCanvasInteraction.handleMouseUp,
    handleContextMenu = _useCanvasInteraction.handleContextMenu,
    selectionState = _useCanvasInteraction.selectionState;

  // Hook pour les raccourcis clavier
  var keyboardShortcutInfo = useKeyboardShortcuts();

  // Fonctions de rendu WooCommerce avec donnÃ©es fictives ou rÃ©elles selon le mode

  // Fonction helper pour dessiner un placeholder de logo
  var drawLogoPlaceholder = (0,react.useCallback)(function (ctx, element, alignment, text) {
    var logoWidth = Math.min(element.width - 20, 120);
    var logoHeight = Math.min(element.height - 20, 60);
    var x = 10;
    if (alignment === "center") {
      x = (element.width - logoWidth) / 2;
    } else if (alignment === "right") {
      x = element.width - logoWidth - 10;
    }
    var y = (element.height - logoHeight) / 2;

    // Rectangle du logo
    ctx.fillStyle = "#f0f0f0";
    ctx.strokeStyle = "#ccc";
    ctx.lineWidth = 1;
    ctx.fillRect(x, y, logoWidth, logoHeight);
    ctx.strokeRect(x, y, logoWidth, logoHeight);

    // Texte du placeholder
    ctx.fillStyle = "#666";
    ctx.font = "12px Arial";
    ctx.textAlign = "center";
    ctx.fillText(text, x + logoWidth / 2, y + logoHeight / 2 + 4);
  }, []);
  var drawCompanyLogo = (0,react.useCallback)(function (ctx, element) {
    var props = element;
    var logoUrl = props.src || props.logoUrl || "";

    // âœ… FIX: If no logo URL, show a better placeholder
    if (!logoUrl) {
      drawLogoPlaceholder(ctx, element, "center", "Configurez le logo entreprise");
      return;
    }

    // const fit = props.fit || 'contain';
    var alignment = props.alignment || "left";

    // âœ… CORRECTION 7: DÃ©tecter si l'URL a changÃ©
    var lastRenderedUrl = renderedLogoUrlsRef.current.get(element.id);
    if (logoUrl !== lastRenderedUrl) {
      renderedLogoUrlsRef.current.set(element.id, logoUrl);
    }

    // Fond transparent
    ctx.fillStyle = "transparent";
    ctx.fillRect(0, 0, element.width, element.height);
    if (logoUrl) {
      // VÃ©rifier si l'image est en cache
      var cachedImage = imageCache.current.get(logoUrl);
      if (!cachedImage) {
        var _img2 = document.createElement("img");
        _img2.crossOrigin = "anonymous";
        _img2.src = logoUrl;

        // GÃ©rer les erreurs de chargement
        _img2.onerror = function () {
          debug_debugError("âŒ [LOGO] Image failed to load:", logoUrl);
        };

        // âœ… CRITICAL: Quand l'image se charge, redessiner le canvas
        _img2.onload = function () {
          var size = estimateImageMemorySize(_img2);
          imageCache.current.set(logoUrl, {
            image: _img2,
            size: size,
            lastUsed: Date.now()
          });
          // DÃ©clencher un nettoyage aprÃ¨s ajout
          cleanupImageCache();
          // IncrÃ©menter le counter pour forcer un redraw
          setImageLoadCount(function (prev) {
            return prev + 1;
          });
        };

        // Retourner temporairement pour Ã©viter les erreurs
        return;
      }
      var img = cachedImage.image;
      // Mettre Ã  jour la date d'utilisation
      cachedImage.lastUsed = Date.now();

      // âœ… APPROCHE PLUS DIRECTE: VÃ©rifier img.complete au rendu au lieu de compter sur onload
      // Rendre l'image si elle a une URL valide, mÃªme si elle n'est pas encore complÃ¨tement chargÃ©e
      var shouldRenderImage = logoUrl && logoUrl.trim() !== "";

      // DEBUG: Log detailed breakdown of shouldRenderImage condition

      // DEBUG: Log image state with more details

      if (shouldRenderImage) {
        try {
          // Appliquer la rotation si dÃ©finie
          var rotation = element.rotation || 0;
          var opacity = element.opacity !== undefined ? element.opacity : 1;
          var borderRadius = element.borderRadius || 0;
          var objectFit = element.objectFit || "contain";

          // Calculer les dimensions et position selon objectFit
          var containerWidth = element.width - 20;
          var containerHeight = element.height - 20;

          // Si l'image n'est pas encore chargÃ©e, utiliser des dimensions par dÃ©faut ou essayer de deviner
          var imageAspectRatio;
          if (img.naturalWidth > 0 && img.naturalHeight > 0) {
            imageAspectRatio = img.naturalWidth / img.naturalHeight;
          } else {
            // Estimation par dÃ©faut pour les logos d'entreprise (gÃ©nÃ©ralement rectangulaires)
            imageAspectRatio = 2; // 2:1 ratio par dÃ©faut
          }
          var containerAspectRatio = containerWidth / containerHeight;
          var logoWidth;
          var logoHeight;
          var offsetX = 0;
          var offsetY = 0;
          switch (objectFit) {
            case "contain":
              // Respecte les proportions, image tient entiÃ¨rement dans le conteneur
              if (containerAspectRatio > imageAspectRatio) {
                logoHeight = containerHeight;
                logoWidth = logoHeight * imageAspectRatio;
              } else {
                logoWidth = containerWidth;
                logoHeight = logoWidth / imageAspectRatio;
              }
              break;
            case "cover":
              // Respecte les proportions, image couvre entiÃ¨rement le conteneur
              if (containerAspectRatio > imageAspectRatio) {
                logoWidth = containerWidth;
                logoHeight = logoWidth / imageAspectRatio;
                offsetY = (containerHeight - logoHeight) / 2;
              } else {
                logoHeight = containerHeight;
                logoWidth = logoHeight * imageAspectRatio;
                offsetX = (containerWidth - logoWidth) / 2;
              }
              break;
            case "fill":
              // Ã‰tire l'image pour remplir exactement le conteneur
              logoWidth = containerWidth;
              logoHeight = containerHeight;
              break;
            case "none":
              // Taille originale, centrÃ©e
              if (img.naturalWidth > 0 && img.naturalHeight > 0) {
                logoWidth = img.naturalWidth;
                logoHeight = img.naturalHeight;
              } else {
                // Taille par dÃ©faut si pas encore chargÃ©e
                logoWidth = Math.min(containerWidth, 120);
                logoHeight = Math.min(containerHeight, 60);
              }
              break;
            case "scale-down":
              {
                // Taille originale ou contain, selon ce qui est plus petit
                var originalWidth = img.naturalWidth || 120; // DÃ©faut si pas chargÃ©
                var originalHeight = img.naturalHeight || 60; // DÃ©faut si pas chargÃ©

                if (originalWidth <= containerWidth && originalHeight <= containerHeight) {
                  // Taille originale tient, l'utiliser
                  logoWidth = originalWidth;
                  logoHeight = originalHeight;
                } else {
                  // Utiliser contain
                  if (containerAspectRatio > imageAspectRatio) {
                    logoHeight = containerHeight;
                    logoWidth = logoHeight * imageAspectRatio;
                  } else {
                    logoWidth = containerWidth;
                    logoHeight = logoWidth / imageAspectRatio;
                  }
                }
                break;
              }
            default:
              // Par dÃ©faut contain
              if (containerAspectRatio > imageAspectRatio) {
                logoHeight = containerHeight;
                logoWidth = logoHeight * imageAspectRatio;
              } else {
                logoWidth = containerWidth;
                logoHeight = logoWidth / imageAspectRatio;
              }
          }

          // Calculer la position de base selon l'alignement
          var x = 10;
          if (alignment === "center") {
            x = (element.width - containerWidth) / 2;
          } else if (alignment === "right") {
            x = element.width - containerWidth - 10;
          }
          var y = (element.height - containerHeight) / 2;

          // Ajuster pour centrer l'image dans son conteneur selon objectFit
          var imageX = x + (containerWidth - logoWidth) / 2 + offsetX;
          var imageY = y + (containerHeight - logoHeight) / 2 + offsetY;

          // Sauvegarder le contexte
          ctx.save();

          // Appliquer l'opacitÃ©
          if (opacity < 1) {
            ctx.globalAlpha = opacity;
          }

          // Appliquer la rotation
          if (rotation !== 0) {
            var centerX = x + logoWidth / 2;
            var centerY = y + logoHeight / 2;
            ctx.translate(centerX, centerY);
            ctx.rotate(rotation * Math.PI / 180);
            ctx.translate(-centerX, -centerY);
          }

          // Si borderRadius > 0, crÃ©er un chemin arrondi
          if (borderRadius > 0) {
            ctx.beginPath();
            roundedRect(ctx, x, y, logoWidth, logoHeight, borderRadius);
            ctx.clip();
          }

          // Essayer de dessiner l'image - si elle n'est pas chargÃ©e, cela ne fera rien
          // mais au moins on aura essayÃ©
          ctx.drawImage(img, imageX, imageY, logoWidth, logoHeight);

          // Restaurer le contexte
          ctx.restore();
        } catch (error) {
          debug_debugError("\u274C [LOGO] Error rendering image ".concat(logoUrl, ":"), error);
          // En cas d'erreur, dessiner un placeholder
          drawLogoPlaceholder(ctx, element, alignment, "Erreur de chargement");
        }
      } else {
        // Pas d'URL valide, dessiner un placeholder
        drawLogoPlaceholder(ctx, element, alignment, "URL manquante");
      }
    } else {
      // Pas d'URL, dessiner un placeholder
      drawLogoPlaceholder(ctx, element, alignment, "Company_logo");
    }
  }, [drawLogoPlaceholder, cleanupImageCache, estimateImageMemorySize]); // âœ… BUGFIX-008: REMOVED setImageLoadCounter

  // âœ… BUGFIX-007: Memoize drawDynamicText to prevent recreation on every render
  var drawDynamicText = (0,react.useCallback)(function (ctx, element) {
    var props = element;
    var text = props.text || "Texte personnalisable";
    var fontSize = props.fontSize || 14;
    var fontFamily = props.fontFamily || "Arial";
    var fontWeight = props.fontWeight || "normal";
    var fontStyle = props.fontStyle || "normal";
    var autoWrap = props.autoWrap !== false; // Par dÃ©faut activÃ©

    // Appliquer le fond seulement si showBackground est activÃ©
    if (props.showBackground !== false) {
      ctx.fillStyle = props.backgroundColor || "#e5e7eb";
      ctx.fillRect(0, 0, element.width, element.height);
    }
    ctx.fillStyle = "#000000";
    ctx.font = "".concat(fontStyle, " ").concat(fontWeight, " ").concat(fontSize, "px ").concat(fontFamily);
    ctx.textAlign = "left";

    // Remplacer les variables gÃ©nÃ©riques par des valeurs par dÃ©faut
    var processedText = text.replace(/\[date\]/g, new Date().toLocaleDateString("fr-FR")).replace(/\[nom\]/g, "Dupont").replace(/\[prenom\]/g, "Marie").replace(/\[entreprise\]/g, "Ma SociÃ©tÃ©").replace(/\[telephone\]/g, "+33 1 23 45 67 89").replace(/\[email\]/g, "contact@masociete.com").replace(/\[site\]/g, "www.masociete.com").replace(/\[ville\]/g, "Paris").replace(/\[siret\]/g, "123 456 789 00012").replace(/\[tva\]/g, "FR 12 345 678 901").replace(/\[capital\]/g, "10 000").replace(/\[rcs\]/g, "Paris B 123 456 789");
    if (autoWrap) {
      // Fonction pour diviser le texte en lignes selon la largeur disponible
      var wrapText = function wrapText(text, maxWidth) {
        var words = text.split(" ");
        var lines = [];
        var currentLine = "";
        var _iterator3 = Canvas_createForOfIteratorHelper(words),
          _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var word = _step3.value;
            var testLine = currentLine + (currentLine ? " " : "") + word;
            var metrics = ctx.measureText(testLine);
            if (metrics.width > maxWidth && currentLine) {
              lines.push(currentLine);
              currentLine = word;
            } else {
              currentLine = testLine;
            }
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
        if (currentLine) {
          lines.push(currentLine);
        }
        return lines;
      };

      // GÃ©rer les sauts de ligne existants (\n)
      var paragraphs = processedText.split("\n");
      var y = 25;
      paragraphs.forEach(function (paragraph) {
        if (paragraph.trim()) {
          var lines = wrapText(paragraph, element.width - 20); // Marge de 10px de chaque cÃ´tÃ©
          lines.forEach(function (line) {
            ctx.fillText(line, 10, y);
            y += fontSize + 4; // Espacement entre lignes
          });
        } else {
          y += fontSize + 4; // Ligne vide
        }
      });
    } else {
      // Comportement original : gÃ©rer uniquement les \n existants
      var lines = processedText.split("\n");
      var _y = 25;
      lines.forEach(function (line) {
        ctx.fillText(line, 10, _y);
        _y += fontSize + 4;
      });
    }
  }, []); // No deps - pure function

  // âœ… BUGFIX-007: Memoize drawMentions to prevent recreation on every render
  var drawMentions = (0,react.useCallback)(function (ctx, element) {
    var props = element;
    var fontSizeRaw = props.fontSize || 10;

    // âœ… BUGFIX-021: Robust font size parsing for various formats
    var fontSize;
    if (typeof fontSizeRaw === "number") {
      fontSize = fontSizeRaw;
    } else if (typeof fontSizeRaw === "string") {
      // Try removing 'px', 'em', 'rem', 'pt' suffixes
      var numStr = fontSizeRaw.replace(/px|em|rem|pt|%/g, "").trim();
      fontSize = parseFloat(numStr) || 10;
      // If it's 'em' or 'rem', convert to approximate px (1em â‰ˆ 16px)
      if (fontSizeRaw.includes("em") || fontSizeRaw.includes("rem")) {
        fontSize = fontSize * 16;
      }
    } else {
      fontSize = 10;
    }

    // Ensure fontSize is reasonable
    fontSize = Math.max(6, Math.min(72, fontSize));
    var fontFamily = props.fontFamily || "Arial";
    var fontWeight = props.fontWeight || "normal";
    var fontStyle = props.fontStyle || "normal";
    var textAlign = props.textAlign || "left";
    var text = props.text || "SARL au capital de 10 000â‚¬ - RCS Lyon 123 456 789\nTVA FR 12 345 678 901 - SIRET 123 456 789 00012\ncontact@maboutique.com - +33 4 12 34 56 78";
    var showSeparator = props.showSeparator !== false;
    var separatorStyle = props.separatorStyle || "solid";
    var theme = props.theme || "legal";

    // DÃ©finition des thÃ¨mes pour les mentions
    var themes = {
      legal: {
        backgroundColor: "#ffffff",
        borderColor: "#6b7280",
        textColor: "#374151",
        headerTextColor: "#111827"
      },
      subtle: {
        backgroundColor: "#f9fafb",
        borderColor: "#e5e7eb",
        textColor: "#6b7280",
        headerTextColor: "#374151"
      },
      minimal: {
        backgroundColor: "#ffffff",
        borderColor: "#f3f4f6",
        textColor: "#9ca3af",
        headerTextColor: "#6b7280"
      }
    };
    var currentTheme = themes[theme] || themes.legal;

    // Utiliser les couleurs personnalisÃ©es si dÃ©finies, sinon utiliser le thÃ¨me
    var bgColor = normalizeColor(props.backgroundColor || currentTheme.backgroundColor);
    var txtColor = normalizeColor(props.textColor || currentTheme.textColor);

    // Appliquer le fond seulement si showBackground est activÃ©
    if (props.showBackground !== false) {
      ctx.fillStyle = bgColor;
      ctx.fillRect(0, 0, element.width, element.height);
    }
    ctx.fillStyle = txtColor;
    var y = 15;

    // Dessiner le sÃ©parateur si activÃ©
    if (showSeparator) {
      ctx.strokeStyle = txtColor;
      ctx.lineWidth = 1;
      if (separatorStyle === "double") {
        ctx.beginPath();
        ctx.moveTo(10, y - 5);
        ctx.lineTo(element.width - 10, y - 5);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(10, y - 2);
        ctx.lineTo(element.width - 10, y - 2);
        ctx.stroke();
      } else {
        ctx.setLineDash(separatorStyle === "dashed" ? [5, 5] : separatorStyle === "dotted" ? [2, 2] : []);
        ctx.beginPath();
        ctx.moveTo(10, y - 5);
        ctx.lineTo(element.width - 10, y - 5);
        ctx.stroke();
        ctx.setLineDash([]); // Reset line dash
      }
      y += 10; // Espace aprÃ¨s le sÃ©parateur
    }
    ctx.font = "".concat(fontStyle, " ").concat(fontWeight, " ").concat(fontSize, "px ").concat(fontFamily);
    ctx.textAlign = textAlign;

    // Fonction de wrapping du texte
    var wrapText = function wrapText(text, maxWidth) {
      if (!text) return [""];

      // Traiter chaque paragraphe sÃ©parÃ©ment (sÃ©parÃ© par \n)
      var paragraphs = text.split("\n");
      var wrappedParagraphs = [];
      var _iterator4 = Canvas_createForOfIteratorHelper(paragraphs),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var paragraph = _step4.value;
          if (paragraph.trim() === "") {
            // Ligne vide (sÃ©parateur), on la garde telle quelle
            wrappedParagraphs.push("");
            continue;
          }

          // Wrapper le paragraphe comme avant
          var words = paragraph.split(" ");
          var lines = [];
          var currentLine = "";
          var _iterator5 = Canvas_createForOfIteratorHelper(words),
            _step5;
          try {
            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
              var word = _step5.value;
              var testLine = currentLine ? currentLine + " " + word : word;
              var metrics = ctx.measureText(testLine);
              if (metrics.width > maxWidth && currentLine) {
                // Le mot ne rentre pas, on passe Ã  la ligne
                lines.push(currentLine);
                currentLine = word;
              } else {
                currentLine = testLine;
              }
            }
          } catch (err) {
            _iterator5.e(err);
          } finally {
            _iterator5.f();
          }
          if (currentLine) {
            lines.push(currentLine);
          }
          wrappedParagraphs.push.apply(wrappedParagraphs, lines);
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      return wrappedParagraphs;
    };

    // Wrapper le texte selon la largeur disponible
    var maxWidth = element.width - 20; // Marge de 20px
    var wrappedLines = wrapText(text, maxWidth);

    // Calculer le nombre maximum de lignes qui peuvent tenir
    var lineHeight = fontSize + 2;
    var maxLines = Math.floor((element.height - (showSeparator ? 25 : 15)) / lineHeight);

    // Rendre seulement les lignes qui tiennent
    wrappedLines.slice(0, maxLines).forEach(function (line, index) {
      var x = textAlign === "center" ? element.width / 2 : textAlign === "right" ? element.width - 10 : 10;
      var lineY = (showSeparator ? 25 : 15) + index * lineHeight;
      ctx.fillText(line, x, lineY);
    });
  }, []); // No deps - pure function

  // âœ… BUGFIX-001/004: Memoize drawElement but pass state as parameter to avoid dependency cycle
  var drawElement = (0,react.useCallback)(function (ctx, element, currentState) {
    // VÃ©rifier si l'Ã©lÃ©ment est visible
    if (element.visible === false) {
      debugLog("[Canvas] Skipping invisible element: ".concat(element.type, " (").concat(element.id, ")"));
      return;
    }
    debugLog("[Canvas] Drawing element: ".concat(element.type, " (").concat(element.id, ") - Position: (").concat(element.x, ", ").concat(element.y, "), Size: ").concat(element.width, "x").concat(element.height, ", Rotation: ").concat(element.rotation || 0, "\xB0"));
    ctx.save();

    // Appliquer transformation de l'Ã©lÃ©ment
    if (element.rotation) {
      // Rotation autour du centre de l'Ã©lÃ©ment
      var centerX = element.width / 2;
      var centerY = element.height / 2;
      ctx.translate(element.x + centerX, element.y + centerY);
      ctx.rotate(element.rotation * Math.PI / 180);
      ctx.translate(-centerX, -centerY);
    } else {
      // Pas de rotation, translation normale
      ctx.translate(element.x, element.y);
    }

    // Dessiner selon le type d'Ã©lÃ©ment
    switch (element.type) {
      case "rectangle":
        debugLog("[Canvas] Rendering rectangle element: ".concat(element.id));
        drawRectangle(ctx, element);
        break;
      case "circle":
        debugLog("[Canvas] Rendering circle element: ".concat(element.id));
        drawCircle(ctx, element);
        break;
      case "text":
        debugLog("[Canvas] Rendering text element: ".concat(element.id));
        drawText(ctx, element);
        break;
      case "line":
        debugLog("[Canvas] Rendering line element: ".concat(element.id));
        drawLine(ctx, element);
        break;
      case "product_table":
        debugLog("[Canvas] Rendering product table element: ".concat(element.id));
        drawProductTable(ctx, element, currentState);
        break;
      case "customer_info":
        debugLog("[Canvas] Rendering customer info element: ".concat(element.id));
        drawCustomerInfo(ctx, element, currentState);
        break;
      case "company_info":
        debugLog("[Canvas] Rendering company info element: ".concat(element.id));
        drawCompanyInfo(ctx, element, canvasSettings);
        break;
      case "company_logo":
        debugLog("[Canvas] Rendering company logo element: ".concat(element.id));
        drawCompanyLogo(ctx, element);
        break;
      case "order-number":
      case "order_number":
        debugLog("[Canvas] Rendering order number element: ".concat(element.id));
        drawOrderNumber(ctx, element, currentState);
        break;
      case "woocommerce_order_date":
        debugLog("[Canvas] Rendering woocommerce order date element: ".concat(element.id));
        drawWoocommerceOrderDate(ctx, element, currentState);
        break;
      case "woocommerce_invoice_number":
        debugLog("[Canvas] Rendering woocommerce invoice number element: ".concat(element.id));
        drawWoocommerceInvoiceNumber(ctx, element);
        break;
      case "document_type":
        debugLog("[Canvas] Rendering document type element: ".concat(element.id));
        drawDocumentType(ctx, element, currentState);
        break;
      case "dynamic-text":
        debugLog("[Canvas] Rendering dynamic text element: ".concat(element.id));
        drawDynamicText(ctx, element);
        break;
      case "mentions":
        debugLog("[Canvas] Rendering mentions element: ".concat(element.id));
        drawMentions(ctx, element);
        break;
      case "image":
        debugLog("[Canvas] Rendering image element: ".concat(element.id));
        drawImage(ctx, element, imageCache);
        break;
      default:
        debugWarn("[Canvas] Unknown element type: ".concat(element.type, " for element ").concat(element.id));
        // Ã‰lÃ©ment gÃ©nÃ©rique - dessiner un rectangle simple
        ctx.strokeStyle = "#000000";
        ctx.lineWidth = 1;
        ctx.strokeRect(0, 0, element.width, element.height);
    }
    ctx.restore();
  }, [drawCompanyLogo, drawDynamicText, drawMentions, canvasSettings]); // âœ… BUGFIX-007: Include memoized draw functions

  // Fonction pour dessiner la sÃ©lection
  var drawSelection = (0,react.useCallback)(function (ctx, selectedIds, elements) {
    var selectedElements = elements.filter(function (el) {
      return selectedIds.includes(el.id);
    });
    if (selectedElements.length === 0) {
      debugLog("[Canvas] Selection cleared - no elements selected");
      return;
    }
    debugLog("[Canvas] Drawing selection for ".concat(selectedElements.length, " element(s):"), selectedIds);

    // Calculer les bounds de sÃ©lection
    var minX = Infinity,
      minY = Infinity,
      maxX = -Infinity,
      maxY = -Infinity;
    selectedElements.forEach(function (el) {
      minX = Math.min(minX, el.x);
      minY = Math.min(minY, el.y);
      maxX = Math.max(maxX, el.x + el.width);
      maxY = Math.max(maxY, el.y + el.height);
    });

    // Rectangle de sÃ©lection
    ctx.strokeStyle = "#007acc";
    ctx.lineWidth = 1;
    ctx.setLineDash([5, 5]);
    ctx.strokeRect(minX - 2, minY - 2, maxX - minX + 4, maxY - minY + 4);

    // PoignÃ©es de redimensionnement (conditionnÃ©es par les settings)
    if (canvasSettings !== null && canvasSettings !== void 0 && canvasSettings.selectionShowHandles) {
      var handleSize = 6;
      ctx.fillStyle = "#007acc";
      ctx.setLineDash([]);

      // Coins
      ctx.fillRect(minX - handleSize / 2, minY - handleSize / 2, handleSize, handleSize);
      ctx.fillRect(maxX - handleSize / 2, minY - handleSize / 2, handleSize, handleSize);
      ctx.fillRect(minX - handleSize / 2, maxY - handleSize / 2, handleSize, handleSize);
      ctx.fillRect(maxX - handleSize / 2, maxY - handleSize / 2, handleSize, handleSize);

      // Centres des cÃ´tÃ©s
      var midX = (minX + maxX) / 2;
      var midY = (minY + maxY) / 2;
      ctx.fillRect(midX - handleSize / 2, minY - handleSize / 2, handleSize, handleSize);
      ctx.fillRect(midX - handleSize / 2, maxY - handleSize / 2, handleSize, handleSize);
      ctx.fillRect(minX - handleSize / 2, midY - handleSize / 2, handleSize, handleSize);
      ctx.fillRect(maxX - handleSize / 2, midY - handleSize / 2, handleSize, handleSize);
    }

    // PoignÃ©es de rotation (conditionnÃ©es par les settings)
    console.log('[CANVAS] Checking rotation settings:', {
      selectionRotationEnabled: canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.selectionRotationEnabled,
      canvasSettings: !!canvasSettings
    });
    if ((canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.selectionRotationEnabled) !== false) {
      console.log('[CANVAS] Drawing rotation handles because selectionRotationEnabled is:', canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.selectionRotationEnabled);
      console.warn('âš ï¸ CANVAS: ROTATION HANDLES BEING DRAWN - GREEN LINE WILL APPEAR');
      console.log('[DEBUG CANVAS] canvasSettings object:', canvasSettings);
      var rotationHandleSize = 8;
      var rotationHandleDistance = 20;

      // VÃ©rifier si au moins un Ã©lÃ©ment a une rotation proche de 0Â°
      // Utiliser la mÃªme logique de normalisation que dans useCanvasInteraction.ts
      var hasZeroRotation = selectedElements.some(function (el) {
        var rotation = el.rotation || 0;
        // Normaliser l'angle entre -180Â° et 180Â° (mÃªme logique que le snap)
        var normalizedRotation = rotation % 360;
        if (normalizedRotation > 180) normalizedRotation -= 360;
        if (normalizedRotation < -180) normalizedRotation += 360;
        // Utiliser la tolÃ©rance pour 0Â° (10Â°) pour cohÃ©rence avec le snap ultra simple
        return Math.abs(normalizedRotation - 0) <= 10;
      });

      // Couleur diffÃ©rente pour indiquer le snap Ã  0Â°
      var handleColor = hasZeroRotation ? "#00cc44" : "#007acc";
      ctx.fillStyle = handleColor;
      ctx.strokeStyle = handleColor;
      ctx.lineWidth = 2;
      ctx.setLineDash([]);

      // Centre de la sÃ©lection
      var centerX = (minX + maxX) / 2;
      var centerY = (minY + maxY) / 2;

      // Position de la poignÃ©e de rotation (au-dessus du centre)
      var rotationHandleX = centerX;
      var rotationHandleY = minY - rotationHandleDistance;

      // Cercle pour la poignÃ©e de rotation
      ctx.beginPath();
      ctx.arc(rotationHandleX, rotationHandleY, rotationHandleSize / 2, 0, 2 * Math.PI);
      ctx.fill();

      // Ligne reliant la poignÃ©e au centre
      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.lineTo(rotationHandleX, rotationHandleY);
      ctx.stroke();
    } else {
      console.log('[CANVAS] NOT drawing rotation handles because selectionRotationEnabled is:', canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.selectionRotationEnabled);
    }

    // Afficher les dimensions pour chaque Ã©lÃ©ment sÃ©lectionnÃ©
    selectedElements.forEach(function (el) {
      if (selectedIds.includes(el.id)) {
        // CoordonnÃ©es
        var x = el.x;
        var y = el.y;
        var _width = el.width;
        var _height = el.height;

        // Afficher les dimensions en pixels sur le coin supÃ©rieur droit
        ctx.font = "11px Arial";
        ctx.fillStyle = "#007acc";
        ctx.textAlign = "right";
        ctx.textBaseline = "top";
        var dimensionText = "".concat((_width * 1).toFixed(1), "\xD7").concat((_height * 1).toFixed(1), "px");
        var padding = 4;
        var textWidth = ctx.measureText(dimensionText).width;

        // Fond blanc pour meilleure lisibilitÃ©
        ctx.fillStyle = "white";
        ctx.fillRect(x + _width - textWidth - padding * 2, y - 20, textWidth + padding * 2, 18);

        // Texte
        ctx.fillStyle = "#007acc";
        ctx.font = "bold 11px Arial";
        ctx.fillText(dimensionText, x + _width - padding, y - 16);
      }
    });
  }, [canvasSettings]);

  // Fonctions pour gÃ©rer le menu contextuel
  var showContextMenu = (0,react.useCallback)(function (x, y, elementId) {
    setContextMenu({
      isVisible: true,
      position: {
        x: x,
        y: y
      },
      elementId: elementId
    });
  }, []);
  var hideContextMenu = (0,react.useCallback)(function () {
    setContextMenu(function (prev) {
      return Canvas_objectSpread(Canvas_objectSpread({}, prev), {}, {
        isVisible: false
      });
    });
  }, []);
  var handleContextMenuAction = (0,react.useCallback)(function (action, elementId) {
    debugLog("[Canvas] Context menu action: ".concat(action, " on element ").concat(elementId || "none"));
    if (!elementId) return;
    switch (action) {
      case "bring-to-front":
        {
          debugLog("[Canvas] Bringing element ".concat(elementId, " to front"));
          // DÃ©placer l'Ã©lÃ©ment Ã  la fin du tableau (devant tous les autres)
          var elementIndex = state.elements.findIndex(function (el) {
            return el.id === elementId;
          });
          if (elementIndex !== -1) {
            var element = state.elements[elementIndex];
            var newElements = [].concat(Canvas_toConsumableArray(state.elements.slice(0, elementIndex)), Canvas_toConsumableArray(state.elements.slice(elementIndex + 1)), [element]);
            dispatch({
              type: "SET_ELEMENTS",
              payload: newElements
            });
          }
          break;
        }
      case "send-to-back":
        {
          debugLog("[Canvas] Sending element ".concat(elementId, " to back"));
          // DÃ©placer l'Ã©lÃ©ment au dÃ©but du tableau (derriÃ¨re tous les autres)
          var _elementIndex = state.elements.findIndex(function (el) {
            return el.id === elementId;
          });
          if (_elementIndex !== -1) {
            var _element = state.elements[_elementIndex];
            var _newElements = [_element].concat(Canvas_toConsumableArray(state.elements.slice(0, _elementIndex)), Canvas_toConsumableArray(state.elements.slice(_elementIndex + 1)));
            dispatch({
              type: "SET_ELEMENTS",
              payload: _newElements
            });
          }
          break;
        }
      case "bring-forward":
        {
          debugLog("[Canvas] Bringing element ".concat(elementId, " forward"));
          // DÃ©placer l'Ã©lÃ©ment d'une position vers l'avant
          var _elementIndex2 = state.elements.findIndex(function (el) {
            return el.id === elementId;
          });
          if (_elementIndex2 !== -1 && _elementIndex2 < state.elements.length - 1) {
            var _newElements2 = Canvas_toConsumableArray(state.elements);
            var _ref12 = [_newElements2[_elementIndex2 + 1], _newElements2[_elementIndex2]];
            _newElements2[_elementIndex2] = _ref12[0];
            _newElements2[_elementIndex2 + 1] = _ref12[1];
            dispatch({
              type: "SET_ELEMENTS",
              payload: _newElements2
            });
          }
          break;
        }
      case "send-backward":
        {
          debugLog("[Canvas] Sending element ".concat(elementId, " backward"));
          // DÃ©placer l'Ã©lÃ©ment d'une position vers l'arriÃ¨re
          var _elementIndex3 = state.elements.findIndex(function (el) {
            return el.id === elementId;
          });
          if (_elementIndex3 > 0) {
            var _newElements3 = Canvas_toConsumableArray(state.elements);
            var _ref13 = [_newElements3[_elementIndex3 - 1], _newElements3[_elementIndex3]];
            _newElements3[_elementIndex3] = _ref13[0];
            _newElements3[_elementIndex3 - 1] = _ref13[1];
            dispatch({
              type: "SET_ELEMENTS",
              payload: _newElements3
            });
          }
          break;
        }
      case "duplicate":
        {
          debugLog("[Canvas] Duplicating element ".concat(elementId));
          // Dupliquer l'Ã©lÃ©ment avec un nouvel ID et un lÃ©ger dÃ©calage
          var _element2 = state.elements.find(function (el) {
            return el.id === elementId;
          });
          if (_element2) {
            var duplicatedElement = Canvas_objectSpread(Canvas_objectSpread({}, _element2), {}, {
              id: "element_".concat(Date.now(), "_").concat(Math.random().toString(36).substr(2, 9)),
              x: _element2.x + 10,
              y: _element2.y + 10,
              createdAt: new Date(),
              updatedAt: new Date()
            });
            dispatch({
              type: "ADD_ELEMENT",
              payload: duplicatedElement
            });
          }
          break;
        }
      case "copy":
        {
          debugLog("[Canvas] Copying element ".concat(elementId));
          // Copier l'Ã©lÃ©ment dans le presse-papiers interne
          var _element3 = state.elements.find(function (el) {
            return el.id === elementId;
          });
          if (_element3) {
            // TODO: ImplÃ©menter le presse-papiers interne
          }
          break;
        }
      case "cut":
        {
          debugLog("[Canvas] Cutting element ".concat(elementId));
          // Couper l'Ã©lÃ©ment (copier puis supprimer)
          var _element4 = state.elements.find(function (el) {
            return el.id === elementId;
          });
          if (_element4) {
            // TODO: ImplÃ©menter le presse-papiers interne
            // dispatch({ type: 'REMOVE_ELEMENT', payload: elementId });
          }
          break;
        }
      case "reset-size":
        {
          debugLog("[Canvas] Resetting size for element ".concat(elementId));
          // RÃ©initialiser la taille de l'Ã©lÃ©ment Ã  ses dimensions par dÃ©faut
          var _element5 = state.elements.find(function (el) {
            return el.id === elementId;
          });
          if (_element5) {
            var defaultSizes = {
              rectangle: {
                width: 100,
                height: 100
              },
              circle: {
                width: 100,
                height: 100
              },
              text: {
                width: 100,
                height: 30
              },
              line: {
                width: 100,
                height: 2
              },
              product_table: {
                width: 400,
                height: 200
              },
              customer_info: {
                width: 300,
                height: 80
              },
              company_info: {
                width: 300,
                height: 120
              },
              company_logo: {
                width: 150,
                height: 80
              },
              "order-number": {
                width: 200,
                height: 40
              },
              document_type: {
                width: 150,
                height: 30
              },
              "dynamic-text": {
                width: 200,
                height: 60
              },
              mentions: {
                width: 400,
                height: 80
              }
            };
            var defaultSize = defaultSizes[_element5.type] || {
              width: 100,
              height: 100
            };
            dispatch({
              type: "UPDATE_ELEMENT",
              payload: {
                id: elementId,
                updates: {
                  width: defaultSize.width,
                  height: defaultSize.height
                }
              }
            });
          }
          break;
        }
      case "fit-to-content":
        {
          debugLog("[Canvas] Fitting element ".concat(elementId, " to content"));
          // Ajuster la taille de l'Ã©lÃ©ment Ã  son contenu (pour le texte principalement)
          var _element6 = state.elements.find(function (el) {
            return el.id === elementId;
          });
          if (_element6 && (_element6.type === "text" || _element6.type === "dynamic-text")) {
            // Pour les Ã©lÃ©ments texte, ajuster la hauteur selon le contenu
            var canvas = document.createElement("canvas");
            var ctx = canvas.getContext("2d");
            if (ctx) {
              var props = _element6;
              var fontSize = props.fontSize || 14;
              var fontFamily = props.fontFamily || "Arial";
              var fontWeight = props.fontWeight || "normal";
              var fontStyle = props.fontStyle || "normal";
              ctx.font = "".concat(fontStyle, " ").concat(fontWeight, " ").concat(fontSize, "px ").concat(fontFamily);
              var text = props.text || "Texte";
              var lines = text.split("\n");
              var lineHeight = fontSize + 4;
              var contentHeight = lines.length * lineHeight + 20; // Marges

              dispatch({
                type: "UPDATE_ELEMENT",
                payload: {
                  id: elementId,
                  updates: {
                    height: Math.max(contentHeight, 30)
                  }
                }
              });
            }
          }
          break;
        }
      case "delete":
        debugLog("[Canvas] Deleting element ".concat(elementId));
        dispatch({
          type: "REMOVE_ELEMENT",
          payload: elementId
        });
        break;
      case "lock":
        {
          debugLog("[Canvas] Toggling lock for element ".concat(elementId));
          // Basculer l'Ã©tat verrouillÃ© de l'Ã©lÃ©ment
          var _element7 = state.elements.find(function (el) {
            return el.id === elementId;
          });
          if (_element7) {
            dispatch({
              type: "UPDATE_ELEMENT",
              payload: {
                id: elementId,
                updates: {
                  locked: !_element7.locked
                }
              }
            });
          }
          break;
        }
    }
  }, [state.elements, dispatch]);
  var getContextMenuItems = (0,react.useCallback)(function (elementId) {
    if (!elementId) {
      // Menu contextuel pour le canvas vide
      return [{
        id: "section-edit",
        section: "Ã‰DITION"
      }, {
        id: "paste",
        label: "Coller",
        icon: "ðŸ“‹",
        shortcut: "Ctrl+V",
        action: function action() {
          // TODO: ImplÃ©menter le collage depuis le presse-papiers
        },
        disabled: true // DÃ©sactiver jusqu'Ã  implÃ©mentation
      }, {
        id: "select-all",
        label: "Tout sÃ©lectionner",
        icon: "â˜‘ï¸",
        shortcut: "Ctrl+A",
        action: function action() {
          // SÃ©lectionner tous les Ã©lÃ©ments
          var allElementIds = state.elements.map(function (el) {
            return el.id;
          });
          dispatch({
            type: "SET_SELECTION",
            payload: allElementIds
          });
        }
      }];
    }

    // Menu contextuel pour un Ã©lÃ©ment
    var element = state.elements.find(function (el) {
      return el.id === elementId;
    });
    var isLocked = (element === null || element === void 0 ? void 0 : element.locked) || false;
    var items = [
    // Section Ordre des calques
    {
      id: "section-layers",
      section: "CALQUES"
    }, {
      id: "layer-order",
      label: "Ordre des calques",
      icon: "ðŸ“š",
      children: [{
        id: "bring-to-front",
        label: "Premier plan",
        icon: "â¬†ï¸",
        shortcut: "Ctrl+â†‘",
        action: function action() {
          return handleContextMenuAction("bring-to-front", elementId);
        },
        disabled: isLocked
      }, {
        id: "send-to-back",
        label: "ArriÃ¨re plan",
        icon: "â¬‡ï¸",
        shortcut: "Ctrl+â†“",
        action: function action() {
          return handleContextMenuAction("send-to-back", elementId);
        },
        disabled: isLocked
      }, {
        id: "bring-forward",
        label: "Avancer d'un plan",
        icon: "â†—ï¸",
        shortcut: "Ctrl+Shift+â†‘",
        action: function action() {
          return handleContextMenuAction("bring-forward", elementId);
        },
        disabled: isLocked
      }, {
        id: "send-backward",
        label: "Reculer d'un plan",
        icon: "â†™ï¸",
        shortcut: "Ctrl+Shift+â†“",
        action: function action() {
          return handleContextMenuAction("send-backward", elementId);
        },
        disabled: isLocked
      }]
    }, {
      id: "separator1",
      separator: true
    },
    // Section Ã‰dition
    {
      id: "section-edit",
      section: "Ã‰DITION"
    }, {
      id: "duplicate",
      label: "Dupliquer",
      icon: "ðŸ“‹",
      shortcut: "Ctrl+D",
      action: function action() {
        return handleContextMenuAction("duplicate", elementId);
      },
      disabled: isLocked,
      children: [{
        id: "duplicate-here",
        label: "Dupliquer ici",
        icon: "ðŸ“‹",
        action: function action() {
          return handleContextMenuAction("duplicate", elementId);
        },
        disabled: isLocked
      }, {
        id: "duplicate-multiple",
        label: "Dupliquer plusieurs...",
        icon: "ðŸ“‹ðŸ“‹",
        action: function action() {
          return handleContextMenuAction("duplicate-multiple", elementId);
        },
        disabled: isLocked
      }]
    }, {
      id: "clipboard",
      label: "Presse-papiers",
      icon: "ðŸ“„",
      children: [{
        id: "copy",
        label: "Copier",
        icon: "ðŸ“„",
        shortcut: "Ctrl+C",
        action: function action() {
          return handleContextMenuAction("copy", elementId);
        },
        disabled: false
      }, {
        id: "cut",
        label: "Couper",
        icon: "âœ‚ï¸",
        shortcut: "Ctrl+X",
        action: function action() {
          return handleContextMenuAction("cut", elementId);
        },
        disabled: isLocked
      }]
    }, {
      id: "separator2",
      separator: true
    },
    // Section Taille
    {
      id: "section-size",
      section: "TAILLE"
    }, {
      id: "reset-size",
      label: "Taille par dÃ©faut",
      icon: "ðŸ“",
      shortcut: "Ctrl+0",
      action: function action() {
        return handleContextMenuAction("reset-size", elementId);
      },
      disabled: isLocked
    }, {
      id: "fit-to-content",
      label: "Ajuster au contenu",
      icon: "ðŸ“",
      shortcut: "Ctrl+Shift+F",
      action: function action() {
        return handleContextMenuAction("fit-to-content", elementId);
      },
      disabled: isLocked || !((element === null || element === void 0 ? void 0 : element.type) === "text" || (element === null || element === void 0 ? void 0 : element.type) === "dynamic-text")
    }, {
      id: "separator3",
      separator: true
    },
    // Section Ã‰tat
    {
      id: "section-state",
      section: "Ã‰TAT"
    }, {
      id: "lock",
      label: isLocked ? "DÃ©verrouiller" : "Verrouiller",
      icon: isLocked ? "ðŸ”“" : "ðŸ”’",
      shortcut: isLocked ? "Ctrl+Shift+L" : "Ctrl+L",
      action: function action() {
        return handleContextMenuAction("lock", elementId);
      }
    }, {
      id: "separator4",
      separator: true
    },
    // Section Danger
    {
      id: "section-danger",
      section: "SUPPRESSION"
    }, {
      id: "delete",
      label: "Supprimer",
      icon: "ðŸ—‘ï¸",
      shortcut: "Suppr",
      action: function action() {
        return handleContextMenuAction("delete", elementId);
      },
      disabled: false
    }];
    return items;
  }, [state.elements, handleContextMenuAction, dispatch]);

  // Fonction pour dessiner la grille
  var drawGrid = (0,react.useCallback)(function (ctx, w, h, size, color) {
    ctx.strokeStyle = color;
    ctx.lineWidth = 1;
    for (var x = 0; x <= w; x += size) {
      ctx.beginPath();
      ctx.moveTo(x, 0);
      ctx.lineTo(x, h);
      ctx.stroke();
    }
    for (var y = 0; y <= h; y += size) {
      ctx.beginPath();
      ctx.moveTo(0, y);
      ctx.lineTo(w, y);
      ctx.stroke();
    }
  }, []); // No deps - pure function

  // Fonction pour dessiner les guides
  var drawGuides = (0,react.useCallback)(function (ctx, canvasWidth, canvasHeight) {
    ctx.save();
    ctx.strokeStyle = "#007acc";
    ctx.lineWidth = 1;
    ctx.setLineDash([5, 5]);

    // Guide horizontal au milieu
    ctx.beginPath();
    ctx.moveTo(0, canvasHeight / 2);
    ctx.lineTo(canvasWidth, canvasHeight / 2);
    ctx.stroke();

    // Guide vertical au milieu
    ctx.beginPath();
    ctx.moveTo(canvasWidth / 2, 0);
    ctx.lineTo(canvasWidth / 2, canvasHeight);
    ctx.stroke();
    ctx.restore();
  }, []);

  // Gestionnaire de clic droit pour le canvas
  var handleCanvasContextMenu = (0,react.useCallback)(function (event) {
    event.preventDefault();
    debugLog("\uD83D\uDC46 Canvas: Context menu triggered at (".concat(event.clientX, ", ").concat(event.clientY, ")"));
    debugLog("[Canvas] Context menu triggered at (".concat(event.clientX, ", ").concat(event.clientY, ")"));
    handleContextMenu(event, function (x, y, elementId) {
      debugLog("\uD83D\uDCCB Canvas: Context menu callback - Element: ".concat(elementId || "canvas", ", Position: (").concat(x, ", ").concat(y, ")"));
      debugLog("[Canvas] Context menu callback - Element: ".concat(elementId || "canvas", ", Position: (").concat(x, ", ").concat(y, ")"));
      showContextMenu(x, y, elementId);
    });
  }, [handleContextMenu, showContextMenu]);

  // Fonction de rendu du canvas
  var renderCanvas = (0,react.useCallback)(function () {
    var startTime = Date.now();
    renderCountRef.current += 1;
    debugLog("\uD83C\uDFA8 Canvas: Render #".concat(renderCountRef.current, " started - Elements: ").concat(state.elements.length, ", Zoom: ").concat(state.canvas.zoom, "%, Selection: ").concat(state.selection.selectedElements.length, " items"));
    debugLog("[Canvas] Render #".concat(renderCountRef.current, " started - Elements: ").concat(state.elements.length, ", Zoom: ").concat(state.canvas.zoom, "%, Pan: (").concat(state.canvas.pan.x.toFixed(1), ", ").concat(state.canvas.pan.y.toFixed(1), "), Selection: ").concat(state.selection.selectedElements.length, " items"));
    var canvas = canvasRef.current;
    if (!canvas) {
      debugLog("âŒ Canvas: Render cancelled - canvas ref is null");
      debugLog("[Canvas] Render cancelled - canvas ref is null");
      return;
    }
    var ctx = canvas.getContext("2d");
    if (!ctx) {
      debugLog("âŒ Canvas: Render cancelled - canvas context unavailable");
      debugLog("[Canvas] Render cancelled - canvas context unavailable");
      return;
    }

    // Clear canvas with background color from settings (matching PDF background)
    var canvasBgColor = normalizeColor("#ffffff");
    debugLog("\uD83D\uDD8C\uFE0F Canvas: Clearing canvas with background color: ".concat(canvasBgColor));
    debugLog("[Canvas] Clearing canvas with background color: ".concat(canvasBgColor));
    ctx.fillStyle = canvasBgColor;
    ctx.fillRect(0, 0, width, height);

    // Note: Canvas border is now handled by CSS styling based on settings

    // DEBUG: Log elements
    if (state.elements.length === 0) {
      // Pas d'Ã©lÃ©ments Ã  dessiner
    } else {
      // Ã‰lÃ©ments prÃ©sents
    }

    // Appliquer transformation (pan uniquement - zoom gÃ©rÃ© par CSS)
    ctx.save();
    ctx.translate(state.canvas.pan.x, state.canvas.pan.y);

    // Note: Zoom is now handled by CSS display size, no need for ctx.scale()

    // NOTE: Les marges seront rÃ©activÃ©es aprÃ¨s que le rendu des Ã©lÃ©ments soit fixÃ©
    // const showMargins = canvasSettings.showMargins;
    // if (showMargins && canvasSettings) {
    //   const marginTopPx = (canvasSettings.marginTop || 0) * 3.78;
    //   const marginLeftPx = (canvasSettings.marginLeft || 0) * 3.78;
    //   ctx.translate(marginLeftPx, marginTopPx);
    // }

    // Dessiner la grille si activÃ©e (utiliser les paramÃ¨tres Canvas Settings et l'Ã©tat du toggle)
    if (canvasSettings !== null && canvasSettings !== void 0 && canvasSettings.gridShow && state.canvas.showGrid) {
      drawGrid(ctx, width, height, (canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.gridSize) || 20, (canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.gridColor) || "#e0e0e0");
    }

    // Dessiner les guides si activÃ©s (utiliser les paramÃ¨tres Canvas Settings et l'Ã©tat du template)
    if (canvasSettings !== null && canvasSettings !== void 0 && canvasSettings.guidesEnabled && state.template.showGuides) {
      drawGuides(ctx, width, height);
    }

    // Dessiner les Ã©lÃ©ments
    debugLog("\uD83D\uDCDD Canvas: Rendering ".concat(visibleElementsList.length, " visible elements (lazy loading: ").concat(lazyLoadingEnabled, ")"));
    debugLog("[Canvas] Rendering ".concat(visibleElementsList.length, " visible elements (lazy loading: ").concat(lazyLoadingEnabled, ")"));
    visibleElementsList.forEach(function (element) {
      debugLog("\uD83C\uDFAF Canvas: Drawing element: ".concat(element.type, " (").concat(element.id, ") at (").concat(element.x, ", ").concat(element.y, ") ").concat(element.width, "x").concat(element.height));
      debugLog("[Canvas] Drawing element: ".concat(element.type, " (").concat(element.id, ") at (").concat(element.x, ", ").concat(element.y, ") ").concat(element.width, "x").concat(element.height));
      drawElement(ctx, element, state); // âœ… BUGFIX-001/004: Pass state as parameter
    });

    // Dessiner la sÃ©lection temporaire (rectangle/lasso en cours)
    if (selectionState !== null && selectionState !== void 0 && selectionState.isSelecting) {
      if (selectionState.selectionMode === "rectangle" && selectionState.selectionRect.width > 0 && selectionState.selectionRect.height > 0) {
        // Dessiner le rectangle de sÃ©lection
        ctx.save();
        ctx.strokeStyle = "#0066cc";
        ctx.lineWidth = 1;
        ctx.setLineDash([5, 5]);
        ctx.strokeRect(selectionState.selectionRect.x, selectionState.selectionRect.y, selectionState.selectionRect.width, selectionState.selectionRect.height);

        // Remplir avec une couleur semi-transparente
        ctx.fillStyle = "rgba(0, 102, 204, 0.1)";
        ctx.fillRect(selectionState.selectionRect.x, selectionState.selectionRect.y, selectionState.selectionRect.width, selectionState.selectionRect.height);
        ctx.restore();
      } else if (selectionState.selectionMode === "lasso" && selectionState.selectionPoints.length > 1) {
        // Dessiner le lasso
        ctx.save();
        ctx.strokeStyle = "#0066cc";
        ctx.lineWidth = 1;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.moveTo(selectionState.selectionPoints[0].x, selectionState.selectionPoints[0].y);
        for (var i = 1; i < selectionState.selectionPoints.length; i++) {
          ctx.lineTo(selectionState.selectionPoints[i].x, selectionState.selectionPoints[i].y);
        }
        ctx.closePath();
        ctx.stroke();

        // Remplir avec une couleur semi-transparente
        ctx.fillStyle = "rgba(0, 102, 204, 0.1)";
        ctx.fill();
        ctx.restore();
      }
    }

    // Dessiner la sÃ©lection
    if (state.selection.selectedElements.length > 0) {
      drawSelection(ctx, state.selection.selectedElements, state.elements);
    }
    ctx.restore();

    // Log rendu terminÃ© avec mÃ©triques de performance
    var renderTime = Date.now() - startTime;
    debugLog("\u2705 Canvas: Render #".concat(renderCountRef.current, " completed in ").concat(renderTime, "ms - ").concat(state.elements.length, " elements rendered"));
    debugLog("[Canvas] Render #".concat(renderCountRef.current, " completed in ").concat(renderTime, "ms - ").concat(state.elements.length, " elements rendered"));

    // Log avertissement si le rendu prend trop de temps
    if (renderTime > 100) {
      debugWarn("\u26A0\uFE0F Canvas: Slow render detected: ".concat(renderTime, "ms for ").concat(state.elements.length, " elements"));
      debugWarn("[Canvas] Slow render detected: ".concat(renderTime, "ms for ").concat(state.elements.length, " elements"));
    }
  }, [width, height, canvasSettings, state, drawElement, drawGrid, drawGuides, selectionState, drawSelection, visibleElementsList]); // âœ… Include memoized drawGrid and drawGuides

  // Redessiner quand l'Ã©tat change - CORRECTION: Supprimer renderCanvas des dÃ©pendances pour Ã©viter les boucles
  (0,react.useEffect)(function () {
    debugLog("\uD83D\uDD04 Canvas: State change detected - triggering render. Elements: ".concat(state.elements.length, ", Selection: ").concat(state.selection.selectedElements.length, ", Zoom: ").concat(state.canvas.zoom, "%"));
    debugLog("[Canvas] State change detected - triggering render. Elements: ".concat(state.elements.length, ", Selection: ").concat(state.selection.selectedElements.length, ", Zoom: ").concat(state.canvas.zoom, "%"));
    renderCanvas();
  }, [state, canvasSettings, imageLoadCount, selectionState === null || selectionState === void 0 ? void 0 : selectionState.updateTrigger, visibleElementsList]); // DÃ©pendances directes au lieu de renderCanvas

  // Rendu initial - REMOVED: Redondant avec l'effet principal ci-dessus

  // âœ… Force initial render when elements first load (for cached images)
  (0,react.useEffect)(function () {
    if (state.elements.length > 0 && !initialImageCheckDoneRef.current) {
      debugLog("[Canvas] Initial elements loaded (".concat(state.elements.length, " elements) - scheduling image loading checks"));
      initialImageCheckDoneRef.current = true;

      // Force multiple renders to ensure images are displayed
      var timer1 = setTimeout(function () {
        debugLog("[Canvas] Image loading check #1");
        setImageLoadCount(function (prev) {
          return prev + 1;
        });
      }, 100);
      var timer2 = setTimeout(function () {
        debugLog("[Canvas] Image loading check #2");
        setImageLoadCount(function (prev) {
          return prev + 1;
        });
      }, 500);
      var timer3 = setTimeout(function () {
        debugLog("[Canvas] Image loading check #3");
        setImageLoadCount(function (prev) {
          return prev + 1;
        });
      }, 1000);

      // Add longer timeout for slow-loading images
      var timer4 = setTimeout(function () {
        debugLog("[Canvas] Image loading check #4 (final)");
        setImageLoadCount(function (prev) {
          return prev + 1;
        });
      }, 2000);
      return function () {
        clearTimeout(timer1);
        clearTimeout(timer2);
        clearTimeout(timer3);
        clearTimeout(timer4);
      };
    }
  }, [state.elements.length]);

  // âœ… CORRECTION 1: Ajouter beforeunload event pour avertir des changements non-sauvegardÃ©s
  (0,react.useEffect)(function () {
    var handleBeforeUnload = function handleBeforeUnload(e) {
      if (state.template.isModified) {
        e.preventDefault();
      }
    };
    window.addEventListener("beforeunload", handleBeforeUnload, {
      passive: true
    });
    return function () {
      return window.removeEventListener("beforeunload", handleBeforeUnload);
    };
  }, [state.template.isModified]);

  // ðŸŽ¯ Initialize monitoring dashboard
  (0,react.useEffect)(function () {
    CanvasMonitoringDashboard.initialize();
    // Silent initialization
  }, []);

  // Calculate border style based on canvas settings and license
  var isPremium = ((_window$pdfBuilderDat3 = window.pdfBuilderData) === null || _window$pdfBuilderDat3 === void 0 || (_window$pdfBuilderDat3 = _window$pdfBuilderDat3.license) === null || _window$pdfBuilderDat3 === void 0 ? void 0 : _window$pdfBuilderDat3.isPremium) || false;

  // DEBUG: Log license and settings info
  console.log('ðŸ” [CANVAS DEBUG] License check:', {
    windowExists: typeof window !== 'undefined',
    pdfBuilderData: !!window.pdfBuilderData,
    license: (_window$pdfBuilderDat4 = window.pdfBuilderData) === null || _window$pdfBuilderDat4 === void 0 ? void 0 : _window$pdfBuilderDat4.license,
    isPremium: isPremium,
    canvasSettings: canvasSettings,
    defaultSettings: DEFAULT_SETTINGS
  });
  var borderStyle = isDragOver ? "2px solid #007acc" : isPremium && canvasSettings !== null && canvasSettings !== void 0 && canvasSettings.borderWidth && (canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.borderWidth) > 0 ? "".concat(canvasSettings.borderWidth, "px solid ").concat((canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.borderColor) || DEFAULT_SETTINGS.borderColor) : "none";

  // Calculate canvas display size based on zoom
  var zoomScale = state.canvas.zoom / 100;
  var displayWidth = width * zoomScale;
  var displayHeight = height * zoomScale;
  debugLog("[Canvas] Rendering canvas element - Display size: ".concat(displayWidth, "x").concat(displayHeight, ", Border: ").concat(borderStyle, ", Drag over: ").concat(isDragOver));

  // DEBUG: Log applied colors
  console.log('ðŸŽ¨ [CANVAS DEBUG] Applied styles:', {
    isPremium: isPremium,
    borderStyle: borderStyle,
    backgroundColor: !isPremium ? DEFAULT_SETTINGS.containerBackgroundColor : (canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.containerBackgroundColor) || DEFAULT_SETTINGS.containerBackgroundColor,
    defaultBg: DEFAULT_SETTINGS.containerBackgroundColor,
    customBg: canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.containerBackgroundColor
  });
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      ref: canvasWrapperRef,
      onDragEnter: handleDragEnter,
      onDrop: handleDrop,
      onDragOver: handleDragOver,
      onDragLeave: handleDragLeave,
      style: {
        display: "inline-flex",
        alignItems: "center",
        justifyContent: "center",
        border: borderStyle,
        borderRadius: "4px",
        backgroundColor: !isPremium ? DEFAULT_SETTINGS.containerBackgroundColor // Fond par dÃ©faut en mode gratuit
        : (canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.containerBackgroundColor) || DEFAULT_SETTINGS.containerBackgroundColor,
        transition: "border-color 0.2s ease, box-shadow 0.2s ease",
        boxShadow: isDragOver ? "0 0 0 2px rgba(0, 122, 204, 0.2)" : canvasSettings !== null && canvasSettings !== void 0 && canvasSettings.shadowEnabled ? "2px 8px 16px rgba(0, 0, 0, 0.3), 0 4px 8px rgba(0, 0, 0, 0.2)" : "none",
        pointerEvents: "auto"
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsx)("canvas", {
        ref: canvasRef,
        width: width,
        height: height,
        className: className,
        onClick: handleCanvasClick,
        onMouseDown: handleMouseDown,
        onMouseMove: handleMouseMove,
        onMouseUp: handleMouseUp,
        onContextMenu: handleCanvasContextMenu,
        style: {
          width: "".concat(displayWidth, "px"),
          height: "".concat(displayHeight, "px"),
          cursor: "crosshair",
          backgroundColor: "#ffffff",
          border: "none",
          boxShadow: canvasSettings !== null && canvasSettings !== void 0 && canvasSettings.shadowEnabled ? "2px 8px 16px rgba(0, 0, 0, 0.3), 0 4px 8px rgba(0, 0, 0, 0.2)" : "none",
          display: "block"
        }
      })
    }), contextMenu.isVisible && /*#__PURE__*/(0,jsx_runtime.jsx)(_ContextMenu, {
      items: getContextMenuItems(contextMenu.elementId),
      position: contextMenu.position,
      onClose: hideContextMenu,
      isVisible: contextMenu.isVisible
    })]
  });
};
;// ./src/js/react/components/toolbar/Toolbar.tsx




function Toolbar(_ref) {
  var className = _ref.className;
  var _useBuilder = useBuilder(),
    state = _useBuilder.state,
    dispatch = _useBuilder.dispatch,
    setMode = _useBuilder.setMode,
    undo = _useBuilder.undo,
    redo = _useBuilder.redo,
    reset = _useBuilder.reset,
    toggleGrid = _useBuilder.toggleGrid,
    toggleGuides = _useBuilder.toggleGuides,
    setCanvas = _useBuilder.setCanvas,
    zoomIn = _useBuilder.zoomIn,
    zoomOut = _useBuilder.zoomOut,
    resetZoom = _useBuilder.resetZoom;
  var canvasSettings = CanvasSettingsContext_useCanvasSettings();

  // VÃ©rifications de sÃ©curitÃ©
  if (!state) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        padding: '20px',
        backgroundColor: '#ffcccc',
        border: '1px solid #ff0000'
      },
      children: "Erreur: \xC9tat Builder non disponible"
    });
  }
  if (!state.history) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        padding: '20px',
        backgroundColor: '#ffcccc',
        border: '1px solid #ff0000'
      },
      children: "Erreur: Historique non disponible"
    });
  }
  if (!state.canvas) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        padding: '20px',
        backgroundColor: '#ffcccc',
        border: '1px solid #ff0000'
      },
      children: "Erreur: Canvas non disponible"
    });
  }
  var tools = [{
    mode: 'select',
    label: 'SÃ©lection',
    icon: 'ðŸ–±ï¸'
  }, {
    mode: 'rectangle',
    label: 'Rectangle',
    icon: 'â–­'
  }, {
    mode: 'circle',
    label: 'Cercle',
    icon: 'â—‹'
  }, {
    mode: 'text',
    label: 'Texte',
    icon: 'T'
  }, {
    mode: 'line',
    label: 'Ligne',
    icon: 'â”'
  }, {
    mode: 'image',
    label: 'Image',
    icon: 'ðŸ–¼ï¸'
  }];
  var handleModeChange = function handleModeChange(mode) {
    if (setMode) {
      setMode(mode);
    }
  };
  var handleUndo = function handleUndo() {
    if (undo) {
      undo();
    }
  };
  var handleRedo = function handleRedo() {
    if (redo) {
      redo();
    }
  };
  var handleReset = function handleReset() {
    if (reset) {
      reset();
    }
  };
  var handleToggleGrid = function handleToggleGrid() {
    if (toggleGrid && canvasSettings.gridShow) {
      toggleGrid();
    }
  };
  var handleToggleGuides = function handleToggleGuides() {
    if (toggleGuides && canvasSettings.guidesEnabled) {
      toggleGuides();
    }
  };
  var handleToggleSnapToGrid = function handleToggleSnapToGrid() {
    // VÃ©rifier que la grille globale est activÃ©e avant d'autoriser l'accrochage
    if (canvasSettings.gridShow && canvasSettings.gridSnapEnabled) {
      var newSnapToGrid = !state.canvas.snapToGrid;
      if (setCanvas) {
        setCanvas({
          snapToGrid: newSnapToGrid
        });
      }
    }
  };
  return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
    className: "pdf-builder-toolbar ".concat(className || ''),
    children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        display: 'flex',
        flexDirection: 'column',
        gap: '12px',
        padding: '16px',
        backgroundColor: '#ffffff',
        border: '1px solid #e1e5e9',
        borderRadius: '8px',
        boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',
        maxHeight: '140px',
        width: '100%'
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          display: 'flex',
          gap: '16px',
          alignItems: 'flex-start',
          flexDirection: 'row',
          minWidth: '220px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("section", {
          style: {
            display: 'flex',
            flexDirection: 'column',
            gap: '8px',
            minWidth: '220px',
            flex: 'none'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              fontSize: '13px',
              fontWeight: '600',
              color: '#374151',
              textTransform: 'uppercase',
              letterSpacing: '0.5px',
              borderLeft: '3px solid #3b82f6',
              paddingLeft: '8px',
              display: 'block'
            },
            children: "Outils"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              display: 'flex',
              flexWrap: 'wrap',
              gap: '6px',
              maxHeight: '80px',
              alignContent: 'flex-start'
            },
            children: tools.map(function (tool) {
              return /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
                onClick: function onClick() {
                  return handleModeChange(tool.mode);
                },
                style: {
                  padding: '8px 12px',
                  border: '1px solid #d1d5db',
                  borderRadius: '6px',
                  backgroundColor: state.mode === tool.mode ? '#3b82f6' : '#ffffff',
                  color: state.mode === tool.mode ? '#ffffff' : '#374151',
                  cursor: 'pointer',
                  fontSize: '13px',
                  fontWeight: '500',
                  display: 'flex',
                  alignItems: 'center',
                  gap: '6px',
                  transition: 'all 0.2s ease',
                  boxShadow: state.mode === tool.mode ? '0 1px 3px rgba(59, 130, 246, 0.3)' : 'none',
                  minWidth: '90px',
                  justifyContent: 'center'
                },
                onMouseEnter: function onMouseEnter(e) {
                  if (state.mode !== tool.mode) {
                    e.currentTarget.style.backgroundColor = '#f8fafc';
                    e.currentTarget.style.borderColor = '#9ca3af';
                  }
                },
                onMouseLeave: function onMouseLeave(e) {
                  if (state.mode !== tool.mode) {
                    e.currentTarget.style.backgroundColor = '#ffffff';
                    e.currentTarget.style.borderColor = '#d1d5db';
                  }
                },
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                  style: {
                    fontSize: '14px'
                  },
                  children: tool.icon
                }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                  children: tool.label
                })]
              }, tool.mode);
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("section", {
          style: {
            display: 'flex',
            flexDirection: 'column',
            gap: '8px',
            flex: 1
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              fontSize: '13px',
              fontWeight: '600',
              color: '#374151',
              textTransform: 'uppercase',
              letterSpacing: '0.5px',
              borderLeft: '3px solid #10b981',
              paddingLeft: '8px'
            },
            children: "Actions"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              display: 'flex',
              flexWrap: 'wrap',
              gap: '6px',
              maxHeight: '80px',
              alignContent: 'flex-start'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
              onClick: handleUndo,
              disabled: !state.history.canUndo,
              style: {
                padding: '8px 12px',
                border: '1px solid #d1d5db',
                borderRadius: '6px',
                backgroundColor: state.history.canUndo ? '#ffffff' : '#f9fafb',
                color: state.history.canUndo ? '#374151' : '#9ca3af',
                cursor: state.history.canUndo ? 'pointer' : 'not-allowed',
                fontSize: '13px',
                fontWeight: '500',
                transition: 'all 0.2s ease',
                minWidth: '90px'
              },
              onMouseEnter: function onMouseEnter(e) {
                if (state.history.canUndo) {
                  e.currentTarget.style.backgroundColor = '#f8fafc';
                  e.currentTarget.style.borderColor = '#9ca3af';
                }
              },
              onMouseLeave: function onMouseLeave(e) {
                if (state.history.canUndo) {
                  e.currentTarget.style.backgroundColor = '#ffffff';
                  e.currentTarget.style.borderColor = '#d1d5db';
                }
              },
              children: "\u21B6 Annuler"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
              onClick: handleRedo,
              disabled: !state.history.canRedo,
              style: {
                padding: '8px 12px',
                border: '1px solid #d1d5db',
                borderRadius: '6px',
                backgroundColor: state.history.canRedo ? '#ffffff' : '#f9fafb',
                color: state.history.canRedo ? '#374151' : '#9ca3af',
                cursor: state.history.canRedo ? 'pointer' : 'not-allowed',
                fontSize: '13px',
                fontWeight: '500',
                transition: 'all 0.2s ease',
                minWidth: '90px'
              },
              onMouseEnter: function onMouseEnter(e) {
                if (state.history.canRedo) {
                  e.currentTarget.style.backgroundColor = '#f8fafc';
                  e.currentTarget.style.borderColor = '#9ca3af';
                }
              },
              onMouseLeave: function onMouseLeave(e) {
                if (state.history.canRedo) {
                  e.currentTarget.style.backgroundColor = '#ffffff';
                  e.currentTarget.style.borderColor = '#d1d5db';
                }
              },
              children: "\u21B7 R\xE9tablir"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
              onClick: handleToggleGrid,
              disabled: !canvasSettings.gridShow,
              style: {
                padding: '8px 12px',
                border: '1px solid #d1d5db',
                borderRadius: '6px',
                backgroundColor: !canvasSettings.gridShow ? '#f9fafb' : state.canvas.showGrid ? '#3b82f6' : '#ffffff',
                color: !canvasSettings.gridShow ? '#9ca3af' : state.canvas.showGrid ? '#ffffff' : '#374151',
                cursor: !canvasSettings.gridShow ? 'not-allowed' : 'pointer',
                fontSize: '13px',
                fontWeight: '500',
                transition: 'all 0.2s ease',
                boxShadow: state.canvas.showGrid ? '0 1px 3px rgba(59, 130, 246, 0.3)' : 'none',
                opacity: !canvasSettings.gridShow ? 0.6 : 1,
                minWidth: '90px'
              },
              onMouseEnter: function onMouseEnter(e) {
                if (canvasSettings.gridShow && !state.canvas.showGrid) {
                  e.currentTarget.style.backgroundColor = '#f8fafc';
                  e.currentTarget.style.borderColor = '#9ca3af';
                }
              },
              onMouseLeave: function onMouseLeave(e) {
                if (canvasSettings.gridShow && !state.canvas.showGrid) {
                  e.currentTarget.style.backgroundColor = '#ffffff';
                  e.currentTarget.style.borderColor = '#d1d5db';
                }
              },
              children: state.canvas.showGrid ? 'â¬œ Grille' : 'â–¦ Grille'
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
              onClick: handleToggleSnapToGrid,
              disabled: !canvasSettings.gridShow || !canvasSettings.gridSnapEnabled,
              style: {
                padding: '8px 12px',
                border: '1px solid #d1d5db',
                borderRadius: '6px',
                backgroundColor: !canvasSettings.gridShow || !canvasSettings.gridSnapEnabled ? '#f9fafb' : state.canvas.snapToGrid ? '#3b82f6' : '#ffffff',
                color: !canvasSettings.gridShow || !canvasSettings.gridSnapEnabled ? '#9ca3af' : state.canvas.snapToGrid ? '#ffffff' : '#374151',
                cursor: !canvasSettings.gridShow || !canvasSettings.gridSnapEnabled ? 'not-allowed' : 'pointer',
                fontSize: '13px',
                fontWeight: '500',
                transition: 'all 0.2s ease',
                boxShadow: state.canvas.snapToGrid ? '0 1px 3px rgba(59, 130, 246, 0.3)' : 'none',
                opacity: !canvasSettings.gridShow || !canvasSettings.gridSnapEnabled ? 0.6 : 1,
                minWidth: '90px'
              },
              onMouseEnter: function onMouseEnter(e) {
                if (canvasSettings.gridShow && canvasSettings.gridSnapEnabled && !state.canvas.snapToGrid) {
                  e.currentTarget.style.backgroundColor = '#f8fafc';
                  e.currentTarget.style.borderColor = '#9ca3af';
                }
              },
              onMouseLeave: function onMouseLeave(e) {
                if (canvasSettings.gridShow && canvasSettings.gridSnapEnabled && !state.canvas.snapToGrid) {
                  e.currentTarget.style.backgroundColor = '#ffffff';
                  e.currentTarget.style.borderColor = '#d1d5db';
                }
              },
              children: "\uD83E\uDDF2 Snap"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
              onClick: handleToggleGuides,
              disabled: !canvasSettings.guidesEnabled,
              style: {
                padding: '8px 12px',
                border: '1px solid #d1d5db',
                borderRadius: '6px',
                backgroundColor: !canvasSettings.guidesEnabled ? '#f9fafb' : state.template.showGuides ? '#3b82f6' : '#ffffff',
                color: !canvasSettings.guidesEnabled ? '#9ca3af' : state.template.showGuides ? '#ffffff' : '#374151',
                cursor: !canvasSettings.guidesEnabled ? 'not-allowed' : 'pointer',
                fontSize: '13px',
                fontWeight: '500',
                transition: 'all 0.2s ease',
                boxShadow: state.template.showGuides ? '0 1px 3px rgba(59, 130, 246, 0.3)' : 'none',
                opacity: !canvasSettings.guidesEnabled ? 0.6 : 1,
                minWidth: '90px'
              },
              onMouseEnter: function onMouseEnter(e) {
                if (canvasSettings.guidesEnabled && !state.template.showGuides) {
                  e.currentTarget.style.backgroundColor = '#f8fafc';
                  e.currentTarget.style.borderColor = '#9ca3af';
                }
              },
              onMouseLeave: function onMouseLeave(e) {
                if (canvasSettings.guidesEnabled && !state.template.showGuides) {
                  e.currentTarget.style.backgroundColor = '#ffffff';
                  e.currentTarget.style.borderColor = '#d1d5db';
                }
              },
              children: state.template.showGuides ? 'ðŸ“ Guides' : 'ðŸ“ Guides'
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                display: 'flex',
                alignItems: 'center',
                gap: '4px',
                padding: '6px 10px',
                backgroundColor: '#f8fafc',
                borderRadius: '6px',
                border: '1px solid #e2e8f0'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                style: {
                  fontSize: '12px',
                  color: '#64748b',
                  fontWeight: '500'
                },
                children: "\uD83D\uDD0D"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
                onClick: function onClick() {
                  // Zoom out
                  if (zoomOut) {
                    zoomOut();
                  }
                },
                style: {
                  padding: '2px 6px',
                  border: '1px solid #d1d5db',
                  borderRadius: '4px',
                  backgroundColor: '#ffffff',
                  color: '#374151',
                  cursor: 'pointer',
                  fontSize: '12px',
                  fontWeight: '600',
                  minWidth: '24px'
                },
                title: "Zoom arri\xE8re",
                children: "\u2796"
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
                style: {
                  fontSize: '12px',
                  fontWeight: '600',
                  color: '#374151',
                  minWidth: '40px',
                  textAlign: 'center'
                },
                children: [state.canvas.zoom, "%"]
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
                onClick: function onClick() {
                  // Zoom in
                  if (zoomIn) {
                    zoomIn();
                  }
                },
                style: {
                  padding: '2px 6px',
                  border: '1px solid #d1d5db',
                  borderRadius: '4px',
                  backgroundColor: '#ffffff',
                  color: '#374151',
                  cursor: 'pointer',
                  fontSize: '12px',
                  fontWeight: '600',
                  minWidth: '24px'
                },
                title: "Zoom avant",
                children: "\u2795"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                style: {
                  fontSize: '10px',
                  color: '#94a3b8',
                  margin: '0 2px'
                },
                children: "|"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
                onClick: function onClick() {
                  // Fit to screen (reset to default zoom)
                  if (resetZoom) {
                    resetZoom();
                  }
                },
                style: {
                  padding: '4px 8px',
                  border: '1px solid #d1d5db',
                  borderRadius: '4px',
                  backgroundColor: '#ffffff',
                  color: '#374151',
                  cursor: 'pointer',
                  fontSize: '11px',
                  fontWeight: '500'
                },
                title: "Adapter \xE0 l'\xE9cran",
                children: "\uD83D\uDD04"
              })]
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("section", {
          style: {
            display: 'flex',
            flexDirection: 'column',
            gap: '6px',
            minWidth: '160px',
            marginLeft: 'auto'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              fontSize: '13px',
              fontWeight: '600',
              color: '#374151',
              textTransform: 'uppercase',
              letterSpacing: '0.5px',
              borderLeft: '3px solid #f59e0b',
              paddingLeft: '8px'
            },
            children: "Infos"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              fontSize: '12px',
              color: '#6b7280',
              display: 'flex',
              flexDirection: 'column',
              gap: '2px',
              backgroundColor: '#f9fafb',
              padding: '6px',
              borderRadius: '6px',
              border: '1px solid #e5e7eb'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                display: 'flex',
                justifyContent: 'space-between'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                children: "\xC9l\xE9ments:"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                style: {
                  fontWeight: '600',
                  color: '#374151'
                },
                children: state.elements.length
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                display: 'flex',
                justifyContent: 'space-between'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                children: "S\xE9lection:"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                style: {
                  fontWeight: '600',
                  color: '#374151'
                },
                children: state.selection.selectedElements.length
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                display: 'flex',
                justifyContent: 'space-between'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                children: "Mode:"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                style: {
                  fontWeight: '600',
                  color: '#374151'
                },
                children: state.mode
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                display: 'flex',
                justifyContent: 'space-between'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                children: "Zoom:"
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
                style: {
                  fontWeight: '600',
                  color: '#374151'
                },
                children: [state.canvas.zoom, "%"]
              })]
            })]
          })]
        })]
      })
    })
  });
}
;// ./src/js/react/constants/responsive.ts
/**
 * Responsive Design Constants
 * Breakpoints et utilitaires pour le design responsive
 */

var BREAKPOINTS = {
  // Mobile first approach
  xs: 480,
  // Extra small devices (phones, < 480px)
  sm: 768,
  // Small devices (tablets, < 768px)
  md: 992,
  // Medium devices (small laptops, < 992px)
  lg: 1200,
  // Large devices (desktops, < 1200px)
  xl: 1440 // Extra large devices (large desktops, >= 1440px)
};
var MEDIA_QUERIES = {
  xs: "(max-width: ".concat(BREAKPOINTS.xs - 1, "px)"),
  sm: "(max-width: ".concat(BREAKPOINTS.sm - 1, "px)"),
  md: "(max-width: ".concat(BREAKPOINTS.md - 1, "px)"),
  lg: "(max-width: ".concat(BREAKPOINTS.lg - 1, "px)"),
  xl: "(min-width: ".concat(BREAKPOINTS.xl, "px)"),
  // Ranges
  xsOnly: "(max-width: ".concat(BREAKPOINTS.xs - 1, "px)"),
  smOnly: "(min-width: ".concat(BREAKPOINTS.xs, "px) and (max-width: ").concat(BREAKPOINTS.sm - 1, "px)"),
  mdOnly: "(min-width: ".concat(BREAKPOINTS.sm, "px) and (max-width: ").concat(BREAKPOINTS.md - 1, "px)"),
  lgOnly: "(min-width: ".concat(BREAKPOINTS.md, "px) and (max-width: ").concat(BREAKPOINTS.lg - 1, "px)"),
  xlOnly: "(min-width: ".concat(BREAKPOINTS.lg, "px)")
};
;// ./src/js/react/hooks/useResponsive.ts
function useResponsive_slicedToArray(r, e) { return useResponsive_arrayWithHoles(r) || useResponsive_iterableToArrayLimit(r, e) || useResponsive_unsupportedIterableToArray(r, e) || useResponsive_nonIterableRest(); }
function useResponsive_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function useResponsive_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return useResponsive_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? useResponsive_arrayLikeToArray(r, a) : void 0; } }
function useResponsive_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function useResponsive_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function useResponsive_arrayWithHoles(r) { if (Array.isArray(r)) return r; }



/**
 * Hook personnalisÃ© pour dÃ©tecter les media queries
 * @param query - La media query Ã  vÃ©rifier
 * @returns boolean - True si la media query correspond
 */
function useMediaQuery(query) {
  var _useState = (0,react.useState)(false),
    _useState2 = useResponsive_slicedToArray(_useState, 2),
    matches = _useState2[0],
    setMatches = _useState2[1];
  (0,react.useEffect)(function () {
    var mediaQuery = window.matchMedia(MEDIA_QUERIES[query]);

    // Fonction de callback pour les changements
    var handleChange = function handleChange(event) {
      setMatches(event.matches);
    };

    // VÃ©rifier initialement
    setMatches(mediaQuery.matches);

    // Ã‰couter les changements
    mediaQuery.addEventListener('change', handleChange);

    // Cleanup
    return function () {
      mediaQuery.removeEventListener('change', handleChange);
    };
  }, [query]);
  return matches;
}

/**
 * Hook pour obtenir le breakpoint actuel
 * @returns Le breakpoint actuel ('xs', 'sm', 'md', 'lg', 'xl')
 */
function useResponsive_useBreakpoint() {
  var isXs = useMediaQuery('xsOnly');
  var isSm = useMediaQuery('smOnly');
  var isMd = useMediaQuery('mdOnly');
  var isLg = useMediaQuery('lgOnly');
  var isXl = useMediaQuery('xlOnly');
  if (isXs) return 'xs';
  if (isSm) return 'sm';
  if (isMd) return 'md';
  if (isLg) return 'lg';
  return 'xl'; // Default to xl for very large screens
}

/**
 * Hook pour vÃ©rifier si l'Ã©cran est mobile
 * @returns boolean - True si mobile (xs ou sm)
 */
function useResponsive_useIsMobile() {
  var breakpoint = useResponsive_useBreakpoint();
  return breakpoint === 'xs' || breakpoint === 'sm';
}

/**
 * Hook pour vÃ©rifier si l'Ã©cran est desktop
 * @returns boolean - True si desktop (lg ou xl)
 */
function useResponsive_useIsDesktop() {
  var breakpoint = useResponsive_useBreakpoint();
  return breakpoint === 'lg' || breakpoint === 'xl';
}

/**
 * Hook pour vÃ©rifier si l'Ã©cran est tablette
 * @returns boolean - True si tablette (md)
 */
function useResponsive_useIsTablet() {
  var breakpoint = useResponsive_useBreakpoint();
  return breakpoint === 'md';
}
;// ./src/js/react/components/ui/Responsive.tsx


/**
 * Composant Responsive - Affiche du contenu diffÃ©rent selon le breakpoint
 */
function Responsive(_ref) {
  var children = _ref.children,
    breakpoint = _ref.breakpoint,
    mobile = _ref.mobile,
    tablet = _ref.tablet,
    desktop = _ref.desktop,
    _ref$className = _ref.className,
    className = _ref$className === void 0 ? '' : _ref$className;
  var currentBreakpoint = useBreakpoint();
  var isMobile = useIsMobile();
  var isTablet = useIsTablet();
  var isDesktop = useIsDesktop();

  // Si un breakpoint spÃ©cifique est demandÃ©
  if (breakpoint && currentBreakpoint === breakpoint) {
    return /*#__PURE__*/_jsx("div", {
      className: className,
      children: children
    });
  }

  // Contenu spÃ©cifique selon le type d'appareil
  if (isMobile && mobile) {
    return /*#__PURE__*/_jsx("div", {
      className: className,
      children: mobile
    });
  }
  if (isTablet && tablet) {
    return /*#__PURE__*/_jsx("div", {
      className: className,
      children: tablet
    });
  }
  if (isDesktop && desktop) {
    return /*#__PURE__*/_jsx("div", {
      className: className,
      children: desktop
    });
  }

  // Contenu par dÃ©faut
  return /*#__PURE__*/_jsx("div", {
    className: className,
    children: children
  });
}
/**
 * Conteneur responsive qui applique des classes CSS diffÃ©rentes selon l'appareil
 */
function ResponsiveContainer(_ref2) {
  var children = _ref2.children,
    _ref2$className = _ref2.className,
    className = _ref2$className === void 0 ? '' : _ref2$className,
    _ref2$mobileClass = _ref2.mobileClass,
    mobileClass = _ref2$mobileClass === void 0 ? '' : _ref2$mobileClass,
    _ref2$tabletClass = _ref2.tabletClass,
    tabletClass = _ref2$tabletClass === void 0 ? '' : _ref2$tabletClass,
    _ref2$desktopClass = _ref2.desktopClass,
    desktopClass = _ref2$desktopClass === void 0 ? '' : _ref2$desktopClass;
  var isMobile = useResponsive_useIsMobile();
  var isTablet = useResponsive_useIsTablet();
  var isDesktop = useResponsive_useIsDesktop();
  var responsiveClass = className;
  if (isMobile && mobileClass) {
    responsiveClass += " ".concat(mobileClass);
  } else if (isTablet && tabletClass) {
    responsiveClass += " ".concat(tabletClass);
  } else if (isDesktop && desktopClass) {
    responsiveClass += " ".concat(desktopClass);
  }
  return /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
    className: responsiveClass.trim(),
    children: children
  });
}
/**
 * Composant Hidden - Cache le contenu sur certains breakpoints
 */
function Hidden(_ref3) {
  var children = _ref3.children,
    _ref3$on = _ref3.on,
    on = _ref3$on === void 0 ? [] : _ref3$on,
    _ref3$className = _ref3.className,
    className = _ref3$className === void 0 ? '' : _ref3$className;
  var currentBreakpoint = useBreakpoint();
  if (on.includes(currentBreakpoint)) {
    return null;
  }
  return /*#__PURE__*/_jsx("div", {
    className: className,
    children: children
  });
}
/**
 * Composant Visible - Affiche le contenu seulement sur certains breakpoints
 */
function Visible(_ref4) {
  var children = _ref4.children,
    _ref4$on = _ref4.on,
    on = _ref4$on === void 0 ? [] : _ref4$on,
    _ref4$className = _ref4.className,
    className = _ref4$className === void 0 ? '' : _ref4$className;
  var currentBreakpoint = useBreakpoint();
  if (!on.includes(currentBreakpoint)) {
    return null;
  }
  return /*#__PURE__*/_jsx("div", {
    className: className,
    children: children
  });
}
;// ./src/js/react/components/properties/ProductTableProperties.tsx
function ProductTableProperties_typeof(o) { "@babel/helpers - typeof"; return ProductTableProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, ProductTableProperties_typeof(o); }
function ProductTableProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function ProductTableProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ProductTableProperties_ownKeys(Object(t), !0).forEach(function (r) { ProductTableProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ProductTableProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function ProductTableProperties_defineProperty(e, r, t) { return (r = ProductTableProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function ProductTableProperties_toPropertyKey(t) { var i = ProductTableProperties_toPrimitive(t, "string"); return "symbol" == ProductTableProperties_typeof(i) ? i : i + ""; }
function ProductTableProperties_toPrimitive(t, r) { if ("object" != ProductTableProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != ProductTableProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function ProductTableProperties_slicedToArray(r, e) { return ProductTableProperties_arrayWithHoles(r) || ProductTableProperties_iterableToArrayLimit(r, e) || ProductTableProperties_unsupportedIterableToArray(r, e) || ProductTableProperties_nonIterableRest(); }
function ProductTableProperties_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function ProductTableProperties_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return ProductTableProperties_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? ProductTableProperties_arrayLikeToArray(r, a) : void 0; } }
function ProductTableProperties_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function ProductTableProperties_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function ProductTableProperties_arrayWithHoles(r) { if (Array.isArray(r)) return r; }


// Composant Accordion personnalisÃ©
var Accordion = function Accordion(_ref) {
  var title = _ref.title,
    children = _ref.children,
    _ref$defaultOpen = _ref.defaultOpen,
    defaultOpen = _ref$defaultOpen === void 0 ? false : _ref$defaultOpen;
  var _useState = (0,react.useState)(defaultOpen),
    _useState2 = ProductTableProperties_slicedToArray(_useState, 2),
    isOpen = _useState2[0],
    setIsOpen = _useState2[1];
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '16px',
      border: '1px solid #e9ecef',
      borderRadius: '4px',
      overflow: 'hidden'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      onClick: function onClick() {
        return setIsOpen(!isOpen);
      },
      style: {
        padding: '12px',
        backgroundColor: '#f8f9fa',
        cursor: 'pointer',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        borderBottom: isOpen ? '1px solid #e9ecef' : 'none'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
        style: {
          margin: '0',
          fontSize: '13px',
          fontWeight: 'bold',
          color: '#495057'
        },
        children: title
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
        style: {
          fontSize: '12px',
          color: '#6c757d',
          transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)'
        },
        children: "\u25BC"
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        maxHeight: isOpen ? '1000px' : '0px',
        overflow: 'hidden',
        padding: isOpen ? '12px' : '0px 12px',
        backgroundColor: '#ffffff'
      },
      children: children
    })]
  });
};

// Composant Toggle personnalisÃ©
var Toggle = function Toggle(_ref2) {
  var checked = _ref2.checked,
    onChange = _ref2.onChange,
    label = _ref2.label,
    description = _ref2.description;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '12px'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '6px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
        style: {
          fontSize: '12px',
          fontWeight: 'bold',
          color: '#333',
          flex: 1
        },
        children: label
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        onClick: function onClick() {
          return onChange(!checked);
        },
        style: {
          position: 'relative',
          width: '44px',
          height: '24px',
          backgroundColor: checked ? '#007bff' : '#ccc',
          borderRadius: '12px',
          cursor: 'pointer',
          border: 'none'
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            position: 'absolute',
            top: '2px',
            left: checked ? '22px' : '2px',
            width: '20px',
            height: '20px',
            backgroundColor: 'white',
            borderRadius: '50%',
            boxShadow: '0 1px 3px rgba(0,0,0,0.2)'
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        fontSize: '11px',
        color: '#666',
        lineHeight: '1.4'
      },
      children: description
    })]
  });
};
function ProductTableProperties(_ref3) {
  var element = _ref3.element,
    _onChange = _ref3.onChange,
    activeTab = _ref3.activeTab,
    setActiveTab = _ref3.setActiveTab;
  var currentTab = activeTab[element.id] || 'fonctionnalites';
  var setCurrentTab = function setCurrentTab(tab) {
    setActiveTab(ProductTableProperties_objectSpread(ProductTableProperties_objectSpread({}, activeTab), {}, ProductTableProperties_defineProperty({}, element.id, tab)));
  };
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), currentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Structure du tableau"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Toggle, {
            checked: element.showHeaders !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showHeaders', checked);
            },
            label: "Afficher les en-t\xEAtes",
            description: "Affiche les noms des colonnes"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Toggle, {
            checked: element.showBorders !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showBorders', checked);
            },
            label: "Afficher les bordures",
            description: "Affiche les bordures du tableau"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Toggle, {
            checked: element.showAlternatingRows !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showAlternatingRows', checked);
            },
            label: "Lignes altern\xE9es",
            description: "Alterne les couleurs des lignes"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Colonnes produits"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Toggle, {
            checked: element.showSku !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showSku', checked);
            },
            label: "Afficher les SKU",
            description: "Colonne des r\xE9f\xE9rences produit"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Toggle, {
            checked: element.showDescription !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showDescription', checked);
            },
            label: "Afficher les descriptions",
            description: "Colonne des descriptions courtes"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Toggle, {
            checked: element.showQuantity !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showQuantity', checked);
            },
            label: "Afficher la quantit\xE9",
            description: "Colonne quantit\xE9 des produits"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "\xC9l\xE9ments de calcul"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Toggle, {
            checked: element.showShipping !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showShipping', checked);
            },
            label: "Afficher les frais de port",
            description: "Affiche les frais de livraison"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Toggle, {
            checked: element.showTax !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showTax', checked);
            },
            label: "Afficher la TVA",
            description: "Affiche les taxes sur le total"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(Toggle, {
            checked: element.showGlobalDiscount !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showGlobalDiscount', checked);
            },
            label: "Afficher la remise globale",
            description: "Affiche la remise globale appliqu\xE9e"
          })]
        })]
      })]
    }), currentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Accordion, {
        title: "Police globale du tableau",
        defaultOpen: true,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: 'flex',
            flexDirection: 'column',
            gap: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px',
                color: '#007bff'
              },
              children: "Taille"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              min: "8",
              max: "24",
              value: element.globalFontSize || 11,
              onChange: function onChange(e) {
                return _onChange(element.id, 'globalFontSize', parseInt(e.target.value) || 11);
              },
              style: {
                width: '100%',
                padding: '4px 6px',
                border: '1px solid #007bff',
                borderRadius: '3px',
                fontSize: '11px',
                backgroundColor: 'white'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px',
                color: '#007bff'
              },
              children: "Police"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.globalFontFamily || 'Arial',
              onChange: function onChange(e) {
                return _onChange(element.id, 'globalFontFamily', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 6px',
                border: '1px solid #007bff',
                borderRadius: '3px',
                fontSize: '11px',
                backgroundColor: 'white'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Arial",
                children: "Arial"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Helvetica",
                children: "Helvetica"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Times New Roman",
                children: "Times New Roman"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Georgia",
                children: "Georgia"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Verdana",
                children: "Verdana"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Tahoma",
                children: "Tahoma"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Trebuchet MS",
                children: "Trebuchet MS"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Calibri",
                children: "Calibri"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Cambria",
                children: "Cambria"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Segoe UI",
                children: "Segoe UI"
              })]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px',
                color: '#007bff'
              },
              children: "\xC9paisseur"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.globalFontWeight || 'normal',
              onChange: function onChange(e) {
                return _onChange(element.id, 'globalFontWeight', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 6px',
                border: '1px solid #007bff',
                borderRadius: '3px',
                fontSize: '11px',
                backgroundColor: 'white'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bold",
                children: "Gras"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "lighter",
                children: "Fin"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bolder",
                children: "Tr\xE8s gras"
              })]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px',
                color: '#007bff'
              },
              children: "Style"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.globalFontStyle || 'normal',
              onChange: function onChange(e) {
                return _onChange(element.id, 'globalFontStyle', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 6px',
                border: '1px solid #007bff',
                borderRadius: '3px',
                fontSize: '11px',
                backgroundColor: 'white'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "italic",
                children: "Italique"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "oblique",
                children: "Oblique"
              })]
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '10px',
            color: '#666',
            marginTop: '8px',
            textAlign: 'center',
            fontStyle: 'italic'
          },
          children: "Ces param\xE8tres s'appliquent \xE0 tout le tableau. Vous pouvez les personnaliser par zone ci-dessous."
        })]
      }), !element.globalFontEnabled && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(Accordion, {
          title: "Police de l'ent\xEAte",
          defaultOpen: false,
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Taille de police de l'ent\xEAte"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              min: "8",
              max: "24",
              value: element.headerFontSize || element.globalFontSize || 12,
              onChange: function onChange(e) {
                return _onChange(element.id, 'headerFontSize', parseInt(e.target.value) || 12);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontSize || 11, "px"]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Famille de police de l'ent\xEAte"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.headerFontFamily || element.globalFontFamily || 'Arial',
              onChange: function onChange(e) {
                return _onChange(element.id, 'headerFontFamily', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Arial",
                children: "Arial"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Helvetica",
                children: "Helvetica"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Times New Roman",
                children: "Times New Roman"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Georgia",
                children: "Georgia"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Verdana",
                children: "Verdana"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Tahoma",
                children: "Tahoma"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Trebuchet MS",
                children: "Trebuchet MS"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Calibri",
                children: "Calibri"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Cambria",
                children: "Cambria"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Segoe UI",
                children: "Segoe UI"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontFamily || 'Arial']
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "\xC9paisseur de police de l'ent\xEAte"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.headerFontWeight || element.globalFontWeight || 'bold',
              onChange: function onChange(e) {
                return _onChange(element.id, 'headerFontWeight', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal (400)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bold",
                children: "Gras (700)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "lighter",
                children: "Fin (300)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bolder",
                children: "Tr\xE8s gras (900)"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontWeight || 'normal']
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Style de police de l'ent\xEAte"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.headerFontStyle || element.globalFontStyle || 'normal',
              onChange: function onChange(e) {
                return _onChange(element.id, 'headerFontStyle', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "italic",
                children: "Italique"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "oblique",
                children: "Oblique"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontStyle || 'normal']
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Couleur du texte de l'ent\xEAte"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "color",
              value: element.headerTextColor || '#374151',
              onChange: function onChange(e) {
                return _onChange(element.id, 'headerTextColor', e.target.value);
              },
              style: {
                width: '100%',
                height: '32px',
                border: '1px solid #ccc',
                borderRadius: '3px'
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: "D\xE9faut: #374151"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Accordion, {
          title: "Police des lignes",
          defaultOpen: false,
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Taille de police des lignes"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              min: "8",
              max: "24",
              value: element.rowFontSize || element.globalFontSize || 11,
              onChange: function onChange(e) {
                return _onChange(element.id, 'rowFontSize', parseInt(e.target.value) || 11);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontSize || 11, "px"]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Famille de police des lignes"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.rowFontFamily || element.globalFontFamily || 'Arial',
              onChange: function onChange(e) {
                return _onChange(element.id, 'rowFontFamily', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Arial",
                children: "Arial"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Helvetica",
                children: "Helvetica"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Times New Roman",
                children: "Times New Roman"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Georgia",
                children: "Georgia"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Verdana",
                children: "Verdana"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Tahoma",
                children: "Tahoma"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Trebuchet MS",
                children: "Trebuchet MS"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Calibri",
                children: "Calibri"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Cambria",
                children: "Cambria"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Segoe UI",
                children: "Segoe UI"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontFamily || 'Arial']
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "\xC9paisseur de police des lignes"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.rowFontWeight || element.globalFontWeight || 'normal',
              onChange: function onChange(e) {
                return _onChange(element.id, 'rowFontWeight', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal (400)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bold",
                children: "Gras (700)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "lighter",
                children: "Fin (300)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bolder",
                children: "Tr\xE8s gras (900)"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontWeight || 'normal']
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Style de police des lignes"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.rowFontStyle || element.globalFontStyle || 'normal',
              onChange: function onChange(e) {
                return _onChange(element.id, 'rowFontStyle', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "italic",
                children: "Italique"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "oblique",
                children: "Oblique"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontStyle || 'normal']
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Couleur du texte des lignes"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "color",
              value: element.rowTextColor || '#111827',
              onChange: function onChange(e) {
                return _onChange(element.id, 'rowTextColor', e.target.value);
              },
              style: {
                width: '100%',
                height: '32px',
                border: '1px solid #ccc',
                borderRadius: '3px'
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: "D\xE9faut: #111827"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Accordion, {
          title: "Police des totaux",
          defaultOpen: false,
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Taille de police des totaux"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              min: "8",
              max: "24",
              value: element.totalFontSize || element.globalFontSize || 12,
              onChange: function onChange(e) {
                return _onChange(element.id, 'totalFontSize', parseInt(e.target.value) || 12);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontSize || 12, "px"]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Famille de police des totaux"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.totalFontFamily || element.globalFontFamily || 'Arial',
              onChange: function onChange(e) {
                return _onChange(element.id, 'totalFontFamily', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Arial",
                children: "Arial"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Helvetica",
                children: "Helvetica"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Times New Roman",
                children: "Times New Roman"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Georgia",
                children: "Georgia"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Verdana",
                children: "Verdana"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Tahoma",
                children: "Tahoma"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Trebuchet MS",
                children: "Trebuchet MS"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Calibri",
                children: "Calibri"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Cambria",
                children: "Cambria"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Segoe UI",
                children: "Segoe UI"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontFamily || 'Arial']
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "\xC9paisseur de police des totaux"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.totalFontWeight || element.globalFontWeight || 'bold',
              onChange: function onChange(e) {
                return _onChange(element.id, 'totalFontWeight', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal (400)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bold",
                children: "Gras (700)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "lighter",
                children: "Fin (300)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bolder",
                children: "Tr\xE8s gras (900)"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontWeight || 'bold']
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Style de police des totaux"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.totalFontStyle || element.globalFontStyle || 'normal',
              onChange: function onChange(e) {
                return _onChange(element.id, 'totalFontStyle', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "italic",
                children: "Italique"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "oblique",
                children: "Oblique"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: ["D\xE9faut: ", element.globalFontStyle || 'normal']
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Couleur du texte des totaux"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "color",
              value: element.totalTextColor || '#111827',
              onChange: function onChange(e) {
                return _onChange(element.id, 'totalTextColor', e.target.value);
              },
              style: {
                width: '100%',
                height: '32px',
                border: '1px solid #ccc',
                borderRadius: '3px'
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '2px'
              },
              children: "D\xE9faut: #111827"
            })]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '8px'
          },
          children: "Th\xE8mes pr\xE9d\xE9finis"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            display: 'flex',
            flexDirection: 'column',
            gap: '6px',
            maxHeight: '150px',
            overflowY: 'auto',
            padding: '4px',
            border: '1px solid #e0e0e0',
            borderRadius: '4px',
            backgroundColor: '#fafafa'
          },
          children: [{
            id: 'classic',
            name: 'Classique',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #e5e7eb',
                borderRadius: '2px',
                backgroundColor: '#ffffff',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '1px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '2px',
                  backgroundColor: '#f9fafb',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '2px',
                  backgroundColor: '#ffffff',
                  borderRadius: '1px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#ffffff',
              headerBackgroundColor: '#f9fafb',
              alternateRowColor: '#f9fafb',
              borderColor: '#e5e7eb',
              textColor: '#111827',
              headerTextColor: '#374151'
            }
          }, {
            id: 'modern',
            name: 'Moderne',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #cbd5e1',
                borderRadius: '4px',
                backgroundColor: '#f8fafc',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#3b82f6',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#ffffff',
                  borderRadius: '1px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#f8fafc',
              headerBackgroundColor: '#3b82f6',
              headerTextColor: '#ffffff',
              alternateRowColor: '#f1f5f9',
              borderColor: '#cbd5e1',
              textColor: '#334155'
            }
          }, {
            id: 'elegant',
            name: 'Ã‰lÃ©gant',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #c4b5fd',
                borderRadius: '6px',
                backgroundColor: '#fefefe',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#8b5cf6',
                  borderRadius: '2px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#faf5ff',
                  borderRadius: '2px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fefefe',
              headerBackgroundColor: '#8b5cf6',
              headerTextColor: '#ffffff',
              alternateRowColor: '#faf5ff',
              borderColor: '#c4b5fd',
              textColor: '#581c87'
            }
          }, {
            id: 'minimal',
            name: 'Minimal',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #f3f4f6',
                borderRadius: '0px',
                backgroundColor: '#ffffff',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '1px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '2px',
                  backgroundColor: '#f9fafb'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '2px',
                  backgroundColor: '#ffffff'
                }
              })]
            }),
            styles: {
              backgroundColor: '#ffffff',
              headerBackgroundColor: '#f9fafb',
              alternateRowColor: '#f9fafb',
              borderColor: '#f3f4f6',
              textColor: '#374151',
              headerTextColor: '#111827'
            }
          }, {
            id: 'corporate',
            name: 'Corporate',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #374151',
                borderRadius: '0px',
                backgroundColor: '#ffffff',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#1f2937'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#f9fafb'
                }
              })]
            }),
            styles: {
              backgroundColor: '#ffffff',
              headerBackgroundColor: '#1f2937',
              headerTextColor: '#ffffff',
              alternateRowColor: '#f9fafb',
              borderColor: '#374151',
              textColor: '#111827'
            }
          }, {
            id: 'warm',
            name: 'Chaud',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #fed7aa',
                borderRadius: '4px',
                backgroundColor: '#fff7ed',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#ea580c',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#ffedd5',
                  borderRadius: '1px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fff7ed',
              headerBackgroundColor: '#ea580c',
              headerTextColor: '#ffffff',
              alternateRowColor: '#ffedd5',
              borderColor: '#fed7aa',
              textColor: '#9a3412'
            }
          }, {
            id: 'nature',
            name: 'Nature',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #bbf7d0',
                borderRadius: '6px',
                backgroundColor: '#f0fdf4',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#16a34a',
                  borderRadius: '2px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#dcfce7',
                  borderRadius: '2px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#f0fdf4',
              headerBackgroundColor: '#16a34a',
              headerTextColor: '#ffffff',
              alternateRowColor: '#dcfce7',
              borderColor: '#bbf7d0',
              textColor: '#14532d'
            }
          }, {
            id: 'dark',
            name: 'Sombre',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #374151',
                borderRadius: '4px',
                backgroundColor: '#1f2937',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#111827',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#374151',
                  borderRadius: '1px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#1f2937',
              headerBackgroundColor: '#111827',
              headerTextColor: '#ffffff',
              alternateRowColor: '#374151',
              borderColor: '#4b5563',
              textColor: '#f9fafb'
            }
          }, {
            id: 'ocean',
            name: 'OcÃ©an',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #0ea5e9',
                borderRadius: '8px',
                backgroundColor: '#f0f9ff',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#0284c7',
                  borderRadius: '3px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#bae6fd',
                  borderRadius: '3px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#f0f9ff',
              headerBackgroundColor: '#0284c7',
              headerTextColor: '#ffffff',
              alternateRowColor: '#bae6fd',
              borderColor: '#0ea5e9',
              textColor: '#0c4a6e'
            }
          }, {
            id: 'sunset',
            name: 'Coucher',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #f97316',
                borderRadius: '12px',
                backgroundColor: '#fff7ed',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#ea580c',
                  borderRadius: '4px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#fed7aa',
                  borderRadius: '4px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fff7ed',
              headerBackgroundColor: '#ea580c',
              headerTextColor: '#ffffff',
              alternateRowColor: '#fed7aa',
              borderColor: '#f97316',
              textColor: '#9a3412'
            }
          }, {
            id: 'forest',
            name: 'ForÃªt',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #22c55e',
                borderRadius: '6px',
                backgroundColor: '#f0fdf4',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#16a34a',
                  borderRadius: '2px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#bbf7d0',
                  borderRadius: '2px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#f0fdf4',
              headerBackgroundColor: '#16a34a',
              headerTextColor: '#ffffff',
              alternateRowColor: '#bbf7d0',
              borderColor: '#22c55e',
              textColor: '#14532d'
            }
          }, {
            id: 'royal',
            name: 'Royal',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #7c2d12',
                borderRadius: '4px',
                backgroundColor: '#fef2f2',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#991b1b',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#fecaca',
                  borderRadius: '1px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fef2f2',
              headerBackgroundColor: '#991b1b',
              headerTextColor: '#ffffff',
              alternateRowColor: '#fecaca',
              borderColor: '#7c2d12',
              textColor: '#450a0a'
            }
          }, {
            id: 'clean',
            name: 'Propre',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #d1d5db',
                borderRadius: '2px',
                backgroundColor: '#ffffff',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '1px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '2px',
                  backgroundColor: '#f3f4f6'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '2px',
                  backgroundColor: '#ffffff'
                }
              })]
            }),
            styles: {
              backgroundColor: '#ffffff',
              headerBackgroundColor: '#f3f4f6',
              alternateRowColor: '#f9fafb',
              borderColor: '#d1d5db',
              textColor: '#374151',
              headerTextColor: '#111827'
            }
          }, {
            id: 'tech',
            name: 'Tech',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #6366f1',
                borderRadius: '0px',
                backgroundColor: '#f8fafc',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#4f46e5'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#e0e7ff'
                }
              })]
            }),
            styles: {
              backgroundColor: '#f8fafc',
              headerBackgroundColor: '#4f46e5',
              headerTextColor: '#ffffff',
              alternateRowColor: '#e0e7ff',
              borderColor: '#6366f1',
              textColor: '#312e81'
            }
          }, {
            id: 'vintage',
            name: 'Vintage',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '2px solid #92400e',
                borderRadius: '0px',
                backgroundColor: '#fef3c7',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#b45309',
                  borderRadius: '0px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#fde68a',
                  borderRadius: '0px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fef3c7',
              headerBackgroundColor: '#b45309',
              headerTextColor: '#ffffff',
              alternateRowColor: '#fde68a',
              borderColor: '#92400e',
              textColor: '#78350f'
            }
          }, {
            id: 'berry',
            name: 'Baies',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #be185d',
                borderRadius: '10px',
                backgroundColor: '#fdf2f8',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#db2777',
                  borderRadius: '5px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#fce7f3',
                  borderRadius: '5px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fdf2f8',
              headerBackgroundColor: '#db2777',
              headerTextColor: '#ffffff',
              alternateRowColor: '#fce7f3',
              borderColor: '#be185d',
              textColor: '#831843'
            }
          }, {
            id: 'mint',
            name: 'Menthe',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #059669',
                borderRadius: '8px',
                backgroundColor: '#ecfdf5',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#047857',
                  borderRadius: '4px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#a7f3d0',
                  borderRadius: '4px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#ecfdf5',
              headerBackgroundColor: '#047857',
              headerTextColor: '#ffffff',
              alternateRowColor: '#a7f3d0',
              borderColor: '#059669',
              textColor: '#064e3b'
            }
          }, {
            id: 'lavender',
            name: 'Lavande',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #7c3aed',
                borderRadius: '12px',
                backgroundColor: '#faf5ff',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#6d28d9',
                  borderRadius: '6px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#e9d5ff',
                  borderRadius: '6px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#faf5ff',
              headerBackgroundColor: '#6d28d9',
              headerTextColor: '#ffffff',
              alternateRowColor: '#e9d5ff',
              borderColor: '#7c3aed',
              textColor: '#581c87'
            }
          }, {
            id: 'stone',
            name: 'Pierre',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #6b7280',
                borderRadius: '0px',
                backgroundColor: '#f9fafb',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#4b5563'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#e5e7eb'
                }
              })]
            }),
            styles: {
              backgroundColor: '#f9fafb',
              headerBackgroundColor: '#4b5563',
              headerTextColor: '#ffffff',
              alternateRowColor: '#e5e7eb',
              borderColor: '#6b7280',
              textColor: '#111827'
            }
          }, {
            id: 'sunshine',
            name: 'Soleil',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '20px',
                border: '1px solid #f59e0b',
                borderRadius: '16px',
                backgroundColor: '#fffbeb',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '85%',
                  height: '3px',
                  backgroundColor: '#d97706',
                  borderRadius: '8px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '70%',
                  height: '3px',
                  backgroundColor: '#fef3c7',
                  borderRadius: '8px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fffbeb',
              headerBackgroundColor: '#d97706',
              headerTextColor: '#ffffff',
              alternateRowColor: '#fef3c7',
              borderColor: '#f59e0b',
              textColor: '#92400e'
            }
          }].map(function (theme) {
            return /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
              onClick: function onClick() {
                // Appliquer toutes les propriÃ©tÃ©s du thÃ¨me
                Object.entries(theme.styles).forEach(function (_ref4) {
                  var _ref5 = ProductTableProperties_slicedToArray(_ref4, 2),
                    property = _ref5[0],
                    value = _ref5[1];
                  _onChange(element.id, property, value);
                });
              },
              style: {
                padding: '6px',
                border: '2px solid transparent',
                borderRadius: '6px',
                backgroundColor: '#ffffff',
                cursor: 'pointer',
                textAlign: 'center',
                minHeight: '50px',
                display: 'flex',
                flexDirection: 'column',
                alignItems: 'center',
                gap: '4px'
              },
              onMouseEnter: function onMouseEnter(e) {
                e.currentTarget.style.borderColor = '#007bff';
              },
              onMouseLeave: function onMouseLeave(e) {
                e.currentTarget.style.borderColor = 'transparent';
              },
              title: "Appliquer le th\xE8me ".concat(theme.name),
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  fontSize: '10px',
                  fontWeight: 'bold',
                  color: '#333',
                  textAlign: 'center',
                  lineHeight: '1.2'
                },
                children: theme.name
              }), theme.preview]
            }, theme.id);
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("hr", {
        style: {
          margin: '16px 0',
          border: 'none',
          borderTop: '1px solid #ddd'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(Accordion, {
        title: "Couleurs",
        defaultOpen: false,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur de fond"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.backgroundColor || '#ffffff',
            onChange: function onChange(e) {
              return _onChange(element.id, 'backgroundColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Fond des en-t\xEAtes"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.headerBackgroundColor || '#f9fafb',
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerBackgroundColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur lignes altern\xE9es"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.alternateRowColor || '#f9fafb',
            onChange: function onChange(e) {
              return _onChange(element.id, 'alternateRowColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur des bordures"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.borderColor || '#e5e7eb',
            onChange: function onChange(e) {
              return _onChange(element.id, 'borderColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur du texte"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.textColor || '#111827',
            onChange: function onChange(e) {
              return _onChange(element.id, 'textColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        })]
      })]
    }), currentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: ["Position X ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", (element.x * 1).toFixed(1), "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          step: "0.1",
          value: element.x,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          placeholder: "Entrer la valeur en pixels"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("small", {
          style: {
            color: '#999',
            display: 'block',
            marginTop: '2px'
          },
          children: "Valeur en pixels"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: ["Position Y ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", (element.y * 1).toFixed(1), "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          step: "0.1",
          value: element.y,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          placeholder: "Entrer la valeur en pixels"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("small", {
          style: {
            color: '#999',
            display: 'block',
            marginTop: '2px'
          },
          children: "Valeur en pixels"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: ["Largeur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", (element.width * 1).toFixed(1), "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          step: "0.1",
          value: element.width,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseFloat(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          placeholder: "Entrer la valeur en pixels"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("small", {
          style: {
            color: '#999',
            display: 'block',
            marginTop: '2px'
          },
          children: "Valeur en pixels"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: ["Hauteur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", (element.height * 1).toFixed(1), "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          step: "0.1",
          value: element.height,
          onChange: function onChange(e) {
            return _onChange(element.id, 'height', parseFloat(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          placeholder: "Entrer la valeur en pixels"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("small", {
          style: {
            color: '#999',
            display: 'block',
            marginTop: '2px'
          },
          children: "Valeur en pixels"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Alignement horizontal"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.textAlign || 'left',
          onChange: function onChange(e) {
            return _onChange(element.id, 'textAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "left",
            children: "Gauche"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "center",
            children: "Centre"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "right",
            children: "Droite"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Alignement vertical"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.verticalAlign || 'top',
          onChange: function onChange(e) {
            return _onChange(element.id, 'verticalAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "top",
            children: "Haut"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "middle",
            children: "Milieu"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "bottom",
            children: "Bas"
          })]
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/CustomerInfoProperties.tsx
function CustomerInfoProperties_typeof(o) { "@babel/helpers - typeof"; return CustomerInfoProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, CustomerInfoProperties_typeof(o); }
function CustomerInfoProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function CustomerInfoProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? CustomerInfoProperties_ownKeys(Object(t), !0).forEach(function (r) { CustomerInfoProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : CustomerInfoProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function CustomerInfoProperties_defineProperty(e, r, t) { return (r = CustomerInfoProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function CustomerInfoProperties_toPropertyKey(t) { var i = CustomerInfoProperties_toPrimitive(t, "string"); return "symbol" == CustomerInfoProperties_typeof(i) ? i : i + ""; }
function CustomerInfoProperties_toPrimitive(t, r) { if ("object" != CustomerInfoProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != CustomerInfoProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function CustomerInfoProperties_slicedToArray(r, e) { return CustomerInfoProperties_arrayWithHoles(r) || CustomerInfoProperties_iterableToArrayLimit(r, e) || CustomerInfoProperties_unsupportedIterableToArray(r, e) || CustomerInfoProperties_nonIterableRest(); }
function CustomerInfoProperties_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function CustomerInfoProperties_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return CustomerInfoProperties_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? CustomerInfoProperties_arrayLikeToArray(r, a) : void 0; } }
function CustomerInfoProperties_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function CustomerInfoProperties_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function CustomerInfoProperties_arrayWithHoles(r) { if (Array.isArray(r)) return r; }


// Composant Accordion personnalisÃ©
var CustomerInfoProperties_Accordion = function Accordion(_ref) {
  var title = _ref.title,
    children = _ref.children,
    _ref$defaultOpen = _ref.defaultOpen,
    defaultOpen = _ref$defaultOpen === void 0 ? false : _ref$defaultOpen;
  var _useState = (0,react.useState)(defaultOpen),
    _useState2 = CustomerInfoProperties_slicedToArray(_useState, 2),
    isOpen = _useState2[0],
    setIsOpen = _useState2[1];
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '16px',
      border: '1px solid #e9ecef',
      borderRadius: '4px',
      overflow: 'hidden'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      onClick: function onClick() {
        return setIsOpen(!isOpen);
      },
      style: {
        padding: '12px',
        backgroundColor: '#f8f9fa',
        cursor: 'pointer',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        borderBottom: isOpen ? '1px solid #e9ecef' : 'none'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
        style: {
          margin: '0',
          fontSize: '13px',
          fontWeight: 'bold',
          color: '#495057'
        },
        children: title
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
        style: {
          fontSize: '12px',
          color: '#6c757d',
          transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)',
          transition: 'transform 0.2s ease'
        },
        children: "\u25BC"
      })]
    }), isOpen && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        padding: '12px',
        backgroundColor: '#ffffff'
      },
      children: children
    })]
  });
};

// Composant Toggle personnalisÃ©
var CustomerInfoProperties_Toggle = function Toggle(_ref2) {
  var checked = _ref2.checked,
    onChange = _ref2.onChange,
    label = _ref2.label,
    description = _ref2.description;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '12px'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '6px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
        style: {
          fontSize: '12px',
          fontWeight: 'bold',
          color: '#333',
          flex: 1
        },
        children: label
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        onClick: function onClick() {
          return onChange(!checked);
        },
        style: {
          position: 'relative',
          width: '44px',
          height: '24px',
          backgroundColor: checked ? '#007bff' : '#ccc',
          borderRadius: '12px',
          cursor: 'pointer',
          transition: 'background-color 0.2s ease',
          border: 'none'
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            position: 'absolute',
            top: '2px',
            left: checked ? '22px' : '2px',
            width: '20px',
            height: '20px',
            backgroundColor: 'white',
            borderRadius: '50%',
            transition: 'left 0.2s ease',
            boxShadow: '0 1px 3px rgba(0,0,0,0.2)'
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        fontSize: '11px',
        color: '#666',
        lineHeight: '1.4'
      },
      children: description
    })]
  });
};
function CustomerInfoProperties(_ref3) {
  var element = _ref3.element,
    _onChange = _ref3.onChange,
    activeTab = _ref3.activeTab,
    setActiveTab = _ref3.setActiveTab;
  var customerCurrentTab = activeTab[element.id] || 'fonctionnalites';
  var setCustomerCurrentTab = function setCustomerCurrentTab(tab) {
    setActiveTab(CustomerInfoProperties_objectSpread(CustomerInfoProperties_objectSpread({}, activeTab), {}, CustomerInfoProperties_defineProperty({}, element.id, tab)));
  };
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCustomerCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: customerCurrentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: customerCurrentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCustomerCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: customerCurrentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: customerCurrentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCustomerCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: customerCurrentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: customerCurrentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), customerCurrentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Structure des informations"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Toggle, {
            checked: element.showHeaders !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showHeaders', checked);
            },
            label: "Afficher les en-t\xEAtes",
            description: "Affiche les titres des sections"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Toggle, {
            checked: element.showBackground !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showBackground', checked);
            },
            label: "Afficher le fond",
            description: "Affiche un fond color\xE9 derri\xE8re les informations"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Toggle, {
            checked: element.showBorders !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showBorders', checked);
            },
            label: "Afficher les bordures",
            description: "Affiche les bordures autour des sections"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Informations personnelles"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Toggle, {
            checked: element.showName !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showName', checked);
            },
            label: "Afficher le nom",
            description: "Nom du client"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Toggle, {
            checked: element.showFullName !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showFullName', checked);
            },
            label: "Afficher le nom complet",
            description: "Pr\xE9nom et nom du client"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Coordonn\xE9es"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Toggle, {
            checked: element.showAddress !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showAddress', checked);
            },
            label: "Afficher l'adresse",
            description: "Adresse compl\xE8te du client"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Toggle, {
            checked: element.showEmail !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showEmail', checked);
            },
            label: "Afficher l'email",
            description: "Adresse email du client"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Toggle, {
            checked: element.showPhone !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showPhone', checked);
            },
            label: "Afficher le t\xE9l\xE9phone",
            description: "Num\xE9ro de t\xE9l\xE9phone du client"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Informations de paiement"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Toggle, {
            checked: element.showPaymentMethod !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showPaymentMethod', checked);
            },
            label: "Afficher le moyen de paiement",
            description: "M\xE9thode de paiement utilis\xE9e"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Toggle, {
            checked: element.showTransactionId !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showTransactionId', checked);
            },
            label: "Afficher l'ID de transaction",
            description: "Identifiant unique de la transaction"
          })]
        })]
      })]
    }), customerCurrentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Accordion, {
        title: "Disposition",
        defaultOpen: true,
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '0'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Type de disposition"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.layout || 'vertical',
            onChange: function onChange(e) {
              return _onChange(element.id, 'layout', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "vertical",
              children: "Verticale"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "horizontal",
              children: "Horizontale"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "compact",
              children: "Compacte"
            })]
          })]
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)(CustomerInfoProperties_Accordion, {
        title: "Th\xE8mes pr\xE9d\xE9finis",
        defaultOpen: false,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            display: 'grid',
            gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',
            gap: '8px',
            maxHeight: '200px',
            overflowY: 'auto',
            padding: '4px',
            border: '1px solid #e0e0e0',
            borderRadius: '4px',
            backgroundColor: '#fafafa'
          },
          children: [{
            id: 'clean',
            name: 'Propre',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: '1px solid #f3f4f6',
                borderRadius: '4px',
                backgroundColor: '#ffffff',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '1px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '2px',
                  backgroundColor: '#f9fafb'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '2px',
                  backgroundColor: '#ffffff'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '2px',
                  backgroundColor: '#f9fafb'
                }
              })]
            }),
            styles: {
              backgroundColor: '#ffffff',
              borderColor: '#f3f4f6',
              textColor: '#374151',
              headerTextColor: '#111827'
            }
          }, {
            id: 'subtle',
            name: 'Discret',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: '1px solid #f1f5f9',
                borderRadius: '6px',
                backgroundColor: '#fafbfc',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '3px',
                  backgroundColor: '#e2e8f0',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '3px',
                  backgroundColor: '#fafbfc',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '3px',
                  backgroundColor: '#e2e8f0',
                  borderRadius: '1px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fafbfc',
              borderColor: '#f1f5f9',
              textColor: '#475569',
              headerTextColor: '#334155'
            }
          }, {
            id: 'elegant',
            name: 'Ã‰lÃ©gant',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: '2px solid #f3e8ff',
                borderRadius: '8px',
                backgroundColor: '#fefefe',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '3px',
                  backgroundColor: '#f3e8ff',
                  borderRadius: '2px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '3px',
                  backgroundColor: '#fefefe',
                  borderRadius: '2px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '3px',
                  backgroundColor: '#f3e8ff',
                  borderRadius: '2px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fefefe',
              borderColor: '#f3e8ff',
              textColor: '#6b21a8',
              headerTextColor: '#581c87'
            }
          }, {
            id: 'corporate',
            name: 'Corporate',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: '1px solid #e5e7eb',
                borderRadius: '0px',
                backgroundColor: '#ffffff',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '3px',
                  backgroundColor: '#f3f4f6'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '3px',
                  backgroundColor: '#ffffff'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '3px',
                  backgroundColor: '#f3f4f6'
                }
              })]
            }),
            styles: {
              backgroundColor: '#ffffff',
              borderColor: '#e5e7eb',
              textColor: '#374151',
              headerTextColor: '#111827'
            }
          }, {
            id: 'warm',
            name: 'Chaleureux',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: '1px solid #fed7aa',
                borderRadius: '6px',
                backgroundColor: '#fff8f0',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '3px',
                  backgroundColor: '#fed7aa',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '3px',
                  backgroundColor: '#fff8f0',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '3px',
                  backgroundColor: '#fed7aa',
                  borderRadius: '1px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fff8f0',
              borderColor: '#fed7aa',
              textColor: '#9a3412',
              headerTextColor: '#78350f'
            }
          }, {
            id: 'minimal',
            name: 'Minimal',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: 'none',
                borderRadius: '0px',
                backgroundColor: 'transparent',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '1px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '1px',
                  backgroundColor: '#e5e7eb'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '1px',
                  backgroundColor: 'transparent'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '1px',
                  backgroundColor: '#e5e7eb'
                }
              })]
            }),
            styles: {
              backgroundColor: 'transparent',
              borderColor: 'transparent',
              textColor: '#6b7280',
              headerTextColor: '#374151'
            }
          }].map(function (theme) {
            return /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
              onClick: function onClick() {
                // Appliquer toutes les propriÃ©tÃ©s du thÃ¨me
                Object.entries(theme.styles).forEach(function (_ref4) {
                  var _ref5 = CustomerInfoProperties_slicedToArray(_ref4, 2),
                    property = _ref5[0],
                    value = _ref5[1];
                  _onChange(element.id, property, value);
                });
              },
              style: {
                padding: '6px',
                border: '2px solid transparent',
                borderRadius: '6px',
                backgroundColor: '#ffffff',
                cursor: 'pointer',
                textAlign: 'center',
                transition: 'all 0.2s ease',
                minHeight: '70px',
                display: 'flex',
                flexDirection: 'column',
                alignItems: 'center',
                gap: '4px'
              },
              onMouseEnter: function onMouseEnter(e) {
                e.currentTarget.style.borderColor = '#007bff';
                e.currentTarget.style.backgroundColor = '#f8f9fa';
                e.currentTarget.style.transform = 'translateY(-1px)';
              },
              onMouseLeave: function onMouseLeave(e) {
                e.currentTarget.style.borderColor = 'transparent';
                e.currentTarget.style.backgroundColor = '#ffffff';
                e.currentTarget.style.transform = 'translateY(0)';
              },
              title: "Appliquer le th\xE8me ".concat(theme.name),
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  fontSize: '10px',
                  fontWeight: 'bold',
                  color: '#333',
                  textAlign: 'center',
                  lineHeight: '1.2'
                },
                children: theme.name
              }), theme.preview]
            }, theme.id);
          })
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("hr", {
        style: {
          margin: '16px 0',
          border: 'none',
          borderTop: '1px solid #ddd'
        }
      }), element.showHeaders !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)(CustomerInfoProperties_Accordion, {
        title: "Police de l'en-t\xEAte",
        defaultOpen: false,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Taille de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "number",
            min: "8",
            max: "32",
            value: element.headerFontSize || (element.fontSize || 12) + 2,
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerFontSize', parseInt(e.target.value) || 14);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Famille de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.headerFontFamily || element.fontFamily || 'Arial',
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerFontFamily', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Arial",
              children: "Arial"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Helvetica",
              children: "Helvetica"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Times New Roman",
              children: "Times New Roman"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Georgia",
              children: "Georgia"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Verdana",
              children: "Verdana"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Tahoma",
              children: "Tahoma"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Trebuchet MS",
              children: "Trebuchet MS"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Calibri",
              children: "Calibri"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Cambria",
              children: "Cambria"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Segoe UI",
              children: "Segoe UI"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "\xC9paisseur de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.headerFontWeight || element.fontWeight || 'normal',
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerFontWeight', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal (400)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bold",
              children: "Gras (700)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "lighter",
              children: "Fin (300)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bolder",
              children: "Tr\xE8s gras (900)"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Style de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.headerFontStyle || element.fontStyle || 'normal',
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerFontStyle', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "italic",
              children: "Italique"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "oblique",
              children: "Oblique"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '0'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.headerTextColor || element.textColor || '#111827',
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerTextColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(CustomerInfoProperties_Accordion, {
        title: "Police du corps du texte",
        defaultOpen: false,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Taille de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "number",
            min: "8",
            max: "24",
            value: element.bodyFontSize || element.fontSize || 12,
            onChange: function onChange(e) {
              return _onChange(element.id, 'bodyFontSize', parseInt(e.target.value) || 12);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Famille de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.bodyFontFamily || element.fontFamily || 'Arial',
            onChange: function onChange(e) {
              return _onChange(element.id, 'bodyFontFamily', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Arial",
              children: "Arial"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Helvetica",
              children: "Helvetica"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Times New Roman",
              children: "Times New Roman"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Georgia",
              children: "Georgia"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Verdana",
              children: "Verdana"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Tahoma",
              children: "Tahoma"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Trebuchet MS",
              children: "Trebuchet MS"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Calibri",
              children: "Calibri"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Cambria",
              children: "Cambria"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Segoe UI",
              children: "Segoe UI"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "\xC9paisseur de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.bodyFontWeight || element.fontWeight || 'normal',
            onChange: function onChange(e) {
              return _onChange(element.id, 'bodyFontWeight', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal (400)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bold",
              children: "Gras (700)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "lighter",
              children: "Fin (300)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bolder",
              children: "Tr\xE8s gras (900)"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Style de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.bodyFontStyle || element.fontStyle || 'normal',
            onChange: function onChange(e) {
              return _onChange(element.id, 'bodyFontStyle', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "italic",
              children: "Italique"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "oblique",
              children: "Oblique"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '0'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.textColor || '#374151',
            onChange: function onChange(e) {
              return _onChange(element.id, 'textColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(CustomerInfoProperties_Accordion, {
        title: "Couleurs",
        defaultOpen: false,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur du texte d'en-t\xEAte"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.headerTextColor || element.textColor || '#111827',
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerTextColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur du texte du corps"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.textColor || '#374151',
            onChange: function onChange(e) {
              return _onChange(element.id, 'textColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), element.showBackground !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur de fond"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.backgroundColor === 'transparent' ? '#ffffff' : element.backgroundColor || '#ffffff',
            onChange: function onChange(e) {
              return _onChange(element.id, 'backgroundColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '0'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur des bordures"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.borderColor || '#e5e7eb',
            onChange: function onChange(e) {
              return _onChange(element.id, 'borderColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        })]
      })]
    }), customerCurrentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Position X"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.x,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Position Y"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.y,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Largeur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.width,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseInt(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Hauteur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.height,
          onChange: function onChange(e) {
            return _onChange(element.id, 'height', parseInt(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Alignement horizontal"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.textAlign || 'left',
          onChange: function onChange(e) {
            return _onChange(element.id, 'textAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "left",
            children: "Gauche"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "center",
            children: "Centre"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "right",
            children: "Droite"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Alignement vertical"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.verticalAlign || 'top',
          onChange: function onChange(e) {
            return _onChange(element.id, 'verticalAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "top",
            children: "Haut"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "middle",
            children: "Milieu"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "bottom",
            children: "Bas"
          })]
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/CompanyInfoProperties.tsx
function CompanyInfoProperties_typeof(o) { "@babel/helpers - typeof"; return CompanyInfoProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, CompanyInfoProperties_typeof(o); }
function CompanyInfoProperties_slicedToArray(r, e) { return CompanyInfoProperties_arrayWithHoles(r) || CompanyInfoProperties_iterableToArrayLimit(r, e) || CompanyInfoProperties_unsupportedIterableToArray(r, e) || CompanyInfoProperties_nonIterableRest(); }
function CompanyInfoProperties_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function CompanyInfoProperties_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return CompanyInfoProperties_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? CompanyInfoProperties_arrayLikeToArray(r, a) : void 0; } }
function CompanyInfoProperties_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function CompanyInfoProperties_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function CompanyInfoProperties_arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function CompanyInfoProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function CompanyInfoProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? CompanyInfoProperties_ownKeys(Object(t), !0).forEach(function (r) { CompanyInfoProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : CompanyInfoProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function CompanyInfoProperties_defineProperty(e, r, t) { return (r = CompanyInfoProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function CompanyInfoProperties_toPropertyKey(t) { var i = CompanyInfoProperties_toPrimitive(t, "string"); return "symbol" == CompanyInfoProperties_typeof(i) ? i : i + ""; }
function CompanyInfoProperties_toPrimitive(t, r) { if ("object" != CompanyInfoProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != CompanyInfoProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


// Composant Toggle personnalisÃ©
var CompanyInfoProperties_Toggle = function Toggle(_ref) {
  var checked = _ref.checked,
    onChange = _ref.onChange,
    label = _ref.label,
    description = _ref.description;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '12px'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '6px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
        style: {
          fontSize: '12px',
          fontWeight: 'bold',
          color: '#333',
          flex: 1
        },
        children: label
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        onClick: function onClick() {
          return onChange(!checked);
        },
        style: {
          position: 'relative',
          width: '44px',
          height: '24px',
          backgroundColor: checked ? '#007bff' : '#ccc',
          borderRadius: '12px',
          cursor: 'pointer',
          transition: 'background-color 0.2s ease',
          border: 'none'
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            position: 'absolute',
            top: '2px',
            left: checked ? '22px' : '2px',
            width: '20px',
            height: '20px',
            backgroundColor: 'white',
            borderRadius: '50%',
            transition: 'left 0.2s ease',
            boxShadow: '0 1px 3px rgba(0,0,0,0.2)'
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        fontSize: '11px',
        color: '#666',
        lineHeight: '1.4'
      },
      children: description
    })]
  });
};
function CompanyInfoProperties(_ref2) {
  var element = _ref2.element,
    _onChange = _ref2.onChange,
    activeTab = _ref2.activeTab,
    setActiveTab = _ref2.setActiveTab;
  var companyCurrentTab = activeTab[element.id] || 'fonctionnalites';
  var setCompanyCurrentTab = function setCompanyCurrentTab(tab) {
    setActiveTab(CompanyInfoProperties_objectSpread(CompanyInfoProperties_objectSpread({}, activeTab), {}, CompanyInfoProperties_defineProperty({}, element.id, tab)));
  };

  // Ã‰tat pour les accordÃ©ons de police
  var _useState = (0,react.useState)({
      headerFont: false,
      // AccordÃ©on du nom de l'entreprise fermÃ© par dÃ©faut
      bodyFont: false,
      // AccordÃ©on des informations fermÃ© par dÃ©faut
      layout: true,
      // AccordÃ©on disposition ouvert par dÃ©faut
      themes: false,
      // AccordÃ©on thÃ¨mes fermÃ© par dÃ©faut
      colors: false // AccordÃ©on couleurs fermÃ© par dÃ©faut
    }),
    _useState2 = CompanyInfoProperties_slicedToArray(_useState, 2),
    fontAccordions = _useState2[0],
    setFontAccordions = _useState2[1];
  var toggleAccordion = function toggleAccordion(accordion) {
    setFontAccordions(function (prev) {
      return CompanyInfoProperties_objectSpread(CompanyInfoProperties_objectSpread({}, prev), {}, CompanyInfoProperties_defineProperty({}, accordion, !prev[accordion]));
    });
  };
  var companyThemes = [{
    id: 'corporate',
    name: 'Corporate',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #1f2937',
        borderRadius: '4px',
        backgroundColor: '#ffffff',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '3px',
          backgroundColor: '#1f2937'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '2px',
          backgroundColor: '#6b7280'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '2px',
          backgroundColor: '#9ca3af'
        }
      })]
    }),
    styles: {
      backgroundColor: '#ffffff',
      borderColor: '#1f2937',
      textColor: '#374151',
      headerTextColor: '#111827'
    }
  }, {
    id: 'modern',
    name: 'Moderne',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #3b82f6',
        borderRadius: '4px',
        backgroundColor: '#ffffff',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '3px',
          backgroundColor: '#3b82f6'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '2px',
          backgroundColor: '#60a5fa'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '2px',
          backgroundColor: '#93c5fd'
        }
      })]
    }),
    styles: {
      backgroundColor: '#ffffff',
      borderColor: '#3b82f6',
      textColor: '#1e40af',
      headerTextColor: '#1e3a8a'
    }
  }, {
    id: 'elegant',
    name: 'Ã‰lÃ©gant',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #8b5cf6',
        borderRadius: '4px',
        backgroundColor: '#ffffff',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '3px',
          backgroundColor: '#8b5cf6'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '2px',
          backgroundColor: '#a78bfa'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '2px',
          backgroundColor: '#c4b5fd'
        }
      })]
    }),
    styles: {
      backgroundColor: '#ffffff',
      borderColor: '#8b5cf6',
      textColor: '#6d28d9',
      headerTextColor: '#581c87'
    }
  }, {
    id: 'minimal',
    name: 'Minimal',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #e5e7eb',
        borderRadius: '4px',
        backgroundColor: '#ffffff',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '2px',
          backgroundColor: '#374151'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '2px',
          backgroundColor: '#6b7280'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '2px',
          backgroundColor: '#9ca3af'
        }
      })]
    }),
    styles: {
      backgroundColor: '#ffffff',
      borderColor: '#e5e7eb',
      textColor: '#374151',
      headerTextColor: '#111827'
    }
  }, {
    id: 'professional',
    name: 'Professionnel',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #059669',
        borderRadius: '4px',
        backgroundColor: '#ffffff',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '3px',
          backgroundColor: '#059669'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '2px',
          backgroundColor: '#10b981'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '2px',
          backgroundColor: '#34d399'
        }
      })]
    }),
    styles: {
      backgroundColor: '#ffffff',
      borderColor: '#059669',
      textColor: '#065f46',
      headerTextColor: '#064e3b'
    }
  }, {
    id: 'classic',
    name: 'Classique',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #92400e',
        borderRadius: '4px',
        backgroundColor: '#ffffff',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '3px',
          backgroundColor: '#92400e'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '2px',
          backgroundColor: '#d97706'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '2px',
          backgroundColor: '#f59e0b'
        }
      })]
    }),
    styles: {
      backgroundColor: '#ffffff',
      borderColor: '#92400e',
      textColor: '#78350f',
      headerTextColor: '#451a03'
    }
  }];
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCompanyCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: companyCurrentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: companyCurrentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCompanyCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: companyCurrentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: companyCurrentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCompanyCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: companyCurrentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: companyCurrentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), companyCurrentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Structure des informations"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(CompanyInfoProperties_Toggle, {
            checked: element.showBackground !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showBackground', checked);
            },
            label: "Afficher le fond",
            description: "Affiche un fond color\xE9 derri\xE8re les informations"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CompanyInfoProperties_Toggle, {
            checked: element.showBorders !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showBorders', checked);
            },
            label: "Afficher les bordures",
            description: "Affiche les bordures autour des sections"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Informations g\xE9n\xE9rales"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(CompanyInfoProperties_Toggle, {
            checked: element.showCompanyName !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showCompanyName', checked);
            },
            label: "Afficher le nom de l'entreprise",
            description: "Nom de l'entreprise"
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Coordonn\xE9es"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(CompanyInfoProperties_Toggle, {
            checked: element.showAddress !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showAddress', checked);
            },
            label: "Afficher l'adresse",
            description: "Adresse compl\xE8te de l'entreprise"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CompanyInfoProperties_Toggle, {
            checked: element.showPhone !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showPhone', checked);
            },
            label: "Afficher le t\xE9l\xE9phone",
            description: "Num\xE9ro de t\xE9l\xE9phone"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CompanyInfoProperties_Toggle, {
            checked: element.showEmail !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showEmail', checked);
            },
            label: "Afficher l'email",
            description: "Adresse email de l'entreprise"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Informations l\xE9gales"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(CompanyInfoProperties_Toggle, {
            checked: element.showSiret !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showSiret', checked);
            },
            label: "Afficher le num\xE9ro SIRET",
            description: "Num\xE9ro SIRET de l'entreprise"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CompanyInfoProperties_Toggle, {
            checked: element.showVat !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showVat', checked);
            },
            label: "Afficher le num\xE9ro TVA",
            description: "Num\xE9ro TVA de l'entreprise"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CompanyInfoProperties_Toggle, {
            checked: element.showRcs !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showRcs', checked);
            },
            label: "Afficher le RCS",
            description: "Registre du Commerce et des Soci\xE9t\xE9s"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(CompanyInfoProperties_Toggle, {
            checked: element.showCapital !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showCapital', checked);
            },
            label: "Afficher le capital social",
            description: "Montant du capital social de l'entreprise"
          })]
        })]
      })]
    }), companyCurrentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px',
          border: '1px solid #e9ecef',
          borderRadius: '4px',
          overflow: 'hidden'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          onClick: function onClick() {
            return setFontAccordions(function (prev) {
              return CompanyInfoProperties_objectSpread(CompanyInfoProperties_objectSpread({}, prev), {}, {
                layout: !prev.layout
              });
            });
          },
          style: {
            padding: '12px',
            backgroundColor: '#f8f9fa',
            cursor: 'pointer',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            borderBottom: fontAccordions.layout ? '1px solid #e9ecef' : 'none'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
            style: {
              margin: '0',
              fontSize: '13px',
              fontWeight: 'bold',
              color: '#495057'
            },
            children: "Disposition"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            style: {
              fontSize: '12px',
              color: '#6c757d',
              transform: fontAccordions.layout ? 'rotate(180deg)' : 'rotate(0deg)',
              transition: 'transform 0.2s ease'
            },
            children: "\u25BC"
          })]
        }), fontAccordions.layout && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            padding: '12px',
            backgroundColor: '#ffffff'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Type de disposition"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.layout || 'vertical',
              onChange: function onChange(e) {
                return _onChange(element.id, 'layout', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "vertical",
                children: "Verticale"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "horizontal",
                children: "Horizontale"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "compact",
                children: "Compacte"
              })]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '0'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Alignement du texte"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.textAlign || 'left',
              onChange: function onChange(e) {
                return _onChange(element.id, 'textAlign', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "left",
                children: "Gauche"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "center",
                children: "Centre"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "right",
                children: "Droite"
              })]
            })]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px',
          border: '1px solid #e9ecef',
          borderRadius: '4px',
          overflow: 'hidden'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          onClick: function onClick() {
            return setFontAccordions(function (prev) {
              return CompanyInfoProperties_objectSpread(CompanyInfoProperties_objectSpread({}, prev), {}, {
                themes: !prev.themes
              });
            });
          },
          style: {
            padding: '12px',
            backgroundColor: '#f8f9fa',
            cursor: 'pointer',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            borderBottom: fontAccordions.themes ? '1px solid #e9ecef' : 'none'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
            style: {
              margin: '0',
              fontSize: '13px',
              fontWeight: 'bold',
              color: '#495057'
            },
            children: "Th\xE8mes pr\xE9d\xE9finis"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            style: {
              fontSize: '12px',
              color: '#6c757d',
              transform: fontAccordions.themes ? 'rotate(180deg)' : 'rotate(0deg)',
              transition: 'transform 0.2s ease'
            },
            children: "\u25BC"
          })]
        }), fontAccordions.themes && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            padding: '12px',
            backgroundColor: '#ffffff'
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              display: 'grid',
              gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',
              gap: '8px',
              maxHeight: '200px',
              overflowY: 'auto',
              padding: '4px',
              border: '1px solid #e0e0e0',
              borderRadius: '4px',
              backgroundColor: '#fafafa'
            },
            children: companyThemes.map(function (theme) {
              return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                onClick: function onClick() {
                  return _onChange(element.id, 'theme', theme.id);
                },
                style: {
                  cursor: 'pointer',
                  border: element.theme === theme.id ? '2px solid #007bff' : '2px solid transparent',
                  borderRadius: '6px',
                  padding: '6px',
                  backgroundColor: '#ffffff',
                  transition: 'all 0.2s ease'
                },
                title: theme.name,
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontSize: '10px',
                    fontWeight: 'bold',
                    marginBottom: '4px',
                    textAlign: 'center'
                  },
                  children: theme.name
                }), theme.preview]
              }, theme.id);
            })
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("hr", {
        style: {
          margin: '16px 0',
          border: 'none',
          borderTop: '1px solid #ddd'
        }
      }), element.showCompanyName !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px',
          border: '1px solid #e9ecef',
          borderRadius: '4px',
          overflow: 'hidden'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          onClick: function onClick() {
            return toggleAccordion('headerFont');
          },
          style: {
            padding: '12px',
            backgroundColor: '#f8f9fa',
            cursor: 'pointer',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            borderBottom: fontAccordions.headerFont ? '1px solid #e9ecef' : 'none'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
            style: {
              margin: '0',
              fontSize: '13px',
              fontWeight: 'bold',
              color: '#495057'
            },
            children: "Police du nom de l'entreprise"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            style: {
              fontSize: '12px',
              color: '#6c757d',
              transform: fontAccordions.headerFont ? 'rotate(180deg)' : 'rotate(0deg)',
              transition: 'transform 0.2s ease'
            },
            children: "\u25BC"
          })]
        }), fontAccordions.headerFont && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            padding: '12px',
            backgroundColor: '#ffffff'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Taille de police"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              min: "10",
              max: "32",
              value: element.headerFontSize || Math.round((element.fontSize || 12) * 1.2),
              onChange: function onChange(e) {
                return _onChange(element.id, 'headerFontSize', parseInt(e.target.value) || 14);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Famille de police"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.headerFontFamily || element.fontFamily || 'Arial',
              onChange: function onChange(e) {
                return _onChange(element.id, 'headerFontFamily', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Arial",
                children: "Arial"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Helvetica",
                children: "Helvetica"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Times New Roman",
                children: "Times New Roman"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Georgia",
                children: "Georgia"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Verdana",
                children: "Verdana"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Tahoma",
                children: "Tahoma"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Trebuchet MS",
                children: "Trebuchet MS"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Calibri",
                children: "Calibri"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Cambria",
                children: "Cambria"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Segoe UI",
                children: "Segoe UI"
              })]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "\xC9paisseur de police"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.headerFontWeight || 'bold',
              onChange: function onChange(e) {
                return _onChange(element.id, 'headerFontWeight', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal (400)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bold",
                children: "Gras (700)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "lighter",
                children: "Fin (300)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bolder",
                children: "Tr\xE8s gras (900)"
              })]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '0'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Style de police"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.headerFontStyle || element.fontStyle || 'normal',
              onChange: function onChange(e) {
                return _onChange(element.id, 'headerFontStyle', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "italic",
                children: "Italique"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "oblique",
                children: "Oblique"
              })]
            })]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px',
          border: '1px solid #e9ecef',
          borderRadius: '4px',
          overflow: 'hidden'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          onClick: function onClick() {
            return toggleAccordion('bodyFont');
          },
          style: {
            padding: '12px',
            backgroundColor: '#f8f9fa',
            cursor: 'pointer',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            borderBottom: fontAccordions.bodyFont ? '1px solid #e9ecef' : 'none'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
            style: {
              margin: '0',
              fontSize: '13px',
              fontWeight: 'bold',
              color: '#495057'
            },
            children: "Police des informations"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            style: {
              fontSize: '12px',
              color: '#6c757d',
              transform: fontAccordions.bodyFont ? 'rotate(180deg)' : 'rotate(0deg)',
              transition: 'transform 0.2s ease'
            },
            children: "\u25BC"
          })]
        }), fontAccordions.bodyFont && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            padding: '12px',
            backgroundColor: '#ffffff'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Taille de police"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              min: "8",
              max: "24",
              value: element.bodyFontSize || element.fontSize || 12,
              onChange: function onChange(e) {
                return _onChange(element.id, 'bodyFontSize', parseInt(e.target.value) || 12);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Famille de police"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.bodyFontFamily || element.fontFamily || 'Arial',
              onChange: function onChange(e) {
                return _onChange(element.id, 'bodyFontFamily', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Arial",
                children: "Arial"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Helvetica",
                children: "Helvetica"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Times New Roman",
                children: "Times New Roman"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Georgia",
                children: "Georgia"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Verdana",
                children: "Verdana"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Tahoma",
                children: "Tahoma"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Trebuchet MS",
                children: "Trebuchet MS"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Calibri",
                children: "Calibri"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Cambria",
                children: "Cambria"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "Segoe UI",
                children: "Segoe UI"
              })]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "\xC9paisseur de police"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.bodyFontWeight || element.fontWeight || 'normal',
              onChange: function onChange(e) {
                return _onChange(element.id, 'bodyFontWeight', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal (400)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bold",
                children: "Gras (700)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "lighter",
                children: "Fin (300)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "bolder",
                children: "Tr\xE8s gras (900)"
              })]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '0'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Style de police"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.bodyFontStyle || element.fontStyle || 'normal',
              onChange: function onChange(e) {
                return _onChange(element.id, 'bodyFontStyle', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "normal",
                children: "Normal"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "italic",
                children: "Italique"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "oblique",
                children: "Oblique"
              })]
            })]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px',
          border: '1px solid #e9ecef',
          borderRadius: '4px',
          overflow: 'hidden'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          onClick: function onClick() {
            return setFontAccordions(function (prev) {
              return CompanyInfoProperties_objectSpread(CompanyInfoProperties_objectSpread({}, prev), {}, {
                colors: !prev.colors
              });
            });
          },
          style: {
            padding: '12px',
            backgroundColor: '#f8f9fa',
            cursor: 'pointer',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            borderBottom: fontAccordions.colors ? '1px solid #e9ecef' : 'none'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
            style: {
              margin: '0',
              fontSize: '13px',
              fontWeight: 'bold',
              color: '#495057'
            },
            children: "Couleurs"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            style: {
              fontSize: '12px',
              color: '#6c757d',
              transform: fontAccordions.colors ? 'rotate(180deg)' : 'rotate(0deg)',
              transition: 'transform 0.2s ease'
            },
            children: "\u25BC"
          })]
        }), fontAccordions.colors && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            padding: '12px',
            backgroundColor: '#ffffff'
          },
          children: [element.showBackground !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Couleur de fond"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "color",
              value: element.backgroundColor === 'transparent' ? '#ffffff' : element.backgroundColor || '#ffffff',
              onChange: function onChange(e) {
                return _onChange(element.id, 'backgroundColor', e.target.value);
              },
              style: {
                width: '100%',
                height: '32px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                cursor: 'pointer'
              }
            })]
          }), element.showBorders !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Couleur des bordures"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "color",
              value: element.borderColor === 'transparent' ? '#e5e7eb' : element.borderColor || '#e5e7eb',
              onChange: function onChange(e) {
                return _onChange(element.id, 'borderColor', e.target.value);
              },
              style: {
                width: '100%',
                height: '32px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                cursor: 'pointer'
              }
            })]
          }), element.showBorders !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "\xC9paisseur de la bordure"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: String(element.borderWidth || '1'),
              onChange: function onChange(e) {
                return _onChange(element.id, 'borderWidth', e.target.value);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "0.5",
                children: "Fin (0.5px)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "1",
                children: "Normal (1px)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "1.5",
                children: "Moyen (1.5px)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "2",
                children: "\xC9pais (2px)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "3",
                children: "Tr\xE8s \xE9pais (3px)"
              })]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Couleur du texte d'en-t\xEAte"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "color",
              value: element.headerTextColor || element.textColor || '#111827',
              onChange: function onChange(e) {
                return _onChange(element.id, 'headerTextColor', e.target.value);
              },
              style: {
                width: '100%',
                height: '32px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                cursor: 'pointer'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '8px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Couleur du texte du corps"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "color",
              value: element.textColor || '#374151',
              onChange: function onChange(e) {
                return _onChange(element.id, 'textColor', e.target.value);
              },
              style: {
                width: '100%',
                height: '32px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                cursor: 'pointer'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '0'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '11px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Couleur du texte"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "color",
              value: element.textColor || '#000000',
              onChange: function onChange(e) {
                return _onChange(element.id, 'textColor', e.target.value);
              },
              style: {
                width: '100%',
                height: '32px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                cursor: 'pointer'
              }
            })]
          })]
        })]
      })]
    }), companyCurrentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Position X"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.x || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Position Y"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.y || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Largeur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.width || 200,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseInt(e.target.value) || 200);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Hauteur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.height || 100,
          onChange: function onChange(e) {
            return _onChange(element.id, 'height', parseInt(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/CompanyLogoProperties.tsx
function CompanyLogoProperties_typeof(o) { "@babel/helpers - typeof"; return CompanyLogoProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, CompanyLogoProperties_typeof(o); }

function CompanyLogoProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function CompanyLogoProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? CompanyLogoProperties_ownKeys(Object(t), !0).forEach(function (r) { CompanyLogoProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : CompanyLogoProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function CompanyLogoProperties_defineProperty(e, r, t) { return (r = CompanyLogoProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function CompanyLogoProperties_toPropertyKey(t) { var i = CompanyLogoProperties_toPrimitive(t, "string"); return "symbol" == CompanyLogoProperties_typeof(i) ? i : i + ""; }
function CompanyLogoProperties_toPrimitive(t, r) { if ("object" != CompanyLogoProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != CompanyLogoProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// DÃ©claration des types WordPress pour TypeScript

function CompanyLogoProperties(_ref) {
  var element = _ref.element,
    _onChange = _ref.onChange,
    activeTab = _ref.activeTab,
    setActiveTab = _ref.setActiveTab;
  var logoCurrentTab = activeTab[element.id] || 'fonctionnalites';
  var setLogoCurrentTab = function setLogoCurrentTab(tab) {
    setActiveTab(CompanyLogoProperties_objectSpread(CompanyLogoProperties_objectSpread({}, activeTab), {}, CompanyLogoProperties_defineProperty({}, element.id, tab)));
  };
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setLogoCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: logoCurrentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: logoCurrentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setLogoCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: logoCurrentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: logoCurrentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setLogoCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: logoCurrentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: logoCurrentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), logoCurrentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "URL du logo"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: 'flex',
            gap: '6px',
            alignItems: 'center'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "text",
            value: element.src || '',
            onChange: function onChange(e) {
              return _onChange(element.id, 'src', e.target.value);
            },
            placeholder: "https://exemple.com/logo.png",
            style: {
              flex: 1,
              padding: '6px',
              border: '1px solid #ccc',
              borderRadius: '4px',
              fontSize: '12px'
            }
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              var _window$wp;
              // Ouvrir la bibliothÃ¨que de mÃ©dias WordPress
              if (!((_window$wp = window.wp) !== null && _window$wp !== void 0 && _window$wp.media) || typeof window.wp.media !== 'function') {
                var errorMsg = 'BibliothÃ¨que de mÃ©dias WordPress non disponible (wp_enqueue_media non appelÃ© ?)';
                alert(errorMsg + '\n\nSaisissez l\'URL manuellement.');
                return;
              }

              // eslint-disable-next-line @typescript-eslint/no-explicit-any
              var mediaUploader = window.wp.media({
                title: 'SÃ©lectionner un logo',
                button: {
                  text: 'Utiliser ce logo'
                },
                multiple: false,
                library: {
                  type: 'image'
                }
              });

              // eslint-disable-next-line @typescript-eslint/no-explicit-any
              mediaUploader.on('select', function () {
                // eslint-disable-next-line @typescript-eslint/no-explicit-any
                var attachment = mediaUploader.state().get('selection').first().toJSON();
                if (!attachment || !attachment.url) {
                  alert('Erreur: L\'image sÃ©lectionnÃ©e n\'a pas d\'URL valide');
                  return;
                }

                // Mettre Ã  jour l'URL
                _onChange(element.id, 'src', attachment.url);

                // Optionnellement, mettre Ã  jour les dimensions si elles sont par dÃ©faut
                if (!element.width || element.width === 150) {
                  _onChange(element.id, 'width', attachment.width || 150);
                }
                if (!element.height || element.height === 80) {
                  _onChange(element.id, 'height', attachment.height || 80);
                }
              });
              mediaUploader.open();
            },
            style: {
              padding: '6px 12px',
              backgroundColor: '#007bff',
              color: '#fff',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
              fontSize: '11px',
              fontWeight: 'bold',
              whiteSpace: 'nowrap'
            },
            title: "S\xE9lectionner depuis la biblioth\xE8que WordPress",
            children: "\uD83D\uDCC1 Choisir"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Texte alternatif"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "text",
          value: element.altText || '',
          onChange: function onChange(e) {
            return _onChange(element.id, 'altText', e.target.value);
          },
          placeholder: "Logo de l'entreprise",
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Maintenir les proportions"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "checkbox",
          checked: element.maintainAspectRatio !== false,
          onChange: function onChange(e) {
            return _onChange(element.id, 'maintainAspectRatio', e.target.checked);
          },
          style: {
            marginRight: '8px'
          }
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          style: {
            fontSize: '11px',
            color: '#666'
          },
          children: "Pr\xE9serve le ratio largeur/hauteur"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Afficher une bordure"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "checkbox",
          checked: element.showBorder !== false,
          onChange: function onChange(e) {
            return _onChange(element.id, 'showBorder', e.target.checked);
          },
          style: {
            marginRight: '8px'
          }
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          style: {
            fontSize: '11px',
            color: '#666'
          },
          children: "Affiche une bordure autour du logo"
        })]
      })]
    }), logoCurrentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Mode d'ajustement"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.objectFit || 'contain',
          onChange: function onChange(e) {
            return _onChange(element.id, 'objectFit', e.target.value);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "contain",
            children: "Contenir (respecte les proportions)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "cover",
            children: "Couvrir (remplit compl\xE8tement)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "fill",
            children: "Remplir (\xE9tire si n\xE9cessaire)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "none",
            children: "Aucun (taille originale)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "scale-down",
            children: "R\xE9duire (taille originale ou contenir)"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Opacit\xE9"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "range",
          min: "0",
          max: "1",
          step: "0.1",
          value: element.opacity || 1,
          onChange: function onChange(e) {
            return _onChange(element.id, 'opacity', parseFloat(e.target.value));
          },
          style: {
            width: '100%',
            marginTop: '4px'
          }
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '11px',
            color: '#666',
            textAlign: 'center',
            marginTop: '2px'
          },
          children: element.opacity || 1
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Rayon des coins"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "0",
          max: "50",
          value: element.borderRadius || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'borderRadius', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Rotation"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "-180",
          max: "180",
          value: element.rotation || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'rotation', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '11px',
            color: '#666',
            marginTop: '2px'
          },
          children: "Degr\xE9s"
        })]
      })]
    }), logoCurrentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Position X"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.x || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Position Y"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.y || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Largeur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.width || 100,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseInt(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Hauteur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.height || 100,
          onChange: function onChange(e) {
            return _onChange(element.id, 'height', parseInt(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/OrderNumberProperties.tsx
function OrderNumberProperties_typeof(o) { "@babel/helpers - typeof"; return OrderNumberProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, OrderNumberProperties_typeof(o); }
function OrderNumberProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function OrderNumberProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? OrderNumberProperties_ownKeys(Object(t), !0).forEach(function (r) { OrderNumberProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : OrderNumberProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function OrderNumberProperties_defineProperty(e, r, t) { return (r = OrderNumberProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function OrderNumberProperties_toPropertyKey(t) { var i = OrderNumberProperties_toPrimitive(t, "string"); return "symbol" == OrderNumberProperties_typeof(i) ? i : i + ""; }
function OrderNumberProperties_toPrimitive(t, r) { if ("object" != OrderNumberProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != OrderNumberProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function OrderNumberProperties_slicedToArray(r, e) { return OrderNumberProperties_arrayWithHoles(r) || OrderNumberProperties_iterableToArrayLimit(r, e) || OrderNumberProperties_unsupportedIterableToArray(r, e) || OrderNumberProperties_nonIterableRest(); }
function OrderNumberProperties_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function OrderNumberProperties_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return OrderNumberProperties_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? OrderNumberProperties_arrayLikeToArray(r, a) : void 0; } }
function OrderNumberProperties_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function OrderNumberProperties_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function OrderNumberProperties_arrayWithHoles(r) { if (Array.isArray(r)) return r; }


// Composant Accordion personnalisÃ©
var OrderNumberProperties_Accordion = function Accordion(_ref) {
  var title = _ref.title,
    children = _ref.children,
    _ref$defaultOpen = _ref.defaultOpen,
    defaultOpen = _ref$defaultOpen === void 0 ? false : _ref$defaultOpen;
  var _useState = (0,react.useState)(defaultOpen),
    _useState2 = OrderNumberProperties_slicedToArray(_useState, 2),
    isOpen = _useState2[0],
    setIsOpen = _useState2[1];
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '16px',
      border: '1px solid #e9ecef',
      borderRadius: '4px',
      overflow: 'hidden'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      onClick: function onClick() {
        return setIsOpen(!isOpen);
      },
      style: {
        padding: '12px',
        backgroundColor: '#f8f9fa',
        cursor: 'pointer',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        borderBottom: isOpen ? '1px solid #e9ecef' : 'none'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
        style: {
          margin: '0',
          fontSize: '13px',
          fontWeight: 'bold',
          color: '#495057'
        },
        children: title
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
        style: {
          fontSize: '12px',
          color: '#6c757d',
          transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)',
          transition: 'transform 0.2s ease'
        },
        children: "\u25BC"
      })]
    }), isOpen && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        padding: '12px',
        backgroundColor: '#ffffff'
      },
      children: children
    })]
  });
};

// Composant Toggle personnalisÃ©
var OrderNumberProperties_Toggle = function Toggle(_ref2) {
  var checked = _ref2.checked,
    onChange = _ref2.onChange,
    label = _ref2.label,
    description = _ref2.description;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '12px'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '6px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
        style: {
          fontSize: '12px',
          fontWeight: 'bold',
          color: '#333',
          flex: 1
        },
        children: label
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        onClick: function onClick() {
          return onChange(!checked);
        },
        style: {
          position: 'relative',
          width: '44px',
          height: '24px',
          backgroundColor: checked ? '#007bff' : '#ccc',
          borderRadius: '12px',
          cursor: 'pointer',
          transition: 'background-color 0.2s ease',
          border: 'none'
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            position: 'absolute',
            top: '2px',
            left: checked ? '22px' : '2px',
            width: '20px',
            height: '20px',
            backgroundColor: 'white',
            borderRadius: '50%',
            transition: 'left 0.2s ease',
            boxShadow: '0 1px 3px rgba(0,0,0,0.2)'
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        fontSize: '11px',
        color: '#666',
        lineHeight: '1.4'
      },
      children: description
    })]
  });
};
function OrderNumberProperties(_ref3) {
  var element = _ref3.element,
    _onChange = _ref3.onChange,
    activeTab = _ref3.activeTab,
    setActiveTab = _ref3.setActiveTab;
  var currentTab = activeTab[element.id] || 'fonctionnalites';
  var setCurrentTab = function setCurrentTab(tab) {
    setActiveTab(OrderNumberProperties_objectSpread(OrderNumberProperties_objectSpread({}, activeTab), {}, OrderNumberProperties_defineProperty({}, element.id, tab)));
  };
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), currentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)(OrderNumberProperties_Accordion, {
        title: "Propri\xE9t\xE9s de texte g\xE9n\xE9rales",
        defaultOpen: true,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Police g\xE9n\xE9rale"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.fontFamily || 'Arial',
            onChange: function onChange(e) {
              return _onChange(element.id, 'fontFamily', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Arial",
              children: "Arial"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Helvetica",
              children: "Helvetica"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Times New Roman",
              children: "Times New Roman"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Georgia",
              children: "Georgia"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Verdana",
              children: "Verdana"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Courier New",
              children: "Courier New"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Taille de police g\xE9n\xE9rale"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "number",
            min: "8",
            max: "72",
            value: element.fontSize || 14,
            onChange: function onChange(e) {
              return _onChange(element.id, 'fontSize', parseInt(e.target.value) || 14);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur de texte g\xE9n\xE9rale"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.color || element.textColor || '#000000',
            onChange: function onChange(e) {
              return _onChange(element.id, 'color', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Style de police g\xE9n\xE9ral"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.fontWeight || 'normal',
            onChange: function onChange(e) {
              return _onChange(element.id, 'fontWeight', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bold",
              children: "Gras"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "100",
              children: "100 (Tr\xE8s fin)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "200",
              children: "200"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "300",
              children: "300 (Fin)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "400",
              children: "400 (Normal)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "500",
              children: "500"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "600",
              children: "600"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "700",
              children: "700 (Gras)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "800",
              children: "800"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "900",
              children: "900 (Tr\xE8s gras)"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Style italique g\xE9n\xE9ral"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.fontStyle || 'normal',
            onChange: function onChange(e) {
              return _onChange(element.id, 'fontStyle', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "italic",
              children: "Italique"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "oblique",
              children: "Oblique"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Alignement du texte"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.textAlign || 'left',
            onChange: function onChange(e) {
              return _onChange(element.id, 'textAlign', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "left",
              children: "Gauche"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "center",
              children: "Centre"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "right",
              children: "Droite"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "justify",
              children: "Justifi\xE9"
            })]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("hr", {
        style: {
          margin: '16px 0',
          border: 'none',
          borderTop: '1px solid #ddd'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Structure des informations"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(OrderNumberProperties_Toggle, {
            checked: element.showHeaders !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showHeaders', checked);
            },
            label: "Afficher les en-t\xEAtes",
            description: "Affiche les titres des sections"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(OrderNumberProperties_Toggle, {
            checked: element.showBackground !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showBackground', checked);
            },
            label: "Afficher le fond",
            description: "Affiche un fond color\xE9 derri\xE8re le num\xE9ro de commande"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(OrderNumberProperties_Toggle, {
            checked: element.showBorders !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showBorders', checked);
            },
            label: "Afficher les bordures",
            description: "Affiche les bordures autour des sections"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "\xC9l\xE9ments principaux"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)(OrderNumberProperties_Toggle, {
            checked: element.showLabel !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showLabel', checked);
            },
            label: "Afficher le libell\xE9",
            description: "Affiche un texte devant le num\xE9ro de commande"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)(OrderNumberProperties_Toggle, {
            checked: element.showDate !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showDate', checked);
            },
            label: "Afficher la date",
            description: "Affiche la date de commande"
          })]
        })]
      }), element.showLabel !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Configuration du libell\xE9"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '6px'
              },
              children: "Texte du libell\xE9"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "text",
              value: element.labelText || 'NÂ° de commande:',
              onChange: function onChange(e) {
                return _onChange(element.id, 'labelText', e.target.value);
              },
              placeholder: "N\xB0 de commande:",
              style: {
                width: '100%',
                padding: '6px',
                border: '1px solid #ccc',
                borderRadius: '4px',
                fontSize: '12px'
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '4px'
              },
              children: "Texte affich\xE9 avant le num\xE9ro de commande"
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '6px'
              },
              children: "Position du libell\xE9"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: element.labelPosition || 'above',
              onChange: function onChange(e) {
                return _onChange(element.id, 'labelPosition', e.target.value);
              },
              style: {
                width: '100%',
                padding: '6px',
                border: '1px solid #ccc',
                borderRadius: '4px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "above",
                children: "Au-dessus du num\xE9ro"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "left",
                children: "\xC0 gauche du num\xE9ro"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "right",
                children: "\xC0 droite du num\xE9ro"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "below",
                children: "En-dessous du num\xE9ro"
              })]
            })]
          })]
        })]
      }), element.showDate !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Format de date"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              marginBottom: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '6px'
              },
              children: "Format d'affichage"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: String(element.dateFormat || 'DD/MM/YYYY'),
              onChange: function onChange(e) {
                return _onChange(element.id, 'dateFormat', e.target.value);
              },
              style: {
                width: '100%',
                padding: '6px',
                border: '1px solid #ccc',
                borderRadius: '4px',
                fontSize: '12px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "DD/MM/YYYY",
                children: "JJ/MM/AAAA (31/12/2024)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "MM/DD/YYYY",
                children: "MM/JJ/AAAA (12/31/2024)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "DD-MM-YYYY",
                children: "JJ-MM-AAAA (31-12-2024)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "YYYY-MM-DD",
                children: "AAAA-MM-JJ (2024-12-31)"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "DD MMM YYYY",
                children: "JJ MMM AAAA (31 d\xE9c. 2024)"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              style: {
                fontSize: '10px',
                color: '#666',
                marginTop: '4px'
              },
              children: "Format d'affichage de la date de commande"
            })]
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px',
          padding: '12px',
          backgroundColor: '#f8f9fa',
          borderRadius: '4px',
          border: '1px solid #e9ecef'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '8px',
            color: '#495057'
          },
          children: "\u2139\uFE0F Information"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '11px',
            color: '#6c757d',
            lineHeight: '1.4'
          },
          children: "Le num\xE9ro de commande est automatiquement r\xE9cup\xE9r\xE9 depuis WooCommerce. Le format et la num\xE9rotation sont g\xE9r\xE9s par votre configuration WooCommerce."
        })]
      })]
    }), currentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(OrderNumberProperties_Accordion, {
        title: "Th\xE8mes pr\xE9d\xE9finis",
        defaultOpen: true,
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            display: 'grid',
            gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',
            gap: '8px',
            maxHeight: '200px',
            overflowY: 'auto',
            padding: '4px',
            border: '1px solid #e0e0e0',
            borderRadius: '4px',
            backgroundColor: '#fafafa'
          },
          children: [{
            id: 'clean',
            name: 'Propre',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: '1px solid #f3f4f6',
                borderRadius: '4px',
                backgroundColor: '#ffffff',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '1px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '2px',
                  backgroundColor: '#f9fafb'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '2px',
                  backgroundColor: '#ffffff'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '2px',
                  backgroundColor: '#f9fafb'
                }
              })]
            }),
            styles: {
              backgroundColor: '#ffffff',
              borderColor: '#f3f4f6',
              textColor: '#374151',
              headerTextColor: '#111827',
              showHeaders: true,
              showBackground: true,
              showBorders: true
            }
          }, {
            id: 'subtle',
            name: 'Discret',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: '1px solid #f1f5f9',
                borderRadius: '6px',
                backgroundColor: '#fafbfc',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '3px',
                  backgroundColor: '#e2e8f0',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '3px',
                  backgroundColor: '#fafbfc',
                  borderRadius: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '3px',
                  backgroundColor: '#e2e8f0',
                  borderRadius: '1px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fafbfc',
              borderColor: '#f1f5f9',
              textColor: '#475569',
              headerTextColor: '#334155',
              showHeaders: true,
              showBackground: true,
              showBorders: true
            }
          }, {
            id: 'elegant',
            name: 'Ã‰lÃ©gant',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: '2px solid #f3e8ff',
                borderRadius: '8px',
                backgroundColor: '#fefefe',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '3px',
                  backgroundColor: '#f3e8ff',
                  borderRadius: '2px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '3px',
                  backgroundColor: '#fefefe',
                  borderRadius: '2px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '3px',
                  backgroundColor: '#f3e8ff',
                  borderRadius: '2px'
                }
              })]
            }),
            styles: {
              backgroundColor: '#fefefe',
              borderColor: '#f3e8ff',
              textColor: '#6b21a8',
              headerTextColor: '#581c87',
              showHeaders: true,
              showBackground: true,
              showBorders: true
            }
          }, {
            id: 'corporate',
            name: 'Corporate',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: '1px solid #e5e7eb',
                borderRadius: '0px',
                backgroundColor: '#ffffff',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '2px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '3px',
                  backgroundColor: '#f3f4f6'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '3px',
                  backgroundColor: '#ffffff'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '3px',
                  backgroundColor: '#f3f4f6'
                }
              })]
            }),
            styles: {
              backgroundColor: '#ffffff',
              borderColor: '#e5e7eb',
              textColor: '#374151',
              headerTextColor: '#111827',
              showHeaders: true,
              showBackground: false,
              showBorders: true
            }
          }, {
            id: 'minimal',
            name: 'Minimal',
            preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                width: '100%',
                height: '35px',
                border: 'none',
                borderRadius: '0px',
                backgroundColor: 'transparent',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: 'center',
                alignItems: 'center',
                gap: '1px'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '90%',
                  height: '1px',
                  backgroundColor: '#e5e7eb'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '75%',
                  height: '1px',
                  backgroundColor: 'transparent'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  width: '60%',
                  height: '1px',
                  backgroundColor: '#e5e7eb'
                }
              })]
            }),
            styles: {
              backgroundColor: 'transparent',
              borderColor: 'transparent',
              textColor: '#6b7280',
              headerTextColor: '#374151',
              showHeaders: false,
              showBackground: false,
              showBorders: false
            }
          }].map(function (theme) {
            return /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
              onClick: function onClick() {
                // Appliquer toutes les propriÃ©tÃ©s du thÃ¨me
                Object.entries(theme.styles).forEach(function (_ref4) {
                  var _ref5 = OrderNumberProperties_slicedToArray(_ref4, 2),
                    property = _ref5[0],
                    value = _ref5[1];
                  _onChange(element.id, property, value);
                });
              },
              style: {
                padding: '6px',
                border: '2px solid transparent',
                borderRadius: '6px',
                backgroundColor: '#ffffff',
                cursor: 'pointer',
                textAlign: 'center',
                transition: 'all 0.2s ease',
                minHeight: '70px',
                display: 'flex',
                flexDirection: 'column',
                alignItems: 'center',
                gap: '4px'
              },
              onMouseEnter: function onMouseEnter(e) {
                e.currentTarget.style.borderColor = '#007bff';
                e.currentTarget.style.backgroundColor = '#f8f9fa';
                e.currentTarget.style.transform = 'translateY(-1px)';
              },
              onMouseLeave: function onMouseLeave(e) {
                e.currentTarget.style.borderColor = 'transparent';
                e.currentTarget.style.backgroundColor = '#ffffff';
                e.currentTarget.style.transform = 'translateY(0)';
              },
              title: "Appliquer le th\xE8me ".concat(theme.name),
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  fontSize: '10px',
                  fontWeight: 'bold',
                  color: '#333',
                  textAlign: 'center',
                  lineHeight: '1.2'
                },
                children: theme.name
              }), theme.preview]
            }, theme.id);
          })
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("hr", {
        style: {
          margin: '16px 0',
          border: 'none',
          borderTop: '1px solid #ddd'
        }
      }), element.showLabel !== false && element.showHeaders !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)(OrderNumberProperties_Accordion, {
        title: "Police du libell\xE9",
        defaultOpen: false,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Taille de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "number",
            min: "8",
            max: "32",
            value: element.headerFontSize || (Number(element.fontSize) || 14) + 2,
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerFontSize', parseInt(e.target.value) || 16);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Famille de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: String(element.headerFontFamily || element.fontFamily || 'Arial'),
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerFontFamily', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Arial",
              children: "Arial"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Helvetica",
              children: "Helvetica"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Times New Roman",
              children: "Times New Roman"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Georgia",
              children: "Georgia"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Verdana",
              children: "Verdana"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Tahoma",
              children: "Tahoma"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Trebuchet MS",
              children: "Trebuchet MS"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Calibri",
              children: "Calibri"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Cambria",
              children: "Cambria"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Segoe UI",
              children: "Segoe UI"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "\xC9paisseur de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.headerFontWeight || element.fontWeight || 'bold',
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerFontWeight', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal (400)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bold",
              children: "Gras (700)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "lighter",
              children: "Fin (300)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bolder",
              children: "Tr\xE8s gras (900)"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Style de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.headerFontStyle || element.fontStyle || 'normal',
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerFontStyle', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "italic",
              children: "Italique"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "oblique",
              children: "Oblique"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '0'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.headerTextColor || element.textColor || '#111827',
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerTextColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(OrderNumberProperties_Accordion, {
        title: "Police du num\xE9ro et de la date",
        defaultOpen: false,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Taille de police du num\xE9ro"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "number",
            min: "8",
            max: "24",
            value: element.numberFontSize || element.bodyFontSize || element.fontSize || 14,
            onChange: function onChange(e) {
              return _onChange(element.id, 'numberFontSize', parseInt(e.target.value) || 14);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Taille de police de la date"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "number",
            min: "8",
            max: "24",
            value: element.dateFontSize || (Number(element.bodyFontSize || element.fontSize) || 14) - 2,
            onChange: function onChange(e) {
              return _onChange(element.id, 'dateFontSize', parseInt(e.target.value) || 12);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Famille de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.bodyFontFamily || element.fontFamily || 'Arial',
            onChange: function onChange(e) {
              return _onChange(element.id, 'bodyFontFamily', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Arial",
              children: "Arial"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Helvetica",
              children: "Helvetica"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Times New Roman",
              children: "Times New Roman"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Georgia",
              children: "Georgia"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Verdana",
              children: "Verdana"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Tahoma",
              children: "Tahoma"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Trebuchet MS",
              children: "Trebuchet MS"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Calibri",
              children: "Calibri"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Cambria",
              children: "Cambria"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Segoe UI",
              children: "Segoe UI"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "\xC9paisseur de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.bodyFontWeight || element.fontWeight || 'normal',
            onChange: function onChange(e) {
              return _onChange(element.id, 'bodyFontWeight', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal (400)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bold",
              children: "Gras (700)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "lighter",
              children: "Fin (300)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bolder",
              children: "Tr\xE8s gras (900)"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Style de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.bodyFontStyle || element.fontStyle || 'normal',
            onChange: function onChange(e) {
              return _onChange(element.id, 'bodyFontStyle', e.target.value);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "italic",
              children: "Italique"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "oblique",
              children: "Oblique"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '0'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.textColor || '#374151',
            onChange: function onChange(e) {
              return _onChange(element.id, 'textColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)(OrderNumberProperties_Accordion, {
        title: "Couleurs",
        defaultOpen: false,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur du texte du libell\xE9"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.headerTextColor || element.textColor || '#111827',
            onChange: function onChange(e) {
              return _onChange(element.id, 'headerTextColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur du texte du num\xE9ro"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.textColor || '#374151',
            onChange: function onChange(e) {
              return _onChange(element.id, 'textColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), element.showBackground !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur de fond"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.backgroundColor === 'transparent' ? '#ffffff' : element.backgroundColor || '#ffffff',
            onChange: function onChange(e) {
              return _onChange(element.id, 'backgroundColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '0'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur des bordures"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.borderColor || '#e5e7eb',
            onChange: function onChange(e) {
              return _onChange(element.id, 'borderColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px'
            }
          })]
        })]
      })]
    }), currentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Position X"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.x || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Position Y"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.y || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Largeur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.width || 200,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseInt(e.target.value) || 200);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Hauteur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.height || 40,
          onChange: function onChange(e) {
            return _onChange(element.id, 'height', parseInt(e.target.value) || 40);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Alignement du contenu"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.contentAlign || 'left',
          onChange: function onChange(e) {
            return _onChange(element.id, 'contentAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "left",
            children: "Aligner \xE0 gauche"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "center",
            children: "Centrer"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "right",
            children: "Aligner \xE0 droite"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Alignement horizontal"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.textAlign || 'left',
          onChange: function onChange(e) {
            return _onChange(element.id, 'textAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "left",
            children: "Gauche"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "center",
            children: "Centre"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "right",
            children: "Droite"
          })]
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/WoocommerceOrderDateProperties.tsx
function WoocommerceOrderDateProperties_typeof(o) { "@babel/helpers - typeof"; return WoocommerceOrderDateProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, WoocommerceOrderDateProperties_typeof(o); }
function WoocommerceOrderDateProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function WoocommerceOrderDateProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? WoocommerceOrderDateProperties_ownKeys(Object(t), !0).forEach(function (r) { WoocommerceOrderDateProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : WoocommerceOrderDateProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function WoocommerceOrderDateProperties_defineProperty(e, r, t) { return (r = WoocommerceOrderDateProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function WoocommerceOrderDateProperties_toPropertyKey(t) { var i = WoocommerceOrderDateProperties_toPrimitive(t, "string"); return "symbol" == WoocommerceOrderDateProperties_typeof(i) ? i : i + ""; }
function WoocommerceOrderDateProperties_toPrimitive(t, r) { if ("object" != WoocommerceOrderDateProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != WoocommerceOrderDateProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function WoocommerceOrderDateProperties_slicedToArray(r, e) { return WoocommerceOrderDateProperties_arrayWithHoles(r) || WoocommerceOrderDateProperties_iterableToArrayLimit(r, e) || WoocommerceOrderDateProperties_unsupportedIterableToArray(r, e) || WoocommerceOrderDateProperties_nonIterableRest(); }
function WoocommerceOrderDateProperties_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function WoocommerceOrderDateProperties_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return WoocommerceOrderDateProperties_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? WoocommerceOrderDateProperties_arrayLikeToArray(r, a) : void 0; } }
function WoocommerceOrderDateProperties_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function WoocommerceOrderDateProperties_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function WoocommerceOrderDateProperties_arrayWithHoles(r) { if (Array.isArray(r)) return r; }


// Composant Accordion personnalisÃ© - mÃªme style que les autres propriÃ©tÃ©s
var WoocommerceOrderDateProperties_Accordion = function Accordion(_ref) {
  var title = _ref.title,
    children = _ref.children,
    _ref$defaultOpen = _ref.defaultOpen,
    defaultOpen = _ref$defaultOpen === void 0 ? false : _ref$defaultOpen;
  var _useState = (0,react.useState)(defaultOpen),
    _useState2 = WoocommerceOrderDateProperties_slicedToArray(_useState, 2),
    isOpen = _useState2[0],
    setIsOpen = _useState2[1];
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '12px',
      border: '1px solid #ddd',
      borderRadius: '0',
      overflow: 'hidden'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      onClick: function onClick() {
        return setIsOpen(!isOpen);
      },
      style: {
        padding: '8px 10px',
        backgroundColor: '#f0f0f0',
        cursor: 'pointer',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        borderBottom: isOpen ? '1px solid #ddd' : 'none'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
        style: {
          margin: '0',
          fontSize: '11px',
          fontWeight: 'bold',
          color: '#333'
        },
        children: title
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
        style: {
          fontSize: '11px',
          color: '#666',
          transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)',
          transition: 'transform 0.2s ease'
        },
        children: "\u25BC"
      })]
    }), isOpen && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        padding: '10px',
        backgroundColor: '#fff'
      },
      children: children
    })]
  });
};
function WoocommerceOrderDateProperties(_ref2) {
  var _element$properties, _element$properties2, _element$properties3, _element$properties4, _element$properties5;
  var element = _ref2.element,
    _onChange = _ref2.onChange,
    activeTab = _ref2.activeTab,
    setActiveTab = _ref2.setActiveTab;
  var currentTab = activeTab[element.id] || 'fonctionnalites';
  var setCurrentTab = function setCurrentTab(tab) {
    setActiveTab(WoocommerceOrderDateProperties_objectSpread(WoocommerceOrderDateProperties_objectSpread({}, activeTab), {}, WoocommerceOrderDateProperties_defineProperty({}, element.id, tab)));
  };
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), currentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(WoocommerceOrderDateProperties_Accordion, {
        title: "Format de la date",
        defaultOpen: true,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Format"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: ((_element$properties = element.properties) === null || _element$properties === void 0 ? void 0 : _element$properties.dateFormat) || 'd/m/Y',
            onChange: function onChange(e) {
              return _onChange(element.id, 'properties', WoocommerceOrderDateProperties_objectSpread(WoocommerceOrderDateProperties_objectSpread({}, element.properties), {}, {
                dateFormat: e.target.value
              }));
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "d/m/Y",
              children: "JJ/MM/AAAA"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "m/d/Y",
              children: "MM/JJ/AAAA"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Y-m-d",
              children: "AAAA-MM-JJ"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "d-m-Y",
              children: "JJ-MM-AAAA"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "d.m.Y",
              children: "JJ.MM.AAAA"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "checkbox",
            checked: ((_element$properties2 = element.properties) === null || _element$properties2 === void 0 ? void 0 : _element$properties2.showTime) || false,
            onChange: function onChange(e) {
              return _onChange(element.id, 'properties', WoocommerceOrderDateProperties_objectSpread(WoocommerceOrderDateProperties_objectSpread({}, element.properties), {}, {
                showTime: e.target.checked
              }));
            },
            id: "showtime-".concat(element.id),
            style: {
              marginRight: '8px',
              cursor: 'pointer'
            }
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            htmlFor: "showtime-".concat(element.id),
            style: {
              fontSize: '11px',
              fontWeight: '500',
              cursor: 'pointer'
            },
            children: "Afficher l'heure"
          })]
        })]
      })
    }), currentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(WoocommerceOrderDateProperties_Accordion, {
        title: "Propri\xE9t\xE9s de texte g\xE9n\xE9rales",
        defaultOpen: true,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: ((_element$properties3 = element.properties) === null || _element$properties3 === void 0 ? void 0 : _element$properties3.fontFamily) || 'Arial',
            onChange: function onChange(e) {
              return _onChange(element.id, 'properties', WoocommerceOrderDateProperties_objectSpread(WoocommerceOrderDateProperties_objectSpread({}, element.properties), {}, {
                fontFamily: e.target.value
              }));
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Arial",
              children: "Arial"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Helvetica",
              children: "Helvetica"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Times New Roman",
              children: "Times New Roman"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Georgia",
              children: "Georgia"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Verdana",
              children: "Verdana"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Courier New",
              children: "Courier New"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Taille"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "number",
            min: "8",
            max: "72",
            value: ((_element$properties4 = element.properties) === null || _element$properties4 === void 0 ? void 0 : _element$properties4.fontSize) || 12,
            onChange: function onChange(e) {
              return _onChange(element.id, 'properties', WoocommerceOrderDateProperties_objectSpread(WoocommerceOrderDateProperties_objectSpread({}, element.properties), {}, {
                fontSize: parseInt(e.target.value) || 12
              }));
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: ((_element$properties5 = element.properties) === null || _element$properties5 === void 0 ? void 0 : _element$properties5.color) || '#000000',
            onChange: function onChange(e) {
              return _onChange(element.id, 'properties', WoocommerceOrderDateProperties_objectSpread(WoocommerceOrderDateProperties_objectSpread({}, element.properties), {}, {
                color: e.target.value
              }));
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              cursor: 'pointer'
            }
          })]
        })]
      })
    }), currentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsx)(WoocommerceOrderDateProperties_Accordion, {
      title: "Remplissage",
      defaultOpen: true,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
        style: {
          fontSize: '11px',
          color: '#666',
          marginBottom: '8px'
        },
        children: "Position et taille g\xE9r\xE9es par le canevas"
      })
    })]
  });
}
;// ./src/js/react/components/properties/WoocommerceInvoiceNumberProperties.tsx
function WoocommerceInvoiceNumberProperties_typeof(o) { "@babel/helpers - typeof"; return WoocommerceInvoiceNumberProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, WoocommerceInvoiceNumberProperties_typeof(o); }
function WoocommerceInvoiceNumberProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function WoocommerceInvoiceNumberProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? WoocommerceInvoiceNumberProperties_ownKeys(Object(t), !0).forEach(function (r) { WoocommerceInvoiceNumberProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : WoocommerceInvoiceNumberProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function WoocommerceInvoiceNumberProperties_defineProperty(e, r, t) { return (r = WoocommerceInvoiceNumberProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function WoocommerceInvoiceNumberProperties_toPropertyKey(t) { var i = WoocommerceInvoiceNumberProperties_toPrimitive(t, "string"); return "symbol" == WoocommerceInvoiceNumberProperties_typeof(i) ? i : i + ""; }
function WoocommerceInvoiceNumberProperties_toPrimitive(t, r) { if ("object" != WoocommerceInvoiceNumberProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != WoocommerceInvoiceNumberProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function WoocommerceInvoiceNumberProperties_slicedToArray(r, e) { return WoocommerceInvoiceNumberProperties_arrayWithHoles(r) || WoocommerceInvoiceNumberProperties_iterableToArrayLimit(r, e) || WoocommerceInvoiceNumberProperties_unsupportedIterableToArray(r, e) || WoocommerceInvoiceNumberProperties_nonIterableRest(); }
function WoocommerceInvoiceNumberProperties_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function WoocommerceInvoiceNumberProperties_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return WoocommerceInvoiceNumberProperties_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? WoocommerceInvoiceNumberProperties_arrayLikeToArray(r, a) : void 0; } }
function WoocommerceInvoiceNumberProperties_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function WoocommerceInvoiceNumberProperties_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function WoocommerceInvoiceNumberProperties_arrayWithHoles(r) { if (Array.isArray(r)) return r; }


// Composant Accordion personnalisÃ© - mÃªme style que les autres propriÃ©tÃ©s
var WoocommerceInvoiceNumberProperties_Accordion = function Accordion(_ref) {
  var title = _ref.title,
    children = _ref.children,
    _ref$defaultOpen = _ref.defaultOpen,
    defaultOpen = _ref$defaultOpen === void 0 ? false : _ref$defaultOpen;
  var _useState = (0,react.useState)(defaultOpen),
    _useState2 = WoocommerceInvoiceNumberProperties_slicedToArray(_useState, 2),
    isOpen = _useState2[0],
    setIsOpen = _useState2[1];
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '12px',
      border: '1px solid #ddd',
      borderRadius: '0',
      overflow: 'hidden'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      onClick: function onClick() {
        return setIsOpen(!isOpen);
      },
      style: {
        padding: '8px 10px',
        backgroundColor: '#f0f0f0',
        cursor: 'pointer',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        borderBottom: isOpen ? '1px solid #ddd' : 'none'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
        style: {
          margin: '0',
          fontSize: '11px',
          fontWeight: 'bold',
          color: '#333'
        },
        children: title
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
        style: {
          fontSize: '11px',
          color: '#666',
          transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)',
          transition: 'transform 0.2s ease'
        },
        children: "\u25BC"
      })]
    }), isOpen && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        padding: '10px',
        backgroundColor: '#fff'
      },
      children: children
    })]
  });
};
function WoocommerceInvoiceNumberProperties(_ref2) {
  var _element$properties, _element$properties2, _element$properties3, _element$properties4, _element$properties5;
  var element = _ref2.element,
    _onChange = _ref2.onChange,
    activeTab = _ref2.activeTab,
    setActiveTab = _ref2.setActiveTab;
  var currentTab = activeTab[element.id] || 'fonctionnalites';
  var setCurrentTab = function setCurrentTab(tab) {
    setActiveTab(WoocommerceInvoiceNumberProperties_objectSpread(WoocommerceInvoiceNumberProperties_objectSpread({}, activeTab), {}, WoocommerceInvoiceNumberProperties_defineProperty({}, element.id, tab)));
  };
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: currentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: currentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), currentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(WoocommerceInvoiceNumberProperties_Accordion, {
        title: "Format du num\xE9ro",
        defaultOpen: true,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Pr\xE9fixe"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "text",
            value: ((_element$properties = element.properties) === null || _element$properties === void 0 ? void 0 : _element$properties.prefix) || '',
            onChange: function onChange(e) {
              return _onChange(element.id, 'properties', WoocommerceInvoiceNumberProperties_objectSpread(WoocommerceInvoiceNumberProperties_objectSpread({}, element.properties), {}, {
                prefix: e.target.value
              }));
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            placeholder: "Ex: INV-"
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Suffixe"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "text",
            value: ((_element$properties2 = element.properties) === null || _element$properties2 === void 0 ? void 0 : _element$properties2.suffix) || '',
            onChange: function onChange(e) {
              return _onChange(element.id, 'properties', WoocommerceInvoiceNumberProperties_objectSpread(WoocommerceInvoiceNumberProperties_objectSpread({}, element.properties), {}, {
                suffix: e.target.value
              }));
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            placeholder: "Ex: /2024"
          })]
        })]
      })
    }), currentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)(WoocommerceInvoiceNumberProperties_Accordion, {
        title: "Propri\xE9t\xE9s de texte g\xE9n\xE9rales",
        defaultOpen: true,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: ((_element$properties3 = element.properties) === null || _element$properties3 === void 0 ? void 0 : _element$properties3.fontFamily) || 'Arial',
            onChange: function onChange(e) {
              return _onChange(element.id, 'properties', WoocommerceInvoiceNumberProperties_objectSpread(WoocommerceInvoiceNumberProperties_objectSpread({}, element.properties), {}, {
                fontFamily: e.target.value
              }));
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Arial",
              children: "Arial"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Helvetica",
              children: "Helvetica"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Times New Roman",
              children: "Times New Roman"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Georgia",
              children: "Georgia"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Verdana",
              children: "Verdana"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "Courier New",
              children: "Courier New"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Taille"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "number",
            min: "8",
            max: "72",
            value: ((_element$properties4 = element.properties) === null || _element$properties4 === void 0 ? void 0 : _element$properties4.fontSize) || 12,
            onChange: function onChange(e) {
              return _onChange(element.id, 'properties', WoocommerceInvoiceNumberProperties_objectSpread(WoocommerceInvoiceNumberProperties_objectSpread({}, element.properties), {}, {
                fontSize: parseInt(e.target.value) || 12
              }));
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "Couleur"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: ((_element$properties5 = element.properties) === null || _element$properties5 === void 0 ? void 0 : _element$properties5.color) || '#000000',
            onChange: function onChange(e) {
              return _onChange(element.id, 'properties', WoocommerceInvoiceNumberProperties_objectSpread(WoocommerceInvoiceNumberProperties_objectSpread({}, element.properties), {}, {
                color: e.target.value
              }));
            },
            style: {
              width: '100%',
              height: '32px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              cursor: 'pointer'
            }
          })]
        })]
      })
    }), currentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsx)(WoocommerceInvoiceNumberProperties_Accordion, {
      title: "Remplissage",
      defaultOpen: true,
      children: /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
        style: {
          fontSize: '11px',
          color: '#666',
          marginBottom: '8px'
        },
        children: "Position et taille g\xE9r\xE9es par le canevas"
      })
    })]
  });
}
;// ./src/js/react/components/properties/DynamicTextProperties.tsx
function DynamicTextProperties_typeof(o) { "@babel/helpers - typeof"; return DynamicTextProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, DynamicTextProperties_typeof(o); }
function DynamicTextProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function DynamicTextProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? DynamicTextProperties_ownKeys(Object(t), !0).forEach(function (r) { DynamicTextProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : DynamicTextProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function DynamicTextProperties_defineProperty(e, r, t) { return (r = DynamicTextProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function DynamicTextProperties_toPropertyKey(t) { var i = DynamicTextProperties_toPrimitive(t, "string"); return "symbol" == DynamicTextProperties_typeof(i) ? i : i + ""; }
function DynamicTextProperties_toPrimitive(t, r) { if ("object" != DynamicTextProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != DynamicTextProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

// Composant Toggle personnalisÃ©
var DynamicTextProperties_Toggle = function Toggle(_ref) {
  var checked = _ref.checked,
    onChange = _ref.onChange,
    label = _ref.label,
    description = _ref.description;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '12px'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '6px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
        style: {
          fontSize: '12px',
          fontWeight: 'bold',
          color: '#333',
          flex: 1
        },
        children: label
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        onClick: function onClick() {
          return onChange(!checked);
        },
        style: {
          position: 'relative',
          width: '44px',
          height: '24px',
          backgroundColor: checked ? '#007bff' : '#ccc',
          borderRadius: '12px',
          cursor: 'pointer',
          transition: 'background-color 0.2s ease',
          border: 'none'
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            position: 'absolute',
            top: '2px',
            left: checked ? '22px' : '2px',
            width: '20px',
            height: '20px',
            backgroundColor: 'white',
            borderRadius: '50%',
            transition: 'left 0.2s ease',
            boxShadow: '0 1px 3px rgba(0,0,0,0.2)'
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        fontSize: '11px',
        color: '#666',
        lineHeight: '1.4'
      },
      children: description
    })]
  });
};
function DynamicTextProperties(_ref2) {
  var _textExamples$find;
  var element = _ref2.element,
    _onChange = _ref2.onChange,
    activeTab = _ref2.activeTab,
    setActiveTab = _ref2.setActiveTab;
  var dynamicCurrentTab = activeTab[element.id] || 'fonctionnalites';
  var setDynamicCurrentTab = function setDynamicCurrentTab(tab) {
    setActiveTab(DynamicTextProperties_objectSpread(DynamicTextProperties_objectSpread({}, activeTab), {}, DynamicTextProperties_defineProperty({}, element.id, tab)));
  };

  // Liste des exemples prÃ©dÃ©finis
  var textExamples = [
  // === PROFESSIONNEL ===
  {
    id: 'signature_zone',
    label: 'Zone de signature',
    template: 'Signature du client :\n\n______________________________\n\nDate :\n\n____/____/________'
  }, {
    id: 'signature_client',
    label: 'Signature client',
    template: 'Signature du client\n\n______________________________\n\nNom et prÃ©nom :\n\nDate : ____/____/________'
  }, {
    id: 'signature_entreprise',
    label: 'Signature entreprise',
    template: 'Pour l\'entreprise :\n\n______________________________\n\n[prenom] [nom]\n[entreprise]'
  }, {
    id: 'signature_double',
    label: 'Double signature',
    template: 'Signature du client :\n______________________________\n\nSignature de l\'entreprise :\n______________________________\n\nDate : ____/____/________'
  }, {
    id: 'signature_with_stamp',
    label: 'Signature avec cachet',
    template: 'Signature et cachet :\n\n______________________________\n\n[entreprise]\nCachet de l\'entreprise\n\nDate : ____/____/________'
  }, {
    id: 'signature_contract',
    label: 'Signature contrat',
    template: 'Fait Ã  [Ville], le [date]\n\nSignatures :\n\nLe Client :\n______________________________\n\nL\'Entreprise :\n______________________________\n\n[prenom] [nom]'
  }, {
    id: 'signature_approval',
    label: 'Approbation',
    template: 'Lu et approuvÃ© :\n\n______________________________\n\n[prenom] [nom]\n[date]'
  }, {
    id: 'signature_witness',
    label: 'TÃ©moin',
    template: 'TÃ©moin :\n\n______________________________\n\nNom et prÃ©nom :\n\nAdresse :\n\nDate : ____/____/________'
  }, {
    id: 'document_title',
    label: 'Titre de document',
    template: 'CONTRAT DE PRESTATION DE SERVICES'
  }, {
    id: 'document_subtitle',
    label: 'Sous-titre de document',
    template: 'Entre les parties ci-dessous dÃ©signÃ©es'
  },
  // === FORMULAIRES ===
  {
    id: 'checkbox_terms',
    label: 'Case - Conditions gÃ©nÃ©rales',
    template: 'â˜ J\'ai lu et j\'accepte les conditions gÃ©nÃ©rales de vente'
  }, {
    id: 'checkbox_privacy',
    label: 'Case - Politique de confidentialitÃ©',
    template: 'â˜ J\'accepte la politique de confidentialitÃ©'
  }, {
    id: 'checkbox_newsletter',
    label: 'Case - Newsletter',
    template: 'â˜ Je souhaite m\'inscrire Ã  la newsletter'
  }, {
    id: 'checkbox_certification',
    label: 'Case - Certification',
    template: 'â˜ Je certifie l\'exactitude des informations fournies'
  }, {
    id: 'checkbox_quote_acceptance',
    label: 'Case - Acceptation devis',
    template: 'â˜ J\'accepte ce devis et souhaite passer commande'
  }, {
    id: 'checkbox_order_confirmation',
    label: 'Case - Confirmation commande',
    template: 'â˜ Je confirme ma commande selon les termes du devis'
  }, {
    id: 'checkbox_payment_terms',
    label: 'Case - Conditions de paiement',
    template: 'â˜ J\'accepte les conditions de paiement proposÃ©es'
  }, {
    id: 'checkbox_delivery_terms',
    label: 'Case - Conditions de livraison',
    template: 'â˜ J\'accepte les conditions de livraison et dÃ©lais'
  }, {
    id: 'checkbox_price_acceptance',
    label: 'Case - Acceptation tarif',
    template: 'â˜ J\'accepte le tarif proposÃ© pour cette prestation'
  }, {
    id: 'checkbox_liability_waiver',
    label: 'Case - DÃ©charge responsabilitÃ©',
    template: 'â˜ Je dÃ©gage l\'entreprise de toute responsabilitÃ© en cas de...'
  }, {
    id: 'checkbox_data_processing',
    label: 'Case - Traitement donnÃ©es',
    template: 'â˜ J\'autorise le traitement de mes donnÃ©es personnelles'
  }, {
    id: 'checkbox_contract_acceptance',
    label: 'Case - Acceptation contrat',
    template: 'â˜ J\'accepte les termes du contrat ci-dessus'
  },
  // === INFORMATIONS ===
  {
    id: 'contact_complete',
    label: 'Contact complet',
    template: '[entreprise]\n[Adresse ligne 1]\n[Code postal] [Ville]\n[telephone] | [email]\n[site]'
  }, {
    id: 'contact_minimal',
    label: 'Contact minimal',
    template: '[email] | [telephone]'
  }, {
    id: 'legal_mentions',
    label: 'Mentions lÃ©gales',
    template: 'SIRET: [SIRET] | TVA: [TVA]\nCapital social: [capital]â‚¬'
  },
  // === DATES ===
  {
    id: 'date_today',
    label: 'Date du jour',
    template: 'Fait Ã  [Ville], le [date]'
  }, {
    id: 'date_contract',
    label: 'Date de contrat',
    template: 'Contrat Ã©tabli le [date]'
  },
  // === TEXTES ===
  {
    id: 'paragraph_intro',
    label: 'Introduction',
    template: 'Par la prÃ©sente, il est convenu ce qui suit entre les parties :'
  }, {
    id: 'paragraph_conclusion',
    label: 'Conclusion',
    template: 'Les parties dÃ©clarent avoir lu et approuvÃ© l\'intÃ©gralitÃ© du prÃ©sent document.'
  }, {
    id: 'paragraph_payment',
    label: 'Paiement',
    template: 'Le paiement s\'effectuera selon les modalitÃ©s suivantes :'
  },
  // === LISTES ===
  {
    id: 'bullet_services',
    label: 'Services (liste)',
    template: 'â€¢ Conseil et accompagnement\nâ€¢ Formation personnalisÃ©e\nâ€¢ Support technique'
  }, {
    id: 'numbered_steps',
    label: 'Ã‰tapes (liste)',
    template: '1. Validation du cahier des charges\n2. RÃ©alisation du projet\n3. Livraison et recette'
  }, {
    id: 'bullet_features',
    label: 'FonctionnalitÃ©s',
    template: 'â€¢ Interface intuitive\nâ€¢ Performance optimisÃ©e\nâ€¢ SÃ©curitÃ© renforcÃ©e'
  },
  // === PROFESSIONNEL AVANCÃ‰ ===
  {
    id: 'confidentiality_clause',
    label: 'Clause de confidentialitÃ©',
    template: 'Les parties s\'engagent Ã  garder confidentielles les informations Ã©changÃ©es.'
  }, {
    id: 'jurisdiction_clause',
    label: 'Clause de juridiction',
    template: 'Tout litige sera soumis aux tribunaux de [Ville].'
  }, {
    id: 'termination_clause',
    label: 'Clause de rÃ©siliation',
    template: 'Le prÃ©sent contrat peut Ãªtre rÃ©siliÃ© par l\'une ou l\'autre des parties avec un prÃ©avis de 30 jours.'
  }, {
    id: 'custom',
    label: 'PersonnalisÃ©',
    template: ''
  }];

  // DÃ©tecter le template actuel
  var currentText = element.text || '';
  var currentTemplate = element.textTemplate || ((_textExamples$find = textExamples.find(function (ex) {
    return ex.template === currentText;
  })) === null || _textExamples$find === void 0 ? void 0 : _textExamples$find.id) || 'custom';

  // Fonction pour changer de template
  var handleTemplateChange = function handleTemplateChange(templateId) {
    var selectedExample = textExamples.find(function (ex) {
      return ex.id === templateId;
    });
    if (selectedExample) {
      _onChange(element.id, 'text', selectedExample.template);
      _onChange(element.id, 'textTemplate', selectedExample.id);
    }
  };
  var dynamicTextThemes = [{
    id: 'clean',
    name: 'Propre',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #f3f4f6',
        borderRadius: '4px',
        backgroundColor: '#ffffff',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '2px',
          backgroundColor: '#f9fafb'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '2px',
          backgroundColor: '#ffffff'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '2px',
          backgroundColor: '#f9fafb'
        }
      })]
    }),
    styles: {
      backgroundColor: '#ffffff',
      borderColor: '#f3f4f6',
      textColor: '#374151',
      headerTextColor: '#111827'
    }
  }, {
    id: 'subtle',
    name: 'Discret',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #e5e7eb',
        borderRadius: '4px',
        backgroundColor: '#f9fafb',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '2px',
          backgroundColor: '#e5e7eb'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '2px',
          backgroundColor: '#f3f4f6'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '2px',
          backgroundColor: '#e5e7eb'
        }
      })]
    }),
    styles: {
      backgroundColor: '#f9fafb',
      borderColor: '#e5e7eb',
      textColor: '#6b7280',
      headerTextColor: '#374151'
    }
  }, {
    id: 'highlighted',
    name: 'SurlignÃ©',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #dbeafe',
        borderRadius: '4px',
        backgroundColor: '#eff6ff',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '2px',
          backgroundColor: '#dbeafe'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '2px',
          backgroundColor: '#eff6ff'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '2px',
          backgroundColor: '#dbeafe'
        }
      })]
    }),
    styles: {
      backgroundColor: '#eff6ff',
      borderColor: '#dbeafe',
      textColor: '#1e40af',
      headerTextColor: '#1e3a8a'
    }
  }];
  var availableVariables = [{
    key: '[date]',
    label: 'Date actuelle'
  }, {
    key: '[nom]',
    label: 'Nom'
  }, {
    key: '[prenom]',
    label: 'PrÃ©nom'
  }, {
    key: '[entreprise]',
    label: 'Nom de l\'entreprise'
  }, {
    key: '[telephone]',
    label: 'TÃ©lÃ©phone'
  }, {
    key: '[email]',
    label: 'Email'
  }, {
    key: '[site]',
    label: 'Site web'
  }, {
    key: '[ville]',
    label: 'Ville'
  }, {
    key: '[siret]',
    label: 'NumÃ©ro SIRET'
  }, {
    key: '[tva]',
    label: 'NumÃ©ro TVA'
  }, {
    key: '[capital]',
    label: 'Capital social'
  }, {
    key: '[rcs]',
    label: 'RCS'
  }];
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setDynamicCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: dynamicCurrentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: dynamicCurrentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setDynamicCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: dynamicCurrentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: dynamicCurrentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setDynamicCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: dynamicCurrentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: dynamicCurrentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), dynamicCurrentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Mod\xE8le de texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("select", {
          value: currentTemplate,
          onChange: function onChange(e) {
            return handleTemplateChange(e.target.value);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          },
          children: textExamples.map(function (example) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: example.id,
              children: example.label
            }, example.id);
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Texte personnalis\xE9"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("textarea", {
          value: element.text || '',
          onChange: function onChange(e) {
            return _onChange(element.id, 'text', e.target.value);
          },
          placeholder: "Modifiez le texte ou utilisez les variables disponibles",
          rows: 3,
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px',
            resize: 'vertical'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '8px'
          },
          children: "Variables disponibles"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            maxHeight: '150px',
            overflowY: 'auto',
            border: '1px solid #e0e0e0',
            borderRadius: '4px',
            padding: '8px',
            backgroundColor: '#fafafa'
          },
          children: availableVariables.map(function (variable) {
            return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              onClick: function onClick() {
                var currentText = element.text || '';
                var newText = currentText + variable.key;
                _onChange(element.id, 'text', newText);
              },
              style: {
                cursor: 'pointer',
                padding: '4px 8px',
                marginBottom: '4px',
                backgroundColor: '#ffffff',
                border: '1px solid #e0e0e0',
                borderRadius: '3px',
                fontSize: '11px',
                fontFamily: 'monospace'
              },
              title: "Cliquez pour ins\xE9rer ".concat(variable.key),
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("strong", {
                children: variable.key
              }), " - ", variable.label]
            }, variable.key);
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Retour \xE0 la ligne automatique"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "checkbox",
          checked: element.autoWrap !== false,
          onChange: function onChange(e) {
            return _onChange(element.id, 'autoWrap', e.target.checked);
          },
          style: {
            marginRight: '8px'
          }
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          style: {
            fontSize: '11px',
            color: '#666'
          },
          children: "Adapte le texte \xE0 la largeur"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Affichage du fond"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(DynamicTextProperties_Toggle, {
            checked: element.showBackground !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showBackground', checked);
            },
            label: "Afficher le fond",
            description: "Affiche un fond color\xE9 derri\xE8re le texte dynamique"
          })
        })]
      })]
    }), dynamicCurrentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '8px'
          },
          children: "Th\xE8me visuel"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            display: 'grid',
            gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',
            gap: '8px',
            maxHeight: '200px',
            overflowY: 'auto',
            padding: '4px',
            border: '1px solid #e0e0e0',
            borderRadius: '4px',
            backgroundColor: '#fafafa'
          },
          children: dynamicTextThemes.map(function (theme) {
            return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              onClick: function onClick() {
                return _onChange(element.id, 'theme', theme.id);
              },
              style: {
                cursor: 'pointer',
                border: element.theme === theme.id ? '2px solid #007bff' : '2px solid transparent',
                borderRadius: '6px',
                padding: '6px',
                backgroundColor: '#ffffff',
                transition: 'all 0.2s ease'
              },
              title: theme.name,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  fontSize: '10px',
                  fontWeight: 'bold',
                  marginBottom: '4px',
                  textAlign: 'center'
                },
                children: theme.name
              }), theme.preview]
            }, theme.id);
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Taille du texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.fontSize || '12',
          onChange: function onChange(e) {
            return _onChange(element.id, 'fontSize', e.target.value);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "10",
            children: "Petit (10px)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "12",
            children: "Normal (12px)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "14",
            children: "Moyen (14px)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "16",
            children: "Grand (16px)"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Alignement du texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.textAlign || 'left',
          onChange: function onChange(e) {
            return _onChange(element.id, 'textAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "left",
            children: "Gauche"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "center",
            children: "Centre"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "right",
            children: "Droite"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "justify",
            children: "Justifi\xE9"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Style du texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: 'flex',
            gap: '8px',
            flexWrap: 'wrap'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
            style: {
              fontSize: '11px',
              display: 'flex',
              alignItems: 'center'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "checkbox",
              checked: element.fontWeight === 'bold',
              onChange: function onChange(e) {
                return _onChange(element.id, 'fontWeight', e.target.checked ? 'bold' : 'normal');
              },
              style: {
                marginRight: '4px'
              }
            }), "Gras"]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
            style: {
              fontSize: '11px',
              display: 'flex',
              alignItems: 'center'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "checkbox",
              checked: element.fontStyle === 'italic',
              onChange: function onChange(e) {
                return _onChange(element.id, 'fontStyle', e.target.checked ? 'italic' : 'normal');
              },
              style: {
                marginRight: '4px'
              }
            }), "Italique"]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
            style: {
              fontSize: '11px',
              display: 'flex',
              alignItems: 'center'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "checkbox",
              checked: element.textDecoration === 'underline',
              onChange: function onChange(e) {
                return _onChange(element.id, 'textDecoration', e.target.checked ? 'underline' : 'none');
              },
              style: {
                marginRight: '4px'
              }
            }), "Soulign\xE9"]
          })]
        })]
      }), element.showBackground !== false && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          marginTop: '16px',
          paddingTop: '16px',
          borderTop: '1px solid #e5e7eb'
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: 'bold',
              marginBottom: '6px'
            },
            children: "Couleur de fond"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.backgroundColor || '#e5e7eb',
            onChange: function onChange(e) {
              return _onChange(element.id, 'backgroundColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '40px',
              border: '1px solid #d1d5db',
              borderRadius: '6px',
              cursor: 'pointer'
            }
          })]
        })
      })]
    }), dynamicCurrentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Position X"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.x || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Position Y"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.y || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Largeur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.width || 200,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseInt(e.target.value) || 200);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Hauteur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.height || 50,
          onChange: function onChange(e) {
            return _onChange(element.id, 'height', parseInt(e.target.value) || 50);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/MentionsProperties.tsx
function MentionsProperties_typeof(o) { "@babel/helpers - typeof"; return MentionsProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, MentionsProperties_typeof(o); }
function MentionsProperties_toConsumableArray(r) { return MentionsProperties_arrayWithoutHoles(r) || MentionsProperties_iterableToArray(r) || MentionsProperties_unsupportedIterableToArray(r) || MentionsProperties_nonIterableSpread(); }
function MentionsProperties_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function MentionsProperties_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return MentionsProperties_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? MentionsProperties_arrayLikeToArray(r, a) : void 0; } }
function MentionsProperties_iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function MentionsProperties_arrayWithoutHoles(r) { if (Array.isArray(r)) return MentionsProperties_arrayLikeToArray(r); }
function MentionsProperties_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function MentionsProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function MentionsProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? MentionsProperties_ownKeys(Object(t), !0).forEach(function (r) { MentionsProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : MentionsProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function MentionsProperties_defineProperty(e, r, t) { return (r = MentionsProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function MentionsProperties_toPropertyKey(t) { var i = MentionsProperties_toPrimitive(t, "string"); return "symbol" == MentionsProperties_typeof(i) ? i : i + ""; }
function MentionsProperties_toPrimitive(t, r) { if ("object" != MentionsProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != MentionsProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

// Composant Toggle personnalisÃ©
var MentionsProperties_Toggle = function Toggle(_ref) {
  var checked = _ref.checked,
    onChange = _ref.onChange,
    label = _ref.label,
    description = _ref.description;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '12px'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '6px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
        style: {
          fontSize: '12px',
          fontWeight: 'bold',
          color: '#333',
          flex: 1
        },
        children: label
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        onClick: function onClick() {
          return onChange(!checked);
        },
        style: {
          position: 'relative',
          width: '44px',
          height: '24px',
          backgroundColor: checked ? '#007bff' : '#ccc',
          borderRadius: '12px',
          cursor: 'pointer',
          transition: 'background-color 0.2s ease',
          border: 'none'
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            position: 'absolute',
            top: '2px',
            left: checked ? '22px' : '2px',
            width: '20px',
            height: '20px',
            backgroundColor: 'white',
            borderRadius: '50%',
            transition: 'left 0.2s ease',
            boxShadow: '0 1px 3px rgba(0,0,0,0.2)'
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        fontSize: '11px',
        color: '#666',
        lineHeight: '1.4'
      },
      children: description
    })]
  });
};
function MentionsProperties(_ref2) {
  var _element$selectedMent, _element$selectedMent2, _element$selectedMent3, _element$selectedMent4, _element$selectedMent5, _element$selectedMent6;
  var element = _ref2.element,
    _onChange = _ref2.onChange,
    activeTab = _ref2.activeTab,
    setActiveTab = _ref2.setActiveTab;
  var mentionsCurrentTab = activeTab[element.id] || 'fonctionnalites';
  var setMentionsCurrentTab = function setMentionsCurrentTab(tab) {
    setActiveTab(MentionsProperties_objectSpread(MentionsProperties_objectSpread({}, activeTab), {}, MentionsProperties_defineProperty({}, element.id, tab)));
  };
  var mentionsThemes = [{
    id: 'legal',
    name: 'LÃ©gal',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #6b7280',
        borderRadius: '4px',
        backgroundColor: '#ffffff',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '2px',
          backgroundColor: '#6b7280'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '1px',
          backgroundColor: '#9ca3af'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '1px',
          backgroundColor: '#d1d5db'
        }
      })]
    }),
    styles: {
      backgroundColor: '#ffffff',
      borderColor: '#6b7280',
      textColor: '#374151',
      headerTextColor: '#111827'
    }
  }, {
    id: 'subtle',
    name: 'Discret',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: '1px solid #e5e7eb',
        borderRadius: '4px',
        backgroundColor: '#f9fafb',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '1px',
          backgroundColor: '#9ca3af'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '1px',
          backgroundColor: '#d1d5db'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '1px',
          backgroundColor: '#e5e7eb'
        }
      })]
    }),
    styles: {
      backgroundColor: '#f9fafb',
      borderColor: '#e5e7eb',
      textColor: '#6b7280',
      headerTextColor: '#374151'
    }
  }, {
    id: 'minimal',
    name: 'Minimal',
    preview: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: '100%',
        height: '35px',
        border: 'none',
        borderRadius: '4px',
        backgroundColor: 'transparent',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '1px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '90%',
          height: '1px',
          backgroundColor: '#d1d5db'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '75%',
          height: '1px',
          backgroundColor: '#e5e7eb'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: '60%',
          height: '1px',
          backgroundColor: '#f3f4f6'
        }
      })]
    }),
    styles: {
      backgroundColor: 'transparent',
      borderColor: 'transparent',
      textColor: '#6b7280',
      headerTextColor: '#374151'
    }
  }];
  var predefinedMentions = [{
    key: 'cgv',
    label: 'Conditions GÃ©nÃ©rales de Vente',
    text: 'Conditions GÃ©nÃ©rales de Vente applicables. Consultez notre site web pour plus de dÃ©tails.'
  }, {
    key: 'legal',
    label: 'Mentions lÃ©gales',
    text: 'Document Ã©tabli sous la responsabilitÃ© de l\'entreprise. Toutes les informations sont confidentielles.'
  }, {
    key: 'payment',
    label: 'Conditions de paiement',
    text: 'Paiement dÃ» dans les dÃ©lais convenus. Tout retard peut entraÃ®ner des pÃ©nalitÃ©s.'
  }, {
    key: 'warranty',
    label: 'Garantie',
    text: 'Garantie lÃ©gale de conformitÃ© et garantie contre les vices cachÃ©s selon les articles L217-4 et suivants du Code de la consommation.'
  }, {
    key: 'returns',
    label: 'Droit de rÃ©tractation',
    text: 'Droit de rÃ©tractation de 14 jours selon l\'article L221-18 du Code de la consommation.'
  }, {
    key: 'tva',
    label: 'TVA et mentions fiscales',
    text: 'TVA non applicable, art. 293 B du CGI. Mention : auto-entrepreneur soumise Ã  l\'impÃ´t sur le revenu.'
  }, {
    key: 'penalties',
    label: 'PÃ©nalitÃ©s de retard',
    text: 'Tout retard de paiement donnera lieu au paiement d\'une pÃ©nalitÃ© Ã©gale Ã  3 fois le taux d\'intÃ©rÃªt lÃ©gal en vigueur.'
  }, {
    key: 'property',
    label: 'RÃ©serve de propriÃ©tÃ©',
    text: 'Les biens vendus restent la propriÃ©tÃ© du vendeur jusqu\'au paiement intÃ©gral du prix.'
  }, {
    key: 'jurisdiction',
    label: 'Juridiction compÃ©tente',
    text: 'Tout litige sera soumis Ã  la compÃ©tence exclusive des tribunaux de commerce franÃ§ais.'
  }, {
    key: 'rgpd',
    label: 'RGPD - Protection des donnÃ©es',
    text: 'Vos donnÃ©es personnelles sont traitÃ©es conformÃ©ment au RGPD. Consultez notre politique de confidentialitÃ©.'
  }, {
    key: 'discount',
    label: 'Escompte',
    text: 'Escompte pour paiement anticipÃ© : 2% du montant HT si paiement sous 8 jours.'
  }, {
    key: 'clause',
    label: 'Clause de rÃ©serve',
    text: 'Sous rÃ©serve d\'acceptation de votre commande et de disponibilitÃ© des produits.'
  }, {
    key: 'intellectual',
    label: 'PropriÃ©tÃ© intellectuelle',
    text: 'Tous droits de propriÃ©tÃ© intellectuelle rÃ©servÃ©s. Reproduction interdite sans autorisation.'
  }, {
    key: 'force',
    label: 'Force majeure',
    text: 'Aucun des parties ne pourra Ãªtre tenu responsable en cas de force majeure.'
  }, {
    key: 'liability',
    label: 'Limitation de responsabilitÃ©',
    text: 'Notre responsabilitÃ© est limitÃ©e Ã  la valeur de la commande en cas de faute prouvÃ©e.'
  }, {
    key: 'tva_info',
    label: 'Informations TVA',
    text: 'TVA non applicable - article 293 B du CGI. RÃ©gime micro-entreprise.'
  }, {
    key: 'rcs_info',
    label: 'Informations RCS',
    text: 'RCS Paris 123 456 789 - SIRET 123 456 789 00012 - APE 1234Z'
  }, {
    key: 'siret_info',
    label: 'Informations SIRET',
    text: 'SIRET 123 456 789 00012 - NAF 1234Z - TVA FR 12 345 678 901'
  }, {
    key: 'legal_status',
    label: 'Statut juridique',
    text: 'SociÃ©tÃ© Ã  responsabilitÃ© limitÃ©e au capital de 10 000â‚¬ - RCS Paris 123 456 789'
  }, {
    key: 'insurance',
    label: 'Assurance responsabilitÃ©',
    text: 'Couvert par assurance responsabilitÃ© civile professionnelle - Police NÂ° 123456789'
  }, {
    key: 'mediation',
    label: 'MÃ©diation consommateur',
    text: 'En cas de litige, le consommateur peut saisir gratuitement le mÃ©diateur compÃ©tent.'
  }, {
    key: 'iban',
    label: 'CoordonnÃ©es bancaires',
    text: 'IBAN FR76 1234 5678 9012 3456 7890 123 - BIC BNPAFRPP'
  }, {
    key: 'delivery',
    label: 'Conditions de livraison',
    text: 'Livraison sous 3-5 jours ouvrÃ©s. Frais de port offerts Ã  partir de 50â‚¬ HT.'
  }, {
    key: 'packaging',
    label: 'Emballage et environnement',
    text: 'Emballages recyclables. Respectueux de l\'environnement.'
  }, {
    key: 'medley',
    label: 'MÃ©dley (Combinaison)',
    text: ''
  }, {
    key: 'custom',
    label: 'PersonnalisÃ©',
    text: ''
  }];

  // DÃ©tecter automatiquement le type de mention basÃ© sur le texte actuel
  var detectMentionType = function detectMentionType() {
    var currentText = element.text || '';
    var currentMentionType = element.mentionType || 'custom';

    // Si un type est dÃ©jÃ  dÃ©fini et que ce n'est pas custom, le garder
    if (currentMentionType && currentMentionType !== 'custom') {
      return currentMentionType;
    }

    // Pour le medley, vÃ©rifier s'il y a des mentions sÃ©lectionnÃ©es
    if (element.selectedMentions && element.selectedMentions.length > 0) {
      return 'medley';
    }

    // Sinon, essayer de dÃ©tecter automatiquement
    var matchingMention = predefinedMentions.find(function (mention) {
      return mention.key !== 'custom' && mention.key !== 'medley' && mention.text === currentText;
    });
    return matchingMention ? matchingMention.key : 'custom';
  };
  var currentMentionType = detectMentionType();
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setMentionsCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: mentionsCurrentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: mentionsCurrentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setMentionsCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: mentionsCurrentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: mentionsCurrentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setMentionsCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: mentionsCurrentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: mentionsCurrentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), mentionsCurrentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Type de mentions"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("select", {
          value: currentMentionType,
          onChange: function onChange(e) {
            var selectedMention = predefinedMentions.find(function (m) {
              return m.key === e.target.value;
            });
            _onChange(element.id, 'mentionType', e.target.value);

            // Ne mettre Ã  jour le texte que si ce n'est pas "custom" et qu'il y a du texte prÃ©dÃ©fini
            if (selectedMention && selectedMention.key !== 'custom' && selectedMention.key !== 'medley' && selectedMention.text) {
              _onChange(element.id, 'text', selectedMention.text);
            }
            // Pour "custom" et "medley", on garde le texte actuel
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          },
          children: predefinedMentions.map(function (mention) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: mention.key,
              children: mention.label
            }, mention.key);
          })
        })]
      }), currentMentionType === 'medley' && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px',
          padding: '12px',
          border: '1px solid #e0e0e0',
          borderRadius: '4px',
          backgroundColor: '#f9f9f9'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '8px'
          },
          children: "S\xE9lectionnez les mentions \xE0 combiner :"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            display: 'grid',
            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',
            gap: '6px',
            maxHeight: '200px',
            overflowY: 'auto'
          },
          children: predefinedMentions.filter(function (m) {
            return m.key !== 'medley' && m.key !== 'custom';
          }).map(function (mention) {
            var selectedMentions = element.selectedMentions || [];
            var isSelected = selectedMentions.includes(mention.key);
            return /*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
              style: {
                display: 'flex',
                alignItems: 'flex-start',
                fontSize: '11px',
                cursor: 'pointer',
                padding: '4px',
                borderRadius: '3px',
                backgroundColor: isSelected ? '#e3f2fd' : 'transparent'
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
                type: "checkbox",
                checked: isSelected,
                onChange: function onChange(e) {
                  var currentSelected = element.selectedMentions || [];
                  var newSelected;
                  if (e.target.checked) {
                    newSelected = [].concat(MentionsProperties_toConsumableArray(currentSelected), [mention.key]);
                  } else {
                    newSelected = currentSelected.filter(function (key) {
                      return key !== mention.key;
                    });
                  }
                  _onChange(element.id, 'selectedMentions', newSelected);

                  // GÃ©nÃ©rer le texte combinÃ© avec le sÃ©parateur configurÃ©
                  var separatorMap = {
                    'double_newline': '\n\n',
                    'single_newline': '\n',
                    'dash': ' - ',
                    'bullet': ' â€¢ ',
                    'pipe': ' | '
                  };
                  var separator = separatorMap[element.medleySeparator || 'double_newline'] || '\n\n';
                  var combinedText = newSelected.map(function (key) {
                    var _predefinedMentions$f;
                    return (_predefinedMentions$f = predefinedMentions.find(function (m) {
                      return m.key === key;
                    })) === null || _predefinedMentions$f === void 0 ? void 0 : _predefinedMentions$f.text;
                  }).filter(Boolean).join(separator);
                  _onChange(element.id, 'text', combinedText);

                  // Ajuster automatiquement la hauteur et la largeur selon le contenu
                  var lines = combinedText.split('\n');
                  var fontSize = typeof element.fontSize === 'string' ? parseFloat(element.fontSize) : element.fontSize || 10;
                  var lineHeight = fontSize * 1.3; // Harmoniser avec pdf-canvas-core.js
                  var padding = 10; // RÃ©duire pour cohÃ©rence
                  var iconSpace = 20; // Espace pour l'icÃ´ne
                  var minHeight = 60; // Hauteur minimale basÃ©e sur la valeur par dÃ©faut
                  var calculatedHeight = Math.max(minHeight, lines.length * lineHeight + iconSpace + padding);
                  var maxHeight = 500;
                  var newHeight = Math.min(calculatedHeight, maxHeight);

                  // Calculer la largeur basÃ©e sur la ligne la plus longue
                  var canvas = document.createElement('canvas');
                  var ctx = canvas.getContext('2d');
                  if (ctx) {
                    ctx.font = "".concat(element.fontWeight || 'normal', " ").concat(fontSize, "px ").concat(element.fontFamily || 'Arial');
                    var maxLineWidth = Math.max.apply(Math, MentionsProperties_toConsumableArray(lines.map(function (line) {
                      return ctx.measureText(line).width;
                    })));
                    var margin = 20; // MÃªme marge qu dans pdf-canvas-core.js (width - 20)
                    var minWidth = 500; // Largeur minimale basÃ©e sur la valeur par dÃ©faut
                    var calculatedWidth = Math.max(minWidth, maxLineWidth + margin);
                    var maxWidth = 800; // Largeur maximale
                    var newWidth = Math.min(calculatedWidth, maxWidth);
                    if (element.width !== newWidth) {
                      _onChange(element.id, 'width', newWidth);
                    }
                  }
                  if (element.height !== newHeight) {
                    _onChange(element.id, 'height', newHeight);
                  }
                },
                style: {
                  marginRight: '6px',
                  marginTop: '1px'
                }
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontWeight: 'bold',
                    marginBottom: '2px'
                  },
                  children: mention.label
                }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontSize: '10px',
                    color: '#666',
                    lineHeight: '1.3'
                  },
                  children: mention.text.length > 60 ? mention.text.substring(0, 60) + '...' : mention.text
                })]
              })]
            }, mention.key);
          })
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginTop: '8px',
            fontSize: '10px',
            color: '#666'
          },
          children: [(_element$selectedMent = (_element$selectedMent2 = element.selectedMentions) === null || _element$selectedMent2 === void 0 ? void 0 : _element$selectedMent2.length) !== null && _element$selectedMent !== void 0 ? _element$selectedMent : 0, " mention(s) s\xE9lectionn\xE9e(s)", ((_element$selectedMent3 = (_element$selectedMent4 = element.selectedMentions) === null || _element$selectedMent4 === void 0 ? void 0 : _element$selectedMent4.length) !== null && _element$selectedMent3 !== void 0 ? _element$selectedMent3 : 0) > 0 && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            style: {
              color: '#007bff',
              marginLeft: '8px'
            },
            children: "\u2022 Dimensions ajustables manuellement (avec clipping)"
          })]
        }), ((_element$selectedMent5 = (_element$selectedMent6 = element.selectedMentions) === null || _element$selectedMent6 === void 0 ? void 0 : _element$selectedMent6.length) !== null && _element$selectedMent5 !== void 0 ? _element$selectedMent5 : 0) > 0 && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginTop: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '11px',
              fontWeight: 'bold',
              marginBottom: '4px'
            },
            children: "S\xE9parateur entre mentions :"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.medleySeparator || 'double_newline',
            onChange: function onChange(e) {
              _onChange(element.id, 'medleySeparator', e.target.value);

              // RÃ©gÃ©nÃ©rer le texte avec le nouveau sÃ©parateur
              var selectedMentions = element.selectedMentions || [];
              var separatorMap = {
                'double_newline': '\n\n',
                'single_newline': '\n',
                'dash': ' - ',
                'bullet': ' â€¢ ',
                'pipe': ' | '
              };
              var separator = separatorMap[e.target.value] || '\n\n';
              var combinedText = selectedMentions.map(function (key) {
                var _predefinedMentions$f2;
                return (_predefinedMentions$f2 = predefinedMentions.find(function (m) {
                  return m.key === key;
                })) === null || _predefinedMentions$f2 === void 0 ? void 0 : _predefinedMentions$f2.text;
              }).filter(Boolean).join(separator);
              _onChange(element.id, 'text', combinedText);

              // Ajuster la hauteur et la largeur selon le nouveau nombre de lignes
              var lines = combinedText.split('\n');
              var fontSize = typeof element.fontSize === 'string' ? parseFloat(element.fontSize) : element.fontSize || 10;
              var lineHeight = fontSize * 1.3; // Harmoniser avec pdf-canvas-core.js
              var padding = 10; // RÃ©duire pour cohÃ©rence
              var iconSpace = 20; // Espace pour l'icÃ´ne
              var minHeight = 60; // Hauteur minimale basÃ©e sur la valeur par dÃ©faut
              var calculatedHeight = Math.max(minHeight, lines.length * lineHeight + iconSpace + padding);
              var maxHeight = 500;
              var newHeight = Math.min(calculatedHeight, maxHeight);

              // Calculer la largeur basÃ©e sur la ligne la plus longue
              var canvas = document.createElement('canvas');
              var ctx = canvas.getContext('2d');
              if (ctx) {
                ctx.font = "".concat(element.fontWeight || 'normal', " ").concat(fontSize, "px ").concat(element.fontFamily || 'Arial');
                var maxLineWidth = Math.max.apply(Math, MentionsProperties_toConsumableArray(lines.map(function (line) {
                  return ctx.measureText(line).width;
                })));
                var margin = 20; // MÃªme marge qu dans pdf-canvas-core.js (width - 20)
                var minWidth = 200;
                var calculatedWidth = Math.max(minWidth, maxLineWidth + margin);
                var maxWidth = 800;
                var newWidth = Math.min(calculatedWidth, maxWidth);
                if (element.width !== newWidth) {
                  _onChange(element.id, 'width', newWidth);
                }
              }
              if (element.height !== newHeight) {
                _onChange(element.id, 'height', newHeight);
              }
            },
            style: {
              width: '100%',
              padding: '4px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '11px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "double_newline",
              children: "Double saut de ligne"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "single_newline",
              children: "Saut de ligne simple"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "dash",
              children: "Tiret (-)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bullet",
              children: "Point (\u2022)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "pipe",
              children: "Barre verticale (|)"
            })]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Texte des mentions"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("textarea", {
          value: element.text || '',
          onChange: function onChange(e) {
            return _onChange(element.id, 'text', e.target.value);
          },
          placeholder: "Entrez le texte des mentions l\xE9gales...",
          rows: 6,
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px',
            resize: 'vertical'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Afficher un s\xE9parateur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "checkbox",
          checked: element.showSeparator !== false,
          onChange: function onChange(e) {
            return _onChange(element.id, 'showSeparator', e.target.checked);
          },
          style: {
            marginRight: '8px'
          }
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          style: {
            fontSize: '11px',
            color: '#666'
          },
          children: "Ligne de s\xE9paration avant les mentions"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Style du s\xE9parateur"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.separatorStyle || 'solid',
          onChange: function onChange(e) {
            return _onChange(element.id, 'separatorStyle', e.target.value);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "solid",
            children: "Ligne continue"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "dashed",
            children: "Tirets"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "dotted",
            children: "Pointill\xE9s"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "double",
            children: "Double ligne"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '12px',
            fontWeight: 'bold',
            color: '#333',
            marginBottom: '8px',
            padding: '4px 8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '3px',
            border: '1px solid #e9ecef'
          },
          children: "Affichage du fond"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            paddingLeft: '8px'
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(MentionsProperties_Toggle, {
            checked: element.showBackground !== false,
            onChange: function onChange(checked) {
              return _onChange(element.id, 'showBackground', checked);
            },
            label: "Afficher le fond",
            description: "Affiche un fond color\xE9 derri\xE8re les mentions"
          })
        })]
      })]
    }), mentionsCurrentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '8px'
          },
          children: "Th\xE8me visuel"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            display: 'grid',
            gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',
            gap: '8px',
            maxHeight: '200px',
            overflowY: 'auto',
            padding: '4px',
            border: '1px solid #e0e0e0',
            borderRadius: '4px',
            backgroundColor: '#fafafa'
          },
          children: mentionsThemes.map(function (theme) {
            return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              onClick: function onClick() {
                return _onChange(element.id, 'theme', theme.id);
              },
              style: {
                cursor: 'pointer',
                border: element.theme === theme.id ? '2px solid #007bff' : '2px solid transparent',
                borderRadius: '6px',
                padding: '6px',
                backgroundColor: '#ffffff',
                transition: 'all 0.2s ease'
              },
              title: theme.name,
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  fontSize: '10px',
                  fontWeight: 'bold',
                  marginBottom: '4px',
                  textAlign: 'center'
                },
                children: theme.name
              }), theme.preview]
            }, theme.id);
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Taille du texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.fontSize || '10',
          onChange: function onChange(e) {
            var _element$selectedMent7, _element$selectedMent8;
            _onChange(element.id, 'fontSize', e.target.value);

            // Si c'est un medley, ajuster la hauteur selon la nouvelle taille de police
            if (currentMentionType === 'medley' && ((_element$selectedMent7 = (_element$selectedMent8 = element.selectedMentions) === null || _element$selectedMent8 === void 0 ? void 0 : _element$selectedMent8.length) !== null && _element$selectedMent7 !== void 0 ? _element$selectedMent7 : 0) > 0) {
              var selectedMentions = element.selectedMentions || [];
              var separatorMap = {
                'double_newline': '\n\n',
                'single_newline': '\n',
                'dash': ' - ',
                'bullet': ' â€¢ ',
                'pipe': ' | '
              };
              var separator = separatorMap[element.medleySeparator || 'double_newline'] || '\n\n';
              var combinedText = selectedMentions.map(function (key) {
                var _predefinedMentions$f3;
                return (_predefinedMentions$f3 = predefinedMentions.find(function (m) {
                  return m.key === key;
                })) === null || _predefinedMentions$f3 === void 0 ? void 0 : _predefinedMentions$f3.text;
              }).filter(Boolean).join(separator);
              var lines = combinedText.split('\n');
              var fontSize = parseInt(e.target.value) || 10;
              var lineHeight = fontSize * 1.3; // Harmoniser avec pdf-canvas-core.js
              var padding = 10; // RÃ©duire le padding pour Ãªtre cohÃ©rent
              var iconSpace = 20; // Espace pour l'icÃ´ne comme dans Canvas
              var minHeight = 60; // Hauteur minimale basÃ©e sur la valeur par dÃ©faut
              var calculatedHeight = Math.max(minHeight, lines.length * lineHeight + iconSpace + padding); // + iconSpace pour l'icÃ´ne
              var maxHeight = 500;
              var newHeight = Math.min(calculatedHeight, maxHeight);

              // Calculer la largeur basÃ©e sur la ligne la plus longue
              var canvas = document.createElement('canvas');
              var ctx = canvas.getContext('2d');
              if (ctx) {
                ctx.font = "".concat(element.fontWeight || 'normal', " ").concat(fontSize, "px ").concat(element.fontFamily || 'Arial');
                var maxLineWidth = Math.max.apply(Math, MentionsProperties_toConsumableArray(lines.map(function (line) {
                  return ctx.measureText(line).width;
                })));
                var margin = 20; // MÃªme marge qu dans pdf-canvas-core.js (width - 20)
                var minWidth = 200;
                var calculatedWidth = Math.max(minWidth, maxLineWidth + margin);
                var maxWidth = 800;
                var newWidth = Math.min(calculatedWidth, maxWidth);
                if (element.width !== newWidth) {
                  _onChange(element.id, 'width', newWidth);
                }
              }
              if (element.height !== newHeight) {
                _onChange(element.id, 'height', newHeight);
              }
            }
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "8",
            children: "Tr\xE8s petit (8px)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "10",
            children: "Petit (10px)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "11",
            children: "Normal (11px)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "12",
            children: "Moyen (12px)"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Alignement du texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.textAlign || 'left',
          onChange: function onChange(e) {
            return _onChange(element.id, 'textAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "left",
            children: "Gauche"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "center",
            children: "Centre"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "right",
            children: "Droite"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Style du texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: 'flex',
            gap: '8px',
            flexWrap: 'wrap'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
            style: {
              fontSize: '11px',
              display: 'flex',
              alignItems: 'center'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "checkbox",
              checked: element.fontWeight === 'bold',
              onChange: function onChange(e) {
                return _onChange(element.id, 'fontWeight', e.target.checked ? 'bold' : 'normal');
              },
              style: {
                marginRight: '4px'
              }
            }), "Gras"]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
            style: {
              fontSize: '11px',
              color: '#666',
              display: 'flex',
              alignItems: 'center'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "checkbox",
              checked: element.fontStyle === 'italic',
              onChange: function onChange(e) {
                return _onChange(element.id, 'fontStyle', e.target.checked ? 'italic' : 'normal');
              },
              style: {
                marginRight: '4px'
              }
            }), "Italique"]
          })]
        })]
      }), element.showBackground !== false && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          marginTop: '16px',
          paddingTop: '16px',
          borderTop: '1px solid #e5e7eb'
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: 'bold',
              marginBottom: '6px'
            },
            children: "Couleur de fond"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.backgroundColor || '#e5e7eb',
            onChange: function onChange(e) {
              return _onChange(element.id, 'backgroundColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '40px',
              border: '1px solid #d1d5db',
              borderRadius: '6px',
              cursor: 'pointer'
            }
          })]
        })
      })]
    }), mentionsCurrentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Position X"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.x || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Position Y"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.y || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Largeur ", currentMentionType === 'medley' ? '(manuel = clipping activÃ©)' : '']
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.width || 500,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseInt(e.target.value) || 500);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        }), currentMentionType === 'medley' && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '10px',
            color: '#666',
            marginTop: '4px'
          },
          children: "Redimensionner manuellement active le clipping du texte"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Hauteur ", currentMentionType === 'medley' ? '(manuel = clipping activÃ©)' : '']
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.height || 60,
          onChange: function onChange(e) {
            return _onChange(element.id, 'height', parseInt(e.target.value) || 60);
          },
          style: {
            width: '100%',
            padding: '6px',
            border: '1px solid #ccc',
            borderRadius: '4px',
            fontSize: '12px'
          }
        }), currentMentionType === 'medley' && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: '10px',
            color: '#666',
            marginTop: '4px'
          },
          children: "Redimensionner manuellement active le clipping du texte"
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/DocumentTypeProperties.tsx
function DocumentTypeProperties_typeof(o) { "@babel/helpers - typeof"; return DocumentTypeProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, DocumentTypeProperties_typeof(o); }
function DocumentTypeProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function DocumentTypeProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? DocumentTypeProperties_ownKeys(Object(t), !0).forEach(function (r) { DocumentTypeProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : DocumentTypeProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function DocumentTypeProperties_defineProperty(e, r, t) { return (r = DocumentTypeProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function DocumentTypeProperties_toPropertyKey(t) { var i = DocumentTypeProperties_toPrimitive(t, "string"); return "symbol" == DocumentTypeProperties_typeof(i) ? i : i + ""; }
function DocumentTypeProperties_toPrimitive(t, r) { if ("object" != DocumentTypeProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != DocumentTypeProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }

// Composant Toggle personnalisÃ©
var DocumentTypeProperties_Toggle = function Toggle(_ref) {
  var checked = _ref.checked,
    onChange = _ref.onChange,
    label = _ref.label,
    description = _ref.description;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      marginBottom: '12px'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '6px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
        style: {
          fontSize: '12px',
          fontWeight: 'bold',
          color: '#333',
          flex: 1
        },
        children: label
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        onClick: function onClick() {
          return onChange(!checked);
        },
        style: {
          position: 'relative',
          width: '44px',
          height: '24px',
          backgroundColor: checked ? '#007bff' : '#ccc',
          borderRadius: '12px',
          cursor: 'pointer',
          transition: 'background-color 0.2s ease',
          border: 'none'
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            position: 'absolute',
            top: '2px',
            left: checked ? '22px' : '2px',
            width: '20px',
            height: '20px',
            backgroundColor: 'white',
            borderRadius: '50%',
            transition: 'left 0.2s ease',
            boxShadow: '0 1px 3px rgba(0,0,0,0.2)'
          }
        })
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        fontSize: '11px',
        color: '#666',
        lineHeight: '1.4'
      },
      children: description
    })]
  });
};
function DocumentTypeProperties(_ref2) {
  var element = _ref2.element,
    _onChange = _ref2.onChange,
    activeTab = _ref2.activeTab,
    setActiveTab = _ref2.setActiveTab;
  var documentCurrentTab = activeTab[element.id] || 'fonctionnalites';
  var setDocumentCurrentTab = function setDocumentCurrentTab(tab) {
    setActiveTab(DocumentTypeProperties_objectSpread(DocumentTypeProperties_objectSpread({}, activeTab), {}, DocumentTypeProperties_defineProperty({}, element.id, tab)));
  };
  var documentTypes = [{
    value: 'FACTURE',
    label: 'Facture'
  }, {
    value: 'DEVIS',
    label: 'Devis'
  }, {
    value: 'BON_COMMANDE',
    label: 'Bon de Commande'
  }, {
    value: 'AVOIR',
    label: 'Avoir'
  }, {
    value: 'RELEVE',
    label: 'RelevÃ©'
  }, {
    value: 'CONTRAT',
    label: 'Contrat'
  }];
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      padding: '16px',
      backgroundColor: '#ffffff',
      borderRadius: '8px',
      marginBottom: '16px'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        display: 'flex',
        marginBottom: '16px',
        borderBottom: '1px solid #e5e7eb'
      },
      children: [{
        key: 'fonctionnalites',
        label: 'FonctionnalitÃ©s'
      }, {
        key: 'personnalisation',
        label: 'Personnalisation'
      }, {
        key: 'positionnement',
        label: 'Positionnement'
      }].map(function (tab) {
        return /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
          onClick: function onClick() {
            return setDocumentCurrentTab(tab.key);
          },
          style: {
            padding: '8px 16px',
            border: 'none',
            backgroundColor: documentCurrentTab === tab.key ? '#007acc' : 'transparent',
            color: documentCurrentTab === tab.key ? '#ffffff' : '#6b7280',
            borderRadius: '4px 4px 0 0',
            cursor: 'pointer',
            fontSize: '12px',
            fontWeight: '500'
          },
          children: tab.label
        }, tab.key);
      })
    }), documentCurrentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
        style: {
          margin: '0 0 12px 0',
          fontSize: '14px',
          fontWeight: '600',
          color: '#374151'
        },
        children: "Type de Document"
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: '500',
            marginBottom: '4px',
            color: '#6b7280'
          },
          children: "Type"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("select", {
          value: element.documentType || 'FACTURE',
          onChange: function onChange(e) {
            return _onChange(element.id, 'documentType', e.target.value);
          },
          style: {
            width: '100%',
            padding: '8px 12px',
            border: '1px solid #d1d5db',
            borderRadius: '6px',
            fontSize: '14px',
            backgroundColor: '#ffffff'
          },
          children: documentTypes.map(function (type) {
            return /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: type.value,
              children: type.label
            }, type.value);
          })
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginTop: '16px',
          paddingTop: '16px',
          borderTop: '1px solid #e5e7eb'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
          style: {
            margin: '0 0 12px 0',
            fontSize: '14px',
            fontWeight: '600',
            color: '#374151'
          },
          children: "Affichage du fond"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)(DocumentTypeProperties_Toggle, {
          checked: element.showBackground !== false,
          onChange: function onChange(checked) {
            return _onChange(element.id, 'showBackground', checked);
          },
          label: "Afficher le fond",
          description: "Affiche un fond color\xE9 derri\xE8re le texte"
        })]
      })]
    }), documentCurrentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
        style: {
          margin: '0 0 12px 0',
          fontSize: '14px',
          fontWeight: '600',
          color: '#374151'
        },
        children: "Apparence du Texte"
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          display: 'grid',
          gap: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: '500',
              marginBottom: '4px',
              color: '#6b7280'
            },
            children: "Taille de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "number",
            value: element.fontSize || 18,
            onChange: function onChange(e) {
              return _onChange(element.id, 'fontSize', parseInt(e.target.value) || 18);
            },
            min: "8",
            max: "72",
            style: {
              width: '100%',
              padding: '8px 12px',
              border: '1px solid #d1d5db',
              borderRadius: '6px',
              fontSize: '14px'
            }
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: '500',
              marginBottom: '4px',
              color: '#6b7280'
            },
            children: "Style de police"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.fontWeight || 'bold',
            onChange: function onChange(e) {
              return _onChange(element.id, 'fontWeight', e.target.value);
            },
            style: {
              width: '100%',
              padding: '8px 12px',
              border: '1px solid #d1d5db',
              borderRadius: '6px',
              fontSize: '14px',
              backgroundColor: '#ffffff'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "normal",
              children: "Normal"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bold",
              children: "Gras"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "bolder",
              children: "Tr\xE8s gras"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "lighter",
              children: "Fin"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: '500',
              marginBottom: '4px',
              color: '#6b7280'
            },
            children: "Alignement"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
            value: element.textAlign || 'left',
            onChange: function onChange(e) {
              return _onChange(element.id, 'textAlign', e.target.value);
            },
            style: {
              width: '100%',
              padding: '8px 12px',
              border: '1px solid #d1d5db',
              borderRadius: '6px',
              fontSize: '14px',
              backgroundColor: '#ffffff'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "left",
              children: "Gauche"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "center",
              children: "Centre"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
              value: "right",
              children: "Droite"
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: '500',
              marginBottom: '4px',
              color: '#6b7280'
            },
            children: "Couleur du texte"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "color",
            value: element.textColor || '#000000',
            onChange: function onChange(e) {
              return _onChange(element.id, 'textColor', e.target.value);
            },
            style: {
              width: '100%',
              height: '40px',
              border: '1px solid #d1d5db',
              borderRadius: '6px',
              cursor: 'pointer'
            }
          })]
        })]
      }), element.showBackground !== false && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginTop: '16px',
          paddingTop: '16px',
          borderTop: '1px solid #e5e7eb'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
          style: {
            margin: '0 0 12px 0',
            fontSize: '14px',
            fontWeight: '600',
            color: '#374151'
          },
          children: "Couleur de fond"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.backgroundColor || '#e5e7eb',
          onChange: function onChange(e) {
            return _onChange(element.id, 'backgroundColor', e.target.value);
          },
          style: {
            width: '100%',
            height: '40px',
            border: '1px solid #d1d5db',
            borderRadius: '6px',
            cursor: 'pointer'
          }
        })]
      })]
    }), documentCurrentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h4", {
        style: {
          margin: '0 0 12px 0',
          fontSize: '14px',
          fontWeight: '600',
          color: '#374151'
        },
        children: "Position et Dimensions"
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          display: 'grid',
          gap: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: 'grid',
            gridTemplateColumns: '1fr 1fr',
            gap: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: '500',
                marginBottom: '4px',
                color: '#6b7280'
              },
              children: "Position X"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              value: element.x,
              onChange: function onChange(e) {
                return _onChange(element.id, 'x', parseFloat(e.target.value) || 0);
              },
              style: {
                width: '100%',
                padding: '8px 12px',
                border: '1px solid #d1d5db',
                borderRadius: '6px',
                fontSize: '14px'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: '500',
                marginBottom: '4px',
                color: '#6b7280'
              },
              children: "Position Y"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              value: element.y,
              onChange: function onChange(e) {
                return _onChange(element.id, 'y', parseFloat(e.target.value) || 0);
              },
              style: {
                width: '100%',
                padding: '8px 12px',
                border: '1px solid #d1d5db',
                borderRadius: '6px',
                fontSize: '14px'
              }
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: 'grid',
            gridTemplateColumns: '1fr 1fr',
            gap: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: '500',
                marginBottom: '4px',
                color: '#6b7280'
              },
              children: "Largeur"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              value: element.width,
              onChange: function onChange(e) {
                return _onChange(element.id, 'width', parseFloat(e.target.value) || 0);
              },
              style: {
                width: '100%',
                padding: '8px 12px',
                border: '1px solid #d1d5db',
                borderRadius: '6px',
                fontSize: '14px'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: '500',
                marginBottom: '4px',
                color: '#6b7280'
              },
              children: "Hauteur"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              value: element.height,
              onChange: function onChange(e) {
                return _onChange(element.id, 'height', parseFloat(e.target.value) || 0);
              },
              style: {
                width: '100%',
                padding: '8px 12px',
                border: '1px solid #d1d5db',
                borderRadius: '6px',
                fontSize: '14px'
              }
            })]
          })]
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/TextProperties.tsx
function TextProperties_typeof(o) { "@babel/helpers - typeof"; return TextProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, TextProperties_typeof(o); }

function TextProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function TextProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? TextProperties_ownKeys(Object(t), !0).forEach(function (r) { TextProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : TextProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function TextProperties_defineProperty(e, r, t) { return (r = TextProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function TextProperties_toPropertyKey(t) { var i = TextProperties_toPrimitive(t, "string"); return "symbol" == TextProperties_typeof(i) ? i : i + ""; }
function TextProperties_toPrimitive(t, r) { if ("object" != TextProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != TextProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function TextProperties(_ref) {
  var element = _ref.element,
    _onChange = _ref.onChange,
    activeTab = _ref.activeTab,
    setActiveTab = _ref.setActiveTab;
  var textCurrentTab = activeTab[element.id] || 'fonctionnalites';
  var setTextCurrentTab = function setTextCurrentTab(tab) {
    setActiveTab(TextProperties_objectSpread(TextProperties_objectSpread({}, activeTab), {}, TextProperties_defineProperty({}, element.id, tab)));
  };
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setTextCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: textCurrentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: textCurrentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setTextCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: textCurrentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: textCurrentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setTextCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: textCurrentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: textCurrentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), textCurrentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Contenu du texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("textarea", {
          value: element.text || '',
          onChange: function onChange(e) {
            return _onChange(element.id, 'text', e.target.value);
          },
          style: {
            width: '100%',
            minHeight: '60px',
            padding: '8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px',
            fontFamily: 'monospace',
            resize: 'vertical'
          },
          placeholder: "Entrez votre texte ici..."
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Alignement horizontal"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.textAlign || element.align || 'left',
          onChange: function onChange(e) {
            return _onChange(element.id, 'textAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "left",
            children: "Gauche"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "center",
            children: "Centre"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "right",
            children: "Droite"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "justify",
            children: "Justifi\xE9"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Alignement vertical"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.verticalAlign || 'top',
          onChange: function onChange(e) {
            return _onChange(element.id, 'verticalAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "top",
            children: "Haut"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "middle",
            children: "Milieu"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "bottom",
            children: "Bas"
          })]
        })]
      })]
    }), textCurrentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Police"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.fontFamily || 'Arial',
          onChange: function onChange(e) {
            return _onChange(element.id, 'fontFamily', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Arial",
            children: "Arial"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Helvetica",
            children: "Helvetica"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Times New Roman",
            children: "Times New Roman"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Courier New",
            children: "Courier New"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Georgia",
            children: "Georgia"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Verdana",
            children: "Verdana"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Tahoma",
            children: "Tahoma"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Taille de police ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.fontSize || 16, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "6",
          max: "72",
          value: element.fontSize || 16,
          onChange: function onChange(e) {
            return _onChange(element.id, 'fontSize', parseInt(e.target.value) || 16);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Style de police"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: 'flex',
            gap: '4px',
            flexWrap: 'wrap'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              return _onChange(element.id, 'fontWeight', element.fontWeight === 'bold' ? 'normal' : 'bold');
            },
            style: {
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              backgroundColor: element.fontWeight === 'bold' ? '#007bff' : '#f8f9fa',
              color: element.fontWeight === 'bold' ? '#fff' : '#333',
              cursor: 'pointer',
              fontSize: '11px',
              fontWeight: 'bold'
            },
            children: "B"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              return _onChange(element.id, 'fontStyle', element.fontStyle === 'italic' ? 'normal' : 'italic');
            },
            style: {
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              backgroundColor: element.fontStyle === 'italic' ? '#007bff' : '#f8f9fa',
              color: element.fontStyle === 'italic' ? '#fff' : '#333',
              cursor: 'pointer',
              fontSize: '11px',
              fontStyle: 'italic'
            },
            children: "I"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              return _onChange(element.id, 'textDecoration', element.textDecoration === 'underline' ? 'none' : 'underline');
            },
            style: {
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              backgroundColor: element.textDecoration === 'underline' ? '#007bff' : '#f8f9fa',
              color: element.textDecoration === 'underline' ? '#fff' : '#333',
              cursor: 'pointer',
              fontSize: '11px',
              textDecoration: 'underline'
            },
            children: "U"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Couleur du texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.textColor || element.color || '#000000',
          onChange: function onChange(e) {
            return _onChange(element.id, 'textColor', e.target.value);
          },
          style: {
            width: '100%',
            height: '32px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            cursor: 'pointer'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Couleur de fond"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.backgroundColor === 'transparent' ? '#ffffff' : element.backgroundColor || '#ffffff',
          onChange: function onChange(e) {
            return _onChange(element.id, 'backgroundColor', e.target.value);
          },
          style: {
            width: '100%',
            height: '32px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            cursor: 'pointer'
          }
        })]
      })]
    }), textCurrentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Position X ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.x || 0, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.x || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Position Y ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.y || 0, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.y || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Largeur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.width || 100, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "1",
          value: element.width || 100,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseFloat(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Hauteur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.height || 50, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "1",
          value: element.height || 50,
          onChange: function onChange(e) {
            return _onChange(element.id, 'height', parseFloat(e.target.value) || 50);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Rotation ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.rotation || 0, "\xB0)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "-180",
          max: "180",
          value: element.rotation || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'rotation', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Opacit\xE9 ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", Math.round((element.opacity || 1) * 100), "%)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "range",
          min: "0",
          max: "1",
          step: "0.1",
          value: element.opacity || 1,
          onChange: function onChange(e) {
            return _onChange(element.id, 'opacity', parseFloat(e.target.value));
          },
          style: {
            width: '100%'
          }
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/ShapeProperties.tsx
function ShapeProperties_typeof(o) { "@babel/helpers - typeof"; return ShapeProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, ShapeProperties_typeof(o); }

function ShapeProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function ShapeProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ShapeProperties_ownKeys(Object(t), !0).forEach(function (r) { ShapeProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ShapeProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function ShapeProperties_defineProperty(e, r, t) { return (r = ShapeProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function ShapeProperties_toPropertyKey(t) { var i = ShapeProperties_toPrimitive(t, "string"); return "symbol" == ShapeProperties_typeof(i) ? i : i + ""; }
function ShapeProperties_toPrimitive(t, r) { if ("object" != ShapeProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != ShapeProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function ShapeProperties(_ref) {
  var element = _ref.element,
    _onChange = _ref.onChange,
    activeTab = _ref.activeTab,
    setActiveTab = _ref.setActiveTab;
  var shapeCurrentTab = activeTab[element.id] || 'fonctionnalites';
  var setShapeCurrentTab = function setShapeCurrentTab(tab) {
    setActiveTab(ShapeProperties_objectSpread(ShapeProperties_objectSpread({}, activeTab), {}, ShapeProperties_defineProperty({}, element.id, tab)));
  };
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setShapeCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: shapeCurrentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: shapeCurrentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setShapeCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: shapeCurrentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: shapeCurrentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setShapeCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: shapeCurrentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: shapeCurrentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), shapeCurrentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [element.type === 'circle' && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Forme"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            padding: '8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '4px',
            textAlign: 'center'
          },
          children: "Cercle"
        })]
      }), element.type === 'rectangle' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: 'bold',
              marginBottom: '6px'
            },
            children: "Forme"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              padding: '8px',
              backgroundColor: '#f8f9fa',
              borderRadius: '4px',
              textAlign: 'center'
            },
            children: "Rectangle"
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
            style: {
              display: 'block',
              fontSize: '12px',
              fontWeight: 'bold',
              marginBottom: '6px'
            },
            children: ["Rayon des coins ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
              style: {
                color: '#666',
                fontSize: '10px'
              },
              children: ["(", element.borderRadius || 0, "px)"]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "number",
            min: "0",
            max: "50",
            value: element.borderRadius || 0,
            onChange: function onChange(e) {
              return _onChange(element.id, 'borderRadius', parseInt(e.target.value) || 0);
            },
            style: {
              width: '100%',
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            }
          })]
        })]
      })]
    }), shapeCurrentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Couleur de remplissage"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.fillColor === 'transparent' ? '#ffffff' : element.fillColor || '#007bff',
          onChange: function onChange(e) {
            return _onChange(element.id, 'fillColor', e.target.value);
          },
          style: {
            width: '100%',
            height: '32px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            cursor: 'pointer'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Couleur de bordure"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.strokeColor === 'transparent' ? '#000000' : element.strokeColor || '#000000',
          onChange: function onChange(e) {
            return _onChange(element.id, 'strokeColor', e.target.value);
          },
          style: {
            width: '100%',
            height: '32px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            cursor: 'pointer'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["\xC9paisseur de bordure ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.strokeWidth || 1, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "0",
          max: "20",
          value: element.strokeWidth || 1,
          onChange: function onChange(e) {
            return _onChange(element.id, 'strokeWidth', parseInt(e.target.value) || 1);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      })]
    }), shapeCurrentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Position X ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.x || 0, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.x || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Position Y ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.y || 0, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.y || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Largeur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.width || 100, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "1",
          value: element.width || 100,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseFloat(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Hauteur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.height || 100, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "1",
          value: element.height || 100,
          onChange: function onChange(e) {
            return _onChange(element.id, 'height', parseFloat(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Rotation ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.rotation || 0, "\xB0)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "-180",
          max: "180",
          value: element.rotation || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'rotation', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Opacit\xE9 ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", Math.round((element.opacity || 1) * 100), "%)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "range",
          min: "0",
          max: "1",
          step: "0.1",
          value: element.opacity || 1,
          onChange: function onChange(e) {
            return _onChange(element.id, 'opacity', parseFloat(e.target.value));
          },
          style: {
            width: '100%'
          }
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/ImageProperties.tsx
function ImageProperties_typeof(o) { "@babel/helpers - typeof"; return ImageProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, ImageProperties_typeof(o); }
function ImageProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function ImageProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ImageProperties_ownKeys(Object(t), !0).forEach(function (r) { ImageProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ImageProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function ImageProperties_defineProperty(e, r, t) { return (r = ImageProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function ImageProperties_toPropertyKey(t) { var i = ImageProperties_toPrimitive(t, "string"); return "symbol" == ImageProperties_typeof(i) ? i : i + ""; }
function ImageProperties_toPrimitive(t, r) { if ("object" != ImageProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != ImageProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


function ImageProperties(_ref) {
  var element = _ref.element,
    _onChange = _ref.onChange,
    activeTab = _ref.activeTab,
    setActiveTab = _ref.setActiveTab;
  var canvasSettings = CanvasSettingsContext_useCanvasSettings();
  var imageCurrentTab = activeTab[element.id] || 'fonctionnalites';
  var setImageCurrentTab = function setImageCurrentTab(tab) {
    setActiveTab(ImageProperties_objectSpread(ImageProperties_objectSpread({}, activeTab), {}, ImageProperties_defineProperty({}, element.id, tab)));
  };
  var openMediaLibrary = function openMediaLibrary() {
    var _window$wp;
    if ((_window$wp = window.wp) !== null && _window$wp !== void 0 && _window$wp.media && typeof window.wp.media === 'function') {
      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      var media = window.wp.media({
        title: 'SÃ©lectionner une image',
        button: {
          text: 'Utiliser cette image'
        },
        multiple: false
      });

      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      media.on('select', function () {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        var attachment = media.state().get('selection').first().toJSON();
        _onChange(element.id, 'src', attachment.url);
      });

      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      media.open();
    } else {
      alert('BibliothÃ¨que de mÃ©dias WordPress non disponible. Veuillez saisir l\'URL manuellement.');
    }
  };
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setImageCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: imageCurrentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: imageCurrentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setImageCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: imageCurrentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: imageCurrentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setImageCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: imageCurrentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: imageCurrentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), imageCurrentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Source de l'image"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: 'flex',
            gap: '4px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
            type: "text",
            value: element.src || '',
            onChange: function onChange(e) {
              return _onChange(element.id, 'src', e.target.value);
            },
            placeholder: "URL de l'image",
            style: {
              flex: 1,
              padding: '4px 8px',
              border: '1px solid #ccc',
              borderRadius: '3px',
              fontSize: '12px'
            }
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: openMediaLibrary,
            style: {
              padding: '4px 8px',
              border: '1px solid #007bff',
              borderRadius: '3px',
              backgroundColor: '#007bff',
              color: '#fff',
              cursor: 'pointer',
              fontSize: '11px'
            },
            title: "Ouvrir la m\xE9diath\xE8que WordPress",
            children: "\uD83D\uDCC1"
          })]
        })]
      }), element.src && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Aper\xE7u"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            padding: '8px',
            border: '1px solid #e0e0e0',
            borderRadius: '4px',
            backgroundColor: '#f8f9fa',
            textAlign: 'center'
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsx)("img", {
            src: element.src,
            alt: "Aper\xE7u",
            style: {
              maxWidth: '100%',
              maxHeight: '100px',
              borderRadius: '4px',
              boxShadow: '0 1px 3px rgba(0,0,0,0.1)'
            }
          })
        })]
      })]
    }), imageCurrentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Ajustement de l'image"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.objectFit || 'contain',
          onChange: function onChange(e) {
            return _onChange(element.id, 'objectFit', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "contain",
            children: "Contenir (respecter les proportions)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "cover",
            children: "Couvrir (remplir compl\xE8tement)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "fill",
            children: "Remplir (\xE9tirer si n\xE9cessaire)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "none",
            children: "Aucun (taille originale)"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "scale-down",
            children: "R\xE9duire (taille originale ou contenir)"
          })]
        })]
      })
    }), imageCurrentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Position X ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.x || 0, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.x || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Position Y ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.y || 0, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.y || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Largeur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.width || 100, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "1",
          value: element.width || 100,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseFloat(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Hauteur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.height || 100, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "1",
          value: element.height || 100,
          onChange: function onChange(e) {
            return _onChange(element.id, 'height', parseFloat(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), (canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.selectionRotationEnabled) && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Rotation ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.rotation || 0, "\xB0)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "-180",
          max: "180",
          value: element.rotation || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'rotation', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Opacit\xE9 ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", Math.round((element.opacity || 1) * 100), "%)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "range",
          min: "0",
          max: "1",
          step: "0.1",
          value: element.opacity || 1,
          onChange: function onChange(e) {
            return _onChange(element.id, 'opacity', parseFloat(e.target.value));
          },
          style: {
            width: '100%'
          }
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/LineProperties.tsx
function LineProperties_typeof(o) { "@babel/helpers - typeof"; return LineProperties_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, LineProperties_typeof(o); }
function LineProperties_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function LineProperties_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? LineProperties_ownKeys(Object(t), !0).forEach(function (r) { LineProperties_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : LineProperties_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function LineProperties_defineProperty(e, r, t) { return (r = LineProperties_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function LineProperties_toPropertyKey(t) { var i = LineProperties_toPrimitive(t, "string"); return "symbol" == LineProperties_typeof(i) ? i : i + ""; }
function LineProperties_toPrimitive(t, r) { if ("object" != LineProperties_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != LineProperties_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }


function LineProperties(_ref) {
  var element = _ref.element,
    _onChange = _ref.onChange,
    activeTab = _ref.activeTab,
    setActiveTab = _ref.setActiveTab;
  var canvasSettings = CanvasSettingsContext_useCanvasSettings();
  var lineCurrentTab = activeTab[element.id] || 'fonctionnalites';
  var setLineCurrentTab = function setLineCurrentTab(tab) {
    setActiveTab(LineProperties_objectSpread(LineProperties_objectSpread({}, activeTab), {}, LineProperties_defineProperty({}, element.id, tab)));
  };
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        marginBottom: '12px',
        borderBottom: '2px solid #ddd',
        gap: '2px',
        flexWrap: 'wrap'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setLineCurrentTab('fonctionnalites');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: lineCurrentTab === 'fonctionnalites' ? '#007bff' : '#f0f0f0',
          color: lineCurrentTab === 'fonctionnalites' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Fonctionnalit\xE9s",
        children: "Fonctionnalit\xE9s"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setLineCurrentTab('personnalisation');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: lineCurrentTab === 'personnalisation' ? '#007bff' : '#f0f0f0',
          color: lineCurrentTab === 'personnalisation' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Personnalisation",
        children: "Personnalisation"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
        onClick: function onClick() {
          return setLineCurrentTab('positionnement');
        },
        style: {
          flex: '1 1 30%',
          padding: '8px 6px',
          backgroundColor: lineCurrentTab === 'positionnement' ? '#007bff' : '#f0f0f0',
          color: lineCurrentTab === 'positionnement' ? '#fff' : '#333',
          border: 'none',
          cursor: 'pointer',
          fontSize: '11px',
          fontWeight: 'bold',
          borderRadius: '3px 3px 0 0',
          minWidth: '0',
          whiteSpace: 'nowrap',
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        },
        title: "Positionnement",
        children: "Positionnement"
      })]
    }), lineCurrentTab === 'fonctionnalites' && /*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Type d'\xE9l\xE9ment"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            padding: '8px',
            backgroundColor: '#f8f9fa',
            borderRadius: '4px',
            textAlign: 'center'
          },
          children: "Ligne"
        })]
      })
    }), lineCurrentTab === 'personnalisation' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Couleur de la ligne"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.strokeColor || '#000000',
          onChange: function onChange(e) {
            return _onChange(element.id, 'strokeColor', e.target.value);
          },
          style: {
            width: '100%',
            height: '32px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            cursor: 'pointer'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["\xC9paisseur de la ligne ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.strokeWidth || 2, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "1",
          max: "20",
          value: element.strokeWidth || 2,
          onChange: function onChange(e) {
            return _onChange(element.id, 'strokeWidth', parseInt(e.target.value) || 2);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Opacit\xE9 ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", Math.round((element.opacity || 1) * 100), "%)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "range",
          min: "0",
          max: "1",
          step: "0.1",
          value: element.opacity || 1,
          onChange: function onChange(e) {
            return _onChange(element.id, 'opacity', parseFloat(e.target.value));
          },
          style: {
            width: '100%'
          }
        })]
      })]
    }), lineCurrentTab === 'positionnement' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Position X ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.x || 0, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.x || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'x', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Position Y ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.y || 0, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          value: element.y || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'y', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Longueur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.width || 100, "px)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "1",
          value: element.width || 100,
          onChange: function onChange(e) {
            return _onChange(element.id, 'width', parseFloat(e.target.value) || 100);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), (canvasSettings === null || canvasSettings === void 0 ? void 0 : canvasSettings.selectionRotationEnabled) && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: ["Rotation ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              color: '#666',
              fontSize: '10px'
            },
            children: ["(", element.rotation || 0, "\xB0)"]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "-180",
          max: "180",
          value: element.rotation || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'rotation', parseFloat(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/ElementProperties.tsx

function ElementProperties(_ref) {
  var element = _ref.element,
    _onChange = _ref.onChange;
  return /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        marginBottom: '12px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
        style: {
          display: 'block',
          fontSize: '12px',
          fontWeight: 'bold',
          marginBottom: '4px'
        },
        children: ["Largeur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
          style: {
            color: '#666',
            fontSize: '10px'
          },
          children: ["(", ((element.width || 100) * 1).toFixed(1), "px)"]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
        type: "number",
        min: "1",
        step: "0.1",
        value: element.width || 100,
        onChange: function onChange(e) {
          return _onChange(element.id, 'width', parseFloat(e.target.value) || 100);
        },
        style: {
          width: '100%',
          padding: '4px 8px',
          border: '1px solid #ccc',
          borderRadius: '3px',
          fontSize: '12px'
        },
        placeholder: "Valeur en pixels"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("small", {
        style: {
          color: '#999',
          display: 'block',
          marginTop: '2px'
        },
        children: "Entrer la largeur en pixels"
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        marginBottom: '12px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
        style: {
          display: 'block',
          fontSize: '12px',
          fontWeight: 'bold',
          marginBottom: '4px'
        },
        children: ["Hauteur ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
          style: {
            color: '#666',
            fontSize: '10px'
          },
          children: ["(", ((element.height || 50) * 1).toFixed(1), "px)"]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
        type: "number",
        min: "1",
        step: "0.1",
        value: element.height || 50,
        onChange: function onChange(e) {
          return _onChange(element.id, 'height', parseFloat(e.target.value) || 50);
        },
        style: {
          width: '100%',
          padding: '4px 8px',
          border: '1px solid #ccc',
          borderRadius: '3px',
          fontSize: '12px'
        },
        placeholder: "Valeur en pixels"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("small", {
        style: {
          color: '#999',
          display: 'block',
          marginTop: '2px'
        },
        children: "Entrer la hauteur en pixels"
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        marginBottom: '12px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
        style: {
          display: 'block',
          fontSize: '12px',
          fontWeight: 'bold',
          marginBottom: '4px'
        },
        children: ["Position X ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
          style: {
            color: '#666',
            fontSize: '10px'
          },
          children: ["(", ((element.x || 0) * 1).toFixed(1), "px)"]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
        type: "number",
        min: "0",
        step: "0.1",
        value: element.x || 0,
        onChange: function onChange(e) {
          return _onChange(element.id, 'x', parseFloat(e.target.value) || 0);
        },
        style: {
          width: '100%',
          padding: '4px 8px',
          border: '1px solid #ccc',
          borderRadius: '3px',
          fontSize: '12px'
        },
        placeholder: "Valeur en pixels"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("small", {
        style: {
          color: '#999',
          display: 'block',
          marginTop: '2px'
        },
        children: "Entrer la position en pixels"
      })]
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        marginBottom: '12px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
        style: {
          display: 'block',
          fontSize: '12px',
          fontWeight: 'bold',
          marginBottom: '4px'
        },
        children: ["Position Y ", /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
          style: {
            color: '#666',
            fontSize: '10px'
          },
          children: ["(", ((element.y || 0) * 1).toFixed(1), "px)"]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
        type: "number",
        min: "0",
        step: "0.1",
        value: element.y || 0,
        onChange: function onChange(e) {
          return _onChange(element.id, 'y', parseFloat(e.target.value) || 0);
        },
        style: {
          width: '100%',
          padding: '4px 8px',
          border: '1px solid #ccc',
          borderRadius: '3px',
          fontSize: '12px'
        },
        placeholder: "Valeur en pixels"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("small", {
        style: {
          color: '#999',
          display: 'block',
          marginTop: '2px'
        },
        children: "Entrer la position en pixels"
      })]
    }), element.type === 'rectangle' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("hr", {
        style: {
          margin: '16px 0',
          border: 'none',
          borderTop: '1px solid #ddd'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Couleur de fond"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.fillColor || '#ffffff',
          onChange: function onChange(e) {
            return _onChange(element.id, 'fillColor', e.target.value);
          },
          style: {
            width: '100%',
            height: '32px',
            border: '1px solid #ccc',
            borderRadius: '3px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Couleur de bordure"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.strokeColor || '#000000',
          onChange: function onChange(e) {
            return _onChange(element.id, 'strokeColor', e.target.value);
          },
          style: {
            width: '100%',
            height: '32px',
            border: '1px solid #ccc',
            borderRadius: '3px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "\xC9paisseur de bordure"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "0",
          max: "20",
          value: element.strokeWidth || 1,
          onChange: function onChange(e) {
            return _onChange(element.id, 'strokeWidth', parseInt(e.target.value) || 1);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Rayon des coins"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "0",
          max: "50",
          value: element.borderRadius || 0,
          onChange: function onChange(e) {
            return _onChange(element.id, 'borderRadius', parseInt(e.target.value) || 0);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      })]
    }), element.type === 'circle' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("hr", {
        style: {
          margin: '16px 0',
          border: 'none',
          borderTop: '1px solid #ddd'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Couleur de fond"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.fillColor || '#ffffff',
          onChange: function onChange(e) {
            return _onChange(element.id, 'fillColor', e.target.value);
          },
          style: {
            width: '100%',
            height: '32px',
            border: '1px solid #ccc',
            borderRadius: '3px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Couleur de bordure"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.strokeColor || '#000000',
          onChange: function onChange(e) {
            return _onChange(element.id, 'strokeColor', e.target.value);
          },
          style: {
            width: '100%',
            height: '32px',
            border: '1px solid #ccc',
            borderRadius: '3px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "\xC9paisseur de bordure"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "0",
          max: "20",
          value: element.strokeWidth || 1,
          onChange: function onChange(e) {
            return _onChange(element.id, 'strokeWidth', parseInt(e.target.value) || 1);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      })]
    }), element.type === 'text' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("hr", {
        style: {
          margin: '16px 0',
          border: 'none',
          borderTop: '1px solid #ddd'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("textarea", {
          value: element.text || '',
          onChange: function onChange(e) {
            return _onChange(element.id, 'text', e.target.value);
          },
          rows: 3,
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px',
            resize: 'vertical'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Taille de police"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "number",
          min: "8",
          max: "72",
          value: element.fontSize || 12,
          onChange: function onChange(e) {
            return _onChange(element.id, 'fontSize', parseInt(e.target.value) || 12);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Couleur du texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "color",
          value: element.color || '#000000',
          onChange: function onChange(e) {
            return _onChange(element.id, 'color', e.target.value);
          },
          style: {
            width: '100%',
            height: '32px',
            border: '1px solid #ccc',
            borderRadius: '3px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Alignement"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.textAlign || 'left',
          onChange: function onChange(e) {
            return _onChange(element.id, 'textAlign', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "left",
            children: "Gauche"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "center",
            children: "Centre"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "right",
            children: "Droite"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Police"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.fontFamily || 'Arial',
          onChange: function onChange(e) {
            return _onChange(element.id, 'fontFamily', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Arial",
            children: "Arial"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Helvetica",
            children: "Helvetica"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Times New Roman",
            children: "Times New Roman"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Courier New",
            children: "Courier New"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Georgia",
            children: "Georgia"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "Verdana",
            children: "Verdana"
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '6px'
          },
          children: "Style du texte"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: 'flex',
            gap: '8px',
            flexWrap: 'wrap'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
            style: {
              display: 'flex',
              alignItems: 'center',
              fontSize: '11px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "checkbox",
              checked: element.bold || false,
              onChange: function onChange(e) {
                return _onChange(element.id, 'bold', e.target.checked);
              },
              style: {
                marginRight: '4px'
              }
            }), "Gras"]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
            style: {
              display: 'flex',
              alignItems: 'center',
              fontSize: '11px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "checkbox",
              checked: element.italic || false,
              onChange: function onChange(e) {
                return _onChange(element.id, 'italic', e.target.checked);
              },
              style: {
                marginRight: '4px'
              }
            }), "Italique"]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
            style: {
              display: 'flex',
              alignItems: 'center',
              fontSize: '11px'
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "checkbox",
              checked: element.underline || false,
              onChange: function onChange(e) {
                return _onChange(element.id, 'underline', e.target.checked);
              },
              style: {
                marginRight: '4px'
              }
            }), "Soulign\xE9"]
          })]
        })]
      })]
    }), element.type === 'image' && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("hr", {
        style: {
          margin: '16px 0',
          border: 'none',
          borderTop: '1px solid #ddd'
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "URL de l'image"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
          type: "text",
          value: element.src || '',
          onChange: function onChange(e) {
            return _onChange(element.id, 'src', e.target.value);
          },
          placeholder: "https://example.com/image.jpg",
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          }
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '12px'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
          style: {
            display: 'block',
            fontSize: '12px',
            fontWeight: 'bold',
            marginBottom: '4px'
          },
          children: "Ajustement"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
          value: element.objectFit || 'contain',
          onChange: function onChange(e) {
            return _onChange(element.id, 'objectFit', e.target.value);
          },
          style: {
            width: '100%',
            padding: '4px 8px',
            border: '1px solid #ccc',
            borderRadius: '3px',
            fontSize: '12px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "contain",
            children: "Contenir"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "cover",
            children: "Couvrir"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "fill",
            children: "Remplir"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "none",
            children: "Aucun"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
            value: "scale-down",
            children: "R\xE9duire"
          })]
        })]
      })]
    })]
  });
}
;// ./src/js/react/components/properties/PropertiesPanel.tsx
function PropertiesPanel_typeof(o) { "@babel/helpers - typeof"; return PropertiesPanel_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, PropertiesPanel_typeof(o); }
function PropertiesPanel_defineProperty(e, r, t) { return (r = PropertiesPanel_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function PropertiesPanel_toPropertyKey(t) { var i = PropertiesPanel_toPrimitive(t, "string"); return "symbol" == PropertiesPanel_typeof(i) ? i : i + ""; }
function PropertiesPanel_toPrimitive(t, r) { if ("object" != PropertiesPanel_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != PropertiesPanel_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function PropertiesPanel_slicedToArray(r, e) { return PropertiesPanel_arrayWithHoles(r) || PropertiesPanel_iterableToArrayLimit(r, e) || PropertiesPanel_unsupportedIterableToArray(r, e) || PropertiesPanel_nonIterableRest(); }
function PropertiesPanel_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function PropertiesPanel_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return PropertiesPanel_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? PropertiesPanel_arrayLikeToArray(r, a) : void 0; } }
function PropertiesPanel_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function PropertiesPanel_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function PropertiesPanel_arrayWithHoles(r) { if (Array.isArray(r)) return r; }




















var PropertiesPanel = /*#__PURE__*/(0,react.memo)(function PropertiesPanel(_ref) {
  var className = _ref.className;
  var _useBuilder = useBuilder(),
    state = _useBuilder.state,
    updateElement = _useBuilder.updateElement,
    removeElement = _useBuilder.removeElement;
  var _useState = (0,react.useState)({}),
    _useState2 = PropertiesPanel_slicedToArray(_useState, 2),
    activeTab = _useState2[0],
    setActiveTab = _useState2[1];
  var isMobile = useResponsive_useIsMobile();
  var isTablet = useResponsive_useIsTablet();

  // Optimisation: mÃ©moriser les Ã©lÃ©ments sÃ©lectionnÃ©s
  var selectedElements = (0,react.useMemo)(function () {
    return state.elements.filter(function (el) {
      return state.selection.selectedElements.includes(el.id);
    });
  }, [state.elements, state.selection.selectedElements]);

  // Optimisation: mÃ©moriser les handlers
  var handlePropertyChange = (0,react.useCallback)(function (elementId, property, value) {
    updateElement(elementId, PropertiesPanel_defineProperty({}, property, value));
  }, [updateElement]);
  var handleDeleteSelected = (0,react.useCallback)(function () {
    state.selection.selectedElements.forEach(function (id) {
      removeElement(id);
    });
  }, [state.selection.selectedElements, removeElement]);
  if (selectedElements.length === 0) {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(ResponsiveContainer, {
      className: "pdf-builder-properties ".concat(className || ''),
      mobileClass: "properties-panel-mobile",
      tabletClass: "properties-panel-tablet",
      desktopClass: "properties-panel-desktop",
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          padding: isMobile ? '8px' : '12px',
          backgroundColor: '#f9f9f9',
          border: '1px solid #ddd',
          borderRadius: '4px',
          minHeight: isMobile ? '150px' : '200px',
          maxHeight: isMobile ? 'calc(50vh - 16px)' : 'calc(100vh - 32px)',
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          justifyContent: 'center',
          textAlign: 'center'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: isMobile ? '24px' : '32px',
            marginBottom: '8px',
            opacity: 0.5
          },
          children: "\uD83C\uDFAF"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: isMobile ? '12px' : '14px',
            color: '#666',
            fontWeight: '500'
          },
          children: isMobile ? 'SÃ©lectionnez un Ã©lÃ©ment' : 'SÃ©lectionnez un Ã©lÃ©ment pour modifier ses propriÃ©tÃ©s'
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            fontSize: isMobile ? '10px' : '12px',
            color: '#999',
            marginTop: '4px',
            display: isMobile ? 'none' : 'block'
          },
          children: "Cliquez sur un \xE9l\xE9ment du canvas pour commencer"
        })]
      })
    });
  }
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    className: "pdf-builder-properties ".concat(className || ''),
    style: {
      padding: '12px',
      backgroundColor: '#f9f9f9',
      border: '1px solid #ddd',
      borderRadius: '4px',
      maxHeight: 'calc(100vh - 32px)',
      overflowY: 'auto'
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '12px'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("h4", {
        style: {
          margin: '0',
          fontSize: '14px',
          fontWeight: 'bold'
        },
        children: ["Propri\xE9t\xE9s (", selectedElements.length, ")"]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          display: 'flex',
          gap: '4px'
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
          onClick: handleDeleteSelected,
          style: {
            padding: '4px 8px',
            border: '1px solid #dc3545',
            borderRadius: '4px',
            backgroundColor: '#dc3545',
            color: '#ffffff',
            cursor: 'pointer',
            fontSize: '12px'
          },
          children: "\uD83D\uDDD1\uFE0F Supprimer"
        })
      })]
    }), selectedElements.map(function (element) {
      return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          marginBottom: '16px',
          padding: '12px',
          backgroundColor: '#ffffff',
          border: '1px solid #e0e0e0',
          borderRadius: '4px',
          maxHeight: 'calc(100vh - 120px)',
          overflowY: 'auto'
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("h5", {
          style: {
            margin: '0 0 8px 0',
            fontSize: '13px',
            fontWeight: 'bold'
          },
          children: [element.type.charAt(0).toUpperCase() + element.type.slice(1), " - ", element.id.slice(0, 8)]
        }), element.type !== 'product_table' && element.type !== 'customer_info' && element.type !== 'company_info' && element.type !== 'company_logo' && element.type !== 'order_number' && element.type !== 'woocommerce_order_date' && element.type !== 'woocommerce_invoice_number' && element.type !== 'document_type' && element.type !== 'dynamic_text' && element.type !== 'mentions' && element.type !== 'text' && element.type !== 'rectangle' && element.type !== 'circle' && element.type !== 'image' && element.type !== 'line' && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: 'grid',
            gap: '8px'
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Position X"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              value: element.x,
              onChange: function onChange(e) {
                return handlePropertyChange(element.id, 'x', parseFloat(e.target.value) || 0);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Position Y"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              value: element.y,
              onChange: function onChange(e) {
                return handlePropertyChange(element.id, 'y', parseFloat(e.target.value) || 0);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Largeur"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              value: element.width,
              onChange: function onChange(e) {
                return handlePropertyChange(element.id, 'width', parseFloat(e.target.value) || 0);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Hauteur"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              value: element.height,
              onChange: function onChange(e) {
                return handlePropertyChange(element.id, 'height', parseFloat(e.target.value) || 0);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Rotation (\xB0)"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "number",
              value: element.rotation || 0,
              onChange: function onChange(e) {
                return handlePropertyChange(element.id, 'rotation', parseFloat(e.target.value) || 0);
              },
              style: {
                width: '100%',
                padding: '4px 8px',
                border: '1px solid #ccc',
                borderRadius: '3px',
                fontSize: '12px'
              }
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              style: {
                display: 'block',
                fontSize: '12px',
                fontWeight: 'bold',
                marginBottom: '4px'
              },
              children: "Opacit\xE9"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "range",
              min: "0",
              max: "1",
              step: "0.1",
              value: element.opacity || 1,
              onChange: function onChange(e) {
                return handlePropertyChange(element.id, 'opacity', parseFloat(e.target.value));
              },
              style: {
                width: '100%'
              }
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
              style: {
                fontSize: '11px',
                color: '#666'
              },
              children: [Math.round((element.opacity || 1) * 100), "%"]
            })]
          })]
        }), element.type === 'product_table' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(ProductTableProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'customer_info' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(CustomerInfoProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'company_info' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(CompanyInfoProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'company_logo' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(CompanyLogoProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'order_number' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(OrderNumberProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'woocommerce_order_date' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(WoocommerceOrderDateProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'woocommerce_invoice_number' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(WoocommerceInvoiceNumberProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'document_type' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(DocumentTypeProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'dynamic-text' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(DynamicTextProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'mentions' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(MentionsProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'text' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(TextProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), (element.type === 'rectangle' || element.type === 'circle') &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(ShapeProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'image' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(ImageProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type === 'line' &&
        /*#__PURE__*/
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        (0,jsx_runtime.jsx)(LineProperties, {
          element: element,
          onChange: handlePropertyChange,
          activeTab: activeTab,
          setActiveTab: setActiveTab
        }), element.type !== 'product_table' && element.type !== 'customer_info' && element.type !== 'company_info' && element.type !== 'company_logo' && element.type !== 'order_number' && element.type !== 'woocommerce_order_date' && element.type !== 'woocommerce_invoice_number' && element.type !== 'document_type' && element.type !== 'dynamic_text' && element.type !== 'dynamic-text' && element.type !== 'mentions' && element.type !== 'text' && element.type !== 'rectangle' && element.type !== 'circle' && element.type !== 'image' && element.type !== 'line' && /*#__PURE__*/(0,jsx_runtime.jsx)(ElementProperties, {
          element: element,
          onChange: handlePropertyChange
        })]
      }, element.id);
    })]
  });
});
;// ./src/js/react/hooks/usePreview.ts
function usePreview_regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return usePreview_regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (usePreview_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, usePreview_regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, usePreview_regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), usePreview_regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", usePreview_regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), usePreview_regeneratorDefine2(u), usePreview_regeneratorDefine2(u, o, "Generator"), usePreview_regeneratorDefine2(u, n, function () { return this; }), usePreview_regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (usePreview_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function usePreview_regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } usePreview_regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { usePreview_regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, usePreview_regeneratorDefine2(e, r, n, t); }
function usePreview_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function usePreview_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { usePreview_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { usePreview_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function usePreview_slicedToArray(r, e) { return usePreview_arrayWithHoles(r) || usePreview_iterableToArrayLimit(r, e) || usePreview_unsupportedIterableToArray(r, e) || usePreview_nonIterableRest(); }
function usePreview_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function usePreview_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return usePreview_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? usePreview_arrayLikeToArray(r, a) : void 0; } }
function usePreview_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function usePreview_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function usePreview_arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function usePreview_typeof(o) { "@babel/helpers - typeof"; return usePreview_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, usePreview_typeof(o); }

console.log('[REACT USE PREVIEW HOOK] ===== FILE LOADED =====');
console.log('[REACT USE PREVIEW HOOK] Hook file loaded and executing at:', new Date().toISOString());
console.log('[REACT USE PREVIEW HOOK] React available:', typeof React === "undefined" ? "undefined" : usePreview_typeof(React));
console.log('[REACT USE PREVIEW HOOK] useState available:', usePreview_typeof(react.useState));
console.log('[REACT USE PREVIEW HOOK] useCallback available:', usePreview_typeof(react.useCallback));
/**
 * Hook React usePreview pour gÃ©rer l'aperÃ§u PDF
 * ImplÃ©mente les exigences de l'Ã©tape 1.5 du roadmap
 */
function usePreview() {
  var _useState = (0,react.useState)(false),
    _useState2 = usePreview_slicedToArray(_useState, 2),
    isModalOpen = _useState2[0],
    setIsModalOpen = _useState2[1];
  var _useState3 = (0,react.useState)(false),
    _useState4 = usePreview_slicedToArray(_useState3, 2),
    isGenerating = _useState4[0],
    setIsGenerating = _useState4[1];
  var _useState5 = (0,react.useState)(null),
    _useState6 = usePreview_slicedToArray(_useState5, 2),
    previewUrl = _useState6[0],
    setPreviewUrl = _useState6[1];
  var _useState7 = (0,react.useState)(null),
    _useState8 = usePreview_slicedToArray(_useState7, 2),
    error = _useState8[0],
    setError = _useState8[1];
  var _useState9 = (0,react.useState)('png'),
    _useState0 = usePreview_slicedToArray(_useState9, 2),
    format = _useState0[0],
    setFormat = _useState0[1];
  var openModal = (0,react.useCallback)(function () {
    setIsModalOpen(true);
    setError(null);
    setPreviewUrl(null);
  }, []);
  var closeModal = (0,react.useCallback)(function () {
    setIsModalOpen(false);
    setIsGenerating(false);
    setPreviewUrl(null);
    setError(null);
  }, []);
  var clearPreview = (0,react.useCallback)(function () {
    setPreviewUrl(null);
    setError(null);
  }, []);
  var generatePreview = (0,react.useCallback)(/*#__PURE__*/function () {
    var _ref = usePreview_asyncToGenerator(/*#__PURE__*/usePreview_regenerator().m(function _callee(templateData) {
      var _templateData$element;
      var options,
        finalFormat,
        quality,
        _templateData$element2,
        hasContent,
        result,
        errorMsg,
        _err$constructor,
        errorMessage,
        _args = arguments,
        _t;
      return usePreview_regenerator().w(function (_context) {
        while (1) switch (_context.p = _context.n) {
          case 0:
            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};
            console.log('[HOOK USE PREVIEW] ===== STARTING PREVIEW GENERATION =====');
            console.log('[HOOK USE PREVIEW] generatePreview called at:', new Date().toISOString());
            console.log('[HOOK USE PREVIEW] templateData received:', templateData);
            console.log('[HOOK USE PREVIEW] templateData keys:', Object.keys(templateData));
            console.log('[HOOK USE PREVIEW] templateData elements count:', ((_templateData$element = templateData.elements) === null || _templateData$element === void 0 ? void 0 : _templateData$element.length) || 0);
            console.log('[HOOK USE PREVIEW] options received:', options);
            console.log('[HOOK USE PREVIEW] Current hook state:');
            console.log('[HOOK USE PREVIEW] - isModalOpen:', isModalOpen);
            console.log('[HOOK USE PREVIEW] - isGenerating:', isGenerating);
            console.log('[HOOK USE PREVIEW] - previewUrl:', previewUrl);
            console.log('[HOOK USE PREVIEW] - error:', error);
            console.log('[HOOK USE PREVIEW] - format:', format);
            finalFormat = options.format || format;
            quality = options.quality || 150;
            console.log('[HOOK USE PREVIEW] Final computed values:');
            console.log('[HOOK USE PREVIEW] - finalFormat:', finalFormat);
            console.log('[HOOK USE PREVIEW] - quality:', quality);
            console.log('[HOOK USE PREVIEW] window.pdfPreviewAPI available:', usePreview_typeof(window.pdfPreviewAPI));
            setIsGenerating(true);
            setError(null);
            setPreviewUrl(null);
            console.log('[HOOK USE PREVIEW] State updated - setIsGenerating(true), cleared error and previewUrl');
            _context.p = 1;
            // VÃ©rifier s'il y a du contenu dans le template
            hasContent = templateData.elements && templateData.elements.length > 0;
            console.log('[REACT PREVIEW] Template has content:', hasContent, 'elements count:', ((_templateData$element2 = templateData.elements) === null || _templateData$element2 === void 0 ? void 0 : _templateData$element2.length) || 0);
            if (hasContent) {
              _context.n = 2;
              break;
            }
            console.error('[REACT PREVIEW] No content in template, throwing error');
            throw new Error('Aucun contenu dans le template. Ajoutez des Ã©lÃ©ments avant de gÃ©nÃ©rer un aperÃ§u.');
          case 2:
            if (!(typeof window.pdfPreviewAPI === 'undefined')) {
              _context.n = 3;
              break;
            }
            console.error('[REACT PREVIEW] pdfPreviewAPI not available');
            throw new Error('API Preview non disponible. VÃ©rifiez que les scripts sont chargÃ©s.');
          case 3:
            console.log('[HOOK USE PREVIEW] About to call window.pdfPreviewAPI.generateEditorPreview');
            console.log('[HOOK USE PREVIEW] Calling with parameters:');
            console.log('[HOOK USE PREVIEW] - templateData:', JSON.stringify(templateData, null, 2));
            console.log('[HOOK USE PREVIEW] - options:', {
              format: finalFormat,
              quality: quality
            });

            // GÃ©nÃ©rer l'aperÃ§u
            _context.n = 4;
            return window.pdfPreviewAPI.generateEditorPreview(templateData, {
              format: finalFormat,
              quality: quality
            });
          case 4:
            result = _context.v;
            console.log('[HOOK USE PREVIEW] ===== API CALL COMPLETED =====');
            console.log('[HOOK USE PREVIEW] generateEditorPreview result received:', result);
            console.log('[HOOK USE PREVIEW] Result type:', usePreview_typeof(result));
            console.log('[HOOK USE PREVIEW] Result is object:', result && usePreview_typeof(result) === 'object');
            if (result && usePreview_typeof(result) === 'object') {
              console.log('[HOOK USE PREVIEW] Result keys:', Object.keys(result));
              console.log('[HOOK USE PREVIEW] Result has success:', 'success' in result, result.success);
              console.log('[HOOK USE PREVIEW] Result has image_url:', 'image_url' in result, usePreview_typeof(result.image_url));
              console.log('[HOOK USE PREVIEW] Result has error:', 'error' in result, result.error);
              console.log('[HOOK USE PREVIEW] Result has preview_url:', 'preview_url' in result, result.preview_url);
              console.log('[HOOK USE PREVIEW] Full result object:', JSON.stringify(result, null, 2));
            }
            if (!(result && usePreview_typeof(result) === 'object' && 'success' in result && result.success && 'image_url' in result && typeof result.image_url === 'string')) {
              _context.n = 5;
              break;
            }
            console.log('[HOOK USE PREVIEW] ===== VALIDATION PASSED =====');
            console.log('[HOOK USE PREVIEW] Preview generated successfully, image_url:', result.image_url);
            if (finalFormat === 'pdf') {
              // Pour PDF, ouvrir dans un nouvel onglet
              console.log('[HOOK USE PREVIEW] Opening PDF in new tab');
              window.open(result.image_url, '_blank');
              setPreviewUrl(null); // Ne pas afficher dans la modale
            } else {
              // Pour PNG/JPG, afficher dans la modale
              console.log('[HOOK USE PREVIEW] Setting preview URL for modal display');
              setPreviewUrl(result.image_url);
            }
            _context.n = 6;
            break;
          case 5:
            console.log('[HOOK USE PREVIEW] ===== VALIDATION FAILED =====');
            console.log('[HOOK USE PREVIEW] Result validation failed, checking error message');
            console.log('[HOOK USE PREVIEW] Validation checks:');
            console.log('[HOOK USE PREVIEW] - result exists:', !!result);
            console.log('[HOOK USE PREVIEW] - is object:', result && usePreview_typeof(result) === 'object');
            console.log('[HOOK USE PREVIEW] - has success key:', result && 'success' in result);
            console.log('[HOOK USE PREVIEW] - success value:', result && result.success);
            console.log('[HOOK USE PREVIEW] - has image_url key:', result && 'image_url' in result);
            console.log('[HOOK USE PREVIEW] - image_url type:', result && usePreview_typeof(result.image_url));
            console.log('[HOOK USE PREVIEW] - image_url value:', result && result.image_url);
            errorMsg = result && usePreview_typeof(result) === 'object' && 'error' in result && typeof result.error === 'string' ? result.error : 'Erreur lors de la gÃ©nÃ©ration de l\'aperÃ§u';
            console.error('[HOOK USE PREVIEW] Invalid result format, throwing error:', errorMsg);
            console.error('[HOOK USE PREVIEW] Result validation details:');
            console.error('[HOOK USE PREVIEW] - result exists:', !!result);
            console.error('[HOOK USE PREVIEW] - is object:', result && usePreview_typeof(result) === 'object');
            console.error('[HOOK USE PREVIEW] - has success key:', result && 'success' in result);
            console.error('[HOOK USE PREVIEW] - success value:', result && result.success);
            console.error('[HOOK USE PREVIEW] - has image_url key:', result && 'image_url' in result);
            console.error('[HOOK USE PREVIEW] - image_url type:', result && usePreview_typeof(result.image_url));
            throw new Error(errorMsg);
          case 6:
            _context.n = 8;
            break;
          case 7:
            _context.p = 7;
            _t = _context.v;
            console.error('[HOOK USE PREVIEW] ===== CATCH BLOCK EXECUTED =====');
            console.error('[HOOK USE PREVIEW] Exception caught at:', new Date().toISOString());
            errorMessage = _t instanceof Error ? _t.message : 'Erreur inconnue lors de la gÃ©nÃ©ration';
            console.error('[HOOK USE PREVIEW] CATCH BLOCK - Exception caught:', errorMessage);
            console.error('[HOOK USE PREVIEW] CATCH BLOCK - Full error object:', _t);
            console.error('[HOOK USE PREVIEW] CATCH BLOCK - Error stack:', _t instanceof Error ? _t.stack : 'No stack available');
            console.error('[HOOK USE PREVIEW] CATCH BLOCK - Error type:', usePreview_typeof(_t));
            console.error('[HOOK USE PREVIEW] CATCH BLOCK - Error constructor:', (_t === null || _t === void 0 || (_err$constructor = _t.constructor) === null || _err$constructor === void 0 ? void 0 : _err$constructor.name) || 'Unknown');
            console.error('[HOOK USE PREVIEW] CATCH BLOCK - Error instanceof Error:', _t instanceof Error);
            console.error('[HOOK USE PREVIEW] CATCH BLOCK - Error toString():', (_t === null || _t === void 0 ? void 0 : _t.toString()) || 'No toString method');
            setError(errorMessage);
            console.error('[HOOK USE PREVIEW] State updated - setError called with:', errorMessage);
          case 8:
            _context.p = 8;
            console.log('[HOOK USE PREVIEW] ===== FINALLY BLOCK =====');
            console.log('[HOOK USE PREVIEW] Setting isGenerating to false');
            setIsGenerating(false);
            console.log('[HOOK USE PREVIEW] ===== PREVIEW GENERATION PROCESS COMPLETED =====');
            return _context.f(8);
          case 9:
            return _context.a(2);
        }
      }, _callee, null, [[1, 7, 8, 9]]);
    }));
    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }(), [format]);
  return {
    // Ã‰tat de la modale
    isModalOpen: isModalOpen,
    openModal: openModal,
    closeModal: closeModal,
    // Ã‰tat de gÃ©nÃ©ration
    isGenerating: isGenerating,
    previewUrl: previewUrl,
    error: error,
    // Options
    format: format,
    setFormat: setFormat,
    // Actions
    generatePreview: generatePreview,
    clearPreview: clearPreview
  };
}
/* harmony default export */ const hooks_usePreview = ((/* unused pure expression or super */ null && (usePreview)));
;// ./src/js/react/components/header/Header.tsx
function Header_regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return Header_regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (Header_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, Header_regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, Header_regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), Header_regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", Header_regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), Header_regeneratorDefine2(u), Header_regeneratorDefine2(u, o, "Generator"), Header_regeneratorDefine2(u, n, function () { return this; }), Header_regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (Header_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function Header_regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } Header_regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { Header_regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, Header_regeneratorDefine2(e, r, n, t); }
function Header_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function Header_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { Header_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { Header_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function Header_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function Header_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? Header_ownKeys(Object(t), !0).forEach(function (r) { Header_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Header_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function Header_defineProperty(e, r, t) { return (r = Header_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function Header_toPropertyKey(t) { var i = Header_toPrimitive(t, "string"); return "symbol" == Header_typeof(i) ? i : i + ""; }
function Header_toPrimitive(t, r) { if ("object" != Header_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != Header_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function Header_slicedToArray(r, e) { return Header_arrayWithHoles(r) || Header_iterableToArrayLimit(r, e) || Header_unsupportedIterableToArray(r, e) || Header_nonIterableRest(); }
function Header_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function Header_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return Header_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? Header_arrayLikeToArray(r, a) : void 0; } }
function Header_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function Header_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function Header_arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function Header_typeof(o) { "@babel/helpers - typeof"; return Header_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, Header_typeof(o); }



console.log('[REACT HEADER COMPONENT] ===== FILE LOADED =====');
console.log('[REACT HEADER COMPONENT] Component file loaded and executing at:', new Date().toISOString());
console.log('[REACT HEADER COMPONENT] React available:', Header_typeof(react));
console.log('[REACT HEADER COMPONENT] useState available:', Header_typeof(react.useState));
console.log('[REACT HEADER COMPONENT] useBuilder available:', Header_typeof(useBuilder));
console.log('[REACT HEADER COMPONENT] usePreview available:', Header_typeof(usePreview));



// Extension de Window pour l'API Preview

var Header = /*#__PURE__*/(0,react.memo)(function Header(_ref) {
  var templateName = _ref.templateName,
    templateDescription = _ref.templateDescription,
    canvasWidth = _ref.canvasWidth,
    canvasHeight = _ref.canvasHeight,
    showGuides = _ref.showGuides,
    snapToGrid = _ref.snapToGrid,
    isNewTemplate = _ref.isNewTemplate,
    isModified = _ref.isModified,
    isSaving = _ref.isSaving,
    isLoading = _ref.isLoading,
    isEditingExistingTemplate = _ref.isEditingExistingTemplate,
    onSave = _ref.onSave,
    _onPreview = _ref.onPreview,
    onNewTemplate = _ref.onNewTemplate,
    onUpdateTemplateSettings = _ref.onUpdateTemplateSettings;
  // Use deferred values for frequently changing props to prevent cascading re-renders
  var deferredIsModified = (0,react.useDeferredValue)(isModified);
  var deferredIsSaving = (0,react.useDeferredValue)(isSaving);
  var deferredIsLoading = (0,react.useDeferredValue)(isLoading);
  var deferredIsEditingExistingTemplate = (0,react.useDeferredValue)(isEditingExistingTemplate);
  // Debug logging
  (0,react.useEffect)(function () {}, []);
  var _useBuilder = useBuilder(),
    state = _useBuilder.state;
  var canvasSettings = CanvasSettingsContext_useCanvasSettings();
  var _useState = (0,react.useState)(null),
    _useState2 = Header_slicedToArray(_useState, 2),
    hoveredButton = _useState2[0],
    setHoveredButton = _useState2[1];
  var _useState3 = (0,react.useState)(false),
    _useState4 = Header_slicedToArray(_useState3, 2),
    showSettingsModal = _useState4[0],
    setShowSettingsModal = _useState4[1];
  var _useState5 = (0,react.useState)(false),
    _useState6 = Header_slicedToArray(_useState5, 2),
    showJsonModal = _useState6[0],
    setShowJsonModal = _useState6[1];
  var _useState7 = (0,react.useState)(false),
    _useState8 = Header_slicedToArray(_useState7, 2),
    copySuccess = _useState8[0],
    setCopySuccess = _useState8[1];
  var _useState9 = (0,react.useState)(false),
    _useState0 = Header_slicedToArray(_useState9, 2),
    isHeaderFixed = _useState0[0],
    setIsHeaderFixed = _useState0[1];
  var _useState1 = (0,react.useState)({
      fps: 0,
      memoryUsage: 0,
      lastUpdate: 0
    }),
    _useState10 = Header_slicedToArray(_useState1, 2),
    performanceMetrics = _useState10[0],
    setPerformanceMetrics = _useState10[1];
  var _useState11 = (0,react.useState)(templateName),
    _useState12 = Header_slicedToArray(_useState11, 2),
    editedTemplateName = _useState12[0],
    setEditedTemplateName = _useState12[1];
  var _useState13 = (0,react.useState)(templateDescription),
    _useState14 = Header_slicedToArray(_useState13, 2),
    editedTemplateDescription = _useState14[0],
    setEditedTemplateDescription = _useState14[1];
  var _useState15 = (0,react.useState)(canvasWidth),
    _useState16 = Header_slicedToArray(_useState15, 2),
    editedCanvasWidth = _useState16[0],
    setEditedCanvasWidth = _useState16[1];
  var _useState17 = (0,react.useState)(canvasHeight),
    _useState18 = Header_slicedToArray(_useState17, 2),
    editedCanvasHeight = _useState18[0],
    setEditedCanvasHeight = _useState18[1];
  var _useState19 = (0,react.useState)(canvasWidth < canvasHeight ? "portrait" : "landscape"),
    _useState20 = Header_slicedToArray(_useState19, 2),
    canvasOrientation = _useState20[0],
    setCanvasOrientation = _useState20[1];
  var _useState21 = (0,react.useState)(false),
    _useState22 = Header_slicedToArray(_useState21, 2),
    showPredefinedTemplates = _useState22[0],
    setShowPredefinedTemplates = _useState22[1];
  var _useState23 = (0,react.useState)({
      allowPortrait: true,
      allowLandscape: true,
      defaultOrientation: "portrait"
    }),
    _useState24 = Header_slicedToArray(_useState23, 2),
    orientationPermissions = _useState24[0],
    setOrientationPermissions = _useState24[1];

  // Utiliser le hook usePreview pour la gestion de l'aperÃ§u
  var _usePreview = usePreview(),
    showPreviewModal = _usePreview.isModalOpen,
    openPreviewModal = _usePreview.openModal,
    closePreviewModal = _usePreview.closeModal,
    isGeneratingPreview = _usePreview.isGenerating,
    previewImageUrl = _usePreview.previewUrl,
    previewError = _usePreview.error,
    previewFormat = _usePreview.format,
    setPreviewFormat = _usePreview.setFormat,
    generatePreview = _usePreview.generatePreview,
    clearPreview = _usePreview.clearPreview;

  // Debug logging
  (0,react.useEffect)(function () {
    debugLog("ðŸ”„ [PDF Builder] Ã‰tat bouton Enregistrer mis Ã  jour", {
      templateName: templateName,
      buttonState: {
        disabled: deferredIsSaving || !deferredIsModified || deferredIsLoading,
        isSaving: deferredIsSaving,
        isModified: deferredIsModified,
        isLoading: deferredIsLoading,
        canSave: !deferredIsSaving && deferredIsModified && !deferredIsLoading
      },
      timestamp: new Date().toISOString()
    });
  }, [deferredIsSaving, deferredIsModified, deferredIsLoading, templateName]);

  // Charger les permissions d'orientation du canvas
  (0,react.useEffect)(function () {
    var loadOrientationPermissions = function loadOrientationPermissions() {
      try {
        var _pdfBuilderCanvasSett;
        // Utiliser les variables window directement au lieu d'un appel AJAX
        var availableOrientations = window.availableOrientations || ['portrait', 'landscape'];
        var _orientationPermissions = {
          allowPortrait: availableOrientations.includes('portrait'),
          allowLandscape: availableOrientations.includes('landscape'),
          defaultOrientation: ((_pdfBuilderCanvasSett = window.pdfBuilderCanvasSettings) === null || _pdfBuilderCanvasSett === void 0 ? void 0 : _pdfBuilderCanvasSett.default_canvas_orientation) || 'portrait',
          availableOrientations: availableOrientations
        };
        setOrientationPermissions(_orientationPermissions);
      } catch (error) {
        debug_debugError("Erreur lors du chargement des permissions d'orientation", error);
        // Fallback en cas d'erreur
        setOrientationPermissions({
          allowPortrait: true,
          allowLandscape: true,
          defaultOrientation: 'portrait',
          availableOrientations: ['portrait', 'landscape']
        });
      }
    };
    loadOrientationPermissions();
  }, []);
  (0,react.useEffect)(function () {}, [showPreviewModal]);

  // Synchroniser les Ã©tats locaux avec les props quand elles changent
  (0,react.useEffect)(function () {
    setEditedTemplateName(templateName);
  }, [templateName]);
  (0,react.useEffect)(function () {
    setEditedTemplateDescription(templateDescription);
  }, [templateDescription]);
  (0,react.useEffect)(function () {
    setEditedCanvasWidth(canvasWidth);
  }, [canvasWidth]);
  (0,react.useEffect)(function () {
    setEditedCanvasHeight(canvasHeight);
  }, [canvasHeight]);

  // âœ… SYSTÃˆME PARAMÃˆTRES: Monitoring des performances du canvas
  (0,react.useEffect)(function () {
    if (canvasSettings.performanceMonitoring) {
      var updateMetrics = function updateMetrics() {
        // Simuler la rÃ©cupÃ©ration des mÃ©triques (dans un vrai cas, on utiliserait getPerformanceMetrics du hook)
        var now = Date.now();
        setPerformanceMetrics(function (prev) {
          return {
            fps: Math.floor(Math.random() * 20) + 40,
            // Simulation FPS 40-60
            memoryUsage: Math.floor(Math.random() * 50) + 80,
            // Simulation mÃ©moire 80-130MB
            lastUpdate: now
          };
        });
      };
      var interval = setInterval(updateMetrics, 2000); // Update every 2 seconds
      updateMetrics(); // Initial update

      return function () {
        return clearInterval(interval);
      };
    }
  }, [canvasSettings.performanceMonitoring]);

  // State pour le throttling du scroll
  var _useState25 = (0,react.useState)(null),
    _useState26 = Header_slicedToArray(_useState25, 2),
    scrollTimeout = _useState26[0],
    setScrollTimeout = _useState26[1];

  // Optimisation: mÃ©moriser le handler de scroll avec throttling
  var handleScroll = (0,react.useCallback)(function () {
    if (scrollTimeout) return; // Si un timeout est dÃ©jÃ  en cours, ignorer

    setScrollTimeout(setTimeout(function () {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      // Le header devient fixe aprÃ¨s 120px de scroll
      setIsHeaderFixed(scrollTop > 120);
      setScrollTimeout(null);
    }, 50)); // DÃ©lai de 50ms pour Ã©viter les changements trop frÃ©quents
  }, [scrollTimeout]);

  // Effet pour gÃ©rer le scroll et rendre le header fixe
  (0,react.useEffect)(function () {
    window.addEventListener("scroll", handleScroll, {
      passive: true
    });
    return function () {
      return window.removeEventListener("scroll", handleScroll);
    };
  }, [handleScroll]);

  // Effet pour fermer le dropdown des modÃ¨les prÃ©dÃ©finis quand on clique ailleurs
  (0,react.useEffect)(function () {
    var handleClickOutside = function handleClickOutside(event) {
      var target = event.target;
      if (showPredefinedTemplates && !target.closest("[data-predefined-dropdown]")) {
        setShowPredefinedTemplates(false);
      }
    };
    if (showPredefinedTemplates) {
      document.addEventListener("mousedown", handleClickOutside, {
        passive: true
      });
      return function () {
        return document.removeEventListener("mousedown", handleClickOutside);
      };
    }
  }, [showPredefinedTemplates]);
  var buttonBaseStyles = {
    padding: "10px 16px",
    border: "none",
    borderRadius: "6px",
    cursor: "pointer",
    fontSize: "14px",
    fontWeight: "500",
    display: "flex",
    alignItems: "center",
    gap: "6px",
    whiteSpace: "nowrap"
  };
  var primaryButtonStyles = Header_objectSpread(Header_objectSpread({}, buttonBaseStyles), {}, {
    backgroundColor: "#4CAF50",
    color: "#fff",
    boxShadow: hoveredButton === "save" ? "0 4px 12px rgba(76, 175, 80, 0.3)" : "none"
  });
  var secondaryButtonStyles = Header_objectSpread(Header_objectSpread({}, buttonBaseStyles), {}, {
    backgroundColor: "#fff",
    border: "1px solid #ddd",
    color: "#333",
    boxShadow: hoveredButton === "preview-image" || hoveredButton === "preview-pdf" || hoveredButton === "new" ? "0 2px 8px rgba(0, 0, 0, 0.1)" : "none"
  });
  return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
    style: {
      display: "flex",
      alignItems: "center",
      justifyContent: "space-between",
      padding: isHeaderFixed ? "16px" : "12px",
      paddingLeft: isHeaderFixed ? "16px" : "12px",
      paddingRight: isHeaderFixed ? "16px" : "12px",
      backgroundColor: "#ffffff",
      borderBottom: "2px solid #e0e0e0",
      borderRadius: "0px",
      boxShadow: isHeaderFixed ? "0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1)" : "none",
      gap: "16px",
      position: isHeaderFixed ? "fixed" : "relative",
      top: isHeaderFixed ? "32px" : "auto",
      left: isHeaderFixed ? "160px" : "auto",
      right: isHeaderFixed ? "0" : "auto",
      width: isHeaderFixed ? "calc(100% - 160px)" : "auto",
      zIndex: 1000,
      boxSizing: "border-box",
      transition: "all 0.25s ease-in-out"
    },
    children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        display: "flex",
        alignItems: "center",
        gap: "12px",
        minWidth: 0,
        flex: 1
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          display: "flex",
          alignItems: "baseline",
          gap: "12px",
          minWidth: 0
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h2", {
          style: {
            margin: 0,
            fontSize: "20px",
            fontWeight: "600",
            color: "#1a1a1a",
            overflow: "hidden",
            textOverflow: "ellipsis",
            whiteSpace: "nowrap"
          },
          children: templateName || "Sans titre"
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: "flex",
            alignItems: "center",
            gap: "8px",
            flexShrink: 0
          },
          children: [deferredIsModified && /*#__PURE__*/(0,jsx_runtime.jsxs)("span", {
            style: {
              fontSize: "12px",
              padding: "4px 10px",
              backgroundColor: "#fff3cd",
              color: "#856404",
              borderRadius: "4px",
              fontWeight: "500",
              border: "1px solid #ffeaa7",
              display: "flex",
              alignItems: "center",
              gap: "4px"
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
              style: {
                fontSize: "16px"
              },
              children: "\u25CF"
            }), "Modifi\xE9"]
          }), isNewTemplate && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            style: {
              fontSize: "12px",
              padding: "4px 10px",
              backgroundColor: "#d1ecf1",
              color: "#0c5460",
              borderRadius: "4px",
              fontWeight: "500",
              border: "1px solid #bee5eb"
            },
            children: "Nouveau"
          })]
        })]
      })
    }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        display: "flex",
        gap: "10px",
        flexShrink: 0,
        alignItems: "center"
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
        onClick: onNewTemplate,
        onMouseEnter: function onMouseEnter() {
          return setHoveredButton("new");
        },
        onMouseLeave: function onMouseLeave() {
          return setHoveredButton(null);
        },
        style: Header_objectSpread(Header_objectSpread({}, secondaryButtonStyles), {}, {
          opacity: isSaving ? 0.6 : 1,
          pointerEvents: isSaving ? "none" : "auto"
        }),
        title: "Cr\xE9er un nouveau template",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          children: "\u2795"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          children: "Nouveau"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          position: "relative"
        },
        "data-predefined-dropdown": true,
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
          onClick: function onClick() {
            return setShowPredefinedTemplates(!showPredefinedTemplates);
          },
          onMouseEnter: function onMouseEnter() {
            return setHoveredButton("predefined");
          },
          onMouseLeave: function onMouseLeave() {
            return setHoveredButton(null);
          },
          style: Header_objectSpread(Header_objectSpread({}, secondaryButtonStyles), {}, {
            opacity: isSaving ? 0.6 : 1,
            pointerEvents: isSaving ? "none" : "auto"
          }),
          title: "Mod\xE8les pr\xE9d\xE9finis",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            children: "\uD83C\uDFA8"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            children: "Mod\xE8les Pr\xE9d\xE9finis"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
            style: {
              marginLeft: "4px",
              fontSize: "12px"
            },
            children: "\u25BC"
          })]
        }), showPredefinedTemplates && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            position: "absolute",
            top: "100%",
            right: 0,
            background: "white",
            border: "1px solid #e0e0e0",
            borderRadius: "8px",
            boxShadow: "0 4px 12px rgba(0,0,0,0.15)",
            zIndex: 1001,
            minWidth: "280px",
            maxHeight: "400px",
            overflowY: "auto"
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              padding: "12px 16px",
              borderBottom: "1px solid #e0e0e0",
              background: "#f8f9fa",
              fontWeight: "600",
              fontSize: "14px",
              color: "#23282d"
            },
            children: "\uD83C\uDFA8 Mod\xE8les Pr\xE9d\xE9finis"
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              padding: "8px 0"
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                padding: "12px 16px",
                cursor: "pointer",
                borderBottom: "1px solid #f0f0f0",
                display: "flex",
                alignItems: "center",
                gap: "12px"
              },
              onClick: function onClick() {
                // Ouvrir la page des templates prÃ©dÃ©finis
                window.open("/wp-admin/admin.php?page=pdf-builder-templates", "_blank");
                setShowPredefinedTemplates(false);
              },
              onMouseEnter: function onMouseEnter(e) {
                return e.currentTarget.style.backgroundColor = "#f8f9fa";
              },
              onMouseLeave: function onMouseLeave(e) {
                return e.currentTarget.style.backgroundColor = "transparent";
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                style: {
                  fontSize: "20px"
                },
                children: "\uD83E\uDDFE"
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontWeight: "500",
                    color: "#23282d"
                  },
                  children: "Facture Professionnelle"
                }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontSize: "12px",
                    color: "#666"
                  },
                  children: "Template professionnel pour factures"
                })]
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                padding: "12px 16px",
                cursor: "pointer",
                borderBottom: "1px solid #f0f0f0",
                display: "flex",
                alignItems: "center",
                gap: "12px"
              },
              onClick: function onClick() {
                // Ouvrir la page des templates prÃ©dÃ©finis
                window.open("/wp-admin/admin.php?page=pdf-builder-templates", "_blank");
                setShowPredefinedTemplates(false);
              },
              onMouseEnter: function onMouseEnter(e) {
                return e.currentTarget.style.backgroundColor = "#f8f9fa";
              },
              onMouseLeave: function onMouseLeave(e) {
                return e.currentTarget.style.backgroundColor = "transparent";
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                style: {
                  fontSize: "20px"
                },
                children: "\uD83D\uDCCB"
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontWeight: "500",
                    color: "#23282d"
                  },
                  children: "Devis Commercial"
                }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontSize: "12px",
                    color: "#666"
                  },
                  children: "Template professionnel pour devis"
                })]
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                padding: "12px 16px",
                cursor: "pointer",
                borderBottom: "1px solid #f0f0f0",
                display: "flex",
                alignItems: "center",
                gap: "12px"
              },
              onClick: function onClick() {
                // Ouvrir la page des templates prÃ©dÃ©finis
                window.open("/wp-admin/admin.php?page=pdf-builder-templates", "_blank");
                setShowPredefinedTemplates(false);
              },
              onMouseEnter: function onMouseEnter(e) {
                return e.currentTarget.style.backgroundColor = "#f8f9fa";
              },
              onMouseLeave: function onMouseLeave(e) {
                return e.currentTarget.style.backgroundColor = "transparent";
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                style: {
                  fontSize: "20px"
                },
                children: "\uD83D\uDCE6"
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontWeight: "500",
                    color: "#23282d"
                  },
                  children: "Bon de Commande"
                }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontSize: "12px",
                    color: "#666"
                  },
                  children: "Template professionnel pour commandes"
                })]
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              style: {
                padding: "12px 16px",
                cursor: "pointer",
                display: "flex",
                alignItems: "center",
                gap: "12px",
                color: "#007cba",
                fontWeight: "500"
              },
              onClick: function onClick() {
                // Ouvrir la page des templates prÃ©dÃ©finis
                window.open("/wp-admin/admin.php?page=pdf-builder-templates", "_blank");
                setShowPredefinedTemplates(false);
              },
              onMouseEnter: function onMouseEnter(e) {
                return e.currentTarget.style.backgroundColor = "#f8f9fa";
              },
              onMouseLeave: function onMouseLeave(e) {
                return e.currentTarget.style.backgroundColor = "transparent";
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                style: {
                  fontSize: "16px"
                },
                children: "\uD83D\uDCDA"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                children: "Voir tous les mod\xE8les..."
              })]
            })]
          })]
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
        onClick: function onClick() {
          var _state$elements;
          console.log('[REACT HEADER] ===== APERÃ‡U BUTTON CLICKED =====');
          console.log('[REACT HEADER] AperÃ§u button clicked - opening preview modal');
          console.log('[REACT HEADER] Current state before opening modal:');
          console.log('[REACT HEADER] - showPreviewModal:', showPreviewModal);
          console.log('[REACT HEADER] - isGeneratingPreview:', isGeneratingPreview);
          console.log('[REACT HEADER] - previewImageUrl:', previewImageUrl);
          console.log('[REACT HEADER] - previewError:', previewError);
          console.log('[REACT HEADER] - previewFormat:', previewFormat);
          console.log('[REACT HEADER] - Template state elements count:', ((_state$elements = state.elements) === null || _state$elements === void 0 ? void 0 : _state$elements.length) || 0);
          console.log('[REACT HEADER] - Template state has content:', !!(state.elements && state.elements.length > 0));
          console.log('[REACT HEADER] - usePreview hook available:', Header_typeof(usePreview));
          console.log('[REACT HEADER] - openModal function available:', Header_typeof(openPreviewModal));
          console.log('[REACT HEADER] About to call openPreviewModal()');
          openPreviewModal();
          console.log('[REACT HEADER] openPreviewModal() called successfully');
          console.log('[REACT HEADER] ===== APERÃ‡U BUTTON CLICK HANDLER COMPLETED =====');
        },
        onMouseEnter: function onMouseEnter() {
          return setHoveredButton("preview");
        },
        onMouseLeave: function onMouseLeave() {
          return setHoveredButton(null);
        },
        style: Header_objectSpread(Header_objectSpread({}, secondaryButtonStyles), {}, {
          opacity: isSaving ? 0.6 : 1,
          pointerEvents: isSaving ? "none" : "auto"
        }),
        title: "G\xE9n\xE9rer un aper\xE7u du PDF (Image ou PDF)",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          children: "\uD83D\uDC41\uFE0F"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          children: "Aper\xE7u"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          width: "1px",
          height: "24px",
          backgroundColor: "#e0e0e0"
        }
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
        onClick: function onClick() {
          return setShowJsonModal(true);
        },
        onMouseEnter: function onMouseEnter() {
          return setHoveredButton("json");
        },
        onMouseLeave: function onMouseLeave() {
          return setHoveredButton(null);
        },
        style: Header_objectSpread(Header_objectSpread({}, secondaryButtonStyles), {}, {
          opacity: isSaving ? 0.6 : 1,
          pointerEvents: isSaving ? "none" : "auto"
        }),
        title: "Voir et copier le JSON du canvas",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          children: "\uD83D\uDCC4"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          children: "JSON"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
        onClick: function onClick() {
          return setShowSettingsModal(true);
        },
        onMouseEnter: function onMouseEnter() {
          return setHoveredButton("settings");
        },
        onMouseLeave: function onMouseLeave() {
          return setHoveredButton(null);
        },
        style: Header_objectSpread(Header_objectSpread({}, secondaryButtonStyles), {}, {
          opacity: isSaving ? 0.6 : 1,
          pointerEvents: isSaving ? "none" : "auto"
        }),
        title: "Param\xE8tres du template",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          children: "\u2699\uFE0F"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          children: "Param\xE8tres"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
        onClick: /*#__PURE__*/Header_asyncToGenerator(/*#__PURE__*/Header_regenerator().m(function _callee() {
          var _state$elements2, _state$elements3;
          var startTime, _state$elements4, _state$elements5, endTime, saveDuration, _state$elements6, _endTime, failedDuration, _t;
          return Header_regenerator().w(function (_context) {
            while (1) switch (_context.p = _context.n) {
              case 0:
                startTime = performance.now();
                debugLog("ðŸš€ [PDF Builder] Bouton Enregistrer cliquÃ©", {
                  templateName: templateName,
                  isModified: deferredIsModified,
                  isSaving: deferredIsSaving,
                  isLoading: deferredIsLoading,
                  timestamp: new Date().toISOString(),
                  // Informations dÃ©taillÃ©es sur le canvas
                  canvasInfo: {
                    width: canvasWidth,
                    height: canvasHeight,
                    showGuides: showGuides,
                    snapToGrid: snapToGrid
                  },
                  // Informations sur les Ã©lÃ©ments
                  elementsInfo: {
                    totalElements: ((_state$elements2 = state.elements) === null || _state$elements2 === void 0 ? void 0 : _state$elements2.length) || 0,
                    elementTypes: ((_state$elements3 = state.elements) === null || _state$elements3 === void 0 ? void 0 : _state$elements3.reduce(function (acc, el) {
                      acc[el.type] = (acc[el.type] || 0) + 1;
                      return acc;
                    }, {})) || {}
                  },
                  // Ã‰tat du builder
                  builderState: {
                    template: state.template ? {
                      name: state.template.name,
                      description: state.template.description,
                      hasBackground: !!state.canvas.backgroundColor
                    } : null,
                    selectedElement: state.selection.selectedElements[0] || null,
                    zoom: state.canvas.zoom || 1
                  },
                  // ParamÃ¨tres canvas
                  canvasSettings: {
                    guidesEnabled: canvasSettings.guidesEnabled,
                    memoryLimit: canvasSettings.memoryLimitJs
                  }
                });
                _context.p = 1;
                debugLog("â³ [PDF Builder] DÃ©but de la sauvegarde...");
                _context.n = 2;
                return onSave();
              case 2:
                endTime = performance.now();
                saveDuration = endTime - startTime;
                debugLog("âœ… [PDF Builder] Sauvegarde rÃ©ussie", {
                  templateName: templateName,
                  timestamp: new Date().toISOString(),
                  duration: "".concat(saveDuration.toFixed(2), "ms"),
                  performance: {
                    saveTime: saveDuration,
                    elementsCount: ((_state$elements4 = state.elements) === null || _state$elements4 === void 0 ? void 0 : _state$elements4.length) || 0,
                    templateSize: JSON.stringify(state.template).length,
                    elementsSize: JSON.stringify(state.elements).length
                  },
                  // VÃ©rification post-sauvegarde
                  postSaveState: {
                    isModified: false,
                    // Devrait Ãªtre false aprÃ¨s sauvegarde
                    isSaving: false
                  }
                });

                // Log des mÃ©triques de performance
                debugLog("ðŸ“Š [PDF Builder] MÃ©triques de sauvegarde", {
                  duration: saveDuration,
                  avgTimePerElement: (_state$elements5 = state.elements) !== null && _state$elements5 !== void 0 && _state$elements5.length ? saveDuration / state.elements.length : 0,
                  memoryUsage: performance.memory ? {
                    used: performance.memory.usedJSHeapSize,
                    total: performance.memory.totalJSHeapSize,
                    limit: performance.memory.jsHeapSizeLimit
                  } : "N/A"
                });
                _context.n = 4;
                break;
              case 3:
                _context.p = 3;
                _t = _context.v;
                _endTime = performance.now();
                failedDuration = _endTime - startTime;
                debug_debugError("âŒ [PDF Builder] Erreur lors de la sauvegarde:", {
                  error: _t instanceof Error ? {
                    message: _t.message,
                    stack: _t.stack,
                    name: _t.name
                  } : _t,
                  templateName: templateName,
                  timestamp: new Date().toISOString(),
                  duration: "".concat(failedDuration.toFixed(2), "ms"),
                  context: {
                    isModified: deferredIsModified,
                    isSaving: deferredIsSaving,
                    elementsCount: ((_state$elements6 = state.elements) === null || _state$elements6 === void 0 ? void 0 : _state$elements6.length) || 0
                  }
                });
                alert("Erreur lors de la sauvegarde: " + (_t instanceof Error ? _t.message : "Erreur inconnue"));
              case 4:
                return _context.a(2);
            }
          }, _callee, null, [[1, 3]]);
        })),
        disabled: deferredIsSaving || !deferredIsModified || deferredIsLoading,
        onMouseEnter: function onMouseEnter() {
          debugLog("ðŸ‘† [PDF Builder] Souris sur bouton Enregistrer", {
            templateName: templateName,
            buttonState: {
              disabled: deferredIsSaving || !deferredIsModified || deferredIsLoading,
              isSaving: deferredIsSaving,
              isModified: deferredIsModified,
              isLoading: deferredIsLoading
            },
            timestamp: new Date().toISOString()
          });
          setHoveredButton("save");
        },
        onMouseLeave: function onMouseLeave() {
          debugLog("ðŸ‘‹ [PDF Builder] Souris quitte bouton Enregistrer", {
            templateName: templateName,
            timestamp: new Date().toISOString()
          });
          setHoveredButton(null);
        },
        style: Header_objectSpread(Header_objectSpread({}, primaryButtonStyles), {}, {
          opacity: deferredIsSaving || !deferredIsModified || deferredIsLoading ? 0.6 : 1,
          pointerEvents: deferredIsSaving || !deferredIsModified || deferredIsLoading ? "none" : "auto"
        }),
        title: deferredIsLoading ? "Chargement du template..." : deferredIsModified ? deferredIsEditingExistingTemplate ? "Modifier le template" : "Enregistrer les modifications" : "Aucune modification",
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          children: deferredIsSaving ? "âŸ³" : "ðŸ’¾"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
          children: deferredIsSaving ? "Enregistrement..." : deferredIsEditingExistingTemplate ? "Modifier" : "Enregistrer"
        })]
      })]
    }), showSettingsModal && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      className: "canvas-modal-overlay",
      style: {
        display: "flex"
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        className: "canvas-modal-container",
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          className: "canvas-modal-header",
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("h3", {
            style: {
              margin: 0,
              fontSize: "20px",
              fontWeight: "600"
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
              style: {
                fontSize: "24px"
              },
              children: "\uD83D\uDCC4"
            }), " Param\xE8tres du template"]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            type: "button",
            className: "canvas-modal-close",
            onClick: function onClick() {
              return setShowSettingsModal(false);
            },
            title: "Fermer",
            style: {
              background: "none",
              border: "none",
              fontSize: "24px",
              cursor: "pointer",
              color: "#666",
              padding: "4px"
            },
            children: "\xD7"
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          className: "canvas-modal-body",
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            className: "setting-group",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              className: "setting-label",
              children: "Nom du template"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
              type: "text",
              value: editedTemplateName,
              onChange: function onChange(e) {
                return setEditedTemplateName(e.target.value);
              },
              className: "setting-input",
              placeholder: "Entrez le nom du template"
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            className: "setting-group",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              className: "setting-label",
              children: "Description"
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("textarea", {
              value: editedTemplateDescription,
              onChange: function onChange(e) {
                return setEditedTemplateDescription(e.target.value);
              },
              className: "setting-textarea",
              placeholder: "Description du template...",
              rows: 3
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            className: "setting-group",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              className: "setting-label",
              children: "Dimensions du canvas"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              className: "setting-input-group",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
                type: "number",
                value: editedCanvasWidth,
                disabled: true,
                className: "setting-input setting-input-disabled",
                placeholder: "Largeur"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                className: "setting-input-separator",
                children: "\xD7"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("input", {
                type: "number",
                value: editedCanvasHeight,
                disabled: true,
                className: "setting-input setting-input-disabled",
                placeholder: "Hauteur"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                className: "setting-unit",
                children: "px"
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              className: "setting-hint",
              children: "Les dimensions sont contr\xF4l\xE9es par l'orientation"
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            className: "setting-group",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              className: "setting-label",
              children: "Orientation"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("select", {
              value: canvasOrientation,
              onChange: function onChange(e) {
                var orientation = e.target.value;
                setCanvasOrientation(orientation);
                // Mettre Ã  jour les dimensions en fonction de l'orientation
                var newWidth = 794;
                var newHeight = 1123;
                if (orientation === "landscape") {
                  newWidth = 1123;
                  newHeight = 794;
                }
                setEditedCanvasWidth(newWidth);
                setEditedCanvasHeight(newHeight);
                // Mettre Ã  jour le template immÃ©diatement
                onUpdateTemplateSettings({
                  canvasWidth: newWidth,
                  canvasHeight: newHeight
                });
              },
              className: "setting-select",
              children: [orientationPermissions.allowPortrait && /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "portrait",
                children: "Portrait (794\xD71123 px)"
              }), orientationPermissions.allowLandscape && /*#__PURE__*/(0,jsx_runtime.jsx)("option", {
                value: "landscape",
                children: "Paysage (1123\xD7794 px)"
              })]
            }), (!orientationPermissions.allowPortrait || !orientationPermissions.allowLandscape) && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              className: "setting-hint",
              children: "Certaines orientations sont d\xE9sactiv\xE9es dans les param\xE8tres du plugin."
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            className: "setting-group",
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
              className: "setting-label",
              children: "Options d'affichage"
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              className: "setting-checkbox-group",
              children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
                className: "setting-checkbox-label",
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
                  type: "checkbox",
                  checked: showGuides,
                  onChange: function onChange(e) {
                    return onUpdateTemplateSettings({
                      showGuides: e.target.checked
                    });
                  },
                  className: "setting-checkbox"
                }), "Afficher les guides"]
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)("label", {
                className: "setting-checkbox-label",
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("input", {
                  type: "checkbox",
                  checked: snapToGrid,
                  onChange: function onChange(e) {
                    return onUpdateTemplateSettings({
                      snapToGrid: e.target.checked
                    });
                  },
                  className: "setting-checkbox"
                }), "Aimantation \xE0 la grille"]
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              className: "setting-group",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
                className: "setting-label",
                children: "Statut"
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                className: "setting-status-tags",
                children: [isNewTemplate && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                  className: "status-tag status-new",
                  children: "Nouveau template"
                }), deferredIsModified && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                  className: "status-tag status-modified",
                  children: "Modifi\xE9"
                }), isEditingExistingTemplate && /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                  className: "status-tag status-editing",
                  children: "\xC9dition existante"
                })]
              })]
            }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              className: "setting-group",
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
                className: "setting-label",
                children: "Informations syst\xE8me"
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                className: "setting-info",
                children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                  children: ["Template ID: ", templateName || "N/A"]
                }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                  children: ["Derni\xE8re modification: ", new Date().toLocaleString("fr-FR")]
                }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                  children: ["\xC9tat:", " ", deferredIsSaving ? "Enregistrement..." : deferredIsModified ? "ModifiÃ©" : "SauvegardÃ©"]
                }), canvasSettings.performanceMonitoring && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                  children: ["Performance: ", performanceMetrics.fps, " FPS, ", performanceMetrics.memoryUsage, "MB RAM"]
                }), canvasSettings.debugMode && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                  children: ["Debug: FPS Target ", canvasSettings.fpsTarget, ", Memory Limit ", canvasSettings.memoryLimitJs, "MB"]
                })]
              })]
            })]
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          className: "canvas-modal-footer",
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              return setShowSettingsModal(false);
            },
            className: "canvas-modal-btn canvas-modal-btn-secondary",
            children: "Annuler"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              // Sauvegarder les paramÃ¨tres du template
              onUpdateTemplateSettings({
                name: editedTemplateName,
                description: editedTemplateDescription,
                canvasWidth: editedCanvasWidth,
                canvasHeight: editedCanvasHeight,
                showGuides: showGuides,
                snapToGrid: snapToGrid
              });
              setShowSettingsModal(false);
            },
            className: "canvas-modal-btn canvas-modal-btn-primary",
            children: "Sauvegarder"
          })]
        })]
      })
    }), showJsonModal && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        position: "fixed",
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        backgroundColor: "rgba(0, 0, 0, 0.5)",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        zIndex: 1001
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          backgroundColor: "#ffffff",
          borderRadius: "8px",
          padding: "24px",
          maxWidth: "90vw",
          width: "100%",
          maxHeight: "85vh",
          display: "flex",
          flexDirection: "column",
          boxShadow: "0 10px 40px rgba(0, 0, 0, 0.3)"
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: "flex",
            justifyContent: "space-between",
            alignItems: "center",
            marginBottom: "16px",
            borderBottom: "1px solid #e0e0e0",
            paddingBottom: "12px"
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("h3", {
            style: {
              margin: 0,
              fontSize: "18px",
              fontWeight: "600",
              color: "#1a1a1a"
            },
            children: ["\uD83D\uDCCB JSON Brut du Template (ID: ", templateName || "N/A", ")"]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              return setShowJsonModal(false);
            },
            style: {
              background: "none",
              border: "none",
              fontSize: "24px",
              cursor: "pointer",
              color: "#666",
              padding: "4px"
            },
            title: "Fermer",
            children: "\xD7"
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            flex: 1,
            overflow: "auto",
            backgroundColor: "#f5f5f5",
            borderRadius: "6px",
            padding: "16px",
            fontFamily: "'Courier New', monospace",
            fontSize: "12px",
            lineHeight: "1.5",
            color: "#333",
            whiteSpace: "pre-wrap",
            wordBreak: "break-word",
            border: "1px solid #ddd",
            marginBottom: "16px"
          },
          children: JSON.stringify(Header_objectSpread(Header_objectSpread({}, state.template), {}, {
            elements: state.elements
          }), null, 2)
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: "flex",
            gap: "12px",
            justifyContent: "flex-end",
            alignItems: "center"
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              navigator.clipboard.writeText(JSON.stringify(Header_objectSpread(Header_objectSpread({}, state.template), {}, {
                elements: state.elements
              }), null, 2));
              setCopySuccess(true);
              setTimeout(function () {
                return setCopySuccess(false);
              }, 2000);
            },
            style: {
              padding: "8px 16px",
              backgroundColor: "#0073aa",
              color: "#ffffff",
              border: "none",
              borderRadius: "4px",
              cursor: "pointer",
              fontSize: "14px",
              fontWeight: "500",
              opacity: copySuccess ? 0.7 : 1
            },
            title: "Copier le JSON",
            children: copySuccess ? "âœ… CopiÃ©!" : "ðŸ“‹ Copier JSON"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              var jsonString = JSON.stringify(Header_objectSpread(Header_objectSpread({}, state.template), {}, {
                elements: state.elements
              }), null, 2);
              var blob = new Blob([jsonString], {
                type: "application/json"
              });
              var url = URL.createObjectURL(blob);
              var link = document.createElement("a");
              link.href = url;
              link.download = "template-".concat(templateName || "export", "-").concat(new Date().getTime(), ".json");
              link.click();
              URL.revokeObjectURL(url);
            },
            style: {
              padding: "8px 16px",
              backgroundColor: "#10a37f",
              color: "#ffffff",
              border: "none",
              borderRadius: "4px",
              cursor: "pointer",
              fontSize: "14px",
              fontWeight: "500"
            },
            title: "T\xE9l\xE9charger le JSON",
            children: "\uD83D\uDCBE T\xE9l\xE9charger"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              return setShowJsonModal(false);
            },
            style: {
              padding: "8px 16px",
              border: "1px solid #ddd",
              borderRadius: "4px",
              backgroundColor: "#f8f8f8",
              color: "#333",
              cursor: "pointer",
              fontSize: "14px",
              fontWeight: "500"
            },
            children: "Fermer"
          })]
        })]
      })
    }), showPreviewModal && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
      style: {
        position: "fixed",
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        backgroundColor: "rgba(0, 0, 0, 0.5)",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        zIndex: 1001
      },
      onLoad: function onLoad() {
        console.log('[REACT HEADER] ===== PREVIEW MODAL RENDERING =====');
        console.log('[REACT HEADER] Preview modal is open');
        console.log('[REACT HEADER] Modal state:');
        console.log('[REACT HEADER] - showPreviewModal:', showPreviewModal);
        console.log('[REACT HEADER] - isGeneratingPreview:', isGeneratingPreview);
        console.log('[REACT HEADER] - previewImageUrl:', previewImageUrl);
        console.log('[REACT HEADER] - previewError:', previewError);
        console.log('[REACT HEADER] - previewFormat:', previewFormat);
        console.log('[REACT HEADER] Modal rendering timestamp:', Date.now());
      },
      children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          backgroundColor: "#ffffff",
          borderRadius: "8px",
          padding: "24px",
          maxWidth: "90vw",
          width: "600px",
          maxHeight: "90vh",
          overflow: "auto",
          boxShadow: "0 4px 20px rgba(0, 0, 0, 0.15)"
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            display: "flex",
            justifyContent: "space-between",
            alignItems: "center",
            marginBottom: "20px"
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h3", {
            style: {
              margin: 0,
              fontSize: "18px",
              fontWeight: "600",
              color: "#1a1a1a"
            },
            children: "Aper\xE7u du PDF"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              closePreviewModal();
              clearPreview();
            },
            style: {
              background: "none",
              border: "none",
              fontSize: "24px",
              cursor: "pointer",
              color: "#666",
              padding: "0",
              width: "30px",
              height: "30px",
              display: "flex",
              alignItems: "center",
              justifyContent: "center"
            },
            title: "Fermer",
            children: "\xD7"
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            marginBottom: "20px"
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("label", {
            style: {
              display: "block",
              fontSize: "14px",
              fontWeight: "500",
              color: "#333",
              marginBottom: "8px"
            },
            children: "Format d'export :"
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              display: "flex",
              gap: "10px"
            },
            children: [{
              value: "png",
              label: "PNG",
              icon: "ðŸ–¼ï¸"
            }, {
              value: "jpg",
              label: "JPG",
              icon: "ðŸ“·"
            }, {
              value: "pdf",
              label: "PDF",
              icon: "ðŸ“„"
            }].map(function (format) {
              return /*#__PURE__*/(0,jsx_runtime.jsxs)("button", {
                onClick: function onClick() {
                  return setPreviewFormat(format.value);
                },
                style: {
                  padding: "8px 16px",
                  border: "2px solid ".concat(previewFormat === format.value ? "#007cba" : "#ddd"),
                  borderRadius: "6px",
                  backgroundColor: previewFormat === format.value ? "#f0f8ff" : "#fff",
                  color: previewFormat === format.value ? "#007cba" : "#333",
                  cursor: "pointer",
                  fontSize: "14px",
                  fontWeight: "500",
                  display: "flex",
                  alignItems: "center",
                  gap: "6px"
                },
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                  children: format.icon
                }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                  children: format.label
                })]
              }, format.value);
            })
          })]
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            marginBottom: "20px"
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: /*#__PURE__*/Header_asyncToGenerator(/*#__PURE__*/Header_regenerator().m(function _callee2() {
              var _state$elements7;
              return Header_regenerator().w(function (_context2) {
                while (1) switch (_context2.n) {
                  case 0:
                    console.log('[HEADER COMPONENT] ===== MODAL PREVIEW BUTTON CLICKED =====');
                    console.log('[HEADER COMPONENT] Preview button clicked in modal');
                    console.log('[HEADER COMPONENT] Timestamp:', Date.now());
                    console.log('[HEADER COMPONENT] State template:', state.template);
                    console.log('[HEADER COMPONENT] State elements:', state.elements);
                    console.log('[HEADER COMPONENT] State elements count:', ((_state$elements7 = state.elements) === null || _state$elements7 === void 0 ? void 0 : _state$elements7.length) || 0);
                    console.log('[HEADER COMPONENT] Preview format:', previewFormat);
                    console.log('[HEADER COMPONENT] Is generating:', isGeneratingPreview);
                    console.log('[HEADER COMPONENT] generatePreview function available:', Header_typeof(generatePreview));
                    console.log('[HEADER COMPONENT] About to call generatePreview');
                    _context2.n = 1;
                    return generatePreview(Header_objectSpread(Header_objectSpread({}, state.template), {}, {
                      elements: state.elements
                    }), {
                      format: previewFormat,
                      quality: 150
                    });
                  case 1:
                    console.log('[HEADER COMPONENT] generatePreview call completed');
                    console.log('[HEADER COMPONENT] ===== MODAL PREVIEW BUTTON HANDLER COMPLETED =====');
                  case 2:
                    return _context2.a(2);
                }
              }, _callee2);
            })),
            disabled: isGeneratingPreview,
            style: {
              padding: "12px 24px",
              backgroundColor: isGeneratingPreview ? "#ccc" : "#007cba",
              color: "#fff",
              border: "none",
              borderRadius: "6px",
              cursor: isGeneratingPreview ? "not-allowed" : "pointer",
              fontSize: "16px",
              fontWeight: "500",
              display: "flex",
              alignItems: "center",
              gap: "8px"
            },
            children: isGeneratingPreview ? /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                children: "\u27F3"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                children: "G\xE9n\xE9ration en cours..."
              })]
            }) : /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                children: "\uD83C\uDFA8"
              }), /*#__PURE__*/(0,jsx_runtime.jsx)("span", {
                children: "G\xE9n\xE9rer l'aper\xE7u"
              })]
            })
          })
        }), previewError && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            padding: "12px",
            backgroundColor: "#f8d7da",
            border: "1px solid #f5c6cb",
            borderRadius: "4px",
            color: "#721c24",
            marginBottom: "20px"
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("strong", {
            children: "Erreur:"
          }), " ", previewError, console.log('[HEADER COMPONENT] Displaying error in UI:', previewError)]
        }), previewImageUrl && /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            textAlign: "center"
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsx)("img", {
            src: previewImageUrl,
            alt: "Aper\xE7u du PDF",
            style: {
              maxWidth: "100%",
              maxHeight: "400px",
              border: "1px solid #ddd",
              borderRadius: "4px",
              boxShadow: "0 2px 8px rgba(0, 0, 0, 0.1)"
            }
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
            style: {
              marginTop: "10px"
            },
            children: /*#__PURE__*/(0,jsx_runtime.jsx)("a", {
              href: previewImageUrl,
              download: "apercu-".concat(templateName || "template", ".").concat(previewFormat),
              style: {
                padding: "8px 16px",
                backgroundColor: "#28a745",
                color: "#fff",
                textDecoration: "none",
                borderRadius: "4px",
                fontSize: "14px",
                fontWeight: "500"
              },
              children: "\uD83D\uDCBE T\xE9l\xE9charger"
            })
          })]
        })]
      })
    })]
  });
});
;// ./src/js/react/components/element-library/ElementLibrary.tsx



// DÃ©finition des Ã©lÃ©ments WooCommerce (migration depuis l'ancien Ã©diteur)

var WOOCOMMERCE_ELEMENTS = [{
  type: "product_table",
  label: "Tableau Produits",
  icon: "ðŸ“‹",
  description: "Tableau des produits commandÃ©s avec quantitÃ©s et prix",
  category: "woocommerce",
  defaultProps: {
    x: 50,
    y: 50,
    width: 500,
    height: 200,
    showHeaders: true,
    showBorders: true,
    showAlternatingRows: true,
    showSku: false,
    showDescription: false,
    showQuantity: true,
    fontSize: 11,
    fontFamily: "Arial",
    fontWeight: "normal",
    fontStyle: "normal",
    textDecoration: "none",
    textTransform: "none",
    letterSpacing: "normal",
    wordSpacing: "normal",
    lineHeight: "1.2",
    currency: "â‚¬",
    tableStyle: "default",
    textAlign: "left",
    verticalAlign: "top",
    backgroundColor: "#ffffff",
    headerBackgroundColor: "#f9fafb",
    headerTextColor: "#111827",
    alternateRowColor: "#f9fafb",
    borderColor: "#e5e7eb",
    borderWidth: 1,
    textColor: "#374151",
    rotation: 0,
    shadowColor: "#000000",
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    visible: true
  }
}, {
  type: "customer_info",
  label: "Fiche Client",
  icon: "ðŸ‘¤",
  description: "Informations dÃ©taillÃ©es du client (nom, adresse, email)",
  category: "woocommerce",
  defaultProps: {
    x: 50,
    y: 220,
    width: 250,
    height: 120,
    showHeaders: true,
    showBackground: true,
    showBorders: false,
    showFullName: true,
    showAddress: true,
    showEmail: true,
    showPhone: true,
    showPaymentMethod: false,
    showTransactionId: false,
    layout: "vertical",
    fontSize: 12,
    fontFamily: "Arial",
    fontWeight: "normal",
    fontStyle: "normal",
    headerFontStyle: "normal",
    bodyFontStyle: "normal",
    textDecoration: "none",
    textTransform: "none",
    letterSpacing: "normal",
    wordSpacing: "normal",
    lineHeight: "1.2",
    backgroundColor: "#e5e7eb",
    borderColor: "#e5e7eb",
    borderWidth: 0,
    textColor: "#374151",
    headerTextColor: "#111827",
    rotation: 0,
    shadowColor: "#000000",
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    visible: true
  }
}, {
  type: "company_info",
  label: "Informations Entreprise",
  icon: "[D]",
  description: "Nom, adresse, contact et TVA de l'entreprise",
  category: "woocommerce",
  defaultProps: {
    x: 50,
    y: 340,
    width: 250,
    height: 120,
    showBorders: false,
    showFullName: true,
    showAddress: true,
    showEmail: true,
    showPhone: true,
    showSiret: true,
    showVat: true,
    showRcs: true,
    showCapital: true,
    showCompanyName: true,
    layout: "vertical",
    fontSize: 12,
    fontFamily: "Arial",
    fontWeight: "normal",
    fontStyle: "normal",
    headerFontStyle: "normal",
    bodyFontStyle: "normal",
    textDecoration: "none",
    textTransform: "none",
    letterSpacing: "normal",
    wordSpacing: "normal",
    lineHeight: "1.2",
    backgroundColor: "#e5e7eb",
    borderColor: "#e5e7eb",
    borderWidth: 0,
    textColor: "#374151",
    headerTextColor: "#111827",
    rotation: 0,
    shadowColor: "#000000",
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    showBackground: true,
    visible: true
  }
}, {
  type: "company_logo",
  label: "Logo Entreprise",
  icon: "ðŸ¢",
  description: "Logo et identitÃ© visuelle de l'entreprise",
  category: "woocommerce",
  defaultProps: {
    x: 350,
    y: 50,
    width: 150,
    height: 80,
    fit: "contain",
    objectFit: "contain",
    alignment: "left",
    src: "",
    // URL du logo Ã  dÃ©finir
    backgroundColor: "transparent",
    borderColor: "#e5e7eb",
    borderWidth: 1,
    borderRadius: 0,
    opacity: 1,
    rotation: 0,
    shadowColor: "#000000",
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    visible: true
  }
}, {
  type: "order_number",
  label: "NumÃ©ro de Commande",
  icon: "ðŸ”¢",
  description: "RÃ©fÃ©rence de commande avec date",
  category: "woocommerce",
  defaultProps: {
    x: 350,
    y: 130,
    width: 100,
    height: 30,
    fontSize: 14,
    fontFamily: "Arial",
    fontWeight: "normal",
    fontStyle: "normal",
    textDecoration: "none",
    textTransform: "none",
    letterSpacing: "normal",
    wordSpacing: "normal",
    lineHeight: "1.2",
    textAlign: "right",
    backgroundColor: "transparent",
    borderColor: "#e5e7eb",
    borderWidth: 0,
    textColor: "#374151",
    rotation: 0,
    shadowColor: "#000000",
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    visible: true
  }
}, {
  type: "woocommerce_order_date",
  label: "Date de Commande",
  icon: "ðŸ“…",
  description: "Date de crÃ©ation de la commande",
  category: "woocommerce",
  defaultProps: {
    x: 350,
    y: 160,
    width: 100,
    height: 30,
    fontSize: 12,
    fontFamily: "Arial",
    fontWeight: "normal",
    fontStyle: "normal",
    textDecoration: "none",
    textTransform: "none",
    letterSpacing: "normal",
    wordSpacing: "normal",
    lineHeight: "1.2",
    textAlign: "right",
    backgroundColor: "transparent",
    borderColor: "#e5e7eb",
    borderWidth: 0,
    textColor: "#374151",
    rotation: 0,
    shadowColor: "#000000",
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    visible: true
  }
}, {
  type: "woocommerce_invoice_number",
  label: "NumÃ©ro de Facture",
  icon: "ðŸ“„",
  description: "NumÃ©ro de facture gÃ©nÃ©rÃ©",
  category: "woocommerce",
  defaultProps: {
    x: 350,
    y: 190,
    width: 100,
    height: 30,
    fontSize: 12,
    fontFamily: "Arial",
    fontWeight: "normal",
    fontStyle: "normal",
    textDecoration: "none",
    textTransform: "none",
    letterSpacing: "normal",
    wordSpacing: "normal",
    lineHeight: "1.2",
    textAlign: "right",
    backgroundColor: "transparent",
    borderColor: "#e5e7eb",
    borderWidth: 0,
    textColor: "#374151",
    rotation: 0,
    shadowColor: "#000000",
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    visible: true
  }
}, {
  type: "document_type",
  label: "Type de Document",
  icon: "ðŸ“„",
  description: "Type du document (Facture, Devis, Bon de commande, etc.)",
  category: "woocommerce",
  defaultProps: {
    x: 50,
    y: 430,
    width: 150,
    height: 40,
    title: "FACTURE",
    fontSize: 18,
    fontFamily: "Arial",
    fontWeight: "bold",
    fontStyle: "normal",
    textDecoration: "none",
    textTransform: "none",
    letterSpacing: "normal",
    wordSpacing: "normal",
    lineHeight: "1.2",
    textAlign: "left",
    backgroundColor: "transparent",
    borderColor: "#e5e7eb",
    borderWidth: 0,
    textColor: "#111827",
    rotation: 0,
    shadowColor: "#000000",
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    visible: true
  }
}, {
  type: "dynamic_text",
  label: "Texte Dynamique",
  icon: "ðŸ“",
  description: "Texte avec variables dynamiques",
  category: "woocommerce",
  defaultProps: {
    x: 50,
    y: 550,
    width: 200,
    height: 40,
    text: "Texte personnalisable",
    textTemplate: "custom",
    autoWrap: true,
    theme: "clean",
    fontSize: 14,
    fontFamily: "Arial",
    fontWeight: "normal",
    fontStyle: "normal",
    textDecoration: "none",
    textTransform: "none",
    letterSpacing: "normal",
    wordSpacing: "normal",
    lineHeight: "1.3",
    backgroundColor: "transparent",
    rotation: 0,
    shadowColor: "#000000",
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    visible: true
  }
}, {
  type: "mentions",
  label: "Mentions lÃ©gales",
  icon: "ðŸ“„",
  description: "Informations lÃ©gales (email, SIRET, tÃ©lÃ©phone, etc.)",
  category: "woocommerce",
  defaultProps: {
    x: 50,
    y: 480,
    width: 500,
    height: 60,
    showEmail: true,
    showPhone: true,
    showSiret: true,
    showVat: true,
    separator: " â€¢ ",
    fontSize: 10,
    fontFamily: "Arial",
    fontWeight: "normal",
    fontStyle: "normal",
    textDecoration: "none",
    textTransform: "none",
    letterSpacing: "normal",
    wordSpacing: "normal",
    lineHeight: "1.2",
    textAlign: "left",
    backgroundColor: "transparent",
    borderColor: "#e5e7eb",
    borderWidth: 0,
    textColor: "#6b7280",
    rotation: 0,
    shadowColor: "#000000",
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    visible: true
  }
}];
function ElementLibrary(_ref) {
  var onElementSelect = _ref.onElementSelect,
    className = _ref.className;
  var isMobile = useResponsive_useIsMobile();
  var isTablet = useResponsive_useIsTablet();
  var handleElementClick = function handleElementClick(elementType) {
    if (onElementSelect) {
      onElementSelect(elementType);
    }
  };
  var handleDragStart = function handleDragStart(e, element) {
    var _e$dataTransfer;
    // Stocker les donnÃ©es de l'Ã©lÃ©ment dans le transfert
    var dragData = {
      type: element.type,
      label: element.label,
      defaultProps: element.defaultProps
    };
    var jsonData = JSON.stringify(dragData);
    (_e$dataTransfer = e.dataTransfer) === null || _e$dataTransfer === void 0 || _e$dataTransfer.setData("application/json", jsonData);
    if (e.dataTransfer) {
      e.dataTransfer.effectAllowed = "copy";
    }
  };
  var handleDragEnd = function handleDragEnd(_e) {
    // Drag terminÃ©
  };
  return /*#__PURE__*/(0,jsx_runtime.jsx)(ResponsiveContainer, {
    className: "pdf-element-library ".concat(className || ""),
    mobileClass: "element-library-mobile",
    tabletClass: "element-library-tablet",
    desktopClass: "element-library-desktop",
    children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        width: isMobile ? "100%" : isTablet ? "240px" : "280px",
        height: "100%",
        backgroundColor: "#f8f9fa",
        borderRight: isMobile ? "none" : "1px solid #e9ecef",
        borderBottom: isMobile ? "1px solid #e9ecef" : "none",
        display: "flex",
        flexDirection: "column",
        overflow: "hidden"
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          padding: isMobile ? "12px" : "16px",
          borderBottom: "1px solid #e9ecef",
          backgroundColor: "#ffffff"
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h3", {
          style: {
            margin: 0,
            fontSize: isMobile ? "14px" : "16px",
            fontWeight: "600",
            color: "#495057"
          },
          children: "\uD83D\uDCE6 \xC9l\xE9ments WooCommerce"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
          style: {
            margin: "4px 0 0 0",
            fontSize: isMobile ? "11px" : "12px",
            color: "#6c757d",
            display: isMobile ? "none" : "block"
          },
          children: "Glissez les \xE9l\xE9ments sur le canvas"
        })]
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          flex: 1,
          overflowY: "auto",
          padding: isMobile ? "12px" : "8px"
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            display: "grid",
            gap: "8px"
          },
          children: WOOCOMMERCE_ELEMENTS.map(function (element) {
            return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
              draggable: true,
              onClick: function onClick() {
                return handleElementClick(element.type);
              },
              onDragStart: function onDragStart(e) {
                return handleDragStart(e, element);
              },
              onDragEnd: handleDragEnd,
              style: {
                padding: "12px",
                backgroundColor: "#ffffff",
                border: "1px solid #dee2e6",
                borderRadius: "6px",
                cursor: "grab",
                transition: "all 0.2s ease",
                display: "flex",
                alignItems: "center",
                gap: "12px",
                userSelect: "none"
              },
              onMouseEnter: function onMouseEnter(e) {
                e.currentTarget.style.borderColor = "#007acc";
                e.currentTarget.style.boxShadow = "0 2px 4px rgba(0, 122, 204, 0.1)";
                e.currentTarget.style.cursor = "grabbing";
              },
              onMouseLeave: function onMouseLeave(e) {
                e.currentTarget.style.borderColor = "#dee2e6";
                e.currentTarget.style.boxShadow = "none";
                e.currentTarget.style.cursor = "grab";
              },
              children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                style: {
                  fontSize: "20px",
                  width: "32px",
                  height: "32px",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  backgroundColor: "#f8f9fa",
                  borderRadius: "4px"
                },
                children: element.icon
              }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                style: {
                  flex: 1
                },
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontSize: "14px",
                    fontWeight: "500",
                    color: "#495057",
                    marginBottom: "2px"
                  },
                  children: element.label
                }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    fontSize: "12px",
                    color: "#6c757d",
                    lineHeight: "1.3"
                  },
                  children: element.description
                })]
              })]
            }, element.type);
          })
        })
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          padding: "12px 16px",
          borderTop: "1px solid #e9ecef",
          backgroundColor: "#ffffff",
          fontSize: "11px",
          color: "#6c757d",
          textAlign: "center"
        },
        children: "Cliquez sur un \xE9l\xE9ment pour l'ajouter"
      })]
    })
  });
}
;// ./src/js/react/utils/elementNormalization.ts
function elementNormalization_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function elementNormalization_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? elementNormalization_ownKeys(Object(t), !0).forEach(function (r) { elementNormalization_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : elementNormalization_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function elementNormalization_defineProperty(e, r, t) { return (r = elementNormalization_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function elementNormalization_toPropertyKey(t) { var i = elementNormalization_toPrimitive(t, "string"); return "symbol" == elementNormalization_typeof(i) ? i : i + ""; }
function elementNormalization_toPrimitive(t, r) { if ("object" != elementNormalization_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != elementNormalization_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function elementNormalization_typeof(o) { "@babel/helpers - typeof"; return elementNormalization_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, elementNormalization_typeof(o); }
/**
 * Normalisation robuste des Ã©lÃ©ments pour assurer la prÃ©servation complÃ¨te des propriÃ©tÃ©s
 * C'est LE systÃ¨me central qui garantit que contentAlign, labelPosition, etc. ne sont jamais perdus
 */


/**
 * FONCTION CRITIQUE: Normalise les Ã©lÃ©ments sans perdre AUCUNE propriÃ©tÃ© personnalisÃ©e
 * UtilisÃ©e au chargement APRÃˆS le parsing JSON
 * 
 * PropriÃ©tÃ©s Ã  prÃ©server ABSOLUMENT:
 * - contentAlign, labelPosition (order_number)
 * - Toute propriÃ©tÃ© custom ajoutÃ©e via l'Ã©diteur
 */
function normalizeElementsAfterLoad(elements) {
  if (!Array.isArray(elements)) {
    debugWarn('âŒ [NORMALIZE] Elements n\'est pas un array:', elementNormalization_typeof(elements));
    return [];
  }
  return elements.map(function (el, idx) {
    if (!el || elementNormalization_typeof(el) !== 'object') {
      debugWarn("\u274C [NORMALIZE] Element ".concat(idx, " invalide:"), el);
      return {};
    }
    var element = el;

    // CrÃ©er une copie COMPLÃˆTE (spread shallow)
    var normalized = elementNormalization_objectSpread(elementNormalization_objectSpread({}, element), {}, {
      id: element.id || "element-".concat(idx),
      type: element.type || 'unknown',
      x: Number(element.x) || 0,
      y: Number(element.y) || 0,
      width: Number(element.width) || 100,
      height: Number(element.height) || 100
    });
    return normalized;
  });
}

/**
 * FONCTION CRITIQUE: PrÃ©pare les Ã©lÃ©ments pour la sauvegarde
 * Assure que TOUT est sÃ©rialisable et complet
 */
function normalizeElementsBeforeSave(elements) {
  if (!Array.isArray(elements)) {
    debugWarn('âŒ [SAVE NORMALIZE] Elements n\'est pas un array');
    return [];
  }
  return elements.map(function (el, idx) {
    if (!el || elementNormalization_typeof(el) !== 'object') {
      debugWarn("\u274C [SAVE NORMALIZE] Element ".concat(idx, " invalide"));
      return {};
    }

    // CrÃ©er une copie COMPLÃˆTE
    var normalized = elementNormalization_objectSpread({}, el);

    // Valider les champs critiques
    if (!normalized.id) normalized.id = "element-".concat(idx);
    if (!normalized.type) normalized.type = 'unknown';
    if (typeof normalized.x !== 'number') normalized.x = 0;
    if (typeof normalized.y !== 'number') normalized.y = 0;
    if (typeof normalized.width !== 'number') normalized.width = 100;
    if (typeof normalized.height !== 'number') normalized.height = 100;

    // CRITICAL: Log les propriÃ©tÃ©s order_number avant sauvegarde
    if (normalized.type === 'order_number') {}

    // Filtrer les propriÃ©tÃ©s non sÃ©rialisables (Date, Function, etc)
    var serializable = {};
    Object.keys(normalized).forEach(function (key) {
      var value = normalized[key];
      var type = elementNormalization_typeof(value);

      // DEBUG: Log des propriÃ©tÃ©s spÃ©ciales
      if (key.includes('ðŸŽ¯') || key.includes('interactions') || key.includes('comportement') || key.includes('behavior')) {
        // 
      }

      // Garder: string, number, boolean, null, undefined
      // Garder: objects simples et arrays
      // REJETER: functions, symbols, dates (sauf si sÃ©rialisÃ©es)
      if (value === null || value === undefined || type === 'string' || type === 'number' || type === 'boolean') {
        serializable[key] = value;
      } else if (type === 'object') {
        try {
          // VÃ©rifier si c'est sÃ©rialisable
          JSON.stringify(value);
          serializable[key] = value;
        } catch (_unused) {
          debugWarn("\u26A0\uFE0F  [SAVE NORMALIZE] Propri\xE9t\xE9 non s\xE9rialisable ".concat(key, " skipp\xE9e"), value);
        }
      } else {
        // PropriÃ©tÃ©s rejetÃ©es (functions, etc.)
        debugWarn("\u26A0\uFE0F  [SAVE NORMALIZE] Propri\xE9t\xE9 rejet\xE9e: ".concat(key, " (type: ").concat(type, ")"));
      }
    });
    return serializable;
  });
}

/**
 * Valide que les propriÃ©tÃ©s critiques sont prÃ©sentes
 */
function validateElementIntegrity(elements, elementType) {
  var elementsOfType = elements.filter(function (el) {
    return el.type === elementType;
  });
  if (elementsOfType.length === 0) {
    return true; // Pas d'Ã©lÃ©ments de ce type
  }
  var allValid = true;
  elementsOfType.forEach(function (el, idx) {
    var required = ['id', 'type', 'x', 'y', 'width', 'height'];
    var missing = required.filter(function (key) {
      return !(key in el);
    });
    if (missing.length > 0) {
      debugError("\u274C [VALIDATE] Element ".concat(idx, " missing: ").concat(missing.join(', ')));
      allValid = false;
    }
    if (elementType === 'order_number') {
      var hasContentAlign = 'contentAlign' in el;
      var hasLabelPosition = 'labelPosition' in el;
      if (!hasContentAlign || !hasLabelPosition) {
        allValid = false;
      }
    }
  });
  return allValid;
}

/**
 * Debug helper: affiche un rapport complet
 */
function debugElementState(elements, label) {
  // Debug function - logs removed for production
}
;// ./src/js/react/utils/ClientNonceManager.ts
function ClientNonceManager_typeof(o) { "@babel/helpers - typeof"; return ClientNonceManager_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, ClientNonceManager_typeof(o); }
function ClientNonceManager_regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return ClientNonceManager_regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (ClientNonceManager_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, ClientNonceManager_regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, ClientNonceManager_regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), ClientNonceManager_regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", ClientNonceManager_regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), ClientNonceManager_regeneratorDefine2(u), ClientNonceManager_regeneratorDefine2(u, o, "Generator"), ClientNonceManager_regeneratorDefine2(u, n, function () { return this; }), ClientNonceManager_regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (ClientNonceManager_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function ClientNonceManager_regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } ClientNonceManager_regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { ClientNonceManager_regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, ClientNonceManager_regeneratorDefine2(e, r, n, t); }
function ClientNonceManager_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function ClientNonceManager_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { ClientNonceManager_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { ClientNonceManager_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function ClientNonceManager_classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function ClientNonceManager_defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, ClientNonceManager_toPropertyKey(o.key), o); } }
function ClientNonceManager_createClass(e, r, t) { return r && ClientNonceManager_defineProperties(e.prototype, r), t && ClientNonceManager_defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function ClientNonceManager_defineProperty(e, r, t) { return (r = ClientNonceManager_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function ClientNonceManager_toPropertyKey(t) { var i = ClientNonceManager_toPrimitive(t, "string"); return "symbol" == ClientNonceManager_typeof(i) ? i : i + ""; }
function ClientNonceManager_toPrimitive(t, r) { if ("object" != ClientNonceManager_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != ClientNonceManager_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
/**
 * Gestionnaire de nonce unifiÃ© pour le frontend
 * Assure la cohÃ©rence avec le systÃ¨me backend NonceManager
 */

/**
 * Configuration du nonce cÃ´tÃ© client
 */

/**
 * RÃ©ponse de nonce du serveur
 */

/**
 * Gestionnaire de nonce client
 */
var ClientNonceManager = /*#__PURE__*/function () {
  function ClientNonceManager() {
    ClientNonceManager_classCallCheck(this, ClientNonceManager);
  }
  return ClientNonceManager_createClass(ClientNonceManager, null, [{
    key: "getCurrentNonce",
    value:
    /**
     * Obtenir le nonce actuel depuis la fenÃªtre globale
     */
    function getCurrentNonce() {
      var _window$pdfBuilderDat;
      return ((_window$pdfBuilderDat = window.pdfBuilderData) === null || _window$pdfBuilderDat === void 0 ? void 0 : _window$pdfBuilderDat.nonce) || window.pdfBuilderNonce || null;
    }

    /**
     * Obtenir l'URL AJAX
     */
  }, {
    key: "getAjaxUrl",
    value: function getAjaxUrl() {
      var _window$pdfBuilderDat2;
      return ((_window$pdfBuilderDat2 = window.pdfBuilderData) === null || _window$pdfBuilderDat2 === void 0 ? void 0 : _window$pdfBuilderDat2.ajaxUrl) || "";
    }

    /**
     * Mettre Ã  jour le nonce globalement
     */
  }, {
    key: "setNonce",
    value: function setNonce(nonce) {
      if (window.pdfBuilderData) {
        window.pdfBuilderData.nonce = nonce;
      }
      if (window.pdfBuilderReactData) {
        window.pdfBuilderReactData.nonce = nonce;
      }
      window.pdfBuilderNonce = nonce;
      sessionStorage.setItem(this.STORAGE_KEY, nonce);
    }

    /**
     * Obtenir un nonce frais du serveur
     */
  }, {
    key: "refreshNonce",
    value: (function () {
      var _refreshNonce = ClientNonceManager_asyncToGenerator(/*#__PURE__*/ClientNonceManager_regenerator().m(function _callee(currentNonce) {
        var formData, _result$data, response, result, freshNonce, _t;
        return ClientNonceManager_regenerator().w(function (_context) {
          while (1) switch (_context.p = _context.n) {
            case 0:
              formData = new FormData();
              formData.append("action", "pdf_builder_get_fresh_nonce");
              if (currentNonce) {
                formData.append("nonce", currentNonce);
              }
              _context.p = 1;
              _context.n = 2;
              return fetch(this.getAjaxUrl(), {
                method: "POST",
                body: formData
              });
            case 2:
              response = _context.v;
              if (response.ok) {
                _context.n = 3;
                break;
              }
              return _context.a(2, null);
            case 3:
              _context.n = 4;
              return response.json();
            case 4:
              result = _context.v;
              if (!(result.success && (_result$data = result.data) !== null && _result$data !== void 0 && _result$data.nonce)) {
                _context.n = 5;
                break;
              }
              freshNonce = result.data.nonce;
              this.setNonce(freshNonce);
              return _context.a(2, freshNonce);
            case 5:
              return _context.a(2, null);
            case 6:
              _context.n = 8;
              break;
            case 7:
              _context.p = 7;
              _t = _context.v;
              return _context.a(2, null);
            case 8:
              return _context.a(2);
          }
        }, _callee, this, [[1, 7]]);
      }));
      function refreshNonce(_x) {
        return _refreshNonce.apply(this, arguments);
      }
      return refreshNonce;
    }()
    /**
     * Ajouter le nonce Ã  un FormData
     */
    )
  }, {
    key: "addToFormData",
    value: function addToFormData(formData, nonce) {
      var nonceToUse = nonce || this.getCurrentNonce();
      if (nonceToUse) {
        formData.append("nonce", nonceToUse);
      } else {}
      return formData;
    }

    /**
     * Ajouter le nonce Ã  une URL (GET)
     */
  }, {
    key: "addToUrl",
    value: function addToUrl(url, nonce) {
      var nonceToUse = nonce || this.getCurrentNonce();
      if (!nonceToUse) {
        return url;
      }
      var separator = url.includes("?") ? "&" : "?";
      return "".concat(url).concat(separator, "nonce=").concat(encodeURIComponent(nonceToUse));
    }

    /**
     * Obtenir la configuration actuelle du nonce
     */
  }, {
    key: "getConfig",
    value: function getConfig() {
      var nonce = this.getCurrentNonce();
      if (!nonce) {
        return null;
      }
      return {
        nonce: nonce,
        action: this.NONCE_ACTION,
        ajaxUrl: this.getAjaxUrl(),
        timestamp: Math.floor(Date.now() / 1000)
      };
    }

    /**
     * VÃ©rifier si le nonce est valide
     */
  }, {
    key: "isValid",
    value: function isValid() {
      var nonce = this.getCurrentNonce();
      return nonce !== null && nonce.length > 0;
    }

    /**
     * Logger une information
     */
  }, {
    key: "log",
    value: function log(message) {}

    /**
     * Logger une erreur
     */
  }, {
    key: "logError",
    value: function logError(message) {}
  }]);
}();
/**
 * Action nonce unifiÃ© - doit correspondre au backend
 */
ClientNonceManager_defineProperty(ClientNonceManager, "NONCE_ACTION", "pdf_builder_ajax");
/**
 * ClÃ© pour stocker le nonce
 */
ClientNonceManager_defineProperty(ClientNonceManager, "STORAGE_KEY", "pdfBuilderNonce");
/**
 * TTL du nonce en secondes (12 heures)
 */
ClientNonceManager_defineProperty(ClientNonceManager, "NONCE_TTL", 43200);
/* harmony default export */ const utils_ClientNonceManager = ((/* unused pure expression or super */ null && (ClientNonceManager)));
;// ./src/js/react/hooks/useTemplate.ts
function useTemplate_regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return useTemplate_regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (useTemplate_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, useTemplate_regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, useTemplate_regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), useTemplate_regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", useTemplate_regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), useTemplate_regeneratorDefine2(u), useTemplate_regeneratorDefine2(u, o, "Generator"), useTemplate_regeneratorDefine2(u, n, function () { return this; }), useTemplate_regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (useTemplate_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function useTemplate_regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } useTemplate_regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { useTemplate_regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, useTemplate_regeneratorDefine2(e, r, n, t); }
function useTemplate_ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function useTemplate_objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? useTemplate_ownKeys(Object(t), !0).forEach(function (r) { useTemplate_defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : useTemplate_ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function useTemplate_defineProperty(e, r, t) { return (r = useTemplate_toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function useTemplate_toPropertyKey(t) { var i = useTemplate_toPrimitive(t, "string"); return "symbol" == useTemplate_typeof(i) ? i : i + ""; }
function useTemplate_toPrimitive(t, r) { if ("object" != useTemplate_typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != useTemplate_typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function useTemplate_typeof(o) { "@babel/helpers - typeof"; return useTemplate_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, useTemplate_typeof(o); }
function useTemplate_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function useTemplate_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { useTemplate_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { useTemplate_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }






function useTemplate() {
  var _useBuilder = useBuilder(),
    state = _useBuilder.state,
    dispatch = _useBuilder.dispatch;
  var _useCanvasSettings = CanvasSettingsContext_useCanvasSettings(),
    canvasWidth = _useCanvasSettings.canvasWidth,
    canvasHeight = _useCanvasSettings.canvasHeight;

  // DÃ©tecter si on est sur un template existant via l'URL ou les donnÃ©es localisÃ©es
  var getTemplateIdFromUrl = (0,react.useCallback)(function () {
    var _window$pdfBuilderDat;
    // PrioritÃ© 1: Utiliser le templateId du state template (aprÃ¨s sauvegarde)
    if (state.template.id) {
      return state.template.id.toString();
    }

    // PrioritÃ© 2: Utiliser le templateId des donnÃ©es PHP localisÃ©es
    if ((_window$pdfBuilderDat = window.pdfBuilderData) !== null && _window$pdfBuilderDat !== void 0 && _window$pdfBuilderDat.templateId) {
      return window.pdfBuilderData.templateId.toString();
    }

    // PrioritÃ© 3: Utiliser le paramÃ¨tre URL (pour compatibilitÃ©)
    var urlParams = new URLSearchParams(window.location.search);
    var urlTemplateId = urlParams.get("template_id");
    if (urlTemplateId) {
      return urlTemplateId;
    }
    return null;
  }, [state.template.id]);
  var isEditingExistingTemplate = function isEditingExistingTemplate() {
    return getTemplateIdFromUrl() !== null;
  };

  // Charger un template existant
  var loadExistingTemplate = (0,react.useCallback)(/*#__PURE__*/function () {
    var _ref = useTemplate_asyncToGenerator(/*#__PURE__*/useTemplate_regenerator().m(function _callee(templateId) {
      var _window$pdfBuilderDat2, _window$pdfBuilderDat3;
      var _window$pdfBuilderDat4, _window$pdfBuilderDat5, _templateData$showGui2, _templateData$snapToG2, _templateData$marginT2, _templateData$marginB2, _templateData$descrip2, _templateData$showGui, _templateData$snapToG, _templateData$marginT, _templateData$marginB, _templateData$descrip, _templateData, _templateName, _elements, _canvasData, _normalizedElements, _enrichedElements, _lastSavedDate, isChrome, isFirefox, isSafari, fetchOptions, cacheBreaker, url, response, errorText, result, templateData, ajaxTemplateName, templateName, orderNumberElements, elements, canvasData, normalizedElements, enrichedElements, lastSavedDate, finalOrderNumberElements, _window$pdfBuilderDat6, _isChrome, _isFirefox, _isSafari, fallbackOptions, fallbackUrl, fallbackResponse, _t, _t2;
      return useTemplate_regenerator().w(function (_context) {
        while (1) switch (_context.p = _context.n) {
          case 0:
            console.log('[LOAD TEMPLATE] Starting load for template ID:', templateId);
            console.log('[LOAD TEMPLATE] window.pdfBuilderData:', window.pdfBuilderData);
            console.log('[LOAD TEMPLATE] hasExistingData:', (_window$pdfBuilderDat2 = window.pdfBuilderData) === null || _window$pdfBuilderDat2 === void 0 ? void 0 : _window$pdfBuilderDat2.hasExistingData);
            console.log('[LOAD TEMPLATE] existingTemplate:', (_window$pdfBuilderDat3 = window.pdfBuilderData) === null || _window$pdfBuilderDat3 === void 0 ? void 0 : _window$pdfBuilderDat3.existingTemplate);
            _context.p = 1;
            if (!((_window$pdfBuilderDat4 = window.pdfBuilderData) !== null && _window$pdfBuilderDat4 !== void 0 && _window$pdfBuilderDat4.existingTemplate && (_window$pdfBuilderDat5 = window.pdfBuilderData) !== null && _window$pdfBuilderDat5 !== void 0 && _window$pdfBuilderDat5.hasExistingData)) {
              _context.n = 2;
              break;
            }
            _templateData = window.pdfBuilderData.existingTemplate; // Utiliser le nom du JSON en prioritÃ© (s'il existe et n'est pas vide), sinon le nom de la DB, sinon fallback explicite
            _templateName = _templateData !== null && _templateData !== void 0 && _templateData.name && _templateData.name.trim() !== "" ? _templateData.name : _templateData !== null && _templateData !== void 0 && _templateData._db_name && _templateData._db_name.trim() !== "" ? _templateData._db_name : "[NOM NON R\xC9CUP\xC9R\xC9 - ID: ".concat(templateId, "]"); // 
            // Parse JSON strings if needed
            _elements = [];
            _canvasData = null;
            try {
              if (typeof _templateData.elements === "string") {
                _elements = JSON.parse(_templateData.elements);
              } else if (Array.isArray(_templateData.elements)) {
                _elements = _templateData.elements;
              } else {
                _elements = [];
              }
              if (_templateData.canvasWidth && _templateData.canvasHeight) {
                _canvasData = {
                  width: _templateData.canvasWidth,
                  height: _templateData.canvasHeight
                };
              } else if (typeof _templateData.canvas === "string") {
                _canvasData = JSON.parse(_templateData.canvas);
              } else if (_templateData.canvas && useTemplate_typeof(_templateData.canvas) === "object") {
                _canvasData = _templateData.canvas;
              } else {
                _canvasData = {
                  width: 210,
                  height: 297
                };
              }
            } catch (parseError) {
              debug_debugError("âŒ [LOAD TEMPLATE] Erreur de parsing des donnÃ©es localisÃ©es:", parseError);
              _elements = [];
              _canvasData = {
                width: 210,
                height: 297
              };
            }
            _normalizedElements = normalizeElementsAfterLoad(_elements);
            _enrichedElements = _normalizedElements.map(function (el) {
              var enrichedElement = useTemplate_objectSpread({}, el);
              if (el.type === "company_logo" && !el.src && !el.logoUrl) {
                var logoUrl = el.defaultSrc || "";
                if (logoUrl) {
                  enrichedElement.src = logoUrl;
                }
              }
              if (enrichedElement.createdAt) {
                try {
                  var createdAt = new Date(enrichedElement.createdAt);
                  enrichedElement.createdAt = isNaN(createdAt.getTime()) ? new Date() : createdAt;
                } catch (_unused) {
                  enrichedElement.createdAt = new Date();
                }
              } else {
                enrichedElement.createdAt = new Date();
              }
              if (enrichedElement.updatedAt) {
                try {
                  var updatedAt = new Date(enrichedElement.updatedAt);
                  enrichedElement.updatedAt = isNaN(updatedAt.getTime()) ? new Date() : updatedAt;
                } catch (_unused2) {
                  enrichedElement.updatedAt = new Date();
                }
              } else {
                enrichedElement.updatedAt = new Date();
              }
              return enrichedElement;
            });
            try {
              if (_templateData.updated_at) {
                _lastSavedDate = new Date(_templateData.updated_at);
                if (isNaN(_lastSavedDate.getTime())) {
                  _lastSavedDate = new Date();
                }
              } else {
                _lastSavedDate = new Date();
              }
            } catch (_unused3) {
              _lastSavedDate = new Date();
            }
            dispatch({
              type: "LOAD_TEMPLATE",
              payload: {
                id: templateId,
                name: _templateName,
                elements: _enrichedElements,
                canvas: _canvasData,
                lastSaved: _lastSavedDate,
                // Restaurer les paramÃ¨tres du template depuis les donnÃ©es chargÃ©es
                showGuides: (_templateData$showGui = _templateData.showGuides) !== null && _templateData$showGui !== void 0 ? _templateData$showGui : true,
                snapToGrid: (_templateData$snapToG = _templateData.snapToGrid) !== null && _templateData$snapToG !== void 0 ? _templateData$snapToG : false,
                marginTop: (_templateData$marginT = _templateData.marginTop) !== null && _templateData$marginT !== void 0 ? _templateData$marginT : 0,
                marginBottom: (_templateData$marginB = _templateData.marginBottom) !== null && _templateData$marginB !== void 0 ? _templateData$marginB : 0,
                description: (_templateData$descrip = _templateData.description) !== null && _templateData$descrip !== void 0 ? _templateData$descrip : ""
              }
            });
            return _context.a(2, true);
          case 2:
            // âœ… FALLBACK: Utiliser AJAX si les donnÃ©es localisÃ©es ne sont pas disponibles
            // DÃ©tecter le navigateur pour des en-tÃªtes spÃ©cifiques
            isChrome = typeof navigator !== "undefined" && /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
            isFirefox = typeof navigator !== "undefined" && /Firefox/.test(navigator.userAgent);
            isSafari = typeof navigator !== "undefined" && /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/Chromium/.test(navigator.userAgent); // PrÃ©parer les options fetch avec des en-tÃªtes spÃ©cifiques par navigateur
            fetchOptions = {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
                "X-Requested-With": "XMLHttpRequest",
                // En-tÃªtes anti-cache spÃ©cifiques
                "Cache-Control": "no-cache, no-store, must-revalidate",
                Pragma: "no-cache",
                Expires: "0"
              },
              // Mode spÃ©cifique selon le navigateur
              mode: "cors",
              credentials: "same-origin"
            }; // Ajustements spÃ©cifiques par navigateur
            if (isChrome) {
              // Chrome peut avoir besoin d'un mode plus permissif
              fetchOptions.mode = "cors";
              fetchOptions.cache = "no-cache";
            } else if (isFirefox) {
              // Firefox gÃ¨re bien le cache par dÃ©faut
              fetchOptions.cache = "no-cache";
            } else if (isSafari) {
              // Safari peut avoir des problÃ¨mes avec certains modes
              fetchOptions.mode = "cors";
            }
            cacheBreaker = Date.now();
            url = ClientNonceManager.addToUrl("".concat(ClientNonceManager.getAjaxUrl(), "?action=pdf_builder_get_template&template_id=").concat(templateId, "&t=").concat(cacheBreaker));
            _context.n = 3;
            return fetch(url, fetchOptions);
          case 3:
            response = _context.v;
            if (response.ok) {
              _context.n = 5;
              break;
            }
            _context.n = 4;
            return response.text();
          case 4:
            errorText = _context.v;
            debug_debugError("[useTemplate] Response error text:", errorText);
            throw new Error("Erreur HTTP ".concat(response.status, ": ").concat(response.statusText));
          case 5:
            _context.n = 6;
            return response.json();
          case 6:
            result = _context.v;
            if (result.success) {
              _context.n = 7;
              break;
            }
            throw new Error(result.data || "Erreur lors du chargement du template");
          case 7:
            templateData = result.data ? result.data.template : result.template;
            ajaxTemplateName = result.data ? result.data.template_name || result.data.name : result.name || result.template_name; // Appliquer la mÃªme logique de fallback que pour les donnÃ©es localisÃ©es
            templateName = ajaxTemplateName && ajaxTemplateName.trim() !== "" ? ajaxTemplateName : templateData !== null && templateData !== void 0 && templateData.name && templateData.name.trim() !== "" ? templateData.name : "[NOM NON R\xC9CUP\xC9R\xC9 - ID: ".concat(templateId, "]"); // ðŸ” Tracer les Ã©lÃ©ments reÃ§us du serveur
            if (templateData.elements) {
              // ðŸ” VÃ©rifier spÃ©cifiquement les Ã©lÃ©ments order_number
              orderNumberElements = templateData.elements.filter(function (el) {
                return el.type === "order_number";
              });
            }

            // Parse JSON strings
            elements = [];
            canvasData = null;
            try {
              // Check if elements is already an object or needs parsing
              if (typeof templateData.elements === "string") {
                elements = JSON.parse(templateData.elements);
              } else if (Array.isArray(templateData.elements)) {
                elements = templateData.elements;
              } else {
                elements = [];
              }

              // âœ… CORRECTION: Support both old format (canvas: {width, height}) and new format (canvasWidth, canvasHeight)
              if (templateData.canvasWidth && templateData.canvasHeight) {
                canvasData = {
                  width: templateData.canvasWidth,
                  height: templateData.canvasHeight
                };
              } else if (typeof templateData.canvas === "string") {
                canvasData = JSON.parse(templateData.canvas);
              } else if (templateData.canvas && useTemplate_typeof(templateData.canvas) === "object") {
                canvasData = templateData.canvas;
              } else {
                canvasData = {
                  width: 210,
                  height: 297
                };
              }
            } catch (parseError) {
              debug_debugError("âŒ [LOAD TEMPLATE] Erreur de parsing:", parseError);
              elements = [];
              canvasData = {
                width: 210,
                height: 297
              };
            }

            // âœ… NORMALISER LES Ã‰LÃ‰MENTS APRÃˆS CHARGE (CRITIQUE!)
            // Cela garantit que contentAlign, labelPosition, etc. sont prÃ©servÃ©s
            normalizedElements = normalizeElementsAfterLoad(elements);
            debugElementState(normalizedElements, "APRÃˆS CHARGEMENT");

            // ðŸ·ï¸ Enrichir les Ã©lÃ©ments company_logo avec src si manquant et convertir les dates
            enrichedElements = normalizedElements.map(function (el) {
              var enrichedElement = useTemplate_objectSpread({}, el);

              // âœ… CORRECTION: Enrichir les Ã©lÃ©ments company_logo SEULEMENT si src ET logoUrl sont vides
              if (el.type === "company_logo" && !el.src && !el.logoUrl) {
                // Essayer d'obtenir le logo depuis les propriÃ©tÃ©s de l'Ã©lÃ©ment
                var logoUrl = el.defaultSrc || "";
                if (logoUrl) {
                  enrichedElement.src = logoUrl;
                }
              }

              // Convertir les propriÃ©tÃ©s de date en objets Date valides
              if (enrichedElement.createdAt) {
                try {
                  var createdAt = new Date(enrichedElement.createdAt);
                  enrichedElement.createdAt = isNaN(createdAt.getTime()) ? new Date() : createdAt;
                } catch (_unused4) {
                  enrichedElement.createdAt = new Date();
                }
              } else {
                enrichedElement.createdAt = new Date();
              }
              if (enrichedElement.updatedAt) {
                try {
                  var updatedAt = new Date(enrichedElement.updatedAt);
                  enrichedElement.updatedAt = isNaN(updatedAt.getTime()) ? new Date() : updatedAt;
                } catch (_unused5) {
                  enrichedElement.updatedAt = new Date();
                }
              } else {
                enrichedElement.updatedAt = new Date();
              }
              return enrichedElement;
            });
            enrichedElements.slice(0, 3).forEach(function (_el, _idx) {});

            // CrÃ©er une date valide pour lastSaved

            try {
              if (templateData.updated_at) {
                lastSavedDate = new Date(templateData.updated_at);
                // VÃ©rifier si la date est valide
                if (isNaN(lastSavedDate.getTime())) {
                  lastSavedDate = new Date();
                }
              } else {
                lastSavedDate = new Date();
              }
            } catch (_unused6) {
              lastSavedDate = new Date();
            }

            // ðŸ” Log final des Ã©lÃ©ments order_number avant envoi au contexte
            finalOrderNumberElements = enrichedElements.filter(function (el) {
              return el.type === "order_number";
            });
            dispatch({
              type: "LOAD_TEMPLATE",
              payload: {
                id: templateId,
                name: templateName,
                elements: enrichedElements,
                canvas: canvasData,
                lastSaved: lastSavedDate,
                // Restaurer les paramÃ¨tres du template depuis les donnÃ©es chargÃ©es
                showGuides: (_templateData$showGui2 = templateData.showGuides) !== null && _templateData$showGui2 !== void 0 ? _templateData$showGui2 : true,
                snapToGrid: (_templateData$snapToG2 = templateData.snapToGrid) !== null && _templateData$snapToG2 !== void 0 ? _templateData$snapToG2 : false,
                marginTop: (_templateData$marginT2 = templateData.marginTop) !== null && _templateData$marginT2 !== void 0 ? _templateData$marginT2 : 0,
                marginBottom: (_templateData$marginB2 = templateData.marginBottom) !== null && _templateData$marginB2 !== void 0 ? _templateData$marginB2 : 0,
                description: (_templateData$descrip2 = templateData.description) !== null && _templateData$descrip2 !== void 0 ? _templateData$descrip2 : ""
              }
            });
            return _context.a(2, true);
          case 8:
            _context.p = 8;
            _t = _context.v;
            debug_debugError("âŒ [LOAD TEMPLATE] Erreur lors du chargement:", _t);

            // Diagnostics spÃ©cifiques selon le navigateur
            _isChrome = typeof navigator !== "undefined" && /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
            _isFirefox = typeof navigator !== "undefined" && /Firefox/.test(navigator.userAgent);
            _isSafari = typeof navigator !== "undefined" && /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/Chromium/.test(navigator.userAgent);
            debug_debugError("\u274C [LOAD TEMPLATE] \xC9chec du chargement sur ".concat(_isChrome ? "Chrome" : _isFirefox ? "Firefox" : _isSafari ? "Safari" : "navigateur inconnu"));
            debug_debugError("âŒ [LOAD TEMPLATE] DÃ©tails de l'erreur:", {
              message: _t instanceof Error ? _t.message : "Unknown error",
              stack: _t instanceof Error ? _t.stack : undefined,
              name: _t instanceof Error ? _t.name : "Unknown",
              templateId: templateId,
              ajaxUrl: (_window$pdfBuilderDat6 = window.pdfBuilderData) === null || _window$pdfBuilderDat6 === void 0 ? void 0 : _window$pdfBuilderDat6.ajaxUrl,
              userAgent: navigator.userAgent
            });

            // Tentative de fallback pour Chrome
            if (!(_isChrome && _t instanceof Error && _t.message.includes("fetch"))) {
              _context.n = 14;
              break;
            }
            debugWarn("ðŸ”„ [LOAD TEMPLATE] Tentative de fallback pour Chrome - Nouvelle tentative avec options diffÃ©rentes");
            _context.p = 9;
            _context.n = 10;
            return new Promise(function (resolve) {
              return setTimeout(resolve, 1000);
            });
          case 10:
            // Retry avec des options diffÃ©rentes
            fallbackOptions = {
              method: "GET",
              headers: {
                Accept: "application/json, text/plain, */*",
                "X-Requested-With": "XMLHttpRequest"
              },
              mode: "no-cors",
              cache: "reload"
            };
            fallbackUrl = ClientNonceManager.addToUrl("".concat(ClientNonceManager.getAjaxUrl(), "?action=pdf_builder_get_template&template_id=").concat(templateId, "&fallback=1&t=").concat(Date.now()));
            _context.n = 11;
            return fetch(fallbackUrl, fallbackOptions);
          case 11:
            fallbackResponse = _context.v;
            if (!(fallbackResponse.ok || fallbackResponse.status === 0)) {
              _context.n = 12;
              break;
            }
            return _context.a(2, true);
          case 12:
            _context.n = 14;
            break;
          case 13:
            _context.p = 13;
            _t2 = _context.v;
            debug_debugError("âŒ [LOAD TEMPLATE] Ã‰chec du fallback:", _t2);
          case 14:
            return _context.a(2, false);
        }
      }, _callee, null, [[9, 13], [1, 8]]);
    }));
    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }(), [dispatch]);

  // ðŸŽ¯ DISABLED: Event-based template loading causes race conditions with useEffect
  // Both methods try to load the same template, causing flashing/alternating canvas
  // The useEffect approach (reading URL) is more reliable and runs once per page load
  (0,react.useEffect)(function () {
    // âœ… Event listener disabled to prevent race conditions
    // Only useEffect with URL reading will load templates now
    return function () {
      // cleanup
    };
  }, []);

  // Effet pour charger automatiquement un template existant au montage
  // âœ… DÃ©pendance vide: charger une seule fois au montage du composant
  (0,react.useEffect)(function () {
    var templateId = getTemplateIdFromUrl();
    if (templateId) {
      // Timeout de sÃ©curitÃ© : forcer isLoading Ã  false aprÃ¨s 10 secondes si le chargement Ã©choue
      var loadingTimeout = setTimeout(function () {
        debug_debugError("[useTemplate] Loading timeout reached, forcing isLoading to false");
        dispatch({
          type: "SET_TEMPLATE_LOADING",
          payload: false
        });
      }, 10000);

      // Charger le template avec gestion d'erreur amÃ©liorÃ©e
      loadExistingTemplate(templateId).then(function () {
        clearTimeout(loadingTimeout);
      })["catch"](function (error) {
        clearTimeout(loadingTimeout);
        debug_debugError("[useTemplate] Template loading failed:", error);
        // Force isLoading to false on error
        dispatch({
          type: "SET_TEMPLATE_LOADING",
          payload: false
        });
      });
    } else {
      // Si pas de template ID, forcer isLoading Ã  false pour nouveau template
      dispatch({
        type: "NEW_TEMPLATE"
      });
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  // Sauvegarder un template manuellement
  var saveTemplate = (0,react.useCallback)(/*#__PURE__*/useTemplate_asyncToGenerator(/*#__PURE__*/useTemplate_regenerator().m(function _callee2() {
    var templateId, normalizedElements, templateData, formData, response, result, _result$data, _result$data2, freshNonce, _t3, _t4;
    return useTemplate_regenerator().w(function (_context2) {
      while (1) switch (_context2.p = _context2.n) {
        case 0:
          // 
          dispatch({
            type: "SET_TEMPLATE_SAVING",
            payload: true
          });
          _context2.p = 1;
          templateId = getTemplateIdFromUrl(); // 
          if (templateId) {
            _context2.n = 2;
            break;
          }
          throw new Error("Aucun template chargÃ© pour la sauvegarde");
        case 2:
          if (!(!state.template.name || state.template.name.trim() === "")) {
            _context2.n = 3;
            break;
          }
          return _context2.a(2);
        case 3:
          if (ClientNonceManager.getAjaxUrl()) {
            _context2.n = 4;
            break;
          }
          throw new Error("URL AJAX non disponible");
        case 4:
          if (ClientNonceManager.isValid()) {
            _context2.n = 5;
            break;
          }
          throw new Error("Nonce non disponible");
        case 5:
          // âœ… NORMALISER LES Ã‰LÃ‰MENTS AVANT SAUVEGARDE
          // Cela garantit que contentAlign, labelPosition, etc. ne sont jamais perdus
          normalizedElements = normalizeElementsBeforeSave(state.elements);
          debugElementState(normalizedElements, "AVANT SAUVEGARDE");

          // ðŸ” DEBUG: Log complet des propriÃ©tÃ©s des Ã©lÃ©ments avant sauvegarde
          // 
          // 

          // VÃ©rifier les propriÃ©tÃ©s spÃ©ciales
          normalizedElements.forEach(function (el, idx) {
            // 
            // Chercher des propriÃ©tÃ©s avec emoji ou "interactions"
            Object.keys(el).forEach(function (key) {
              if (key.includes("ðŸŽ¯") || key.includes("interactions") || key.includes("comportement") || key.includes("behavior")) {
                // 
              }
            });
          });

          // Structure simple et propre pour la sauvegarde
          templateData = {
            elements: normalizedElements,
            canvasWidth: canvasWidth,
            canvasHeight: canvasHeight,
            version: "1.0",
            // Inclure les paramÃ¨tres du template
            name: state.template.name,
            description: state.template.description,
            showGuides: state.template.showGuides,
            snapToGrid: state.template.snapToGrid,
            marginTop: state.template.marginTop,
            marginBottom: state.template.marginBottom
          };
          formData = new FormData();
          formData.append("action", "pdf_builder_save_template");
          formData.append("template_id", templateId);
          formData.append("template_name", state.template.name || "Nouveau template");
          formData.append("template_description", state.template.description || "");
          formData.append("template_data", JSON.stringify(templateData));

          // Utiliser le gestionnaire de nonce unifiÃ©
          ClientNonceManager.addToFormData(formData);

          // Ajouter les paramÃ¨tres du template
          formData.append("show_guides", state.template.showGuides ? "1" : "0");
          formData.append("snap_to_grid", state.template.snapToGrid ? "1" : "0");
          formData.append("margin_top", (state.template.marginTop || 0).toString());
          formData.append("margin_bottom", (state.template.marginBottom || 0).toString());
          formData.append("canvas_width", (state.template.canvasWidth || canvasWidth).toString());
          formData.append("canvas_height", (state.template.canvasHeight || canvasHeight).toString());
          _context2.n = 6;
          return fetch(ClientNonceManager.getAjaxUrl(), {
            method: "POST",
            body: formData
          });
        case 6:
          response = _context2.v;
          if (response.ok) {
            _context2.n = 7;
            break;
          }
          throw new Error("Erreur HTTP: ".concat(response.status));
        case 7:
          _context2.n = 8;
          return response.json();
        case 8:
          result = _context2.v;
          if (result.success) {
            _context2.n = 17;
            break;
          }
          if (!(((_result$data = result.data) === null || _result$data === void 0 ? void 0 : _result$data.code) === "nonce_invalid")) {
            _context2.n = 16;
            break;
          }
          _context2.p = 9;
          // âœ… CORRECTION: Utiliser le nonce frais fourni par le serveur dans la rÃ©ponse d'erreur
          freshNonce = (_result$data2 = result.data) === null || _result$data2 === void 0 ? void 0 : _result$data2.nonce;
          if (freshNonce) {
            _context2.n = 11;
            break;
          }
          _context2.n = 10;
          return ClientNonceManager.refreshNonce(ClientNonceManager.getCurrentNonce() || undefined);
        case 10:
          freshNonce = _context2.v;
          _context2.n = 12;
          break;
        case 11:
          // Utiliser le nonce frais du serveur
          ClientNonceManager.setNonce(freshNonce);
        case 12:
          if (!freshNonce) {
            _context2.n = 14;
            break;
          }
          _context2.n = 13;
          return saveTemplate();
        case 13:
          return _context2.a(2, _context2.v);
        case 14:
          _context2.n = 16;
          break;
        case 15:
          _context2.p = 15;
          _t3 = _context2.v;
        case 16:
          throw new Error(result.data || "Erreur lors de la sauvegarde du template");
        case 17:
          // Sauvegarde rÃ©ussie
          dispatch({
            type: "SAVE_TEMPLATE",
            payload: {
              id: result.data.template_id || result.data.id,
              name: result.data.name
            }
          });
          return _context2.a(2, true);
        case 18:
          _context2.p = 18;
          _t4 = _context2.v;
          debug_debugError("[PDF_BUILDER_FRONTEND] Save failed:", _t4);
          debug_debugError("[useTemplate] SAVE - Error:", _t4);
          throw _t4;
        case 19:
          _context2.p = 19;
          dispatch({
            type: "SET_TEMPLATE_SAVING",
            payload: false
          });
          return _context2.f(19);
        case 20:
          return _context2.a(2);
      }
    }, _callee2, null, [[9, 15], [1, 18, 19, 20]]);
  })), [state.elements, state.template.name, dispatch, canvasWidth, canvasHeight, getTemplateIdFromUrl]);
  var previewTemplate = (0,react.useCallback)(function () {
    var _state$elements;
    console.log('[USE TEMPLATE HOOK] ===== PREVIEW TEMPLATE CALLED =====');
    console.log('[USE TEMPLATE HOOK] previewTemplate function executed at:', new Date().toISOString());
    console.log('[USE TEMPLATE HOOK] Current template state:');
    console.log('[USE TEMPLATE HOOK] - template name:', state.template.name);
    console.log('[USE TEMPLATE HOOK] - template description:', state.template.description);
    console.log('[USE TEMPLATE HOOK] - elements count:', ((_state$elements = state.elements) === null || _state$elements === void 0 ? void 0 : _state$elements.length) || 0);
    console.log('[USE TEMPLATE HOOK] - showPreviewModal before:', state.showPreviewModal);
    console.log('[USE TEMPLATE HOOK] Dispatching SET_SHOW_PREVIEW_MODAL with payload: true');
    dispatch({
      type: "SET_SHOW_PREVIEW_MODAL",
      payload: true
    });
    console.log('[USE TEMPLATE HOOK] SET_SHOW_PREVIEW_MODAL dispatched successfully');
  }, [dispatch]);
  var newTemplate = (0,react.useCallback)(function () {
    dispatch({
      type: "NEW_TEMPLATE"
    });
  }, [dispatch]);
  var setTemplateModified = (0,react.useCallback)(function (modified) {
    dispatch({
      type: "SET_TEMPLATE_MODIFIED",
      payload: modified
    });
  }, [dispatch]);
  var updateTemplateSettings = (0,react.useCallback)(function (settings) {
    dispatch({
      type: "UPDATE_TEMPLATE_SETTINGS",
      payload: settings
    });
  }, [dispatch]);
  return (0,react.useMemo)(function () {
    return {
      templateName: state.template.name,
      templateDescription: state.template.description,
      templateTags: state.template.tags,
      canvasWidth: state.template.canvasWidth,
      canvasHeight: state.template.canvasHeight,
      marginTop: state.template.marginTop,
      marginBottom: state.template.marginBottom,
      showGuides: state.template.showGuides,
      snapToGrid: state.template.snapToGrid,
      isNewTemplate: state.template.isNew,
      isModified: state.template.isModified,
      isSaving: state.template.isSaving,
      isLoading: state.template.isLoading,
      // âœ… NEW: Template is loading
      lastSaved: state.template.lastSaved,
      isEditingExistingTemplate: isEditingExistingTemplate(),
      saveTemplate: saveTemplate,
      previewTemplate: previewTemplate,
      newTemplate: newTemplate,
      setTemplateModified: setTemplateModified,
      updateTemplateSettings: updateTemplateSettings
    };
  }, [state.template.id, state.template.name, state.template.description, state.template.tags, state.template.canvasWidth, state.template.canvasHeight, state.template.marginTop, state.template.marginBottom, state.template.showGuides, state.template.snapToGrid, state.template.isNew, state.template.isModified, state.template.isSaving, state.template.isLoading, state.template.lastSaved, saveTemplate, previewTemplate, newTemplate, setTemplateModified, updateTemplateSettings, getTemplateIdFromUrl]);
}
;// ./src/js/react/constants/canvas.ts
/**
 * Constantes pour les dimensions du PDF Builder
 *
 * IMPORTANT: Le systÃ¨me utilise UNIQUEMENT les PIXELS (PX)
 * Les dimensions sont maintenant dynamiques selon les paramÃ¨tres sauvegardÃ©s
 */

// Fonction pour rÃ©cupÃ©rer les dimensions depuis les paramÃ¨tres WordPress
var getCanvasDimensions = function getCanvasDimensions() {
  var _window$pdfBuilderCan, _window$pdfBuilderCan2;
  // RÃ©cupÃ©rer les dimensions depuis les paramÃ¨tres sauvegardÃ©s
  var width = ((_window$pdfBuilderCan = window.pdfBuilderCanvasSettings) === null || _window$pdfBuilderCan === void 0 ? void 0 : _window$pdfBuilderCan.default_canvas_width) || parseInt(localStorage.getItem('pdf_builder_canvas_width') || '794');
  var height = ((_window$pdfBuilderCan2 = window.pdfBuilderCanvasSettings) === null || _window$pdfBuilderCan2 === void 0 ? void 0 : _window$pdfBuilderCan2.default_canvas_height) || parseInt(localStorage.getItem('pdf_builder_canvas_height') || '1123');
  return {
    width: Math.max(100, Math.min(3000, width)),
    // Limiter entre 100px et 3000px
    height: Math.max(100, Math.min(3000, height))
  };
};

// Dimensions par dÃ©faut pour le rendu canvas (rÃ©cupÃ©rÃ©es dynamiquement)
var DEFAULT_CANVAS_WIDTH = getCanvasDimensions().width;
var DEFAULT_CANVAS_HEIGHT = getCanvasDimensions().height;

// Dimensions A4 en PIXELS (pour rÃ©fÃ©rence uniquement)
var CANVAS_DIMENSIONS = {
  A4_PORTRAIT: {
    width: 794,
    height: 1123,
    name: 'A4 Portrait'
  },
  A4_LANDSCAPE: {
    width: 1123,
    height: 794,
    name: 'A4 Landscape'
  }
};
;// ./src/js/react/utils/responsive.ts
/**
 * Utilitaires CSS pour le responsive design
 * Classes utilitaires pour une gestion simplifiÃ©e du responsive
 */



/**
 * GÃ©nÃ¨re des classes CSS responsive
 */
var responsiveUtils = "\n/* Utilitaires responsive automatiques */\n\n/* Visibilit\xE9 */\n.hidden-xs { display: none !important; }\n.hidden-sm { display: none !important; }\n.hidden-md { display: none !important; }\n.hidden-lg { display: none !important; }\n.hidden-xl { display: none !important; }\n\n.visible-xs { display: block !important; }\n.visible-sm { display: block !important; }\n.visible-md { display: block !important; }\n.visible-lg { display: block !important; }\n.visible-xl { display: block !important; }\n\n/* Media queries pour la visibilit\xE9 */\n@media (min-width: ".concat(BREAKPOINTS.xs, "px) {\n  .hidden-xs { display: inherit !important; }\n  .visible-xs { display: none !important; }\n}\n\n@media (min-width: ").concat(BREAKPOINTS.sm, "px) {\n  .hidden-sm { display: inherit !important; }\n  .visible-sm { display: none !important; }\n}\n\n@media (min-width: ").concat(BREAKPOINTS.md, "px) {\n  .hidden-md { display: inherit !important; }\n  .visible-md { display: none !important; }\n}\n\n@media (min-width: ").concat(BREAKPOINTS.lg, "px) {\n  .hidden-lg { display: inherit !important; }\n  .visible-lg { display: none !important; }\n}\n\n@media (min-width: ").concat(BREAKPOINTS.xl, "px) {\n  .hidden-xl { display: inherit !important; }\n  .visible-xl { display: none !important; }\n}\n\n/* Flex utilities responsive */\n.flex-column-xs { flex-direction: column !important; }\n.flex-column-sm { flex-direction: column !important; }\n.flex-column-md { flex-direction: column !important; }\n.flex-row-xs { flex-direction: row !important; }\n.flex-row-sm { flex-direction: row !important; }\n.flex-row-md { flex-direction: row !important; }\n\n/* Text alignment responsive */\n.text-center-xs { text-align: center !important; }\n.text-center-sm { text-align: center !important; }\n.text-center-md { text-align: center !important; }\n.text-left-xs { text-align: left !important; }\n.text-left-sm { text-align: left !important; }\n.text-left-md { text-align: left !important; }\n.text-right-xs { text-align: right !important; }\n.text-right-sm { text-align: right !important; }\n.text-right-md { text-align: right !important; }\n\n/* Spacing responsive */\n.m-0-xs { margin: 0 !important; }\n.m-0-sm { margin: 0 !important; }\n.m-0-md { margin: 0 !important; }\n.p-0-xs { padding: 0 !important; }\n.p-0-sm { padding: 0 !important; }\n.p-0-md { padding: 0 !important; }\n\n/* Width responsive */\n.w-100-xs { width: 100% !important; }\n.w-100-sm { width: 100% !important; }\n.w-100-md { width: 100% !important; }\n.w-auto-xs { width: auto !important; }\n.w-auto-sm { width: auto !important; }\n.w-auto-md { width: auto !important; }\n\n/* Container responsive */\n.container-fluid-xs { width: 100% !important; padding-left: 15px !important; padding-right: 15px !important; }\n.container-fluid-sm { width: 100% !important; padding-left: 15px !important; padding-right: 15px !important; }\n.container-xs { max-width: 100% !important; margin: 0 auto !important; }\n.container-sm { max-width: 100% !important; margin: 0 auto !important; }\n\n/* Media queries pour les utilitaires */\n@media (min-width: ").concat(BREAKPOINTS.xs, "px) {\n  .flex-column-xs { flex-direction: row !important; }\n  .flex-row-xs { flex-direction: column !important; }\n  .text-center-xs { text-align: inherit !important; }\n  .text-left-xs { text-align: inherit !important; }\n  .text-right-xs { text-align: inherit !important; }\n  .m-0-xs { margin: inherit !important; }\n  .p-0-xs { padding: inherit !important; }\n  .w-100-xs { width: inherit !important; }\n  .w-auto-xs { width: inherit !important; }\n  .container-fluid-xs { width: inherit !important; padding-left: inherit !important; padding-right: inherit !important; }\n  .container-xs { max-width: inherit !important; }\n}\n\n@media (min-width: ").concat(BREAKPOINTS.sm, "px) {\n  .flex-column-sm { flex-direction: row !important; }\n  .flex-row-sm { flex-direction: column !important; }\n  .text-center-sm { text-align: inherit !important; }\n  .text-left-sm { text-align: inherit !important; }\n  .text-right-sm { text-align: inherit !important; }\n  .m-0-sm { margin: inherit !important; }\n  .p-0-sm { padding: inherit !important; }\n  .w-100-sm { width: inherit !important; }\n  .w-auto-sm { width: inherit !important; }\n  .container-fluid-sm { width: inherit !important; padding-left: inherit !important; padding-right: inherit !important; }\n  .container-sm { max-width: inherit !important; }\n}\n\n@media (min-width: ").concat(BREAKPOINTS.md, "px) {\n  .flex-column-md { flex-direction: row !important; }\n  .flex-row-md { flex-direction: column !important; }\n  .text-center-md { text-align: inherit !important; }\n  .text-left-md { text-align: inherit !important; }\n  .text-right-md { text-align: inherit !important; }\n  .m-0-md { margin: inherit !important; }\n  .p-0-md { padding: inherit !important; }\n  .w-100-md { width: inherit !important; }\n  .w-auto-md { width: inherit !important; }\n}\n");

/**
 * Injecte les utilitaires CSS responsive dans le DOM
 */
function injectResponsiveUtils() {
  if (typeof document === 'undefined') return;
  var existingStyle = document.getElementById('pdf-builder-responsive-utils');
  if (existingStyle) return;
  var style = document.createElement('style');
  style.id = 'pdf-builder-responsive-utils';
  style.textContent = responsiveUtils;
  document.head.appendChild(style);
}
;// ./src/js/react/components/PDFBuilderContent.tsx
function PDFBuilderContent_regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = "function" == typeof Symbol ? Symbol : {}, n = r.iterator || "@@iterator", o = r.toStringTag || "@@toStringTag"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return PDFBuilderContent_regeneratorDefine2(u, "_invoke", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError("Generator is already running"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = "next"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError("iterator result is not an object"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i["return"]) && t.call(i), c < 2 && (u = TypeError("The iterator does not provide a '" + o + "' method"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (PDFBuilderContent_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, PDFBuilderContent_regeneratorDefine2(e, o, "GeneratorFunction")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, PDFBuilderContent_regeneratorDefine2(u, "constructor", GeneratorFunctionPrototype), PDFBuilderContent_regeneratorDefine2(GeneratorFunctionPrototype, "constructor", GeneratorFunction), GeneratorFunction.displayName = "GeneratorFunction", PDFBuilderContent_regeneratorDefine2(GeneratorFunctionPrototype, o, "GeneratorFunction"), PDFBuilderContent_regeneratorDefine2(u), PDFBuilderContent_regeneratorDefine2(u, o, "Generator"), PDFBuilderContent_regeneratorDefine2(u, n, function () { return this; }), PDFBuilderContent_regeneratorDefine2(u, "toString", function () { return "[object Generator]"; }), (PDFBuilderContent_regenerator = function _regenerator() { return { w: i, m: f }; })(); }
function PDFBuilderContent_regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, "", {}); } catch (e) { i = 0; } PDFBuilderContent_regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { PDFBuilderContent_regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o("next", 0), o("throw", 1), o("return", 2)); }, PDFBuilderContent_regeneratorDefine2(e, r, n, t); }
function PDFBuilderContent_asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function PDFBuilderContent_asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { PDFBuilderContent_asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { PDFBuilderContent_asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
function PDFBuilderContent_slicedToArray(r, e) { return PDFBuilderContent_arrayWithHoles(r) || PDFBuilderContent_iterableToArrayLimit(r, e) || PDFBuilderContent_unsupportedIterableToArray(r, e) || PDFBuilderContent_nonIterableRest(); }
function PDFBuilderContent_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function PDFBuilderContent_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return PDFBuilderContent_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? PDFBuilderContent_arrayLikeToArray(r, a) : void 0; } }
function PDFBuilderContent_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function PDFBuilderContent_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function PDFBuilderContent_arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function PDFBuilderContent_typeof(o) { "@babel/helpers - typeof"; return PDFBuilderContent_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, PDFBuilderContent_typeof(o); }













// DÃ©claration des types pour les fonctions de notification globales

// âœ… Add spin animation
var spinStyles = "\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n";

// Inject CSS
if (typeof document !== "undefined") {
  var style = document.createElement("style");
  style.textContent = spinStyles;
  document.head.appendChild(style);
}
var PDFBuilderContent = /*#__PURE__*/(0,react.memo)(function PDFBuilderContent(_ref) {
  var _window$pdfBuilderDat;
  var _ref$width = _ref.width,
    width = _ref$width === void 0 ? DEFAULT_CANVAS_WIDTH : _ref$width,
    _ref$height = _ref.height,
    height = _ref$height === void 0 ? DEFAULT_CANVAS_HEIGHT : _ref$height,
    className = _ref.className;
  console.log('[PDF BUILDER CONTENT] ===== COMPONENT INITIALIZED =====');
  console.log('[PDF BUILDER CONTENT] Props received:', {
    width: width,
    height: height,
    className: className
  });
  console.log('[PDF BUILDER CONTENT] Timestamp:', Date.now());
  console.log('[PDF BUILDER CONTENT] Window object available:', typeof window === "undefined" ? "undefined" : PDFBuilderContent_typeof(window));
  console.log('[PDF BUILDER CONTENT] Document object available:', typeof document === "undefined" ? "undefined" : PDFBuilderContent_typeof(document));
  debugLog("ðŸ—ï¸ PDFBuilderContent: Component initialized with props:", {
    width: width,
    height: height,
    className: className
  });
  var _useState = (0,react.useState)(false),
    _useState2 = PDFBuilderContent_slicedToArray(_useState, 2),
    isHeaderFixed = _useState2[0],
    setIsHeaderFixed = _useState2[1];
  var _useState3 = (0,react.useState)(false),
    _useState4 = PDFBuilderContent_slicedToArray(_useState3, 2),
    isPropertiesPanelOpen = _useState4[0],
    setIsPropertiesPanelOpen = _useState4[1];
  var _useState5 = (0,react.useState)(false),
    _useState6 = PDFBuilderContent_slicedToArray(_useState5, 2),
    manualSaveSuccess = _useState6[0],
    setManualSaveSuccess = _useState6[1];

  // VÃ©rification de licence pour les fonctionnalitÃ©s premium
  var isPremium = ((_window$pdfBuilderDat = window.pdfBuilderData) === null || _window$pdfBuilderDat === void 0 || (_window$pdfBuilderDat = _window$pdfBuilderDat.license) === null || _window$pdfBuilderDat === void 0 ? void 0 : _window$pdfBuilderDat.isPremium) || false;

  // DEBUG: Log license data reception
  // console.log('ðŸ”‘ [PDFBuilderContent DEBUG] License data:', {
  //   windowPdfBuilderData: window.pdfBuilderData,
  //   license: window.pdfBuilderData?.license,
  //   isPremium: isPremium
  // });

  debugLog("ðŸ“± PDFBuilderContent: Initial state set:", {
    isHeaderFixed: isHeaderFixed,
    isPropertiesPanelOpen: isPropertiesPanelOpen,
    manualSaveSuccess: manualSaveSuccess
  });

  // Hooks responsives
  var isMobile = useResponsive_useIsMobile();
  var isTablet = useResponsive_useIsTablet();
  debugLog("ðŸ“± PDFBuilderContent: Responsive hooks:", {
    isMobile: isMobile,
    isTablet: isTablet
  });
  var _useTemplate = useTemplate(),
    templateName = _useTemplate.templateName,
    templateDescription = _useTemplate.templateDescription,
    canvasWidth = _useTemplate.canvasWidth,
    canvasHeight = _useTemplate.canvasHeight,
    marginTop = _useTemplate.marginTop,
    marginBottom = _useTemplate.marginBottom,
    showGuides = _useTemplate.showGuides,
    snapToGrid = _useTemplate.snapToGrid,
    isNewTemplate = _useTemplate.isNewTemplate,
    isModified = _useTemplate.isModified,
    isSaving = _useTemplate.isSaving,
    isLoading = _useTemplate.isLoading,
    isEditingExistingTemplate = _useTemplate.isEditingExistingTemplate,
    saveTemplate = _useTemplate.saveTemplate,
    previewTemplate = _useTemplate.previewTemplate,
    newTemplate = _useTemplate.newTemplate,
    updateTemplateSettings = _useTemplate.updateTemplateSettings;
  debugLog("ðŸ“‹ PDFBuilderContent: useTemplate hook values:", {
    templateName: templateName,
    templateDescription: templateDescription,
    canvasWidth: canvasWidth,
    canvasHeight: canvasHeight,
    marginTop: marginTop,
    marginBottom: marginBottom,
    showGuides: showGuides,
    snapToGrid: snapToGrid,
    isNewTemplate: isNewTemplate,
    isModified: isModified,
    isSaving: isSaving,
    isLoading: isLoading,
    isEditingExistingTemplate: isEditingExistingTemplate
  });

  // Hook pour les paramÃ¨tres du canvas
  var canvasSettings = CanvasSettingsContext_useCanvasSettings();
  debugLog("ðŸŽ¨ PDFBuilderContent: Canvas settings:", canvasSettings);

  // VÃ©rifier les erreurs de chargement des paramÃ¨tres du canvas
  (0,react.useEffect)(function () {
    if (canvasSettings.error) {
      debug_debugError("âŒ PDFBuilderContent: Canvas settings error:", canvasSettings.error);

      // Afficher une notification d'erreur
      if (typeof window !== "undefined" && window.showErrorNotification) {
        debugLog("ðŸ”” PDFBuilderContent: Showing canvas settings error notification");
        window.showErrorNotification("Erreur lors du chargement des param\xE8tres: ".concat(canvasSettings.error));
      }
    }
  }, [canvasSettings.error]);

  // Injection des utilitaires responsives
  (0,react.useEffect)(function () {
    debugLog("ðŸ”§ PDFBuilderContent: Injecting responsive utils");
    injectResponsiveUtils();
    debugLog("âœ… PDFBuilderContent: Responsive utils injected");
  }, []);

  // Effet pour gÃ©rer le scroll et ajuster le padding
  (0,react.useEffect)(function () {
    debugLog("ðŸ“œ PDFBuilderContent: Setting up scroll handler");
    var handleScroll = function handleScroll() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      var newIsHeaderFixed = scrollTop > 100;
      debugLog("ðŸ“œ PDFBuilderContent: Scroll detected, scrollTop:", scrollTop, "isHeaderFixed:", newIsHeaderFixed);
      setIsHeaderFixed(newIsHeaderFixed);
    };
    window.addEventListener("scroll", handleScroll, {
      passive: true
    });
    debugLog("âœ… PDFBuilderContent: Scroll handler added");
    return function () {
      debugLog("ðŸ§¹ PDFBuilderContent: Cleaning up scroll handler");
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);

  // Wrapper pour sauvegarder
  var saveTemplateWithAutoSave = (0,react.useCallback)(/*#__PURE__*/PDFBuilderContent_asyncToGenerator(/*#__PURE__*/PDFBuilderContent_regenerator().m(function _callee() {
    var _t;
    return PDFBuilderContent_regenerator().w(function (_context) {
      while (1) switch (_context.p = _context.n) {
        case 0:
          debugLog("ðŸ’¾ PDFBuilderContent: Manual save initiated");
          _context.p = 1;
          // Effectuer la sauvegarde manuelle
          debugLog("ðŸ”„ PDFBuilderContent: Calling saveTemplate...");
          _context.n = 2;
          return saveTemplate();
        case 2:
          debugLog("âœ… PDFBuilderContent: Manual save successful");
          debugLog("[PDF_BUILDER] Manual save successful");

          // Afficher une notification de succÃ¨s
          if (typeof window !== "undefined" && window.showSuccessNotification) {
            debugLog("ðŸ”” PDFBuilderContent: Showing success notification");
            window.showSuccessNotification("Template sauvegardÃ© avec succÃ¨s !");
          }
          _context.n = 4;
          break;
        case 3:
          _context.p = 3;
          _t = _context.v;
          debug_debugError("âŒ PDFBuilderContent: Manual save failed:", _t);
          debug_debugError("[PDF_BUILDER] Manual save failed:", _t);

          // Afficher une notification d'erreur
          if (typeof window !== "undefined" && window.showErrorNotification) {
            debugLog("ðŸ”” PDFBuilderContent: Showing error notification");
            window.showErrorNotification("Erreur lors de la sauvegarde du template");
          }
          throw _t;
        case 4:
          return _context.a(2);
      }
    }, _callee, null, [[1, 3]]);
  })), [saveTemplate]);
  return /*#__PURE__*/(0,jsx_runtime.jsx)(jsx_runtime.Fragment, {
    children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      className: "pdf-builder ".concat(className || ""),
      style: {
        display: "flex",
        flexDirection: "column",
        width: "100%",
        gap: "0px",
        padding: "0px",
        backgroundColor: "#ffffff",
        border: "none",
        borderRadius: "0px",
        paddingTop: isHeaderFixed ? "132px" : "0px",
        transition: "padding 0.3s ease"
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)(Header, {
        templateName: templateName || "",
        templateDescription: templateDescription || "",
        canvasWidth: canvasWidth || 794,
        canvasHeight: canvasHeight || 1123,
        showGuides: showGuides || true,
        snapToGrid: snapToGrid || false,
        isNewTemplate: isNewTemplate,
        isModified: isModified,
        isSaving: isSaving,
        isLoading: isLoading,
        isEditingExistingTemplate: isEditingExistingTemplate,
        onSave: saveTemplateWithAutoSave,
        onPreview: previewTemplate,
        onNewTemplate: newTemplate,
        onUpdateTemplateSettings: updateTemplateSettings
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
        style: {
          flexShrink: 0,
          padding: "12px 12px 0 12px"
        },
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(Toolbar, {})
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
        style: {
          display: "flex",
          flex: 1,
          gap: "0",
          padding: "12px"
        },
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)(ElementLibrary, {}), /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
          style: {
            flex: 1,
            display: "flex",
            flexDirection: "column",
            position: "relative"
          },
          children: [/*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
            style: {
              flex: 1,
              display: "flex",
              justifyContent: "center",
              alignItems: "center",
              backgroundColor: !isPremium ? DEFAULT_SETTINGS.containerBackgroundColor // Fond par dÃ©faut en mode gratuit
              : canvasSettings.containerBackgroundColor || DEFAULT_SETTINGS.containerBackgroundColor,
              border: "1px solid #e0e0e0",
              borderRadius: "4px",
              overflow: "auto",
              position: "relative",
              paddingTop: "20px",
              paddingBottom: "20px"
            },
            children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              style: {
                position: "absolute",
                top: "8px",
                right: "8px",
                backgroundColor: "rgba(0, 122, 204, 0.9)",
                color: "white",
                padding: "4px 8px",
                borderRadius: "4px",
                fontSize: "12px",
                fontWeight: "bold",
                zIndex: 10
              },
              children: function (_pdfBuilderCanvasSett, _pdfBuilderCanvasSett2, _pdfBuilderCanvasSett3) {
                var format = ((_pdfBuilderCanvasSett = window.pdfBuilderCanvasSettings) === null || _pdfBuilderCanvasSett === void 0 ? void 0 : _pdfBuilderCanvasSett.default_canvas_format) || "A4";
                var dpi = ((_pdfBuilderCanvasSett2 = window.pdfBuilderCanvasSettings) === null || _pdfBuilderCanvasSett2 === void 0 ? void 0 : _pdfBuilderCanvasSett2.default_canvas_dpi) || 96;
                var orientation = ((_pdfBuilderCanvasSett3 = window.pdfBuilderCanvasSettings) === null || _pdfBuilderCanvasSett3 === void 0 ? void 0 : _pdfBuilderCanvasSett3.default_canvas_orientation) || "portrait";
                var paperFormats = window.pdfBuilderPaperFormats || {
                  A4: {
                    width: 210,
                    height: 297
                  },
                  A3: {
                    width: 297,
                    height: 420
                  },
                  A5: {
                    width: 148,
                    height: 210
                  },
                  Letter: {
                    width: 215.9,
                    height: 279.4
                  },
                  Legal: {
                    width: 215.9,
                    height: 355.6
                  },
                  Tabloid: {
                    width: 279.4,
                    height: 431.8
                  }
                };

                // RÃ©cupÃ©rer les dimensions en mm
                var dimsMM = paperFormats[format] || paperFormats["A4"];

                // Calculer les dimensions en pixels avec le DPI actuel
                var pixelsPerMM = dpi / 25.4;
                var widthPx = Math.round(dimsMM.width * pixelsPerMM);
                var heightPx = Math.round(dimsMM.height * pixelsPerMM);

                // Inverser si orientation paysage
                if (orientation === "landscape") {
                  var _ref3 = [heightPx, widthPx];
                  widthPx = _ref3[0];
                  heightPx = _ref3[1];
                }
                return "".concat(format, ": ").concat(widthPx, "\xD7").concat(heightPx, "px (").concat(dpi, " DPI)");
              }()
            }), isLoading && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
              style: {
                position: "absolute",
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                backgroundColor: "rgba(255, 255, 255, 0.7)",
                display: "flex",
                justifyContent: "center",
                alignItems: "center",
                zIndex: 100,
                borderRadius: "4px"
              },
              children: /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
                style: {
                  textAlign: "center"
                },
                children: [/*#__PURE__*/(0,jsx_runtime.jsx)("div", {
                  style: {
                    width: "40px",
                    height: "40px",
                    border: "4px solid #e0e0e0",
                    borderTop: "4px solid #007acc",
                    borderRadius: "50%",
                    animation: "spin 1s linear infinite",
                    margin: "0 auto 12px"
                  }
                }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
                  style: {
                    margin: 0,
                    color: "#666",
                    fontSize: "14px"
                  },
                  children: "Chargement du template..."
                })]
              })
            }), !isLoading && /*#__PURE__*/(0,jsx_runtime.jsxs)(jsx_runtime.Fragment, {
              children: [debugLog("ðŸŽ¨ PDFBuilderContent: Rendering Canvas component", {
                canvasWidth: canvasWidth,
                canvasHeight: canvasHeight
              }), /*#__PURE__*/(0,jsx_runtime.jsx)(Canvas, {
                width: canvasWidth || width,
                height: canvasHeight || height
              })]
            })]
          }), /*#__PURE__*/(0,jsx_runtime.jsx)("button", {
            onClick: function onClick() {
              debugLog("ðŸ”˜ PDFBuilderContent: Properties panel toggle clicked, current state:", isPropertiesPanelOpen);
              setIsPropertiesPanelOpen(!isPropertiesPanelOpen);
              debugLog("ðŸ”„ PDFBuilderContent: Properties panel state changed to:", !isPropertiesPanelOpen);
            },
            style: {
              position: "absolute",
              top: "50%",
              right: isPropertiesPanelOpen ? "-12px" : "0px",
              transform: "translateY(-50%)",
              zIndex: 20,
              padding: "8px 6px",
              backgroundColor: "#007acc",
              color: "white",
              border: "none",
              borderRadius: "4px 0 0 4px",
              cursor: "pointer",
              fontSize: "14px",
              fontWeight: "bold",
              boxShadow: "0 2px 4px rgba(0,0,0,0.2)",
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              width: "24px",
              height: "60px",
              writingMode: "vertical-rl",
              textOrientation: "mixed"
            },
            title: isPropertiesPanelOpen ? "Fermer le panneau de propriÃ©tÃ©s" : "Ouvrir le panneau de propriÃ©tÃ©s",
            children: isPropertiesPanelOpen ? "â–·" : "â—"
          })]
        }), isPropertiesPanelOpen && /*#__PURE__*/(0,jsx_runtime.jsx)("div", {
          style: {
            flexShrink: 0,
            width: "430px",
            position: "sticky",
            top: "110px",
            height: "fit-content",
            maxHeight: "calc(100vh - 32px)"
          },
          children: /*#__PURE__*/(0,jsx_runtime.jsx)(PropertiesPanel, {})
        })]
      })]
    })
  });
});
;// ./src/js/react/PDFBuilder.tsx
function PDFBuilder_slicedToArray(r, e) { return PDFBuilder_arrayWithHoles(r) || PDFBuilder_iterableToArrayLimit(r, e) || PDFBuilder_unsupportedIterableToArray(r, e) || PDFBuilder_nonIterableRest(); }
function PDFBuilder_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function PDFBuilder_unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return PDFBuilder_arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? PDFBuilder_arrayLikeToArray(r, a) : void 0; } }
function PDFBuilder_arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function PDFBuilder_iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function PDFBuilder_arrayWithHoles(r) { if (Array.isArray(r)) return r; }
function PDFBuilder_typeof(o) { "@babel/helpers - typeof"; return PDFBuilder_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, PDFBuilder_typeof(o); }







debugLog('ðŸ”§ [PDFBuilder.tsx] Import successful. React:', PDFBuilder_typeof(react), 'useState:', PDFBuilder_typeof(react.useState), 'useEffect:', PDFBuilder_typeof(react.useEffect));
debugLog('ðŸ”§ [PDFBuilder.tsx] window.pdfBuilderData at import time:', window.pdfBuilderData);
debugLog('ðŸ”§ [PDFBuilder.tsx] window keys at import time:', Object.keys(window).filter(function (key) {
  return key.includes('pdfBuilder');
}));

// DIRECT CONSOLE LOGS FOR DEBUGGING
// console.log('ðŸ”¥ [PDFBuilder.tsx] COMPONENT FILE LOADED - DIRECT CONSOLE LOG');
// console.log('ðŸ”¥ [PDFBuilder.tsx] window.pdfBuilderData:', window.pdfBuilderData);
// console.log('ðŸ”¥ [PDFBuilder.tsx] React available:', typeof React);
// console.log('ðŸ”¥ [PDFBuilder.tsx] useState available:', typeof useState);

function PDFBuilder(_ref) {
  var _ref$width = _ref.width,
    initialWidth = _ref$width === void 0 ? DEFAULT_CANVAS_WIDTH : _ref$width,
    _ref$height = _ref.height,
    initialHeight = _ref$height === void 0 ? DEFAULT_CANVAS_HEIGHT : _ref$height,
    className = _ref.className;
  // console.log('ðŸ”¥ [PDFBuilder] COMPONENT FUNCTION CALLED with props:', { initialWidth, initialHeight, className });
  // debugLog('ðŸ”§ PDFBuilder: Component initialized with props:', { initialWidth, initialHeight, className });
  // debugLog('ðŸ”§ PDFBuilder: window.pdfBuilderData at component init:', window.pdfBuilderData);
  // debugLog('ðŸ”§ PDFBuilder: window.pdfBuilderData?.ajaxUrl:', window.pdfBuilderData?.ajaxUrl);
  // debugLog('ðŸ”§ PDFBuilder: window.pdfBuilderData?.nonce:', window.pdfBuilderData?.nonce);

  var _useState = (0,react.useState)({
      width: initialWidth,
      height: initialHeight
    }),
    _useState2 = PDFBuilder_slicedToArray(_useState, 2),
    dimensions = _useState2[0],
    setDimensions = _useState2[1];
  debugLog('ðŸ“ PDFBuilder: Initial dimensions set:', dimensions);

  // Ã‰couter les changements de dimensions depuis l'API globale
  (0,react.useEffect)(function () {
    debugLog('ðŸŽ§ PDFBuilder: Setting up dimension change listener');
    var handleUpdateDimensions = function handleUpdateDimensions(event) {
      debugLog('ðŸ“¡ PDFBuilder: Received dimension update event:', event.detail);
      var _event$detail = event.detail,
        width = _event$detail.width,
        height = _event$detail.height;
      debugLog('ðŸ”„ PDFBuilder: Updating dimensions to:', {
        width: width,
        height: height
      });
      setDimensions({
        width: width,
        height: height
      });
    };
    document.addEventListener('pdfBuilderUpdateCanvasDimensions', handleUpdateDimensions, {
      passive: true
    });
    debugLog('âœ… PDFBuilder: Dimension change listener added');
    return function () {
      debugLog('ðŸ§¹ PDFBuilder: Cleaning up dimension change listener');
      document.removeEventListener('pdfBuilderUpdateCanvasDimensions', handleUpdateDimensions);
    };
  }, []);
  debugLog('ðŸŽ¨ PDFBuilder: Rendering with dimensions:', dimensions);
  try {
    return /*#__PURE__*/(0,jsx_runtime.jsx)(CanvasSettingsProvider, {
      children: /*#__PURE__*/(0,jsx_runtime.jsx)(BuilderProvider, {
        children: /*#__PURE__*/(0,jsx_runtime.jsx)(PDFBuilderContent, {
          width: dimensions.width,
          height: dimensions.height,
          className: className
        })
      })
    });
  } catch (renderError) {
    debugLog('âŒ PDFBuilder: Render error:', renderError);

    // Return error UI
    return /*#__PURE__*/(0,jsx_runtime.jsxs)("div", {
      style: {
        padding: '20px',
        background: '#ffebee',
        border: '1px solid #f44336',
        borderRadius: '4px',
        color: '#c62828'
      },
      children: [/*#__PURE__*/(0,jsx_runtime.jsx)("h3", {
        children: "Erreur de rendu React"
      }), /*#__PURE__*/(0,jsx_runtime.jsx)("p", {
        children: "Une erreur s'est produite lors du rendu du composant PDFBuilder."
      }), /*#__PURE__*/(0,jsx_runtime.jsxs)("details", {
        children: [/*#__PURE__*/(0,jsx_runtime.jsx)("summary", {
          children: "D\xE9tails de l'erreur"
        }), /*#__PURE__*/(0,jsx_runtime.jsx)("pre", {
          children: renderError.toString()
        })]
      })]
    });
  }
}

// Export des composants individuels pour une utilisation modulaire

;// ./src/js/react/utils/logger.ts
/**
 * Logger utility - Disabled for production
 */

var createLogger = function createLogger(module) {
  return {
    debug: function debug() {},
    info: function info() {},
    warn: function warn() {},
    error: function error() {}
  };
};
/* harmony default export */ const logger = (createLogger);
;// ./src/js/react/utils/dom.ts
/**
 * DOM utilities for React integration with WordPress
 */

var getDOMContainer = function getDOMContainer(containerId) {
  var container = document.getElementById(containerId);
  if (!container) {
    return null;
  }
  return container;
};
var waitForDOM = function waitForDOM() {
  return new Promise(function (resolve) {
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function () {
        return resolve(document);
      }, {
        once: true
      });
    } else {
      resolve(document);
    }
  });
};
var createErrorElement = function createErrorElement(message) {
  var div = document.createElement('div');
  div.style.cssText = "\n    padding: 20px;\n    margin: 20px;\n    background: #fee;\n    border: 1px solid #f00;\n    border-radius: 4px;\n    color: #c00;\n    font-family: monospace;\n  ";
  div.textContent = "Error: ".concat(message);
  return div;
};
/* harmony default export */ const dom = ({
  getDOMContainer: getDOMContainer,
  waitForDOM: waitForDOM,
  createErrorElement: createErrorElement
});
;// ./src/js/react/index.tsx
function react_typeof(o) { "@babel/helpers - typeof"; return react_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, react_typeof(o); }
/**
 * Main entry point for PDF Builder React bundle V2
 *
 * This is the REAL PDF Builder with:
 * - Header toolbar with all controls
 * - Sidebar with element library
 * - Canvas editor with full functionality
 * - Properties panel for element editing
 */

console.log('[REACT INDEX] ===== FILE LOADED =====');
console.log('[REACT INDEX] React bundle loaded and executing at:', new Date().toISOString());
console.log('[REACT INDEX] Window object available:', typeof window === "undefined" ? "undefined" : react_typeof(window));
console.log('[REACT INDEX] Document object available:', typeof document === "undefined" ? "undefined" : react_typeof(document));
console.log('[REACT INDEX] React available:', react_typeof(react));
console.log('[REACT INDEX] createRoot available:', react_typeof(client/* createRoot */.H));







var react_logger = logger('PDFBuilderReact');

// ============================================================================
// MODULE INITIALIZATION
// ============================================================================

react_logger.info('ðŸš€ PDF Builder V2 module execution started');
// console.log('[PDF Builder React] Module loaded, React available:', typeof React);
// console.log('[PDF Builder React] createRoot available:', typeof createRoot);

var reactRoot = null;

// ============================================================================
// MAIN INITIALIZATION FUNCTION
// ============================================================================

/**
 * Initialize the PDF Builder React application
 * @param containerId - HTML element id where React will mount
 * @returns true if initialization succeeded, false otherwise
 */
function initPDFBuilderReact() {
  var containerId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'pdf-builder-react-root';
  console.log('[REACT INDEX] ===== initPDFBuilderReact CALLED =====');
  console.log('[REACT INDEX] initPDFBuilderReact called with containerId:', containerId);
  console.log('[REACT INDEX] Document readyState:', document.readyState);
  console.log('[REACT INDEX] Container element exists:', !!document.getElementById(containerId));
  react_logger.info("Initializing PDF Builder in container: ".concat(containerId));
  // console.log('[PDF Builder React] initPDFBuilderReact called with containerId:', containerId);

  try {
    // Get container
    var container = getDOMContainer(containerId);
    // console.log('[PDF Builder React] Container found:', !!container, 'Element:', container);
    if (!container) {
      react_logger.error("Container not found: ".concat(containerId));
      // console.error('[PDF Builder React] Container not found:', containerId);
      return false;
    }

    // Create React root
    reactRoot = (0,client/* createRoot */.H)(container);
    react_logger.debug('React root created');
    // console.log('[PDF Builder React] React root created successfully');

    // Render the REAL PDF Builder component
    // console.log('[PDF Builder React] About to render PDFBuilder component');
    reactRoot.render(/*#__PURE__*/(0,jsx_runtime.jsx)(PDFBuilder, {
      width: 1200,
      height: 800,
      className: "pdf-builder-main"
    }));
    react_logger.info('âœ… PDF Builder rendered successfully');
    // console.log('[PDF Builder React] PDFBuilder component rendered successfully');

    return true;
  } catch (error) {
    react_logger.error('Initialization failed:', error);

    // Try to render error message
    try {
      var _container = getDOMContainer(containerId);
      if (_container) {
        var err = error instanceof Error ? error : new Error(String(error));
        _container.innerHTML = "\n          <div style=\"padding: 20px; background: #fee; border: 1px solid #f00; border-radius: 4px; color: #c00;\">\n            <h2>\u274C Error Loading PDF Builder</h2>\n            <p>".concat(err.message, "</p>\n          </div>\n        ");
      }
    } catch (renderError) {
      react_logger.error('Failed to render error message:', renderError);
    }
    return false;
  }
}

// ============================================================================
// WINDOW EXPORTS
// ============================================================================

var api = {
  initPDFBuilderReact: initPDFBuilderReact,
  version: '2.0.0',
  logger: react_logger,
  PDFBuilder: PDFBuilder
};

// Export to window
if (typeof window !== 'undefined') {
  window.pdfBuilderReact = api;
  window.initPDFBuilderReact = initPDFBuilderReact;
  react_logger.info('âœ… PDF Builder API exported to window');
}

// Default export for testing/bundling

/* harmony default export */ const js_react = (api);

/***/ },

/***/ 982
(module, __unused_webpack_exports, __webpack_require__) {



if (true) {
  module.exports = __webpack_require__(463);
} else // removed by dead control flow
{}


/***/ }

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, [411], () => (__webpack_exec__(560)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ var __webpack_export_target__ = window;
/******/ for(var __webpack_i__ in __webpack_exports__) __webpack_export_target__[__webpack_i__] = __webpack_exports__[__webpack_i__];
/******/ if(__webpack_exports__.__esModule) Object.defineProperty(__webpack_export_target__, "__esModule", { value: true });
/******/ }
]);