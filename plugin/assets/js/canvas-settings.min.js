"use strict";(Object("undefined"!=typeof window?window:global).webpackChunkwp_pdf_builder_pro_v2=Object("undefined"!=typeof window?window:global).webpackChunkwp_pdf_builder_pro_v2||[]).push([[835],{932(a,e,n){var o,t;n.r(e),o=jQuery,t={init:function(){o(document).on("click",".canvas-configure-btn",function(a){a.preventDefault();var e=o(this).closest(".canvas-card").data("category");e&&t.openModal(e)}),o(document).on("click",".canvas-modal-close, .canvas-modal-cancel",function(a){a.preventDefault();var e=o(this).closest(".canvas-modal-overlay");t.closeModal(e)}),o(document).on("click",".canvas-modal-overlay",function(a){a.target===this&&t.closeModal(o(this))}),o(document).on("click",".canvas-modal-apply",function(a){a.preventDefault();var e=o(this),n=e.closest(".canvas-modal-overlay"),d=e.data("category")||n.data("category");d&&t.saveModal(n,d)})},openModal:function(a){var e=o("#canvas-"+a+"-modal-overlay");0!==e.length&&(o(".canvas-modal-overlay").hide(),e.show(),o("body").css("overflow","hidden"))},closeModal:function(a){a.hide(),o("body").css("overflow","")},saveModal:function(a,e){var n=a.find(".canvas-modal-apply"),d=n.text();n.prop("disabled",!0).text("â³ Sauvegarde...");var c=new FormData;c.append("action","pdf_builder_save_canvas_modal"),c.append("category",e),c.append("nonce",window.pdfBuilderCanvasSettings?window.pdfBuilderCanvasSettings.nonce:""),a.find("input, select, textarea").each(function(){var a=o(this),e=a.attr("name"),n=a.attr("type");if(e&&!a.prop("disabled")){var t;if("checkbox"===n)t=a.prop("checked")?"1":"0";else if("radio"===n){if(!a.prop("checked"))return;t=a.val()}else t=a.val();null!=t&&c.append(e,t)}}),o.ajax({url:window.pdfBuilderCanvasSettings?window.pdfBuilderCanvasSettings.ajax_url:ajaxurl,type:"POST",data:c,processData:!1,contentType:!1,success:function(e){e.success?(t.closeModal(a),setTimeout(function(){window.location.reload()},1e3)):alert("Erreur lors de la sauvegarde: "+(e.data?e.data.message:"Erreur inconnue"))},error:function(a,e,n){alert("Erreur AJAX: "+n)},complete:function(){n.prop("disabled",!1).text(d)}})}},o(document).ready(function(){-1!==window.location.href.indexOf("page=pdf-builder-settings")&&-1!==window.location.href.indexOf("tab=contenu")&&setTimeout(function(){t.init()},500)}),window.CanvasModalManager=t}},a=>{var e=a(a.s=932),n=window;for(var o in e)n[o]=e[o];e.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})}]);