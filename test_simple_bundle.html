<!DOCTYPE html>
<html>
<head>
    <title>Test Bundle Simplifi√©</title>
    <style>
        body { font-family: Arial; margin: 20px; background: #f0f0f0; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        button { padding: 10px 20px; margin: 5px; background: #007cba; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #005a87; }
    </style>
</head>
<body>
    <h1>üß™ Test Bundle Simplifi√©</h1>

    <div class="test-section">
        <h2>Test 1: Bundle Simplifi√©</h2>
        <div id="test-1"></div>
    </div>

    <div class="test-section">
        <h2>Test 2: PreviewModal</h2>
        <div id="test-2"></div>
        <button onclick="testModal('canvas')">Tester Mode Canvas</button>
        <button onclick="testModal('metabox')">Tester Mode Metabox</button>
    </div>

    <!-- Charger React depuis CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Charger notre bundle simplifi√© -->
    <script src="assets/js/dist/simple-bundle.js"></script>

    <script>
        console.log('=== PAGE CHARG√âE ===');

        // Test 1: V√©rifier que le bundle simplifi√© fonctionne
        setTimeout(function() {
            console.log('Test 1: V√©rification globals...');
            console.log('React:', typeof window.React);
            console.log('ReactDOM:', typeof window.ReactDOM);
            console.log('PDFBuilderPreview:', typeof window.PDFBuilderPreview);

            if (window.React && window.ReactDOM && window.PDFBuilderPreview) {
                const element = React.createElement('div', { className: 'success' },
                    '‚úÖ Bundle simplifi√© charg√© avec succ√®s!'
                );
                ReactDOM.render(element, document.getElementById('test-1'));
                console.log('Test 1: ‚úÖ R√âUSSI');
            } else {
                document.getElementById('test-1').innerHTML = '<span class="error">‚ùå Bundle simplifi√© d√©faillant</span>';
                console.log('Test 1: ‚ùå √âCHEC');
            }
        }, 500);

        // Test 2: Tester le PreviewModal
        function testModal(mode) {
            console.log('Test 2: Test modal mode', mode);

            if (!window.PDFBuilderPreview || !window.PDFBuilderPreview.PreviewModal) {
                document.getElementById('test-2').innerHTML = '<span class="error">‚ùå PreviewModal non disponible</span>';
                return;
            }

            try {
                const modalElement = React.createElement(window.PDFBuilderPreview.PreviewModal, {
                    mode: mode,
                    isOpen: true
                });
                ReactDOM.render(modalElement, document.getElementById('test-2'));
                console.log('Test 2: ‚úÖ Modal rendu pour mode', mode);
            } catch (error) {
                document.getElementById('test-2').innerHTML = '<span class="error">‚ùå Erreur modal: ' + error.message + '</span>';
                console.error('Test 2: Erreur', error);
            }
        }

        console.log('=== TESTS INITIALIS√âS ===');
    </script>
</body>
</html>