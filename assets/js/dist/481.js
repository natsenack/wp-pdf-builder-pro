/*! For license information please see 481.js.LICENSE.txt */
"use strict";(self.webpackChunkwp_pdf_builder_pro=self.webpackChunkwp_pdf_builder_pro||[]).push([[481],{2544:function(e,t,n){n.r(t),n.d(t,{ImageRenderer:function(){return i}});var r=n(6540);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=function(e){var t=e.element,n=e.previewData,o=(e.mode,e.canvasScale),i=void 0===o?1:o,l=a((0,r.useState)(!0),2),c=l[0],s=l[1],u=a((0,r.useState)(!1),2),d=u[0],f=u[1],m=t.x,p=void 0===m?0:m,h=t.y,v=void 0===h?0:h,b=t.width,g=void 0===b?150:b,y=t.height,x=void 0===y?80:y,E=t.imageUrl,w=void 0===E?"":E,S=t.alt,k=void 0===S?"Image":S,N=t.objectFit,P=void 0===N?"contain":N,O=t.backgroundColor,A=void 0===O?"transparent":O,j=t.borderWidth,T=void 0===j?0:j,C=t.borderColor,R=void 0===C?"#000000":C,I=t.borderRadius,D=void 0===I?0:I,M=t.opacity,W=void 0===M?1:M,_=t.rotation,z=void 0===_?0:_,L=t.scale,F=void 0===L?1:L,G=t.visible,U=void 0===G||G,V=t.shadow,H=void 0!==V&&V,$=t.shadowColor,q=void 0===$?"#000000":$,B=t.shadowOffsetX,J=void 0===B?2:B,Q=t.shadowOffsetY,X=void 0===Q?2:Q,Y=t.brightness,K=void 0===Y?100:Y,Z=t.contrast,ee=void 0===Z?100:Z,te=t.saturate,ne=void 0===te?100:te,re=(n["".concat(t.type,"_").concat(t.id)]||{}).imageUrl||w,ae={position:"absolute",left:"".concat(p*i,"px"),top:"".concat(v*i,"px"),width:"".concat(g*i,"px"),height:"".concat(x*i,"px"),backgroundColor:A,border:T>0?"".concat(T,"px solid ").concat(R):"none",borderRadius:"".concat(D,"px"),opacity:W,display:U?"flex":"none",alignItems:"center",justifyContent:"center",boxSizing:"border-box",overflow:"hidden",transform:"rotate(".concat(z,"deg) scale(").concat(F,")"),transformOrigin:"top left",boxShadow:H?"".concat(J,"px ").concat(X,"px 4px ").concat(q):"none"},oe={width:"100%",height:"100%",objectFit:P,borderRadius:T>0?"0":"".concat(D,"px"),filter:"brightness(".concat(K,"%) contrast(").concat(ee,"%) saturate(").concat(ne,"%)"),display:c&&!d?"block":"none"},ie={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa",border:"2px dashed #dee2e6",borderRadius:"".concat(D,"px"),color:"#6c757d",fontSize:"12px",textAlign:"center",padding:"8px",boxSizing:"border-box"};return r.createElement("div",{className:"preview-element preview-image-element",style:ae,"data-element-id":t.id,"data-element-type":t.type},re&&!d?r.createElement("img",{src:re,alt:k,style:oe,onLoad:function(){s(!0),f(!1)},onError:function(){s(!1),f(!0),console.warn("Failed to load image: ".concat(re))}}):null,!re||d?r.createElement("div",{style:ie},r.createElement("div",null,r.createElement("div",{style:{fontSize:"16px",marginBottom:"4px"}},"ðŸ“·"),r.createElement("div",null,"company_logo"===t.type?"Logo":"Image"),d&&r.createElement("div",{style:{fontSize:"10px",marginTop:"4px",color:"#dc3545"}},"Erreur de chargement"))):null)}},3481:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var r=n(6540),a=n(38),o=n(8325);function i(){var e={A4:{width:595,height:842},A3:{width:842,height:1191},Letter:{width:612,height:792},Legal:{width:612,height:1008}},t=e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A4"]||e.A4,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:96)/72;return{width:Math.round(t.width*n),height:Math.round(t.height*n)}}var l=["type","x","y","content"];function c(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof l?r:l,u=Object.create(c.prototype);return s(u,"_invoke",function(n,r,a){var o,l,c,s=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,l=0,c=e,f.n=n,i}};function m(n,r){for(l=n,c=r,t=0;!d&&s&&!a&&t<u.length;t++){var a,o=u[t],m=f.p,p=o[2];n>3?(a=p===r)&&(c=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(l=0,f.v=r,f.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,l=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,p),l=u,c=p;(t=l<2?e:c)||!d;){o||(l?l<3?(l>1&&(f.n=-1),m(l,c)):f.n=c:f.v=c);try{if(s=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==i)break}catch(t){o=e,l=1,c=t}finally{s=1}}return{value:t,done:d}}}(n,a,o),!0),u}var i={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(s(t={},r,function(){return this}),t),m=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=d,s(m,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,a,"GeneratorFunction"),s(m),s(m,a,"Generator"),s(m,r,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),(c=function(){return{w:o,m:p}})()}function s(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}s=function(e,t,n,r){function o(t,n){s(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},s(e,t,n,r)}function u(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,l,"next",e)}function l(e){u(o,r,a,i,l,"throw",e)}i(void 0)})}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){e.element,e.previewData,e.mode,e.canvasScale;var t=(0,r.useRef)(null),n=(0,o.usePerformanceMonitor)("PDFRenderer").measureOperation,a=f((0,r.useState)("idle"),2),s=a[0],u=a[1];(0,r.useEffect)(function(){pageData&&t.current&&(u("rendering"),n("PDF Page Render",d(c().m(function e(){var n,r,a,o,l;return c().w(function(e){for(;;)switch(e.n){case 0:try{n=t.current,r=n.getContext("2d"),a=i("A4",96),o=a.width*scale,l=a.height*scale,n.width=o,n.height=l,r.fillStyle="white",r.fillRect(0,0,o,l),r.save(),r.scale(scale,scale),m(r,pageData,a.width,a.height),r.restore(),u("complete")}catch(c){u("error")}case 1:return e.a(2)}},e)}))))},[pageData,scale,n]);var m=function(e,t,n,r){e.fillStyle="#ffffff",e.fillRect(0,0,n,r),e.strokeStyle="#e0e0e0",e.lineWidth=1,e.strokeRect(10,10,n-20,r-20),t.elements&&t.elements.forEach(function(t,n){p(e,t,n)}),e.fillStyle="#666666",e.font="12px Arial",e.textAlign="center",e.fillText("Page ".concat(t.number||1),n/2,r-20)},p=function(e,t,n){var r=t.type,a=t.x,o=void 0===a?0:a,i=t.y,c=void 0===i?0:i,s=t.content,u=void 0===s?"":s,d=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,l);switch(e.save(),r){case"text":e.fillStyle=d.color||"#000000",e.font="".concat(d.fontSize||12,"px ").concat(d.fontFamily||"Arial"),e.textAlign=d.textAlign||"left",e.fillText(u,o,c);break;case"rectangle":e.fillStyle=d.fillColor||"#cccccc",e.strokeStyle=d.strokeColor||"#000000",e.lineWidth=d.strokeWidth||1,d.fill&&e.fillRect(o,c,d.width||100,d.height||50),d.stroke&&e.strokeRect(o,c,d.width||100,d.height||50);break;case"line":e.strokeStyle=d.color||"#000000",e.lineWidth=d.width||1,e.beginPath(),e.moveTo(o,c),e.lineTo(d.x2||o+100,d.y2||c),e.stroke();break;default:e.fillStyle="#ffcccc",e.fillRect(o,c,50,20),e.fillStyle="#000000",e.font="10px Arial",e.fillText("".concat(r),o+5,c+15)}e.restore()};return r.createElement("div",{className:"pdf-renderer ".concat(className)},r.createElement("canvas",{ref:t,className:"pdf-canvas ".concat(s),style:{maxWidth:"100%",height:"auto",border:"error"===s?"2px solid #ff6b6b":"1px solid #e0e0e0",borderRadius:"4px"}}),"rendering"===s&&r.createElement("div",{className:"pdf-renderer-loading"},r.createElement("div",{className:"pdf-spinner"}),r.createElement("span",null,"Rendu en cours...")),"error"===s&&r.createElement("div",{className:"pdf-renderer-error"},r.createElement("span",null,"Erreur de rendu")))}var h=r.memo(p);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=e.elements,n=void 0===t?[]:t,a=e.scale,l=void 0===a?1:a,c=e.interactive,s=void 0!==c&&c,u=e.className,d=void 0===u?"":u,f=(0,r.useRef)(null),m=(0,r.useRef)(null),p=(0,o.usePerformanceMonitor)("CanvasRenderer").measureOperation,h=i("A4",96),v=(0,r.useCallback)(function(e,t,n){e.fillStyle="white",e.fillRect(0,0,h.width*n,h.height*n),e.save(),e.scale(n,n),e.strokeStyle="#e0e0e0",e.lineWidth=1/n,e.strokeRect(10,10,h.width-20,h.height-20),e.strokeStyle="#f0f0f0",e.setLineDash([5,5]),e.strokeRect(50,50,h.width-100,h.height-100),e.setLineDash([]),t.forEach(function(t,r){b(e,t,r,n)}),e.restore()},[h]),b=function(e,t,n,r){var a=t.type,o=t.x,i=void 0===o?0:o,l=t.y,c=void 0===l?0:l,u=t.width,d=void 0===u?100:u,f=t.height,m=void 0===f?50:f,p=t.content,h=void 0===p?"":p,v=t.properties,b=void 0===v?{}:v;switch(e.save(),e.translate(i,c),a){case"text":y(e,g({content:h},b));break;case"dynamic-text":x(e,g({content:h},b));break;case"rectangle":E(e,g({width:d,height:m},b));break;case"image":w(e,g({width:d,height:m},b));break;case"line":S(e,g({width:d,height:m},b));break;case"product_table":k(e,g({width:d,height:m},b));break;default:N(e,{type:a,width:d,height:m})}s&&t.selected&&(e.strokeStyle="#007cba",e.lineWidth=2/r,e.strokeRect(-2,-2,d+4,m+4)),e.restore()},y=function(e,t){var n=t.content,r=t.fontSize,a=void 0===r?12:r,o=t.fontFamily,i=void 0===o?"Arial":o,l=t.color,c=void 0===l?"#000000":l,s=t.textAlign,u=void 0===s?"left":s;e.fillStyle=c,e.font="".concat(a,"px ").concat(i),e.textAlign=u,e.fillText(n,0,a)},x=function(e,t){e.fillStyle="#0066cc",y(e,t),e.strokeStyle="#0066cc",e.lineWidth=1,e.strokeRect(-2,-2,t.width+4,t.height+4)},E=function(e,t){var n=t.width,r=t.height,a=t.fillColor,o=void 0===a?"#cccccc":a,i=t.strokeColor,l=void 0===i?"#000000":i,c=t.strokeWidth,s=void 0===c?1:c,u=t.fill,d=void 0===u||u,f=t.stroke,m=void 0===f||f;d&&(e.fillStyle=o,e.fillRect(0,0,n,r)),m&&(e.strokeStyle=l,e.lineWidth=s,e.strokeRect(0,0,n,r))},w=function(e,t){var n=t.width,r=t.height,a=t.src,o=t.alt,i=void 0===o?"Image":o;if(a){var l=new Image;l.onload=function(){e.drawImage(l,0,0,n,r)},l.src=a}else e.fillStyle="#f0f0f0",e.fillRect(0,0,n,r),e.fillStyle="#666666",e.font="12px Arial",e.textAlign="center",e.fillText(i,n/2,r/2)},S=function(e,t){var n=t.x2,r=void 0===n?100:n,a=t.y2,o=void 0===a?0:a,i=t.color,l=void 0===i?"#000000":i,c=t.lineWidth,s=void 0===c?1:c;e.strokeStyle=l,e.lineWidth=s,e.beginPath(),e.moveTo(0,0),e.lineTo(r,o),e.stroke()},k=function(e,t){var n=t.width,r=t.height,a=t.products,o=void 0===a?[]:a,i=20,l=n/4;e.fillStyle="#f5f5f5",e.fillRect(0,0,n,i),e.fillStyle="#333333",e.font="12px Arial",e.textAlign="left";["Produit","QtÃ©","Prix","Total"].forEach(function(t,n){e.fillText(t,n*l+5,15)}),o.slice(0,Math.floor((r-i)/i)).forEach(function(t,r){var a=(r+1)*i;e.fillStyle=r%2==0?"#ffffff":"#f9f9f9",e.fillRect(0,a,n,i),e.fillStyle="#333333",e.fillText(t.name||"Produit",5,a+15),e.textAlign="center",e.fillText(t.qty||"1",l+l/2,a+15),e.fillText(t.price||"0â‚¬",2*l+l/2,a+15),e.fillText(t.total||"0â‚¬",3*l+l/2,a+15),e.textAlign="left"}),e.strokeStyle="#dddddd",e.lineWidth=1;for(var c=0;c<=o.length+1;c++)e.beginPath(),e.moveTo(0,c*i),e.lineTo(n,c*i),e.stroke();for(var s=0;s<=4;s++)e.beginPath(),e.moveTo(s*l,0),e.lineTo(s*l,r),e.stroke()},N=function(e,t){var n=t.type,r=t.width,a=t.height;e.fillStyle="#ffebee",e.fillRect(0,0,r,a),e.fillStyle="#c62828",e.font="10px Arial",e.textAlign="center",e.fillText("[".concat(n,"]"),r/2,a/2)};return(0,r.useEffect)(function(){f.current&&p("Canvas Render",function(){var e=f.current,t=e.getContext("2d"),r=h.width*l,a=h.height*l;e.width=r,e.height=a,v(t,n,l)})},[n,l,v,p,h]),(0,r.useEffect)(function(){var e=function(){if(m.current&&f.current){var e=m.current;f.current,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=t.width-2*n,a=t.height-2*n,o=r/e.width,i=a/e.height,l=Math.min(o,i,1);Math.max(.1,Math.min(2,l))}({width:h.width,height:h.height},{width:e.clientWidth,height:e.clientHeight})}};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}},[h]),r.createElement("div",{ref:m,className:"canvas-renderer ".concat(d)},r.createElement("canvas",{ref:f,className:"canvas-renderer-canvas",style:{maxWidth:"100%",height:"auto",border:"1px solid #e0e0e0",borderRadius:"4px",cursor:s?"crosshair":"default"}}),s&&r.createElement("div",{className:"canvas-renderer-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}}))}var E=r.memo(x),w=n(2544),S=n(4747);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(e){var t,n,i,l=e.productId,c=e.templateData,s=e.className,u=void 0===s?"":s,d=e.compact,f=void 0===d||d,m=e.showControls,p=void 0===m||m,v=(0,a.usePreviewContext)(),b=v.state,g=b.loading,y=b.error,x=b.data,N=v.actions,P=N.loadPreview,O=N.clearPreview,A=(0,o.usePerformanceMonitor)("MetaboxMode").measureOperation,j=k((0,r.useState)("preview"),2),T=j[0],C=j[1];(0,r.useEffect)(function(){if(l&&c){var e=measureLoadTime("loadMetaboxPreview");P({type:"metabox",productId:l,templateData:c,mode:"compact"}),e.end()}return function(){O()}},[l,c,P,O,A]);var R=(0,r.useCallback)(function(e){C(e)},[]);return(0,r.useEffect)(function(){var e=document.createElement("style");return e.textContent="\n    .phase8-badge {\n      position: fixed !important;\n      top: 50px !important;\n      right: 20px !important;\n      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%) !important;\n      color: white !important;\n      padding: 8px 16px !important;\n      border-radius: 20px !important;\n      font-size: 14px !important;\n      font-weight: bold !important;\n      box-shadow: 0 4px 12px rgba(255,107,107,0.4) !important;\n      z-index: 999999 !important;\n      border: 3px solid white !important;\n      animation: phase8-pulse 2s infinite !important;\n    }\n    @keyframes phase8-pulse {\n      0% { transform: scale(1); }\n      50% { transform: scale(1.05); }\n      100% { transform: scale(1); }\n    }\n    .phase8-metrics {\n      font-size: 12px !important;\n      color: #ff6b6b !important;\n      background: #ffeaea !important;\n      padding: 4px 8px !important;\n      border-radius: 12px !important;\n      margin-left: 8px !important;\n      border: 1px solid #ff6b6b !important;\n      font-weight: bold !important;\n    }\n    .metabox-mode {\n      border: 3px solid #ff6b6b !important;\n      position: relative !important;\n    }\n  ",document.head.appendChild(e),function(){document.head.removeChild(e)}},[]),(0,r.useEffect)(function(){var e=setTimeout(function(){},1e3);return function(){return clearTimeout(e)}},[g,y,templateElements]),g?r.createElement("div",{className:"metabox-mode loading ".concat(u)},r.createElement("div",{className:"metabox-loading"},r.createElement("div",{className:"metabox-spinner"}),r.createElement("span",null,"Chargement de l'aperÃ§u..."))):y?r.createElement("div",{className:"metabox-mode error ".concat(u)},r.createElement("div",{className:"metabox-error"},r.createElement("span",{className:"error-icon"},"âš ï¸"),r.createElement("span",{className:"error-message"},"Erreur lors du chargement de l'aperÃ§u: ",y.message),r.createElement("button",{className:"error-retry-btn",onClick:function(){return P({type:"metabox",productId:l,templateData:c,mode:"compact"})}},"RÃ©essayer"))):r.createElement("div",{className:"metabox-mode ".concat(f?"compact":""," ").concat(u)},r.createElement("div",{style:{position:"fixed",top:"20px",left:"20px",background:"red",color:"white",padding:"10px",borderRadius:"10px",fontSize:"16px",fontWeight:"bold",zIndex:999999,border:"3px solid yellow"}},"ðŸ”¥ PHASE 8 ACTIVE - ",(new Date).toLocaleTimeString()),r.createElement("div",{className:"phase8-badge"},"ðŸš€ Phase 8 Active - ",(null===(t=templateElements)||void 0===t?void 0:t.length)||0," Ã©lÃ©ments"),r.createElement("div",{className:"metabox-header"},r.createElement("div",{className:"metabox-tabs"},r.createElement("button",{className:"metabox-tab ".concat("preview"===T?"active":""),onClick:function(){return R("preview")}},"AperÃ§u"),r.createElement("button",{className:"metabox-tab ".concat("settings"===T?"active":""),onClick:function(){return R("settings")}},"ParamÃ¨tres"),r.createElement("button",{className:"metabox-tab ".concat("export"===T?"active":""),onClick:function(){return R("export")}},"Export")),r.createElement("div",{className:"metabox-actions"},r.createElement("button",{className:"metabox-action-btn",title:"Actualiser"},"ðŸ”„"),r.createElement("button",{className:"metabox-action-btn",title:"Plein Ã©cran"},"â›¶"),r.createElement("div",{className:"phase8-metrics"},"âš¡ ",(null===(n=templateElements)||void 0===n?void 0:n.length)||0," Ã©lÃ©ments"))),r.createElement("div",{className:"metabox-content"},"preview"===T&&r.createElement("div",{className:"metabox-preview"},r.createElement("div",{className:"metabox-preview-canvas"},null==x||null===(i=x.elements)||void 0===i?void 0:i.map(function(e){switch(e.type){case"pdf":return r.createElement(h,{key:e.id,element:e,previewData:x,mode:"metabox"});case"canvas":return r.createElement(E,{key:e.id,element:e,previewData:x,mode:"metabox"});case"image":case"company_logo":return r.createElement(w.ImageRenderer,{key:e.id,element:e,previewData:x,mode:"metabox"});default:return null}})),p&&r.createElement("div",{className:"metabox-controls"},r.createElement(S.default,{compact:!0}))),"settings"===T&&r.createElement("div",{className:"metabox-settings"},r.createElement("div",{className:"settings-group"},r.createElement("h4",null,"ParamÃ¨tres d'aperÃ§u"),r.createElement("div",{className:"setting-item"},r.createElement("label",null,r.createElement("input",{type:"checkbox",defaultChecked:!0}),"Afficher les marges")),r.createElement("div",{className:"setting-item"},r.createElement("label",null,r.createElement("input",{type:"checkbox",defaultChecked:!0}),"Mode haute qualitÃ©")),r.createElement("div",{className:"setting-item"},r.createElement("label",null,r.createElement("input",{type:"checkbox"}),"AperÃ§u en temps rÃ©el"))),r.createElement("div",{className:"settings-group"},r.createElement("h4",null,"ParamÃ¨tres du template"),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Taille de page:"),r.createElement("select",{defaultValue:"a4"},r.createElement("option",{value:"a4"},"A4"),r.createElement("option",{value:"letter"},"Letter"),r.createElement("option",{value:"legal"},"Legal"))),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"Orientation:"),r.createElement("select",{defaultValue:"portrait"},r.createElement("option",{value:"portrait"},"Portrait"),r.createElement("option",{value:"landscape"},"Paysage"))))),"export"===T&&r.createElement("div",{className:"metabox-export"},r.createElement("div",{className:"export-options"},r.createElement("button",{className:"export-btn export-pdf"},"ðŸ“„ Exporter en PDF"),r.createElement("button",{className:"export-btn export-png"},"ðŸ–¼ï¸ Exporter en PNG"),r.createElement("button",{className:"export-btn export-jpeg"},"ðŸ“· Exporter en JPEG")),r.createElement("div",{className:"export-settings"},r.createElement("div",{className:"setting-item"},r.createElement("label",null,r.createElement("input",{type:"checkbox",defaultChecked:!0}),"Inclure les marges")),r.createElement("div",{className:"setting-item"},r.createElement("label",null,"RÃ©solution:"),r.createElement("select",{defaultValue:"high"},r.createElement("option",{value:"low"},"Basse (72 DPI)"),r.createElement("option",{value:"medium"},"Moyenne (150 DPI)"),r.createElement("option",{value:"high"},"Haute (300 DPI)")))))))}var O=r.memo(P)}}]);