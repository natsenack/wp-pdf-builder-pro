/*! For license information please see 555.js.LICENSE.txt */
"use strict";(self.webpackChunkwp_pdf_builder_pro=self.webpackChunkwp_pdf_builder_pro||[]).push([[555],{2544:function(e,t,o){o.r(t),o.d(t,{ImageRenderer:function(){return i}});var r=o(6540);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,a,i,c=[],l=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;l=!1}else for(;!(l=(r=a.call(o)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){d=!0,n=e}finally{try{if(!l&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw n}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=Array(t);o<t;o++)r[o]=e[o];return r}var i=function(e){var t=e.element,o=e.previewData,a=(e.mode,e.canvasScale),i=void 0===a?1:a,c=n((0,r.useState)(!0),2),l=c[0],d=c[1],s=n((0,r.useState)(!1),2),p=s[0],u=s[1],m=t.x,v=void 0===m?0:m,f=t.y,h=void 0===f?0:f,g=t.width,b=void 0===g?150:g,y=t.height,x=void 0===y?80:y,w=t.imageUrl,E=void 0===w?"":w,C=t.alt,S=void 0===C?"Image":C,k=t.objectFit,O=void 0===k?"contain":k,A=t.backgroundColor,_=void 0===A?"transparent":A,W=t.borderWidth,j=void 0===W?0:W,z=t.borderColor,D=void 0===z?"#000000":z,T=t.borderRadius,R=void 0===T?0:T,P=t.opacity,F=void 0===P?1:P,H=t.rotation,L=void 0===H?0:H,N=t.scale,I=void 0===N?1:N,M=t.visible,q=void 0===M||M,G=t.shadow,X=void 0!==G&&G,Y=t.shadowColor,B=void 0===Y?"#000000":Y,U=t.shadowOffsetX,V=void 0===U?2:U,Q=t.shadowOffsetY,K=void 0===Q?2:Q,$=t.brightness,J=void 0===$?100:$,Z=t.contrast,ee=void 0===Z?100:Z,te=t.saturate,oe=void 0===te?100:te,re=(o["".concat(t.type,"_").concat(t.id)]||{}).imageUrl||E,ne={position:"absolute",left:"".concat(v*i,"px"),top:"".concat(h*i,"px"),width:"".concat(b*i,"px"),height:"".concat(x*i,"px"),backgroundColor:_,border:j>0?"".concat(j,"px solid ").concat(D):"none",borderRadius:"".concat(R,"px"),opacity:F,display:q?"flex":"none",alignItems:"center",justifyContent:"center",boxSizing:"border-box",overflow:"hidden",transform:"rotate(".concat(L,"deg) scale(").concat(I,")"),transformOrigin:"top left",boxShadow:X?"".concat(V,"px ").concat(K,"px 4px ").concat(B):"none"},ae={width:"100%",height:"100%",objectFit:O,borderRadius:j>0?"0":"".concat(R,"px"),filter:"brightness(".concat(J,"%) contrast(").concat(ee,"%) saturate(").concat(oe,"%)"),display:l&&!p?"block":"none"},ie={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f8f9fa",border:"2px dashed #dee2e6",borderRadius:"".concat(R,"px"),color:"#6c757d",fontSize:"12px",textAlign:"center",padding:"8px",boxSizing:"border-box"};return r.createElement("div",{className:"preview-element preview-image-element",style:ne,"data-element-id":t.id,"data-element-type":t.type},re&&!p?r.createElement("img",{src:re,alt:S,style:ae,onLoad:function(){d(!0),u(!1)},onError:function(){d(!1),u(!0),console.warn("Failed to load image: ".concat(re))}}):null,!re||p?r.createElement("div",{style:ie},r.createElement("div",null,r.createElement("div",{style:{fontSize:"16px",marginBottom:"4px"}},"üì∑"),r.createElement("div",null,"company_logo"===t.type?"Logo":"Image"),p&&r.createElement("div",{style:{fontSize:"10px",marginTop:"4px",color:"#dc3545"}},"Erreur de chargement"))):null)}},9555:function(e,t,o){o.r(t),o.d(t,{default:function(){return k}});var r=o(6540),n=o(38),a=function(e){var t=e.element,o=(e.previewData,e.mode,e.canvasScale),n=void 0===o?1:o,a=t.x,i=void 0===a?0:a,c=t.y,l=void 0===c?0:c,d=t.width,s=void 0===d?200:d,p=t.height,u=void 0===p?50:p,m=t.content,v=void 0===m?"":m,f=t.text,h=void 0===f?v||"Texte d'exemple":f,g=t.fontSize,b=void 0===g?14:g,y=t.fontFamily,x=void 0===y?"Arial":y,w=t.fontWeight,E=void 0===w?"normal":w,C=t.fontStyle,S=void 0===C?"normal":C,k=t.textAlign,O=void 0===k?"left":k,A=t.color,_=void 0===A?"#333333":A,W=t.backgroundColor,j=void 0===W?"transparent":W,z=t.borderWidth,D=void 0===z?0:z,T=t.borderColor,R=void 0===T?"#000000":T,P=t.borderRadius,F=void 0===P?0:P,H=t.opacity,L=void 0===H?1:H,N=t.rotation,I=void 0===N?0:N,M=t.scale,q=void 0===M?1:M,G=t.visible,X=void 0===G||G,Y=t.shadow,B=void 0!==Y&&Y,U=t.shadowColor,V=void 0===U?"#000000":U,Q=t.shadowOffsetX,K=void 0===Q?2:Q,$=t.shadowOffsetY,J=void 0===$?2:$,Z=t.textDecoration,ee=void 0===Z?"none":Z,te=t.lineHeight,oe=void 0===te?1.2:te,re=t.padding,ne=void 0===re?4:re,ae={position:"absolute",left:"".concat(i*n,"px"),top:"".concat(l*n,"px"),width:"".concat(s*n,"px"),height:"".concat(u*n,"px"),fontSize:"".concat(b*n,"px"),fontFamily:x,fontWeight:E,fontStyle:S,textAlign:O,color:_,backgroundColor:j,border:D>0?"".concat(D,"px solid ").concat(R):"none",borderRadius:"".concat(F,"px"),opacity:L,padding:"".concat(ne,"px"),boxSizing:"border-box",overflow:"hidden",display:X?"block":"none",whiteSpace:"pre-wrap",wordWrap:"break-word",textDecoration:ee,lineHeight:"".concat(oe),transform:"rotate(".concat(I,"deg) scale(").concat(q,")"),transformOrigin:"top left",boxShadow:B?"".concat(K,"px ").concat(J,"px 4px ").concat(V):"none"};return r.createElement("div",{className:"preview-element preview-text-element",style:ae,"data-element-id":t.id,"data-element-type":"text"},h)},i=function(e){var t=e.element,o=(e.previewData,e.mode,e.canvasScale),n=void 0===o?1:o,a=t.x,i=void 0===a?0:a,c=t.y,l=void 0===c?0:c,d=t.width,s=void 0===d?100:d,p=t.height,u=void 0===p?50:p,m=t.backgroundColor,v=void 0===m?"transparent":m,f=t.borderColor,h=void 0===f?"#000000":f,g=t.borderWidth,b=void 0===g?1:g,y=t.borderRadius,x=void 0===y?0:y,w=t.opacity,E=void 0===w?100:w,C=t.rotation,S=void 0===C?0:C,k=t.scale,O=void 0===k?1:k,A=t.visible,_=void 0===A||A,W=t.shadow,j=void 0!==W&&W,z=t.shadowColor,D=void 0===z?"#000000":z,T=t.shadowOffsetX,R=void 0===T?2:T,P=t.shadowOffsetY,F=void 0===P?2:P,H={position:"absolute",left:"".concat(i*n,"px"),top:"".concat(l*n,"px"),width:"".concat(s*n,"px"),height:"".concat(u*n,"px"),backgroundColor:v,border:b>0?"".concat(b,"px solid ").concat(h):"none",borderRadius:"".concat(x,"px"),opacity:E/100,display:_?"block":"none",transform:"rotate(".concat(S,"deg) scale(").concat(O,")"),transformOrigin:"top left",boxShadow:j?"".concat(R,"px ").concat(F,"px 4px ").concat(D):"none"};return r.createElement("div",{className:"preview-element preview-rectangle-element",style:H,"data-element-id":t.id,"data-element-type":t.type})},c=o(2544);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach(function(t){p(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function p(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var u=function(e){return Array.isArray(e)&&3===e.length?"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"):"transparent"},m=function(e){var t=e.element,o=e.previewData,n=(e.mode,e.canvasScale),a=void 0===n?1:n;console.log("üîç TableRenderer CALLED for element:",t.id,"type:",t.dataSource||t.type);var i,c=t.x,l=void 0===c?0:c,d=t.y,p=void 0===d?0:d,m=t.width,v=void 0===m?500:m,f=t.height,h=void 0===f?200:f,g=t.showHeaders,b=void 0===g||g,y=t.showBorders,x=void 0!==y&&y,w=(t.tableStyle,t.backgroundColor),E=void 0===w?"transparent":w,C=t.borderWidth,S=void 0===C?1:C,k=t.borderColor,O=void 0===k?"#dddddd":k,A=t.borderRadius,_=void 0===A?0:A,W=t.opacity,j=void 0===W?1:W,z=(t.showLabels,t.headers),D=void 0===z?["Produit","Qt√©","Prix"]:z,T=(t.dataSource,t.columns),R=void 0===T?{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0}:T,P=t.showSubtotal,F=void 0!==P&&P,H=t.showShipping,L=void 0===H||H,N=t.showTaxes,I=void 0===N||N,M=t.showDiscount,q=void 0!==M&&M,G=t.showTotal,X=void 0!==G&&G,Y=t.rotation,B=void 0===Y?0:Y,U=t.scale,V=void 0===U?1:U,Q=t.visible,K=void 0===Q||Q,$=t.shadow,J=void 0!==$&&$,Z=t.shadowColor,ee=void 0===Z?"#000000":Z,te=t.shadowOffsetX,oe=void 0===te?2:te,re=t.shadowOffsetY,ne=void 0===re?2:re,ae=o["product_table_".concat(t.id)]||{},ie=ae.tableStyleData||{header_bg:[248,249,250],header_border:[226,232,240],row_border:[241,245,249],alt_row_bg:[250,251,252],headerTextColor:"#000000",rowTextColor:"#000000",border_width:1,headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px"},ce=D&&D.length>0?D:ae.headers||[],le=ce.length>0?ce:ae.headers&&ae.headers.length>0?ae.headers:(i=[],R.image&&i.push("Image"),R.name&&i.push("Produit"),R.sku&&i.push("SKU"),R.quantity&&i.push("Qt√©"),R.price&&i.push("Prix"),R.total&&i.push("Total"),i),de={position:"absolute",left:"".concat(l*a,"px"),top:"".concat(p*a,"px"),width:"".concat(v*a,"px"),height:"".concat(h*a,"px"),backgroundColor:E,border:S>0?"".concat(S,"px solid ").concat(O):"none",borderRadius:"".concat(_,"px"),opacity:j,padding:"8px",boxSizing:"border-box",overflow:"auto",display:K?"block":"none",transform:"rotate(".concat(B,"deg) scale(").concat(V,")"),transformOrigin:"top left",boxShadow:J?"".concat(oe,"px ").concat(ne,"px 4px ").concat(ee):"none"},se={width:"100%",borderCollapse:x?"collapse":"separate",borderSpacing:x?"0":"2px",fontSize:ie.rowFontSize,fontFamily:"Arial, sans-serif"},pe={backgroundColor:u(ie.header_bg),color:ie.headerTextColor,fontWeight:ie.headerFontWeight,fontSize:ie.headerFontSize,padding:"8px",textAlign:"left",border:x?"".concat(ie.border_width,"px solid ").concat(u(ie.header_border)):"none"},ue={width:"40px",height:"40px",objectFit:"cover",borderRadius:"4px"},me={maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},ve={maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"10px"},fe={padding:"6px 8px",border:x?"".concat(ie.border_width,"px solid ").concat(u(ie.row_border)):"none",verticalAlign:"top",fontSize:ie.rowFontSize,color:ie.rowTextColor},he=le.findIndex(function(e){return e.toLowerCase().includes("prix")||"total"===e.toLowerCase()||"tva"===e.toLowerCase()});console.log("TableRenderer DEBUG:",{elementId:t.id,finalHeaders:le,priceColumnIndex:he,tableHeaders:ce,tableDataHeaders:ae.headers});var ge=he>0?he-1:he,be=he>0;return r.createElement("div",{className:"preview-element preview-table-element",style:de,"data-element-id":t.id,"data-element-type":"product_table","data-table-renderer-version":"improved-totals-alignment"},r.createElement("table",{style:se},b&&le&&le.length>0&&r.createElement("thead",null,r.createElement("tr",null,le.map(function(e,t){return r.createElement("th",{key:t,style:pe},e)}))),r.createElement("tbody",null,ae.rows&&ae.rows.map(function(e,t){var o=t%2==0?u(ie.alt_row_bg):"transparent";return r.createElement("tr",{key:t,style:{backgroundColor:o}},e.map(function(e,t){var o=le[t]||"",n="image"===o.toLowerCase(),a=o.toLowerCase().includes("description"),i="attributs"===o.toLowerCase(),c="qt√©"===o.toLowerCase(),l=o.toLowerCase().includes("prix")||"total"===o.toLowerCase()||"tva"===o.toLowerCase()||"remise"===o.toLowerCase(),d=s({},fe);return c?d.textAlign="center":l&&(d.textAlign="right"),r.createElement("td",{key:t,style:d},n&&e?r.createElement("img",{src:e,alt:"Produit",style:ue,onError:function(e){e.target.style.display="none"}}):a&&e?r.createElement("span",{style:me,title:e},e):i&&e?r.createElement("span",{style:ve,title:e},e):e||"-")}))})),(F||L||I||q||X)&&ae.totals&&Object.keys(ae.totals).length>0&&r.createElement("tfoot",null,F&&ae.totals.subtotal&&r.createElement("tr",{style:{backgroundColor:u(ie.alt_row_bg)}},Array.from({length:le.length},function(e,t){return be&&t===ge?r.createElement("td",{key:t,style:s(s({},fe),{},{fontWeight:"bold",textAlign:"right"})},"Sous-total:"):t===he?r.createElement("td",{key:t,style:s(s({},fe),{},{fontWeight:"bold",textAlign:"right",borderTop:"1px solid #dee2e6"},be?{}:{paddingLeft:"80px"})},be?ae.totals.subtotal:"Sous-total: ".concat(ae.totals.subtotal)):r.createElement("td",{key:t,style:fe})})),L&&ae.totals.shipping&&r.createElement("tr",{style:{backgroundColor:"transparent"}},Array.from({length:le.length},function(e,t){return be&&t===ge?r.createElement("td",{key:t,style:s(s({},fe),{},{fontWeight:"bold",textAlign:"right"})},"Frais de port:"):t===he?r.createElement("td",{key:t,style:s(s({},fe),{},{fontWeight:"bold",textAlign:"right"},be?{}:{paddingLeft:"80px"})},be?ae.totals.shipping:"Frais de port: ".concat(ae.totals.shipping)):r.createElement("td",{key:t,style:fe})})),I&&ae.totals.tax&&r.createElement("tr",{style:{backgroundColor:u(ie.alt_row_bg)}},Array.from({length:le.length},function(e,t){return be&&t===ge?r.createElement("td",{key:t,style:s(s({},fe),{},{fontWeight:"bold",textAlign:"right"})},"TVA:"):t===he?r.createElement("td",{key:t,style:s(s({},fe),{},{fontWeight:"bold",textAlign:"right"},be?{}:{paddingLeft:"80px"})},be?ae.totals.tax:"TVA: ".concat(ae.totals.tax)):r.createElement("td",{key:t,style:fe})})),q&&ae.totals.discount&&r.createElement("tr",{style:{backgroundColor:"transparent"}},Array.from({length:le.length},function(e,t){return be&&t===ge?r.createElement("td",{key:t,style:s(s({},fe),{},{fontWeight:"bold",textAlign:"right"})},"Remise:"):t===he?r.createElement("td",{key:t,style:s(s({},fe),{},{fontWeight:"bold",textAlign:"right"},be?{}:{paddingLeft:"80px"})},be?ae.totals.discount:"Remise: ".concat(ae.totals.discount)):r.createElement("td",{key:t,style:fe})})),X&&ae.totals.total&&r.createElement("tr",{style:{backgroundColor:u(ie.alt_row_bg)}},Array.from({length:le.length},function(e,t){return be&&t===ge?r.createElement("td",{key:t,style:s(s({},fe),{},{fontWeight:"bold",textAlign:"right",fontSize:"14px",color:"#2563eb",borderTop:"2px solid #2563eb"})},"Total:"):t===he?r.createElement("td",{key:t,style:s(s({},fe),{},{fontWeight:"bold",textAlign:"right",fontSize:"14px",color:"#2563eb",borderTop:"2px solid #2563eb"},be?{}:{paddingLeft:"80px"})},be?ae.totals.total:"Total: ".concat(ae.totals.total)):r.createElement("td",{key:t,style:s(s({},fe),{},{borderTop:0===t?"2px solid #2563eb":"none"})})})))),(!ae.rows||0===ae.rows.length)&&r.createElement("div",{style:{textAlign:"center",color:"#6c757d",fontStyle:"italic",padding:"20px"}},"Aucun produit √† afficher"))},v=function(e){var t=e.element,o=e.previewData,n=(e.mode,e.canvasScale),a=void 0===n?1:n,i=t.x,c=void 0===i?0:i,l=t.y,d=void 0===l?0:l,s=t.width,p=void 0===s?300:s,u=t.height,m=void 0===u?50:u,v=t.template,f=void 0===v?"total_only":v,h=t.customContent,g=void 0===h?"{{order_total}} ‚Ç¨":h,b=t.fontSize,y=void 0===b?14:b,x=t.fontFamily,w=void 0===x?"Arial":x,E=t.fontWeight,C=void 0===E?"normal":E,S=t.fontStyle,k=void 0===S?"normal":S,O=t.textAlign,A=void 0===O?"left":O,_=t.color,W=void 0===_?"#333333":_,j=t.backgroundColor,z=void 0===j?"transparent":j,D=t.borderWidth,T=void 0===D?0:D,R=t.borderColor,P=void 0===R?"#000000":R,F=t.borderRadius,H=void 0===F?0:F,L=t.opacity,N=void 0===L?1:L,I=t.rotation,M=void 0===I?0:I,q=t.scale,G=void 0===q?1:q,X=t.visible,Y=void 0===X||X,B=t.shadow,U=void 0!==B&&B,V=t.shadowColor,Q=void 0===V?"#000000":V,K=t.shadowOffsetX,$=void 0===K?2:K,J=t.shadowOffsetY,Z=void 0===J?2:J,ee=t.textDecoration,te=void 0===ee?"none":ee,oe=t.lineHeight,re=void 0===oe?1.2:oe,ne=(o["dynamic-text_".concat(t.id)]||{}).content||g,ae={position:"absolute",left:"".concat(c*a,"px"),top:"".concat(d*a,"px"),width:"".concat(p*a,"px"),height:"".concat(m*a,"px"),fontSize:"".concat(y*a,"px"),fontFamily:w,fontWeight:C,fontStyle:k,textAlign:A,color:W,backgroundColor:z,border:T>0?"".concat(T,"px solid ").concat(P):"none",borderRadius:"".concat(H,"px"),opacity:N,padding:"4px",boxSizing:"border-box",overflow:"hidden",display:Y?"block":"none",whiteSpace:"pre-wrap",wordWrap:"break-word",textDecoration:te,lineHeight:"".concat(re),transform:"rotate(".concat(M,"deg) scale(").concat(G,")"),transformOrigin:"top left",boxShadow:U?"".concat($,"px ").concat(Z,"px 4px ").concat(Q):"none"};return r.createElement("div",{className:"preview-element preview-dynamic-text-element",style:ae,"data-element-id":t.id,"data-element-type":"dynamic-text",title:"Template: ".concat(f)},ne)},f=o(6129),h=o.n(f),g=o(7583),b=function(e){var t=e.element,o=(e.previewData,e.mode,e.canvasScale),n=void 0===o?1:o,a=t.x,i=void 0===a?0:a,c=t.y,l=void 0===c?0:c,d=t.width,s=void 0===d?150:d,p=t.height,u=void 0===p?60:p,m=t.backgroundColor,v=void 0===m?"transparent":m,f=t.borderColor,b=void 0===f?"#000000":f,y=t.borderWidth,x=void 0===y?1:y,w=t.opacity,E=void 0===w?100:w,C=t.rotation,S=void 0===C?0:C,k=t.scale,O=void 0===k?1:k,A=t.visible,_=void 0===A||A,W=t.shadow,j=void 0!==W&&W,z=t.shadowColor,D=void 0===z?"#000000":z,T=t.shadowOffsetX,R=void 0===T?2:T,P=t.shadowOffsetY,F=void 0===P?2:P,H=t.content,L=void 0===H?"":H,N=t.code,I=void 0===N?"":N,M=t.format,q=void 0===M?"CODE128":M,G=(0,r.useRef)(null),X=(0,r.useRef)(null),Y=L||I||"BARCODE";(0,r.useEffect)(function(){if(_)if("qrcode"===t.type)X.current&&g.toCanvas(X.current,Y,{errorCorrectionLevel:"H",type:"image/png",quality:1,margin:0,width:Math.min(200,Math.max(50,s*n/2))}).catch(function(e){return console.error("QR Code g√©n√©ration √©chou√©e:",e)});else if(G.current)try{h()(G.current,Y,{format:q||"CODE128",width:2,height:Math.max(40,u*n-20),displayValue:!0,fontSize:12,margin:2})}catch(e){console.error("Code-barres g√©n√©ration √©chou√©e:",e)}},[Y,t.type,s,u,n,q,_]);var B={position:"absolute",left:"".concat(i*n,"px"),top:"".concat(l*n,"px"),width:"".concat(s*n,"px"),height:"".concat(u*n,"px"),backgroundColor:v,border:x>0?"".concat(x,"px solid ").concat(b):"none",opacity:E/100,display:_?"flex":"none",alignItems:"center",justifyContent:"center",transform:"rotate(".concat(S,"deg) scale(").concat(O,")"),transformOrigin:"top left",boxShadow:j?"".concat(R,"px ").concat(F,"px 4px ").concat(D):"none",overflow:"hidden"};return r.createElement("div",{className:"preview-element preview-barcode-element",style:B,"data-element-id":t.id,"data-element-type":t.type},"qrcode"===t.type?r.createElement("canvas",{ref:X,style:{width:"100%",height:"100%",objectFit:"contain"}}):r.createElement("svg",{ref:G,style:{width:"100%",height:"auto",display:"flex",alignItems:"center",justifyContent:"center"}}))},y=function(e){var t=e.element,o=(e.previewData,e.mode,e.canvasScale),n=void 0===o?1:o,a=t.x,i=void 0===a?0:a,c=t.y,l=void 0===c?0:c,d=t.width,s=void 0===d?200:d,p=t.height,u=void 0===p?20:p,m=t.backgroundColor,v=void 0===m?"#e5e7eb":m,f=t.borderColor,h=void 0===f?"#d1d5db":f,g=t.borderWidth,b=void 0===g?1:g,y=t.borderRadius,x=void 0===y?10:y,w=t.opacity,E=void 0===w?100:w,C=t.progressValue,S=void 0===C?75:C,k=t.progressColor,O=void 0===k?"#3b82f6":k,A=t.rotation,_=void 0===A?0:A,W=t.scale,j=void 0===W?1:W,z=t.visible,D=void 0===z||z,T=t.shadow,R=void 0!==T&&T,P=t.shadowColor,F=void 0===P?"#000000":P,H=t.shadowOffsetX,L=void 0===H?2:H,N=t.shadowOffsetY,I=void 0===N?2:N,M={position:"absolute",left:"".concat(i*n,"px"),top:"".concat(l*n,"px"),width:"".concat(s*n,"px"),height:"".concat(u*n,"px"),backgroundColor:v,border:b>0?"".concat(b,"px solid ").concat(h):"none",borderRadius:"".concat(x,"px"),opacity:E/100,overflow:"hidden",display:D?"block":"none",transform:"rotate(".concat(_,"deg) scale(").concat(j,")"),transformOrigin:"top left",boxShadow:R?"".concat(L,"px ").concat(I,"px 4px ").concat(F):"none"},q={width:"".concat(Math.min(100,Math.max(0,S)),"%"),height:"100%",backgroundColor:O,transition:"width 0.3s ease"};return r.createElement("div",{className:"preview-element preview-progress-element",style:M,"data-element-id":t.id,"data-element-type":"progress-bar"},r.createElement("div",{style:q}))};var x=function(e){var t=e.element,o=e.scale,n=void 0===o?1:o,l=e.templateData,d=void 0===l?{}:l;switch(e.interactive,t.type){case"text":return r.createElement(a,{element:t,canvasScale:n});case"dynamic-text":return r.createElement(v,{element:t,previewData:d,canvasScale:n});case"rectangle":case"shape-rectangle":return r.createElement(i,{element:t,canvasScale:n});case"image":return r.createElement(c.ImageRenderer,{element:t,canvasScale:n});case"product_table":return r.createElement(m,{element:t,previewData:d,canvasScale:n});case"barcode":case"qrcode":return r.createElement(b,{element:t,previewData:d,canvasScale:n});case"progress-bar":return r.createElement(y,{element:t,previewData:d,canvasScale:n});case"customer_info":return r.createElement("div",{style:{position:"absolute",left:"".concat(t.x*n,"px"),top:"".concat(t.y*n,"px"),width:"".concat(t.width*n,"px"),minHeight:"".concat(t.height*n,"px"),padding:"10px",backgroundColor:t.properties&&t.properties.backgroundColor||"#f8f9fa",border:t.properties&&t.properties.borderWidth?"".concat(t.properties.borderWidth,"px solid ").concat(t.properties.borderColor||"#dee2e6"):"none",borderRadius:"4px",fontSize:"12px",lineHeight:"1.4"}},r.createElement("div",null,r.createElement("strong",null,"Client:")," ",d.customer&&d.customer.name||"N/A"),r.createElement("div",null,r.createElement("strong",null,"Email:")," ",d.customer&&d.customer.email||"N/A"),r.createElement("div",null,r.createElement("strong",null,"T√©l√©phone:")," ",d.customer&&d.customer.phone||"N/A"),d.customer&&d.customer.address&&r.createElement("div",null,r.createElement("strong",null,"Adresse:")," ",d.customer.address.replace("\n",", ")));case"company_info":return r.createElement("div",{style:{position:"absolute",left:"".concat(t.x*n,"px"),top:"".concat(t.y*n,"px"),width:"".concat(t.width*n,"px"),minHeight:"".concat(t.height*n,"px"),padding:"10px",backgroundColor:t.properties&&t.properties.backgroundColor||"#f8f9fa",border:t.properties&&t.properties.borderWidth?"".concat(t.properties.borderWidth,"px solid ").concat(t.properties.borderColor||"#dee2e6"):"none",borderRadius:"4px",fontSize:"12px",lineHeight:"1.4"}},r.createElement("div",null,r.createElement("strong",null,"Entreprise:")," ",d.company&&d.company.name||"N/A"),r.createElement("div",null,r.createElement("strong",null,"Email:")," ",d.company&&d.company.email||"N/A"),r.createElement("div",null,r.createElement("strong",null,"T√©l√©phone:")," ",d.company&&d.company.phone||"N/A"),d.company&&d.company.address&&r.createElement("div",null,r.createElement("strong",null,"Adresse:")," ",d.company.address.replace("\n",", ")));case"order_number":return r.createElement("div",{style:{position:"absolute",left:"".concat(t.x*n,"px"),top:"".concat(t.y*n,"px"),width:"".concat(t.width*n,"px"),minHeight:"".concat(t.height*n,"px"),padding:"8px",backgroundColor:t.properties&&t.properties.backgroundColor||"#e3f2fd",border:t.properties&&t.properties.borderWidth?"".concat(t.properties.borderWidth,"px solid ").concat(t.properties.borderColor||"#2196f3"):"none",borderRadius:"4px",fontSize:"14px",fontWeight:"bold",color:t.properties&&t.properties.color||"#1976d2",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"}},"Commande #",d.order&&d.order.number||"N/A");default:return r.createElement("div",{style:{position:"absolute",left:"".concat(t.x*n,"px"),top:"".concat(t.y*n,"px"),width:"".concat(t.width*n,"px"),minHeight:"".concat(t.height*n,"px"),padding:"10px",backgroundColor:"#ffebee",border:"1px solid #f44336",borderRadius:"4px",color:"#c62828",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center"}},r.createElement("div",{style:{textAlign:"center"}},r.createElement("div",null,"‚ùì"),r.createElement("div",null,"Type: ",t.type)))}};function w(){var e,t,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",n=o.toStringTag||"@@toStringTag";function a(o,r,n,a){var l=r&&r.prototype instanceof c?r:c,d=Object.create(l.prototype);return E(d,"_invoke",function(o,r,n){var a,c,l,d=0,s=n||[],p=!1,u={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,o){return a=t,c=0,l=e,u.n=o,i}};function m(o,r){for(c=o,l=r,t=0;!p&&d&&!n&&t<s.length;t++){var n,a=s[t],m=u.p,v=a[2];o>3?(n=v===r)&&(l=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((n=o<2&&m<a[1])?(c=0,u.v=r,u.n=a[1]):m<v&&(n=o<3||a[0]>r||r>v)&&(a[4]=o,a[5]=r,u.n=v,c=0))}if(n||o>1)return i;throw p=!0,r}return function(n,s,v){if(d>1)throw TypeError("Generator is already running");for(p&&1===s&&m(s,v),c=s,l=v;(t=c<2?e:l)||!p;){a||(c?c<3?(c>1&&(u.n=-1),m(c,l)):u.n=l:u.v=l);try{if(d=2,a){if(c||(n="next"),t=a[n]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),c=1);a=e}else if((t=(p=u.n<0)?l:o.call(r,u))!==i)break}catch(t){a=e,c=1,l=t}finally{d=1}}return{value:t,done:p}}}(o,n,a),!0),d}var i={};function c(){}function l(){}function d(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(E(t={},r,function(){return this}),t),p=d.prototype=c.prototype=Object.create(s);function u(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,E(e,n,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=d,E(p,"constructor",d),E(d,"constructor",l),l.displayName="GeneratorFunction",E(d,n,"GeneratorFunction"),E(p),E(p,n,"Generator"),E(p,r,function(){return this}),E(p,"toString",function(){return"[object Generator]"}),(w=function(){return{w:a,m:u}})()}function E(e,t,o,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}E=function(e,t,o,r){function a(t,o){E(e,t,function(e){return this._invoke(t,o,e)})}t?n?n(e,t,{value:o,enumerable:!r,configurable:!r,writable:!r}):e[t]=o:(a("next",0),a("throw",1),a("return",2))},E(e,t,o,r)}function C(e,t,o,r,n,a,i){try{var c=e[a](i),l=c.value}catch(e){return void o(e)}c.done?t(l):Promise.resolve(l).then(r,n)}function S(){var e=(0,n.usePreviewContext)(),t=e.state,o=t.loading,a=t.error,i=(t.data,t.config),c=e.actions.clearPreview,l=i.elements,d=void 0===l?[]:l,s=i.templateData,p=void 0===s?{}:s,u=(0,r.useMemo)(function(){var e=Math.min(1,800/595);return{pageWidth:595,pageHeight:842,containerWidth:800,scale:e,displayWidth:595*e,displayHeight:842*e}},[]);return o?r.createElement("div",{className:"canvas-mode-loading"},r.createElement("div",{className:"spinner"},"Chargement...")):a?r.createElement("div",{className:"canvas-mode-error"},r.createElement("p",null,"Erreur: ",a),r.createElement("button",{onClick:c},"R√©essayer")):r.createElement("div",{className:"canvas-mode"},r.createElement("div",{className:"canvas-container",style:{width:"".concat(u.containerWidth,"px"),margin:"0 auto",border:"1px solid #e0e0e0",borderRadius:"8px",overflow:"hidden",backgroundColor:"#f8f9fa"}},r.createElement("div",{style:{padding:"12px 20px",backgroundColor:"white",borderBottom:"1px solid #e0e0e0",fontSize:"14px",color:"#1d1d1f",display:"flex",alignItems:"center",gap:"20px"}},r.createElement("span",null,"üìÑ ",Math.round(u.pageWidth)," √ó ",Math.round(u.pageHeight)," points"),r.createElement("span",null,"|"),r.createElement("span",null,"üîç ",Math.round(100*u.scale),"%"),r.createElement("span",null,"|"),r.createElement("span",null,"üì¶ ",d&&d.length?d.length:0," √©l√©ments")),r.createElement("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",minHeight:"".concat(u.displayHeight+40,"px")}},r.createElement("div",{style:{width:"".concat(u.displayWidth,"px"),height:"".concat(u.displayHeight,"px"),backgroundColor:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",margin:"0 auto",position:"relative",overflow:"hidden"}},d&&d.length>0?r.createElement("div",{style:{transform:"scale(".concat(u.scale,")"),transformOrigin:"top left",width:"".concat(u.pageWidth,"px"),height:"".concat(u.pageHeight,"px"),position:"relative"}},d.map(function(e,t){return r.createElement(x,{key:"".concat(e.type,"-").concat(e.id,"-").concat(e.template,"-").concat(e.customContent,"-").concat(Date.now()),element:e,scale:1,templateData:p,interactive:!1})})):r.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#6b7280",fontSize:"16px"}},r.createElement("div",{style:{textAlign:"center"}},r.createElement("div",{style:{fontSize:"48px",marginBottom:"16px"}},"üìÑ"),r.createElement("p",null,"Aucun √©l√©ment √† afficher"),r.createElement("p",{style:{fontSize:"14px",marginTop:"8px"}},"Ajoutez des √©l√©ments dans l'√©diteur pour les voir ici"))))),!1))}S.loadData=function(){var e,t=(e=w().m(function e(t,o,r){return w().w(function(e){for(;;)if(0===e.n)return e.a(2,{elements:t||[],templateData:o||{},config:r||{}})},e)}),function(){var t=this,o=arguments;return new Promise(function(r,n){var a=e.apply(t,o);function i(e){C(a,r,n,i,c,"next",e)}function c(e){C(a,r,n,i,c,"throw",e)}i(void 0)})});return function(e,o,r){return t.apply(this,arguments)}}();var k=S}}]);