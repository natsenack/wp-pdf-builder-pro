/*! For license information please see pdf-builder-admin.js.LICENSE.txt */
(()=>{"use strict";var e,t,o,n={630:(e,t,o)=>{o.d(t,{s:()=>u});var n=o(540);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach(function(t){l(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function l(e,t,o){return(t=function(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return s(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var u=function(e){var t=e.onElementResize,o=e.snapToGrid,r=void 0===o||o,a=e.gridSize,l=void 0===a?10:a,s=e.minWidth,u=void 0===s?20:s,f=e.minHeight,p=void 0===f?20:f,h=e.zoom,m=void 0===h?1:h,g=e.canvasRect,b=void 0===g?null:g,y=e.canvasWidth,v=void 0===y?595:y,x=e.canvasHeight,w=void 0===x?842:x,S=e.guides,z=void 0===S?{horizontal:[],vertical:[]}:S,_=e.snapToGuides,C=void 0===_||_,E=e.elementType,k=void 0===E?null:E,T=c((0,n.useState)(!1),2),O=T[0],B=T[1],W=c((0,n.useState)(null),2),R=W[0],j=W[1],A=(0,n.useRef)({x:0,y:0}),F=(0,n.useRef)({x:0,y:0,width:0,height:0}),M=(0,n.useCallback)(function(e){return r?Math.round(e/l)*l:e},[r,l]),D=(0,n.useCallback)(function(e){if(!C)return e;var t,o=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=d(e))){t&&(e=t);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw r}}}}(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?z.vertical:z.horizontal);try{for(o.s();!(t=o.n()).done;){var n=t.value;if(Math.abs(e-n)<=5)return n}}catch(e){o.e(e)}finally{o.f()}return e},[C,z]),P=(0,n.useCallback)(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=e;return o=M(o),D(o,t)},[M,D]),I=(0,n.useCallback)(function(e,o,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(e.preventDefault(),e.stopPropagation(),e.target&&e.target.isConnected)if(e.target.parentNode&&e.target.parentNode.isConnected){B(!0),j(o);var l=r||b||{left:0,top:0},c=a||m||1;A.current={x:(e.clientX-l.left)/c,y:(e.clientY-l.top)/c},F.current=i({},n);var d=function(e){var n=(e.clientX-l.left)/c,a=(e.clientY-l.top)/c,d=n-A.current.x,s=a-A.current.y,f=i({},F.current),h="divider"===k||"line"===k;switch(o){case"nw":h?(f.x=P(F.current.x+d,!1),f.width=P(F.current.width-d,!1)):(f.x=P(F.current.x+d,!1),f.y=P(F.current.y+s,!0),f.width=P(F.current.width-d,!1),f.height=P(F.current.height-s,!0));break;case"ne":h?f.width=P(F.current.width+d,!1):(f.y=P(F.current.y+s,!0),f.width=P(F.current.width+d,!1),f.height=P(F.current.height-s,!0));break;case"sw":h?(f.x=P(F.current.x+d,!1),f.width=P(F.current.width-d,!1)):(f.x=P(F.current.x+d,!1),f.width=P(F.current.width-d,!1),f.height=P(F.current.height+s,!0));break;case"se":h?f.width=P(F.current.width+d,!1):(f.width=P(F.current.width+d,!1),f.height=P(F.current.height+s,!0));break;case"n":h||(f.y=P(F.current.y+s,!0),f.height=P(F.current.height-s,!0));break;case"s":h||(f.height=P(F.current.height+s,!0));break;case"w":f.x=P(F.current.x+d,!1),f.width=P(F.current.width-d,!1);break;case"e":f.width=P(F.current.width+d,!1)}f.width<u&&(o.includes("w")&&(f.x=F.current.x+F.current.width-u),f.width=u),f.height<p&&(o.includes("n")&&(f.y=F.current.y+F.current.height-p),f.height=p);var m=r?r.width/c:v,g=r?r.height/c:w;f.x=Math.max(0,Math.min(m-f.width,f.x)),f.y=Math.max(0,Math.min(g-f.height,f.y)),t&&t(f)},s=function(){B(!1),j(null),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",s)}else console.warn("Resize handle parent no longer exists in DOM");else console.warn("Resize handle target no longer exists in DOM")},[M,u,p,t,m,b,v,w]);return{isResizing:O,resizeHandle:R,handleResizeStart:I}}},680:(e,t,o)=>{var n={};o.r(n),o.d(n,{useCanvasState:()=>oe,useClipboard:()=>A,useContextMenu:()=>N,useDragAndDrop:()=>v,useHistory:()=>z,useKeyboardShortcuts:()=>ne,useResize:()=>l.s,useRotation:()=>s,useSelection:()=>R,useZoom:()=>D});var r=o(509),a=o(961),i=o(540),l=o(630);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=c((0,i.useState)(!1),2),r=n[0],a=n[1],l=c((0,i.useState)({angle:0,centerX:0,centerY:0}),2),d=l[0],s=l[1],u=(0,i.useCallback)(function(n,i){n.preventDefault(),n.stopPropagation(),a(!0);var l=n.currentTarget.getBoundingClientRect(),c=l.left+l.width/2,u=l.top+l.height/2,f=n.clientX-c,p=n.clientY-u,h=Math.atan2(p,f)*(180/Math.PI);s({angle:h-(i.rotation||0),centerX:c,centerY:u});var m=function(n){if(r){var a=n.clientX-c,i=n.clientY-u,l=Math.atan2(i,a)*(180/Math.PI);l-=d.angle,o&&(l=Math.round(l/t)*t),e(l=(l%360+360)%360)}},g=function(){a(!1),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",g)},[r,d,t,o,e]);return{isRotating:r,handleRotationStart:u}};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach(function(t){h(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function h(e,t,o){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var m=function(e){var t,o,n,a,c,d,u,f,m,g,b,y,v,x,w,S=e.element,z=e.isSelected,_=e.zoom,C=e.snapToGrid,E=e.gridSize,k=e.canvasWidth,T=e.canvasHeight,O=e.onSelect,B=e.onUpdate,W=(e.onRemove,e.onContextMenu),R=e.dragAndDrop,j=e.enableRotation,A=void 0===j||j,F=e.rotationStep,M=void 0===F?15:F,D=e.rotationSnap,P=void 0===D||D,I=e.guides,N=void 0===I?{horizontal:[],vertical:[]}:I,H=e.snapToGuides,G=void 0===H||H,L=(0,i.useRef)(null),Z=(0,i.useRef)(null);(0,i.useEffect)(function(){S&&S.id&&(S.x,S.y,S.width,S.height)},[S.x,S.y,S.width,S.height,_,S.id,S.type]);var U,q,X,Y,V,K,$,J,Q,ee,te,oe,ne,re,ae,ie,le,ce,de,se,ue,fe,pe,he,me,ge,be,ye,ve,xe,we,Se,ze,_e,Ce,Ee,ke,Te,Oe,Be=(0,l.s)({onElementResize:function(e){B({x:e.x,y:e.y,width:e.width,height:e.height})},snapToGrid:C,gridSize:E,canvasWidth:k,canvasHeight:T,guides:N,snapToGuides:G,elementType:S.type}),We=s(function(e){B({rotation:e})},M,P),Re=(0,i.useCallback)(function(e){if(e.stopPropagation(),z){var t=L.current.closest(".canvas-zoom-wrapper");if(t){var o=t.getBoundingClientRect(),n=L.current.getBoundingClientRect(),r=(n.left,o.left,n.top,o.top,n.width,n.height,(e.clientX-o.left)/_),a=(e.clientY-o.top)/_,i=8/_,l=S.x,c=S.y,d=S.x+S.width,s=S.y+S.height,u=[{name:"nw",x:l,y:c},{name:"ne",x:d,y:c},{name:"sw",x:l,y:s},{name:"se",x:d,y:s},{name:"n",x:l+S.width/2,y:c},{name:"s",x:l+S.width/2,y:s},{name:"w",x:l,y:c+S.height/2},{name:"e",x:d,y:c+S.height/2}].find(function(e){return r>=e.x-i/2&&r<=e.x+i/2&&a>=e.y-i/2&&a<=e.y+i/2});if(u){var f=L.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();Be.handleResizeStart(e,u.name,{x:S.x,y:S.y,width:S.width,height:S.height},f,_)}else{var p=L.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();Z.current=p,R.handleMouseDown(e,S.id,{left:S.x,top:S.y,width:S.width,height:S.height},p,_,S.type)}}}else O()},[z,O,S,_,Be,R]),je=(0,i.useCallback)(function(e){if(e.stopPropagation(),"text"===S.type){var t=S.content||S.text||"",o=prompt("Modifier le texte:",t);if(null===o)return;var n=h({},void 0!==S.content?"content":"text",o);B(n)}},[S,B]),Ae=(0,i.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),W&&W(e,S.id)},[W,S.id]),Fe=S.padding||0,Me=useMemo(function(){return p(p({position:"absolute",left:(S.x+Fe)*_,top:(S.y+Fe)*_,width:Math.max(1,S.width-2*Fe)*_,height:Math.max(1,S.height-2*Fe)*_,cursor:R.isDragging?"grabbing":"grab",userSelect:"none","--selection-border-width":"2px","--selection-border-color":"#3b82f6","--selection-border-spacing":"2px","--selection-shadow-opacity":"0.1","--show-resize-handles":z?"block":"none","--resize-handle-size":"".concat(10*_,"px"),"--resize-handle-color":"#3b82f6","--resize-handle-border-color":"white","--resize-handle-offset":"".concat(-5*_,"px"),"--element-border-width":"2px","--resize-zone-size":"16px","--show-resize-zones":z?"auto":"none"},(e=S.type,["product_table","customer_info","company_logo","company_info","order_number","document_type","progress-bar"].includes(e)?function(e){return p({backgroundColor:"transparent",boxSizing:"border-box"},e.borderWidth&&e.borderWidth>0?{border:"".concat(e.borderWidth*_,"px ").concat(e.borderStyle||"solid"," ").concat(e.borderColor||"#e5e7eb")}:{})}(S):{backgroundColor:S.backgroundOpacity&&S.backgroundColor&&"transparent"!==S.backgroundColor?S.backgroundColor+Math.round(255*S.backgroundOpacity).toString(16).padStart(2,"0"):S.backgroundColor||"transparent",border:S.borderWidth?"".concat(S.borderWidth*_,"px ").concat(S.borderStyle||"solid"," ").concat(S.borderColor||"transparent"):"none"})),{},{borderRadius:S.borderRadius?"".concat(S.borderRadius*_,"px"):"0px",opacity:(S.opacity||100)/100,transform:"".concat(R.draggedElementId===S.id?"translate(".concat(R.dragOffset.x*_,"px, ").concat(R.dragOffset.y*_,"px) "):"","rotate(").concat(S.rotation||0,"deg) scale(").concat(S.scale||100,"%)"),filter:"brightness(".concat(S.brightness||100,"%) contrast(").concat(S.contrast||100,"%) saturate(").concat(S.saturate||100,"%)"),boxShadow:S.boxShadowColor?"0px ".concat(S.boxShadowSpread||0,"px ").concat(S.boxShadowBlur||0,"px ").concat(S.boxShadowColor):S.shadow?"".concat(S.shadowOffsetX||2,"px ").concat(S.shadowOffsetY||2,"px 4px ").concat(S.shadowColor||"#000000","40"):"none"},function(e,t){switch(e.type){case"text":return{fontSize:(e.fontSize||14)*t,fontFamily:e.fontFamily||"Arial",color:e.color||"#1e293b",fontWeight:e.fontWeight||"normal",fontStyle:e.fontStyle||"normal",textAlign:e.textAlign||"left",textDecoration:e.textDecoration||"none",lineHeight:e.lineHeight||"normal",display:"flex",alignItems:"center",justifyContent:"center"===e.textAlign?"center":"right"===e.textAlign?"flex-end":"flex-start",wordBreak:"break-word",overflow:"hidden"};case"rectangle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius,"px"):"0"};case"image":return e.src||e.imageUrl?{backgroundImage:"url(".concat(e.src||e.imageUrl,")"),backgroundSize:e.objectFit||e.fit||"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{backgroundColor:e.backgroundColor||"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",fontSize:12*t};case"line":return{borderTop:"".concat(e.lineWidth||1,"px solid ").concat(e.lineColor||"#6b7280"),height:"".concat(Math.max(e.lineWidth||1,12),"px"),width:"100%",cursor:"pointer",backgroundColor:"transparent"};case"layout-header":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14*t,fontWeight:"bold",color:e.color||"#64748b"};case"layout-footer":case"layout-sidebar":case"layout-section":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#64748b"};case"layout-container":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#94a3b8"};case"shape-rectangle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"0"};case"shape-circle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:"50%"};case"shape-line":return{backgroundColor:e.backgroundColor||"transparent",height:"100%"};case"shape-arrow":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(0% 50%, 70% 0%, 70% 40%, 100% 40%, 100% 60%, 70% 60%, 70% 100%)"};case"shape-triangle":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"};case"shape-star":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"};case"divider":return{backgroundColor:e.backgroundColor||"#e5e7eb",height:"16px",cursor:"pointer",borderRadius:"2px"};case"line":return{backgroundColor:e.backgroundColor||"#64748b",height:"12px",cursor:"pointer"};default:return{backgroundColor:e.backgroundColor||"transparent",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#333333"}}}(S,_));var e},[S.x,S.y,S.width,S.height,S.rotation,S.scale,S.backgroundColor,S.backgroundOpacity,S.borderWidth,S.borderStyle,S.borderColor,S.borderRadius,S.opacity,S.brightness,S.contrast,S.saturate,S.boxShadowColor,S.boxShadowSpread,S.boxShadowBlur,S.shadow,S.shadowOffsetX,S.shadowOffsetY,S.shadowColor,S.type,Fe,_,z,R.isDragging,R.draggedElementId,R.dragOffset]);return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{ref:L,"data-element-id":S.id,className:"canvas-element ".concat(z?"selected":""),style:Me,onMouseDown:Re,onDoubleClick:je,onContextMenu:Ae,draggable:!1},"text"===S.type?S.content||S.text||"Texte":"product_table"===S.type?null:"image"!==S.type||S.src?"line"===S.type?null:"layout-header"===S.type?"[H] En-tÃªte":"layout-footer"===S.type?"ðŸ“„ Pied de Page":"layout-sidebar"===S.type?"ðŸ“„ Barre LatÃ©rale":"layout-section"===S.type?"ðŸ“„ Section":"layout-container"===S.type?"ðŸ“¦ Conteneur":"shape-rectangle"===S.type?"â–­":"shape-circle"===S.type?"â—‹":"shape-line"===S.type?null:"shape-arrow"===S.type?"â†’":"shape-triangle"===S.type?"â–³":"shape-star"===S.type?"â­":"divider"===S.type?null:"image-upload"===S.type?"ðŸ“¤ TÃ©lÃ©charger":"logo"===S.type?"ðŸ·ï¸ Logo":"barcode"===S.type?"ðŸ“Š 123456":"qrcode"===S.type||"qrcode-dynamic"===S.type?"ðŸ“± QR":"icon"===S.type?S.content||"ðŸŽ¯":"dynamic-text"===S.type?S.content||"{{variable}}":"formula"===S.type?S.content||"{{prix * quantite}}":"conditional-text"===S.type?S.content||'{{condition ? "Oui" : "Non"}}':"counter"===S.type?S.content||"1":"date-dynamic"===S.type?S.content||"{{date|format:Y-m-d}}":"currency"===S.type?S.content||"{{montant|currency:EUR}}":"table-dynamic"===S.type?"ðŸ“Š Tableau":"gradient-box"===S.type?"ðŸŒˆ DÃ©gradÃ©":"shadow-box"===S.type?"ðŸ“¦ Ombre":"rounded-box"===S.type?"ðŸ”„ Arrondi":"border-box"===S.type?"ðŸ”² Bordure":"background-pattern"===S.type?"ðŸŽ¨ Motif":"watermark"===S.type?S.content||"CONFIDENTIEL":"progress-bar"===S.type||"product_table"===S.type||"customer_info"===S.type?null:"image"!==S.type&&"rectangle"!==S.type&&"company_logo"!==S.type&&"order_number"!==S.type&&"company_info"!==S.type&&"document_type"!==S.type?S.type:null:"ðŸ“· Image","product_table"===S.type&&(Ee=(Se=[{name:"Produit A - Description du produit",sku:"SKU001",quantity:2,price:19.99,total:39.98},{name:"Produit B - Un autre article",sku:"SKU002",quantity:1,price:29.99,total:29.99}].reduce(function(e,t){return e+t.total},0))+(ze=S.showShipping?5:0)+(_e=S.showTaxes?2.25:0)+(Ce=S.showDiscount?-5:0),ke=function(){for(var e=["image","name","sku","quantity","price","total"],t=e.length-1;t>=0;t--){var o;if(!1!==(null===(o=S.columns)||void 0===o?void 0:o[e[t]]))return e[t]}return"total"}(),Te=function(){var e={default:{headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#000000",altRowBg:"#fafbfc",borderWidth:2,headerTextColor:"#334155",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderRadius:"4px"},classic:{headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#334155",altRowBg:"#ffffff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e293b",headerFontWeight:"700",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(0, 0, 0, 0.15)",borderRadius:"0px"},striped:{headerBg:"#3b82f6",headerBorder:"#2563eb",rowBorder:"#e2e8f0",altRowBg:"#f8fafc",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 4px rgba(59, 130, 246, 0.2)",borderRadius:"6px"},bordered:{headerBg:"#ffffff",headerBorder:"#374151",rowBorder:"#d1d5db",altRowBg:"#ffffff",borderWidth:2,headerTextColor:"#111827",rowTextColor:"#111827",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 12px rgba(0, 0, 0, 0.1), inset 0 0 0 1px #e5e7eb",borderRadius:"8px"},minimal:{headerBg:"#ffffff",headerBorder:"#d1d5db",rowBorder:"#f3f4f6",altRowBg:"#ffffff",borderWidth:.5,headerTextColor:"#6b7280",rowTextColor:"#6b7280",headerFontWeight:"500",headerFontSize:"10px",rowFontSize:"9px",shadow:"none",borderRadius:"0px"},modern:{headerBg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",headerBorder:"#5b21b6",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#6b21a8",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 20px rgba(102, 126, 234, 0.25)",borderRadius:"8px"},blue_ocean:{headerBg:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e3a8a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(59, 130, 246, 0.3)",borderRadius:"6px"},emerald_forest:{headerBg:"linear-gradient(135deg, #064e3b 0%, #10b981 100%)",headerBorder:"#065f46",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#064e3b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(16, 185, 129, 0.3)",borderRadius:"6px"},sunset_orange:{headerBg:"linear-gradient(135deg, #9a3412 0%, #f97316 100%)",headerBorder:"#c2410c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(249, 115, 22, 0.3)",borderRadius:"6px"},royal_purple:{headerBg:"linear-gradient(135deg, #581c87 0%, #a855f7 100%)",headerBorder:"#7c3aed",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#581c87",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(168, 85, 247, 0.3)",borderRadius:"6px"},rose_pink:{headerBg:"linear-gradient(135deg, #be185d 0%, #f472b6 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#be185d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(244, 114, 182, 0.3)",borderRadius:"6px"},teal_aqua:{headerBg:"linear-gradient(135deg, #0f766e 0%, #14b8a6 100%)",headerBorder:"#0d9488",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#0f766e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(20, 184, 166, 0.3)",borderRadius:"6px"},crimson_red:{headerBg:"linear-gradient(135deg, #991b1b 0%, #ef4444 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#991b1b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(239, 68, 68, 0.3)",borderRadius:"6px"},amber_gold:{headerBg:"linear-gradient(135deg, #92400e 0%, #f59e0b 100%)",headerBorder:"#d97706",rowBorder:"#fef3c7",altRowBg:"#fffbeb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#92400e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(245, 158, 11, 0.3)",borderRadius:"6px"},indigo_night:{headerBg:"linear-gradient(135deg, #312e81 0%, #6366f1 100%)",headerBorder:"#4338ca",rowBorder:"#e0e7ff",altRowBg:"#eef2ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#312e81",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(99, 102, 241, 0.3)",borderRadius:"6px"},slate_gray:{headerBg:"linear-gradient(135deg, #374151 0%, #6b7280 100%)",headerBorder:"#4b5563",rowBorder:"#f3f4f6",altRowBg:"#f9fafb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(107, 114, 128, 0.3)",borderRadius:"6px"},coral_sunset:{headerBg:"linear-gradient(135deg, #c2410c 0%, #fb7185 100%)",headerBorder:"#ea580c",rowBorder:"#fed7d7",altRowBg:"#fef7f7",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#c2410c",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 113, 133, 0.3)",borderRadius:"6px"},mint_green:{headerBg:"linear-gradient(135deg, #065f46 0%, #34d399 100%)",headerBorder:"#047857",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#065f46",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(52, 211, 153, 0.3)",borderRadius:"6px"},violet_dream:{headerBg:"linear-gradient(135deg, #6d28d9 0%, #c084fc 100%)",headerBorder:"#8b5cf6",rowBorder:"#ede9fe",altRowBg:"#f5f3ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#6d28d9",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(192, 132, 252, 0.3)",borderRadius:"6px"},sky_blue:{headerBg:"linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%)",headerBorder:"#0284c7",rowBorder:"#bae6fd",altRowBg:"#f0f9ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#0369a1",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(14, 165, 233, 0.3)",borderRadius:"6px"},forest_green:{headerBg:"linear-gradient(135deg, #14532d 0%, #22c55e 100%)",headerBorder:"#15803d",rowBorder:"#bbf7d0",altRowBg:"#f0fdf4",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#14532d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(34, 197, 94, 0.3)",borderRadius:"6px"},ruby_red:{headerBg:"linear-gradient(135deg, #b91c1b 0%, #f87171 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#b91c1b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(248, 113, 113, 0.3)",borderRadius:"6px"},golden_yellow:{headerBg:"linear-gradient(135deg, #a16207 0%, #eab308 100%)",headerBorder:"#ca8a04",rowBorder:"#fef08a",altRowBg:"#fefce8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#a16207",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(234, 179, 8, 0.3)",borderRadius:"6px"},navy_blue:{headerBg:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e3a8a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(59, 130, 246, 0.3)",borderRadius:"6px"},burgundy_wine:{headerBg:"linear-gradient(135deg, #7f1d1d 0%, #dc2626 100%)",headerBorder:"#991b1b",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#7f1d1d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(220, 38, 38, 0.3)",borderRadius:"6px"},lavender_purple:{headerBg:"linear-gradient(135deg, #7c2d12 0%, #a855f7 100%)",headerBorder:"#9333ea",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#7c2d12",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(168, 85, 247, 0.3)",borderRadius:"6px"},ocean_teal:{headerBg:"linear-gradient(135deg, #134e4a 0%, #14b8a6 100%)",headerBorder:"#0f766e",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#134e4a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(20, 184, 166, 0.3)",borderRadius:"6px"},cherry_blossom:{headerBg:"linear-gradient(135deg, #be185d 0%, #fb7185 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#be185d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 113, 133, 0.3)",borderRadius:"6px"},autumn_orange:{headerBg:"linear-gradient(135deg, #9a3412 0%, #fb923c 100%)",headerBorder:"#ea580c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 146, 60, 0.3)",borderRadius:"6px"}};return e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]||e.default}(S.tableStyle),Oe=!1!==S.showBorders,r.default.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",fontSize:10*_,fontFamily:'"Inter", "Segoe UI", Roboto, -apple-system, BlinkMacSystemFont, sans-serif',border:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.headerBorder):S.borderWidth&&S.borderWidth>0?"".concat(Math.max(1,S.borderWidth*_*.5),"px solid ").concat(S.borderColor||"#e5e7eb"):"none",borderRadius:Te.borderRadius?"".concat(Te.borderRadius*_,"px"):"2px",overflow:"hidden",backgroundColor:S.backgroundColor||"transparent",boxSizing:"border-box",boxShadow:Te.shadow,lineHeight:"1.4",color:Te.rowTextColor}},!1!==S.showHeaders&&r.default.createElement("div",{style:{display:"flex",background:Te.headerBg,borderBottom:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.headerBorder):"none",fontWeight:Te.headerFontWeight,color:Te.headerTextColor,fontSize:"".concat(Te.headerFontSize*_,"px"),textTransform:"uppercase",letterSpacing:"0.025em"}},!1!==(null===(U=S.columns)||void 0===U?void 0:U.image)&&r.default.createElement("div",{key:"header-image",style:{flex:"0 0 40px",padding:"".concat(6*_,"px ").concat(4*_,"px"),textAlign:"center",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.headerBorder):"none",fontSize:"".concat(Te.headerFontSize*_*.9,"px"),opacity:.9}},"Img"),!1!==(null===(q=S.columns)||void 0===q?void 0:q.name)&&r.default.createElement("div",{key:"header-name",style:{flex:1,padding:"".concat(6*_,"px ").concat(8*_,"px"),textAlign:"left",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.headerBorder):"none",fontSize:"".concat(Te.headerFontSize*_,"px")}},"Produit"),!1!==(null===(X=S.columns)||void 0===X?void 0:X.sku)&&r.default.createElement("div",{key:"header-sku",style:{flex:"0 0 80px",padding:"".concat(6*_,"px ").concat(8*_,"px"),textAlign:"left",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.headerBorder):"none",fontSize:"".concat(Te.headerFontSize*_,"px")}},"SKU"),!1!==(null===(Y=S.columns)||void 0===Y?void 0:Y.quantity)&&r.default.createElement("div",{key:"header-quantity",style:{flex:"0 0 60px",padding:"".concat(6*_,"px ").concat(8*_,"px"),textAlign:"center",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.headerBorder):"none",fontSize:"".concat(Te.headerFontSize*_,"px")}},"QtÃ©"),!1!==(null===(V=S.columns)||void 0===V?void 0:V.price)&&r.default.createElement("div",{key:"header-price",style:{flex:"0 0 80px",padding:"".concat(6*_,"px ").concat(8*_,"px"),textAlign:"right",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.headerBorder):"none",fontSize:"".concat(Te.headerFontSize*_,"px")}},"Prix"),!1!==(null===(K=S.columns)||void 0===K?void 0:K.total)&&r.default.createElement("div",{key:"header-total",style:{flex:"0 0 80px",padding:"".concat(6*_,"px ").concat(8*_,"px"),textAlign:"right",fontSize:"".concat(Te.headerFontSize*_,"px")}},"Total")),r.default.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},r.default.createElement("div",{key:"row-1",style:{display:"flex",borderBottom:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",backgroundColor:Te.altRowBg,fontSize:"".concat(Te.rowFontSize*_,"px"),transition:"background-color 0.15s ease"}},!1!==(null===($=S.columns)||void 0===$?void 0:$.image)&&r.default.createElement("div",{key:"row-1-image",style:{flex:"0 0 40px",padding:"".concat(5*_,"px ").concat(4*_,"px"),textAlign:"center",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",color:Te.rowTextColor,opacity:.7,fontSize:"".concat(Te.rowFontSize*_*.9,"px")}},"ðŸ“·"),!1!==(null===(J=S.columns)||void 0===J?void 0:J.name)&&r.default.createElement("div",{key:"row-1-name",style:{flex:1,padding:"".concat(5*_,"px ").concat(8*_,"px"),borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",color:Te.rowTextColor,fontWeight:"500",lineHeight:"1.3"}},"Produit A - Description du produit"),!1!==(null===(Q=S.columns)||void 0===Q?void 0:Q.sku)&&r.default.createElement("div",{key:"row-1-sku",style:{flex:"0 0 80px",padding:"".concat(5*_,"px ").concat(8*_,"px"),borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",color:Te.rowTextColor,opacity:.8,fontFamily:"monospace",fontSize:"".concat(Te.rowFontSize*_*.9,"px")}},"SKU001"),!1!==(null===(ee=S.columns)||void 0===ee?void 0:ee.quantity)&&r.default.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(5*_,"px ").concat(8*_,"px"),textAlign:"center",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",color:Te.rowTextColor,fontWeight:"600"}},"2"),!1!==(null===(te=S.columns)||void 0===te?void 0:te.price)&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(5*_,"px ").concat(8*_,"px"),textAlign:"right",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",color:Te.rowTextColor,fontWeight:"500",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬19.99"),!1!==(null===(oe=S.columns)||void 0===oe?void 0:oe.total)&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(5*_,"px ").concat(8*_,"px"),textAlign:"right",color:Te.rowTextColor,fontWeight:"600",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬39.98")),r.default.createElement("div",{style:{display:"flex",borderBottom:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(Te.rowFontSize*_,"px"),transition:"background-color 0.15s ease"}},!1!==(null===(ne=S.columns)||void 0===ne?void 0:ne.image)&&r.default.createElement("div",{style:{flex:"0 0 40px",padding:"".concat(5*_,"px ").concat(4*_,"px"),textAlign:"center",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",color:Te.rowTextColor,opacity:.7,fontSize:"".concat(Te.rowFontSize*_*.9,"px")}},"ðŸ“·"),!1!==(null===(re=S.columns)||void 0===re?void 0:re.name)&&r.default.createElement("div",{style:{flex:1,padding:"".concat(5*_,"px ").concat(8*_,"px"),borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",color:Te.rowTextColor,fontWeight:"500",lineHeight:"1.3"}},"Produit B - Un autre article"),!1!==(null===(ae=S.columns)||void 0===ae?void 0:ae.sku)&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(5*_,"px ").concat(8*_,"px"),borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",color:Te.rowTextColor,opacity:.8,fontFamily:"monospace",fontSize:"".concat(Te.rowFontSize*_*.9,"px")}},"SKU002"),!1!==(null===(ie=S.columns)||void 0===ie?void 0:ie.quantity)&&r.default.createElement("div",{key:"row-1-quantity",style:{flex:"0 0 60px",padding:"".concat(5*_,"px ").concat(8*_,"px"),textAlign:"center",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",color:Te.rowTextColor,fontWeight:"600"}},"1"),!1!==(null===(le=S.columns)||void 0===le?void 0:le.price)&&r.default.createElement("div",{key:"row-1-price",style:{flex:"0 0 80px",padding:"".concat(5*_,"px ").concat(8*_,"px"),textAlign:"right",borderRight:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",color:Te.rowTextColor,fontWeight:"500",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬29.99"),!1!==(null===(ce=S.columns)||void 0===ce?void 0:ce.total)&&r.default.createElement("div",{key:"row-1-total",style:{flex:"0 0 80px",padding:"".concat(5*_,"px ").concat(8*_,"px"),textAlign:"right",color:Te.rowTextColor,fontWeight:"600",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬29.99"))),(S.showSubtotal||S.showShipping||S.showTaxes||S.showDiscount||S.showTotal)&&r.default.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},r.default.createElement("div",{style:{display:"flex",borderTop:Oe?"".concat(2*Te.borderWidth*_,"px solid ").concat(Te.headerBorder):"none",marginTop:"".concat(10*_,"px"),paddingTop:"".concat(10*_,"px"),fontSize:"".concat(Te.rowFontSize*_,"px")}},r.default.createElement("div",{style:{flex:1,padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right",fontWeight:"bold",color:S.color||"#666"}}),!1!==(null===(de=S.columns)||void 0===de?void 0:de.quantity)&&r.default.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"center"}}),!1!==(null===(se=S.columns)||void 0===se?void 0:se.price)&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right",fontWeight:"bold",color:S.color||"#666"}}),!1!==(null===(ue=S.columns)||void 0===ue?void 0:ue.total)&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right",fontWeight:"bold",color:S.color||"#666"}},"Total")),S.showSubtotal&&r.default.createElement("div",{style:{display:"flex",borderBottom:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",backgroundColor:Te.altRowBg,fontSize:"".concat(Te.rowFontSize*_,"px")}},r.default.createElement("div",{style:{flex:1,padding:"".concat(5*_,"px ").concat(8*_,"px"),textAlign:"right",color:Te.rowTextColor,fontWeight:"600"}},"Sous-total"),!1!==(null===(fe=S.columns)||void 0===fe?void 0:fe.quantity)&&r.default.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"center"}}),!1!==(null===(pe=S.columns)||void 0===pe?void 0:pe.price)&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right"}}),"total"===ke&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right",fontWeight:"bold"}},"â‚¬",Se.toFixed(2))),S.showShipping&&r.default.createElement("div",{style:{display:"flex",borderBottom:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(Te.rowFontSize*_,"px")}},r.default.createElement("div",{style:{flex:1,padding:"".concat(5*_,"px ").concat(8*_,"px"),textAlign:"right",color:Te.rowTextColor,fontWeight:"500"}},"Frais de port"),!1!==(null===(he=S.columns)||void 0===he?void 0:he.quantity)&&r.default.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"center"}}),!1!==(null===(me=S.columns)||void 0===me?void 0:me.price)&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right"}}),"total"===ke&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right"}},"â‚¬",ze.toFixed(2))),S.showTaxes&&r.default.createElement("div",{style:{display:"flex",borderBottom:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(Te.rowFontSize*_,"px")}},r.default.createElement("div",{style:{flex:1,padding:"".concat(5*_,"px ").concat(8*_,"px"),textAlign:"right",color:Te.rowTextColor,fontWeight:"500"}},"Taxes (TVA 20%)"),!1!==(null===(ge=S.columns)||void 0===ge?void 0:ge.quantity)&&r.default.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"center"}}),!1!==(null===(be=S.columns)||void 0===be?void 0:be.price)&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right"}}),"total"===ke&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right"}},"â‚¬",_e.toFixed(2))),S.showDiscount&&r.default.createElement("div",{style:{display:"flex",borderBottom:Oe?"".concat(Te.borderWidth*_,"px solid ").concat(Te.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(Te.rowFontSize*_,"px")}},r.default.createElement("div",{style:{flex:1,padding:"".concat(5*_,"px ").concat(8*_,"px"),textAlign:"right",color:"#dc3545",fontWeight:"500"}},"Remise"),!1!==(null===(ye=S.columns)||void 0===ye?void 0:ye.quantity)&&r.default.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"center"}}),!1!==(null===(ve=S.columns)||void 0===ve?void 0:ve.price)&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right"}}),"total"===ke&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*_,"px ").concat(6*_,"px"),textAlign:"right",color:"#d32f2f"}},"â‚¬",Ce.toFixed(2))),S.showTotal&&r.default.createElement("div",{style:{display:"flex",borderTop:Oe?"".concat(2*Te.borderWidth*_,"px solid ").concat(Te.headerBorder):"none",backgroundColor:Te.headerBg,marginTop:"".concat(6*_,"px"),paddingTop:"".concat(6*_,"px"),color:Te.headerTextColor,fontWeight:Te.headerFontWeight,fontSize:"".concat(Te.headerFontSize*_,"px")}},r.default.createElement("div",{style:{flex:1,padding:"".concat(6*_,"px ").concat(8*_,"px"),textAlign:"right",fontSize:"".concat(Te.headerFontSize*_,"px"),textTransform:"uppercase",letterSpacing:"0.05em"}},"TOTAL TTC"),!1!==(null===(xe=S.columns)||void 0===xe?void 0:xe.quantity)&&r.default.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(6*_,"px ").concat(8*_,"px"),textAlign:"center"}}),!1!==(null===(we=S.columns)||void 0===we?void 0:we.price)&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(6*_,"px ").concat(8*_,"px"),textAlign:"right"}}),"total"===ke&&r.default.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(6*_,"px ").concat(8*_,"px"),textAlign:"right",fontSize:"".concat(Te.headerFontSize*_*1.2,"px"),fontWeight:"700",color:Te.headerTextColor,fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬",Ee.toFixed(2)))))),"customer_info"===S.type&&r.default.createElement("div",{style:{width:"100%",height:"100%",padding:"".concat(8*_,"px"),fontSize:"".concat((S.fontSize||12)*_,"px"),fontFamily:S.fontFamily||"Arial, sans-serif",fontWeight:S.fontWeight||"normal",fontStyle:S.fontStyle||"normal",textDecoration:S.textDecoration||"none",color:S.color||"#333",backgroundColor:S.backgroundColor||"transparent",border:S.borderWidth&&S.borderWidth>0?"".concat(Math.max(1,S.borderWidth*_*.5),"px solid ").concat(S.borderColor||"#e5e7eb"):"none",borderRadius:S.borderRadius?"".concat(S.borderRadius*_,"px"):"2px",boxSizing:"border-box"}},r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"row":"column",gap:"".concat(S.spacing*_||8*_,"px"),height:"100%"}},(null===(t=S.fields)||void 0===t?void 0:t.includes("name"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"Nom :"),r.default.createElement("div",{style:{fontWeight:"bold",color:S.color||"#333"}},"Jean Dupont")),(null===(o=S.fields)||void 0===o?void 0:o.includes("email"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"Email :"),r.default.createElement("div",{style:{color:"#1976d2"}},"jean.dupont@email.com")),(null===(n=S.fields)||void 0===n?void 0:n.includes("phone"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"TÃ©lÃ©phone :"),r.default.createElement("div",{style:{color:S.color||"#333"}},"+33 6 12 34 56 78")),(null===(a=S.fields)||void 0===a?void 0:a.includes("address"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"Adresse :"),r.default.createElement("div",{style:{color:S.color||"#333",lineHeight:"1.4"}},"123 Rue de la Paix",r.default.createElement("br",null),"75001 Paris",r.default.createElement("br",null),"France")),(null===(c=S.fields)||void 0===c?void 0:c.includes("company"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"SociÃ©tÃ© :"),r.default.createElement("div",{style:{fontWeight:"bold",color:S.color||"#333"}},"ABC Company SARL")),(null===(d=S.fields)||void 0===d?void 0:d.includes("vat"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"NÂ° TVA :"),r.default.createElement("div",{style:{color:S.color||"#333"}},"FR 12 345 678 901")),(null===(u=S.fields)||void 0===u?void 0:u.includes("siret"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"SIRET :"),r.default.createElement("div",{style:{color:S.color||"#333"}},"123 456 789 00012")))),"company_logo"===S.type&&r.default.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"===S.alignment?"center":"right"===S.alignment?"flex-end":"flex-start",padding:"8px",backgroundColor:S.backgroundColor||"transparent",border:S.borderWidth&&S.borderWidth>0?"".concat(Math.max(1,S.borderWidth*_*.5),"px solid ").concat(S.borderColor||"#e5e7eb"):"none",borderRadius:S.borderRadius?"".concat(S.borderRadius*_,"px"):"2px",boxSizing:"border-box"}},S.imageUrl?r.default.createElement("img",{src:S.imageUrl,alt:"Logo entreprise",style:{width:"".concat(S.width||150,"px"),height:"".concat(S.height||80,"px"),objectFit:S.fit||"contain",borderRadius:S.borderRadius||0,border:S.borderWidth?"".concat(S.borderWidth,"px ").concat(S.borderStyle||"solid"," ").concat(S.borderColor||"transparent"):S.showBorder?"1px solid transparent":"none"}}):r.default.createElement("div",{style:{width:"".concat(S.width||150,"px"),height:"".concat(S.height||80,"px"),backgroundColor:"#f5f5f5",border:S.borderWidth?"".concat(S.borderWidth,"px ").concat(S.borderStyle||"solid"," ").concat(S.borderColor||"transparent"):S.showBorder?"1px solid transparent":"none",borderRadius:S.borderRadius||"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"".concat(12*_,"px")}},"ðŸ¢ Logo")),"company_info"===S.type&&r.default.createElement("div",{style:{width:"100%",height:"100%",padding:"".concat(8*_,"px"),fontSize:"".concat((S.fontSize||12)*_,"px"),fontFamily:S.fontFamily||"Arial, sans-serif",fontWeight:S.fontWeight||"normal",fontStyle:S.fontStyle||"normal",textDecoration:S.textDecoration||"none",color:S.color||"#333",backgroundColor:S.backgroundColor||"transparent",border:S.borderWidth&&S.borderWidth>0?"".concat(Math.max(1,S.borderWidth*_*.5),"px solid ").concat(S.borderColor||"#e5e7eb"):"none",borderRadius:S.borderRadius?"".concat(S.borderRadius*_,"px"):"2px",boxSizing:"border-box"}},r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"row":"column",gap:"".concat(S.spacing*_||8*_,"px"),height:"100%"}},(null===(f=S.fields)||void 0===f?void 0:f.includes("name"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"Nom :"),r.default.createElement("div",{style:{fontWeight:"bold",color:S.color||"#333"}},"Ma SociÃ©tÃ© SARL")),(null===(m=S.fields)||void 0===m?void 0:m.includes("address"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"Adresse :"),r.default.createElement("div",{style:{color:S.color||"#333",lineHeight:"1.4"}},"123 Rue de l'Entreprise",r.default.createElement("br",null),"75001 Paris",r.default.createElement("br",null),"France")),(null===(g=S.fields)||void 0===g?void 0:g.includes("phone"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"TÃ©lÃ©phone :"),r.default.createElement("div",{style:{color:S.color||"#333"}},"+33 1 23 45 67 89")),(null===(b=S.fields)||void 0===b?void 0:b.includes("email"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"Email :"),r.default.createElement("div",{style:{color:"#1976d2"}},"contact@masociete.com")),(null===(y=S.fields)||void 0===y?void 0:y.includes("website"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"Site web :"),r.default.createElement("div",{style:{color:"#1976d2"}},"www.masociete.com")),(null===(v=S.fields)||void 0===v?void 0:v.includes("vat"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"NÂ° TVA :"),r.default.createElement("div",{style:{color:S.color||"#333"}},"FR 12 345 678 901")),(null===(x=S.fields)||void 0===x?void 0:x.includes("rcs"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:(S.labelStyle,"bold"),textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"RCS :"),r.default.createElement("div",{style:{color:S.color||"#333"}},"Paris B 123 456 789")),(null===(w=S.fields)||void 0===w?void 0:w.includes("siret"))&&r.default.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===S.layout?"column":"row",alignItems:"horizontal"===S.layout?"flex-start":"center",gap:"".concat(4*_,"px"),flex:"horizontal"===S.layout?"1":"none"}},S.showLabels&&r.default.createElement("div",{style:{fontWeight:"bold"===S.labelStyle?"bold":"normal",textTransform:"uppercase"===S.labelStyle?"uppercase":"none",color:S.color||"#666",minWidth:"horizontal"===S.layout?"auto":"80px",fontSize:"".concat(11*_,"px")}},"SIRET :"),r.default.createElement("div",{style:{color:S.color||"#333"}},"123 456 789 00012")))),"order_number"===S.type&&r.default.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"===S.textAlign?"center":"right"===S.textAlign?"flex-end":"flex-start",padding:"".concat(8*_,"px"),fontSize:"".concat((S.fontSize||14)*_,"px"),fontFamily:S.fontFamily||"Arial",fontWeight:S.fontWeight||"bold",color:S.color||"#333333",textAlign:S.textAlign||"right",backgroundColor:S.backgroundColor||"transparent",border:S.borderWidth&&S.borderWidth>0?"".concat(Math.max(1,S.borderWidth*_*.5),"px solid ").concat(S.borderColor||"#e5e7eb"):"none",borderRadius:S.borderRadius?"".concat(S.borderRadius*_,"px"):"2px",boxSizing:"border-box"}},S.showLabel&&r.default.createElement("div",{style:{fontSize:"".concat(12*_,"px"),fontWeight:"normal",color:S.color||"#666",marginBottom:"".concat(4*_,"px")}},S.labelText||"NÂ° de commande:"),r.default.createElement("div",null,(S.format||"Commande #{order_number} - {order_date}").replace(/{order_number}/g,"12345").replace(/{order_date}/g,"15/10/2025"))),"document_type"===S.type&&r.default.createElement("div",{style:{display:"inline-block",padding:"".concat(8*_,"px"),fontSize:"".concat((S.fontSize||18)*_,"px"),fontFamily:S.fontFamily||"Arial",fontWeight:S.fontWeight||"bold",color:S.color||"#1e293b",textAlign:S.textAlign||"center",backgroundColor:S.backgroundColor||"transparent",border:S.borderWidth&&S.borderWidth>0?"".concat(Math.max(1,S.borderWidth*_*.5),"px solid ").concat(S.borderColor||"#e5e7eb"):"none",borderRadius:S.borderRadius?"".concat(S.borderRadius*_,"px"):"4px",whiteSpace:"nowrap",boxSizing:"border-box"}},"invoice"===S.documentType?"FACTURE":"quote"===S.documentType?"DEVIS":"receipt"===S.documentType?"REÃ‡U":"order"===S.documentType?"COMMANDE":"credit_note"===S.documentType?"AVOIR":"DOCUMENT"),z&&r.default.createElement(r.default.Fragment,null,"line"!==S.type&&"divider"!==S.type&&r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{key:"resize-handle-nw-".concat(S.id),className:"resize-handle nw",onMouseDown:function(e){var t,o=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=o?o.getBoundingClientRect():null;Be.handleResizeStart(e,"nw",{x:S.x,y:S.y,width:S.width,height:S.height},n,_)},onContextMenu:Ae}),r.default.createElement("div",{key:"resize-handle-ne-".concat(S.id),className:"resize-handle ne",onMouseDown:function(e){var t,o=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=o?o.getBoundingClientRect():null;Be.handleResizeStart(e,"ne",{x:S.x,y:S.y,width:S.width,height:S.height},n,_)},onContextMenu:Ae}),r.default.createElement("div",{key:"resize-handle-sw-".concat(S.id),className:"resize-handle sw",onMouseDown:function(e){var t,o=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=o?o.getBoundingClientRect():null;Be.handleResizeStart(e,"sw",{x:S.x,y:S.y,width:S.width,height:S.height},n,_)},onContextMenu:Ae})),r.default.createElement("div",{key:"resize-handle-se-".concat(S.id),className:"resize-handle se",onMouseDown:function(e){var t,o=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=o?o.getBoundingClientRect():null;Be.handleResizeStart(e,"se",{x:S.x,y:S.y,width:S.width,height:S.height},n,_)},onContextMenu:Ae}),"line"!==S.type&&"divider"!==S.type&&r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{key:"resize-handle-n-".concat(S.id),className:"resize-handle n",onMouseDown:function(e){var t,o=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=o?o.getBoundingClientRect():null;Be.handleResizeStart(e,"n",{x:S.x,y:S.y,width:S.width,height:S.height},n,_)},onContextMenu:Ae}),r.default.createElement("div",{key:"resize-handle-s-".concat(S.id),className:"resize-handle s",onMouseDown:function(e){var t,o=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=o?o.getBoundingClientRect():null;Be.handleResizeStart(e,"s",{x:S.x,y:S.y,width:S.width,height:S.height},n,_)},onContextMenu:Ae})),r.default.createElement("div",{key:"resize-handle-w-".concat(S.id),className:"resize-handle w",onMouseDown:function(e){var t,o=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=o?o.getBoundingClientRect():null;Be.handleResizeStart(e,"w",{x:S.x,y:S.y,width:S.width,height:S.height},n,_)},onContextMenu:Ae}),r.default.createElement("div",{key:"resize-handle-e-".concat(S.id),className:"resize-handle e",onMouseDown:function(e){var t,o=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=o?o.getBoundingClientRect():null;Be.handleResizeStart(e,"e",{x:S.x,y:S.y,width:S.width,height:S.height},n,_)},onContextMenu:Ae}),"line"!==S.type&&"divider"!==S.type&&r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{key:"resize-zone-n-".concat(S.id),className:"resize-zone resize-zone-n",onMouseDown:function(e){return Be.handleResizeStart(e,"n",{x:S.x,y:S.y,width:S.width,height:S.height})}}),r.default.createElement("div",{key:"resize-zone-s-".concat(S.id),className:"resize-zone resize-zone-s",onMouseDown:function(e){return Be.handleResizeStart(e,"s",{x:S.x,y:S.y,width:S.width,height:S.height})}})),r.default.createElement("div",{key:"resize-zone-w-".concat(S.id),className:"resize-zone resize-zone-w",onMouseDown:function(e){return Be.handleResizeStart(e,"w",{x:S.x,y:S.y,width:S.width,height:S.height})}}),r.default.createElement("div",{key:"resize-zone-e-".concat(S.id),className:"resize-zone resize-zone-e",onMouseDown:function(e){return Be.handleResizeStart(e,"e",{x:S.x,y:S.y,width:S.width,height:S.height})}})),z&&A&&r.default.createElement("div",{key:"rotation-handle-".concat(S.id),className:"rotation-handle",style:{position:"absolute",top:"".concat(-20*_,"px"),left:"50%",transform:"translateX(-50%)",width:"".concat(12*_,"px"),height:"".concat(12*_,"px"),backgroundColor:"#3b82f6",border:"".concat(2*_,"px solid white"),borderRadius:"50%",cursor:"alias",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseDown:function(e){e.stopPropagation(),We.handleRotationStart(e,S)},title:"Faire pivoter l'Ã©lÃ©ment"})),"progress-bar"===S.type&&r.default.createElement("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:"".concat(S.progressValue||75,"%"),backgroundColor:S.progressColor||"#3b82f6",borderRadius:"10px",transition:"width 0.3s ease",border:S.borderWidth&&S.borderWidth>0?"".concat(Math.max(1,S.borderWidth*_*.5),"px solid ").concat(S.borderColor||"#e5e7eb"):"none",boxSizing:"border-box"}}))};function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return y(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var v=function(e){var t=e.onElementMove,o=e.onElementDrop,n=e.snapToGrid,r=void 0===n||n,a=e.gridSize,l=void 0===a?10:a,c=e.zoom,d=void 0===c?1:c,s=e.canvasWidth,u=void 0===s?595:s,f=e.canvasHeight,p=void 0===f?842:f,h=e.guides,m=void 0===h?{horizontal:[],vertical:[]}:h,y=e.snapToGuides,v=void 0===y||y,x=g((0,i.useState)(!1),2),w=x[0],S=x[1],z=g((0,i.useState)({x:0,y:0}),2),_=z[0],C=z[1],E=g((0,i.useState)(null),2),k=E[0],T=E[1],O=(0,i.useRef)({x:0,y:0}),B=(0,i.useRef)({x:0,y:0}),W=(0,i.useRef)(null),R=(0,i.useRef)({x:0,y:0}),j=(0,i.useCallback)(function(e){return r?Math.round(e/l)*l:e},[r,l]),A=(0,i.useCallback)(function(e){if(!v)return e;var t,o=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=b(e))){t&&(e=t);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,r=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw r}}}}(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?m.vertical:m.horizontal);try{for(o.s();!(t=o.n()).done;){var n=t.value;if(Math.abs(e-n)<=5)return n}}catch(e){o.e(e)}finally{o.f()}return e},[v,m]),F=(0,i.useCallback)(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("line"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)&&!t)return e;var o=e;return o=j(o),A(o,t)},[j,A]);(0,i.useEffect)(function(){return function(){W.current&&(document.removeEventListener("mousemove",W.current.handleMouseMove),document.removeEventListener("mouseup",W.current.handleMouseUp),W.current=null)}},[]);var M=(0,i.useCallback)(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(0===e.button)if(e.target&&e.target.isConnected)if(e.target.parentNode&&e.target.parentNode.isConnected){e.preventDefault(),S(!0),T(t);var l=r||{left:0,top:0,width:u,height:p},c=a||d||1,s=(e.clientX-l.left)/c,f=(e.clientY-l.top)/c;O.current={x:s-n.left,y:f-n.top},B.current={x:n.left,y:n.top};var h=function(e){if(W.current){var t=(e.clientX-l.left)/c,o=(e.clientY-l.top)/c,i=t-s,d=o-f,h=r?r.width/a:u,m=r?r.height/a:p,g=Math.max(0,Math.min(h-n.width,F(n.left+i,!1,y))),b=Math.max(0,Math.min(m-n.height,F(n.top+d,!0,y))),y=W.current.elementType,v={x:g-n.left,y:b-n.top};C(v),R.current=v}else console.warn("Drag data no longer exists during move")},m=function(){if(!W.current)return console.warn("Drag data no longer exists during drop"),S(!1),C({x:0,y:0}),void T(null);var e=W.current,t=e.elementId;if(e.elementType,S(!1),o&&t){var n=B.current.x+R.current.x,r=B.current.y+R.current.y;o(t,{x:n,y:r})}else console.warn("[DEBUG] onElementDrop not called - elementId:",t,"onElementDrop:",!!o);C({x:0,y:0}),T(null),B.current={x:0,y:0},R.current={x:0,y:0},document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",m),W.current=null};W.current={handleMouseMove:h,handleMouseUp:m,elementId:t,elementType:i},document.addEventListener("mousemove",h),document.addEventListener("mouseup",m)}else console.warn("Drag target parent no longer exists in DOM");else console.warn("Drag target no longer exists in DOM")},[j,t,o,d,u,p]);return{isDragging:w,dragOffset:_,draggedElementId:k,handleMouseDown:M,handleDragStart:(0,i.useCallback)(function(e,t,o){e.dataTransfer.setData("text/plain",t),e.dataTransfer.effectAllowed="move",O.current={x:e.clientX-o.left,y:e.clientY-o.top}},[]),handleDragOver:(0,i.useCallback)(function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),handleDrop:(0,i.useCallback)(function(e,t,n){e.preventDefault();var r=e.dataTransfer.getData("text/plain");if(r){var a=(e.clientX-t.left-O.current.x)/d,i=(e.clientY-t.top-O.current.y)/d,l=t?t.width/d:u,c=t?t.height/d:p,s=Math.max(0,Math.min(l-n.width,F(a,!1))),f=Math.max(0,Math.min(c-n.height,F(i,!0)));o&&o(r,{x:s,y:f})}},[j,o,d,u,p])}},x=function(e){var t=e.selectedTool,o=e.onToolSelect,n=e.zoom,a=e.onZoomChange,i=e.showGrid,l=e.onShowGridChange,c=e.snapToGrid,d=e.onSnapToGridChange,s=e.onUndo,u=e.onRedo,f=e.canUndo,p=e.canRedo;return r.default.createElement("div",{className:"toolbar"},r.default.createElement("div",{className:"toolbar-section"},r.default.createElement("h4",null,"Outils"),r.default.createElement("div",{className:"tool-buttons"},[{id:"select",label:"SÃ©lection (V)",icon:"ðŸ‘†",shortcut:"V"},{id:"add-text",label:"Texte Simple (T)",icon:"ðŸ“",shortcut:"T"},{id:"add-text-title",label:"Titre (H)",icon:"ðŸ“„",shortcut:"H"},{id:"add-text-subtitle",label:"Sous-titre (S)",icon:"ðŸ“‹",shortcut:"S"},{id:"add-rectangle",label:"Rectangle (R)",icon:"â–­",shortcut:"R"},{id:"add-circle",label:"Cercle (C)",icon:"â—‹",shortcut:"C"},{id:"add-line",label:"Ligne (L)",icon:"â”",shortcut:"L"},{id:"add-arrow",label:"FlÃ¨che (A)",icon:"âž¤",shortcut:"A"},{id:"add-triangle",label:"Triangle (3)",icon:"â–³",shortcut:"3"},{id:"add-star",label:"Ã‰toile (5)",icon:"â­",shortcut:"5"},{id:"add-divider",label:"SÃ©parateur (D)",icon:"âŽ¯",shortcut:"D"},{id:"add-image",label:"Image (I)",icon:"ðŸ–¼ï¸",shortcut:"I"}].map(function(e){return r.default.createElement("button",{key:e.id,className:"tool-button ".concat(t===e.id?"active":""),onClick:function(){return o(e.id)},title:e.label},r.default.createElement("div",{className:"tool-content"},r.default.createElement("span",{className:"tool-icon"},e.icon),r.default.createElement("span",{className:"tool-shortcut"},e.shortcut)))}))),r.default.createElement("div",{className:"toolbar-section"},r.default.createElement("h4",null,"Ã‰dition"),r.default.createElement("div",{className:"edit-buttons"},r.default.createElement("button",{className:"edit-button",onClick:s,disabled:!f,title:"Annuler (Ctrl+Z)"},r.default.createElement("div",{className:"button-content"},r.default.createElement("span",{className:"button-icon"},"â†¶"),r.default.createElement("span",{className:"button-text"},"Annuler"),r.default.createElement("span",{className:"button-shortcut"},"Ctrl+Z"))),r.default.createElement("button",{className:"edit-button",onClick:u,disabled:!p,title:"RÃ©tablir (Ctrl+Y)"},r.default.createElement("div",{className:"button-content"},r.default.createElement("span",{className:"button-icon"},"â†·"),r.default.createElement("span",{className:"button-text"},"RÃ©tablir"),r.default.createElement("span",{className:"button-shortcut"},"Ctrl+Y"))))),r.default.createElement("div",{className:"toolbar-section"},r.default.createElement("h4",null,"Affichage"),r.default.createElement("div",{className:"display-controls"},r.default.createElement("div",{className:"control-group"},r.default.createElement("label",null,"Zoom:"),r.default.createElement("div",{className:"zoom-controls"},r.default.createElement("button",{className:"zoom-button",onClick:function(){return a(Math.max(.1,n-.1))},title:"Zoom arriÃ¨re (Ctrl+-)"},r.default.createElement("div",{className:"button-content"},r.default.createElement("span",{className:"button-icon"},"ðŸ”"),r.default.createElement("span",{className:"button-text"},"-"),r.default.createElement("span",{className:"button-shortcut"},"Ctrl+-"))),r.default.createElement("span",{className:"zoom-value"},Math.round(100*n),"%"),r.default.createElement("button",{className:"zoom-button",onClick:function(){return a(Math.min(3,n+.1))},title:"Zoom avant (Ctrl+=)"},r.default.createElement("div",{className:"button-content"},r.default.createElement("span",{className:"button-icon"},"ðŸ”"),r.default.createElement("span",{className:"button-text"},"+"),r.default.createElement("span",{className:"button-shortcut"},"Ctrl+="))))),r.default.createElement("div",{className:"canvas-controls-column"},r.default.createElement("div",{className:"control-group"},r.default.createElement("label",null,r.default.createElement("input",{type:"checkbox",checked:i,onChange:function(e){return l(e.target.checked)}}),"Grille",r.default.createElement("span",{className:"control-shortcut"},"(G)"))),r.default.createElement("div",{className:"control-group"},r.default.createElement("label",null,r.default.createElement("input",{type:"checkbox",checked:c,onChange:function(e){return d(e.target.checked)}}),"Aimantation",r.default.createElement("span",{className:"control-shortcut"},"(M)")))))),r.default.createElement("div",{className:"toolbar-section"},r.default.createElement("h4",null,"Raccourcis"),r.default.createElement("div",{className:"shortcuts-help"},r.default.createElement("div",{className:"shortcut-group"},r.default.createElement("span",{className:"shortcut-label"},"Outils:"),r.default.createElement("span",{className:"shortcut-keys"},"V T H S R C L A 3 5 D I")),r.default.createElement("div",{className:"shortcut-group"},r.default.createElement("span",{className:"shortcut-label"},"Ã‰dition:"),r.default.createElement("span",{className:"shortcut-keys"},"Ctrl+Z/Y")),r.default.createElement("div",{className:"shortcut-group"},r.default.createElement("span",{className:"shortcut-label"},"Zoom:"),r.default.createElement("span",{className:"shortcut-keys"},"Ctrl+/- Roulette")),r.default.createElement("div",{className:"shortcut-group"},r.default.createElement("span",{className:"shortcut-label"},"Affichage:"),r.default.createElement("span",{className:"shortcut-keys"},"G M")))))};function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var z=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).maxHistorySize,t=void 0===e?50:e,o=w((0,i.useState)([]),2),n=o[0],r=o[1],a=w((0,i.useState)(-1),2),l=a[0],c=a[1],d=(0,i.useRef)(!1);return{addToHistory:(0,i.useCallback)(function(e){d.current?d.current=!1:r(function(o){var n=o.slice(0,l+1);return n.push(e),n.length>t?(n.shift(),c(n.length-1),n):(c(n.length-1),n)})},[l,t]),undo:(0,i.useCallback)(function(){return l>0?(d.current=!0,c(function(e){return e-1}),n[l-1]):null},[l,n]),redo:(0,i.useCallback)(function(){return l<n.length-1?(d.current=!0,c(function(e){return e+1}),n[l+1]):null},[l,n]),canUndo:(0,i.useCallback)(function(){return l>0},[l]),canRedo:(0,i.useCallback)(function(){return l<n.length-1},[l]),clearHistory:(0,i.useCallback)(function(){r([]),c(-1)},[]),getCurrentState:(0,i.useCallback)(function(){return l>=0?n[l]:null},[l,n]),historySize:n.length,currentIndex:l}};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function C(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function E(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?C(Object(o),!0).forEach(function(t){k(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):C(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function k(e,t,o){return(t=function(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=_(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function T(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return W(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var R=function(e){var t=e.onSelectionChange,o=e.multiSelect,n=void 0===o||o,r=O((0,i.useState)([]),2),a=r[0],l=r[1],c=O((0,i.useState)(null),2),d=c[0],s=c[1],u=(0,i.useCallback)(function(e){n&&arguments.length>1&&void 0!==arguments[1]&&arguments[1]?l(function(o){var n=o.includes(e)?o.filter(function(t){return t!==e}):[].concat(T(o),[e]);return null==t||t(n),n}):(l([e]),null==t||t([e]))},[n,t]),f=(0,i.useCallback)(function(e){l(e),null==t||t(e)},[t]),p=(0,i.useCallback)(function(){l([]),null==t||t([])},[t]),h=(0,i.useCallback)(function(e){return a.includes(e)},[a]),m=(0,i.useCallback)(function(e,t){s({startX:e,startY:t,endX:e,endY:t})},[]),g=(0,i.useCallback)(function(e,t){s(function(o){return o?E(E({},o),{},{endX:e,endY:t}):null})},[]),b=(0,i.useCallback)(function(e){if(d){var o=d.startX,r=d.startY,a=d.endX,i=d.endY,c=Math.min(o,a),u=Math.max(o,a),f=Math.min(r,i),p=Math.max(r,i),h=e.filter(function(e){var t=e.x+e.width/2,o=e.y+e.height/2;return t>=c&&t<=u&&o>=f&&o<=p}).map(function(e){return e.id});h.length>0&&(n?l(function(e){var o=T(new Set([].concat(T(e),T(h))));return null==t||t(o),o}):(l(h),null==t||t(h))),s(null)}},[d,n,t]),y=(0,i.useCallback)(function(){return T(a)},[a]),v=(0,i.useCallback)(function(){return T(a)},[a]);return{selectedElements:a,selectionBox:d,selectElement:u,selectAll:f,clearSelection:p,isSelected:h,startSelectionBox:m,updateSelectionBox:g,endSelectionBox:b,deleteSelected:y,duplicateSelected:v}};function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var A=function(e){var t,o,n=e.onPaste,r=(t=(0,i.useState)(null),o=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(t,o)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?j(e,t):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],l=r[1],c=(0,i.useCallback)(function(e){l(e)},[]),d=(0,i.useCallback)(function(){return a&&n&&n(a),a},[a,n]),s=(0,i.useCallback)(function(e){return c(e),e},[c]),u=(0,i.useCallback)(function(){return null!==a},[a]),f=(0,i.useCallback)(function(){l(null)},[]);return{copy:c,paste:d,cut:s,hasData:u,clear:f,clipboardData:a}};function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var D=function(e){var t=e.initialZoom,o=void 0===t?1:t,n=e.minZoom,r=void 0===n?.1:n,a=e.maxZoom,l=void 0===a?3:a,c=e.zoomStep,d=void 0===c?.1:c,s=F((0,i.useState)(o),2),u=s[0],f=s[1],p=F((0,i.useState)({x:0,y:0}),2),h=p[0],m=p[1],g=(0,i.useCallback)(function(){f(function(e){return Math.min(e+d,l)})},[l,d]),b=(0,i.useCallback)(function(){f(function(e){return Math.max(e-d,r)})},[r,d]),y=(0,i.useCallback)(function(e){var t=Math.max(r,Math.min(l,e));f(t)},[r,l]),v=(0,i.useCallback)(function(){f(o)},[o]),x=(0,i.useCallback)(function(e,t,o,n){var a=o/e,i=n/t,c=Math.min(a,i,l);f(Math.max(c,r))},[r,l]),w=(0,i.useCallback)(function(e,t,o){var n=Math.max(r,Math.min(l,u*o));m({x:e,y:t}),f(n)},[u,r,l]),S=(0,i.useCallback)(function(e,t,o,n,a){if(e&&0!==e.length){var i=1/0,c=1/0,d=-1/0,s=-1/0;e.forEach(function(e){i=Math.min(i,e.x),c=Math.min(c,e.y),d=Math.max(d,e.x+e.width),s=Math.max(s,e.y+e.height)});var u=d-i,p=s-c,h=n/(1.2*u),g=a/(1.2*p),b=Math.min(h,g,l),y=Math.max(r,Math.min(l,b)),v=n/2-(i+u/2)*y,x=a/2-(c+p/2)*y;f(y),m({x:v,y:x})}},[r,l]),z=(0,i.useCallback)(function(){return{transform:"scale(".concat(u,")"),transformOrigin:"".concat(h.x,"px ").concat(h.y,"px")}},[u,h]),_=(0,i.useCallback)(function(e,t){return{x:(e-h.x)/u,y:(t-h.y)/u}},[u,h]),C=(0,i.useCallback)(function(e,t){return{x:e*u+h.x,y:t*u+h.y}},[u,h]);return{zoom:u,zoomOrigin:h,zoomIn:g,zoomOut:b,setZoomLevel:y,resetZoom:v,zoomToFit:x,zoomToPoint:w,zoomToSelection:S,getTransformStyle:z,screenToCanvas:_,canvasToScreen:C}};function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var N=function(){var e=P((0,i.useState)(null),2),t=e[0],o=e[1],n=P((0,i.useState)(!1),2),r=n[0],a=n[1],l=(0,i.useCallback)(function(e,t,n){var r=36*n.length,a=e,i=t;e+180>window.innerWidth&&(a=e-180),t+r>window.innerHeight&&(i=t-r),a=Math.max(0,Math.min(a,window.innerWidth-180)),i=Math.max(0,Math.min(i,window.innerHeight-r)),o({x:a,y:i,items:n})},[]),c=(0,i.useCallback)(function(){t&&(a(!0),setTimeout(function(){o(null),a(!1)},150))},[t]),d=(0,i.useCallback)(function(e){return c(),e},[c]);return(0,i.useEffect)(function(){var e=function(e){t&&!e.target.closest(".context-menu")&&c()},o=function(e){"Escape"===e.key&&t&&c()};return t&&(document.addEventListener("mousedown",e),document.addEventListener("keydown",o)),function(){document.removeEventListener("mousedown",e),document.removeEventListener("keydown",o)}},[t,c]),{contextMenu:t,showContextMenu:l,hideContextMenu:c,handleContextMenuAction:d,isAnimating:r}};function H(){var e,t,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",r=o.toStringTag||"@@toStringTag";function a(o,n,r,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return G(d,"_invoke",function(o,n,r){var a,l,c,d=0,s=r||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,o){return a=t,l=0,c=e,f.n=o,i}};function p(o,n){for(l=o,c=n,t=0;!u&&d&&!r&&t<s.length;t++){var r,a=s[t],p=f.p,h=a[2];o>3?(r=h===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((r=o<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<h&&(r=o<3||a[0]>n||n>h)&&(a[4]=o,a[5]=n,f.n=h,l=0))}if(r||o>1)return i;throw u=!0,n}return function(r,s,h){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,h),l=s,c=h;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(r="next"),t=a[r]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:o.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(o,r,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(G(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,G(e,r,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,G(u,"constructor",d),G(d,"constructor",c),c.displayName="GeneratorFunction",G(d,r,"GeneratorFunction"),G(u),G(u,r,"Generator"),G(u,n,function(){return this}),G(u,"toString",function(){return"[object Generator]"}),(H=function(){return{w:a,m:f}})()}function G(e,t,o,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}G=function(e,t,o,n){function a(t,o){G(e,t,function(e){return this._invoke(t,o,e)})}t?r?r(e,t,{value:o,enumerable:!n,configurable:!n,writable:!n}):e[t]=o:(a("next",0),a("throw",1),a("return",2))},G(e,t,o,n)}function L(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=J(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw a}}}}function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function U(e,t,o,n,r,a,i){try{var l=e[a](i),c=l.value}catch(e){return void o(e)}l.done?t(c):Promise.resolve(c).then(n,r)}function q(e){return function(){var t=this,o=arguments;return new Promise(function(n,r){var a=e.apply(t,o);function i(e){U(a,n,r,i,l,"next",e)}function l(e){U(a,n,r,i,l,"throw",e)}i(void 0)})}}function X(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||J(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function V(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(o),!0).forEach(function(t){K(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Y(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function K(e,t,o){return(t=function(e){var t=function(e){if("object"!=Z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=Z(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||J(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){if(e){if("string"==typeof e)return Q(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var ee=function(e){var t=(0,i.useRef)(e);return t.current=e,t};if("undefined"!=typeof window&&void 0===window.toastr){var te=function(e,t,o){var n=document.createElement("div");switch(n.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      z-index: 100;\n      padding: 15px 20px;\n      margin-bottom: 10px;\n      border-radius: 5px;\n      color: white;\n      font-family: Arial, sans-serif;\n      font-size: 14px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n      max-width: 300px;\n      opacity: 0;\n      transform: translateX(100%);\n      transition: all 0.3s ease;\n    ",e){case"success":n.style.backgroundColor="#51A351";break;case"error":n.style.backgroundColor="#BD362F";break;case"warning":n.style.backgroundColor="#F89406";break;default:n.style.backgroundColor="#2F96B4"}var r=t?"<strong>".concat(t,"</strong><br>"):"";n.innerHTML="".concat(r).concat(o);var a=document.createElement("button");function i(e){e.style.opacity="0",e.style.transform="translateX(100%)",setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e)},300)}a.innerHTML="Ã—",a.style.cssText="\n      position: absolute;\n      top: 5px;\n      right: 10px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 20px;\n      cursor: pointer;\n      opacity: 0.8;\n    ",a.onclick=function(){return i(n)},n.appendChild(a),document.body.appendChild(n),setTimeout(function(){n.style.opacity="1",n.style.transform="translateX(0)"},10),setTimeout(function(){return i(n)},5e3)};window.toastr={success:function(e,t){te("success",t,e)},error:function(e,t){te("error",t,e)},warning:function(e,t){te("warning",t,e)},info:function(e,t){te("info",t,e)},options:{}}}var oe=function(e){var t,o=e.initialElements,n=void 0===o?[]:o,r=e.templateId,a=void 0===r?null:r,l=e.canvasWidth,c=void 0===l?595:l,d=e.canvasHeight,s=void 0===d?842:d,u=e.globalSettings,f=void 0===u?null:u,p=$((0,i.useState)(n),2),h=p[0],m=p[1],g=$((0,i.useState)(1),2),b=g[0],y=g[1],x=$((0,i.useState)(!1),2),w=x[0],S=(x[1],$((0,i.useState)({saving:!1,loading:!1,duplicating:!1,deleting:!1}),2)),_=S[0],C=S[1],E=z(),k=R({onSelectionChange:(0,i.useCallback)(function(e){},[]),multiSelect:null===(t=null==f?void 0:f.multiSelect)||void 0===t||t}),T=ee(E),O=ee(k),B=A({onPaste:(0,i.useCallback)(function(e){if("elements"===e.type){var t=e.elements.map(function(t){return V(V({},t),{},{id:"element_".concat(b+e.elements.indexOf(t)),x:t.x+20,y:t.y+20})});m(function(e){return[].concat(X(e),X(t))}),y(function(e){return e+t.length}),k.selectAll(t.map(function(e){return e.id}))}},[b,k])}),W=D({initialZoom:f?parseFloat(f.defaultZoom)/100:1,minZoom:f?f.minZoom/100:.25,maxZoom:f?f.maxZoom/100:3,zoomStep:f?f.zoomStep/100:.1}),j=N(),F=(0,i.useCallback)(function(e,t){m(function(o){return o.map(function(o){if(o.id===e){var n=V(V({},o),t);return"divider"===o.type&&(n.height=16),"line"===o.type&&(n.height=12),n}return o})})},[]);(0,i.useEffect)(function(){if(h.length>0)try{T.current&&"function"==typeof T.current.addToHistory&&T.current.addToHistory({elements:h,nextId:b})}catch(e){}},[h,b]);var M=(0,i.useCallback)(function(e){return Array.isArray(e)?e.map(function(e){return e.id&&e.type?e:null}).filter(Boolean):[]},[]);(0,i.useEffect)(function(){var e=M(n);if(m(e),e&&e.length>0){var t=Math.max.apply(Math,X(e.map(function(e){var t,o=(null===(t=e.id)||void 0===t?void 0:t.split("_"))||[];return parseInt(o[1]||0)})));y(t+1)}else y(1)},[n,M]);var P=v({onElementMove:(0,i.useCallback)(function(e,t){F(e,t)},[F]),onElementDrop:(0,i.useCallback)(function(e,t){F(e,t),E.addToHistory({elements:h.map(function(o){return o.id===e?V(V({},o),t):o}),nextId:b})},[F,E,h,b])}),I=(0,i.useCallback)(function(e){return e.map(function(e){var t=V({},e);return["domElement","ref","eventListeners","component","render"].forEach(function(e){delete t[e]}),t})},[]);(0,i.useEffect)(function(){if(h.length>0||0===E.historySize){var e=I(h);E.addToHistory({elements:e,nextId:b})}},[h,b,E,I]),(0,i.useEffect)(function(){var e=["product_table","customer_info","company_logo","company_info","order_number","document_type","progress-bar"];h.some(function(t){return e.includes(t.type)&&"transparent"!==t.backgroundColor})&&m(function(t){return t.map(function(t){return e.includes(t.type)&&"transparent"!==t.backgroundColor?V(V({},t),{},{backgroundColor:"transparent"}):t})})},[]);var G=(0,i.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=T.current,n=O.current;if(n&&o&&"function"==typeof n.selectElement&&"function"==typeof o.addToHistory){var r=V(V({id:"element_".concat(b),type:e},{x:50,y:50,width:100,height:50,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderStyle:"solid",borderRadius:0,color:"#1e293b",fontFamily:"Inter, sans-serif",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",text:"Texte",opacity:100,rotation:0,scale:100,visible:!0,src:"",alt:"",objectFit:"cover",brightness:100,contrast:100,saturate:100,shadow:!1,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2,showHeaders:!0,showBorders:!0,dataSource:"order_items",showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1,progressColor:"#3b82f6",progressValue:75,lineColor:"#64748b",lineWidth:2,documentType:"invoice",imageUrl:"",spacing:8,layout:"vertical",alignment:"left",fit:"contain"}),t);"line"===e?(r.height=12,r.width=200):"divider"===e&&(r.height=16,r.width=200),m(function(e){var t=[].concat(X(e),[r]);try{o&&"function"==typeof o.addToHistory&&o.addToHistory({elements:t,nextId:b+1})}catch(e){}return t}),y(function(e){return e+1});try{n&&"function"==typeof n.selectElement&&n.selectElement(r.id)}catch(e){}}},[b]),U=(0,i.useCallback)(function(e){m(function(t){var o=t.filter(function(t){return t.id!==e});return E.addToHistory({elements:o,nextId:b}),o}),k.clearSelection()},[k,E,b]),Y=(0,i.useCallback)(function(){var e=k.deleteSelected();m(function(t){var o=t.filter(function(t){return!e.includes(t.id)});return E.addToHistory({elements:o,nextId:b}),o}),k.clearSelection()},[k,E,b]),K=(0,i.useCallback)(function(e){var t=h.find(function(t){return t.id===e});if(t){var o=V(V({},t),{},{id:"element_".concat(b),x:t.x+20,y:t.y+20});m(function(e){var t=[].concat(X(e),[o]);return E.addToHistory({elements:t,nextId:b+1}),t}),y(function(e){return e+1}),k.selectElement(o.id)}},[h,b,k,E]),J=(0,i.useCallback)(function(){var e=k.duplicateSelected(),t=[];e.forEach(function(e){var o=h.find(function(t){return t.id===e});if(o){var n=V(V({},o),{},{id:"element_".concat(b+t.length),x:o.x+20,y:o.y+20});t.push(n)}}),t.length>0&&(m(function(e){var o=[].concat(X(e),t);return E.addToHistory({elements:o,nextId:b+t.length}),o}),y(function(e){return e+t.length}),k.selectAll(t.map(function(e){return e.id})))},[h,b,k,E]),Q=(0,i.useCallback)(function(){var e=k.selectedElements,t=h.filter(function(t){return e.includes(t.id)});t.length>0&&B.copy({type:"elements",elements:t})},[h,k,B]),te=(0,i.useCallback)(function(){B.paste()},[B]),oe=(0,i.useCallback)(function(){var e=E.undo();e&&(m(e.elements),y(e.nextId),k.clearSelection())},[E,k]),ne=(0,i.useCallback)(function(){var e=E.redo();e&&(m(e.elements),y(e.nextId),k.clearSelection())},[E,k]),re=(0,i.useCallback)(q(H().m(function e(){var t,o,n,r,i,l,d,u,f,p,m,g,b,y,v,x,w,S,z,E,k,T,O,B,W;return H().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!_.saving){e.n=1;break}return e.a(2);case 1:return C(function(e){return V(V({},e),{},{saving:!0})}),t=a&&"0"!==a&&0!==a,o=function(){return Promise.resolve(!0)},e.n=2,o();case 2:n=e.v,e.p=3,p=function(e){for(var t=["domElement","eventListeners","ref","onClick","onMouseDown","onMouseUp","onMouseMove","onContextMenu","onDoubleClick","onDragStart","onDragEnd","onResize","component","render","props","state","context","refs","_reactInternalInstance","_reactInternals","$$typeof","constructor","prototype","_owner","_store","key","ref","_self","_source"],o={},n=0,r=Object.entries(e);n<r.length;n++){var a=$(r[n],2),i=a[0],l=a[1];if(!t.includes(i)&&!i.startsWith("_")){var c,d,s,u,f,p,h=l;if(["x","y","width","height","fontSize","opacity","lineHeight","letterSpacing","zIndex","borderWidth","borderRadius","rotation","padding","scale","shadowOffsetX","shadowOffsetY","brightness","contrast","saturate","progressValue","lineWidth","spacing"].includes(i)&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(h={x:0,y:0,width:100,height:50,fontSize:14,opacity:1,lineHeight:1.2,letterSpacing:0,zIndex:0,borderWidth:0,borderRadius:0,rotation:0,padding:0}[i]||0):h=parseFloat(l)),["color","backgroundColor","borderColor","shadowColor","progressColor","lineColor"].includes(i)&&l&&"transparent"!==l&&!/^#[0-9A-Fa-f]{3,6}$/i.test(l)&&(h={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",gray:"#808080",grey:"#808080",transparent:"transparent"}[l.toLowerCase()]||"#000000"),"fontWeight"===i&&(["normal","bold","100","200","300","400","500","600","700","800","900"].includes(l)||(h="normal")),"textAlign"===i&&(["left","center","right","justify"].includes(l)||(h="left")),"textDecoration"===i&&(["none","underline","overline","line-through"].includes(l)||(h="none")),"textTransform"===i&&(["none","capitalize","uppercase","lowercase"].includes(l)||(h="none")),"borderStyle"===i&&(["solid","dashed","dotted","double","none"].includes(l)||(h="solid")),"text"!==i&&"content"!==i||"string"!=typeof l&&(h=""),"fontFamily"===i&&("string"==typeof l&&""!==l.trim()||(h="Inter, sans-serif")),"fontStyle"===i&&(["normal","italic","oblique"].includes(l)||(h="normal")),"visible"===i&&"boolean"!=typeof l&&(h=!0),"scale"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(h=100):h=parseFloat(l),h=Math.max(10,Math.min(500,h))),"shadow"===i&&"boolean"!=typeof l&&(h=!1),"shadowColor"===i&&l&&"transparent"!==l&&!/^#[0-9A-Fa-f]{3,6}$/i.test(l)&&(h={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",gray:"#808080",grey:"#808080",transparent:"transparent"}[l.toLowerCase()]||"#000000"),["shadowOffsetX","shadowOffsetY"].includes(i)&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(h=2):h=parseFloat(l)),"brightness"!==i&&"contrast"!==i&&"saturate"!==i||("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(h=100):h=parseFloat(l),h=Math.max(0,Math.min(200,h))),"objectFit"===i&&(["fill","contain","cover","none","scale-down"].includes(l)||(h="cover")),["showHeaders","showBorders","showSubtotal","showShipping","showTaxes","showDiscount","showTotal"].includes(i)&&"boolean"!=typeof l&&(h=!1),"dataSource"===i&&(["order_items","cart_items","custom"].includes(l)||(h="order_items")),"progressValue"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(h=0):h=parseFloat(l),h=Math.max(0,Math.min(100,h))),"lineWidth"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(h=2):h=parseFloat(l),h=Math.max(1,Math.min(10,h))),"spacing"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(h=8):h=parseFloat(l)),"layout"===i&&(["vertical","horizontal","grid"].includes(l)||(h="vertical")),"alignment"===i&&(["left","center","right","justify"].includes(l)||(h="left")),"fit"===i&&(["contain","cover","fill","none"].includes(l)||(h="contain")),"documentType"===i&&(["invoice","quote","receipt","order"].includes(l)||(h="invoice")),"columns"===i&&(h="object"===Z(l)&&null!==l?{image:null===(c=l.image)||void 0===c||c,name:null===(d=l.name)||void 0===d||d,sku:null!==(s=l.sku)&&void 0!==s&&s,quantity:null===(u=l.quantity)||void 0===u||u,price:null===(f=l.price)||void 0===f||f,total:null===(p=l.total)||void 0===p||p}:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0}),null!=h)if("string"==typeof h||"number"==typeof h||"boolean"==typeof h)o[i]=h;else if(Array.isArray(h))try{var m=h.filter(function(e){return null!=e}).map(function(e){if("object"===Z(e)&&null!==e){for(var t={},o=0,n=Object.entries(e);o<n.length;o++){var r=$(n[o],2),a=r[0],i=r[1];"string"!=typeof i&&"number"!=typeof i&&"boolean"!=typeof i||(t[a]=i)}return t}return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:null}).filter(function(e){return null!==e});JSON.stringify(m),o[i]=m}catch(e){console.warn("Impossible de sÃ©rialiser le tableau pour ".concat(i,", utilisation tableau vide:"),e),o[i]=[]}else if("object"===Z(h))try{for(var g={},b=0,y=Object.entries(h);b<y.length;b++){var v=$(y[b],2),x=v[0],w=v[1];x.startsWith("_")||t.includes(x)||"string"!=typeof w&&"number"!=typeof w&&"boolean"!=typeof w||(g[x]=w)}JSON.stringify(g),o[i]=g}catch(e){console.warn("Impossible de sÃ©rialiser l'objet pour ".concat(i,", utilisation objet vide:"),e),o[i]={}}else console.warn("Type non supportÃ© ignorÃ© pour ".concat(i,": ").concat(Z(h)))}}return o},m=[];try{h.forEach(function(e,t){e&&Z(e),e&&e.id,e&&e.type}),m=h.filter(function(e){return e&&"object"===Z(e)&&e.id&&e.type}).map(p).filter(function(e){return e&&e.id&&e.type}),JSON.stringify(m)}catch(e){console.error("âŒ PDF Builder SAVE - Erreur lors du nettoyage des Ã©lÃ©ments:",e),console.error("âŒ PDF Builder SAVE - Ã‰lÃ©ments originaux qui ont causÃ© l'erreur:",h),m=[]}if(g={elements:m,canvasWidth:c,canvasHeight:s,version:"1.0"},e.p=4,b=JSON.stringify(g),(y=JSON.parse(b)).elements&&Array.isArray(y.elements)){e.n=5;break}throw new Error("Structure de donnÃ©es invalide: Ã©lÃ©ments manquants ou incorrects");case 5:v=L(y.elements),e.p=6,v.s();case 7:if((x=v.n()).done){e.n=9;break}if((w=x.value).id&&w.type){e.n=8;break}throw new Error("Ã‰lÃ©ment invalide dÃ©tectÃ©: ID ou type manquant pour ".concat(JSON.stringify(w)));case 8:e.n=7;break;case 9:e.n=11;break;case 10:e.p=10,O=e.v,v.e(O);case 11:return e.p=11,v.f(),e.f(11);case 12:e.n=14;break;case 13:throw e.p=13,B=e.v,console.error("Erreur de validation JSON cÃ´tÃ© client:",B),console.error("DonnÃ©es templateData qui ont causÃ© l'erreur:",g),new Error("DonnÃ©es JSON invalides cÃ´tÃ© client: "+B.message);case 14:return(S=new FormData).append("action","pdf_builder_pro_save_template"),S.append("template_data",b),S.append("template_name",(null===(r=window.pdfBuilderData)||void 0===r?void 0:r.templateName)||"Template ".concat((null===(i=window.pdfBuilderData)||void 0===i?void 0:i.templateId)||"New")),S.append("template_id",(null===(l=window.pdfBuilderData)||void 0===l?void 0:l.templateId)||"0"),S.append("nonce",(null===(d=window.pdfBuilderAjax)||void 0===d?void 0:d.nonce)||(null===(u=window.pdfBuilderData)||void 0===u?void 0:u.nonce)||""),e.n=15,fetch((null===(f=window.pdfBuilderAjax)||void 0===f?void 0:f.ajaxurl)||"/wp-admin/admin-ajax.php",{method:"POST",body:S});case 15:return z=e.v,e.n=16,z.json();case 16:if((E=e.v).success){e.n=17;break}throw new Error((null===(k=E.data)||void 0===k?void 0:k.message)||"Erreur lors de la sauvegarde");case 17:return t&&(n?toastr.success("Modifications du canvas sauvegardÃ©es avec succÃ¨s !"):alert("Modifications du canvas sauvegardÃ©es avec succÃ¨s !")),e.a(2,g);case 18:throw e.p=18,W=e.v,console.error("âŒ PDF Builder SAVE - Erreur lors de la sauvegarde:",W),console.error("âŒ PDF Builder SAVE - DÃ©tails de l'erreur:",{message:W.message,stack:W.stack,name:W.name}),T=W.message||"Erreur inconnue lors de la sauvegarde",n?toastr.error("Erreur lors de la sauvegarde: ".concat(T)):alert("Erreur lors de la sauvegarde: ".concat(T)),W;case 19:return e.p=19,C(function(e){return V(V({},e),{},{saving:!1})}),e.f(19);case 20:return e.a(2)}},e,null,[[6,10,11,12],[4,13],[3,18,19,20]])})),[h,c,s,w,a]),ae=((0,i.useCallback)(function(e){e.elements&&(m(e.elements),y(e.nextId||Math.max.apply(Math,X(e.elements.map(function(e){return parseInt(e.id.split("_")[1])})||[0]))+1),k.clearSelection(),E.clearHistory())},[k,E]),(0,i.useCallback)(function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=[];o?n.push({label:"Dupliquer",action:function(){return K(o)}},{label:"Supprimer",action:function(){return U(o)}},{type:"separator"},{label:"Copier",action:Q},{label:"Coller",action:te,disabled:!B.hasData()}):k.selectedElements.length>0?n.push({label:"Dupliquer",action:J},{label:"Supprimer",action:Y},{type:"separator"},{label:"Copier",action:Q},{label:"Coller",action:te,disabled:!B.hasData()}):n.push({label:"Coller",action:te,disabled:!B.hasData()}),j.showContextMenu(e,t,n)},[k,j,K,U,Q,te,B,J,Y])),ie=(0,i.useCallback)(function(){var e=k.selectedElements;if(0!==e.length){var t=h.filter(function(t){return e.includes(t.id)});if(0!==t.length){var o=document.querySelector(".canvas-container");if(o){var n=o.getBoundingClientRect(),r=n.width,a=n.height;W.zoomToSelection(t,c,s,r,a)}}}},[k.selectedElements,h,W,c,s]);return(0,i.useMemo)(function(){return{elements:h,canvasWidth:c,canvasHeight:s,selection:k,zoom:W,contextMenu:j,dragAndDrop:P,addElement:G,updateElement:F,deleteElement:U,deleteSelectedElements:Y,duplicateElement:K,duplicateSelectedElements:J,copySelectedElements:Q,pasteElements:te,undo:oe,redo:ne,canUndo:E.canUndo(),canRedo:E.canRedo(),history:E,zoomToSelection:ie,saveTemplate:re,loadingStates:_,isSaving:_.saving,showContextMenu:ae,getAllElements:(0,i.useCallback)(function(){return h},[h]),getElementById:(0,i.useCallback)(function(e){return h.find(function(t){return t.id===e})},[h])}},[h,c,s,k,W,j,P,G,F,U,Y,K,J,Q,te,oe,ne,E,ae,ie,re])},ne=function(e){var t=e.onDelete,o=e.onCopy,n=e.onPaste,r=e.onUndo,a=e.onRedo,l=e.onSave,c=e.onZoomIn,d=e.onZoomOut,s=e.onSelectAll,u=e.onDeselectAll,f=e.onToolSelect,p=e.onToggleGrid,h=e.onTogglePreview;(0,i.useEffect)(function(){var e=function(e){if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"true"!==e.target.contentEditable){var i=e.ctrlKey||e.metaKey;switch(e.key.toLowerCase()){case"delete":case"backspace":t&&(e.preventDefault(),t());break;case"c":i&&o&&(e.preventDefault(),o());break;case"v":i&&n&&(e.preventDefault(),n());break;case"z":i&&(e.preventDefault(),e.shiftKey&&a?a():r&&r());break;case"y":i&&a&&(e.preventDefault(),a());break;case"s":i&&l&&(e.preventDefault(),l());break;case"+":case"=":i&&c&&(e.preventDefault(),c());break;case"-":i&&d&&(e.preventDefault(),d());break;case"a":i&&s&&(e.preventDefault(),s());break;case"d":i&&u&&(e.preventDefault(),u());break;case"g":i&&p&&(e.preventDefault(),p());break;case"p":i&&h&&(e.preventDefault(),h());break;case"v":!i&&f&&(e.preventDefault(),f("select"));break;case"r":!i&&f&&(e.preventDefault(),f("rectangle"));break;case"t":!i&&f&&(e.preventDefault(),f("text"));break;case"i":!i&&f&&(e.preventDefault(),f("image"));break;case"l":!i&&f&&(e.preventDefault(),f("line"))}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[t,o,n,r,a,l,c,d,s,u,f,p,h])};function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ae(){var e,t,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",r=o.toStringTag||"@@toStringTag";function a(o,n,r,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return ie(d,"_invoke",function(o,n,r){var a,l,c,d=0,s=r||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,o){return a=t,l=0,c=e,f.n=o,i}};function p(o,n){for(l=o,c=n,t=0;!u&&d&&!r&&t<s.length;t++){var r,a=s[t],p=f.p,h=a[2];o>3?(r=h===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((r=o<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<h&&(r=o<3||a[0]>n||n>h)&&(a[4]=o,a[5]=n,f.n=h,l=0))}if(r||o>1)return i;throw u=!0,n}return function(r,s,h){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,h),l=s,c=h;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(r="next"),t=a[r]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:o.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(o,r,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(ie(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,ie(e,r,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,ie(u,"constructor",d),ie(d,"constructor",c),c.displayName="GeneratorFunction",ie(d,r,"GeneratorFunction"),ie(u),ie(u,r,"Generator"),ie(u,n,function(){return this}),ie(u,"toString",function(){return"[object Generator]"}),(ae=function(){return{w:a,m:f}})()}function ie(e,t,o,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}ie=function(e,t,o,n){function a(t,o){ie(e,t,function(e){return this._invoke(t,o,e)})}t?r?r(e,t,{value:o,enumerable:!n,configurable:!n,writable:!n}):e[t]=o:(a("next",0),a("throw",1),a("return",2))},ie(e,t,o,n)}function le(e,t,o,n,r,a,i){try{var l=e[a](i),c=l.value}catch(e){return void o(e)}l.done?t(c):Promise.resolve(c).then(n,r)}function ce(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function de(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(o),!0).forEach(function(t){se(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ce(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function se(e,t,o){return(t=function(e){var t=function(e){if("object"!=re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=re(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var fe=function(){var e,t,o=(e=(0,i.useState)({defaultCanvasWidth:210,defaultCanvasHeight:297,defaultCanvasUnit:"mm",defaultOrientation:"portrait",canvasBackgroundColor:"#ffffff",canvasShowTransparency:!1,containerBackgroundColor:"#f8f9fa",containerShowTransparency:!1,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,showMargins:!0,showGrid:!0,gridSize:10,gridColor:"#e0e0e0",gridOpacity:30,snapToGrid:!0,snapToElements:!0,snapToMargins:!0,snapTolerance:5,showGuides:!0,lockGuides:!1,defaultZoom:"100",minZoom:10,maxZoom:500,zoomStep:25,panWithMouse:!0,smoothZoom:!0,showZoomIndicator:!0,zoomWithWheel:!1,zoomToSelection:!0,showResizeHandles:!0,handleSize:8,handleColor:"#007cba",enableRotation:!0,rotationStep:15,rotationSnap:!0,multiSelect:!0,selectAllShortcut:!0,showSelectionBounds:!0,copyPasteEnabled:!0,duplicateOnDrag:!1,exportQuality:"print",exportFormat:"pdf",compressImages:!0,imageQuality:85,maxImageSize:2048,includeMetadata:!0,pdfAuthor:"",pdfSubject:"",autoCrop:!1,embedFonts:!0,optimizeForWeb:!0,enableHardwareAcceleration:!0,limitFps:!0,maxFps:60,autoSaveEnabled:!0,autoSaveInterval:30,autoSaveVersions:10,undoLevels:50,redoLevels:50,enableKeyboardShortcuts:!0,debugMode:!1,showFps:!1,resizeHandleSize:12,resizeHandleColor:"#007cba",resizeHandleBorderColor:"#ffffff",resizeHandleOffset:-6,selectionBorderWidth:2,selectionBorderColor:"var(--primary-color)",selectionShadowOpacity:.1,selectionBorderSpacing:2,resizeZoneSize:16,resizeZoneOpacity:.1,showResizeHandlesLegacy:!0,showResizeZones:!0,selectionAnimation:!0,defaultTextColor:"#000000",defaultBackgroundColor:"#ffffff",defaultFontSize:14,ajaxurl:window.ajaxurl||"",nonce:window.pdfBuilderNonce||""}),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=o[0],r=o[1],a=function(){return window.pdfBuilderCanvasSettings?window.pdfBuilderCanvasSettings:null},l=function(){return window.pdfBuilderAjax?{ajaxurl:window.pdfBuilderAjax.ajaxurl||"",nonce:window.pdfBuilderAjax.nonce||""}:{ajaxurl:window.ajaxurl||"",nonce:window.pdfBuilderNonce||window.pdf_builder_nonce||""}};(0,i.useEffect)(function(){var e=a(),t=l();if(e)r(function(o){return de(de(de({},o),t),{},{defaultCanvasWidth:e.default_canvas_width||o.defaultCanvasWidth,defaultCanvasHeight:e.default_canvas_height||o.defaultCanvasHeight,defaultCanvasUnit:e.default_canvas_unit||o.defaultCanvasUnit,defaultOrientation:e.default_orientation||o.defaultOrientation,canvasBackgroundColor:e.canvas_background_color||o.canvasBackgroundColor,canvasShowTransparency:void 0!==e.canvas_show_transparency?e.canvas_show_transparency:o.canvasShowTransparency,containerBackgroundColor:e.container_background_color||o.containerBackgroundColor,containerShowTransparency:void 0!==e.container_show_transparency?e.container_show_transparency:o.containerShowTransparency,marginTop:e.margin_top||o.marginTop,marginRight:e.margin_right||o.marginRight,marginBottom:e.margin_bottom||o.marginBottom,marginLeft:e.margin_left||o.marginLeft,showMargins:void 0!==e.show_margins?e.show_margins:o.showMargins,showGrid:void 0!==e.show_grid?e.show_grid:o.showGrid,gridSize:e.grid_size||o.gridSize,gridColor:e.grid_color||o.gridColor,gridOpacity:e.grid_opacity||o.gridOpacity,snapToGrid:void 0!==e.snap_to_grid?e.snap_to_grid:o.snapToGrid,snapToElements:void 0!==e.snap_to_elements?e.snap_to_elements:o.snapToElements,snapToMargins:void 0!==e.snap_to_margins?e.snap_to_margins:o.snapToMargins,snapTolerance:e.snap_tolerance||o.snapTolerance,showGuides:void 0!==e.show_guides?e.show_guides:o.showGuides,lockGuides:void 0!==e.lock_guides?e.lock_guides:o.lockGuides,defaultZoom:e.default_zoom||o.defaultZoom,minZoom:e.min_zoom||o.minZoom,maxZoom:e.max_zoom||o.maxZoom,zoomStep:e.zoom_step||o.zoomStep,panWithMouse:void 0!==e.pan_with_mouse?e.pan_with_mouse:o.panWithMouse,smoothZoom:void 0!==e.smooth_zoom?e.smooth_zoom:o.smoothZoom,showZoomIndicator:void 0!==e.show_zoom_indicator?e.show_zoom_indicator:o.showZoomIndicator,zoomWithWheel:void 0!==e.zoom_with_wheel?e.zoom_with_wheel:o.zoomWithWheel,zoomToSelection:void 0!==e.zoom_to_selection?e.zoom_to_selection:o.zoomToSelection,showResizeHandles:!0,handleSize:e.handle_size||o.handleSize,handleColor:e.handle_color||o.handleColor,enableRotation:void 0!==e.enable_rotation?e.enable_rotation:o.enableRotation,rotationStep:e.rotation_step||o.rotationStep,rotationSnap:void 0!==e.rotation_snap?e.rotation_snap:o.rotationSnap,multiSelect:void 0!==e.multi_select?e.multi_select:o.multiSelect,selectAllShortcut:void 0!==e.select_all_shortcut?e.select_all_shortcut:o.selectAllShortcut,showSelectionBounds:void 0!==e.show_selection_bounds?e.show_selection_bounds:o.showSelectionBounds,copyPasteEnabled:void 0!==e.copy_paste_enabled?e.copy_paste_enabled:o.copyPasteEnabled,duplicateOnDrag:void 0!==e.duplicate_on_drag?e.duplicate_on_drag:o.duplicateOnDrag,exportQuality:e.export_quality||o.exportQuality,exportFormat:e.export_format||o.exportFormat,compressImages:void 0!==e.compress_images?e.compress_images:o.compressImages,imageQuality:e.image_quality||o.imageQuality,maxImageSize:e.max_image_size||o.maxImageSize,includeMetadata:void 0!==e.include_metadata?e.include_metadata:o.includeMetadata,pdfAuthor:e.pdf_author||o.pdfAuthor,pdfSubject:e.pdf_subject||o.pdfSubject,autoCrop:void 0!==e.auto_crop?e.auto_crop:o.autoCrop,embedFonts:void 0!==e.embed_fonts?e.embed_fonts:o.embedFonts,optimizeForWeb:void 0!==e.optimize_for_web?e.optimize_for_web:o.optimizeForWeb,enableHardwareAcceleration:void 0!==e.enable_hardware_acceleration?e.enable_hardware_acceleration:o.enableHardwareAcceleration,limitFps:void 0!==e.limit_fps?e.limit_fps:o.limitFps,maxFps:e.max_fps||o.maxFps,autoSaveEnabled:void 0!==e.auto_save_enabled?e.auto_save_enabled:o.autoSaveEnabled,autoSaveInterval:e.auto_save_interval||o.autoSaveInterval,autoSaveVersions:e.auto_save_versions||o.autoSaveVersions,undoLevels:e.undo_levels||o.undoLevels,redoLevels:e.redo_levels||o.redoLevels,enableKeyboardShortcuts:void 0!==e.enable_keyboard_shortcuts?e.enable_keyboard_shortcuts:o.enableKeyboardShortcuts,debugMode:void 0!==e.debug_mode?e.debug_mode:o.debugMode,showFps:void 0!==e.show_fps?e.show_fps:o.showFps,resizeHandleSize:e.canvas_handle_size||o.resizeHandleSize,resizeHandleColor:e.canvas_handle_color||o.resizeHandleColor,resizeHandleBorderColor:e.canvas_handle_hover_color||o.resizeHandleBorderColor,selectionBorderWidth:e.canvas_border_width||o.selectionBorderWidth,selectionBorderColor:e.canvas_border_color||o.selectionBorderColor,selectionBorderSpacing:e.canvas_border_spacing||o.selectionBorderSpacing,showResizeHandlesLegacy:void 0!==e.canvas_resize_handles_enabled?e.canvas_resize_handles_enabled:o.showResizeHandlesLegacy,showResizeZones:void 0!==e.canvas_element_borders_enabled?e.canvas_element_borders_enabled:o.showResizeZones,defaultTextColor:e.default_text_color||o.defaultTextColor,defaultBackgroundColor:e.default_background_color||o.defaultBackgroundColor,defaultFontSize:e.default_font_size||o.defaultFontSize})});else{var o=l(),n=localStorage.getItem("pdf-builder-global-settings");if(n)try{var i=JSON.parse(n);i.showResizeHandles=!0,r(function(e){return de(de(de({},e),o),i)})}catch(e){r(function(e){return de(de({},e),o)})}else r(function(e){return de(de({},e),o)})}},[]),(0,i.useEffect)(function(){var e=function(e){d()};return window.addEventListener("pdfBuilderSettingsUpdated",e),function(){window.removeEventListener("pdfBuilderSettingsUpdated",e)}},[]),(0,i.useEffect)(function(){var e=document.documentElement;e.style.setProperty("--resize-handle-size","".concat(n.resizeHandleSize,"px")),e.style.setProperty("--resize-handle-color",n.resizeHandleColor),e.style.setProperty("--resize-handle-border-color",n.resizeHandleBorderColor),e.style.setProperty("--resize-handle-offset","".concat(n.resizeHandleOffset,"px")),e.style.setProperty("--selection-border-width","".concat(n.selectionBorderWidth,"px")),e.style.setProperty("--selection-border-color",n.selectionBorderColor),e.style.setProperty("--selection-border-spacing","".concat(n.selectionBorderSpacing,"px")),e.style.setProperty("--selection-shadow-opacity",n.selectionShadowOpacity),e.style.setProperty("--resize-zone-size","".concat(n.resizeZoneSize,"px")),e.style.setProperty("--resize-zone-opacity",n.resizeZoneOpacity),e.style.setProperty("--show-resize-handles",n.showResizeHandles?"block":"none"),e.style.setProperty("--show-resize-zones",n.showResizeZones?"auto":"none"),e.style.setProperty("--selection-animation",n.selectionAnimation?"all 0.2s ease":"none")},[n]);var c=function(){var e,t=(e=ae().m(function e(t){return ae().w(function(e){for(;;)switch(e.n){case 0:r(function(e){var o=de(de({},e),t);o.showResizeHandles=!0,localStorage.setItem("pdf-builder-global-settings",JSON.stringify(o));var n=l();if(n.ajaxurl&&n.nonce){var r={show_grid:o.showGrid,grid_size:o.gridSize,grid_color:o.gridColor,grid_opacity:o.gridOpacity,snap_to_grid:o.snapToGrid,snap_to_elements:o.snapToElements,snap_to_margins:o.snapToMargins,snap_tolerance:o.snapTolerance,show_guides:o.showGuides,lock_guides:o.lockGuides,default_zoom:o.defaultZoom,min_zoom:o.minZoom,max_zoom:o.maxZoom,zoom_step:o.zoomStep,pan_with_mouse:o.panWithMouse,smooth_zoom:o.smoothZoom,show_zoom_indicator:o.showZoomIndicator,zoom_with_wheel:o.zoomWithWheel,zoom_to_selection:o.zoomToSelection,show_resize_handles:o.showResizeHandles,handle_size:o.handleSize,handle_color:o.handleColor,enable_rotation:o.enableRotation,rotation_step:o.rotationStep,rotation_snap:o.rotationSnap,multi_select:o.multiSelect,select_all_shortcut:o.selectAllShortcut,show_selection_bounds:o.showSelectionBounds,copy_paste_enabled:o.copyPasteEnabled,duplicate_on_drag:o.duplicateOnDrag,export_quality:o.exportQuality,export_format:o.exportFormat,compress_images:o.compressImages,image_quality:o.imageQuality,max_image_size:o.maxImageSize,include_metadata:o.includeMetadata,pdf_author:o.pdfAuthor,pdf_subject:o.pdfSubject,auto_crop:o.autoCrop,embed_fonts:o.embedFonts,optimize_for_web:o.optimizeForWeb,enable_hardware_acceleration:o.enableHardwareAcceleration,limit_fps:o.limitFps,max_fps:o.maxFps,auto_save_enabled:o.autoSaveEnabled,auto_save_interval:o.autoSaveInterval,auto_save_versions:o.autoSaveVersions,undo_levels:o.undoLevels,redo_levels:o.redoLevels,enable_keyboard_shortcuts:o.enableKeyboardShortcuts,debug_mode:o.debugMode,show_fps:o.showFps,default_canvas_width:o.defaultCanvasWidth,default_canvas_height:o.defaultCanvasHeight,default_canvas_unit:o.defaultCanvasUnit,canvas_background_color:o.canvasBackgroundColor,canvas_show_transparency:o.canvasShowTransparency,margin_top:o.marginTop,margin_right:o.marginRight,margin_bottom:o.marginBottom,margin_left:o.marginLeft,show_margins:o.showMargins};fetch(n.ajaxurl+"?action=pdf_builder_save_settings_page",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(de(de({},r),{},{nonce:n.nonce}))}).then(function(e){e.ok||console.warn("Erreur lors de la sauvegarde des paramÃ¨tres dans WordPress:",e.status)}).catch(function(e){console.warn("Erreur AJAX lors de la sauvegarde des paramÃ¨tres:",e)})}return o});case 1:return e.a(2)}},e)}),function(){var t=this,o=arguments;return new Promise(function(n,r){var a=e.apply(t,o);function i(e){le(a,n,r,i,l,"next",e)}function l(e){le(a,n,r,i,l,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}(),d=function(){var e=a(),t=l();e&&r(function(o){return de(de(de({},o),t),{},{defaultCanvasWidth:e.default_canvas_width||o.defaultCanvasWidth,defaultCanvasHeight:e.default_canvas_height||o.defaultCanvasHeight,defaultCanvasUnit:e.default_canvas_unit||o.defaultCanvasUnit,defaultOrientation:e.default_orientation||o.defaultOrientation,canvasBackgroundColor:e.canvas_background_color||o.canvasBackgroundColor,canvasShowTransparency:void 0!==e.canvas_show_transparency?e.canvas_show_transparency:o.canvasShowTransparency,containerBackgroundColor:e.container_background_color||o.containerBackgroundColor,containerShowTransparency:void 0!==e.container_show_transparency?e.container_show_transparency:o.containerShowTransparency,marginTop:e.margin_top||o.marginTop,marginRight:e.margin_right||o.marginRight,marginBottom:e.margin_bottom||o.marginBottom,marginLeft:e.margin_left||o.marginLeft,showMargins:void 0!==e.show_margins?e.show_margins:o.showMargins,showGrid:void 0!==e.show_grid?e.show_grid:o.showGrid,gridSize:e.grid_size||o.gridSize,gridColor:e.grid_color||o.gridColor,gridOpacity:e.grid_opacity||o.gridOpacity,snapToGrid:void 0!==e.snap_to_grid?e.snap_to_grid:o.snapToGrid,snapToElements:void 0!==e.snap_to_elements?e.snap_to_elements:o.snapToElements,snapToMargins:void 0!==e.snap_to_margins?e.snap_to_margins:o.snapToMargins,snapTolerance:e.snap_tolerance||o.snapTolerance,showGuides:void 0!==e.show_guides?e.show_guides:o.showGuides,lockGuides:void 0!==e.lock_guides?e.lock_guides:o.lockGuides,defaultZoom:e.default_zoom||o.defaultZoom,minZoom:e.min_zoom||o.minZoom,maxZoom:e.max_zoom||o.maxZoom,zoomStep:e.zoom_step||o.zoomStep,panWithMouse:void 0!==e.pan_with_mouse?e.pan_with_mouse:o.panWithMouse,smoothZoom:void 0!==e.smooth_zoom?e.smooth_zoom:o.smoothZoom,showZoomIndicator:void 0!==e.show_zoom_indicator?e.show_zoom_indicator:o.showZoomIndicator,zoomWithWheel:void 0!==e.zoom_with_wheel?e.zoom_with_wheel:o.zoomWithWheel,zoomToSelection:void 0!==e.zoom_to_selection?e.zoom_to_selection:o.zoomToSelection,showResizeHandles:!0,handleSize:e.handle_size||o.handleSize,handleColor:e.handle_color||o.handleColor,enableRotation:void 0!==e.enable_rotation?e.enable_rotation:o.enableRotation,rotationStep:e.rotation_step||o.rotationStep,rotationSnap:void 0!==e.rotation_snap?e.rotation_snap:o.rotationSnap,multiSelect:void 0!==e.multi_select?e.multi_select:o.multiSelect,selectAllShortcut:void 0!==e.select_all_shortcut?e.select_all_shortcut:o.selectAllShortcut,showSelectionBounds:void 0!==e.show_selection_bounds?e.show_selection_bounds:o.showSelectionBounds,copyPasteEnabled:void 0!==e.copy_paste_enabled?e.copy_paste_enabled:o.copyPasteEnabled,duplicateOnDrag:void 0!==e.duplicate_on_drag?e.duplicate_on_drag:o.duplicateOnDrag,exportQuality:e.export_quality||o.exportQuality,exportFormat:e.export_format||o.exportFormat,compressImages:void 0!==e.compress_images?e.compress_images:o.compressImages,imageQuality:e.image_quality||o.imageQuality,maxImageSize:e.max_image_size||o.maxImageSize,includeMetadata:void 0!==e.include_metadata?e.include_metadata:o.includeMetadata,pdfAuthor:e.pdf_author||o.pdfAuthor,pdfSubject:e.pdf_subject||o.pdfSubject,autoCrop:void 0!==e.auto_crop?e.auto_crop:o.autoCrop,embedFonts:void 0!==e.embed_fonts?e.embed_fonts:o.embedFonts,optimizeForWeb:void 0!==e.optimize_for_web?e.optimize_for_web:o.optimizeForWeb,enableHardwareAcceleration:void 0!==e.enable_hardware_acceleration?e.enable_hardware_acceleration:o.enableHardwareAcceleration,limitFps:void 0!==e.limit_fps?e.limit_fps:o.limitFps,maxFps:e.max_fps||o.maxFps,autoSaveEnabled:void 0!==e.auto_save_enabled?e.auto_save_enabled:o.autoSaveEnabled,autoSaveInterval:e.auto_save_interval||o.autoSaveInterval,autoSaveVersions:e.auto_save_versions||o.autoSaveVersions,undoLevels:e.undo_levels||o.undoLevels,redoLevels:e.redo_levels||o.redoLevels,enableKeyboardShortcuts:void 0!==e.enable_keyboard_shortcuts?e.enable_keyboard_shortcuts:o.enableKeyboardShortcuts,debugMode:void 0!==e.debug_mode?e.debug_mode:o.debugMode,showFps:void 0!==e.show_fps?e.show_fps:o.showFps,resizeHandleSize:e.canvas_handle_size||o.resizeHandleSize,resizeHandleColor:e.canvas_handle_color||o.resizeHandleColor,resizeHandleBorderColor:e.canvas_handle_hover_color||o.resizeHandleBorderColor,selectionBorderWidth:e.canvas_border_width||o.selectionBorderWidth,selectionBorderColor:e.canvas_border_color||o.selectionBorderColor,selectionBorderSpacing:e.canvas_border_spacing||o.selectionBorderSpacing,showResizeHandlesLegacy:void 0!==e.canvas_resize_handles_enabled?e.canvas_resize_handles_enabled:o.showResizeHandlesLegacy,showResizeZones:void 0!==e.canvas_element_borders_enabled?e.canvas_element_borders_enabled:o.showResizeZones,defaultTextColor:e.default_text_color||o.defaultTextColor,defaultBackgroundColor:e.default_background_color||o.defaultBackgroundColor,defaultFontSize:e.default_font_size||o.defaultFontSize})})};return{settings:n,updateSettings:c,resetToDefaults:function(){r({resizeHandleSize:12,resizeHandleColor:"#007cba",resizeHandleBorderColor:"#ffffff",selectionBorderWidth:2,selectionBorderColor:"var(--primary-color)",selectionBorderSpacing:2,selectionShadowOpacity:.1,resizeZoneSize:16,resizeZoneOpacity:.1,showResizeHandles:!0,showResizeZones:!0,selectionAnimation:!0})},refreshSettings:d}};function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var he=function(e){var t,o,n=e.showFps,a=(t=(0,i.useState)(0),o=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(t,o)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?pe(e,t):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],c=a[1],d=(0,i.useRef)(0),s=(0,i.useRef)(performance.now()),u=(0,i.useRef)(null);return(0,i.useEffect)(function(){if(n){var e=function(){var t=performance.now();d.current++,t-s.current>=1e3&&(c(Math.round(1e3*d.current/(t-s.current))),d.current=0,s.current=t),u.current=requestAnimationFrame(e)};return u.current=requestAnimationFrame(e),function(){u.current&&cancelAnimationFrame(u.current)}}},[n]),n?r.default.createElement("div",{style:{position:"fixed",top:"10px",right:"10px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#00ff00",padding:"5px 10px",borderRadius:"4px",fontFamily:"monospace",fontSize:"12px",fontWeight:"bold",zIndex:9999,pointerEvents:"none",userSelect:"none"}},"FPS: ",l):null};function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ge(){var e,t,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",r=o.toStringTag||"@@toStringTag";function a(o,n,r,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return be(d,"_invoke",function(o,n,r){var a,l,c,d=0,s=r||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,o){return a=t,l=0,c=e,f.n=o,i}};function p(o,n){for(l=o,c=n,t=0;!u&&d&&!r&&t<s.length;t++){var r,a=s[t],p=f.p,h=a[2];o>3?(r=h===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((r=o<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<h&&(r=o<3||a[0]>n||n>h)&&(a[4]=o,a[5]=n,f.n=h,l=0))}if(r||o>1)return i;throw u=!0,n}return function(r,s,h){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,h),l=s,c=h;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(r="next"),t=a[r]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:o.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(o,r,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(be(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,be(e,r,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,be(u,"constructor",d),be(d,"constructor",c),c.displayName="GeneratorFunction",be(d,r,"GeneratorFunction"),be(u),be(u,r,"Generator"),be(u,n,function(){return this}),be(u,"toString",function(){return"[object Generator]"}),(ge=function(){return{w:a,m:f}})()}function be(e,t,o,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}be=function(e,t,o,n){function a(t,o){be(e,t,function(e){return this._invoke(t,o,e)})}t?r?r(e,t,{value:o,enumerable:!n,configurable:!n,writable:!n}):e[t]=o:(a("next",0),a("throw",1),a("return",2))},be(e,t,o,n)}function ye(e,t,o,n,r,a,i){try{var l=e[a](i),c=l.value}catch(e){return void o(e)}l.done?t(c):Promise.resolve(c).then(n,r)}function ve(e){return function(){var t=this,o=arguments;return new Promise(function(n,r){var a=e.apply(t,o);function i(e){ye(a,n,r,i,l,"next",e)}function l(e){ye(a,n,r,i,l,"throw",e)}i(void 0)})}}function xe(e){return function(e){if(Array.isArray(e))return Ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function Se(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?we(Object(o),!0).forEach(function(t){ze(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):we(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function ze(e,t,o){return(t=function(e){var t=function(e){if("object"!=me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=me(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==me(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,l=[],c=!0,d=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(d)throw r}}return l}}(e,t)||Ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){if(e){if("string"==typeof e)return Ee(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Ee(e,t):void 0}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var ke=r.default.lazy(function(){return o.e(929).then(o.bind(o,929))}),Te=r.default.lazy(function(){return o.e(690).then(o.bind(o,690))}),Oe=r.default.lazy(function(){return o.e(752).then(o.bind(o,752))}),Be=r.default.lazy(function(){return o.e(702).then(o.bind(o,702))}),We=r.default.lazy(function(){return o.e(456).then(o.bind(o,456))}),Re=r.default.lazy(function(){return o.e(694).then(o.bind(o,694))}),je=function(e){var t,o,n=e.options,a=_e((0,i.useState)("select"),2),l=a[0],c=a[1],d=_e((0,i.useState)(!1),2),s=d[0],u=d[1],f=_e((0,i.useState)(!1),2),p=f[0],h=f[1],g=_e((0,i.useState)(null),2),b=g[0],y=g[1],w=_e((0,i.useState)(!1),2),S=w[0],z=w[1],_=_e((0,i.useState)({x:0,y:0}),2),C=_[0],E=_[1],k=_e((0,i.useState)(!1),2),T=k[0],O=k[1],B=_e((0,i.useState)({x:0,y:0}),2),W=B[0],R=B[1],j=_e((0,i.useState)({horizontal:[],vertical:[]}),2),A=j[0],F=j[1],M=_e((0,i.useState)(!1),2),D=(M[0],M[1],_e((0,i.useState)(null),2)),P=(D[0],D[1],fe()),I=(0,i.useCallback)(function(e){P.settings.lockGuides||F(function(t){return Se(Se({},t),{},{horizontal:[].concat(xe(t.horizontal),[e]).sort(function(e,t){return e-t})})})},[P.settings.lockGuides]),N=(0,i.useCallback)(function(e){P.settings.lockGuides||F(function(t){return Se(Se({},t),{},{vertical:[].concat(xe(t.vertical),[e]).sort(function(e,t){return e-t})})})},[P.settings.lockGuides]),H=(0,i.useCallback)(function(e,t){P.settings.lockGuides||F(function(o){return Se(Se({},o),{},ze({},e,o[e].filter(function(e){return e!==t})))})},[P.settings.lockGuides]),G=n.orderData||{invoice_number:"INV-001",invoice_date:"15/10/2025",order_number:"#12345",order_date:"15/10/2025",customer_name:"John Doe",customer_email:"john.doe@example.com",billing_address:"123 Rue de Test\n75001 Paris\nFrance",shipping_address:"456 Rue de Livraison\n75002 Paris\nFrance",payment_method:"Carte bancaire",order_status:"TraitÃ©e",subtotal:"45,00 â‚¬",discount:"-5,00 â‚¬",shipping:"5,00 â‚¬",tax:"9,00 â‚¬",total:"54,00 â‚¬",refund:"0,00 â‚¬",fees:"1,50 â‚¬",quote_number:"QUO-001",quote_date:"15/10/2025",quote_validity:"30 jours",quote_notes:"Conditions spÃ©ciales : paiement Ã  30 jours.",products:[{name:"Produit Test 1",quantity:1,price:"25,00 â‚¬",total:"25,00 â‚¬"},{name:"Produit Test 2",quantity:2,price:"10,00 â‚¬",total:"20,00 â‚¬"}]},L=oe({initialElements:n.initialElements||[],templateId:n.templateId||null,canvasWidth:n.width||595,canvasHeight:n.height||842,globalSettings:P.settings}),Z=(0,i.useCallback)(function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Modifier Ã©lÃ©ment",n=L.getAllElements();L.history.addToHistory(n,o),L.updateElement(e,t)},[L]),U=(0,i.useCallback)(function(){var e=L.history.undo();e&&L.setElements(e)},[L]),q=(0,i.useCallback)(function(){var e=L.history.redo();e&&L.setElements(e)},[L]),X=(0,i.useCallback)(function(e){P.updateSettings({showGrid:e})},[P]),Y=(0,i.useCallback)(function(e){P.updateSettings({snapToGrid:e})},[P]),V=(0,i.useRef)(null),K=(0,i.useRef)(null),$=(0,i.useRef)(null),J=v({onElementMove:function(e,t){Z(e,t,"DÃ©placer Ã©lÃ©ment")},onElementDrop:function(e,t){Z(e,t,"DÃ©poser Ã©lÃ©ment")},snapToGrid:P.settings.snapToGrid,gridSize:P.settings.gridSize,zoom:L.zoom.zoom,canvasWidth:L.canvasWidth,canvasHeight:L.canvasHeight,guides:A,snapToGuides:P.settings.snapToElements});ne({onDelete:L.deleteSelectedElements,onCopy:L.copySelectedElements,onPaste:L.pasteElements,onUndo:U,onRedo:q,onSave:L.saveTemplate,onZoomIn:L.zoom.zoomIn,onZoomOut:L.zoom.zoomOut});var Q=(0,i.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L.addElement(e,t),c("select")},[L]),ee=(0,i.useCallback)(function(e,t){var o=(null==t?void 0:t.ctrlKey)||(null==t?void 0:t.metaKey);L.selection.selectElement(e,o)},[L.selection]),te=((0,i.useCallback)(ve(ge().m(function e(){var t,o,n,r,a,i,l,c,d,s;return ge().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,0!==(n=L.getAllElements()).length){e.n=1;break}return alert("Aucun Ã©lÃ©ment Ã  imprimer. Ajoutez des Ã©lÃ©ments au canvas d'abord."),e.a(2);case 1:e.p=1,r=JSON.stringify(n),e.n=3;break;case 2:return e.p=2,d=e.v,console.error("âŒ Erreur lors de JSON.stringify:",d),console.error("Ã‰lÃ©ments problÃ©matiques:",n),alert("Erreur de sÃ©rialisation des Ã©lÃ©ments. VÃ©rifiez la console pour plus de dÃ©tails."),e.a(2);case 3:return(a=new FormData).append("action","pdf_builder_generate_pdf"),a.append("nonce",null===(t=window.pdfBuilderAjax)||void 0===t?void 0:t.nonce),a.append("elements",r),e.n=4,fetch(null===(o=window.pdfBuilderAjax)||void 0===o?void 0:o.ajaxurl,{method:"POST",body:a});case 4:if((i=e.v).ok){e.n=5;break}throw new Error("Erreur HTTP: ".concat(i.status));case 5:return e.n=6,i.json();case 6:if(!(l=e.v).success){e.n=7;break}y(pdfDataUrl),h(!0),e.n=8;break;case 7:throw console.error("Erreur serveur:",l.data),new Error((null===(c=l.data)||void 0===c?void 0:c.message)||"Erreur lors de la gÃ©nÃ©ration du PDF");case 8:e.n=10;break;case 9:e.p=9,s=e.v,console.error("Erreur lors de l'impression:",s),alert("Erreur lors de la gÃ©nÃ©ration du PDF: "+s.message);case 10:return e.a(2)}},e,null,[[1,2],[0,9]])})),[L]),(0,i.useCallback)(function(e){if(e.ctrlKey&&P.settings.showGuides&&!P.settings.lockGuides){var t=e.currentTarget.getBoundingClientRect(),o=e.clientX-t.left,n=e.clientY-t.top,r=(o-C.x)/L.zoom.zoom,a=(n-C.y)/L.zoom.zoom,i=L.canvasWidth/2,d=L.canvasHeight/2;Math.abs(r-i)<Math.abs(a-d)?I(Math.round(a)):N(Math.round(r))}else if(!e.target.closest("[data-element-id]")){if(l.startsWith("add-")){var s=e.currentTarget.getBoundingClientRect(),u=e.clientX-s.left,f=e.clientY-s.top,p=u/L.zoom.zoom,h=f/L.zoom.zoom,m="text",g={};switch(l){case"add-text":m="text";break;case"add-text-title":m="text",g={fontSize:24,fontWeight:"bold"};break;case"add-text-subtitle":m="text",g={fontSize:18,fontWeight:"bold"};break;case"add-rectangle":m="rectangle";break;case"add-circle":m="shape-circle";break;case"add-line":m="line";break;case"add-arrow":m="shape-arrow";break;case"add-triangle":m="shape-triangle";break;case"add-star":m="shape-star";break;case"add-divider":m="divider";break;case"add-image":m="image";break;default:l.startsWith("add-")&&(m=l.replace("add-",""))}return L.addElement(m,Se({x:Math.max(0,p-50),y:Math.max(0,h-25)},g)),void c("select")}L.selection.clearSelection()}},[L,l])),re=(0,i.useCallback)(function(e,t,o){var n=L.getElementById(e);if(n){var r={};if(t.includes(".")){var a=function(e,t,o){for(var n=t.split("."),r=n.pop(),a=Se({},e),i=a,l=0;l<n.length-1;l++){var c=n[l];i[c]&&"object"===me(i[c])?i[c]=Se({},i[c]):i[c]={},i=i[c]}var d=n[n.length-1];return d?(i[d]&&"object"===me(i[d])?i[d]=Se({},i[d]):i[d]={},i[d][r]=o):i[r]=o,a}(n,t,o);Object.assign(r,a)}else r[t]=o;Z(e,r,"Modifier ".concat(t))}},[L,Z]),ae=(0,i.useCallback)(function(e){e.forEach(function(e){var t=e.elementId,o=e.property,n=e.value;L.updateElement(t,ze({},o,n))})},[L]),ie=(0,i.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.preventDefault();var o=[];t?L.getElementById(t)&&o.push({label:"Copier",action:function(){return L.copySelectedElements()}},{label:"Dupliquer",action:function(){return L.duplicateElement(t)}},{type:"separator"},{label:"Supprimer",action:function(){return L.deleteElement(t)}}):(L.selection.selectedElements.length>0&&o.push({label:"Copier",action:function(){return L.copySelectedElements()}},{label:"Dupliquer",action:function(){return L.duplicateSelectedElements()}},{type:"separator"},{label:"Supprimer",action:function(){return L.deleteSelectedElements()}}),o.push({type:"separator"},{label:"Coller",action:function(){return L.pasteElements()}},{type:"separator"},{label:"Tout sÃ©lectionner",action:function(){return L.selectAll()}},{label:"DÃ©sÃ©lectionner",action:function(){return L.selection.clearSelection()}})),L.showContextMenu(e.clientX,e.clientY,o)},[L]),le=(0,i.useCallback)(function(e){"function"==typeof e&&e()},[]),ce=(0,i.useCallback)(function(){if(T)return"grabbing";switch(l){case"select":default:return"default";case"add-text":case"add-text-title":case"add-text-subtitle":return"text";case"add-rectangle":case"add-circle":case"add-line":case"add-arrow":case"add-triangle":case"add-star":case"add-divider":case"add-image":return"crosshair"}},[l,T]),de=(0,i.useCallback)(function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},[]),se=(0,i.useCallback)(function(e){e.preventDefault();try{var t=e.dataTransfer.getData("application/json");if(!t||""===t.trim())return;var o=JSON.parse(t);if("new-element"===o.type){var n=e.currentTarget.getBoundingClientRect(),r=e.clientX-n.left,a=e.clientY-n.top,i=r/L.zoom.zoom,l=a/L.zoom.zoom;L.addElement(o.elementType,Se({x:Math.max(0,i-50),y:Math.max(0,l-25)},o.defaultProps))}}catch(t){t instanceof SyntaxError&&e.dataTransfer.getData("application/json")&&console.error("Erreur lors du parsing des donnÃ©es de drop:",t)}},[L]),ue=(0,i.useCallback)(function(e){if(P.settings.zoomWithWheel){e.preventDefault();var t=1+P.settings.zoomStep/100,o=e.deltaY>0?-1:1,n=$.current;if(n){var r=n.getBoundingClientRect(),a=e.clientX-r.left,i=e.clientY-r.top,l=o>0?t:1/t;L.zoom.zoomToPoint(a,i,l)}}},[P.settings.zoomWithWheel,P.settings.zoomStep,L.zoom]);(0,i.useEffect)(function(){var e=$.current;if(e&&P.settings.zoomWithWheel){var t=function(e){ue(e)};return e.addEventListener("wheel",t,{passive:!1}),function(){e.removeEventListener("wheel",t)}}},[ue,P.settings.zoomWithWheel]);var pe=(0,i.useCallback)(function(e){P.settings.panWithMouse&&(1===e.button||0===e.button&&e.altKey)&&(e.preventDefault(),O(!0),R({x:e.clientX,y:e.clientY}))},[P.settings.panWithMouse]),be=(0,i.useCallback)(function(e){if(T){var t=e.clientX-W.x,o=e.clientY-W.y;E(function(e){return{x:e.x+t,y:e.y+o}}),R({x:e.clientX,y:e.clientY})}},[T,W]),ye=(0,i.useCallback)(function(){O(!1)},[]),we=(0,i.useCallback)(function(e){P.settings.zoomToSelection&&(e.target.closest("[data-element-id]")||L.selection.selectedElements.length>0&&L.zoomToSelection())},[P.settings.zoomToSelection,L]);return r.default.createElement("div",{className:"pdf-canvas-editor",ref:V},r.default.createElement("header",{className:"editor-header"},r.default.createElement("h2",null,"Ã‰diteur PDF - ",n.isNew?"Nouveau Template":n.templateName),r.default.createElement("nav",{className:"editor-actions"},r.default.createElement("button",{className:"btn btn-secondary",onClick:function(){return u(!0)}},"ðŸ‘ï¸ AperÃ§u"),r.default.createElement("button",{className:"btn btn-primary",onClick:function(){return L.saveTemplate()},disabled:L.isSaving},L.isSaving?"â³ Sauvegarde...":n.isNew?"ðŸ’¾ Sauvegarder":"âœï¸ Modifier"))),r.default.createElement(x,{selectedTool:l,onToolSelect:c,zoom:L.zoom.zoom,onZoomChange:L.zoom.setZoomLevel,showGrid:P.settings.showGrid,onShowGridChange:X,snapToGrid:P.settings.snapToGrid,onSnapToGridChange:Y,onUndo:U,onRedo:q,canUndo:L.history.canUndo(),canRedo:L.history.canRedo()}),r.default.createElement("main",{className:"editor-workspace"},!s&&r.default.createElement("aside",{className:"editor-sidebar left-sidebar"},r.default.createElement(r.default.Suspense,{fallback:r.default.createElement("div",{className:"loading"},"Chargement...")},r.default.createElement(We,{onAddElement:Q,selectedTool:l,onToolSelect:c}))),r.default.createElement("section",{className:"canvas-section",ref:$,onContextMenu:ie,onDragOver:de,onDrop:se,onMouseDown:pe,onMouseMove:be,onMouseUp:ye,onMouseLeave:ye,onDoubleClick:we,style:{cursor:ce(),backgroundColor:P.settings.containerShowTransparency?"transparent":P.settings.containerBackgroundColor||"#f8f9fa",backgroundImage:P.settings.containerShowTransparency?"linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%)":"none",backgroundSize:P.settings.containerShowTransparency?"20px 20px":"auto",backgroundPosition:P.settings.containerShowTransparency?"0 0, 0 10px, 10px -10px, -10px 0px":"0 0"}},r.default.createElement("div",{className:"canvas-zoom-wrapper",style:{transform:"translate(".concat(C.x,"px, ").concat(C.y,"px) scale(").concat(L.zoom.zoom,")"),transformOrigin:"center",cursor:T?"grabbing":"default",transition:P.settings.smoothZoom?"transform 0.2s ease-out":"none",willChange:P.settings.enableHardwareAcceleration?"transform":"auto"}},r.default.createElement("div",{className:"canvas",ref:K,onClick:te,style:{width:L.canvasWidth,height:"auto",minHeight:L.canvasHeight,position:"relative",backgroundColor:P.settings.canvasShowTransparency?"transparent":P.settings.canvasBackgroundColor||"#ffffff",backgroundImage:P.settings.canvasShowTransparency?"linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%)":"none",backgroundSize:P.settings.canvasShowTransparency?"20px 20px":"auto",backgroundPosition:P.settings.canvasShowTransparency?"0 0, 0 10px, 10px -10px, -10px 0px":"0 0"}},P.settings.showGrid&&r.default.createElement("div",{className:"canvas-grid",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:"\n                      linear-gradient(to right, ".concat(P.settings.gridColor).concat(Math.round(2.55*P.settings.gridOpacity).toString(16).padStart(2,"0")," 1px, transparent 1px),\n                      linear-gradient(to bottom, ").concat(P.settings.gridColor).concat(Math.round(2.55*P.settings.gridOpacity).toString(16).padStart(2,"0")," 1px, transparent 1px)\n                    "),backgroundSize:"".concat(P.settings.gridSize,"px ").concat(P.settings.gridSize,"px"),pointerEvents:"none",zIndex:1}}),P.settings.showGuides&&r.default.createElement("div",{className:"canvas-guides"},A.horizontal.map(function(e,t){return r.default.createElement("div",{key:"h-guide-".concat(t),className:"canvas-guide horizontal-guide",onClick:function(t){t.stopPropagation(),P.settings.lockGuides||H("horizontal",e)},style:{position:"absolute",top:"".concat(e,"px"),left:0,width:"100%",height:"2px",backgroundColor:"#007cba",cursor:P.settings.lockGuides?"default":"pointer",zIndex:2,opacity:.7},title:"Guide horizontal Ã  ".concat(e,"px - ").concat(P.settings.lockGuides?"VerrouillÃ©":"Cliquer pour supprimer")})}),A.vertical.map(function(e,t){return r.default.createElement("div",{key:"v-guide-".concat(t),className:"canvas-guide vertical-guide",onClick:function(t){t.stopPropagation(),P.settings.lockGuides||H("vertical",e)},style:{position:"absolute",top:0,left:"".concat(e,"px"),height:"100%",width:"2px",backgroundColor:"#007cba",cursor:P.settings.lockGuides?"default":"pointer",zIndex:2,opacity:.7},title:"Guide vertical Ã  ".concat(e,"px - ").concat(P.settings.lockGuides?"VerrouillÃ©":"Cliquer pour supprimer")})})),L.elements.filter(function(e){return!e.type.startsWith("woocommerce-")}).map(function(e){return r.default.createElement(m,{key:e.id,element:e,isSelected:L.selection.selectedElements.includes(e.id),zoom:1,snapToGrid:P.settings.snapToGrid,gridSize:P.settings.gridSize,canvasWidth:L.canvasWidth,canvasHeight:L.canvasHeight,onSelect:function(){return ee(e.id)},onUpdate:function(t){return L.updateElement(e.id,t)},onRemove:function(){return L.deleteElement(e.id)},onContextMenu:function(t){return ie(t,e.id)},dragAndDrop:J,enableRotation:P.settings.enableRotation,rotationStep:P.settings.rotationStep,rotationSnap:P.settings.rotationSnap,guides:A,snapToGuides:P.settings.snapToElements})}),L.elements.filter(function(e){return e.type.startsWith("woocommerce-")}).map(function(e){return r.default.createElement(r.default.Suspense,{key:e.id,fallback:null},r.default.createElement(Be,{element:e,isSelected:L.selection.selectedElements.includes(e.id),onSelect:ee,onUpdate:L.updateElement,dragAndDrop:J,zoom:1,canvasWidth:L.canvasWidth,canvasHeight:L.canvasHeight,orderData:G,onContextMenu:function(t){return ie(t,e.id)},snapToGrid:P.settings.snapToGrid,gridSize:P.settings.gridSize,guides:A,snapToGuides:P.settings.snapToElements}))})))),!s&&r.default.createElement("aside",{className:"editor-sidebar right-sidebar ".concat(S?"collapsed":"")},!S&&r.default.createElement(r.default.Suspense,{fallback:r.default.createElement("div",{className:"loading"},"Chargement...")},r.default.createElement(Re,{selectedElements:L.selection.selectedElements,elements:L.elements,onPropertyChange:re,onBatchUpdate:ae})))),!s&&r.default.createElement("button",{className:"sidebar-toggle-fixed",onClick:function(){return z(!S)},title:S?"Agrandir le panneau":"RÃ©duire le panneau",style:{position:"fixed",top:"50%",right:S?"80px":"420px",transform:"translateY(-50%)",zIndex:999999}},S?"â—€":"â–¶"),L.contextMenu.contextMenu&&r.default.createElement(r.default.Suspense,{fallback:null},r.default.createElement(ke,{menu:L.contextMenu.contextMenu,onAction:le,isAnimating:L.contextMenu.isAnimating||!1,onClose:L.contextMenu.hideContextMenu})),r.default.createElement("footer",{className:"editor-status"},r.default.createElement("span",null,"Ã‰lÃ©ments: ",L.elements.length),r.default.createElement("span",null,"|"),P.settings.showZoomIndicator&&r.default.createElement(r.default.Fragment,null,r.default.createElement("span",null,"Zoom: ",Math.round(100*L.zoom.zoom),"%"),r.default.createElement("span",null,"|")),r.default.createElement("span",null,"Outil: ",l),L.selection.selectedElements.length>0&&r.default.createElement(r.default.Fragment,null,r.default.createElement("span",null,"|"),r.default.createElement("span",null,"Ã‰lÃ©ments sÃ©lectionnÃ©s: ",L.selection.selectedElements.length))),r.default.createElement(r.default.Suspense,{fallback:null},r.default.createElement(Te,{isOpen:s,onClose:function(){u(!1)},elements:L.elements,canvasWidth:L.canvasWidth,canvasHeight:L.canvasHeight,ajaxurl:null===(t=window.pdfBuilderAjax)||void 0===t?void 0:t.ajaxurl,pdfBuilderNonce:null===(o=window.pdfBuilderAjax)||void 0===o?void 0:o.nonce,useServerPreview:!1,onOpenPDFModal:function(e){y(e),h(!0),u(!1)}})),r.default.createElement(r.default.Suspense,{fallback:null},r.default.createElement(Oe,{isOpen:p,onClose:function(){h(!1),b&&b.startsWith("blob:")&&setTimeout(function(){URL.revokeObjectURL(b)},100),y(null)},pdfUrl:b,title:"PDF GÃ©nÃ©rÃ©"})),r.default.createElement(he,{showFps:P.settings.showFps}))};function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Fe(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function Me(e,t,o){return(t=Pe(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function De(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pe(n.key),n)}}function Pe(e){var t=function(e){if("object"!=Ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=Ae(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ae(t)?t:t+""}r.default.memo(je);try{var Ie=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.version="2.0.0",this.editors=new Map,this._hooks=n,this._forceInclude={useHistory:z,useRotation:s,useResize:l.s};try{var t=z(),o=s(function(){}),r=l.s();this._dummyInstances={dummyHistory:t,dummyRotation:o,dummyResize:r}}catch(e){}},t=[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=document.getElementById(e);if(o){var n=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(o),!0).forEach(function(t){Me(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Fe(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({templateId:null,templateName:null,isNew:!0,initialElements:[],width:595,height:842,zoom:1,gridSize:10,snapToGrid:!0},t),i=r.default.createElement(je,{options:n});a.render(i,o),this.editors.set(e,{container:o,options:n})}}},{key:"destroy",value:function(e){var t=this.editors.get(e);t&&(a.unmountComponentAtNode(t.container),this.editors.delete(e))}},{key:"getData",value:function(e){return null}}],t&&De(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());"undefined"!=typeof window&&(window.PDFBuilderPro=Ie,window.pdfBuilderPro=Ie)}catch(e){window.PDFBuilderPro={init:function(){return null},version:"error"},window.pdfBuilderPro=window.PDFBuilderPro}}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,a),o.exports}a.m=n,e=[],a.O=(t,o,n,r)=>{if(!o){var i=1/0;for(s=0;s<e.length;s++){for(var[o,n,r]=e[s],l=!0,c=0;c<o.length;c++)(!1&r||i>=r)&&Object.keys(a.O).every(e=>a.O[e](o[c]))?o.splice(c--,1):(l=!1,r<i&&(i=r));if(l){e.splice(s--,1);var d=n();void 0!==d&&(t=d)}}return t}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[o,n,r]},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,o)=>(a.f[o](e,t),t),[])),a.u=e=>e+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},o="wp-pdf-builder-pro:",a.l=(e,n,r,i)=>{if(t[e])t[e].push(n);else{var l,c;if(void 0!==r)for(var d=document.getElementsByTagName("script"),s=0;s<d.length;s++){var u=d[s];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==o+r){l=u;break}}l||(c=!0,(l=document.createElement("script")).charset="utf-8",a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",o+r),l.src=e),t[e]=[n];var f=(o,n)=>{l.onerror=l.onload=null,clearTimeout(p);var r=t[e];if(delete t[e],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach(e=>e(n)),o)return o(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),c&&document.head.appendChild(l)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var n=o.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=o[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={967:0};a.f.j=(t,o)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var r=new Promise((o,r)=>n=e[t]=[o,r]);o.push(n[2]=r);var i=a.p+a.u(t),l=new Error;a.l(i,o=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}},"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,o)=>{var n,r,[i,l,c]=o,d=0;if(i.some(t=>0!==e[t])){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(c)var s=c(a)}for(t&&t(o);d<i.length;d++)r=i[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(s)},o=self.webpackChunkwp_pdf_builder_pro=self.webpackChunkwp_pdf_builder_pro||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=a.O(void 0,[96],()=>a(680));i=a.O(i)})();