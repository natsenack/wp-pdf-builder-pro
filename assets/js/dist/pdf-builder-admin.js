/*! For license information please see pdf-builder-admin.js.LICENSE.txt */
(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{useCanvasState:()=>le,useClipboard:()=>M,useContextMenu:()=>U,useDragAndDrop:()=>S,useHistory:()=>_,useKeyboardShortcuts:()=>ce,useResize:()=>f,useRotation:()=>h,useSelection:()=>P,useZoom:()=>L});const r=React;var n=e.n(r);const o=ReactDOM;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){var t=e.onElementResize,n=e.snapToGrid,o=void 0===n||n,a=e.gridSize,i=void 0===a?10:a,c=e.minWidth,u=void 0===c?20:c,f=e.minHeight,p=void 0===f?20:f,m=e.zoom,h=void 0===m?1:m,b=e.canvasRect,g=void 0===b?null:b,y=e.canvasWidth,v=void 0===y?595:y,x=e.canvasHeight,w=void 0===x?842:x,R=e.guides,E=void 0===R?{horizontal:[],vertical:[]}:R,S=e.snapToGuides,C=void 0===S||S,k=e.elementType,z=void 0===k?null:k,_=d((0,r.useState)(!1),2),T=_[0],B=_[1],N=d((0,r.useState)(null),2),W=N[0],O=N[1],F=(0,r.useRef)({x:0,y:0}),A=(0,r.useRef)({x:0,y:0,width:0,height:0}),j=(0,r.useCallback)(function(e){return o?Math.round(e/i)*i:e},[o,i]),P=(0,r.useCallback)(function(e){if(!C)return e;var t,r=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=s(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw o}}}}(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?E.vertical:E.horizontal);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(Math.abs(e-n)<=5)return n}}catch(e){r.e(e)}finally{r.f()}return e},[C,E]),D=(0,r.useCallback)(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e;return r=j(r),P(r,t)},[j,P]),M=(0,r.useCallback)(function(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(e.preventDefault(),e.stopPropagation(),e.target&&e.target.isConnected)if(e.target.parentNode&&e.target.parentNode.isConnected){B(!0),O(r);var i=o||g||{left:0,top:0},c=a||h||1;F.current={x:(e.clientX-i.left)/c,y:(e.clientY-i.top)/c},A.current=l({},n);var d=function(e){var n=(e.clientX-i.left)/c,a=(e.clientY-i.top)/c,d=n-F.current.x,s=a-F.current.y,f=l({},A.current),m="divider"===z||"line"===z;switch(r){case"nw":m?(f.x=D(A.current.x+d,!1),f.width=D(A.current.width-d,!1)):(f.x=D(A.current.x+d,!1),f.y=D(A.current.y+s,!0),f.width=D(A.current.width-d,!1),f.height=D(A.current.height-s,!0));break;case"ne":m?f.width=D(A.current.width+d,!1):(f.y=D(A.current.y+s,!0),f.width=D(A.current.width+d,!1),f.height=D(A.current.height-s,!0));break;case"sw":m?(f.x=D(A.current.x+d,!1),f.width=D(A.current.width-d,!1)):(f.x=D(A.current.x+d,!1),f.width=D(A.current.width-d,!1),f.height=D(A.current.height+s,!0));break;case"se":m?f.width=D(A.current.width+d,!1):(f.width=D(A.current.width+d,!1),f.height=D(A.current.height+s,!0));break;case"n":m||(f.y=D(A.current.y+s,!0),f.height=D(A.current.height-s,!0));break;case"s":m||(f.height=D(A.current.height+s,!0));break;case"w":f.x=D(A.current.x+d,!1),f.width=D(A.current.width-d,!1);break;case"e":f.width=D(A.current.width+d,!1)}f.width<u&&(r.includes("w")&&(f.x=A.current.x+A.current.width-u),f.width=u),f.height<p&&(r.includes("n")&&(f.y=A.current.y+A.current.height-p),f.height=p);var h=o?o.width/c:v,b=o?o.height/c:w;f.x=Math.max(0,Math.min(h-f.width,f.x)),f.y=Math.max(0,Math.min(b-f.height,f.y)),t&&t(f)},s=function(){B(!1),O(null),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",s)}else console.warn("Resize handle parent no longer exists in DOM");else console.warn("Resize handle target no longer exists in DOM")},[j,u,p,t,h,g,v,w]);return{isResizing:T,resizeHandle:W,handleResizeStart:M}};function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=p((0,r.useState)(!1),2),a=o[0],i=o[1],l=p((0,r.useState)({angle:0,centerX:0,centerY:0}),2),c=l[0],d=l[1],s=(0,r.useCallback)(function(r,o){r.preventDefault(),r.stopPropagation(),i(!0);var l=r.currentTarget.getBoundingClientRect(),s=l.left+l.width/2,u=l.top+l.height/2,f=r.clientX-s,p=r.clientY-u,m=Math.atan2(p,f)*(180/Math.PI);d({angle:m-(o.rotation||0),centerX:s,centerY:u});var h=function(r){if(a){var o=r.clientX-s,i=r.clientY-u,l=Math.atan2(i,o)*(180/Math.PI);l-=c.angle,n&&(l=Math.round(l/t)*t),e(l=(l%360+360)%360)}},b=function(){i(!1),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",b)},[a,c,t,n,e]);return{isRotating:a,handleRotationStart:s}};function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){return(t=function(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e){var t,n,o,a,i,l,c,d,s,u,p,m,b,g,x,w=e.element,R=e.isSelected,E=e.zoom,S=e.snapToGrid,C=e.gridSize,k=e.canvasWidth,z=e.canvasHeight,_=e.onSelect,T=e.onUpdate,B=(e.onRemove,e.onContextMenu),N=e.dragAndDrop,W=e.enableRotation,O=void 0===W||W,F=e.rotationStep,A=void 0===F?15:F,j=e.rotationSnap,P=void 0===j||j,D=e.guides,M=void 0===D?{horizontal:[],vertical:[]}:D,I=e.snapToGuides,H=void 0===I||I,L=(0,r.useRef)(null),G=(0,r.useRef)(null);(0,r.useEffect)(function(){w&&w.id&&(w.x,w.y,w.width,w.height)},[w.x,w.y,w.width,w.height,E,w.id,w.type]);var q,U,V,Z,X,Y,J,K,Q,$,ee,te,re,ne,oe,ae,ie,le,ce,de,se,ue,fe,pe,me,he,be,ge,ye,ve,xe,we,Re,Ee,Se,Ce,ke,ze,_e,Te=f({onElementResize:function(e){T({x:e.x,y:e.y,width:e.width,height:e.height})},snapToGrid:S,gridSize:C,canvasWidth:k,canvasHeight:z,guides:M,snapToGuides:H,elementType:w.type}),Be=h(function(e){T({rotation:e})},A,P),Ne=(0,r.useCallback)(function(e){if(e.stopPropagation(),R){var t=L.current.closest(".canvas-zoom-wrapper");if(t){var r=t.getBoundingClientRect(),n=L.current.getBoundingClientRect(),o=(n.left,r.left,n.top,r.top,n.width,n.height,(e.clientX-r.left)/E),a=(e.clientY-r.top)/E,i=8/E,l=w.x,c=w.y,d=w.x+w.width,s=w.y+w.height,u=[{name:"nw",x:l,y:c},{name:"ne",x:d,y:c},{name:"sw",x:l,y:s},{name:"se",x:d,y:s},{name:"n",x:l+w.width/2,y:c},{name:"s",x:l+w.width/2,y:s},{name:"w",x:l,y:c+w.height/2},{name:"e",x:d,y:c+w.height/2}].find(function(e){return o>=e.x-i/2&&o<=e.x+i/2&&a>=e.y-i/2&&a<=e.y+i/2});if(u){var f=L.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();Te.handleResizeStart(e,u.name,{x:w.x,y:w.y,width:w.width,height:w.height},f,E)}else{var p=L.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();G.current=p,N.handleMouseDown(e,w.id,{left:w.x,top:w.y,width:w.width,height:w.height},p,E,w.type)}}}else _()},[R,_,w,E,Te,N]),We=(0,r.useCallback)(function(e){if(e.stopPropagation(),"text"===w.type){var t=w.content||w.text||"",r=prompt("Modifier le texte:",t);if(null===r)return;var n=v({},void 0!==w.content?"content":"text",r);T(n)}},[w,T]),Oe=(0,r.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),B&&B(e,w.id)},[B,w.id]),Fe=w.padding||0,Ae=useMemo(function(){return y(y({position:"absolute",left:(w.x+Fe)*E,top:(w.y+Fe)*E,width:Math.max(1,w.width-2*Fe)*E,height:Math.max(1,w.height-2*Fe)*E,cursor:N.isDragging?"grabbing":"grab",userSelect:"none","--selection-border-width":"2px","--selection-border-color":"#3b82f6","--selection-border-spacing":"2px","--selection-shadow-opacity":"0.1","--show-resize-handles":R?"block":"none","--resize-handle-size":"".concat(10*E,"px"),"--resize-handle-color":"#3b82f6","--resize-handle-border-color":"white","--resize-handle-offset":"".concat(-5*E,"px"),"--element-border-width":"2px","--resize-zone-size":"16px","--show-resize-zones":R?"auto":"none"},(e=w.type,["product_table","customer_info","company_logo","company_info","order_number","document_type","progress-bar"].includes(e)?function(e){return y({backgroundColor:"transparent",boxSizing:"border-box"},e.borderWidth&&e.borderWidth>0?{border:"".concat(e.borderWidth*E,"px ").concat(e.borderStyle||"solid"," ").concat(e.borderColor||"#e5e7eb")}:{})}(w):{backgroundColor:w.backgroundOpacity&&w.backgroundColor&&"transparent"!==w.backgroundColor?w.backgroundColor+Math.round(255*w.backgroundOpacity).toString(16).padStart(2,"0"):w.backgroundColor||"transparent",border:w.borderWidth?"".concat(w.borderWidth*E,"px ").concat(w.borderStyle||"solid"," ").concat(w.borderColor||"transparent"):"none"})),{},{borderRadius:w.borderRadius?"".concat(w.borderRadius*E,"px"):"0px",opacity:(w.opacity||100)/100,transform:"".concat(N.draggedElementId===w.id?"translate(".concat(N.dragOffset.x*E,"px, ").concat(N.dragOffset.y*E,"px) "):"","rotate(").concat(w.rotation||0,"deg) scale(").concat(w.scale||100,"%)"),filter:"brightness(".concat(w.brightness||100,"%) contrast(").concat(w.contrast||100,"%) saturate(").concat(w.saturate||100,"%)"),boxShadow:w.boxShadowColor?"0px ".concat(w.boxShadowSpread||0,"px ").concat(w.boxShadowBlur||0,"px ").concat(w.boxShadowColor):w.shadow?"".concat(w.shadowOffsetX||2,"px ").concat(w.shadowOffsetY||2,"px 4px ").concat(w.shadowColor||"#000000","40"):"none"},function(e,t){switch(e.type){case"text":return{fontSize:(e.fontSize||14)*t,fontFamily:e.fontFamily||"Arial",color:e.color||"#1e293b",fontWeight:e.fontWeight||"normal",fontStyle:e.fontStyle||"normal",textAlign:e.textAlign||"left",textDecoration:e.textDecoration||"none",lineHeight:e.lineHeight||"normal",display:"flex",alignItems:"center",justifyContent:"center"===e.textAlign?"center":"right"===e.textAlign?"flex-end":"flex-start",wordBreak:"break-word",overflow:"hidden"};case"rectangle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius,"px"):"0"};case"image":return e.src||e.imageUrl?{backgroundImage:"url(".concat(e.src||e.imageUrl,")"),backgroundSize:e.objectFit||e.fit||"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{backgroundColor:e.backgroundColor||"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",fontSize:12*t};case"line":return{borderTop:"".concat(e.lineWidth||1,"px solid ").concat(e.lineColor||"#6b7280"),height:"".concat(Math.max(e.lineWidth||1,12),"px"),width:"100%",cursor:"pointer",backgroundColor:"transparent"};case"layout-header":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14*t,fontWeight:"bold",color:e.color||"#64748b"};case"layout-footer":case"layout-sidebar":case"layout-section":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#64748b"};case"layout-container":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#94a3b8"};case"shape-rectangle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"0"};case"shape-circle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:"50%"};case"shape-line":return{backgroundColor:e.backgroundColor||"transparent",height:"100%"};case"shape-arrow":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(0% 50%, 70% 0%, 70% 40%, 100% 40%, 100% 60%, 70% 60%, 70% 100%)"};case"shape-triangle":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"};case"shape-star":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"};case"divider":return{backgroundColor:e.backgroundColor||"#e5e7eb",height:"16px",cursor:"pointer",borderRadius:"2px"};case"line":return{backgroundColor:e.backgroundColor||"#64748b",height:"12px",cursor:"pointer"};default:return{backgroundColor:e.backgroundColor||"transparent",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#333333"}}}(w,E));var e},[w.x,w.y,w.width,w.height,w.rotation,w.scale,w.backgroundColor,w.backgroundOpacity,w.borderWidth,w.borderStyle,w.borderColor,w.borderRadius,w.opacity,w.brightness,w.contrast,w.saturate,w.boxShadowColor,w.boxShadowSpread,w.boxShadowBlur,w.shadow,w.shadowOffsetX,w.shadowOffsetY,w.shadowColor,w.type,Fe,E,R,N.isDragging,N.draggedElementId,N.dragOffset]);return React.createElement(React.Fragment,null,React.createElement("div",{ref:L,"data-element-id":w.id,className:"canvas-element ".concat(R?"selected":""),style:Ae,onMouseDown:Ne,onDoubleClick:We,onContextMenu:Oe,draggable:!1},"text"===w.type?w.content||w.text||"Texte":"product_table"===w.type?null:"image"!==w.type||w.src?"line"===w.type?null:"layout-header"===w.type?"[H] En-tÃªte":"layout-footer"===w.type?"ðŸ“„ Pied de Page":"layout-sidebar"===w.type?"ðŸ“„ Barre LatÃ©rale":"layout-section"===w.type?"ðŸ“„ Section":"layout-container"===w.type?"ðŸ“¦ Conteneur":"shape-rectangle"===w.type?"â–­":"shape-circle"===w.type?"â—‹":"shape-line"===w.type?null:"shape-arrow"===w.type?"â†’":"shape-triangle"===w.type?"â–³":"shape-star"===w.type?"â­":"divider"===w.type?null:"image-upload"===w.type?"ðŸ“¤ TÃ©lÃ©charger":"logo"===w.type?"ðŸ·ï¸ Logo":"barcode"===w.type?"ðŸ“Š 123456":"qrcode"===w.type||"qrcode-dynamic"===w.type?"ðŸ“± QR":"icon"===w.type?w.content||"ðŸŽ¯":"dynamic-text"===w.type?w.content||"{{variable}}":"formula"===w.type?w.content||"{{prix * quantite}}":"conditional-text"===w.type?w.content||'{{condition ? "Oui" : "Non"}}':"counter"===w.type?w.content||"1":"date-dynamic"===w.type?w.content||"{{date|format:Y-m-d}}":"currency"===w.type?w.content||"{{montant|currency:EUR}}":"table-dynamic"===w.type?"ðŸ“Š Tableau":"gradient-box"===w.type?"ðŸŒˆ DÃ©gradÃ©":"shadow-box"===w.type?"ðŸ“¦ Ombre":"rounded-box"===w.type?"ðŸ”„ Arrondi":"border-box"===w.type?"ðŸ”² Bordure":"background-pattern"===w.type?"ðŸŽ¨ Motif":"watermark"===w.type?w.content||"CONFIDENTIEL":"progress-bar"===w.type||"product_table"===w.type||"customer_info"===w.type?null:"image"!==w.type&&"rectangle"!==w.type&&"company_logo"!==w.type&&"order_number"!==w.type&&"company_info"!==w.type&&"document_type"!==w.type?w.type:null:"ðŸ“· Image","product_table"===w.type&&(Ce=(we=[{name:"Produit A - Description du produit",sku:"SKU001",quantity:2,price:19.99,total:39.98},{name:"Produit B - Un autre article",sku:"SKU002",quantity:1,price:29.99,total:29.99}].reduce(function(e,t){return e+t.total},0))+(Re=w.showShipping?5:0)+(Ee=w.showTaxes?2.25:0)+(Se=w.showDiscount?-5:0),ke=function(){for(var e=["image","name","sku","quantity","price","total"],t=e.length-1;t>=0;t--){var r;if(!1!==(null===(r=w.columns)||void 0===r?void 0:r[e[t]]))return e[t]}return"total"}(),ze=function(){var e={default:{headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#000000",altRowBg:"#fafbfc",borderWidth:2,headerTextColor:"#334155",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderRadius:"4px"},classic:{headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#334155",altRowBg:"#ffffff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e293b",headerFontWeight:"700",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(0, 0, 0, 0.15)",borderRadius:"0px"},striped:{headerBg:"#3b82f6",headerBorder:"#2563eb",rowBorder:"#e2e8f0",altRowBg:"#f8fafc",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 4px rgba(59, 130, 246, 0.2)",borderRadius:"6px"},bordered:{headerBg:"#ffffff",headerBorder:"#374151",rowBorder:"#d1d5db",altRowBg:"#ffffff",borderWidth:2,headerTextColor:"#111827",rowTextColor:"#111827",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 12px rgba(0, 0, 0, 0.1), inset 0 0 0 1px #e5e7eb",borderRadius:"8px"},minimal:{headerBg:"#ffffff",headerBorder:"#d1d5db",rowBorder:"#f3f4f6",altRowBg:"#ffffff",borderWidth:.5,headerTextColor:"#6b7280",rowTextColor:"#6b7280",headerFontWeight:"500",headerFontSize:"10px",rowFontSize:"9px",shadow:"none",borderRadius:"0px"},modern:{headerBg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",headerBorder:"#5b21b6",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#6b21a8",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 20px rgba(102, 126, 234, 0.25)",borderRadius:"8px"},blue_ocean:{headerBg:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e3a8a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(59, 130, 246, 0.3)",borderRadius:"6px"},emerald_forest:{headerBg:"linear-gradient(135deg, #064e3b 0%, #10b981 100%)",headerBorder:"#065f46",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#064e3b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(16, 185, 129, 0.3)",borderRadius:"6px"},sunset_orange:{headerBg:"linear-gradient(135deg, #9a3412 0%, #f97316 100%)",headerBorder:"#c2410c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(249, 115, 22, 0.3)",borderRadius:"6px"},royal_purple:{headerBg:"linear-gradient(135deg, #581c87 0%, #a855f7 100%)",headerBorder:"#7c3aed",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#581c87",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(168, 85, 247, 0.3)",borderRadius:"6px"},rose_pink:{headerBg:"linear-gradient(135deg, #be185d 0%, #f472b6 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#be185d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(244, 114, 182, 0.3)",borderRadius:"6px"},teal_aqua:{headerBg:"linear-gradient(135deg, #0f766e 0%, #14b8a6 100%)",headerBorder:"#0d9488",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#0f766e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(20, 184, 166, 0.3)",borderRadius:"6px"},crimson_red:{headerBg:"linear-gradient(135deg, #991b1b 0%, #ef4444 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#991b1b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(239, 68, 68, 0.3)",borderRadius:"6px"},amber_gold:{headerBg:"linear-gradient(135deg, #92400e 0%, #f59e0b 100%)",headerBorder:"#d97706",rowBorder:"#fef3c7",altRowBg:"#fffbeb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#92400e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(245, 158, 11, 0.3)",borderRadius:"6px"},indigo_night:{headerBg:"linear-gradient(135deg, #312e81 0%, #6366f1 100%)",headerBorder:"#4338ca",rowBorder:"#e0e7ff",altRowBg:"#eef2ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#312e81",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(99, 102, 241, 0.3)",borderRadius:"6px"},slate_gray:{headerBg:"linear-gradient(135deg, #374151 0%, #6b7280 100%)",headerBorder:"#4b5563",rowBorder:"#f3f4f6",altRowBg:"#f9fafb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(107, 114, 128, 0.3)",borderRadius:"6px"},coral_sunset:{headerBg:"linear-gradient(135deg, #c2410c 0%, #fb7185 100%)",headerBorder:"#ea580c",rowBorder:"#fed7d7",altRowBg:"#fef7f7",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#c2410c",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 113, 133, 0.3)",borderRadius:"6px"},mint_green:{headerBg:"linear-gradient(135deg, #065f46 0%, #34d399 100%)",headerBorder:"#047857",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#065f46",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(52, 211, 153, 0.3)",borderRadius:"6px"},violet_dream:{headerBg:"linear-gradient(135deg, #6d28d9 0%, #c084fc 100%)",headerBorder:"#8b5cf6",rowBorder:"#ede9fe",altRowBg:"#f5f3ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#6d28d9",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(192, 132, 252, 0.3)",borderRadius:"6px"},sky_blue:{headerBg:"linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%)",headerBorder:"#0284c7",rowBorder:"#bae6fd",altRowBg:"#f0f9ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#0369a1",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(14, 165, 233, 0.3)",borderRadius:"6px"},forest_green:{headerBg:"linear-gradient(135deg, #14532d 0%, #22c55e 100%)",headerBorder:"#15803d",rowBorder:"#bbf7d0",altRowBg:"#f0fdf4",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#14532d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(34, 197, 94, 0.3)",borderRadius:"6px"},ruby_red:{headerBg:"linear-gradient(135deg, #b91c1b 0%, #f87171 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#b91c1b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(248, 113, 113, 0.3)",borderRadius:"6px"},golden_yellow:{headerBg:"linear-gradient(135deg, #a16207 0%, #eab308 100%)",headerBorder:"#ca8a04",rowBorder:"#fef08a",altRowBg:"#fefce8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#a16207",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(234, 179, 8, 0.3)",borderRadius:"6px"},navy_blue:{headerBg:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e3a8a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(59, 130, 246, 0.3)",borderRadius:"6px"},burgundy_wine:{headerBg:"linear-gradient(135deg, #7f1d1d 0%, #dc2626 100%)",headerBorder:"#991b1b",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#7f1d1d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(220, 38, 38, 0.3)",borderRadius:"6px"},lavender_purple:{headerBg:"linear-gradient(135deg, #7c2d12 0%, #a855f7 100%)",headerBorder:"#9333ea",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#7c2d12",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(168, 85, 247, 0.3)",borderRadius:"6px"},ocean_teal:{headerBg:"linear-gradient(135deg, #134e4a 0%, #14b8a6 100%)",headerBorder:"#0f766e",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#134e4a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(20, 184, 166, 0.3)",borderRadius:"6px"},cherry_blossom:{headerBg:"linear-gradient(135deg, #be185d 0%, #fb7185 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#be185d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 113, 133, 0.3)",borderRadius:"6px"},autumn_orange:{headerBg:"linear-gradient(135deg, #9a3412 0%, #fb923c 100%)",headerBorder:"#ea580c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 146, 60, 0.3)",borderRadius:"6px"}};return e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]||e.default}(w.tableStyle),_e=!1!==w.showBorders,React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",fontSize:10*E,fontFamily:'"Inter", "Segoe UI", Roboto, -apple-system, BlinkMacSystemFont, sans-serif',border:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.headerBorder):w.borderWidth&&w.borderWidth>0?"".concat(Math.max(1,w.borderWidth*E*.5),"px solid ").concat(w.borderColor||"#e5e7eb"):"none",borderRadius:ze.borderRadius?"".concat(ze.borderRadius*E,"px"):"2px",overflow:"hidden",backgroundColor:w.backgroundColor||"transparent",boxSizing:"border-box",boxShadow:ze.shadow,lineHeight:"1.4",color:ze.rowTextColor}},!1!==w.showHeaders&&React.createElement("div",{style:{display:"flex",background:ze.headerBg,borderBottom:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.headerBorder):"none",fontWeight:ze.headerFontWeight,color:ze.headerTextColor,fontSize:"".concat(ze.headerFontSize*E,"px"),textTransform:"uppercase",letterSpacing:"0.025em"}},!1!==(null===(q=w.columns)||void 0===q?void 0:q.image)&&React.createElement("div",{key:"header-image",style:{flex:"0 0 40px",padding:"".concat(6*E,"px ").concat(4*E,"px"),textAlign:"center",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.headerBorder):"none",fontSize:"".concat(ze.headerFontSize*E*.9,"px"),opacity:.9}},"Img"),!1!==(null===(U=w.columns)||void 0===U?void 0:U.name)&&React.createElement("div",{key:"header-name",style:{flex:1,padding:"".concat(6*E,"px ").concat(8*E,"px"),textAlign:"left",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.headerBorder):"none",fontSize:"".concat(ze.headerFontSize*E,"px")}},"Produit"),!1!==(null===(V=w.columns)||void 0===V?void 0:V.sku)&&React.createElement("div",{key:"header-sku",style:{flex:"0 0 80px",padding:"".concat(6*E,"px ").concat(8*E,"px"),textAlign:"left",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.headerBorder):"none",fontSize:"".concat(ze.headerFontSize*E,"px")}},"SKU"),!1!==(null===(Z=w.columns)||void 0===Z?void 0:Z.quantity)&&React.createElement("div",{key:"header-quantity",style:{flex:"0 0 60px",padding:"".concat(6*E,"px ").concat(8*E,"px"),textAlign:"center",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.headerBorder):"none",fontSize:"".concat(ze.headerFontSize*E,"px")}},"QtÃ©"),!1!==(null===(X=w.columns)||void 0===X?void 0:X.price)&&React.createElement("div",{key:"header-price",style:{flex:"0 0 80px",padding:"".concat(6*E,"px ").concat(8*E,"px"),textAlign:"right",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.headerBorder):"none",fontSize:"".concat(ze.headerFontSize*E,"px")}},"Prix"),!1!==(null===(Y=w.columns)||void 0===Y?void 0:Y.total)&&React.createElement("div",{key:"header-total",style:{flex:"0 0 80px",padding:"".concat(6*E,"px ").concat(8*E,"px"),textAlign:"right",fontSize:"".concat(ze.headerFontSize*E,"px")}},"Total")),React.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},React.createElement("div",{key:"row-1",style:{display:"flex",borderBottom:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",backgroundColor:ze.altRowBg,fontSize:"".concat(ze.rowFontSize*E,"px"),transition:"background-color 0.15s ease"}},!1!==(null===(J=w.columns)||void 0===J?void 0:J.image)&&React.createElement("div",{key:"row-1-image",style:{flex:"0 0 40px",padding:"".concat(5*E,"px ").concat(4*E,"px"),textAlign:"center",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",color:ze.rowTextColor,opacity:.7,fontSize:"".concat(ze.rowFontSize*E*.9,"px")}},"ðŸ“·"),!1!==(null===(K=w.columns)||void 0===K?void 0:K.name)&&React.createElement("div",{key:"row-1-name",style:{flex:1,padding:"".concat(5*E,"px ").concat(8*E,"px"),borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",color:ze.rowTextColor,fontWeight:"500",lineHeight:"1.3"}},"Produit A - Description du produit"),!1!==(null===(Q=w.columns)||void 0===Q?void 0:Q.sku)&&React.createElement("div",{key:"row-1-sku",style:{flex:"0 0 80px",padding:"".concat(5*E,"px ").concat(8*E,"px"),borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",color:ze.rowTextColor,opacity:.8,fontFamily:"monospace",fontSize:"".concat(ze.rowFontSize*E*.9,"px")}},"SKU001"),!1!==(null===($=w.columns)||void 0===$?void 0:$.quantity)&&React.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(5*E,"px ").concat(8*E,"px"),textAlign:"center",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",color:ze.rowTextColor,fontWeight:"600"}},"2"),!1!==(null===(ee=w.columns)||void 0===ee?void 0:ee.price)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(5*E,"px ").concat(8*E,"px"),textAlign:"right",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",color:ze.rowTextColor,fontWeight:"500",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬19.99"),!1!==(null===(te=w.columns)||void 0===te?void 0:te.total)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(5*E,"px ").concat(8*E,"px"),textAlign:"right",color:ze.rowTextColor,fontWeight:"600",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬39.98")),React.createElement("div",{style:{display:"flex",borderBottom:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(ze.rowFontSize*E,"px"),transition:"background-color 0.15s ease"}},!1!==(null===(re=w.columns)||void 0===re?void 0:re.image)&&React.createElement("div",{style:{flex:"0 0 40px",padding:"".concat(5*E,"px ").concat(4*E,"px"),textAlign:"center",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",color:ze.rowTextColor,opacity:.7,fontSize:"".concat(ze.rowFontSize*E*.9,"px")}},"ðŸ“·"),!1!==(null===(ne=w.columns)||void 0===ne?void 0:ne.name)&&React.createElement("div",{style:{flex:1,padding:"".concat(5*E,"px ").concat(8*E,"px"),borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",color:ze.rowTextColor,fontWeight:"500",lineHeight:"1.3"}},"Produit B - Un autre article"),!1!==(null===(oe=w.columns)||void 0===oe?void 0:oe.sku)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(5*E,"px ").concat(8*E,"px"),borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",color:ze.rowTextColor,opacity:.8,fontFamily:"monospace",fontSize:"".concat(ze.rowFontSize*E*.9,"px")}},"SKU002"),!1!==(null===(ae=w.columns)||void 0===ae?void 0:ae.quantity)&&React.createElement("div",{key:"row-1-quantity",style:{flex:"0 0 60px",padding:"".concat(5*E,"px ").concat(8*E,"px"),textAlign:"center",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",color:ze.rowTextColor,fontWeight:"600"}},"1"),!1!==(null===(ie=w.columns)||void 0===ie?void 0:ie.price)&&React.createElement("div",{key:"row-1-price",style:{flex:"0 0 80px",padding:"".concat(5*E,"px ").concat(8*E,"px"),textAlign:"right",borderRight:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",color:ze.rowTextColor,fontWeight:"500",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬29.99"),!1!==(null===(le=w.columns)||void 0===le?void 0:le.total)&&React.createElement("div",{key:"row-1-total",style:{flex:"0 0 80px",padding:"".concat(5*E,"px ").concat(8*E,"px"),textAlign:"right",color:ze.rowTextColor,fontWeight:"600",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬29.99"))),(w.showSubtotal||w.showShipping||w.showTaxes||w.showDiscount||w.showTotal)&&React.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},React.createElement("div",{style:{display:"flex",borderTop:_e?"".concat(2*ze.borderWidth*E,"px solid ").concat(ze.headerBorder):"none",marginTop:"".concat(10*E,"px"),paddingTop:"".concat(10*E,"px"),fontSize:"".concat(ze.rowFontSize*E,"px")}},React.createElement("div",{style:{flex:1,padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right",fontWeight:"bold",color:w.color||"#666"}}),!1!==(null===(ce=w.columns)||void 0===ce?void 0:ce.quantity)&&React.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"center"}}),!1!==(null===(de=w.columns)||void 0===de?void 0:de.price)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right",fontWeight:"bold",color:w.color||"#666"}}),!1!==(null===(se=w.columns)||void 0===se?void 0:se.total)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right",fontWeight:"bold",color:w.color||"#666"}},"Total")),w.showSubtotal&&React.createElement("div",{style:{display:"flex",borderBottom:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",backgroundColor:ze.altRowBg,fontSize:"".concat(ze.rowFontSize*E,"px")}},React.createElement("div",{style:{flex:1,padding:"".concat(5*E,"px ").concat(8*E,"px"),textAlign:"right",color:ze.rowTextColor,fontWeight:"600"}},"Sous-total"),!1!==(null===(ue=w.columns)||void 0===ue?void 0:ue.quantity)&&React.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"center"}}),!1!==(null===(fe=w.columns)||void 0===fe?void 0:fe.price)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right"}}),"total"===ke&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right",fontWeight:"bold"}},"â‚¬",we.toFixed(2))),w.showShipping&&React.createElement("div",{style:{display:"flex",borderBottom:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(ze.rowFontSize*E,"px")}},React.createElement("div",{style:{flex:1,padding:"".concat(5*E,"px ").concat(8*E,"px"),textAlign:"right",color:ze.rowTextColor,fontWeight:"500"}},"Frais de port"),!1!==(null===(pe=w.columns)||void 0===pe?void 0:pe.quantity)&&React.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"center"}}),!1!==(null===(me=w.columns)||void 0===me?void 0:me.price)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right"}}),"total"===ke&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right"}},"â‚¬",Re.toFixed(2))),w.showTaxes&&React.createElement("div",{style:{display:"flex",borderBottom:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(ze.rowFontSize*E,"px")}},React.createElement("div",{style:{flex:1,padding:"".concat(5*E,"px ").concat(8*E,"px"),textAlign:"right",color:ze.rowTextColor,fontWeight:"500"}},"Taxes (TVA 20%)"),!1!==(null===(he=w.columns)||void 0===he?void 0:he.quantity)&&React.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"center"}}),!1!==(null===(be=w.columns)||void 0===be?void 0:be.price)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right"}}),"total"===ke&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right"}},"â‚¬",Ee.toFixed(2))),w.showDiscount&&React.createElement("div",{style:{display:"flex",borderBottom:_e?"".concat(ze.borderWidth*E,"px solid ").concat(ze.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(ze.rowFontSize*E,"px")}},React.createElement("div",{style:{flex:1,padding:"".concat(5*E,"px ").concat(8*E,"px"),textAlign:"right",color:"#dc3545",fontWeight:"500"}},"Remise"),!1!==(null===(ge=w.columns)||void 0===ge?void 0:ge.quantity)&&React.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"center"}}),!1!==(null===(ye=w.columns)||void 0===ye?void 0:ye.price)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right"}}),"total"===ke&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*E,"px ").concat(6*E,"px"),textAlign:"right",color:"#d32f2f"}},"â‚¬",Se.toFixed(2))),w.showTotal&&React.createElement("div",{style:{display:"flex",borderTop:_e?"".concat(2*ze.borderWidth*E,"px solid ").concat(ze.headerBorder):"none",backgroundColor:ze.headerBg,marginTop:"".concat(6*E,"px"),paddingTop:"".concat(6*E,"px"),color:ze.headerTextColor,fontWeight:ze.headerFontWeight,fontSize:"".concat(ze.headerFontSize*E,"px")}},React.createElement("div",{style:{flex:1,padding:"".concat(6*E,"px ").concat(8*E,"px"),textAlign:"right",fontSize:"".concat(ze.headerFontSize*E,"px"),textTransform:"uppercase",letterSpacing:"0.05em"}},"TOTAL TTC"),!1!==(null===(ve=w.columns)||void 0===ve?void 0:ve.quantity)&&React.createElement("div",{style:{flex:"0 0 60px",padding:"".concat(6*E,"px ").concat(8*E,"px"),textAlign:"center"}}),!1!==(null===(xe=w.columns)||void 0===xe?void 0:xe.price)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(6*E,"px ").concat(8*E,"px"),textAlign:"right"}}),"total"===ke&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(6*E,"px ").concat(8*E,"px"),textAlign:"right",fontSize:"".concat(ze.headerFontSize*E*1.2,"px"),fontWeight:"700",color:ze.headerTextColor,fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬",Ce.toFixed(2)))))),"customer_info"===w.type&&React.createElement("div",{style:{width:"100%",height:"100%",padding:"".concat(8*E,"px"),fontSize:"".concat((w.fontSize||12)*E,"px"),fontFamily:w.fontFamily||"Arial, sans-serif",fontWeight:w.fontWeight||"normal",fontStyle:w.fontStyle||"normal",textDecoration:w.textDecoration||"none",color:w.color||"#333",backgroundColor:w.backgroundColor||"transparent",border:w.borderWidth&&w.borderWidth>0?"".concat(Math.max(1,w.borderWidth*E*.5),"px solid ").concat(w.borderColor||"#e5e7eb"):"none",borderRadius:w.borderRadius?"".concat(w.borderRadius*E,"px"):"2px",boxSizing:"border-box"}},React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"row":"column",gap:"".concat(w.spacing*E||8*E,"px"),height:"100%"}},(null===(t=w.fields)||void 0===t?void 0:t.includes("name"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"Nom :"),React.createElement("div",{style:{fontWeight:"bold",color:w.color||"#333"}},"Jean Dupont")),(null===(n=w.fields)||void 0===n?void 0:n.includes("email"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"Email :"),React.createElement("div",{style:{color:"#1976d2"}},"jean.dupont@email.com")),(null===(o=w.fields)||void 0===o?void 0:o.includes("phone"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"TÃ©lÃ©phone :"),React.createElement("div",{style:{color:w.color||"#333"}},"+33 6 12 34 56 78")),(null===(a=w.fields)||void 0===a?void 0:a.includes("address"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"Adresse :"),React.createElement("div",{style:{color:w.color||"#333",lineHeight:"1.4"}},"123 Rue de la Paix",React.createElement("br",null),"75001 Paris",React.createElement("br",null),"France")),(null===(i=w.fields)||void 0===i?void 0:i.includes("company"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"SociÃ©tÃ© :"),React.createElement("div",{style:{fontWeight:"bold",color:w.color||"#333"}},"ABC Company SARL")),(null===(l=w.fields)||void 0===l?void 0:l.includes("vat"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"NÂ° TVA :"),React.createElement("div",{style:{color:w.color||"#333"}},"FR 12 345 678 901")),(null===(c=w.fields)||void 0===c?void 0:c.includes("siret"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"SIRET :"),React.createElement("div",{style:{color:w.color||"#333"}},"123 456 789 00012")))),"company_logo"===w.type&&React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"===w.alignment?"center":"right"===w.alignment?"flex-end":"flex-start",padding:"8px",backgroundColor:w.backgroundColor||"transparent",border:w.borderWidth&&w.borderWidth>0?"".concat(Math.max(1,w.borderWidth*E*.5),"px solid ").concat(w.borderColor||"#e5e7eb"):"none",borderRadius:w.borderRadius?"".concat(w.borderRadius*E,"px"):"2px",boxSizing:"border-box"}},w.imageUrl?React.createElement("img",{src:w.imageUrl,alt:"Logo entreprise",style:{width:"".concat(w.width||150,"px"),height:"".concat(w.height||80,"px"),objectFit:w.fit||"contain",borderRadius:w.borderRadius||0,border:w.borderWidth?"".concat(w.borderWidth,"px ").concat(w.borderStyle||"solid"," ").concat(w.borderColor||"transparent"):w.showBorder?"1px solid transparent":"none"}}):React.createElement("div",{style:{width:"".concat(w.width||150,"px"),height:"".concat(w.height||80,"px"),backgroundColor:"#f5f5f5",border:w.borderWidth?"".concat(w.borderWidth,"px ").concat(w.borderStyle||"solid"," ").concat(w.borderColor||"transparent"):w.showBorder?"1px solid transparent":"none",borderRadius:w.borderRadius||"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"".concat(12*E,"px")}},"ðŸ¢ Logo")),"company_info"===w.type&&React.createElement("div",{style:{width:"100%",height:"100%",padding:"".concat(8*E,"px"),fontSize:"".concat((w.fontSize||12)*E,"px"),fontFamily:w.fontFamily||"Arial, sans-serif",fontWeight:w.fontWeight||"normal",fontStyle:w.fontStyle||"normal",textDecoration:w.textDecoration||"none",color:w.color||"#333",backgroundColor:w.backgroundColor||"transparent",border:w.borderWidth&&w.borderWidth>0?"".concat(Math.max(1,w.borderWidth*E*.5),"px solid ").concat(w.borderColor||"#e5e7eb"):"none",borderRadius:w.borderRadius?"".concat(w.borderRadius*E,"px"):"2px",boxSizing:"border-box"}},React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"row":"column",gap:"".concat(w.spacing*E||8*E,"px"),height:"100%"}},(null===(d=w.fields)||void 0===d?void 0:d.includes("name"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"Nom :"),React.createElement("div",{style:{fontWeight:"bold",color:w.color||"#333"}},"Ma SociÃ©tÃ© SARL")),(null===(s=w.fields)||void 0===s?void 0:s.includes("address"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"Adresse :"),React.createElement("div",{style:{color:w.color||"#333",lineHeight:"1.4"}},"123 Rue de l'Entreprise",React.createElement("br",null),"75001 Paris",React.createElement("br",null),"France")),(null===(u=w.fields)||void 0===u?void 0:u.includes("phone"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"TÃ©lÃ©phone :"),React.createElement("div",{style:{color:w.color||"#333"}},"+33 1 23 45 67 89")),(null===(p=w.fields)||void 0===p?void 0:p.includes("email"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"Email :"),React.createElement("div",{style:{color:"#1976d2"}},"contact@masociete.com")),(null===(m=w.fields)||void 0===m?void 0:m.includes("website"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"Site web :"),React.createElement("div",{style:{color:"#1976d2"}},"www.masociete.com")),(null===(b=w.fields)||void 0===b?void 0:b.includes("vat"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"NÂ° TVA :"),React.createElement("div",{style:{color:w.color||"#333"}},"FR 12 345 678 901")),(null===(g=w.fields)||void 0===g?void 0:g.includes("rcs"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:(w.labelStyle,"bold"),textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"RCS :"),React.createElement("div",{style:{color:w.color||"#333"}},"Paris B 123 456 789")),(null===(x=w.fields)||void 0===x?void 0:x.includes("siret"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===w.layout?"column":"row",alignItems:"horizontal"===w.layout?"flex-start":"center",gap:"".concat(4*E,"px"),flex:"horizontal"===w.layout?"1":"none"}},w.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===w.labelStyle?"bold":"normal",textTransform:"uppercase"===w.labelStyle?"uppercase":"none",color:w.color||"#666",minWidth:"horizontal"===w.layout?"auto":"80px",fontSize:"".concat(11*E,"px")}},"SIRET :"),React.createElement("div",{style:{color:w.color||"#333"}},"123 456 789 00012")))),"order_number"===w.type&&React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"===w.textAlign?"center":"right"===w.textAlign?"flex-end":"flex-start",padding:"".concat(8*E,"px"),fontSize:"".concat((w.fontSize||14)*E,"px"),fontFamily:w.fontFamily||"Arial",fontWeight:w.fontWeight||"bold",color:w.color||"#333333",textAlign:w.textAlign||"right",backgroundColor:w.backgroundColor||"transparent",border:w.borderWidth&&w.borderWidth>0?"".concat(Math.max(1,w.borderWidth*E*.5),"px solid ").concat(w.borderColor||"#e5e7eb"):"none",borderRadius:w.borderRadius?"".concat(w.borderRadius*E,"px"):"2px",boxSizing:"border-box"}},w.showLabel&&React.createElement("div",{style:{fontSize:"".concat(12*E,"px"),fontWeight:"normal",color:w.color||"#666",marginBottom:"".concat(4*E,"px")}},w.labelText||"NÂ° de commande:"),React.createElement("div",null,(w.format||"Commande #{order_number} - {order_date}").replace(/{order_number}/g,"12345").replace(/{order_date}/g,"15/10/2025"))),"document_type"===w.type&&React.createElement("div",{style:{display:"inline-block",padding:"".concat(8*E,"px"),fontSize:"".concat((w.fontSize||18)*E,"px"),fontFamily:w.fontFamily||"Arial",fontWeight:w.fontWeight||"bold",color:w.color||"#1e293b",textAlign:w.textAlign||"center",backgroundColor:w.backgroundColor||"transparent",border:w.borderWidth&&w.borderWidth>0?"".concat(Math.max(1,w.borderWidth*E*.5),"px solid ").concat(w.borderColor||"#e5e7eb"):"none",borderRadius:w.borderRadius?"".concat(w.borderRadius*E,"px"):"4px",whiteSpace:"nowrap",boxSizing:"border-box"}},"invoice"===w.documentType?"FACTURE":"quote"===w.documentType?"DEVIS":"receipt"===w.documentType?"REÃ‡U":"order"===w.documentType?"COMMANDE":"credit_note"===w.documentType?"AVOIR":"DOCUMENT"),R&&React.createElement(React.Fragment,null,"line"!==w.type&&"divider"!==w.type&&React.createElement(React.Fragment,null,React.createElement("div",{key:"resize-handle-nw-".concat(w.id),className:"resize-handle nw",onMouseDown:function(e){var t,r=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;Te.handleResizeStart(e,"nw",{x:w.x,y:w.y,width:w.width,height:w.height},n,E)},onContextMenu:Oe}),React.createElement("div",{key:"resize-handle-ne-".concat(w.id),className:"resize-handle ne",onMouseDown:function(e){var t,r=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;Te.handleResizeStart(e,"ne",{x:w.x,y:w.y,width:w.width,height:w.height},n,E)},onContextMenu:Oe}),React.createElement("div",{key:"resize-handle-sw-".concat(w.id),className:"resize-handle sw",onMouseDown:function(e){var t,r=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;Te.handleResizeStart(e,"sw",{x:w.x,y:w.y,width:w.width,height:w.height},n,E)},onContextMenu:Oe})),React.createElement("div",{key:"resize-handle-se-".concat(w.id),className:"resize-handle se",onMouseDown:function(e){var t,r=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;Te.handleResizeStart(e,"se",{x:w.x,y:w.y,width:w.width,height:w.height},n,E)},onContextMenu:Oe}),"line"!==w.type&&"divider"!==w.type&&React.createElement(React.Fragment,null,React.createElement("div",{key:"resize-handle-n-".concat(w.id),className:"resize-handle n",onMouseDown:function(e){var t,r=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;Te.handleResizeStart(e,"n",{x:w.x,y:w.y,width:w.width,height:w.height},n,E)},onContextMenu:Oe}),React.createElement("div",{key:"resize-handle-s-".concat(w.id),className:"resize-handle s",onMouseDown:function(e){var t,r=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;Te.handleResizeStart(e,"s",{x:w.x,y:w.y,width:w.width,height:w.height},n,E)},onContextMenu:Oe})),React.createElement("div",{key:"resize-handle-w-".concat(w.id),className:"resize-handle w",onMouseDown:function(e){var t,r=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;Te.handleResizeStart(e,"w",{x:w.x,y:w.y,width:w.width,height:w.height},n,E)},onContextMenu:Oe}),React.createElement("div",{key:"resize-handle-e-".concat(w.id),className:"resize-handle e",onMouseDown:function(e){var t,r=null===(t=L.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;Te.handleResizeStart(e,"e",{x:w.x,y:w.y,width:w.width,height:w.height},n,E)},onContextMenu:Oe}),"line"!==w.type&&"divider"!==w.type&&React.createElement(React.Fragment,null,React.createElement("div",{key:"resize-zone-n-".concat(w.id),className:"resize-zone resize-zone-n",onMouseDown:function(e){return Te.handleResizeStart(e,"n",{x:w.x,y:w.y,width:w.width,height:w.height})}}),React.createElement("div",{key:"resize-zone-s-".concat(w.id),className:"resize-zone resize-zone-s",onMouseDown:function(e){return Te.handleResizeStart(e,"s",{x:w.x,y:w.y,width:w.width,height:w.height})}})),React.createElement("div",{key:"resize-zone-w-".concat(w.id),className:"resize-zone resize-zone-w",onMouseDown:function(e){return Te.handleResizeStart(e,"w",{x:w.x,y:w.y,width:w.width,height:w.height})}}),React.createElement("div",{key:"resize-zone-e-".concat(w.id),className:"resize-zone resize-zone-e",onMouseDown:function(e){return Te.handleResizeStart(e,"e",{x:w.x,y:w.y,width:w.width,height:w.height})}})),R&&O&&React.createElement("div",{key:"rotation-handle-".concat(w.id),className:"rotation-handle",style:{position:"absolute",top:"".concat(-20*E,"px"),left:"50%",transform:"translateX(-50%)",width:"".concat(12*E,"px"),height:"".concat(12*E,"px"),backgroundColor:"#3b82f6",border:"".concat(2*E,"px solid white"),borderRadius:"50%",cursor:"alias",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseDown:function(e){e.stopPropagation(),Be.handleRotationStart(e,w)},title:"Faire pivoter l'Ã©lÃ©ment"})),"progress-bar"===w.type&&React.createElement("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:"".concat(w.progressValue||75,"%"),backgroundColor:w.progressColor||"#3b82f6",borderRadius:"10px",transition:"width 0.3s ease",border:w.borderWidth&&w.borderWidth>0?"".concat(Math.max(1,w.borderWidth*E*.5),"px solid ").concat(w.borderColor||"#e5e7eb"):"none",boxSizing:"border-box"}}))};function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.onElementMove,n=e.onElementDrop,o=e.snapToGrid,a=void 0===o||o,i=e.gridSize,l=void 0===i?10:i,c=e.zoom,d=void 0===c?1:c,s=e.canvasWidth,u=void 0===s?595:s,f=e.canvasHeight,p=void 0===f?842:f,m=e.guides,h=void 0===m?{horizontal:[],vertical:[]}:m,b=e.snapToGuides,g=void 0===b||b,y=w((0,r.useState)(!1),2),v=y[0],x=y[1],E=w((0,r.useState)({x:0,y:0}),2),S=E[0],C=E[1],k=w((0,r.useState)(null),2),z=k[0],_=k[1],T=(0,r.useRef)({x:0,y:0}),B=(0,r.useRef)({x:0,y:0}),N=(0,r.useRef)(null),W=(0,r.useRef)({x:0,y:0}),O=(0,r.useCallback)(function(e){return a?Math.round(e/l)*l:e},[a,l]),F=(0,r.useCallback)(function(e){if(!g)return e;var t,r=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=R(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw o}}}}(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?h.vertical:h.horizontal);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(Math.abs(e-n)<=5)return n}}catch(e){r.e(e)}finally{r.f()}return e},[g,h]),A=(0,r.useCallback)(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("line"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)&&!t)return e;var r=e;return r=O(r),F(r,t)},[O,F]);(0,r.useEffect)(function(){return function(){N.current&&(document.removeEventListener("mousemove",N.current.handleMouseMove),document.removeEventListener("mouseup",N.current.handleMouseUp),N.current=null)}},[]);var j=(0,r.useCallback)(function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(0===e.button)if(e.target&&e.target.isConnected)if(e.target.parentNode&&e.target.parentNode.isConnected){e.preventDefault(),x(!0),_(t);var l=o||{left:0,top:0,width:u,height:p},c=a||d||1,s=(e.clientX-l.left)/c,f=(e.clientY-l.top)/c;T.current={x:s-r.left,y:f-r.top},B.current={x:r.left,y:r.top};var m=function(e){if(N.current){var t=(e.clientX-l.left)/c,n=(e.clientY-l.top)/c,i=t-s,d=n-f,m=o?o.width/a:u,h=o?o.height/a:p,b=Math.max(0,Math.min(m-r.width,A(r.left+i,!1,y))),g=Math.max(0,Math.min(h-r.height,A(r.top+d,!0,y))),y=N.current.elementType,v={x:b-r.left,y:g-r.top};C(v),W.current=v}else console.warn("Drag data no longer exists during move")},h=function(){if(!N.current)return console.warn("Drag data no longer exists during drop"),x(!1),C({x:0,y:0}),void _(null);var e=N.current,t=e.elementId;if(e.elementType,x(!1),n&&t){var r=B.current.x+W.current.x,o=B.current.y+W.current.y;n(t,{x:r,y:o})}else console.warn("[DEBUG] onElementDrop not called - elementId:",t,"onElementDrop:",!!n);C({x:0,y:0}),_(null),B.current={x:0,y:0},W.current={x:0,y:0},document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),N.current=null};N.current={handleMouseMove:m,handleMouseUp:h,elementId:t,elementType:i},document.addEventListener("mousemove",m),document.addEventListener("mouseup",h)}else console.warn("Drag target parent no longer exists in DOM");else console.warn("Drag target no longer exists in DOM")},[O,t,n,d,u,p]);return{isDragging:v,dragOffset:S,draggedElementId:z,handleMouseDown:j,handleDragStart:(0,r.useCallback)(function(e,t,r){e.dataTransfer.setData("text/plain",t),e.dataTransfer.effectAllowed="move",T.current={x:e.clientX-r.left,y:e.clientY-r.top}},[]),handleDragOver:(0,r.useCallback)(function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),handleDrop:(0,r.useCallback)(function(e,t,r){e.preventDefault();var o=e.dataTransfer.getData("text/plain");if(o){var a=(e.clientX-t.left-T.current.x)/d,i=(e.clientY-t.top-T.current.y)/d,l=t?t.width/d:u,c=t?t.height/d:p,s=Math.max(0,Math.min(l-r.width,A(a,!1))),f=Math.max(0,Math.min(c-r.height,A(i,!0)));n&&n(o,{x:s,y:f})}},[O,n,d,u,p])}},C=function(e){var t=e.selectedTool,r=e.onToolSelect,n=e.zoom,o=e.onZoomChange,a=e.showGrid,i=e.onShowGridChange,l=e.snapToGrid,c=e.onSnapToGridChange,d=e.onUndo,s=e.onRedo,u=e.canUndo,f=e.canRedo;return React.createElement("div",{className:"toolbar"},React.createElement("div",{className:"toolbar-section"},React.createElement("h4",null,"Outils"),React.createElement("div",{className:"tool-buttons"},[{id:"select",label:"SÃ©lection (V)",icon:"ðŸ‘†",shortcut:"V"},{id:"add-text",label:"Texte Simple (T)",icon:"ðŸ“",shortcut:"T"},{id:"add-text-title",label:"Titre (H)",icon:"ðŸ“„",shortcut:"H"},{id:"add-text-subtitle",label:"Sous-titre (S)",icon:"ðŸ“‹",shortcut:"S"},{id:"add-rectangle",label:"Rectangle (R)",icon:"â–­",shortcut:"R"},{id:"add-circle",label:"Cercle (C)",icon:"â—‹",shortcut:"C"},{id:"add-line",label:"Ligne (L)",icon:"â”",shortcut:"L"},{id:"add-arrow",label:"FlÃ¨che (A)",icon:"âž¤",shortcut:"A"},{id:"add-triangle",label:"Triangle (3)",icon:"â–³",shortcut:"3"},{id:"add-star",label:"Ã‰toile (5)",icon:"â­",shortcut:"5"},{id:"add-divider",label:"SÃ©parateur (D)",icon:"âŽ¯",shortcut:"D"},{id:"add-image",label:"Image (I)",icon:"ðŸ–¼ï¸",shortcut:"I"}].map(function(e){return React.createElement("button",{key:e.id,className:"tool-button ".concat(t===e.id?"active":""),onClick:function(){return r(e.id)},title:e.label},React.createElement("div",{className:"tool-content"},React.createElement("span",{className:"tool-icon"},e.icon),React.createElement("span",{className:"tool-shortcut"},e.shortcut)))}))),React.createElement("div",{className:"toolbar-section"},React.createElement("h4",null,"Ã‰dition"),React.createElement("div",{className:"edit-buttons"},React.createElement("button",{className:"edit-button",onClick:d,disabled:!u,title:"Annuler (Ctrl+Z)"},React.createElement("div",{className:"button-content"},React.createElement("span",{className:"button-icon"},"â†¶"),React.createElement("span",{className:"button-text"},"Annuler"),React.createElement("span",{className:"button-shortcut"},"Ctrl+Z"))),React.createElement("button",{className:"edit-button",onClick:s,disabled:!f,title:"RÃ©tablir (Ctrl+Y)"},React.createElement("div",{className:"button-content"},React.createElement("span",{className:"button-icon"},"â†·"),React.createElement("span",{className:"button-text"},"RÃ©tablir"),React.createElement("span",{className:"button-shortcut"},"Ctrl+Y"))))),React.createElement("div",{className:"toolbar-section"},React.createElement("h4",null,"Affichage"),React.createElement("div",{className:"display-controls"},React.createElement("div",{className:"control-group"},React.createElement("label",null,"Zoom:"),React.createElement("div",{className:"zoom-controls"},React.createElement("button",{className:"zoom-button",onClick:function(){return o(Math.max(.1,n-.1))},title:"Zoom arriÃ¨re (Ctrl+-)"},React.createElement("div",{className:"button-content"},React.createElement("span",{className:"button-icon"},"ðŸ”"),React.createElement("span",{className:"button-text"},"-"),React.createElement("span",{className:"button-shortcut"},"Ctrl+-"))),React.createElement("span",{className:"zoom-value"},Math.round(100*n),"%"),React.createElement("button",{className:"zoom-button",onClick:function(){return o(Math.min(3,n+.1))},title:"Zoom avant (Ctrl+=)"},React.createElement("div",{className:"button-content"},React.createElement("span",{className:"button-icon"},"ðŸ”"),React.createElement("span",{className:"button-text"},"+"),React.createElement("span",{className:"button-shortcut"},"Ctrl+="))))),React.createElement("div",{className:"canvas-controls-column"},React.createElement("div",{className:"control-group"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:a,onChange:function(e){return i(e.target.checked)}}),"Grille",React.createElement("span",{className:"control-shortcut"},"(G)"))),React.createElement("div",{className:"control-group"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:l,onChange:function(e){return c(e.target.checked)}}),"Aimantation",React.createElement("span",{className:"control-shortcut"},"(M)")))))),React.createElement("div",{className:"toolbar-section"},React.createElement("h4",null,"Raccourcis"),React.createElement("div",{className:"shortcuts-help"},React.createElement("div",{className:"shortcut-group"},React.createElement("span",{className:"shortcut-label"},"Outils:"),React.createElement("span",{className:"shortcut-keys"},"V T H S R C L A 3 5 D I")),React.createElement("div",{className:"shortcut-group"},React.createElement("span",{className:"shortcut-label"},"Ã‰dition:"),React.createElement("span",{className:"shortcut-keys"},"Ctrl+Z/Y")),React.createElement("div",{className:"shortcut-group"},React.createElement("span",{className:"shortcut-label"},"Zoom:"),React.createElement("span",{className:"shortcut-keys"},"Ctrl+/- Roulette")),React.createElement("div",{className:"shortcut-group"},React.createElement("span",{className:"shortcut-label"},"Affichage:"),React.createElement("span",{className:"shortcut-keys"},"G M")))))};function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).maxHistorySize,t=void 0===e?50:e,n=k((0,r.useState)([]),2),o=n[0],a=n[1],i=k((0,r.useState)(-1),2),l=i[0],c=i[1],d=(0,r.useRef)(!1);return{addToHistory:(0,r.useCallback)(function(e){d.current?d.current=!1:a(function(r){var n=r.slice(0,l+1);return n.push(e),n.length>t?(n.shift(),c(n.length-1),n):(c(n.length-1),n)})},[l,t]),undo:(0,r.useCallback)(function(){return l>0?(d.current=!0,c(function(e){return e-1}),o[l-1]):null},[l,o]),redo:(0,r.useCallback)(function(){return l<o.length-1?(d.current=!0,c(function(e){return e+1}),o[l+1]):null},[l,o]),canUndo:(0,r.useCallback)(function(){return l>0},[l]),canRedo:(0,r.useCallback)(function(){return l<o.length-1},[l]),clearHistory:(0,r.useCallback)(function(){a([]),c(-1)},[]),getCurrentState:(0,r.useCallback)(function(){return l>=0?o[l]:null},[l,o]),historySize:o.length,currentIndex:l}};function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(t){W(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function W(e,t,r){return(t=function(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return j(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t=e.onSelectionChange,n=e.multiSelect,o=void 0===n||n,a=F((0,r.useState)([]),2),i=a[0],l=a[1],c=F((0,r.useState)(null),2),d=c[0],s=c[1],u=(0,r.useCallback)(function(e){o&&arguments.length>1&&void 0!==arguments[1]&&arguments[1]?l(function(r){var n=r.includes(e)?r.filter(function(t){return t!==e}):[].concat(O(r),[e]);return null==t||t(n),n}):(l([e]),null==t||t([e]))},[o,t]),f=(0,r.useCallback)(function(e){l(e),null==t||t(e)},[t]),p=(0,r.useCallback)(function(){l([]),null==t||t([])},[t]),m=(0,r.useCallback)(function(e){return i.includes(e)},[i]),h=(0,r.useCallback)(function(e,t){s({startX:e,startY:t,endX:e,endY:t})},[]),b=(0,r.useCallback)(function(e,t){s(function(r){return r?N(N({},r),{},{endX:e,endY:t}):null})},[]),g=(0,r.useCallback)(function(e){if(d){var r=d.startX,n=d.startY,a=d.endX,i=d.endY,c=Math.min(r,a),u=Math.max(r,a),f=Math.min(n,i),p=Math.max(n,i),m=e.filter(function(e){var t=e.x+e.width/2,r=e.y+e.height/2;return t>=c&&t<=u&&r>=f&&r<=p}).map(function(e){return e.id});m.length>0&&(o?l(function(e){var r=O(new Set([].concat(O(e),O(m))));return null==t||t(r),r}):(l(m),null==t||t(m))),s(null)}},[d,o,t]),y=(0,r.useCallback)(function(){return O(i)},[i]),v=(0,r.useCallback)(function(){return O(i)},[i]);return{selectedElements:i,selectionBox:d,selectElement:u,selectAll:f,clearSelection:p,isSelected:m,startSelectionBox:h,updateSelectionBox:b,endSelectionBox:g,deleteSelected:y,duplicateSelected:v}};function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var M=function(e){var t,n,o=e.onPaste,a=(t=(0,r.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1],c=(0,r.useCallback)(function(e){l(e)},[]),d=(0,r.useCallback)(function(){return i&&o&&o(i),i},[i,o]),s=(0,r.useCallback)(function(e){return c(e),e},[c]),u=(0,r.useCallback)(function(){return null!==i},[i]),f=(0,r.useCallback)(function(){l(null)},[]);return{copy:c,paste:d,cut:s,hasData:u,clear:f,clipboardData:i}};function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var L=function(e){var t=e.initialZoom,n=void 0===t?1:t,o=e.minZoom,a=void 0===o?.1:o,i=e.maxZoom,l=void 0===i?3:i,c=e.zoomStep,d=void 0===c?.1:c,s=I((0,r.useState)(n),2),u=s[0],f=s[1],p=I((0,r.useState)({x:0,y:0}),2),m=p[0],h=p[1],b=(0,r.useCallback)(function(){f(function(e){return Math.min(e+d,l)})},[l,d]),g=(0,r.useCallback)(function(){f(function(e){return Math.max(e-d,a)})},[a,d]),y=(0,r.useCallback)(function(e){var t=Math.max(a,Math.min(l,e));f(t)},[a,l]),v=(0,r.useCallback)(function(){f(n)},[n]),x=(0,r.useCallback)(function(e,t,r,n){var o=r/e,i=n/t,c=Math.min(o,i,l);f(Math.max(c,a))},[a,l]),w=(0,r.useCallback)(function(e,t,r){var n=Math.max(a,Math.min(l,u*r));h({x:e,y:t}),f(n)},[u,a,l]),R=(0,r.useCallback)(function(e,t,r,n,o){if(e&&0!==e.length){var i=1/0,c=1/0,d=-1/0,s=-1/0;e.forEach(function(e){i=Math.min(i,e.x),c=Math.min(c,e.y),d=Math.max(d,e.x+e.width),s=Math.max(s,e.y+e.height)});var u=d-i,p=s-c,m=n/(1.2*u),b=o/(1.2*p),g=Math.min(m,b,l),y=Math.max(a,Math.min(l,g)),v=n/2-(i+u/2)*y,x=o/2-(c+p/2)*y;f(y),h({x:v,y:x})}},[a,l]),E=(0,r.useCallback)(function(){return{transform:"scale(".concat(u,")"),transformOrigin:"".concat(m.x,"px ").concat(m.y,"px")}},[u,m]),S=(0,r.useCallback)(function(e,t){return{x:(e-m.x)/u,y:(t-m.y)/u}},[u,m]),C=(0,r.useCallback)(function(e,t){return{x:e*u+m.x,y:t*u+m.y}},[u,m]);return{zoom:u,zoomOrigin:m,zoomIn:b,zoomOut:g,setZoomLevel:y,resetZoom:v,zoomToFit:x,zoomToPoint:w,zoomToSelection:R,getTransformStyle:E,screenToCanvas:S,canvasToScreen:C}};function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var U=function(){var e=G((0,r.useState)(null),2),t=e[0],n=e[1],o=G((0,r.useState)(!1),2),a=o[0],i=o[1],l=(0,r.useCallback)(function(e,t,r){var o=36*r.length,a=e,i=t;e+180>window.innerWidth&&(a=e-180),t+o>window.innerHeight&&(i=t-o),a=Math.max(0,Math.min(a,window.innerWidth-180)),i=Math.max(0,Math.min(i,window.innerHeight-o)),n({x:a,y:i,items:r})},[]),c=(0,r.useCallback)(function(){t&&(i(!0),setTimeout(function(){n(null),i(!1)},150))},[t]),d=(0,r.useCallback)(function(e){return c(),e},[c]);return(0,r.useEffect)(function(){var e=function(e){t&&!e.target.closest(".context-menu")&&c()},r=function(e){"Escape"===e.key&&t&&c()};return t&&(document.addEventListener("mousedown",e),document.addEventListener("keydown",r)),function(){document.removeEventListener("mousedown",e),document.removeEventListener("keydown",r)}},[t,c]),{contextMenu:t,showContextMenu:l,hideContextMenu:c,handleContextMenuAction:d,isAnimating:a}};function V(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return Z(d,"_invoke",function(r,n,o){var a,l,c,d=0,s=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,n){for(l=r,c=n,t=0;!u&&d&&!o&&t<s.length;t++){var o,a=s[t],p=f.p,m=a[2];r>3?(o=m===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,n}return function(o,s,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,m),l=s,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(r,o,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(Z(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,Z(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,Z(u,"constructor",d),Z(d,"constructor",c),c.displayName="GeneratorFunction",Z(d,o,"GeneratorFunction"),Z(u),Z(u,o,"Generator"),Z(u,n,function(){return this}),Z(u,"toString",function(){return"[object Generator]"}),(V=function(){return{w:a,m:f}})()}function Z(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Z=function(e,t,r,n){function a(t,r){Z(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},Z(e,t,r,n)}function X(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ne(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function J(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function K(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){J(a,n,o,i,l,"next",e)}function l(e){J(a,n,o,i,l,"throw",e)}i(void 0)})}}function Q(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach(function(t){te(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function te(e,t,r){return(t=function(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){if(e){if("string"==typeof e)return oe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ae=function(e){var t=(0,r.useRef)(e);return t.current=e,t};if("undefined"!=typeof window&&void 0===window.toastr){var ie=function(e,t,r){var n=document.createElement("div");switch(n.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      z-index: 100;\n      padding: 15px 20px;\n      margin-bottom: 10px;\n      border-radius: 5px;\n      color: white;\n      font-family: Arial, sans-serif;\n      font-size: 14px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n      max-width: 300px;\n      opacity: 0;\n      transform: translateX(100%);\n      transition: all 0.3s ease;\n    ",e){case"success":n.style.backgroundColor="#51A351";break;case"error":n.style.backgroundColor="#BD362F";break;case"warning":n.style.backgroundColor="#F89406";break;default:n.style.backgroundColor="#2F96B4"}var o=t?"<strong>".concat(t,"</strong><br>"):"";n.innerHTML="".concat(o).concat(r);var a=document.createElement("button");function i(e){e.style.opacity="0",e.style.transform="translateX(100%)",setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e)},300)}a.innerHTML="Ã—",a.style.cssText="\n      position: absolute;\n      top: 5px;\n      right: 10px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 20px;\n      cursor: pointer;\n      opacity: 0.8;\n    ",a.onclick=function(){return i(n)},n.appendChild(a),document.body.appendChild(n),setTimeout(function(){n.style.opacity="1",n.style.transform="translateX(0)"},10),setTimeout(function(){return i(n)},5e3)};window.toastr={success:function(e,t){ie("success",t,e)},error:function(e,t){ie("error",t,e)},warning:function(e,t){ie("warning",t,e)},info:function(e,t){ie("info",t,e)},options:{}}}var le=function(e){var t,n=e.initialElements,o=void 0===n?[]:n,a=e.templateId,i=void 0===a?null:a,l=e.canvasWidth,c=void 0===l?595:l,d=e.canvasHeight,s=void 0===d?842:d,u=e.globalSettings,f=void 0===u?null:u,p=re((0,r.useState)(o),2),m=p[0],h=p[1],b=re((0,r.useState)(1),2),g=b[0],y=b[1],v=re((0,r.useState)(!1),2),x=v[0],w=(v[1],re((0,r.useState)({saving:!1,loading:!1,duplicating:!1,deleting:!1}),2)),R=w[0],E=w[1],C=_(),k=P({onSelectionChange:(0,r.useCallback)(function(e){},[]),multiSelect:null===(t=null==f?void 0:f.multiSelect)||void 0===t||t}),z=ae(C),T=ae(k),B=M({onPaste:(0,r.useCallback)(function(e){if("elements"===e.type){var t=e.elements.map(function(t){return ee(ee({},t),{},{id:"element_".concat(g+e.elements.indexOf(t)),x:t.x+20,y:t.y+20})});h(function(e){return[].concat(Q(e),Q(t))}),y(function(e){return e+t.length}),k.selectAll(t.map(function(e){return e.id}))}},[g,k])}),N=L({initialZoom:f?parseFloat(f.defaultZoom)/100:1,minZoom:f?f.minZoom/100:.25,maxZoom:f?f.maxZoom/100:3,zoomStep:f?f.zoomStep/100:.1}),W=U(),O=(0,r.useCallback)(function(e,t){h(function(r){return r.map(function(r){if(r.id===e){var n=ee(ee({},r),t);return"divider"===r.type&&(n.height=16),"line"===r.type&&(n.height=12),n}return r})})},[]);(0,r.useEffect)(function(){if(m.length>0)try{z.current&&"function"==typeof z.current.addToHistory&&z.current.addToHistory({elements:m,nextId:g})}catch(e){}},[m,g]);var F=(0,r.useCallback)(function(e){return Array.isArray(e)?e.map(function(e){return e.id&&e.type?e:null}).filter(Boolean):[]},[]);(0,r.useEffect)(function(){var e=F(o);if(h(e),e&&e.length>0){var t=Math.max.apply(Math,Q(e.map(function(e){var t,r=(null===(t=e.id)||void 0===t?void 0:t.split("_"))||[];return parseInt(r[1]||0)})));y(t+1)}else y(1)},[o,F]);var A=S({onElementMove:(0,r.useCallback)(function(e,t){O(e,t)},[O]),onElementDrop:(0,r.useCallback)(function(e,t){O(e,t),C.addToHistory({elements:m.map(function(r){return r.id===e?ee(ee({},r),t):r}),nextId:g})},[O,C,m,g])}),j=(0,r.useCallback)(function(e){return e.map(function(e){var t=ee({},e);return["domElement","ref","eventListeners","component","render"].forEach(function(e){delete t[e]}),t})},[]);(0,r.useEffect)(function(){if(m.length>0||0===C.historySize){var e=j(m);C.addToHistory({elements:e,nextId:g})}},[m,g,C,j]),(0,r.useEffect)(function(){var e=["product_table","customer_info","company_logo","company_info","order_number","document_type","progress-bar"];m.some(function(t){return e.includes(t.type)&&"transparent"!==t.backgroundColor})&&h(function(t){return t.map(function(t){return e.includes(t.type)&&"transparent"!==t.backgroundColor?ee(ee({},t),{},{backgroundColor:"transparent"}):t})})},[]);var D=(0,r.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=z.current,n=T.current;if(n&&r&&"function"==typeof n.selectElement&&"function"==typeof r.addToHistory){var o=ee(ee({id:"element_".concat(g),type:e},{x:50,y:50,width:100,height:50,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderStyle:"solid",borderRadius:0,color:"#1e293b",fontFamily:"Inter, sans-serif",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",text:"Texte",opacity:100,rotation:0,scale:100,visible:!0,src:"",alt:"",objectFit:"cover",brightness:100,contrast:100,saturate:100,shadow:!1,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2,showHeaders:!0,showBorders:!0,dataSource:"order_items",showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1,progressColor:"#3b82f6",progressValue:75,lineColor:"#64748b",lineWidth:2,documentType:"invoice",imageUrl:"",spacing:8,layout:"vertical",alignment:"left",fit:"contain"}),t);"line"===e?(o.height=12,o.width=200):"divider"===e&&(o.height=16,o.width=200),h(function(e){var t=[].concat(Q(e),[o]);try{r&&"function"==typeof r.addToHistory&&r.addToHistory({elements:t,nextId:g+1})}catch(e){}return t}),y(function(e){return e+1});try{n&&"function"==typeof n.selectElement&&n.selectElement(o.id)}catch(e){}}},[g]),I=(0,r.useCallback)(function(e){h(function(t){var r=t.filter(function(t){return t.id!==e});return C.addToHistory({elements:r,nextId:g}),r}),k.clearSelection()},[k,C,g]),H=(0,r.useCallback)(function(){var e=k.deleteSelected();h(function(t){var r=t.filter(function(t){return!e.includes(t.id)});return C.addToHistory({elements:r,nextId:g}),r}),k.clearSelection()},[k,C,g]),G=(0,r.useCallback)(function(e){var t=m.find(function(t){return t.id===e});if(t){var r=ee(ee({},t),{},{id:"element_".concat(g),x:t.x+20,y:t.y+20});h(function(e){var t=[].concat(Q(e),[r]);return C.addToHistory({elements:t,nextId:g+1}),t}),y(function(e){return e+1}),k.selectElement(r.id)}},[m,g,k,C]),q=(0,r.useCallback)(function(){var e=k.duplicateSelected(),t=[];e.forEach(function(e){var r=m.find(function(t){return t.id===e});if(r){var n=ee(ee({},r),{},{id:"element_".concat(g+t.length),x:r.x+20,y:r.y+20});t.push(n)}}),t.length>0&&(h(function(e){var r=[].concat(Q(e),t);return C.addToHistory({elements:r,nextId:g+t.length}),r}),y(function(e){return e+t.length}),k.selectAll(t.map(function(e){return e.id})))},[m,g,k,C]),Z=(0,r.useCallback)(function(){var e=k.selectedElements,t=m.filter(function(t){return e.includes(t.id)});t.length>0&&B.copy({type:"elements",elements:t})},[m,k,B]),J=(0,r.useCallback)(function(){B.paste()},[B]),$=(0,r.useCallback)(function(){var e=C.undo();e&&(h(e.elements),y(e.nextId),k.clearSelection())},[C,k]),te=(0,r.useCallback)(function(){var e=C.redo();e&&(h(e.elements),y(e.nextId),k.clearSelection())},[C,k]),ne=(0,r.useCallback)(K(V().m(function e(){var t,r,n,o,a,l,d,u,f,p,h,b,g,y,v,x,w,S,C,k,z,_,T,B,N;return V().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!R.saving){e.n=1;break}return e.a(2);case 1:return E(function(e){return ee(ee({},e),{},{saving:!0})}),t=i&&"0"!==i&&0!==i,r=function(){return Promise.resolve(!0)},e.n=2,r();case 2:n=e.v,e.p=3,p=function(e){for(var t=["domElement","eventListeners","ref","onClick","onMouseDown","onMouseUp","onMouseMove","onContextMenu","onDoubleClick","onDragStart","onDragEnd","onResize","component","render","props","state","context","refs","_reactInternalInstance","_reactInternals","$$typeof","constructor","prototype","_owner","_store","key","ref","_self","_source"],r={},n=0,o=Object.entries(e);n<o.length;n++){var a=re(o[n],2),i=a[0],l=a[1];if(!t.includes(i)&&!i.startsWith("_")){var c,d,s,u,f,p,m=l;if(["x","y","width","height","fontSize","opacity","lineHeight","letterSpacing","zIndex","borderWidth","borderRadius","rotation","padding","scale","shadowOffsetX","shadowOffsetY","brightness","contrast","saturate","progressValue","lineWidth","spacing"].includes(i)&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m={x:0,y:0,width:100,height:50,fontSize:14,opacity:1,lineHeight:1.2,letterSpacing:0,zIndex:0,borderWidth:0,borderRadius:0,rotation:0,padding:0}[i]||0):m=parseFloat(l)),["color","backgroundColor","borderColor","shadowColor","progressColor","lineColor"].includes(i)&&l&&"transparent"!==l&&!/^#[0-9A-Fa-f]{3,6}$/i.test(l)&&(m={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",gray:"#808080",grey:"#808080",transparent:"transparent"}[l.toLowerCase()]||"#000000"),"fontWeight"===i&&(["normal","bold","100","200","300","400","500","600","700","800","900"].includes(l)||(m="normal")),"textAlign"===i&&(["left","center","right","justify"].includes(l)||(m="left")),"textDecoration"===i&&(["none","underline","overline","line-through"].includes(l)||(m="none")),"textTransform"===i&&(["none","capitalize","uppercase","lowercase"].includes(l)||(m="none")),"borderStyle"===i&&(["solid","dashed","dotted","double","none"].includes(l)||(m="solid")),"text"!==i&&"content"!==i||"string"!=typeof l&&(m=""),"fontFamily"===i&&("string"==typeof l&&""!==l.trim()||(m="Inter, sans-serif")),"fontStyle"===i&&(["normal","italic","oblique"].includes(l)||(m="normal")),"visible"===i&&"boolean"!=typeof l&&(m=!0),"scale"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=100):m=parseFloat(l),m=Math.max(10,Math.min(500,m))),"shadow"===i&&"boolean"!=typeof l&&(m=!1),"shadowColor"===i&&l&&"transparent"!==l&&!/^#[0-9A-Fa-f]{3,6}$/i.test(l)&&(m={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",gray:"#808080",grey:"#808080",transparent:"transparent"}[l.toLowerCase()]||"#000000"),["shadowOffsetX","shadowOffsetY"].includes(i)&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=2):m=parseFloat(l)),"brightness"!==i&&"contrast"!==i&&"saturate"!==i||("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=100):m=parseFloat(l),m=Math.max(0,Math.min(200,m))),"objectFit"===i&&(["fill","contain","cover","none","scale-down"].includes(l)||(m="cover")),["showHeaders","showBorders","showSubtotal","showShipping","showTaxes","showDiscount","showTotal"].includes(i)&&"boolean"!=typeof l&&(m=!1),"dataSource"===i&&(["order_items","cart_items","custom"].includes(l)||(m="order_items")),"progressValue"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=0):m=parseFloat(l),m=Math.max(0,Math.min(100,m))),"lineWidth"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=2):m=parseFloat(l),m=Math.max(1,Math.min(10,m))),"spacing"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=8):m=parseFloat(l)),"layout"===i&&(["vertical","horizontal","grid"].includes(l)||(m="vertical")),"alignment"===i&&(["left","center","right","justify"].includes(l)||(m="left")),"fit"===i&&(["contain","cover","fill","none"].includes(l)||(m="contain")),"documentType"===i&&(["invoice","quote","receipt","order"].includes(l)||(m="invoice")),"columns"===i&&(m="object"===Y(l)&&null!==l?{image:null===(c=l.image)||void 0===c||c,name:null===(d=l.name)||void 0===d||d,sku:null!==(s=l.sku)&&void 0!==s&&s,quantity:null===(u=l.quantity)||void 0===u||u,price:null===(f=l.price)||void 0===f||f,total:null===(p=l.total)||void 0===p||p}:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0}),null!=m)if("string"==typeof m||"number"==typeof m||"boolean"==typeof m)r[i]=m;else if(Array.isArray(m))try{var h=m.filter(function(e){return null!=e}).map(function(e){if("object"===Y(e)&&null!==e){for(var t={},r=0,n=Object.entries(e);r<n.length;r++){var o=re(n[r],2),a=o[0],i=o[1];"string"!=typeof i&&"number"!=typeof i&&"boolean"!=typeof i||(t[a]=i)}return t}return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:null}).filter(function(e){return null!==e});JSON.stringify(h),r[i]=h}catch(e){console.warn("Impossible de sÃ©rialiser le tableau pour ".concat(i,", utilisation tableau vide:"),e),r[i]=[]}else if("object"===Y(m))try{for(var b={},g=0,y=Object.entries(m);g<y.length;g++){var v=re(y[g],2),x=v[0],w=v[1];x.startsWith("_")||t.includes(x)||"string"!=typeof w&&"number"!=typeof w&&"boolean"!=typeof w||(b[x]=w)}JSON.stringify(b),r[i]=b}catch(e){console.warn("Impossible de sÃ©rialiser l'objet pour ".concat(i,", utilisation objet vide:"),e),r[i]={}}else console.warn("Type non supportÃ© ignorÃ© pour ".concat(i,": ").concat(Y(m)))}}return r},h=[];try{m.forEach(function(e,t){e&&Y(e),e&&e.id,e&&e.type}),h=m.filter(function(e){return e&&"object"===Y(e)&&e.id&&e.type}).map(p).filter(function(e){return e&&e.id&&e.type}),JSON.stringify(h)}catch(e){console.error("âŒ PDF Builder SAVE - Erreur lors du nettoyage des Ã©lÃ©ments:",e),console.error("âŒ PDF Builder SAVE - Ã‰lÃ©ments originaux qui ont causÃ© l'erreur:",m),h=[]}if(b={elements:h,canvasWidth:c,canvasHeight:s,version:"1.0"},e.p=4,g=JSON.stringify(b),(y=JSON.parse(g)).elements&&Array.isArray(y.elements)){e.n=5;break}throw new Error("Structure de donnÃ©es invalide: Ã©lÃ©ments manquants ou incorrects");case 5:v=X(y.elements),e.p=6,v.s();case 7:if((x=v.n()).done){e.n=9;break}if((w=x.value).id&&w.type){e.n=8;break}throw new Error("Ã‰lÃ©ment invalide dÃ©tectÃ©: ID ou type manquant pour ".concat(JSON.stringify(w)));case 8:e.n=7;break;case 9:e.n=11;break;case 10:e.p=10,T=e.v,v.e(T);case 11:return e.p=11,v.f(),e.f(11);case 12:e.n=14;break;case 13:throw e.p=13,B=e.v,console.error("Erreur de validation JSON cÃ´tÃ© client:",B),console.error("DonnÃ©es templateData qui ont causÃ© l'erreur:",b),new Error("DonnÃ©es JSON invalides cÃ´tÃ© client: "+B.message);case 14:return(S=new FormData).append("action","pdf_builder_pro_save_template"),S.append("template_data",g),S.append("template_name",(null===(o=window.pdfBuilderData)||void 0===o?void 0:o.templateName)||"Template ".concat((null===(a=window.pdfBuilderData)||void 0===a?void 0:a.templateId)||"New")),S.append("template_id",(null===(l=window.pdfBuilderData)||void 0===l?void 0:l.templateId)||"0"),S.append("nonce",(null===(d=window.pdfBuilderAjax)||void 0===d?void 0:d.nonce)||(null===(u=window.pdfBuilderData)||void 0===u?void 0:u.nonce)||""),e.n=15,fetch((null===(f=window.pdfBuilderAjax)||void 0===f?void 0:f.ajaxurl)||"/wp-admin/admin-ajax.php",{method:"POST",body:S});case 15:return C=e.v,e.n=16,C.json();case 16:if((k=e.v).success){e.n=17;break}throw new Error((null===(z=k.data)||void 0===z?void 0:z.message)||"Erreur lors de la sauvegarde");case 17:return t&&(n?toastr.success("Modifications du canvas sauvegardÃ©es avec succÃ¨s !"):alert("Modifications du canvas sauvegardÃ©es avec succÃ¨s !")),e.a(2,b);case 18:throw e.p=18,N=e.v,console.error("âŒ PDF Builder SAVE - Erreur lors de la sauvegarde:",N),console.error("âŒ PDF Builder SAVE - DÃ©tails de l'erreur:",{message:N.message,stack:N.stack,name:N.name}),_=N.message||"Erreur inconnue lors de la sauvegarde",n?toastr.error("Erreur lors de la sauvegarde: ".concat(_)):alert("Erreur lors de la sauvegarde: ".concat(_)),N;case 19:return e.p=19,E(function(e){return ee(ee({},e),{},{saving:!1})}),e.f(19);case 20:return e.a(2)}},e,null,[[6,10,11,12],[4,13],[3,18,19,20]])})),[m,c,s,x,i]),oe=((0,r.useCallback)(function(e){e.elements&&(h(e.elements),y(e.nextId||Math.max.apply(Math,Q(e.elements.map(function(e){return parseInt(e.id.split("_")[1])})||[0]))+1),k.clearSelection(),C.clearHistory())},[k,C]),(0,r.useCallback)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=[];r?n.push({label:"Dupliquer",action:function(){return G(r)}},{label:"Supprimer",action:function(){return I(r)}},{type:"separator"},{label:"Copier",action:Z},{label:"Coller",action:J,disabled:!B.hasData()}):k.selectedElements.length>0?n.push({label:"Dupliquer",action:q},{label:"Supprimer",action:H},{type:"separator"},{label:"Copier",action:Z},{label:"Coller",action:J,disabled:!B.hasData()}):n.push({label:"Coller",action:J,disabled:!B.hasData()}),W.showContextMenu(e,t,n)},[k,W,G,I,Z,J,B,q,H])),ie=(0,r.useCallback)(function(){var e=k.selectedElements;if(0!==e.length){var t=m.filter(function(t){return e.includes(t.id)});if(0!==t.length){var r=document.querySelector(".canvas-container");if(r){var n=r.getBoundingClientRect(),o=n.width,a=n.height;N.zoomToSelection(t,c,s,o,a)}}}},[k.selectedElements,m,N,c,s]);return(0,r.useMemo)(function(){return{elements:m,canvasWidth:c,canvasHeight:s,selection:k,zoom:N,contextMenu:W,dragAndDrop:A,addElement:D,updateElement:O,deleteElement:I,deleteSelectedElements:H,duplicateElement:G,duplicateSelectedElements:q,copySelectedElements:Z,pasteElements:J,undo:$,redo:te,canUndo:C.canUndo(),canRedo:C.canRedo(),history:C,zoomToSelection:ie,saveTemplate:ne,loadingStates:R,isSaving:R.saving,showContextMenu:oe,getAllElements:(0,r.useCallback)(function(){return m},[m]),getElementById:(0,r.useCallback)(function(e){return m.find(function(t){return t.id===e})},[m])}},[m,c,s,k,N,W,A,D,O,I,H,G,q,Z,J,$,te,C,oe,ie,ne])},ce=function(e){var t=e.onDelete,n=e.onCopy,o=e.onPaste,a=e.onUndo,i=e.onRedo,l=e.onSave,c=e.onZoomIn,d=e.onZoomOut,s=e.onSelectAll,u=e.onDeselectAll,f=e.onToolSelect,p=e.onToggleGrid,m=e.onTogglePreview;(0,r.useEffect)(function(){var e=function(e){if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"true"!==e.target.contentEditable){var r=e.ctrlKey||e.metaKey;switch(e.key.toLowerCase()){case"delete":case"backspace":t&&(e.preventDefault(),t());break;case"c":r&&n&&(e.preventDefault(),n());break;case"v":r&&o&&(e.preventDefault(),o());break;case"z":r&&(e.preventDefault(),e.shiftKey&&i?i():a&&a());break;case"y":r&&i&&(e.preventDefault(),i());break;case"s":r&&l&&(e.preventDefault(),l());break;case"+":case"=":r&&c&&(e.preventDefault(),c());break;case"-":r&&d&&(e.preventDefault(),d());break;case"a":r&&s&&(e.preventDefault(),s());break;case"d":r&&u&&(e.preventDefault(),u());break;case"g":r&&p&&(e.preventDefault(),p());break;case"p":r&&m&&(e.preventDefault(),m());break;case"v":!r&&f&&(e.preventDefault(),f("select"));break;case"r":!r&&f&&(e.preventDefault(),f("rectangle"));break;case"t":!r&&f&&(e.preventDefault(),f("text"));break;case"i":!r&&f&&(e.preventDefault(),f("image"));break;case"l":!r&&f&&(e.preventDefault(),f("line"))}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[t,n,o,a,i,l,c,d,s,u,f,p,m])};function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function se(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return ue(d,"_invoke",function(r,n,o){var a,l,c,d=0,s=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,n){for(l=r,c=n,t=0;!u&&d&&!o&&t<s.length;t++){var o,a=s[t],p=f.p,m=a[2];r>3?(o=m===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,n}return function(o,s,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,m),l=s,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(r,o,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(ue(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,ue(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,ue(u,"constructor",d),ue(d,"constructor",c),c.displayName="GeneratorFunction",ue(d,o,"GeneratorFunction"),ue(u),ue(u,o,"Generator"),ue(u,n,function(){return this}),ue(u,"toString",function(){return"[object Generator]"}),(se=function(){return{w:a,m:f}})()}function ue(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ue=function(e,t,r,n){function a(t,r){ue(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},ue(e,t,r,n)}function fe(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function he(e,t,r){return(t=function(e){var t=function(e){if("object"!=de(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=de(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==de(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ge=function(){var e,t,n=(e=(0,r.useState)({defaultCanvasWidth:210,defaultCanvasHeight:297,defaultCanvasUnit:"mm",defaultOrientation:"portrait",canvasBackgroundColor:"#ffffff",canvasShowTransparency:!1,containerBackgroundColor:"#f8f9fa",containerShowTransparency:!1,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,showMargins:!0,showGrid:!0,gridSize:10,gridColor:"#e0e0e0",gridOpacity:30,snapToGrid:!0,snapToElements:!0,snapToMargins:!0,snapTolerance:5,showGuides:!0,lockGuides:!1,defaultZoom:"100",minZoom:10,maxZoom:500,zoomStep:25,panWithMouse:!0,smoothZoom:!0,showZoomIndicator:!0,zoomWithWheel:!1,zoomToSelection:!0,showResizeHandles:!0,handleSize:8,handleColor:"#007cba",enableRotation:!0,rotationStep:15,rotationSnap:!0,multiSelect:!0,selectAllShortcut:!0,showSelectionBounds:!0,copyPasteEnabled:!0,duplicateOnDrag:!1,exportQuality:"print",exportFormat:"pdf",compressImages:!0,imageQuality:85,maxImageSize:2048,includeMetadata:!0,pdfAuthor:"",pdfSubject:"",autoCrop:!1,embedFonts:!0,optimizeForWeb:!0,enableHardwareAcceleration:!0,limitFps:!0,maxFps:60,autoSaveEnabled:!0,autoSaveInterval:30,autoSaveVersions:10,undoLevels:50,redoLevels:50,enableKeyboardShortcuts:!0,debugMode:!1,showFps:!1,resizeHandleSize:12,resizeHandleColor:"#007cba",resizeHandleBorderColor:"#ffffff",resizeHandleOffset:-6,selectionBorderWidth:2,selectionBorderColor:"var(--primary-color)",selectionShadowOpacity:.1,selectionBorderSpacing:2,resizeZoneSize:16,resizeZoneOpacity:.1,showResizeHandlesLegacy:!0,showResizeZones:!0,selectionAnimation:!0,defaultTextColor:"#000000",defaultBackgroundColor:"#ffffff",defaultFontSize:14,ajaxurl:window.ajaxurl||"",nonce:window.pdfBuilderNonce||""}),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?be(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1],i=function(){return window.pdfBuilderCanvasSettings?window.pdfBuilderCanvasSettings:null},l=function(){return window.pdfBuilderAjax?{ajaxurl:window.pdfBuilderAjax.ajaxurl||"",nonce:window.pdfBuilderAjax.nonce||""}:{ajaxurl:window.ajaxurl||"",nonce:window.pdfBuilderNonce||window.pdf_builder_nonce||""}};(0,r.useEffect)(function(){var e=i(),t=l();if(e)a(function(r){return me(me(me({},r),t),{},{defaultCanvasWidth:e.default_canvas_width||r.defaultCanvasWidth,defaultCanvasHeight:e.default_canvas_height||r.defaultCanvasHeight,defaultCanvasUnit:e.default_canvas_unit||r.defaultCanvasUnit,defaultOrientation:e.default_orientation||r.defaultOrientation,canvasBackgroundColor:e.canvas_background_color||r.canvasBackgroundColor,canvasShowTransparency:void 0!==e.canvas_show_transparency?e.canvas_show_transparency:r.canvasShowTransparency,containerBackgroundColor:e.container_background_color||r.containerBackgroundColor,containerShowTransparency:void 0!==e.container_show_transparency?e.container_show_transparency:r.containerShowTransparency,marginTop:e.margin_top||r.marginTop,marginRight:e.margin_right||r.marginRight,marginBottom:e.margin_bottom||r.marginBottom,marginLeft:e.margin_left||r.marginLeft,showMargins:void 0!==e.show_margins?e.show_margins:r.showMargins,showGrid:void 0!==e.show_grid?e.show_grid:r.showGrid,gridSize:e.grid_size||r.gridSize,gridColor:e.grid_color||r.gridColor,gridOpacity:e.grid_opacity||r.gridOpacity,snapToGrid:void 0!==e.snap_to_grid?e.snap_to_grid:r.snapToGrid,snapToElements:void 0!==e.snap_to_elements?e.snap_to_elements:r.snapToElements,snapToMargins:void 0!==e.snap_to_margins?e.snap_to_margins:r.snapToMargins,snapTolerance:e.snap_tolerance||r.snapTolerance,showGuides:void 0!==e.show_guides?e.show_guides:r.showGuides,lockGuides:void 0!==e.lock_guides?e.lock_guides:r.lockGuides,defaultZoom:e.default_zoom||r.defaultZoom,minZoom:e.min_zoom||r.minZoom,maxZoom:e.max_zoom||r.maxZoom,zoomStep:e.zoom_step||r.zoomStep,panWithMouse:void 0!==e.pan_with_mouse?e.pan_with_mouse:r.panWithMouse,smoothZoom:void 0!==e.smooth_zoom?e.smooth_zoom:r.smoothZoom,showZoomIndicator:void 0!==e.show_zoom_indicator?e.show_zoom_indicator:r.showZoomIndicator,zoomWithWheel:void 0!==e.zoom_with_wheel?e.zoom_with_wheel:r.zoomWithWheel,zoomToSelection:void 0!==e.zoom_to_selection?e.zoom_to_selection:r.zoomToSelection,showResizeHandles:!0,handleSize:e.handle_size||r.handleSize,handleColor:e.handle_color||r.handleColor,enableRotation:void 0!==e.enable_rotation?e.enable_rotation:r.enableRotation,rotationStep:e.rotation_step||r.rotationStep,rotationSnap:void 0!==e.rotation_snap?e.rotation_snap:r.rotationSnap,multiSelect:void 0!==e.multi_select?e.multi_select:r.multiSelect,selectAllShortcut:void 0!==e.select_all_shortcut?e.select_all_shortcut:r.selectAllShortcut,showSelectionBounds:void 0!==e.show_selection_bounds?e.show_selection_bounds:r.showSelectionBounds,copyPasteEnabled:void 0!==e.copy_paste_enabled?e.copy_paste_enabled:r.copyPasteEnabled,duplicateOnDrag:void 0!==e.duplicate_on_drag?e.duplicate_on_drag:r.duplicateOnDrag,exportQuality:e.export_quality||r.exportQuality,exportFormat:e.export_format||r.exportFormat,compressImages:void 0!==e.compress_images?e.compress_images:r.compressImages,imageQuality:e.image_quality||r.imageQuality,maxImageSize:e.max_image_size||r.maxImageSize,includeMetadata:void 0!==e.include_metadata?e.include_metadata:r.includeMetadata,pdfAuthor:e.pdf_author||r.pdfAuthor,pdfSubject:e.pdf_subject||r.pdfSubject,autoCrop:void 0!==e.auto_crop?e.auto_crop:r.autoCrop,embedFonts:void 0!==e.embed_fonts?e.embed_fonts:r.embedFonts,optimizeForWeb:void 0!==e.optimize_for_web?e.optimize_for_web:r.optimizeForWeb,enableHardwareAcceleration:void 0!==e.enable_hardware_acceleration?e.enable_hardware_acceleration:r.enableHardwareAcceleration,limitFps:void 0!==e.limit_fps?e.limit_fps:r.limitFps,maxFps:e.max_fps||r.maxFps,autoSaveEnabled:void 0!==e.auto_save_enabled?e.auto_save_enabled:r.autoSaveEnabled,autoSaveInterval:e.auto_save_interval||r.autoSaveInterval,autoSaveVersions:e.auto_save_versions||r.autoSaveVersions,undoLevels:e.undo_levels||r.undoLevels,redoLevels:e.redo_levels||r.redoLevels,enableKeyboardShortcuts:void 0!==e.enable_keyboard_shortcuts?e.enable_keyboard_shortcuts:r.enableKeyboardShortcuts,debugMode:void 0!==e.debug_mode?e.debug_mode:r.debugMode,showFps:void 0!==e.show_fps?e.show_fps:r.showFps,resizeHandleSize:e.canvas_handle_size||r.resizeHandleSize,resizeHandleColor:e.canvas_handle_color||r.resizeHandleColor,resizeHandleBorderColor:e.canvas_handle_hover_color||r.resizeHandleBorderColor,selectionBorderWidth:e.canvas_border_width||r.selectionBorderWidth,selectionBorderColor:e.canvas_border_color||r.selectionBorderColor,selectionBorderSpacing:e.canvas_border_spacing||r.selectionBorderSpacing,showResizeHandlesLegacy:void 0!==e.canvas_resize_handles_enabled?e.canvas_resize_handles_enabled:r.showResizeHandlesLegacy,showResizeZones:void 0!==e.canvas_element_borders_enabled?e.canvas_element_borders_enabled:r.showResizeZones,defaultTextColor:e.default_text_color||r.defaultTextColor,defaultBackgroundColor:e.default_background_color||r.defaultBackgroundColor,defaultFontSize:e.default_font_size||r.defaultFontSize})});else{var r=l(),n=localStorage.getItem("pdf-builder-global-settings");if(n)try{var o=JSON.parse(n);o.showResizeHandles=!0,a(function(e){return me(me(me({},e),r),o)})}catch(e){a(function(e){return me(me({},e),r)})}else a(function(e){return me(me({},e),r)})}},[]),(0,r.useEffect)(function(){var e=function(e){d()};return window.addEventListener("pdfBuilderSettingsUpdated",e),function(){window.removeEventListener("pdfBuilderSettingsUpdated",e)}},[]),(0,r.useEffect)(function(){var e=document.documentElement;e.style.setProperty("--resize-handle-size","".concat(o.resizeHandleSize,"px")),e.style.setProperty("--resize-handle-color",o.resizeHandleColor),e.style.setProperty("--resize-handle-border-color",o.resizeHandleBorderColor),e.style.setProperty("--resize-handle-offset","".concat(o.resizeHandleOffset,"px")),e.style.setProperty("--selection-border-width","".concat(o.selectionBorderWidth,"px")),e.style.setProperty("--selection-border-color",o.selectionBorderColor),e.style.setProperty("--selection-border-spacing","".concat(o.selectionBorderSpacing,"px")),e.style.setProperty("--selection-shadow-opacity",o.selectionShadowOpacity),e.style.setProperty("--resize-zone-size","".concat(o.resizeZoneSize,"px")),e.style.setProperty("--resize-zone-opacity",o.resizeZoneOpacity),e.style.setProperty("--show-resize-handles",o.showResizeHandles?"block":"none"),e.style.setProperty("--show-resize-zones",o.showResizeZones?"auto":"none"),e.style.setProperty("--selection-animation",o.selectionAnimation?"all 0.2s ease":"none")},[o]);var c=function(){var e,t=(e=se().m(function e(t){return se().w(function(e){for(;;)switch(e.n){case 0:a(function(e){var r=me(me({},e),t);r.showResizeHandles=!0,localStorage.setItem("pdf-builder-global-settings",JSON.stringify(r));var n=l();if(n.ajaxurl&&n.nonce){var o={show_grid:r.showGrid,grid_size:r.gridSize,grid_color:r.gridColor,grid_opacity:r.gridOpacity,snap_to_grid:r.snapToGrid,snap_to_elements:r.snapToElements,snap_to_margins:r.snapToMargins,snap_tolerance:r.snapTolerance,show_guides:r.showGuides,lock_guides:r.lockGuides,default_zoom:r.defaultZoom,min_zoom:r.minZoom,max_zoom:r.maxZoom,zoom_step:r.zoomStep,pan_with_mouse:r.panWithMouse,smooth_zoom:r.smoothZoom,show_zoom_indicator:r.showZoomIndicator,zoom_with_wheel:r.zoomWithWheel,zoom_to_selection:r.zoomToSelection,show_resize_handles:r.showResizeHandles,handle_size:r.handleSize,handle_color:r.handleColor,enable_rotation:r.enableRotation,rotation_step:r.rotationStep,rotation_snap:r.rotationSnap,multi_select:r.multiSelect,select_all_shortcut:r.selectAllShortcut,show_selection_bounds:r.showSelectionBounds,copy_paste_enabled:r.copyPasteEnabled,duplicate_on_drag:r.duplicateOnDrag,export_quality:r.exportQuality,export_format:r.exportFormat,compress_images:r.compressImages,image_quality:r.imageQuality,max_image_size:r.maxImageSize,include_metadata:r.includeMetadata,pdf_author:r.pdfAuthor,pdf_subject:r.pdfSubject,auto_crop:r.autoCrop,embed_fonts:r.embedFonts,optimize_for_web:r.optimizeForWeb,enable_hardware_acceleration:r.enableHardwareAcceleration,limit_fps:r.limitFps,max_fps:r.maxFps,auto_save_enabled:r.autoSaveEnabled,auto_save_interval:r.autoSaveInterval,auto_save_versions:r.autoSaveVersions,undo_levels:r.undoLevels,redo_levels:r.redoLevels,enable_keyboard_shortcuts:r.enableKeyboardShortcuts,debug_mode:r.debugMode,show_fps:r.showFps,default_canvas_width:r.defaultCanvasWidth,default_canvas_height:r.defaultCanvasHeight,default_canvas_unit:r.defaultCanvasUnit,canvas_background_color:r.canvasBackgroundColor,canvas_show_transparency:r.canvasShowTransparency,margin_top:r.marginTop,margin_right:r.marginRight,margin_bottom:r.marginBottom,margin_left:r.marginLeft,show_margins:r.showMargins};fetch(n.ajaxurl+"?action=pdf_builder_save_settings_page",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(me(me({},o),{},{nonce:n.nonce}))}).then(function(e){e.ok||console.warn("Erreur lors de la sauvegarde des paramÃ¨tres dans WordPress:",e.status)}).catch(function(e){console.warn("Erreur AJAX lors de la sauvegarde des paramÃ¨tres:",e)})}return r});case 1:return e.a(2)}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){fe(a,n,o,i,l,"next",e)}function l(e){fe(a,n,o,i,l,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}(),d=function(){var e=i(),t=l();e&&a(function(r){return me(me(me({},r),t),{},{defaultCanvasWidth:e.default_canvas_width||r.defaultCanvasWidth,defaultCanvasHeight:e.default_canvas_height||r.defaultCanvasHeight,defaultCanvasUnit:e.default_canvas_unit||r.defaultCanvasUnit,defaultOrientation:e.default_orientation||r.defaultOrientation,canvasBackgroundColor:e.canvas_background_color||r.canvasBackgroundColor,canvasShowTransparency:void 0!==e.canvas_show_transparency?e.canvas_show_transparency:r.canvasShowTransparency,containerBackgroundColor:e.container_background_color||r.containerBackgroundColor,containerShowTransparency:void 0!==e.container_show_transparency?e.container_show_transparency:r.containerShowTransparency,marginTop:e.margin_top||r.marginTop,marginRight:e.margin_right||r.marginRight,marginBottom:e.margin_bottom||r.marginBottom,marginLeft:e.margin_left||r.marginLeft,showMargins:void 0!==e.show_margins?e.show_margins:r.showMargins,showGrid:void 0!==e.show_grid?e.show_grid:r.showGrid,gridSize:e.grid_size||r.gridSize,gridColor:e.grid_color||r.gridColor,gridOpacity:e.grid_opacity||r.gridOpacity,snapToGrid:void 0!==e.snap_to_grid?e.snap_to_grid:r.snapToGrid,snapToElements:void 0!==e.snap_to_elements?e.snap_to_elements:r.snapToElements,snapToMargins:void 0!==e.snap_to_margins?e.snap_to_margins:r.snapToMargins,snapTolerance:e.snap_tolerance||r.snapTolerance,showGuides:void 0!==e.show_guides?e.show_guides:r.showGuides,lockGuides:void 0!==e.lock_guides?e.lock_guides:r.lockGuides,defaultZoom:e.default_zoom||r.defaultZoom,minZoom:e.min_zoom||r.minZoom,maxZoom:e.max_zoom||r.maxZoom,zoomStep:e.zoom_step||r.zoomStep,panWithMouse:void 0!==e.pan_with_mouse?e.pan_with_mouse:r.panWithMouse,smoothZoom:void 0!==e.smooth_zoom?e.smooth_zoom:r.smoothZoom,showZoomIndicator:void 0!==e.show_zoom_indicator?e.show_zoom_indicator:r.showZoomIndicator,zoomWithWheel:void 0!==e.zoom_with_wheel?e.zoom_with_wheel:r.zoomWithWheel,zoomToSelection:void 0!==e.zoom_to_selection?e.zoom_to_selection:r.zoomToSelection,showResizeHandles:!0,handleSize:e.handle_size||r.handleSize,handleColor:e.handle_color||r.handleColor,enableRotation:void 0!==e.enable_rotation?e.enable_rotation:r.enableRotation,rotationStep:e.rotation_step||r.rotationStep,rotationSnap:void 0!==e.rotation_snap?e.rotation_snap:r.rotationSnap,multiSelect:void 0!==e.multi_select?e.multi_select:r.multiSelect,selectAllShortcut:void 0!==e.select_all_shortcut?e.select_all_shortcut:r.selectAllShortcut,showSelectionBounds:void 0!==e.show_selection_bounds?e.show_selection_bounds:r.showSelectionBounds,copyPasteEnabled:void 0!==e.copy_paste_enabled?e.copy_paste_enabled:r.copyPasteEnabled,duplicateOnDrag:void 0!==e.duplicate_on_drag?e.duplicate_on_drag:r.duplicateOnDrag,exportQuality:e.export_quality||r.exportQuality,exportFormat:e.export_format||r.exportFormat,compressImages:void 0!==e.compress_images?e.compress_images:r.compressImages,imageQuality:e.image_quality||r.imageQuality,maxImageSize:e.max_image_size||r.maxImageSize,includeMetadata:void 0!==e.include_metadata?e.include_metadata:r.includeMetadata,pdfAuthor:e.pdf_author||r.pdfAuthor,pdfSubject:e.pdf_subject||r.pdfSubject,autoCrop:void 0!==e.auto_crop?e.auto_crop:r.autoCrop,embedFonts:void 0!==e.embed_fonts?e.embed_fonts:r.embedFonts,optimizeForWeb:void 0!==e.optimize_for_web?e.optimize_for_web:r.optimizeForWeb,enableHardwareAcceleration:void 0!==e.enable_hardware_acceleration?e.enable_hardware_acceleration:r.enableHardwareAcceleration,limitFps:void 0!==e.limit_fps?e.limit_fps:r.limitFps,maxFps:e.max_fps||r.maxFps,autoSaveEnabled:void 0!==e.auto_save_enabled?e.auto_save_enabled:r.autoSaveEnabled,autoSaveInterval:e.auto_save_interval||r.autoSaveInterval,autoSaveVersions:e.auto_save_versions||r.autoSaveVersions,undoLevels:e.undo_levels||r.undoLevels,redoLevels:e.redo_levels||r.redoLevels,enableKeyboardShortcuts:void 0!==e.enable_keyboard_shortcuts?e.enable_keyboard_shortcuts:r.enableKeyboardShortcuts,debugMode:void 0!==e.debug_mode?e.debug_mode:r.debugMode,showFps:void 0!==e.show_fps?e.show_fps:r.showFps,resizeHandleSize:e.canvas_handle_size||r.resizeHandleSize,resizeHandleColor:e.canvas_handle_color||r.resizeHandleColor,resizeHandleBorderColor:e.canvas_handle_hover_color||r.resizeHandleBorderColor,selectionBorderWidth:e.canvas_border_width||r.selectionBorderWidth,selectionBorderColor:e.canvas_border_color||r.selectionBorderColor,selectionBorderSpacing:e.canvas_border_spacing||r.selectionBorderSpacing,showResizeHandlesLegacy:void 0!==e.canvas_resize_handles_enabled?e.canvas_resize_handles_enabled:r.showResizeHandlesLegacy,showResizeZones:void 0!==e.canvas_element_borders_enabled?e.canvas_element_borders_enabled:r.showResizeZones,defaultTextColor:e.default_text_color||r.defaultTextColor,defaultBackgroundColor:e.default_background_color||r.defaultBackgroundColor,defaultFontSize:e.default_font_size||r.defaultFontSize})})};return{settings:o,updateSettings:c,resetToDefaults:function(){a({resizeHandleSize:12,resizeHandleColor:"#007cba",resizeHandleBorderColor:"#ffffff",selectionBorderWidth:2,selectionBorderColor:"var(--primary-color)",selectionBorderSpacing:2,selectionShadowOpacity:.1,resizeZoneSize:16,resizeZoneOpacity:.1,showResizeHandles:!0,showResizeZones:!0,selectionAnimation:!0})},refreshSettings:d}};function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ve=function(e){var t,n,o=e.showFps,a=(t=(0,r.useState)(0),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ye(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ye(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1],c=(0,r.useRef)(0),d=(0,r.useRef)(performance.now()),s=(0,r.useRef)(null);return(0,r.useEffect)(function(){if(o){var e=function(){var t=performance.now();c.current++,t-d.current>=1e3&&(l(Math.round(1e3*c.current/(t-d.current))),c.current=0,d.current=t),s.current=requestAnimationFrame(e)};return s.current=requestAnimationFrame(e),function(){s.current&&cancelAnimationFrame(s.current)}}},[o]),o?React.createElement("div",{style:{position:"fixed",top:"10px",right:"10px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#00ff00",padding:"5px 10px",borderRadius:"4px",fontFamily:"monospace",fontSize:"12px",fontWeight:"bold",zIndex:9999,pointerEvents:"none",userSelect:"none"}},"FPS: ",i):null},xe=function(e){return{Copier:"Ctrl+C",Coller:"Ctrl+V",Dupliquer:"Ctrl+D",Supprimer:"Del",Annuler:"Ctrl+Z",RÃ©tablir:"Ctrl+Y","Tout sÃ©lectionner":"Ctrl+A",DÃ©sÃ©lectionner:"Esc"}[e]};const we=function(e){var t=e.menu,n=e.onAction,o=e.isAnimating,a=void 0!==o&&o,i=e.onClose,l=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=function(e){l.current&&!l.current.contains(e.target)&&i&&i()};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[i]),t?React.createElement("div",{ref:l,className:"context-menu",style:{position:"fixed",left:t.x,top:t.y,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"6px",boxShadow:"0 8px 24px rgba(0,0,0,0.12), 0 2px 8px rgba(0,0,0,0.08)",zIndex:1e3,minWidth:"200px",padding:"4px 0",animation:a?"contextMenuFadeOut 0.15s cubic-bezier(0.4, 0, 1, 1)":"contextMenuFadeIn 0.15s cubic-bezier(0.16, 1, 0.3, 1)",transformOrigin:"top left"}},t.items.map(function(e,t){return React.createElement("div",{key:t},"separator"===e.type?React.createElement("div",{style:{height:"1px",backgroundColor:"#f8f9fa",margin:"4px 0"}}):React.createElement("button",{className:"context-menu-item",onClick:function(){return function(e){e.action&&"function"==typeof e.action?e.action():n&&n(e.action)}(e)},disabled:e.disabled,style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"10px 16px",border:"none",backgroundColor:"transparent",cursor:e.disabled?"not-allowed":"pointer",fontSize:"14px",textAlign:"left",borderRadius:"0",opacity:e.disabled?.5:1,transition:"background-color 0.15s ease, color 0.15s ease"},onMouseEnter:function(t){e.disabled||(t.target.style.backgroundColor="#f8f9fa",t.target.style.color="#1e293b")},onMouseLeave:function(t){e.disabled||(t.target.style.backgroundColor="transparent",t.target.style.color="inherit")}},React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement("span",{style:{marginRight:"8px"}},e.icon||({Dupliquer:"ðŸ“‹",Supprimer:"ðŸ—‘ï¸",Copier:"[C]",Coller:"[V]",Annuler:"â†¶",RÃ©tablir:"â†·","Tout sÃ©lectionner":"â˜‘ï¸",DÃ©sÃ©lectionner:"â˜"}[e.label]||"â€¢")),e.label),xe(e.label)&&React.createElement("span",{style:{fontSize:"12px",color:"#666",marginLeft:"16px"}},xe(e.label))))})):null};function Re(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return Ee(d,"_invoke",function(r,n,o){var a,l,c,d=0,s=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,n){for(l=r,c=n,t=0;!u&&d&&!o&&t<s.length;t++){var o,a=s[t],p=f.p,m=a[2];r>3?(o=m===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,n}return function(o,s,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,m),l=s,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(r,o,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(Ee(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,Ee(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,Ee(u,"constructor",d),Ee(d,"constructor",c),c.displayName="GeneratorFunction",Ee(d,o,"GeneratorFunction"),Ee(u),Ee(u,o,"Generator"),Ee(u,n,function(){return this}),Ee(u,"toString",function(){return"[object Generator]"}),(Re=function(){return{w:a,m:f}})()}function Ee(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Ee=function(e,t,r,n){function a(t,r){Ee(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},Ee(e,t,r,n)}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach(function(t){_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ke(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function ze(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){ke(a,n,o,i,l,"next",e)}function l(e){ke(a,n,o,i,l,"throw",e)}i(void 0)})}}function _e(e,t,r){return(t=function(e){var t=function(e){if("object"!=Te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const We=function(e){var t=e.isOpen,n=e.onClose,o=e.elements,a=void 0===o?[]:o,i=e.canvasWidth,l=void 0===i?595:i,c=e.canvasHeight,d=void 0===c?842:c,s=e.zoom,u=void 0===s?1:s,f=e.ajaxurl,p=(e.pdfBuilderNonce,e.onOpenPDFModal),m=void 0===p?null:p,h=e.useServerPreview,b=void 0!==h&&h,g=Be((0,r.useState)(null),2),y=g[0],v=g[1],x=Be((0,r.useState)(!1),2),w=x[0],R=x[1],E=Be((0,r.useState)(null),2),S=E[0],C=E[1],k=function(e){try{var t=function(e){if(!Array.isArray(e))throw new Error("Les Ã©lÃ©ments doivent Ãªtre un tableau");return e.map(function(e){if(!e||"object"!==Te(e))throw new Error("Chaque Ã©lÃ©ment doit Ãªtre un objet valide");var t=JSON.parse(JSON.stringify(e));if(["x","y","width","height","fontSize","padding","zIndex","borderWidth"].forEach(function(e){if(void 0!==t[e]){var r=parseFloat(t[e]);if(isNaN(r))throw new Error("PropriÃ©tÃ© ".concat(e," doit Ãªtre un nombre valide"));t[e]=r}}),"string"!=typeof t.type)throw new Error("Chaque Ã©lÃ©ment doit avoir un type string");return delete t.tempId,delete t.isDragging,delete t.isResizing,t})}(e),r=JSON.stringify(t);if(JSON.parse(r),r.length>1e7)throw new Error("JSON trop volumineux");return{success:!0,jsonString:r,cleanedElements:t}}catch(e){return console.error("Client-side validation failed:",e),{success:!1,error:e.message}}},z=(0,r.useCallback)(function(e){if(!e||0===e.length)return React.createElement("div",{style:{padding:"20px",textAlign:"center",color:"#666"}},"Aucun Ã©lÃ©ment Ã  afficher");var t="number"==typeof u&&!isNaN(u)&&u>0?u:1;return React.createElement("div",{style:{position:"relative",width:l*t,height:d*t,backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"4px",overflow:"hidden",margin:"0 auto"}},e.map(function(e,r){if("number"!=typeof e.x||"number"!=typeof e.y||"number"!=typeof e.width||"number"!=typeof e.height)return console.error("âŒ Element missing required properties:",e),null;var n=e.padding||0,o={position:"absolute",left:(e.x+n)*t,top:(e.y+n)*t,width:Math.max(1,e.width-2*n)*t,height:Math.max(1,e.height-2*n)*t,zIndex:e.zIndex||r+1};return React.createElement("div",{key:r,style:o},_(e,t))}))},[u,l,d]),_=(0,r.useCallback)(function(e,t){switch(e.type){case"text":return React.createElement("div",{style:{width:"100%",height:"100%",fontSize:(e.fontSize||16)*t,color:e.color||"#000000",fontWeight:"bold"===e.fontWeight?"bold":"normal",fontStyle:"italic"===e.fontStyle?"italic":"normal",textDecoration:e.textDecoration||"none",textAlign:e.textAlign||"left",lineHeight:e.lineHeight||"1.2",whiteSpace:"pre-wrap",overflow:"hidden",padding:"".concat(4*t,"px"),boxSizing:"border-box"}},e.content||e.text||"Texte");case"rectangle":return React.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:e.fillColor||"transparent",border:e.borderWidth?"".concat(e.borderWidth*t,"px ").concat(e.borderStyle||"solid"," ").concat(e.borderColor||"#000000"):"none",borderRadius:(e.borderRadius||0)*t}});case"image":return React.createElement("img",{src:e.src||e.imageUrl||"",alt:e.alt||"Image",style:{width:"100%",height:"100%",objectFit:e.objectFit||"cover",borderRadius:(e.borderRadius||0)*t},onError:function(e){e.target.style.display="none"}});case"line":return React.createElement("div",{style:_e({width:"100%",height:(e.height||e.strokeWidth||1)*t,borderTop:"".concat((e.strokeWidth||1)*t,"px solid ").concat(e.strokeColor||"#000000")},"height",0)});case"divider":return React.createElement("div",{style:_e(_e(_e({width:"100%",height:"100%",backgroundColor:e.color||e.fillColor||"#cccccc"},"height","".concat((e.thickness||e.height||2)*t,"px")),"margin","".concat((e.margin||10)*t,"px 0")),"borderRadius",(e.borderRadius||0)*t)});case"product_table":var r=function(){var e={default:{headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#f1f5f9",altRowBg:"#fafbfc",borderWidth:1,headerTextColor:"#334155",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderRadius:"4px"},classic:{headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#334155",altRowBg:"#ffffff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e293b",headerFontWeight:"700",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(0, 0, 0, 0.15)",borderRadius:"0px"},striped:{headerBg:"#3b82f6",headerBorder:"#2563eb",rowBorder:"#e2e8f0",altRowBg:"#f8fafc",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 4px rgba(59, 130, 246, 0.2)",borderRadius:"6px"},bordered:{headerBg:"#ffffff",headerBorder:"#374151",rowBorder:"#d1d5db",altRowBg:"#ffffff",borderWidth:2,headerTextColor:"#111827",rowTextColor:"#111827",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 12px rgba(0, 0, 0, 0.1), inset 0 0 0 1px #e5e7eb",borderRadius:"8px"},minimal:{headerBg:"#ffffff",headerBorder:"#d1d5db",rowBorder:"#f3f4f6",altRowBg:"#ffffff",borderWidth:.5,headerTextColor:"#6b7280",rowTextColor:"#6b7280",headerFontWeight:"500",headerFontSize:"10px",rowFontSize:"9px",shadow:"none",borderRadius:"0px"},modern:{gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",headerBorder:"#5b21b6",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#6b21a8",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 20px rgba(102, 126, 234, 0.25)",borderRadius:"8px"},blue_ocean:{gradient:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e3a8a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(59, 130, 246, 0.3)",borderRadius:"6px"},emerald_forest:{gradient:"linear-gradient(135deg, #064e3b 0%, #10b981 100%)",headerBorder:"#065f46",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#064e3b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(16, 185, 129, 0.3)",borderRadius:"6px"},sunset_orange:{gradient:"linear-gradient(135deg, #9a3412 0%, #f97316 100%)",headerBorder:"#c2410c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(249, 115, 22, 0.3)",borderRadius:"6px"},royal_purple:{gradient:"linear-gradient(135deg, #581c87 0%, #a855f7 100%)",headerBorder:"#7c3aed",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#581c87",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(168, 85, 247, 0.3)",borderRadius:"6px"},rose_pink:{gradient:"linear-gradient(135deg, #be185d 0%, #f472b6 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#be185d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(244, 114, 182, 0.3)",borderRadius:"6px"},teal_aqua:{gradient:"linear-gradient(135deg, #0f766e 0%, #14b8a6 100%)",headerBorder:"#0d9488",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#0f766e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(20, 184, 166, 0.3)",borderRadius:"6px"},crimson_red:{gradient:"linear-gradient(135deg, #991b1b 0%, #ef4444 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#991b1b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(239, 68, 68, 0.3)",borderRadius:"6px"},amber_gold:{gradient:"linear-gradient(135deg, #92400e 0%, #f59e0b 100%)",headerBorder:"#d97706",rowBorder:"#fef3c7",altRowBg:"#fffbeb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#92400e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(245, 158, 11, 0.3)",borderRadius:"6px"},indigo_night:{gradient:"linear-gradient(135deg, #312e81 0%, #6366f1 100%)",headerBorder:"#4338ca",rowBorder:"#e0e7ff",altRowBg:"#eef2ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#312e81",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(99, 102, 241, 0.3)",borderRadius:"6px"},slate_gray:{gradient:"linear-gradient(135deg, #374151 0%, #6b7280 100%)",headerBorder:"#4b5563",rowBorder:"#f3f4f6",altRowBg:"#f9fafb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(107, 114, 128, 0.3)",borderRadius:"6px"},coral_sunset:{gradient:"linear-gradient(135deg, #c2410c 0%, #fb7185 100%)",headerBorder:"#ea580c",rowBorder:"#fed7d7",altRowBg:"#fef7f7",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#c2410c",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 113, 133, 0.3)",borderRadius:"6px"},mint_green:{gradient:"linear-gradient(135deg, #065f46 0%, #34d399 100%)",headerBorder:"#047857",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#065f46",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(52, 211, 153, 0.3)",borderRadius:"6px"},violet_dream:{gradient:"linear-gradient(135deg, #6d28d9 0%, #c084fc 100%)",headerBorder:"#8b5cf6",rowBorder:"#ede9fe",altRowBg:"#f5f3ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#6d28d9",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(192, 132, 252, 0.3)",borderRadius:"6px"},sky_blue:{gradient:"linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%)",headerBorder:"#0284c7",rowBorder:"#bae6fd",altRowBg:"#f0f9ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#0369a1",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(14, 165, 233, 0.3)",borderRadius:"6px"},forest_green:{gradient:"linear-gradient(135deg, #14532d 0%, #22c55e 100%)",headerBorder:"#15803d",rowBorder:"#bbf7d0",altRowBg:"#f0fdf4",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#14532d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(34, 197, 94, 0.3)",borderRadius:"6px"},ruby_red:{gradient:"linear-gradient(135deg, #b91c1c 0%, #f87171 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#b91c1b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(248, 113, 113, 0.3)",borderRadius:"6px"},golden_yellow:{gradient:"linear-gradient(135deg, #a16207 0%, #eab308 100%)",headerBorder:"#ca8a04",rowBorder:"#fef08a",altRowBg:"#fefce8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#a16207",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(234, 179, 8, 0.3)",borderRadius:"6px"},navy_blue:{gradient:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e3a8a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(59, 130, 246, 0.3)",borderRadius:"6px"},burgundy_wine:{gradient:"linear-gradient(135deg, #7f1d1d 0%, #dc2626 100%)",headerBorder:"#991b1b",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#7f1d1d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(220, 38, 38, 0.3)",borderRadius:"6px"},lavender_purple:{gradient:"linear-gradient(135deg, #7c2d12 0%, #a855f7 100%)",headerBorder:"#9333ea",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#7c2d12",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(168, 85, 247, 0.3)",borderRadius:"6px"},ocean_teal:{gradient:"linear-gradient(135deg, #134e4a 0%, #14b8a6 100%)",headerBorder:"#0f766e",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#134e4a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(20, 184, 166, 0.3)",borderRadius:"6px"},cherry_blossom:{gradient:"linear-gradient(135deg, #be185d 0%, #fb7185 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#be185d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 113, 133, 0.3)",borderRadius:"6px"},autumn_orange:{gradient:"linear-gradient(135deg, #9a3412 0%, #fb923c 100%)",headerBorder:"#ea580c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 146, 60, 0.3)",borderRadius:"6px"}};return e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]||e.default}(e.tableStyle),n=!1!==e.showHeaders,o=!1!==e.showBorders,a=e.columns||{image:!1,name:!0,sku:!1,quantity:!0,price:!0,total:!0},i=e.headers||["Produit","QtÃ©","Prix"],l=function(e){return{image:"Img",name:i[0]||"Produit",sku:"SKU",quantity:i[1]||"QtÃ©",price:i[2]||"Prix",total:"Total"}[e]||e},c=[{name:"Produit A - Description",sku:"SKU001",quantity:2,price:19.99,total:39.98},{name:"Produit B - Article",sku:"SKU002",quantity:1,price:29.99,total:29.99}],d=c.reduce(function(e,t){return e+t.total},0),s=e.showShipping?5:0,u=e.showTaxes?2.25:0,f=e.showDiscount?-5:0,p=d+s+u+f;return function(){for(var e=["image","name","sku","quantity","price","total"],t=e.length-1;t>=0;t--)if(!1!==a[e[t]])return e[t]}(),React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",fontSize:"".concat((e.fontSize||10)*t,"px"),fontFamily:e.fontFamily||"Arial, sans-serif",border:o?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):e.borderWidth&&e.borderWidth>0?"".concat(Math.max(1,.5*e.borderWidth)*t,"px solid ").concat(e.borderColor||"#e5e7eb"):"none",borderRadius:"".concat((e.borderRadius||2)*t,"px"),overflow:"hidden",backgroundColor:e.backgroundColor||"transparent",boxSizing:"border-box",boxShadow:r.shadow&&"modern"===e.tableStyle?"0 4px 8px ".concat(r.shadow):"none"}},n&&React.createElement("div",{style:{display:"flex",background:r.gradient||r.headerBg,borderBottom:o?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none",fontWeight:"bold",color:r.headerTextColor||("modern"===e.tableStyle?"#ffffff":"#000000"),boxShadow:r.shadow?"0 2px 4px ".concat(r.shadow):"none"}},a.image&&React.createElement("div",{style:{flex:"0 0 ".concat(40*t,"px"),padding:"".concat(4*t,"px"),textAlign:"center",borderRight:o?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none"}},l("image")),a.name&&React.createElement("div",{style:{flex:1,padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"left",borderRight:o?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none"}},l("name")),a.sku&&React.createElement("div",{style:{flex:"0 0 ".concat(80*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"left",borderRight:o?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none"}},l("sku")),a.quantity&&React.createElement("div",{style:{flex:"0 0 ".concat(60*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"center",borderRight:o?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none"}},l("quantity")),a.price&&React.createElement("div",{style:{flex:"0 0 ".concat(80*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"right",borderRight:o?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none"}},l("price")),a.total&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"right"}},l("total"))),React.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},c.map(function(n,i){return React.createElement("div",{key:i,style:{display:"flex",borderBottom:o?"".concat(r.borderWidth,"px solid ").concat(r.rowBorder):"none",backgroundColor:"striped"===e.tableStyle&&i%2==1?r.altRowBg:"transparent",color:r.rowTextColor||"#000000",boxShadow:r.shadow?"0 1px 2px ".concat(r.shadow):"none"}},a.image&&React.createElement("div",{style:{flex:"0 0 ".concat(40*t,"px"),padding:"".concat(4*t,"px"),textAlign:"center",borderRight:o?"".concat(r.borderWidth*t,"px solid ").concat(r.rowBorder):"none"}},"ðŸ“·"),a.name&&React.createElement("div",{style:{flex:1,padding:"".concat(4*t,"px ").concat(6*t,"px"),borderRight:o?"".concat(r.borderWidth*t,"px solid ").concat(r.rowBorder):"none"}},n.name),a.sku&&React.createElement("div",{style:{flex:"0 0 ".concat(80*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),borderRight:o?"".concat(r.borderWidth*t,"px solid ").concat(r.rowBorder):"none"}},n.sku),a.quantity&&React.createElement("div",{style:{flex:"0 0 ".concat(60*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"center",borderRight:o?"".concat(r.borderWidth*t,"px solid ").concat(r.rowBorder):"none"}},n.quantity),a.price&&React.createElement("div",{style:{flex:"0 0 ".concat(80*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"right",borderRight:o?"".concat(r.borderWidth*t,"px solid ").concat(r.rowBorder):"none"}},n.price.toFixed(2),"â‚¬"),a.total&&React.createElement("div",{style:{flex:"0 0 ".concat(80*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"right"}},n.total.toFixed(2),"â‚¬"))})),React.createElement("div",{style:{borderTop:o?"".concat(r.borderWidth,"px solid ").concat(r.headerBorder):"none"}},e.showSubtotal&&React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"".concat(4*t,"px ").concat(6*t,"px"),fontWeight:"bold"}},React.createElement("div",{style:{width:"".concat(80*t,"px"),textAlign:"right"}},"Sous-total: ",d.toFixed(2),"â‚¬")),e.showShipping&&s>0&&React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"".concat(4*t,"px ").concat(6*t,"px")}},React.createElement("div",{style:{width:"".concat(80*t,"px"),textAlign:"right"}},"Port: ",s.toFixed(2),"â‚¬")),e.showTaxes&&u>0&&React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"".concat(4*t,"px ").concat(6*t,"px")}},React.createElement("div",{style:{width:"".concat(80*t,"px"),textAlign:"right"}},"TVA: ",u.toFixed(2),"â‚¬")),e.showDiscount&&f<0&&React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"".concat(4*t,"px ").concat(6*t,"px")}},React.createElement("div",{style:{width:"".concat(80*t,"px"),textAlign:"right"}},"Remise: ",Math.abs(f).toFixed(2),"â‚¬")),e.showTotal&&React.createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"".concat(4*t,"px ").concat(6*t,"px"),fontWeight:"bold",background:r.gradient||r.headerBg,color:r.headerTextColor||("modern"===e.tableStyle?"#ffffff":"#000000"),boxShadow:r.shadow?"0 2px 4px ".concat(r.shadow):"none"}},React.createElement("div",{style:{width:"".concat(80*t,"px"),textAlign:"right"}},"TOTAL: ",p.toFixed(2),"â‚¬"))));case"customer_info":var m=e.fields||["name","email","phone","address","company","vat","siret"],h=!1!==e.showLabels,b=e.layout||"vertical",g=e.alignment||"left",y=e.spacing||3,v={name:"Jean Dupont",company:"ABC Company SARL",address:"123 Rue de la Paix\n75001 Paris\nFrance",email:"jean.dupont@email.com",phone:"+33 6 12 34 56 78",tva:"FR 12 345 678 901",siret:"123 456 789 00012",website:"www.abc-company.com"},x={padding:"".concat(8*t,"px"),fontSize:(e.fontSize||12)*t,lineHeight:e.lineHeight||"1.4",color:e.color||"#1e293b",fontFamily:e.fontFamily||"Inter, sans-serif",textAlign:g,display:"horizontal"===b?"flex":"block",flexWrap:"horizontal"===b?"wrap":"nowrap",gap:"horizontal"===b?"".concat(y*t,"px"):"0"};return React.createElement("div",{style:x},m.map(function(r,n){var o=v[r];if(!o)return null;var a="horizontal"===b?{flex:"1",minWidth:"".concat(120*t,"px")}:{marginBottom:n<m.length-1?"".concat(y*t,"px"):"0",display:"flex",alignItems:"flex-start"};return React.createElement("div",{key:r,style:a},h&&React.createElement("div",{style:{fontWeight:"bold"===e.labelStyle?"bold":"normal",marginBottom:"horizontal"===b?"".concat(2*t,"px"):"0",marginRight:"horizontal"===b?"0":"".concat(8*t,"px"),fontSize:"".concat(11*t,"px"),opacity:.8,minWidth:"horizontal"===b?"auto":"".concat(80*t,"px"),flexShrink:0}},"name"===r&&"Client","company"===r&&"Entreprise","address"===r&&"Adresse","email"===r&&"Email","phone"===r&&"TÃ©lÃ©phone","tva"===r&&"NÂ° TVA","siret"===r&&"SIRET","website"===r&&"Site web",":"),React.createElement("div",{style:{whiteSpace:"pre-line",fontSize:(e.fontSize||12)*t,flex:"horizontal"===b?"1":"auto"}},o))}));case"company_info":var w=e.fields||["name","address","phone","email","website","vat","rcs","siret"],R=!1!==e.showLabels,E=e.layout||"vertical",S=e.alignment||"left",C=e.spacing||3,k={name:"ABC Company SARL",address:"456 Avenue des Champs\n75008 Paris\nFrance",phone:"01 23 45 67 89",email:"contact@abc-company.com",tva:"FR 98 765 432 109",siret:"987 654 321 00098",rcs:"Paris B 123 456 789",website:"www.abc-company.com"},z={padding:"".concat(8*t,"px"),fontSize:(e.fontSize||12)*t,lineHeight:e.lineHeight||"1.4",color:e.color||"#1e293b",fontFamily:e.fontFamily||"Inter, sans-serif",textAlign:S,display:"horizontal"===E?"flex":"block",flexWrap:"horizontal"===E?"wrap":"nowrap",gap:"horizontal"===E?"".concat(C*t,"px"):"0"};return React.createElement("div",{style:z},w.map(function(r,n){var o=k[r];if(!o)return null;var a="horizontal"===E?{flex:"1",minWidth:"".concat(120*t,"px")}:{marginBottom:n<w.length-1?"".concat(C*t,"px"):"0",display:"flex",alignItems:"flex-start"};return React.createElement("div",{key:r,style:a},R&&React.createElement("div",{style:{fontWeight:"bold"===e.labelStyle?"bold":"normal",marginBottom:"horizontal"===E?"".concat(2*t,"px"):"0",marginRight:"horizontal"===E?"0":"".concat(8*t,"px"),fontSize:"".concat(11*t,"px"),opacity:.8,minWidth:"horizontal"===E?"auto":"".concat(80*t,"px"),flexShrink:0}},"name"===r&&"Entreprise","address"===r&&"Adresse","phone"===r&&"TÃ©lÃ©phone","email"===r&&"Email","tva"===r&&"NÂ° TVA","siret"===r&&"SIRET","rcs"===r&&"RCS","website"===r&&"Site web",":"),React.createElement("div",{style:{whiteSpace:"pre-line",fontSize:(e.fontSize||12)*t,flex:"horizontal"===E?"1":"auto"}},o))}));case"company_logo":return React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"".concat((e.padding||8)*t,"px"),backgroundColor:e.backgroundColor||"transparent",borderRadius:(e.borderRadius||0)*t,border:e.borderWidth?"".concat(e.borderWidth*t,"px solid ").concat(e.borderColor||"#e5e7eb"):"none"}},e.imageUrl||e.src?React.createElement("img",{src:e.imageUrl||e.src,alt:e.alt||"Logo entreprise",style:{maxWidth:"100%",maxHeight:"100%",objectFit:e.objectFit||"contain"}}):React.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#f0f0f0",border:"".concat(2*t,"px dashed #ccc"),display:"flex",alignItems:"center",justifyContent:"center",color:"#666",fontSize:(e.fontSize||12)*t}},"ðŸ¢ Logo"));case"order_number":return React.createElement("div",{style:{padding:"".concat((e.padding||8)*t,"px"),fontSize:(e.fontSize||14)*t,fontWeight:e.fontWeight||"bold",color:e.color||"#333",fontFamily:e.fontFamily||"Inter, sans-serif",textAlign:e.textAlign||"left",backgroundColor:e.backgroundColor||"transparent",borderRadius:(e.borderRadius||0)*t,border:e.borderWidth?"".concat(e.borderWidth*t,"px solid ").concat(e.borderColor||"#e5e7eb"):"none"}},!1!==e.showLabel&&React.createElement("div",{style:{fontSize:.8*(e.fontSize||14)*t,color:e.labelColor||"#666",marginBottom:"".concat(2*t,"px"),fontWeight:"normal"}},e.label||"NÂ° de commande",":"),React.createElement("div",{style:{fontSize:(e.fontSize||14)*t,fontWeight:e.fontWeight||"bold"}},e.prefix||"CMD-",e.orderNumber||"2025-00123"));case"document_type":return React.createElement("div",{style:{padding:"".concat((e.padding||8)*t,"px"),fontSize:"".concat((e.fontSize||18)*t,"px"),fontWeight:e.fontWeight||"bold",color:e.color||"#1e293b",fontFamily:e.fontFamily||"Inter, sans-serif",textAlign:e.textAlign||"center",backgroundColor:e.backgroundColor||"transparent",borderRadius:(e.borderRadius||0)*t}},"invoice"===e.documentType?"FACTURE":"quote"===e.documentType?"DEVIS":"receipt"===e.documentType?"REÃ‡U":"order"===e.documentType?"COMMANDE":"credit_note"===e.documentType?"AVOIR":"DOCUMENT");case"progress-bar":return React.createElement("div",{style:{width:"100%",height:(e.height||20)*t,backgroundColor:e.backgroundColor||"#e5e7eb",borderRadius:(e.borderRadius||10)*t,overflow:"hidden",border:e.borderWidth?"".concat(e.borderWidth*t,"px solid ").concat(e.borderColor||"#d1d5db"):"none"}},React.createElement("div",{style:{width:"".concat(Math.min(100,Math.max(0,e.progressValue||75)),"%"),height:"100%",backgroundColor:e.progressColor||"#3b82f6",borderRadius:(e.borderRadius||10)*t,transition:!1!==e.animate?"width 0.3s ease":"none"}}));default:return React.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#f0f0f0",border:"".concat(1*t,"px dashed #ccc"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"".concat(12*t,"px"),color:"#666",padding:"".concat(4*t,"px"),boxSizing:"border-box"}},e.type||"Ã‰lÃ©ment inconnu")}},[]);(0,r.useEffect)(function(){t&&a.length>0?b?B():(v({success:!0,elements_count:a.length,width:400,height:566,fallback:!1}),T()):t&&0===a.length&&v({success:!0,elements_count:0,width:400,height:566,fallback:!1})},[t,a.length,b]);var T=function(){var e=ze(Re().m(function e(){var t,r,n,o,i,l,c,d,s,u,p,m,h,b,g;return Re().w(function(e){for(;;)switch(e.p=e.n){case 0:if(C(null),e.p=1,r=(null===(t=window.pdfBuilderAjax)||void 0===t?void 0:t.ajaxurl)||f){e.n=2;break}return console.warn("Variables AJAX non disponibles pour validation cÃ´tÃ© serveur"),e.a(2);case 2:return(n=new FormData).append("action","pdf_builder_get_fresh_nonce"),e.n=3,fetch(r,{method:"POST",body:n});case 3:if((o=e.v).ok){e.n=4;break}return console.warn("Erreur obtention nonce pour validation:",o.status),e.a(2);case 4:return e.n=5,o.json();case 5:if((i=e.v).success){e.n=6;break}return console.warn("Impossible d'obtenir un nonce frais pour validation"),e.a(2);case 6:if(l=i.data.nonce,(c=k(a)).success){e.n=7;break}return console.error("âŒ Validation cÃ´tÃ© client Ã©chouÃ©e:",c.error),v(function(e){return Ce(Ce({},e),{},{error:"Erreur de validation cÃ´tÃ© client: ".concat(c.error),isLoading:!1})}),e.a(2);case 7:return d=c.jsonString,c.cleanedElements,(s=new FormData).append("action","pdf_builder_validate_preview"),s.append("nonce",l),s.append("elements",d),e.n=8,fetch(r,{method:"POST",body:s});case 8:if((u=e.v).ok){e.n=9;break}return console.warn("Erreur HTTP validation aperÃ§u:",u.status),e.a(2);case 9:return e.p=9,e.n=10,u.json();case 10:p=e.v,e.n=13;break;case 11:return e.p=11,b=e.v,console.error("âŒ Erreur parsing JSON rÃ©ponse serveur:",b),e.n=12,u.text();case 12:return m=e.v,console.error("Contenu brut de la rÃ©ponse:",m.substring(0,500)),v(function(e){return Ce(Ce({},e),{},{server_error:"RÃ©ponse serveur invalide (pas du JSON)"})}),e.a(2);case 13:p.success?v(function(e){return Ce(Ce(Ce({},e),p.data),{},{server_validated:!0})}):(console.warn("âš ï¸ Validation aperÃ§u cÃ´tÃ© serveur Ã©chouÃ©e:",p.data),h="Erreur validation serveur","string"==typeof p.data?h=p.data:p.data&&"object"===Te(p.data)&&p.data.message?h=p.data.message:p.data&&"object"===Te(p.data)&&(h=JSON.stringify(p.data)),v(function(e){return Ce(Ce({},e),{},{server_error:h})})),e.n=15;break;case 14:e.p=14,g=e.v,console.warn("Erreur validation aperÃ§u cÃ´tÃ© serveur:",g),v(function(e){return Ce(Ce({},e),{},{server_error:g.message||"Erreur inconnue cÃ´tÃ© serveur"})});case 15:return e.a(2)}},e,null,[[9,11],[1,14]])}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=ze(Re().m(function e(){var t,r,n,o,i,c,s,p,m,h,b,g,y,x;return Re().w(function(e){for(;;)switch(e.p=e.n){case 0:if(R(!0),C(null),v(null),t=setTimeout(function(){v({success:!0,elements_count:a.length,width:l,height:d,fallback:!0,server_timeout:!0}),R(!1)},1e4),e.p=1,(o=k(a)).success){e.n=2;break}return console.error("âŒ Validation cÃ´tÃ© client Ã©chouÃ©e:",o.error),v(function(e){return Ce(Ce({},e),{},{error:"Erreur de validation cÃ´tÃ© client: ".concat(o.error),isLoading:!1})}),e.a(2);case 2:if(i=o.jsonString,c=(null===(r=window.pdfBuilderAjax)||void 0===r?void 0:r.ajaxurl)||f){e.n=3;break}return alert("Erreur: Variables AJAX non disponibles. Rechargez la page."),e.a(2);case 3:return(s=new FormData).append("action","pdf_builder_get_fresh_nonce"),e.n=4,fetch(c,{method:"POST",body:s});case 4:if((p=e.v).ok){e.n=5;break}throw new Error("Erreur HTTP nonce: ".concat(p.status));case 5:return e.n=6,p.json();case 6:if((m=e.v).success){e.n=7;break}throw new Error("Impossible d'obtenir un nonce frais");case 7:return h=m.data.nonce,(b=new FormData).append("action","pdf_builder_unified_preview"),b.append("nonce",h),b.append("elements",i),e.n=8,fetch(f||(null===(n=window.pdfBuilderAjax)||void 0===n?void 0:n.ajaxurl)||"/wp-admin/admin-ajax.php",{method:"POST",body:b});case 8:if((g=e.v).ok){e.n=9;break}throw new Error("Erreur HTTP: ".concat(g.status));case 9:return e.n=10,g.json();case 10:if(!((y=e.v).success&&y.data&&y.data.url)){e.n=11;break}return clearTimeout(t),v({url:y.data.url,server_validated:!0,elements_count:a.length,width:l,height:d,zoom:u}),R(!1),C(null),e.a(2);case 11:throw new Error(y.data||"Erreur gÃ©nÃ©ration aperÃ§u cÃ´tÃ© serveur");case 12:e.n=14;break;case 13:e.p=13,x=e.v,console.error("âŒ Erreur gÃ©nÃ©ration aperÃ§u cÃ´tÃ© serveur:",x),clearTimeout(t),C("Erreur aperÃ§u cÃ´tÃ© serveur: ".concat(x.message)),R(!1);case 14:return e.a(2)}},e,null,[[1,13]])}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=ze(Re().m(function e(){var t,r,n,o,i,l,c,d,s,u,p,h,b,g,y,v;return Re().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=null,e.p=1,n=(null===(r=window.pdfBuilderAjax)||void 0===r?void 0:r.ajaxurl)||f){e.n=2;break}return alert("Erreur: Variables AJAX non disponibles. Rechargez la page."),e.a(2);case 2:return(o=new FormData).append("action","pdf_builder_get_fresh_nonce"),e.n=3,fetch(n,{method:"POST",body:o});case 3:if((i=e.v).ok){e.n=4;break}throw new Error("Erreur HTTP nonce: ".concat(i.status));case 4:return e.n=5,i.json();case 5:if((l=e.v).success){e.n=6;break}throw new Error("Impossible d'obtenir un nonce frais");case 6:return c=l.data.nonce,(d=new FormData).append("action","pdf_builder_generate_pdf"),d.append("nonce",c),d.append("elements",JSON.stringify(a)),(t=document.querySelector(".btn-primary"))&&(t.textContent,t.textContent="â³ GÃ©nÃ©ration PDF...",t.disabled=!0),e.n=7,fetch(n,{method:"POST",body:d});case 7:if((s=e.v).ok){e.n=8;break}throw new Error("Erreur rÃ©seau: "+s.status);case 8:return e.n=9,s.json().catch(function(e){throw console.error("Erreur parsing JSON:",e),new Error("RÃ©ponse invalide du serveur (pas du JSON)")});case 9:if((u=e.v).success){e.n=10;break}throw p="Erreur inconnue lors de la gÃ©nÃ©ration du PDF","string"==typeof u.data?p=u.data:"object"===Te(u.data)&&null!==u.data&&(p=u.data.message||JSON.stringify(u.data)),new Error(p);case 10:if(u.data&&u.data.pdf){e.n=11;break}throw new Error("DonnÃ©es PDF manquantes dans la rÃ©ponse");case 11:if(h=u.data.pdf,0!==(b=new Blob([Uint8Array.from(atob(h),function(e){return e.charCodeAt(0)})],{type:"application/pdf"})).size){e.n=12;break}throw new Error("Le PDF gÃ©nÃ©rÃ© est vide");case 12:g=URL.createObjectURL(b),m?m(g):window.open(g,"_blank")||((y=document.createElement("a")).href=g,y.target="_blank",y.rel="noopener noreferrer",document.body.appendChild(y),y.click(),y.parentNode===document.body&&document.body.removeChild(y)),m||setTimeout(function(){URL.revokeObjectURL(g)},1e3),e.n=14;break;case 13:e.p=13,v=e.v,console.error("Erreur gÃ©nÃ©ration PDF:",v),alert("Erreur lors de la gÃ©nÃ©ration du PDF: "+v.message);case 14:return e.p=14,t&&(t.textContent="ðŸ‘ï¸ Imprimer PDF",t.disabled=!1),e.f(14);case 15:return e.a(2)}},e,null,[[1,13,14,15]])}));return function(){return e.apply(this,arguments)}}();return t?React.createElement("div",{className:"preview-modal-overlay",onClick:n},React.createElement("div",{className:"preview-modal-content",onClick:function(e){return e.stopPropagation()}},React.createElement("div",{className:"preview-modal-header"},React.createElement("h3",null,"ðŸŽ¨ AperÃ§u Canvas - PDF Builder Pro v2.0"),React.createElement("button",{className:"preview-modal-close",onClick:n},"Ã—")),React.createElement("div",{className:"preview-modal-body"},w&&React.createElement("div",{className:"preview-loading"},React.createElement("div",{className:"preview-spinner"}),React.createElement("p",null,"GÃ©nÃ©ration de l'aperÃ§u...")),S&&React.createElement("div",{className:"preview-error"},React.createElement("h4",null,"âŒ Erreur d'aperÃ§u"),React.createElement("p",null,S),React.createElement("p",null,React.createElement("small",null,"Le PDF pourra quand mÃªme Ãªtre gÃ©nÃ©rÃ© normalement."))),y&&React.createElement("div",{className:"preview-content"},React.createElement("div",{style:{textAlign:"center",marginBottom:"20px",padding:"10px",background:y.server_validated?"#e8f5e8":"#fff3cd",borderRadius:"4px",border:"1px solid ".concat(y.server_validated?"#c3e6c3":"#ffeaa7")}},React.createElement("strong",null,y.server_validated?"âœ…":"âš¡"," AperÃ§u gÃ©nÃ©rÃ©"),React.createElement("br",null),React.createElement("small",null,y.elements_count," Ã©lÃ©ment",1!==y.elements_count?"s":""," â€¢ ",y.width,"Ã—",y.height,"px",y.server_validated&&" â€¢ Serveur validÃ©",y.server_error&&" â€¢ âš ï¸ ProblÃ¨me serveur")),React.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"flex-start",minHeight:"400px",backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"20px"}},y.url?React.createElement("iframe",{src:y.url,style:{width:"100%",height:"600px",border:"1px solid #dee2e6",borderRadius:"4px",backgroundColor:"white"},title:"AperÃ§u PDF cÃ´tÃ© serveur"}):z(a)),y.server_error&&React.createElement("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#ffeaa7",borderRadius:"6px",border:"1px solid #d4a574"}},React.createElement("h5",{style:{margin:"0 0 10px 0",color:"#856404"}},"âš ï¸ Note"),React.createElement("p",{style:{margin:"0",fontSize:"14px",color:"#333"}},"L'aperÃ§u s'affiche correctement, mais il y a un problÃ¨me de validation cÃ´tÃ© serveur: ",y.server_error)),React.createElement("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#e8f4fd",borderRadius:"6px",border:"1px solid #b3d9ff"}},React.createElement("h5",{style:{margin:"0 0 10px 0",color:"#0066cc"}},"â„¹ï¸ Informations du Canvas"),React.createElement("p",{style:{margin:"0",fontSize:"14px",color:"#333"}},React.createElement("strong",null,"Dimensions:")," ",l," Ã— ",d," pixels",React.createElement("br",null),React.createElement("strong",null,"Ã‰lÃ©ments:")," ",a.length,React.createElement("br",null),React.createElement("strong",null,"Zoom:")," ",Math.round(100*u),"%",React.createElement("br",null),React.createElement("strong",null,"Status:")," ",y.server_validated?"ValidÃ© cÃ´tÃ© serveur":"AperÃ§u local"))),!w&&!S&&!y&&React.createElement("div",{className:"preview-loading"},React.createElement("p",null,"PrÃ©paration de l'aperÃ§u..."))),React.createElement("div",{className:"preview-modal-footer"},React.createElement("button",{className:"btn btn-secondary",onClick:n},"âŒ Fermer"),React.createElement("button",{className:"btn btn-primary",onClick:N},"ðŸ‘ï¸ Imprimer PDF")))):null},Oe=function(e){var t=e.isOpen,r=e.onClose,n=e.pdfUrl,o=e.title,a=void 0===o?"AperÃ§u PDF":o;return t?React.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:r},React.createElement("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",height:"90%",maxWidth:"1200px",maxHeight:"800px",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},onClick:function(e){return e.stopPropagation()}},React.createElement("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8f9fa",borderRadius:"8px 8px 0 0"}},React.createElement("h3",{style:{margin:0,color:"#1a202c",fontSize:"18px",fontWeight:"600"}},a),React.createElement("button",{onClick:r,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#718096",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s"},onMouseOver:function(e){return e.target.style.backgroundColor="#e2e8f0"},onMouseOut:function(e){return e.target.style.backgroundColor="transparent"}},"Ã—")),React.createElement("div",{style:{flex:1,padding:"0",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"}},n?React.createElement("iframe",{src:n,style:{width:"100%",height:"100%",border:"none",borderRadius:"0 0 8px 8px"},title:a}):React.createElement("div",{style:{textAlign:"center",color:"#718096",fontSize:"16px"}},"Chargement du PDF...")),React.createElement("div",{style:{padding:"16px 20px",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8f9fa",borderRadius:"0 0 8px 8px"}},React.createElement("div",{style:{fontSize:"14px",color:"#718096"}},"Utilisez Ctrl+P (Cmd+P sur Mac) pour imprimer"),React.createElement("div",null,React.createElement("button",{onClick:function(){if(n){var e=document.createElement("a");e.href=n,e.download="document.pdf",e.target="_blank",document.body.appendChild(e),e.click(),e.parentNode===document.body&&document.body.removeChild(e)}},style:{backgroundColor:"#4299e1",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginRight:"8px",transition:"background-color 0.2s"},onMouseOver:function(e){return e.target.style.backgroundColor="#3182ce"},onMouseOut:function(e){return e.target.style.backgroundColor="#4299e1"}},"ðŸ“¥ TÃ©lÃ©charger"),React.createElement("button",{onClick:r,style:{backgroundColor:"#e2e8f0",color:"#4a5568",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},"Fermer"))))):null};const Fe=function(e){var t=e.element,n=e.isSelected,o=e.onSelect,a=e.onUpdate,i=e.dragAndDrop,l=e.zoom,c=void 0===l?1:l,d=e.canvasWidth,s=e.canvasHeight,u=e.orderData,p=void 0===u?{}:u,m=e.onContextMenu,h=e.snapToGrid,b=void 0===h||h,g=e.gridSize,y=void 0===g?10:g,v=(0,r.useRef)(null),x=f({onElementResize:function(e){a({x:e.x,y:e.y,width:e.width,height:e.height})},snapToGrid:b,gridSize:y,canvasWidth:d,canvasHeight:s}),w={position:"absolute",left:t.x*c,top:t.y*c,width:t.width*c,height:t.height*c,cursor:n?"move":"pointer",userSelect:"none",border:n?"2px solid #007cba":t.borderWidth>0?"".concat(t.borderWidth||1,"px ").concat(t.borderStyle||"solid"," ").concat(t.borderColor||"transparent"):"none",backgroundColor:t.backgroundColor||"transparent",color:t.color||"#333333",fontSize:(t.fontSize||14)*c,fontFamily:t.fontFamily||"Arial, sans-serif",padding:(t.padding||8)*c,borderRadius:(t.borderRadius||4)*c,boxSizing:"border-box",overflow:"hidden","--element-border-width":n?"2px":t.borderWidth>0?"".concat(t.borderWidth||1,"px"):"0px"};return React.createElement(React.Fragment,null,React.createElement("div",{ref:v,style:w,onClick:function(e){e.stopPropagation(),n||o(t.id)},onMouseDown:function(e){e.stopPropagation();var r=v.current.closest(".canvas-zoom-wrapper");if(r){for(var n=r.getBoundingClientRect(),o=(v.current.getBoundingClientRect(),(e.clientX-n.left)/c),a=(e.clientY-n.top)/c,l=8/c,d=0,s=[{name:"nw",x:t.x,y:t.y},{name:"ne",x:t.x+t.width,y:t.y},{name:"sw",x:t.x,y:t.y+t.height},{name:"se",x:t.x+t.width,y:t.y+t.height},{name:"n",x:t.x+t.width/2,y:t.y},{name:"s",x:t.x+t.width/2,y:t.y+t.height},{name:"w",x:t.x,y:t.y+t.height/2},{name:"e",x:t.x+t.width,y:t.y+t.height/2}];d<s.length;d++){var u=s[d];if(o>=u.x-l/2&&o<=u.x+l/2&&a>=u.y-l/2&&a<=u.y+l/2)return void x.handleResizeStart(e,u.name,{x:t.x,y:t.y,width:t.width,height:t.height},n,c)}if(i&&i.handleMouseDown){var f=v.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();i.handleMouseDown(e,t.id,{left:t.x,top:t.y,width:t.width,height:t.height},f,c)}}},onContextMenu:m},React.createElement("div",{style:{fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.5px"}},{"woocommerce-invoice-number":"NumÃ©ro Facture","woocommerce-invoice-date":"Date Facture","woocommerce-order-number":"NÂ° Commande","woocommerce-order-date":"Date Commande","woocommerce-billing-address":"Adresse Facturation","woocommerce-shipping-address":"Adresse Livraison","woocommerce-customer-name":"Nom Client","woocommerce-customer-email":"Email Client","woocommerce-payment-method":"Paiement","woocommerce-order-status":"Statut","woocommerce-products-table":"Tableau Produits","woocommerce-products-simple":"Liste Produits","woocommerce-subtotal":"Sous-total","woocommerce-discount":"Remise","woocommerce-shipping":"Livraison","woocommerce-taxes":"Taxes","woocommerce-total":"Total","woocommerce-refund":"Remboursement","woocommerce-fees":"Frais","woocommerce-quote-number":"NÂ° Devis","woocommerce-quote-date":"Date Devis","woocommerce-quote-validity":"ValiditÃ©","woocommerce-quote-notes":"Notes Devis"}[t.type]||"Ã‰lÃ©ment WC"),React.createElement("div",{style:{whiteSpace:"pre-line",lineHeight:"1.4",color:"#666"}},function(e){switch(e){case"woocommerce-invoice-number":return p.invoice_number||"INV-001";case"woocommerce-invoice-date":return p.invoice_date||"15/10/2025";case"woocommerce-order-number":return p.order_number||"#12345";case"woocommerce-order-date":return p.order_date||"15/10/2025";case"woocommerce-customer-name":return p.customer_name||"John Doe";case"woocommerce-customer-email":return p.customer_email||"john.doe@example.com";case"woocommerce-billing-address":return p.billing_address||"123 Rue de Test\n75001 Paris\nFrance";case"woocommerce-shipping-address":return p.shipping_address||"456 Rue de Livraison\n75002 Paris\nFrance";case"woocommerce-payment-method":return p.payment_method||"Carte bancaire";case"woocommerce-order-status":return p.order_status||"TraitÃ©e";case"woocommerce-subtotal":return p.subtotal||"45,00 â‚¬";case"woocommerce-discount":return p.discount||"-5,00 â‚¬";case"woocommerce-shipping":return p.shipping||"5,00 â‚¬";case"woocommerce-taxes":return p.tax||"9,00 â‚¬";case"woocommerce-total":return p.total||"54,00 â‚¬";case"woocommerce-refund":return p.refund||"0,00 â‚¬";case"woocommerce-fees":return p.fees||"1,50 â‚¬";case"woocommerce-quote-number":return p.quote_number||"QUO-001";case"woocommerce-quote-date":return p.quote_date||"15/10/2025";case"woocommerce-quote-validity":return p.quote_validity||"30 jours";case"woocommerce-quote-notes":return p.quote_notes||"Conditions spÃ©ciales : paiement Ã  30 jours.";case"woocommerce-products-table":return p.products&&p.products.length>0?p.products.map(function(e){return"".concat(e.name," x").concat(e.quantity," - ").concat(e.total)}).join("\n"):"Produit Test 1 x1 - 25,00 â‚¬\nProduit Test 2 x2 - 20,00 â‚¬";case"woocommerce-products-simple":return p.products&&p.products.length>0?p.products.map(function(e){return"".concat(e.quantity,"x ").concat(e.name)}).join("\n"):"1x Produit Test 1\n2x Produit Test 2";default:return"[Contenu dynamique WooCommerce]"}}(t.type))),n&&React.createElement(React.Fragment,null,React.createElement("div",{className:"resize-handle nw",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"nw",{x:t.x,y:t.y,width:t.width,height:t.height})}}),React.createElement("div",{className:"resize-handle ne",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"ne",{x:t.x,y:t.y,width:t.width,height:t.height})}}),React.createElement("div",{className:"resize-handle sw",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"sw",{x:t.x,y:t.y,width:t.width,height:t.height})}}),React.createElement("div",{className:"resize-handle se",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"se",{x:t.x,y:t.y,width:t.width,height:t.height})}}),React.createElement("div",{className:"resize-handle n",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"n",{x:t.x,y:t.y,width:t.width,height:t.height})}}),React.createElement("div",{className:"resize-handle s",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"s",{x:t.x,y:t.y,width:t.width,height:t.height})}}),React.createElement("div",{className:"resize-handle w",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"w",{x:t.x,y:t.y,width:t.width,height:t.height})}}),React.createElement("div",{className:"resize-handle e",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"e",{x:t.x,y:t.y,width:t.width,height:t.height})}})))};function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Pe(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const Me=function(e){var t,n,o=e.onAddElement,a=(e.selectedTool,e.onToolSelect,t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return De(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?De(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1];return React.createElement(React.Fragment,null,i&&React.createElement("div",{className:"modal-overlay",onClick:function(){return l(!1)}},React.createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}},React.createElement("div",{className:"modal-header"},React.createElement("h3",null,"ðŸŽ¨ Choisir un modÃ¨le d'en-tÃªte"),React.createElement("button",{className:"modal-close",onClick:function(){return l(!1)}},"Ã—")),React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"templates-grid"},[{id:"classic",name:"Classique",preview:"ðŸ¢ ENTREPRISE\n123 Rue de la Paix\n75000 Paris",fontSize:14,fontWeight:"bold"},{id:"modern",name:"Moderne",preview:"âœ¨ ENTREPRISE MODERNE\nInnovation & QualitÃ©\ncontact@entreprise.com",fontSize:16,fontWeight:"bold"},{id:"minimal",name:"Minimal",preview:"ENTREPRISE\nAdresse â€¢ TÃ©lÃ©phone â€¢ Email",fontSize:12,fontWeight:"normal"},{id:"elegant",name:"Ã‰lÃ©gant",preview:"ðŸŽ© Maison Ã‰lÃ©gante\nParis, France\nwww.entreprise.com",fontSize:15,fontWeight:"bold"}].map(function(e){return React.createElement("div",{key:e.id,className:"template-item",onClick:function(){return function(e){l(!1),o("text",{x:50,y:50,width:300,height:60,text:e.preview.replace("\\n","\n"),fontSize:e.fontSize||16,fontWeight:e.fontWeight||"normal"})}(e)}},React.createElement("div",{className:"template-preview"},e.preview.split("\n").map(function(t,r){return React.createElement("div",{key:r,style:{fontSize:e.fontSize,fontWeight:e.fontWeight,marginBottom:"4px",whiteSpace:"pre-wrap"}},t)})),React.createElement("div",{className:"template-name"},e.name))}))))),React.createElement("div",{className:"element-library"},React.createElement("div",{className:"library-header"},React.createElement("h3",null,"ðŸ“š BibliothÃ¨que d'Ã‰lÃ©ments"),React.createElement("p",{className:"library-subtitle"},"Cliquez sur les blocs pour les ajouter au canvas")),React.createElement("div",{className:"library-content"},React.createElement("div",{className:"elements-list"},[{type:"product_table",fieldID:"products_table",label:"Tableau Produits",icon:"ðŸ“‹",description:"Tableau des produits commandÃ©s",defaultProperties:{showHeaders:!0,showBorders:!1,headers:["Produit","QtÃ©","Prix"],dataSource:"order_items",tableStyle:"default",columns:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0},showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1}},{type:"customer_info",fieldID:"customer_info",label:"Fiche Client",icon:"ðŸ‘¤",description:"Informations dÃ©taillÃ©es du client",defaultProperties:{showHeaders:!0,showBorders:!1,fields:["name","email","phone","address","company","vat","siret"],layout:"vertical",showLabels:!0,labelStyle:"bold",spacing:8}},{type:"company_logo",fieldID:"company_logo",label:"Logo Entreprise",icon:"ðŸ¢",description:"Logo et identitÃ© visuelle de l'entreprise",defaultProperties:{imageUrl:"",width:150,height:80,alignment:"left",fit:"contain",showBorder:!1,borderRadius:0}},{type:"company_info",fieldID:"company_info",label:"Informations Entreprise",icon:"[D]",description:"Nom, adresse, contact et TVA de l'entreprise",defaultProperties:{showHeaders:!1,showBorders:!1,fields:["name","address","phone","email","website","vat","rcs","siret"],layout:"vertical",showLabels:!1,labelStyle:"normal",spacing:4,fontSize:12,fontFamily:"Arial",fontWeight:"normal",textAlign:"left"}},{type:"order_number",fieldID:"order_number",label:"NumÃ©ro de Commande",icon:"ðŸ”¢",description:"RÃ©fÃ©rence de commande avec date",defaultProperties:{showHeaders:!1,showBorders:!1,format:"Commande #{order_number} - {order_date}",fontSize:14,fontFamily:"Arial",fontWeight:"bold",textAlign:"right",color:"#333333",showLabel:!0,labelText:"NÂ° de commande:"}},{type:"dynamic-text",fieldID:"dynamic_text",label:"Texte Dynamique",icon:"ï¿½",description:"Texte avec variables dynamiques",defaultProperties:{content:"{{order_total}} â‚¬",fontSize:14,fontFamily:"Arial",fontWeight:"normal",textAlign:"left",color:"#333333"}},{type:"order_totals",fieldID:"order_totals",label:"Totaux Commande",icon:"ðŸ’°",description:"Sous-total, TVA, frais de port, total",defaultProperties:{showSubtotal:!0,showShipping:!0,showTaxes:!0,showDiscount:!0,showTotal:!0,layout:"vertical",fontSize:12,fontFamily:"Arial",fontWeight:"normal",labelAlign:"left",valueAlign:"right",spacing:4}}].map(function(e,t){return React.createElement("button",{key:t,className:"element-button",onClick:function(){o(e.type,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach(function(t){Pe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:50+20*t,y:100+20*t,width:300,height:150},e.defaultProperties))},title:e.description},React.createElement("span",{className:"element-icon"},e.icon),React.createElement("div",{className:"element-info"},React.createElement("div",{className:"element-label"},e.label),React.createElement("div",{className:"element-description"},e.description)))})))))};function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach(function(t){Ge(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ge(e,t,r){return(t=Ue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ue(n.key),n)}}function Ue(e){var t=function(e){if("object"!=Ie(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ie(t)?t:t+""}var Ve=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.propertyValidators=new Map,this.propertyPresets=new Map,this.propertyGroups=new Map,this.initDefaults()},t=[{key:"initDefaults",value:function(){var e=this;this.propertyValidators.set("numeric",function(e){return parseFloat(e)||0}),this.propertyValidators.set("positiveNumeric",function(e){return Math.max(0,parseFloat(e)||0)}),this.propertyValidators.set("percentage",function(e){return Math.max(0,Math.min(100,parseFloat(e)||100))}),this.propertyValidators.set("angle",function(e){return((parseFloat(e)||0)%360+360)%360}),this.propertyValidators.set("color",function(t){return e.validateColor(t)}),this.propertyValidators.set("fontSize",function(e){return Math.max(8,Math.min(72,parseInt(e)||14))}),this.propertyValidators.set("borderWidth",function(e){return Math.max(0,Math.min(20,parseInt(e)||0))}),this.propertyValidators.set("borderStyle",function(e){return["solid","dashed","dotted","double"].includes(e)?e:"solid"}),this.propertyValidators.set("borderRadius",function(e){return Math.max(0,Math.min(100,parseInt(e)||0))}),this.propertyPresets.set("colors",{slate:["#f8fafc","#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#1e293b"],blue:["#eff6ff","#dbeafe","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af"],green:["#f0fdf4","#dcfce7","#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d","#166534"],red:["#fef2f2","#fee2e2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c","#991b1b"]}),this.propertyGroups.set("position",["x","y"]),this.propertyGroups.set("dimensions",["width","height"]),this.propertyGroups.set("typography",["fontFamily","fontSize","fontWeight","fontStyle","color","textAlign"]),this.propertyGroups.set("appearance",["backgroundColor","borderColor","borderWidth","borderRadius"]),this.propertyGroups.set("effects",["opacity","shadow","brightness","contrast","saturate"]),this.propertyGroups.set("transform",["rotation","scale"])}},{key:"validateColor",value:function(e){if(!e)return"#000000";if(/^#[0-9A-Fa-f]{6}$/.test(e)||/^#[0-9A-Fa-f]{3}$/.test(e))return e;var t=document.createElement("div");return t.style.color=e,t.style.color||"#000000"}},{key:"validateProperty",value:function(e,t){if("boolean"==typeof t)return t;if(e.startsWith("columns."))return t;var r=this.propertyValidators.get(e);if(r)try{return r(t)}catch(t){return this.getDefaultValue(e)}return this.isNumericProperty(e)?this.validateNumericProperty(e,t):this.isColorProperty(e)?this.validateColorProperty(t):this.isTextStyleProperty(e)?this.validateTextStyleProperty(e,t):t}},{key:"isNumericProperty",value:function(e){return["x","y","width","height","fontSize","opacity","lineHeight","letterSpacing","zIndex","borderWidth","borderRadius","rotation","padding"].includes(e)}},{key:"isColorProperty",value:function(e){return["color","backgroundColor","borderColor"].includes(e)}},{key:"isTextStyleProperty",value:function(e){return["fontWeight","textAlign","textDecoration","textTransform","borderStyle"].includes(e)}},{key:"validateNumericProperty",value:function(e,t){if(null==t||""===t)return this.getDefaultValue(e);var r;if("string"==typeof t){if(r=parseFloat(t),isNaN(r))return this.getDefaultValue(e)}else{if("number"!=typeof t)return this.getDefaultValue(e);r=t}var n={fontSize:{min:8,max:72},opacity:{min:0,max:1},lineHeight:{min:.5,max:3},letterSpacing:{min:-5,max:10},zIndex:{min:-100,max:1e3},borderWidth:{min:0,max:20},borderRadius:{min:0,max:100},rotation:{min:-180,max:180},padding:{min:0,max:100}};if(n[e]){var o=n[e],a=o.min,i=o.max;r=Math.max(a,Math.min(i,r))}return r}},{key:"validateColorProperty",value:function(e){if(!e)return"#000000";if("transparent"===e)return e;if(/^#[0-9A-Fa-f]{6}$/.test(e)||/^#[0-9A-Fa-f]{3}$/.test(e))return e;var t=document.createElement("div");t.style.color=e;var r=t.style.color;return r&&""!==r?e:"#000000"}},{key:"validateTextStyleProperty",value:function(e,t){var r={fontWeight:["normal","bold","100","200","300","400","500","600","700","800","900"],textAlign:["left","center","right","justify"],textDecoration:["none","underline","overline","line-through"],textTransform:["none","capitalize","uppercase","lowercase"],borderStyle:["solid","dashed","dotted","double","none"]};return r[e]&&r[e].includes(t)?t:{fontWeight:"normal",textAlign:"left",textDecoration:"none",textTransform:"none",borderStyle:"solid"}[e]||t}},{key:"getDefaultValue",value:function(e){return{x:0,y:0,width:100,height:50,fontSize:14,opacity:1,lineHeight:1.2,letterSpacing:0,zIndex:0,borderWidth:0,borderRadius:0,rotation:0,padding:0,color:"#333333",backgroundColor:"transparent",borderColor:"#dddddd",fontWeight:"normal",textAlign:"left",textDecoration:"none",textTransform:"none",borderStyle:"solid"}[e]||null}},{key:"getPresets",value:function(e){return this.propertyPresets.get(e)||{}}},{key:"getPropertiesInGroup",value:function(e){return this.propertyGroups.get(e)||[]}},{key:"applyPreset",value:function(e,t){return{"text-title":{fontSize:24,fontWeight:"bold",textAlign:"center",color:"#1e293b"},"text-subtitle":{fontSize:18,fontWeight:"bold",textAlign:"left",color:"#334155"},"text-body":{fontSize:14,fontWeight:"normal",textAlign:"left",color:"#475569"},"text-caption":{fontSize:12,fontWeight:"normal",textAlign:"left",color:"#64748b"},"shape-rounded":{borderRadius:8,borderWidth:1,borderColor:"transparent"},"shape-circle":{borderRadius:50,borderWidth:1,borderColor:"transparent"},"shape-square":{borderRadius:0,borderWidth:1,borderColor:"transparent"},"effect-shadow-soft":{shadow:!0,shadowColor:"#000000",shadowOffsetX:1,shadowOffsetY:1,opacity:90},"effect-shadow-strong":{shadow:!0,shadowColor:"#000000",shadowOffsetX:3,shadowOffsetY:3,opacity:85},"effect-glow":{shadow:!0,shadowColor:"#2563eb",shadowOffsetX:0,shadowOffsetY:0,opacity:95},"color-primary":{backgroundColor:"#2563eb",color:"#ffffff"},"color-secondary":{backgroundColor:"#64748b",color:"#ffffff"},"color-success":{backgroundColor:"#16a34a",color:"#ffffff"},"color-warning":{backgroundColor:"#ca8a04",color:"#ffffff"},"color-error":{backgroundColor:"#dc2626",color:"#ffffff"}}[e]||{}}},{key:"getDefaultProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text";return Le(Le({},{x:50,y:50,width:100,height:50,opacity:100,rotation:0,scale:100,visible:!0,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderStyle:"solid",borderRadius:0,color:"#1e293b",fontFamily:"Inter, sans-serif",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",text:"Texte",src:"",alt:"",objectFit:"cover",shadow:!1,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2,brightness:100,contrast:100,saturate:100,showHeaders:!0,showBorders:!0,headers:["Produit","QtÃ©","Prix"],dataSource:"order_items",columns:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0},showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1,progressColor:"#3b82f6",progressValue:75,lineColor:"#64748b",lineWidth:2,documentType:"invoice",imageUrl:"",spacing:8,layout:"vertical",alignment:"left",fit:"contain"}),{text:{width:150,height:30},image:{width:150,height:100},rectangle:{backgroundColor:"#f1f5f9",borderWidth:1,width:150,height:80},product_table:{width:300,height:150},customer_info:{width:200,height:100},company_logo:{width:100,height:60},order_number:{width:150,height:30},company_info:{width:200,height:80},document_type:{width:120,height:40},watermark:{width:300,height:200,opacity:10,text:"CONFIDENTIEL"},"progress-bar":{width:200,height:20},barcode:{width:150,height:60},qrcode:{width:80,height:80},icon:{width:50,height:50},line:{width:200,height:2}}[e]||{})}},{key:"getComputedProperties",value:function(e){return{absoluteX:e.x+e.width/2,absoluteY:e.y+e.height/2,scaledWidth:e.width*(e.scale/100),scaledHeight:e.height*(e.scale/100),cssTransform:"rotate(".concat(e.rotation,"deg) scale(").concat(e.scale/100,")"),cssFilter:"brightness(".concat(e.brightness,"%) contrast(").concat(e.contrast,"%) saturate(").concat(e.saturate,"%)"),cssBoxShadow:e.shadow?"".concat(e.shadowOffsetX||0,"px ").concat(e.shadowOffsetY||0,"px 4px ").concat(e.shadowColor||"#000000"):"none"}}},{key:"isAnimatable",value:function(e){return["x","y","width","height","rotation","scale","opacity","brightness","contrast","saturate"].includes(e)}},{key:"getPropertyConstraints",value:function(e){return{x:{min:-1e3,max:2e3,step:1},y:{min:-1e3,max:2e3,step:1},width:{min:1,max:2e3,step:1},height:{min:1,max:2e3,step:1},fontSize:{min:8,max:72,step:1},borderWidth:{min:0,max:20,step:1},borderRadius:{min:0,max:100,step:1},rotation:{min:-180,max:180,step:1},scale:{min:10,max:200,step:5},opacity:{min:0,max:100,step:1},brightness:{min:0,max:200,step:5},contrast:{min:0,max:200,step:5},saturate:{min:0,max:200,step:5},shadowOffsetX:{min:-50,max:50,step:1},shadowOffsetY:{min:-50,max:50,step:1}}[e]||{}}}],t&&qe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()),Ze={special:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},layout:{backgroundColor:{disabled:!1,default:"#f8fafc"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},text:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},shape:{backgroundColor:{disabled:!1,default:"#e5e7eb"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},media:{backgroundColor:{disabled:!1,default:"#f3f4f6"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},dynamic:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}}},Xe={product_table:"special",customer_info:"special",company_logo:"special",company_info:"special",order_number:"special",document_type:"special","progress-bar":"special","layout-header":"layout","layout-footer":"layout","layout-sidebar":"layout","layout-section":"layout","layout-container":"layout","layout-section-divider":"layout","layout-spacer":"layout","layout-two-column":"layout","layout-three-column":"layout",text:"text","dynamic-text":"text","conditional-text":"text",counter:"text","date-dynamic":"text",currency:"text",formula:"text",rectangle:"shape",line:"shape","shape-rectangle":"shape","shape-circle":"shape","shape-line":"shape","shape-arrow":"shape","shape-triangle":"shape","shape-star":"shape",divider:"shape",image:"media","image-upload":"media",logo:"media",barcode:"media",qrcode:"media","qrcode-dynamic":"media",icon:"media","table-dynamic":"dynamic","gradient-box":"dynamic","shadow-box":"dynamic","rounded-box":"dynamic","border-box":"dynamic","background-pattern":"dynamic",watermark:"dynamic","invoice-header":"layout","invoice-address-block":"layout","invoice-info-block":"layout","invoice-products-table":"special","invoice-totals-block":"layout","invoice-payment-terms":"layout","invoice-legal-footer":"layout","invoice-signature-block":"layout"},Ye=function(e,t){var r=Ze[Xe[e]||"text"];return!r||!r[t]||!r[t].disabled},Je=function(e,t,r){var n;if(!Ye(e,t))return{valid:!1,reason:(null===(n=Ze[Xe[e]||"text"][t])||void 0===n?void 0:n.reason)||"PropriÃ©tÃ© non autorisÃ©e"};switch(t){case"backgroundColor":if("string"!=typeof r)return{valid:!1,reason:"La couleur doit Ãªtre une chaÃ®ne"};break;case"borderWidth":if("number"!=typeof r||r<0)return{valid:!1,reason:"La largeur de bordure doit Ãªtre un nombre positif"};break;case"fontSize":if("number"!=typeof r||r<=0)return{valid:!1,reason:"La taille de police doit Ãªtre un nombre positif"};break;case"width":case"height":if("number"!=typeof r||r<=0)return{valid:!1,reason:"Les dimensions doivent Ãªtre positives"}}return{valid:!0}},Ke=function(e,t,r){var n={borderWidth:0,fontSize:14,width:100,height:50,padding:8};return void 0!==n[t]?n[t]:{backgroundColor:"transparent",borderColor:"transparent",color:"#000000",fontFamily:"Arial, sans-serif"}[t]||r};function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach(function(t){tt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tt(e,t,r){return(t=function(e){var t=function(e){if("object"!=Qe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ot(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return at(d,"_invoke",function(r,n,o){var a,l,c,d=0,s=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,n){for(l=r,c=n,t=0;!u&&d&&!o&&t<s.length;t++){var o,a=s[t],p=f.p,m=a[2];r>3?(o=m===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,n}return function(o,s,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,m),l=s,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(r,o,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(at(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,at(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,at(u,"constructor",d),at(d,"constructor",c),c.displayName="GeneratorFunction",at(d,o,"GeneratorFunction"),at(u),at(u,o,"Generator"),at(u,n,function(){return this}),at(u,"toString",function(){return"[object Generator]"}),(ot=function(){return{w:a,m:f}})()}function at(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}at=function(e,t,r,n){function a(t,r){at(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},at(e,t,r,n)}function it(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function lt(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){it(a,n,o,i,l,"next",e)}function l(e){it(a,n,o,i,l,"throw",e)}i(void 0)})}}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||st(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e){return function(e){if(Array.isArray(e))return ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||st(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){if(e){if("string"==typeof e)return ut(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(e,t):void 0}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ft={text:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["text","variables"],effects:["opacity","shadows","filters"]},"layout-header":{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["text","variables"],effects:["opacity","shadows","filters"]},"layout-footer":{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["text","variables"],effects:["opacity","shadows","filters"]},"layout-section":{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["text","variables"],effects:["opacity","shadows","filters"]},logo:{appearance:["colors","borders","effects"],layout:["position","dimensions","transform","layers"],content:["image"],effects:["opacity","shadows","filters"]},company_logo:{appearance:["colors","borders","effects"],layout:["position","dimensions","transform","layers"],content:["image"],effects:["opacity","shadows","filters"]},product_table:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["table"],effects:["opacity","shadows","filters"]},customer_info:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["customer_fields"],effects:["opacity","shadows","filters"]},company_info:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["company_fields"],effects:["opacity","shadows","filters"]},document_type:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["document_type"],effects:["opacity","shadows","filters"]},order_number:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["order_number"],effects:["opacity","shadows","filters"]},default:{appearance:["colors","borders","effects"],layout:["position","dimensions","transform","layers"],content:[],effects:["opacity","shadows","filters"]}},pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e)return t;var r=parseInt(e,10);return isNaN(r)?t:r},mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e)return t;var r=parseFloat(e);return isNaN(r)?t:r},ht=function(e){var t,r=e.label,n=e.value,o=e.onChange,a=e.presets,i=void 0===a?[]:a,l=e.defaultColor,c=void 0===l?"#ffffff":l,d=(t=n)&&"transparent"!==t?!t.startsWith("#")||4!==t.length&&7!==t.length?c:t:c;return React.createElement("div",{className:"property-row"},React.createElement("label",null,r,":"),React.createElement("div",{className:"color-picker-container"},React.createElement("input",{type:"color",value:d,onChange:function(e){var t=e.target.value;o(t)},className:"color-input",title:"Couleur actuelle: ".concat(n||"transparent")}),React.createElement("div",{className:"color-presets"},i.filter(function(e){return e&&"transparent"!==e&&e.startsWith("#")}).map(function(e,t){return React.createElement("button",{key:t,className:"color-preset ".concat(n===e?"active":""),style:{backgroundColor:e,border:n===e?"2px solid #2563eb":"1px solid #e2e8f0"},onClick:function(){return o(e)},title:"".concat(r,": ").concat(e),"aria-label":"SÃ©lectionner la couleur ".concat(e)})}),i.includes("transparent")&&React.createElement("button",{className:"color-preset transparent ".concat("transparent"===n?"active":""),style:{background:"transparent"===n?"repeating-conic-gradient(#f0f0f0 0% 25%, #ffffff 0% 50%) 50% / 10px 10px":"repeating-conic-gradient(#e2e8f0 0% 25%, #ffffff 0% 50%) 50% / 10px 10px",border:"transparent"===n?"2px solid #2563eb":"1px solid #e2e8f0"},onClick:function(){return o("transparent")},title:"".concat(r,": Transparent"),"aria-label":"Rendre transparent"}))))},bt=function(e){var t,r,n,o,a,i,l,c,d,s,u=e.elementId,f=e.properties,p=e.onPropertyChange;return React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸŽ¨ Police & Style"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Famille:"),React.createElement("select",{value:f.fontFamily||"Inter",onChange:function(e){return p(u,"fontFamily",e.target.value)}},React.createElement("option",{value:"Inter"},"Inter"),React.createElement("option",{value:"Arial"},"Arial"),React.createElement("option",{value:"Helvetica"},"Helvetica"),React.createElement("option",{value:"Times New Roman"},"Times New Roman"),React.createElement("option",{value:"Courier New"},"Courier New"),React.createElement("option",{value:"Georgia"},"Georgia"),React.createElement("option",{value:"Verdana"},"Verdana"),React.createElement("option",{value:"Roboto"},"Roboto"),React.createElement("option",{value:"Open Sans"},"Open Sans"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Taille:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"8",max:"72",value:null!==(t=f.fontSize)&&void 0!==t?t:14,onChange:function(e){return p(u,"fontSize",pt(e.target.value,14))},className:"slider"}),React.createElement("span",{className:"slider-value"},null!==(r=f.fontSize)&&void 0!==r?r:14,"px"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Interligne:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0.8",max:"3",step:"0.1",value:null!==(n=f.lineHeight)&&void 0!==n?n:1.2,onChange:function(e){return p(u,"lineHeight",mt(e.target.value,1.2))},className:"slider"}),React.createElement("span",{className:"slider-value"},null!==(o=f.lineHeight)&&void 0!==o?o:1.2))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Espacement lettres:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"-2",max:"10",step:"0.1",value:null!==(a=f.letterSpacing)&&void 0!==a?a:0,onChange:function(e){return p(u,"letterSpacing",mt(e.target.value,0))},className:"slider"}),React.createElement("span",{className:"slider-value"},null!==(i=f.letterSpacing)&&void 0!==i?i:0,"px"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"OpacitÃ© texte:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:null!==(l=f.opacity)&&void 0!==l?l:1,onChange:function(e){return p(u,"opacity",mt(e.target.value,1))},className:"slider"}),React.createElement("span",{className:"slider-value"},Math.round(100*(null!==(c=f.opacity)&&void 0!==c?c:1)),"%"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Ombre texte:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"5",step:"0.1",value:null!==(d=f.textShadowBlur)&&void 0!==d?d:0,onChange:function(e){return p(u,"textShadowBlur",mt(e.target.value,0))},className:"slider"}),React.createElement("span",{className:"slider-value"},null!==(s=f.textShadowBlur)&&void 0!==s?s:0,"px"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Style du texte:"),React.createElement("div",{className:"style-buttons-grid"},React.createElement("button",{className:"style-btn ".concat("bold"===f.fontWeight?"active":""),onClick:function(){return p(u,"fontWeight","bold"===f.fontWeight?"normal":"bold")},title:"Gras"},React.createElement("strong",null,"B")),React.createElement("button",{className:"style-btn ".concat("italic"===f.fontStyle?"active":""),onClick:function(){return p(u,"fontStyle","italic"===f.fontStyle?"normal":"italic")},title:"Italique"},React.createElement("em",null,"I")),React.createElement("button",{className:"style-btn ".concat((f.textDecoration||"").includes("underline")?"active":""),onClick:function(){var e=f.textDecoration?f.textDecoration.split(" "):[],t=e.includes("underline")?e.filter(function(e){return"underline"!==e}):[].concat(dt(e),["underline"]);p(u,"textDecoration",t.join(" ")||"none")},title:"SoulignÃ©"},React.createElement("u",null,"U")),React.createElement("button",{className:"style-btn ".concat((f.textDecoration||"").includes("line-through")?"active":""),onClick:function(){var e=f.textDecoration?f.textDecoration.split(" "):[],t=e.includes("line-through")?e.filter(function(e){return"line-through"!==e}):[].concat(dt(e),["line-through"]);p(u,"textDecoration",t.join(" ")||"none")},title:"BarrÃ©"},React.createElement("s",null,"S")))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Alignement:"),React.createElement("div",{className:"alignment-buttons"},[{value:"left",icon:"â¬…ï¸",label:"Gauche"},{value:"center",icon:"â¬Œ",label:"Centre"},{value:"right",icon:"âž¡ï¸",label:"Droite"},{value:"justify",icon:"â¬Œâ¬…ï¸",label:"JustifiÃ©"}].map(function(e){var t=e.value,r=e.icon,n=e.label;return React.createElement("button",{key:t,className:"align-btn ".concat(f.textAlign===t?"active":""),onClick:function(){return p(u,"textAlign",t)},title:n},r)}))))};const gt=(0,r.memo)(function(e){var t=e.selectedElements,n=e.elements,o=e.onPropertyChange,a=e.onBatchUpdate,i=ct((0,r.useState)("#ffffff"),2),l=i[0],c=i[1],d=ct((0,r.useState)(0),2),s=d[0],u=d[1],f=ct((0,r.useState)("#000000"),2),p=f[0],m=f[1],h=ct((0,r.useState)(!1),2),b=h[0],g=h[1],y=ct((0,r.useState)(!1),2),v=y[0],x=y[1],w=function(e,t,n){var o=rt((0,r.useState)({}),2),a=o[0],i=o[1],l=rt((0,r.useState)("appearance"),2),c=l[0],d=l[1],s=(0,r.useMemo)(function(){return e.length>0?t.find(function(t){return t.id===e[0]}):null},[e,t]);(0,r.useEffect)(function(){if(s){var e={color:"#333333",backgroundColor:"transparent",borderColor:"#dddddd",borderWidth:0,borderStyle:"solid",borderRadius:4,fontSize:14,fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",lineHeight:1.2,letterSpacing:0},t=s.type,r=et({},e);Object.keys(e).forEach(function(e){var n=function(e,t){var r=Ze[Xe[e]||"text"];return r&&r[t]&&void 0!==r[t].default?r[t].default:null}(t,e);null!==n&&(r[e]=n),"special"===Xe[t]&&"backgroundColor"===e&&(r[e]="transparent")});var n=et(et({},r),s);Object.keys(r).forEach(function(e){if(Ye(t,e))"special"!==Xe[t]||"backgroundColor"!==e||n[e]||(n[e]="transparent");else{var r=Ke(0,e,n[e]);r!==n[e]&&(n[e]=r)}}),Object.keys(n).forEach(function(e){Je(t,e,n[e]).valid||(n[e]=Ke(0,e,n[e]))}),i(n)}else i({})},[null==s?void 0:s.id]);var u=(0,r.useCallback)(function(e,r,o){var a=t.find(function(t){return t.id===e});if(a){var l=o;if(Je(a.type,r,o).valid){if("boolean"!=typeof o&&!r.startsWith("columns."))try{var c=Ve.validateProperty(r,o);void 0!==c&&(l=c)}catch(e){}i(function(e){var t;return r.includes(".")?function(e,t,r){var n=t.split("."),o=n.pop();n.reduce(function(e,t){return e[t]&&"object"===Qe(e[t])?e[t]=et({},e[t]):e[t]={},e[t]},e)[o]=r}(t=et({},e),r,l):t=et(et({},e),{},tt({},r,l)),t}),n(e,r,l)}}},[n,t]),f=(0,r.useCallback)(function(e,t){var r={"color-dark":{color:"#1e293b"},"color-light":{color:"#f8fafc"},"color-primary":{color:"#2563eb"},"color-success":{color:"#16a34a"},"color-warning":{color:"#ca8a04"},"color-error":{color:"#dc2626"},"text-title":{fontSize:24,fontWeight:"bold",textAlign:"center"},"text-subtitle":{fontSize:18,fontWeight:"bold",textAlign:"left"},"text-body":{fontSize:14,fontWeight:"normal",textAlign:"left"},"text-caption":{fontSize:12,fontWeight:"normal",textAlign:"left"},"shape-rounded":{borderRadius:8},"shape-circle":{borderRadius:50},"shape-square":{borderRadius:0},"effect-shadow":{shadow:!0,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2},"effect-glow":{shadow:!0,shadowColor:"#2563eb",shadowOffsetX:0,shadowOffsetY:0},"effect-none":{shadow:!1,brightness:100,contrast:100,saturate:100}};r[t]&&Object.entries(r[t]).forEach(function(t){var r=rt(t,2),n=r[0],o=r[1];u(e,n,o)})},[u]),p=(0,r.useCallback)(function(e){Object.entries({x:50,y:50,width:100,height:50,backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:1,borderStyle:"solid",borderRadius:4,color:"#333333",fontSize:14,fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",lineHeight:1.2,letterSpacing:0,opacity:100,rotation:0,scale:100,shadow:!1,brightness:100,contrast:100,saturate:100}).forEach(function(t){var r=rt(t,2),n=r[0],o=r[1];u(e,n,o)})},[u]);return{localProperties:a,activeTab:c,setActiveTab:d,selectedElement:s,handlePropertyChange:u,applyPropertyPreset:f,resetProperties:p,validatePropertyValue:function(e,t){switch(e){case"x":case"y":case"width":case"height":return Math.max(0,parseInt(t)||0);case"fontSize":return Math.max(8,Math.min(72,parseInt(t)||14));case"lineHeight":return Math.max(.5,Math.min(5,parseFloat(t)||1.2));case"letterSpacing":return Math.max(-5,Math.min(20,parseFloat(t)||0));case"borderWidth":return Math.max(0,Math.min(20,parseInt(t)||0));case"borderStyle":return["solid","dashed","dotted","double"].includes(t)?t:"solid";case"borderRadius":return Math.max(0,Math.min(100,parseInt(t)||0));case"rotation":return((parseInt(t)||0)%360+360)%360;case"scale":return Math.max(10,Math.min(200,parseInt(t)||100));case"opacity":return Math.max(0,Math.min(100,parseInt(t)||100));case"brightness":case"contrast":case"saturate":return Math.max(0,Math.min(200,parseInt(t)||100));case"shadowOffsetX":case"shadowOffsetY":return Math.max(-50,Math.min(50,parseInt(t)||0));default:return t}}}}(t,n,o),R=w.localProperties,E=w.activeTab,S=w.setActiveTab,C=w.handlePropertyChange,k=function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3e3,i=(0,r.useRef)(new Map),l=(0,r.useRef)(null),c=(0,r.useRef)(new Map),d=(0,r.useCallback)(function(e,t,r){l.current&&clearTimeout(l.current);var n="".concat(e,".").concat(t);i.current.set(n,{elementId:e,property:t,value:r}),o&&(l.current=setTimeout(function(){u()},a))},[o,a]),s=(0,r.useCallback)(function(e,r,n){l.current&&clearTimeout(l.current),t(e,r,n);var o="".concat(e,".").concat(r);c.current.set(o,n),i.current.delete(o)},[t]),u=(0,r.useCallback)(function(){if(0!==i.current.size){var e=Array.from(i.current.values()),r=e.reduce(function(e,t){return e[t.elementId]||(e[t.elementId]={}),e[t.elementId][t.property]=t.value,e},{});n&&Object.keys(r).length>1?n(r):e.forEach(function(e){var r=e.elementId,n=e.property,o=e.value;t(r,n,o)}),e.forEach(function(e){var t=e.elementId,r=e.property,n=e.value,o="".concat(t,".").concat(r);c.current.set(o,n)}),i.current.clear()}},[t,n]),f=(0,r.useCallback)(function(){u()},[u]),p=(0,r.useCallback)(function(){return i.current.size>0},[]),m=(0,r.useCallback)(function(e){var t=[];return i.current.forEach(function(r,n){r.elementId===e&&t.push(r)}),t},[]),h=(0,r.useCallback)(function(e){var t=[];i.current.forEach(function(r,n){r.elementId===e&&t.push(n)}),t.forEach(function(e){return i.current.delete(e)})},[]),b=(0,r.useCallback)(function(e,t){var r="".concat(e,".").concat(t),n=c.current.get(r);return void 0!==n?(i.current.delete(r),n):null},[]),g=(0,r.useCallback)(function(e,t,r,n){var o=r;return n&&(o=n(r)),o=y(t,o),d(e,t,o),o},[d]),y=function(e,t){switch(e){case"x":case"y":case"width":case"height":return Math.max(0,parseInt(t)||0);case"fontSize":return Math.max(8,Math.min(72,parseInt(t)||14));case"borderWidth":return Math.max(0,Math.min(20,parseInt(t)||0));case"borderRadius":return Math.max(0,Math.min(100,parseInt(t)||0));case"rotation":return((parseInt(t)||0)%360+360)%360;case"scale":return Math.max(10,Math.min(200,parseInt(t)||100));case"opacity":return Math.max(0,Math.min(100,parseInt(t)||100));case"brightness":case"contrast":case"saturate":return Math.max(0,Math.min(200,parseInt(t)||100));case"shadowOffsetX":case"shadowOffsetY":return Math.max(-50,Math.min(50,parseInt(t)||0));default:return t}};return(0,r.useEffect)(function(){return function(){l.current&&clearTimeout(l.current)}},[]),(0,r.useEffect)(function(){o&&i.current.size>0&&u()},[e,o,u]),{sync:d,syncImmediate:s,syncPending:u,forceSync:f,hasPendingChanges:p,getPendingChanges:m,cancelPendingChanges:h,validateAndSync:g,restoreLastSaved:b,pendingChangesCount:i.current.size}}(n,o,a,!0,3e3),z=k.syncImmediate,_=(k.syncBatch,(0,r.useMemo)(function(){return t.length>0?n.find(function(e){return e.id===t[0]}):null},[t,n]));(0,r.useEffect)(function(){if(_){c(_.backgroundColor||"#ffffff");var e=_.borderWidth&&_.borderWidth>0?_.borderWidth:1;u(e),m(_.borderColor||"#000000")}},[_]),(0,r.useEffect)(function(){var e=!!R.backgroundColor&&"transparent"!==R.backgroundColor;g(e)},[R.backgroundColor]),(0,r.useEffect)(function(){x(!!R.border&&(R.borderWidth||0)>0)},[R.border,R.borderWidth]);var T=(0,r.useCallback)(function(e,t,r){"color"===t&&"transparent"===r&&(r="#333333");var n=r;if("boolean"!=typeof r&&!t.startsWith("columns."))try{if(null==(n=Ve.validateProperty(t,r)))return void console.warn("PropriÃ©tÃ© invalide: ".concat(t," = ").concat(r))}catch(e){return void console.warn("Erreur de validation pour ".concat(t,":"),e)}C(e,t,n),["x","y","width","height"].includes(t)&&z(e,t,n)},[C,z]),B=((0,r.useCallback)(function(e,t){null==_||!_.type||Ye(_.type,"backgroundColor")?t?(null!=_&&_.backgroundColor&&"transparent"!==_.backgroundColor?c(_.backgroundColor):l||c("#ffffff"),T(e,"backgroundColor","transparent")):T(e,"backgroundColor",l||"#ffffff"):console.warn("Fond non contrÃ´lable pour ce type d'Ã©lÃ©ment")},[null==_?void 0:_.backgroundColor,l,T,null==_?void 0:_.type]),(0,r.useCallback)(function(e,t){if(t)null!=_&&_.borderWidth&&_.borderWidth>0?u(_.borderWidth):u(2),T(e,"borderWidth",0);else{var r=Math.max(s||2,2);T(e,"borderWidth",r)}},[null==_?void 0:_.borderWidth,s,T]),(0,r.useCallback)(function(){return React.createElement("div",{className:"properties-tabs"},React.createElement("button",{className:"tab-btn ".concat("appearance"===E?"active":""),onClick:function(){return S("appearance")}},"ðŸŽ¨ Apparence"),React.createElement("button",{className:"tab-btn ".concat("layout"===E?"active":""),onClick:function(){return S("layout")}},"ðŸ“ Mise en page"),React.createElement("button",{className:"tab-btn ".concat("content"===E?"active":""),onClick:function(){return S("content")}},"ðŸ“ Contenu"),React.createElement("button",{className:"tab-btn ".concat("effects"===E?"active":""),onClick:function(){return S("effects")}},"âœ¨ Effets"))},[E])),N=(0,r.useCallback)(function(){var e,r,n,o,a,i,l,c,d,f,h,g,y,w,S,C,k;if(!_)return React.createElement("div",{className:"no-selection"},React.createElement("div",{className:"no-selection-icon"},"ðŸ‘†"),React.createElement("p",null,"SÃ©lectionnez un Ã©lÃ©ment pour modifier ses propriÃ©tÃ©s"),t.length>1&&React.createElement("p",{className:"selection-info"},t.length," Ã©lÃ©ments sÃ©lectionnÃ©s"));var z=(ft[_.type]||ft.default)[E]||[];switch(E){case"appearance":return React.createElement("div",{className:"tab-content"},React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸŽ¨ Couleurs & Apparence"),React.createElement(ht,{label:"Texte",value:R.color,onChange:function(e){T(_.id,"color",e)},presets:["#1e293b","#334155","#475569","#64748b","#94a3b8","#cbd5e1","#000000"],defaultColor:"#333333"}),React.createElement("div",{className:"property-row"},React.createElement("span",null,"Fond activÃ©:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:b,disabled:!1,onChange:function(e){e.target.checked?T(_.id,"backgroundColor","#ffffff"):T(_.id,"backgroundColor","transparent")}}),React.createElement("span",{className:"toggle-slider"}))),React.createElement("div",{style:{display:b?"block":"none",transition:"opacity 0.3s ease"}},React.createElement(ht,{label:"Fond",value:"transparent"===R.backgroundColor?"#ffffff":R.backgroundColor,onChange:function(e){T(_.id,"backgroundColor",e)},presets:["transparent","#ffffff","#f8fafc","#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8"]}),React.createElement("div",{className:"property-row"},React.createElement("label",null,"OpacitÃ© fond:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:null!==(e=R.backgroundOpacity)&&void 0!==e?e:1,onChange:function(e){return T(_.id,"backgroundOpacity",mt(e.target.value,1))},className:"slider"}),React.createElement("span",{className:"slider-value"},Math.round(100*(null!==(r=R.backgroundOpacity)&&void 0!==r?r:1)),"%"))))),z.includes("font")&&"product_table"!==_.type&&React.createElement(bt,{elementId:_.id,properties:R,onPropertyChange:T}),z.includes("borders")&&R.borderWidth>=0&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ”² Bordures & Coins Arrondis"),React.createElement("div",{className:"property-row"},React.createElement("span",null,"Bordures activÃ©es:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:v,onChange:function(e){if(e.target.checked){var t=s||1,r=p||"#000000";T(_.id,"border",!0),T(_.id,"borderWidth",t),T(_.id,"borderColor",r),x(!0)}else u(R.borderWidth||1),m(R.borderColor||"#000000"),T(_.id,"border",!1),T(_.id,"borderWidth",0),x(!1)}}),React.createElement("span",{className:"toggle-slider"}))),React.createElement("div",{style:{display:R.borderWidth>0?"block":"none",transition:"opacity 0.3s ease"}},React.createElement(ht,{label:"Couleur bordure",value:R.borderColor||"#000000",onChange:function(e){return T(_.id,"borderColor",e)},presets:["#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#000000"]}),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Style bordure:"),React.createElement("select",{value:R.borderStyle||"solid",onChange:function(e){return T(_.id,"borderStyle",e.target.value)},className:"styled-select"},React.createElement("option",{value:"solid"},"Continue"),React.createElement("option",{value:"dashed"},"Tirets"),React.createElement("option",{value:"dotted"},"PointillÃ©s"),React.createElement("option",{value:"double"},"Double"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Ã‰paisseur bordure:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"10",value:null!==(n=R.borderWidth)&&void 0!==n?n:1,onChange:function(e){return T(_.id,"borderWidth",pt(e.target.value,1))},className:"slider"}),React.createElement("span",{className:"slider-value"},null!==(o=R.borderWidth)&&void 0!==o?o:1,"px"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Coins arrondis:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"50",value:null!==(a=R.borderRadius)&&void 0!==a?a:4,onChange:function(e){return T(_.id,"borderRadius",pt(e.target.value,0))},className:"slider"}),React.createElement("span",{className:"slider-value"},null!==(i=R.borderRadius)&&void 0!==i?i:4,"px"))))),z.includes("effects")&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"âœ¨ Effets"),React.createElement(ht,{label:"Ombre",value:R.boxShadowColor||"#000000",onChange:function(e){return T(_.id,"boxShadowColor",e)},presets:["#000000","#ffffff","#64748b","#ef4444","#3b82f6"]}),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Flou ombre:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"20",value:null!==(l=R.boxShadowBlur)&&void 0!==l?l:0,onChange:function(e){return T(_.id,"boxShadowBlur",pt(e.target.value,0))},className:"slider"}),React.createElement("span",{className:"slider-value"},null!==(c=R.boxShadowBlur)&&void 0!==c?c:0,"px"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"DÃ©calage ombre:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"10",value:null!==(d=R.boxShadowSpread)&&void 0!==d?d:0,onChange:function(e){return T(_.id,"boxShadowSpread",pt(e.target.value,0))},className:"slider"}),React.createElement("span",{className:"slider-value"},null!==(f=R.boxShadowSpread)&&void 0!==f?f:0,"px")))));case"layout":return React.createElement("div",{className:"tab-content"},z.includes("position")&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ“ Position PrÃ©cise"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"X:"),React.createElement("div",{className:"input-with-unit"},React.createElement("input",{type:"number",value:Math.round(R.x||0),onChange:function(e){return T(_.id,"x",pt(e.target.value,0))},step:"1"}),React.createElement("span",{className:"unit"},"mm"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Y:"),React.createElement("div",{className:"input-with-unit"},React.createElement("input",{type:"number",value:Math.round(R.y||0),onChange:function(e){return T(_.id,"y",pt(e.target.value,0))},step:"1"}),React.createElement("span",{className:"unit"},"mm")))),z.includes("dimensions")&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ“ Dimensions"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Largeur:"),React.createElement("div",{className:"input-with-unit"},React.createElement("input",{type:"number",value:Math.round(R.width||100),onChange:function(e){return T(_.id,"width",pt(e.target.value,100))},min:"1",step:"1"}),React.createElement("span",{className:"unit"},"mm"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Hauteur:"),React.createElement("div",{className:"input-with-unit"},React.createElement("input",{type:"number",value:Math.round(R.height||50),onChange:function(e){return T(_.id,"height",pt(e.target.value,50))},min:"1",step:"1"}),React.createElement("span",{className:"unit"},"mm"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Ratio:"),React.createElement("div",{className:"ratio-buttons"},React.createElement("button",{className:"ratio-btn",onClick:function(){var e=.75*(R.width||100);T(_.id,"height",Math.round(e))},title:"Format 4:3"},"4:3"),React.createElement("button",{className:"ratio-btn",onClick:function(){var e=(R.width||100)*(297/210);T(_.id,"height",Math.round(e))},title:"Format A4"},"A4"),React.createElement("button",{className:"ratio-btn",onClick:function(){var e=R.width||100;T(_.id,"height",Math.round(e))},title:"CarrÃ©"},"1:1")))),z.includes("transform")&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ”„ Transformation"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Rotation:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"-180",max:"180",value:R.rotation||0,onChange:function(e){return T(_.id,"rotation",pt(e.target.value,0))},onDoubleClick:function(){return T(_.id,"rotation",0)},className:"slider"}),React.createElement("span",{className:"slider-value"},R.rotation||0,"Â°"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Rotation rapide:"),React.createElement("div",{className:"rotation-buttons"},React.createElement("button",{className:"rotation-btn",onClick:function(){return T(_.id,"rotation",0)},title:"Rotation 0Â°"},"â†» 0Â°"),React.createElement("button",{className:"rotation-btn",onClick:function(){return T(_.id,"rotation",90)},title:"Rotation 90Â°"},"â†» 90Â°"),React.createElement("button",{className:"rotation-btn",onClick:function(){return T(_.id,"rotation",180)},title:"Rotation 180Â°"},"â†» 180Â°"),React.createElement("button",{className:"rotation-btn",onClick:function(){return T(_.id,"rotation",-90)},title:"Rotation -90Â°"},"â†º -90Â°")))),z.includes("layers")&&"product_table"!==_.type&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ“š Calques"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Profondeur (Z-index):"),React.createElement("input",{type:"number",value:R.zIndex||0,onChange:function(e){return T(_.id,"zIndex",pt(e.target.value,0))},min:"0",max:"100",step:"1"})),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Actions:"),React.createElement("div",{className:"layer-actions"},React.createElement("button",{className:"layer-btn",onClick:function(){return T(_.id,"zIndex",(R.zIndex||0)+1)},title:"Mettre devant"},"â¬†ï¸ Devant"),React.createElement("button",{className:"layer-btn",onClick:function(){return T(_.id,"zIndex",Math.max(0,(R.zIndex||0)-1))},title:"Mettre derriÃ¨re"},"â¬‡ï¸ DerriÃ¨re")))));case"content":return React.createElement("div",{className:"tab-content"},z.includes("text")&&"text"===_.type&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ“ Contenu texte"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Texte:"),React.createElement("textarea",{value:R.text||"",onChange:function(e){return T(_.id,"text",e.target.value)},rows:4,placeholder:"Saisissez votre texte ici..."})),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Variables dynamiques:"),React.createElement("div",{className:"variables-list"},React.createElement("button",{className:"variable-btn",onClick:function(){var e=R.text||"";T(_.id,"text",e+"{{date}}")}},"ðŸ“… Date"),React.createElement("button",{className:"variable-btn",onClick:function(){var e=R.text||"";T(_.id,"text",e+"{{order_number}}")}},"[Ord] NÂ° commande"),React.createElement("button",{className:"variable-btn",onClick:function(){var e=R.text||"";T(_.id,"text",e+"{{customer_name}}")}},"ðŸ‘¤ Client"),React.createElement("button",{className:"variable-btn",onClick:function(){var e=R.text||"";T(_.id,"text",e+"{{total}}")}},"ðŸ’° Total")))),z.includes("variables")&&("layout-header"===_.type||"layout-footer"===_.type||"layout-section"===_.type)&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ”„ Variables dynamiques"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Variables disponibles:"),React.createElement("div",{className:"variables-list"},React.createElement("button",{className:"variable-btn",onClick:function(){var e=R.text||"";T(_.id,"text",e+"{{date}}")}},"ðŸ“… Date"),React.createElement("button",{className:"variable-btn",onClick:function(){var e=R.text||"";T(_.id,"text",e+"{{order_number}}")}},"[Ord] NÂ° commande"),React.createElement("button",{className:"variable-btn",onClick:function(){var e=R.text||"";T(_.id,"text",e+"{{customer_name}}")}},"ðŸ‘¤ Client"),React.createElement("button",{className:"variable-btn",onClick:function(){var e=R.text||"";T(_.id,"text",e+"{{total}}")}},"ðŸ’° Total")))),z.includes("image")&&("logo"===_.type||"company_logo"===_.type)&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"[Img] Image"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"URL de l'image:"),React.createElement("input",{type:"url",value:R.imageUrl||"",onChange:function(e){return T(_.id,"imageUrl",e.target.value)},placeholder:"https://exemple.com/logo.jpg"})),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Alt text:"),React.createElement("input",{type:"text",value:R.alt||"",onChange:function(e){return T(_.id,"alt",e.target.value)},placeholder:"Logo de l'entreprise"})),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Adaptation:"),React.createElement("select",{value:R.fit||"contain",onChange:function(e){return T(_.id,"fit",e.target.value)}},React.createElement("option",{value:"contain"},"Contenir (intÃ©gral)"),React.createElement("option",{value:"cover"},"Couvrir (zoom)"),React.createElement("option",{value:"fill"},"Remplir"),React.createElement("option",{value:"none"},"Aucune")))),z.includes("table")&&"product_table"===_.type&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ“Š Tableau produits"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Colonnes Ã  afficher:"),React.createElement("div",{className:"checkbox-group"},[{key:"image",label:"Image"},{key:"name",label:"Nom"},{key:"sku",label:"SKU"},{key:"quantity",label:"QuantitÃ©"},{key:"price",label:"Prix"},{key:"total",label:"Total"}].map(function(e){var t,r,n=e.key,o=e.label;return React.createElement("label",{key:n,className:"checkbox-item"},React.createElement("input",{type:"checkbox",checked:null===(t=null===(r=R.columns)||void 0===r?void 0:r[n])||void 0===t||t,onChange:function(e){T(_.id,"columns.".concat(n),e.target.checked)}}),o)}))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Style du tableau:"),React.createElement("div",{className:"table-style-selector"},[{value:"default",label:"DÃ©faut",headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#f1f5f9",altRowBg:"#fafbfc",borderWidth:1,textColor:"#334155"},{value:"classic",label:"Classique",headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#334155",altRowBg:"#ffffff",borderWidth:1.5,textColor:"#ffffff"},{value:"striped",label:"AlternÃ©",headerBg:"#3b82f6",headerBorder:"#2563eb",rowBorder:"#e2e8f0",altRowBg:"#f8fafc",borderWidth:1,textColor:"#ffffff"},{value:"bordered",label:"EncadrÃ©",headerBg:"#ffffff",headerBorder:"#374151",rowBorder:"#d1d5db",altRowBg:"#ffffff",borderWidth:2,textColor:"#111827"},{value:"minimal",label:"Minimal",headerBg:"#ffffff",headerBorder:"#f3f4f6",rowBorder:"#f9fafb",altRowBg:"#ffffff",borderWidth:.5,textColor:"#6b7280"},{value:"modern",label:"Moderne",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",headerBorder:"#5b21b6",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1,textColor:"#ffffff"},{value:"blue_ocean",label:"OcÃ©an Bleu",gradient:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,textColor:"#ffffff"},{value:"emerald_forest",label:"ForÃªt Ã‰meraude",gradient:"linear-gradient(135deg, #064e3b 0%, #10b981 100%)",headerBorder:"#065f46",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,textColor:"#ffffff"},{value:"sunset_orange",label:"Coucher Orange",gradient:"linear-gradient(135deg, #9a3412 0%, #f97316 100%)",headerBorder:"#c2410c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,textColor:"#ffffff"},{value:"royal_purple",label:"Royal Violet",gradient:"linear-gradient(135deg, #581c87 0%, #a855f7 100%)",headerBorder:"#7c3aed",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,textColor:"#ffffff"},{value:"rose_pink",label:"Rose Bonbon",gradient:"linear-gradient(135deg, #be185d 0%, #f472b6 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,textColor:"#ffffff"},{value:"teal_aqua",label:"Aigue-marine",gradient:"linear-gradient(135deg, #0f766e 0%, #14b8a6 100%)",headerBorder:"#0d9488",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,textColor:"#ffffff"},{value:"crimson_red",label:"Rouge Cramoisi",gradient:"linear-gradient(135deg, #991b1b 0%, #ef4444 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,textColor:"#ffffff"},{value:"amber_gold",label:"Or AmbrÃ©",gradient:"linear-gradient(135deg, #92400e 0%, #f59e0b 100%)",headerBorder:"#d97706",rowBorder:"#fef3c7",altRowBg:"#fffbeb",borderWidth:1.5,textColor:"#ffffff"},{value:"indigo_night",label:"Nuit Indigo",gradient:"linear-gradient(135deg, #312e81 0%, #6366f1 100%)",headerBorder:"#4338ca",rowBorder:"#e0e7ff",altRowBg:"#eef2ff",borderWidth:1.5,textColor:"#ffffff"},{value:"slate_gray",label:"Ardoise",gradient:"linear-gradient(135deg, #374151 0%, #6b7280 100%)",headerBorder:"#4b5563",rowBorder:"#f3f4f6",altRowBg:"#f9fafb",borderWidth:1.5,textColor:"#ffffff"},{value:"coral_sunset",label:"Corail Couchant",gradient:"linear-gradient(135deg, #c2410c 0%, #fb7185 100%)",headerBorder:"#ea580c",rowBorder:"#fed7d7",altRowBg:"#fef7f7",borderWidth:1.5,textColor:"#ffffff"},{value:"mint_green",label:"Menthe FraÃ®che",gradient:"linear-gradient(135deg, #065f46 0%, #34d399 100%)",headerBorder:"#047857",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,textColor:"#ffffff"},{value:"violet_dream",label:"RÃªve Violet",gradient:"linear-gradient(135deg, #6d28d9 0%, #c084fc 100%)",headerBorder:"#8b5cf6",rowBorder:"#ede9fe",altRowBg:"#f5f3ff",borderWidth:1.5,textColor:"#ffffff"},{value:"sky_blue",label:"Ciel Bleu",gradient:"linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%)",headerBorder:"#0284c7",rowBorder:"#bae6fd",altRowBg:"#f0f9ff",borderWidth:1.5,textColor:"#ffffff"},{value:"forest_green",label:"Vert ForÃªt",gradient:"linear-gradient(135deg, #14532d 0%, #22c55e 100%)",headerBorder:"#15803d",rowBorder:"#bbf7d0",altRowBg:"#f0fdf4",borderWidth:1.5,textColor:"#ffffff"},{value:"ruby_red",label:"Rouge Rubis",gradient:"linear-gradient(135deg, #b91c1c 0%, #f87171 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,textColor:"#ffffff"},{value:"golden_yellow",label:"Jaune DorÃ©",gradient:"linear-gradient(135deg, #a16207 0%, #eab308 100%)",headerBorder:"#ca8a04",rowBorder:"#fef08a",altRowBg:"#fefce8",borderWidth:1.5,textColor:"#ffffff"},{value:"navy_blue",label:"Bleu Marine",gradient:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,textColor:"#ffffff"},{value:"burgundy_wine",label:"Vin Bordeaux",gradient:"linear-gradient(135deg, #7f1d1d 0%, #dc2626 100%)",headerBorder:"#991b1b",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,textColor:"#ffffff"},{value:"lavender_purple",label:"Lavande",gradient:"linear-gradient(135deg, #7c2d12 0%, #a855f7 100%)",headerBorder:"#9333ea",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,textColor:"#ffffff"},{value:"ocean_teal",label:"OcÃ©an Sarcelle",gradient:"linear-gradient(135deg, #134e4a 0%, #14b8a6 100%)",headerBorder:"#0f766e",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,textColor:"#ffffff"},{value:"cherry_blossom",label:"Cerisier",gradient:"linear-gradient(135deg, #be185d 0%, #fb7185 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,textColor:"#ffffff"},{value:"autumn_orange",label:"Automne",gradient:"linear-gradient(135deg, #9a3412 0%, #fb923c 100%)",headerBorder:"#ea580c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,textColor:"#ffffff"}].map(function(e){return React.createElement("button",{key:e.value,type:"button",className:"table-style-option ".concat(R.tableStyle===e.value?"active":""),onClick:function(){return T(_.id,"tableStyle",e.value)},title:"".concat(e.label," - Style ").concat(e.label.toLowerCase()," avec dÃ©gradÃ© moderne")},React.createElement("div",{className:"table-preview",style:{maxHeight:"60px",overflow:"hidden"}},React.createElement("div",{className:"table-header",style:{background:e.gradient||e.headerBg,border:"".concat(e.borderWidth,"px solid ").concat(e.headerBorder),borderBottom:"none",color:e.textColor}},React.createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.headerBorder)}},"Produit"),React.createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.headerBorder)}},"QtÃ©"),React.createElement("div",{className:"table-cell"},"Prix")),React.createElement("div",{className:"table-row",style:{backgroundColor:e.altRowBg,border:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder),borderTop:"none",color:e.textColor}},React.createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder)}},"Article 1"),React.createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder)}},"2"),React.createElement("div",{className:"table-cell"},"15.99â‚¬")),React.createElement("div",{className:"table-row",style:{backgroundColor:"white",border:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder),borderTop:"none",color:e.textColor}},React.createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder)}},"Article 2"),React.createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder)}},"1"),React.createElement("div",{className:"table-cell"},"8.50â‚¬"))),React.createElement("span",{className:"style-label"},e.label))}))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Lignes de totaux:"),React.createElement("div",{className:"checkbox-group"},[{key:"showSubtotal",label:"Sous-total"},{key:"showShipping",label:"Frais de port"},{key:"showTaxes",label:"Taxes"},{key:"showDiscount",label:"Remise"},{key:"showTotal",label:"Total gÃ©nÃ©ral"}].map(function(e){var t=e.key,r=e.label;return React.createElement("label",{key:t,className:"checkbox-item"},React.createElement("input",{type:"checkbox",checked:R[t]||!1,onChange:function(e){return T(_.id,t,e.target.checked)}}),r)}))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Afficher les bordures des cellules:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:null===(h=R.showBorders)||void 0===h||h,onChange:function(e){return T(_.id,"showBorders",e.target.checked)}}),React.createElement("span",{className:"toggle-slider"})))),z.includes("customer_fields")&&"customer_info"===_.type&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ‘¤ Informations client"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Champs Ã  afficher:"),React.createElement("div",{className:"checkbox-group"},[{key:"name",label:"Nom"},{key:"email",label:"Email"},{key:"phone",label:"TÃ©lÃ©phone"},{key:"address",label:"Adresse"},{key:"company",label:"SociÃ©tÃ©"},{key:"vat",label:"NÂ° TVA"},{key:"siret",label:"SIRET"}].map(function(e){var t,r,n=e.key,o=e.label;return React.createElement("label",{key:n,className:"checkbox-item"},React.createElement("input",{type:"checkbox",checked:null===(t=null===(r=R.fields)||void 0===r?void 0:r.includes(n))||void 0===t||t,onChange:function(e){var t=R.fields||["name","email","phone","address","company","vat","siret"],r=e.target.checked?[].concat(dt(t),[n]):t.filter(function(e){return e!==n});T(_.id,"fields",r)}}),o)}))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Disposition:"),React.createElement("select",{value:R.layout||"vertical",onChange:function(e){return T(_.id,"layout",e.target.value)}},React.createElement("option",{value:"vertical"},"Verticale"),React.createElement("option",{value:"horizontal"},"Horizontale"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Afficher les Ã©tiquettes:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:null===(g=R.showLabels)||void 0===g||g,onChange:function(e){return T(_.id,"showLabels",e.target.checked)}}),React.createElement("span",{className:"toggle-slider"}))),R.showLabels&&React.createElement("div",{className:"property-row"},React.createElement("label",null,"Style des Ã©tiquettes:"),React.createElement("select",{value:R.labelStyle||"normal",onChange:function(e){return T(_.id,"labelStyle",e.target.value)}},React.createElement("option",{value:"normal"},"Normal"),React.createElement("option",{value:"bold"},"Gras"),React.createElement("option",{value:"uppercase"},"Majuscules"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Espacement:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"20",value:R.spacing||8,onChange:function(e){return T(_.id,"spacing",pt(e.target.value,10))},className:"slider"}),React.createElement("span",{className:"slider-value"},R.spacing||8,"px")))),z.includes("company_fields")&&"company_info"===_.type&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ¢ Informations Entreprise"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Champs Ã  afficher:"),React.createElement("div",{className:"checkbox-group"},[{key:"name",label:"Nom"},{key:"address",label:"Adresse"},{key:"phone",label:"TÃ©lÃ©phone"},{key:"email",label:"Email"},{key:"website",label:"Site web"},{key:"vat",label:"NÂ° TVA"},{key:"rcs",label:"RCS"},{key:"siret",label:"SIRET"}].map(function(e){var t,r,n=e.key,o=e.label;return React.createElement("label",{key:n,className:"checkbox-item"},React.createElement("input",{type:"checkbox",checked:null===(t=null===(r=R.fields)||void 0===r?void 0:r.includes(n))||void 0===t||t,onChange:function(e){var t=R.fields||["name","address","phone","email","website","vat","rcs","siret"],r=e.target.checked?[].concat(dt(t),[n]):t.filter(function(e){return e!==n});T(_.id,"fields",r)}}),o)}))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Disposition:"),React.createElement("select",{value:R.layout||"vertical",onChange:function(e){return T(_.id,"layout",e.target.value)}},React.createElement("option",{value:"vertical"},"Verticale"),React.createElement("option",{value:"horizontal"},"Horizontale"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Afficher les Ã©tiquettes:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:null!==(y=R.showLabels)&&void 0!==y&&y,onChange:function(e){return T(_.id,"showLabels",e.target.checked)}}),React.createElement("span",{className:"toggle-slider"}))),R.showLabels&&React.createElement("div",{className:"property-row"},React.createElement("label",null,"Style des Ã©tiquettes:"),React.createElement("select",{value:R.labelStyle||"normal",onChange:function(e){return T(_.id,"labelStyle",e.target.value)}},React.createElement("option",{value:"normal"},"Normal"),React.createElement("option",{value:"bold"},"Gras"),React.createElement("option",{value:"uppercase"},"Majuscules"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Espacement:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"20",value:R.spacing||8,onChange:function(e){return T(_.id,"spacing",pt(e.target.value,10))},className:"slider"}),React.createElement("span",{className:"slider-value"},R.spacing||8,"px")))),z.includes("document_type")&&"document_type"===_.type&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ“‹ Type de Document"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Type de document:"),React.createElement("select",{value:R.documentType||"invoice",onChange:function(e){return T(_.id,"documentType",e.target.value)}},React.createElement("option",{value:"invoice"},"Facture"),React.createElement("option",{value:"quote"},"Devis"),React.createElement("option",{value:"receipt"},"ReÃ§u"),React.createElement("option",{value:"order"},"Commande"),React.createElement("option",{value:"credit_note"},"Avoir")))),z.includes("order_number")&&"order_number"===_.type&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ”¢ NumÃ©ro de Commande"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Format d'affichage:"),React.createElement("input",{type:"text",value:R.format||"Commande #{order_number} - {order_date}",onChange:function(e){return T(_.id,"format",e.target.value)},placeholder:"Commande #{order_number} - {order_date}"})),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Afficher l'Ã©tiquette:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:null===(w=R.showLabel)||void 0===w||w,onChange:function(e){return T(_.id,"showLabel",e.target.checked)}}),React.createElement("span",{className:"toggle-slider"}))),R.showLabel&&React.createElement("div",{className:"property-row"},React.createElement("label",null,"Texte de l'Ã©tiquette:"),React.createElement("input",{type:"text",value:R.labelText||"NÂ° de commande:",onChange:function(e){return T(_.id,"labelText",e.target.value)},placeholder:"NÂ° de commande:"}))),z.includes("font")&&React.createElement(bt,{elementId:_.id,properties:R,onPropertyChange:T}),z.includes("image")&&("logo"===_.type||"company_logo"===_.type)&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"[Img] Image"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"URL de l'image:"),React.createElement("div",{className:"input-with-button"},React.createElement("input",{type:"text",value:R.imageUrl||R.src||"",onChange:function(e){T(_.id,"imageUrl",e.target.value),T(_.id,"src",e.target.value)},placeholder:"https://exemple.com/image.png"}),React.createElement("button",{type:"button",className:"media-button",onClick:lt(ot().m(function e(){var t,r,n,o,a,i,l,c;return ot().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/wp-json/wp/v2/media?media_type=image&per_page=50&_embed");case 1:return t=e.v,e.n=2,t.json();case 2:r=e.v,(n=document.createElement("div")).style.cssText="\n                          position: fixed;\n                          top: 0;\n                          left: 0;\n                          width: 100%;\n                          height: 100%;\n                          background: rgba(0,0,0,0.8);\n                          z-index: 100;\n                          display: flex;\n                          align-items: center;\n                          justify-content: center;\n                        ",(o=document.createElement("div")).style.cssText="\n                          background: white;\n                          padding: 20px;\n                          border-radius: 8px;\n                          max-width: 600px;\n                          max-height: 80vh;\n                          overflow-y: auto;\n                          width: 90%;\n                        ",(a=document.createElement("h3")).textContent="SÃ©lectionner une image depuis la mÃ©diathÃ¨que",a.style.marginBottom="15px",(i=document.createElement("button")).textContent="âœ•",i.style.cssText="\n                          position: absolute;\n                          top: 10px;\n                          right: 10px;\n                          background: none;\n                          border: none;\n                          font-size: 20px;\n                          cursor: pointer;\n                        ",i.onclick=function(){n&&n.parentNode===document.body&&document.body.removeChild(n)},(l=document.createElement("div")).style.cssText="\n                          display: grid;\n                          grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n                          gap: 10px;\n                          margin-top: 15px;\n                        ",r.forEach(function(e){var t=document.createElement("div");t.style.cssText="\n                            border: 2px solid #ddd;\n                            border-radius: 4px;\n                            padding: 5px;\n                            cursor: pointer;\n                            transition: border-color 0.2s;\n                          ",t.onmouseover=function(){return t.style.borderColor="#007cba"},t.onmouseout=function(){return t.style.borderColor="#ddd"};var r=document.createElement("img");r.src=e.source_url,r.style.cssText="\n                            width: 100%;\n                            height: 80px;\n                            object-fit: cover;\n                            border-radius: 2px;\n                          ";var o=document.createElement("div");o.textContent=e.title.rendered.length>15?e.title.rendered.substring(0,15)+"...":e.title.rendered,o.style.cssText="\n                            font-size: 11px;\n                            text-align: center;\n                            margin-top: 5px;\n                            color: #666;\n                          ",t.onclick=function(){T(_.id,"imageUrl",e.source_url),T(_.id,"src",e.source_url),n&&n.parentNode===document.body&&document.body.removeChild(n)},t.appendChild(r),t.appendChild(o),l.appendChild(t)}),o.appendChild(a),o.appendChild(i),o.appendChild(l),n.appendChild(o),document.body.appendChild(n),e.n=4;break;case 3:e.p=3,c=e.v,console.error("Erreur lors de la rÃ©cupÃ©ration des mÃ©dias:",c),alert("Erreur lors de l'accÃ¨s Ã  la mÃ©diathÃ¨que WordPress");case 4:return e.a(2)}},e,null,[[0,3]])}))},"ðŸ“ MÃ©diathÃ¨que"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Texte alternatif:"),React.createElement("input",{type:"text",value:R.alt||"",onChange:function(e){return T(_.id,"alt",e.target.value)},placeholder:"Description de l'image"})),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Ajustement:"),React.createElement("select",{value:R.objectFit||R.fit||"cover",onChange:function(e){T(_.id,"objectFit",e.target.value),T(_.id,"fit",e.target.value)}},React.createElement("option",{value:"cover"},"Couvrir"),React.createElement("option",{value:"contain"},"Contenir"),React.createElement("option",{value:"fill"},"Remplir"),React.createElement("option",{value:"none"},"Aucun"),React.createElement("option",{value:"scale-down"},"RÃ©duire")))),"document_type"===_.type&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ“‹ Type de Document"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Type de document:"),React.createElement("select",{value:R.documentType||"invoice",onChange:function(e){return T(_.id,"documentType",e.target.value)}},React.createElement("option",{value:"invoice"},"Facture"),React.createElement("option",{value:"quote"},"Devis"),React.createElement("option",{value:"receipt"},"ReÃ§u"),React.createElement("option",{value:"order"},"Commande"),React.createElement("option",{value:"credit_note"},"Avoir"))),React.createElement(bt,{elementId:_.id,properties:R,onPropertyChange:T}),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Alignement du texte:"),React.createElement("select",{value:R.textAlign||"center",onChange:function(e){return T(_.id,"textAlign",e.target.value)}},React.createElement("option",{value:"left"},"Gauche"),React.createElement("option",{value:"center"},"Centre"),React.createElement("option",{value:"right"},"Droite"))),React.createElement(ht,{label:"Couleur du texte",value:R.color,onChange:function(e){return T(_.id,"color",e)},presets:["#1e293b","#334155","#475569","#64748b","#000000","#dc2626","#059669","#7c3aed"],defaultColor:"#333333"}),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Afficher la bordure:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:R.showBorder||!1,onChange:function(e){return T(_.id,"showBorder",e.target.checked)}}),React.createElement("span",{className:"toggle-slider"}))),React.createElement(ht,{label:"Couleur de fond",value:R.backgroundColor,onChange:function(e){return T(_.id,"backgroundColor",e)},presets:["transparent","#ffffff","#f8fafc","#fef3c7","#ecfdf5","#f0f9ff"]})),"product_table"!==_.type&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ï¿½ Contenu"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Texte/Contenu:"),React.createElement("input",{type:"text",value:R.content||"",onChange:function(e){return T(_.id,"content",e.target.value)},placeholder:"Texte Ã  afficher"})),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Format:"),React.createElement("input",{type:"text",value:R.format||"",onChange:function(e){return T(_.id,"format",e.target.value)},placeholder:"Format d'affichage (optionnel)"})),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Type de document:"),React.createElement("select",{value:R.documentType||"invoice",onChange:function(e){return T(_.id,"documentType",e.target.value)}},React.createElement("option",{value:"invoice"},"Facture"),React.createElement("option",{value:"quote"},"Devis"),React.createElement("option",{value:"receipt"},"ReÃ§u"),React.createElement("option",{value:"order"},"Commande"),React.createElement("option",{value:"credit_note"},"Avoir")))),"product_table"!==_.type&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸ“‹ Champs & Options"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Champs Ã  afficher:"),React.createElement("div",{className:"checkbox-group"},[{key:"name",label:"Nom"},{key:"address",label:"Adresse"},{key:"phone",label:"TÃ©lÃ©phone"},{key:"email",label:"Email"},{key:"website",label:"Site web"},{key:"vat",label:"NÂ° TVA"},{key:"image",label:"Image"},{key:"sku",label:"SKU"},{key:"quantity",label:"QuantitÃ©"},{key:"price",label:"Prix"},{key:"total",label:"Total"}].map(function(e){var t,r,n=e.key,o=e.label;return React.createElement("label",{key:n,className:"checkbox-item"},React.createElement("input",{type:"checkbox",checked:null!==(t=null===(r=R.fields)||void 0===r?void 0:r.includes(n))&&void 0!==t&&t,onChange:function(e){var t=R.fields||[],r=e.target.checked?[].concat(dt(t),[n]):t.filter(function(e){return e!==n});T(_.id,"fields",r)}}),o)}))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Afficher l'Ã©tiquette:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:null!==(S=R.showLabel)&&void 0!==S&&S,onChange:function(e){return T(_.id,"showLabel",e.target.checked)}}),React.createElement("span",{className:"toggle-slider"}))),R.showLabel&&React.createElement("div",{className:"property-row"},React.createElement("label",null,"Texte de l'Ã©tiquette:"),React.createElement("input",{type:"text",value:R.labelText||"",onChange:function(e){return T(_.id,"labelText",e.target.value)},placeholder:"Texte de l'Ã©tiquette"})),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Afficher les bordures:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:null===(C=R.showBorders)||void 0===C||C,onChange:function(e){return T(_.id,"showBorders",e.target.checked)}}),React.createElement("span",{className:"toggle-slider"}))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Afficher les en-tÃªtes:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:null!==(k=R.showHeaders)&&void 0!==k&&k,onChange:function(e){return T(_.id,"showHeaders",e.target.checked)}}),React.createElement("span",{className:"toggle-slider"})))));case"effects":return React.createElement("div",{className:"tab-content"},z.includes("opacity")&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸŒŸ Transparence & VisibilitÃ©"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"OpacitÃ©:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"100",value:R.opacity||100,onChange:function(e){return T(_.id,"opacity",pt(e.target.value,100))},className:"slider"}),React.createElement("span",{className:"slider-value"},R.opacity||100,"%"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"VisibilitÃ©:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:!1!==R.visible,onChange:function(e){return T(_.id,"visible",e.target.checked)}}),React.createElement("span",{className:"toggle-slider"})))),z.includes("shadows")&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"âœ¨ Ombres & Effets"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Ombre:"),React.createElement("label",{className:"toggle"},React.createElement("input",{type:"checkbox",checked:R.shadow||!1,onChange:function(e){return T(_.id,"shadow",e.target.checked)}}),React.createElement("span",{className:"toggle-slider"}))),R.shadow&&React.createElement(React.Fragment,null,React.createElement(ht,{label:"Couleur ombre",value:R.shadowColor,onChange:function(e){return T(_.id,"shadowColor",e)},presets:["#000000","#374151","#6b7280","#9ca3af"]}),React.createElement("div",{className:"property-row"},React.createElement("label",null,"DÃ©calage X:"),React.createElement("input",{type:"number",value:R.shadowOffsetX||2,onChange:function(e){return T(_.id,"shadowOffsetX",pt(e.target.value,0))},min:"-20",max:"20"})),React.createElement("div",{className:"property-row"},React.createElement("label",null,"DÃ©calage Y:"),React.createElement("input",{type:"number",value:R.shadowOffsetY||2,onChange:function(e){return T(_.id,"shadowOffsetY",pt(e.target.value,0))},min:"-20",max:"20"})))),z.includes("filters")&&React.createElement("div",{className:"properties-group"},React.createElement("h4",null,"ðŸŽ­ Filtres visuels"),React.createElement("div",{className:"property-row"},React.createElement("label",null,"LuminositÃ©:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"200",value:R.brightness||100,onChange:function(e){return T(_.id,"brightness",pt(e.target.value,100))},className:"slider"}),React.createElement("span",{className:"slider-value"},R.brightness||100,"%"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Contraste:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"200",value:R.contrast||100,onChange:function(e){return T(_.id,"contrast",parseInt(e.target.value))},className:"slider"}),React.createElement("span",{className:"slider-value"},R.contrast||100,"%"))),React.createElement("div",{className:"property-row"},React.createElement("label",null,"Saturation:"),React.createElement("div",{className:"slider-container"},React.createElement("input",{type:"range",min:"0",max:"200",value:R.saturate||100,onChange:function(e){return T(_.id,"saturate",parseInt(e.target.value))},className:"slider"}),React.createElement("span",{className:"slider-value"},R.saturate||100,"%")))));default:return null}},[E,_,R,T,t.length]);return React.createElement("div",{className:"properties-panel"},React.createElement("div",{className:"properties-header"},React.createElement("h3",null,"PropriÃ©tÃ©s"),_&&React.createElement("div",{className:"element-info"},React.createElement("span",{className:"element-type"},_.type),React.createElement("span",{className:"element-id"},"#",_.id))),B(),React.createElement("div",{className:"properties-content"},N()))});function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function vt(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return xt(d,"_invoke",function(r,n,o){var a,l,c,d=0,s=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,n){for(l=r,c=n,t=0;!u&&d&&!o&&t<s.length;t++){var o,a=s[t],p=f.p,m=a[2];r>3?(o=m===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,n}return function(o,s,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,m),l=s,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(r,o,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(xt(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,xt(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,xt(u,"constructor",d),xt(d,"constructor",c),c.displayName="GeneratorFunction",xt(d,o,"GeneratorFunction"),xt(u),xt(u,o,"Generator"),xt(u,n,function(){return this}),xt(u,"toString",function(){return"[object Generator]"}),(vt=function(){return{w:a,m:f}})()}function xt(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}xt=function(e,t,r,n){function a(t,r){xt(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},xt(e,t,r,n)}function wt(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Rt(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){wt(a,n,o,i,l,"next",e)}function l(e){wt(a,n,o,i,l,"throw",e)}i(void 0)})}}function Et(e){return function(e){if(Array.isArray(e))return Tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach(function(t){kt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kt(e,t,r){return(t=function(e){var t=function(e){if("object"!=yt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||_t(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){if(e){if("string"==typeof e)return Tt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tt(e,t):void 0}}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Bt=function(e){var t,o,a=e.options,i=zt((0,r.useState)("select"),2),l=i[0],c=i[1],d=zt((0,r.useState)(!1),2),s=d[0],u=d[1],f=zt((0,r.useState)(!1),2),p=f[0],m=f[1],h=zt((0,r.useState)(null),2),b=h[0],g=h[1],y=zt((0,r.useState)(!1),2),v=y[0],w=y[1],R=zt((0,r.useState)({x:0,y:0}),2),E=R[0],k=R[1],z=zt((0,r.useState)(!1),2),_=z[0],T=z[1],B=zt((0,r.useState)({x:0,y:0}),2),N=B[0],W=B[1],O=zt((0,r.useState)({horizontal:[],vertical:[]}),2),F=O[0],A=O[1],j=zt((0,r.useState)(!1),2),P=(j[0],j[1],zt((0,r.useState)(null),2)),D=(P[0],P[1],ge()),M=(0,r.useCallback)(function(e){D.settings.lockGuides||A(function(t){return Ct(Ct({},t),{},{horizontal:[].concat(Et(t.horizontal),[e]).sort(function(e,t){return e-t})})})},[D.settings.lockGuides]),I=(0,r.useCallback)(function(e){D.settings.lockGuides||A(function(t){return Ct(Ct({},t),{},{vertical:[].concat(Et(t.vertical),[e]).sort(function(e,t){return e-t})})})},[D.settings.lockGuides]),H=(0,r.useCallback)(function(e,t){D.settings.lockGuides||A(function(r){return Ct(Ct({},r),{},kt({},e,r[e].filter(function(e){return e!==t})))})},[D.settings.lockGuides]),L=a.orderData||{invoice_number:"INV-001",invoice_date:"15/10/2025",order_number:"#12345",order_date:"15/10/2025",customer_name:"John Doe",customer_email:"john.doe@example.com",billing_address:"123 Rue de Test\n75001 Paris\nFrance",shipping_address:"456 Rue de Livraison\n75002 Paris\nFrance",payment_method:"Carte bancaire",order_status:"TraitÃ©e",subtotal:"45,00 â‚¬",discount:"-5,00 â‚¬",shipping:"5,00 â‚¬",tax:"9,00 â‚¬",total:"54,00 â‚¬",refund:"0,00 â‚¬",fees:"1,50 â‚¬",quote_number:"QUO-001",quote_date:"15/10/2025",quote_validity:"30 jours",quote_notes:"Conditions spÃ©ciales : paiement Ã  30 jours.",products:[{name:"Produit Test 1",quantity:1,price:"25,00 â‚¬",total:"25,00 â‚¬"},{name:"Produit Test 2",quantity:2,price:"10,00 â‚¬",total:"20,00 â‚¬"}]},G=le({initialElements:a.initialElements||[],templateId:a.templateId||null,canvasWidth:a.width||595,canvasHeight:a.height||842,globalSettings:D.settings}),q=(0,r.useCallback)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Modifier Ã©lÃ©ment",n=G.getAllElements();G.history.addToHistory(n,r),G.updateElement(e,t)},[G]),U=(0,r.useCallback)(function(){var e=G.history.undo();e&&G.setElements(e)},[G]),V=(0,r.useCallback)(function(){var e=G.history.redo();e&&G.setElements(e)},[G]),Z=(0,r.useCallback)(function(e){D.updateSettings({showGrid:e})},[D]),X=(0,r.useCallback)(function(e){D.updateSettings({snapToGrid:e})},[D]),Y=(0,r.useRef)(null),J=(0,r.useRef)(null),K=(0,r.useRef)(null),Q=S({onElementMove:function(e,t){q(e,t,"DÃ©placer Ã©lÃ©ment")},onElementDrop:function(e,t){q(e,t,"DÃ©poser Ã©lÃ©ment")},snapToGrid:D.settings.snapToGrid,gridSize:D.settings.gridSize,zoom:G.zoom.zoom,canvasWidth:G.canvasWidth,canvasHeight:G.canvasHeight,guides:F,snapToGuides:D.settings.snapToElements});ce({onDelete:G.deleteSelectedElements,onCopy:G.copySelectedElements,onPaste:G.pasteElements,onUndo:U,onRedo:V,onSave:G.saveTemplate,onZoomIn:G.zoom.zoomIn,onZoomOut:G.zoom.zoomOut});var $=(0,r.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};G.addElement(e,t),c("select")},[G]),ee=(0,r.useCallback)(function(e,t){var r=(null==t?void 0:t.ctrlKey)||(null==t?void 0:t.metaKey);G.selection.selectElement(e,r)},[G.selection]),te=((0,r.useCallback)(Rt(vt().m(function e(){var t,r,n,o,a,i,l,c,d,s;return vt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,0!==(n=G.getAllElements()).length){e.n=1;break}return alert("Aucun Ã©lÃ©ment Ã  imprimer. Ajoutez des Ã©lÃ©ments au canvas d'abord."),e.a(2);case 1:e.p=1,o=JSON.stringify(n),e.n=3;break;case 2:return e.p=2,d=e.v,console.error("âŒ Erreur lors de JSON.stringify:",d),console.error("Ã‰lÃ©ments problÃ©matiques:",n),alert("Erreur de sÃ©rialisation des Ã©lÃ©ments. VÃ©rifiez la console pour plus de dÃ©tails."),e.a(2);case 3:return(a=new FormData).append("action","pdf_builder_generate_pdf"),a.append("nonce",null===(t=window.pdfBuilderAjax)||void 0===t?void 0:t.nonce),a.append("elements",o),e.n=4,fetch(null===(r=window.pdfBuilderAjax)||void 0===r?void 0:r.ajaxurl,{method:"POST",body:a});case 4:if((i=e.v).ok){e.n=5;break}throw new Error("Erreur HTTP: ".concat(i.status));case 5:return e.n=6,i.json();case 6:if(!(l=e.v).success){e.n=7;break}g(pdfDataUrl),m(!0),e.n=8;break;case 7:throw console.error("Erreur serveur:",l.data),new Error((null===(c=l.data)||void 0===c?void 0:c.message)||"Erreur lors de la gÃ©nÃ©ration du PDF");case 8:e.n=10;break;case 9:e.p=9,s=e.v,console.error("Erreur lors de l'impression:",s),alert("Erreur lors de la gÃ©nÃ©ration du PDF: "+s.message);case 10:return e.a(2)}},e,null,[[1,2],[0,9]])})),[G]),(0,r.useCallback)(function(e){if(e.ctrlKey&&D.settings.showGuides&&!D.settings.lockGuides){var t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top,o=(r-E.x)/G.zoom.zoom,a=(n-E.y)/G.zoom.zoom,i=G.canvasWidth/2,d=G.canvasHeight/2;Math.abs(o-i)<Math.abs(a-d)?M(Math.round(a)):I(Math.round(o))}else if(!e.target.closest("[data-element-id]")){if(l.startsWith("add-")){var s=e.currentTarget.getBoundingClientRect(),u=e.clientX-s.left,f=e.clientY-s.top,p=u/G.zoom.zoom,m=f/G.zoom.zoom,h="text",b={};switch(l){case"add-text":h="text";break;case"add-text-title":h="text",b={fontSize:24,fontWeight:"bold"};break;case"add-text-subtitle":h="text",b={fontSize:18,fontWeight:"bold"};break;case"add-rectangle":h="rectangle";break;case"add-circle":h="shape-circle";break;case"add-line":h="line";break;case"add-arrow":h="shape-arrow";break;case"add-triangle":h="shape-triangle";break;case"add-star":h="shape-star";break;case"add-divider":h="divider";break;case"add-image":h="image";break;default:l.startsWith("add-")&&(h=l.replace("add-",""))}return G.addElement(h,Ct({x:Math.max(0,p-50),y:Math.max(0,m-25)},b)),void c("select")}G.selection.clearSelection()}},[G,l])),re=(0,r.useCallback)(function(e,t,r){var n=G.getElementById(e);if(n){var o={};if(t.includes(".")){var a=function(e,t,r){for(var n=t.split("."),o=n.pop(),a=Ct({},e),i=a,l=0;l<n.length-1;l++){var c=n[l];i[c]&&"object"===yt(i[c])?i[c]=Ct({},i[c]):i[c]={},i=i[c]}var d=n[n.length-1];return d?(i[d]&&"object"===yt(i[d])?i[d]=Ct({},i[d]):i[d]={},i[d][o]=r):i[o]=r,a}(n,t,r);Object.assign(o,a)}else o[t]=r;q(e,o,"Modifier ".concat(t))}},[G,q]),ne=(0,r.useCallback)(function(e){e.forEach(function(e){var t=e.elementId,r=e.property,n=e.value;G.updateElement(t,kt({},r,n))})},[G]),oe=(0,r.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.preventDefault();var r=[];t?G.getElementById(t)&&r.push({label:"Copier",action:function(){return G.copySelectedElements()}},{label:"Dupliquer",action:function(){return G.duplicateElement(t)}},{type:"separator"},{label:"Supprimer",action:function(){return G.deleteElement(t)}}):(G.selection.selectedElements.length>0&&r.push({label:"Copier",action:function(){return G.copySelectedElements()}},{label:"Dupliquer",action:function(){return G.duplicateSelectedElements()}},{type:"separator"},{label:"Supprimer",action:function(){return G.deleteSelectedElements()}}),r.push({type:"separator"},{label:"Coller",action:function(){return G.pasteElements()}},{type:"separator"},{label:"Tout sÃ©lectionner",action:function(){return G.selectAll()}},{label:"DÃ©sÃ©lectionner",action:function(){return G.selection.clearSelection()}})),G.showContextMenu(e.clientX,e.clientY,r)},[G]),ae=(0,r.useCallback)(function(e){"function"==typeof e&&e()},[]),ie=(0,r.useCallback)(function(){if(_)return"grabbing";switch(l){case"select":default:return"default";case"add-text":case"add-text-title":case"add-text-subtitle":return"text";case"add-rectangle":case"add-circle":case"add-line":case"add-arrow":case"add-triangle":case"add-star":case"add-divider":case"add-image":return"crosshair"}},[l,_]),de=(0,r.useCallback)(function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},[]),se=(0,r.useCallback)(function(e){e.preventDefault();try{var t=e.dataTransfer.getData("application/json");if(!t||""===t.trim())return;var r=JSON.parse(t);if("new-element"===r.type){var n=e.currentTarget.getBoundingClientRect(),o=e.clientX-n.left,a=e.clientY-n.top,i=o/G.zoom.zoom,l=a/G.zoom.zoom;G.addElement(r.elementType,Ct({x:Math.max(0,i-50),y:Math.max(0,l-25)},r.defaultProps))}}catch(t){t instanceof SyntaxError&&e.dataTransfer.getData("application/json")&&console.error("Erreur lors du parsing des donnÃ©es de drop:",t)}},[G]),ue=(0,r.useCallback)(function(e){if(D.settings.zoomWithWheel){e.preventDefault();var t=1+D.settings.zoomStep/100,r=e.deltaY>0?-1:1,n=K.current;if(n){var o=n.getBoundingClientRect(),a=e.clientX-o.left,i=e.clientY-o.top,l=r>0?t:1/t;G.zoom.zoomToPoint(a,i,l)}}},[D.settings.zoomWithWheel,D.settings.zoomStep,G.zoom]);(0,r.useEffect)(function(){var e=K.current;if(e&&D.settings.zoomWithWheel){var t=function(e){ue(e)};return e.addEventListener("wheel",t,{passive:!1}),function(){e.removeEventListener("wheel",t)}}},[ue,D.settings.zoomWithWheel]);var fe=(0,r.useCallback)(function(e){D.settings.panWithMouse&&(1===e.button||0===e.button&&e.altKey)&&(e.preventDefault(),T(!0),W({x:e.clientX,y:e.clientY}))},[D.settings.panWithMouse]),pe=(0,r.useCallback)(function(e){if(_){var t=e.clientX-N.x,r=e.clientY-N.y;k(function(e){return{x:e.x+t,y:e.y+r}}),W({x:e.clientX,y:e.clientY})}},[_,N]),me=(0,r.useCallback)(function(){T(!1)},[]),he=(0,r.useCallback)(function(e){D.settings.zoomToSelection&&(e.target.closest("[data-element-id]")||G.selection.selectedElements.length>0&&G.zoomToSelection())},[D.settings.zoomToSelection,G]);return n().createElement("div",{className:"pdf-canvas-editor",ref:Y},n().createElement("header",{className:"editor-header"},n().createElement("h2",null,"Ã‰diteur PDF - ",a.isNew?"Nouveau Template":a.templateName),n().createElement("nav",{className:"editor-actions"},n().createElement("button",{className:"btn btn-secondary",onClick:function(){return u(!0)}},"ðŸ‘ï¸ AperÃ§u"),n().createElement("button",{className:"btn btn-primary",onClick:function(){return G.saveTemplate()},disabled:G.isSaving},G.isSaving?"â³ Sauvegarde...":a.isNew?"ðŸ’¾ Sauvegarder":"âœï¸ Modifier"))),n().createElement(C,{selectedTool:l,onToolSelect:c,zoom:G.zoom.zoom,onZoomChange:G.zoom.setZoomLevel,showGrid:D.settings.showGrid,onShowGridChange:Z,snapToGrid:D.settings.snapToGrid,onSnapToGridChange:X,onUndo:U,onRedo:V,canUndo:G.history.canUndo(),canRedo:G.history.canRedo()}),n().createElement("main",{className:"editor-workspace"},!s&&n().createElement("aside",{className:"editor-sidebar left-sidebar"},n().createElement(Me,{onAddElement:$,selectedTool:l,onToolSelect:c})),n().createElement("section",{className:"canvas-section",ref:K,onContextMenu:oe,onDragOver:de,onDrop:se,onMouseDown:fe,onMouseMove:pe,onMouseUp:me,onMouseLeave:me,onDoubleClick:he,style:{cursor:ie(),backgroundColor:D.settings.containerShowTransparency?"transparent":D.settings.containerBackgroundColor||"#f8f9fa",backgroundImage:D.settings.containerShowTransparency?"linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%)":"none",backgroundSize:D.settings.containerShowTransparency?"20px 20px":"auto",backgroundPosition:D.settings.containerShowTransparency?"0 0, 0 10px, 10px -10px, -10px 0px":"0 0"}},n().createElement("div",{className:"canvas-zoom-wrapper",style:{transform:"translate(".concat(E.x,"px, ").concat(E.y,"px) scale(").concat(G.zoom.zoom,")"),transformOrigin:"center",cursor:_?"grabbing":"default",transition:D.settings.smoothZoom?"transform 0.2s ease-out":"none",willChange:D.settings.enableHardwareAcceleration?"transform":"auto"}},n().createElement("div",{className:"canvas",ref:J,onClick:te,style:{width:G.canvasWidth,height:"auto",minHeight:G.canvasHeight,position:"relative",backgroundColor:D.settings.canvasShowTransparency?"transparent":D.settings.canvasBackgroundColor||"#ffffff",backgroundImage:D.settings.canvasShowTransparency?"linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%)":"none",backgroundSize:D.settings.canvasShowTransparency?"20px 20px":"auto",backgroundPosition:D.settings.canvasShowTransparency?"0 0, 0 10px, 10px -10px, -10px 0px":"0 0"}},D.settings.showGrid&&n().createElement("div",{className:"canvas-grid",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:"\n                      linear-gradient(to right, ".concat(D.settings.gridColor).concat(Math.round(2.55*D.settings.gridOpacity).toString(16).padStart(2,"0")," 1px, transparent 1px),\n                      linear-gradient(to bottom, ").concat(D.settings.gridColor).concat(Math.round(2.55*D.settings.gridOpacity).toString(16).padStart(2,"0")," 1px, transparent 1px)\n                    "),backgroundSize:"".concat(D.settings.gridSize,"px ").concat(D.settings.gridSize,"px"),pointerEvents:"none",zIndex:1}}),D.settings.showGuides&&n().createElement("div",{className:"canvas-guides"},F.horizontal.map(function(e,t){return n().createElement("div",{key:"h-guide-".concat(t),className:"canvas-guide horizontal-guide",onClick:function(t){t.stopPropagation(),D.settings.lockGuides||H("horizontal",e)},style:{position:"absolute",top:"".concat(e,"px"),left:0,width:"100%",height:"2px",backgroundColor:"#007cba",cursor:D.settings.lockGuides?"default":"pointer",zIndex:2,opacity:.7},title:"Guide horizontal Ã  ".concat(e,"px - ").concat(D.settings.lockGuides?"VerrouillÃ©":"Cliquer pour supprimer")})}),F.vertical.map(function(e,t){return n().createElement("div",{key:"v-guide-".concat(t),className:"canvas-guide vertical-guide",onClick:function(t){t.stopPropagation(),D.settings.lockGuides||H("vertical",e)},style:{position:"absolute",top:0,left:"".concat(e,"px"),height:"100%",width:"2px",backgroundColor:"#007cba",cursor:D.settings.lockGuides?"default":"pointer",zIndex:2,opacity:.7},title:"Guide vertical Ã  ".concat(e,"px - ").concat(D.settings.lockGuides?"VerrouillÃ©":"Cliquer pour supprimer")})})),G.elements.filter(function(e){return!e.type.startsWith("woocommerce-")}).map(function(e){return n().createElement(x,{key:e.id,element:e,isSelected:G.selection.selectedElements.includes(e.id),zoom:1,snapToGrid:D.settings.snapToGrid,gridSize:D.settings.gridSize,canvasWidth:G.canvasWidth,canvasHeight:G.canvasHeight,onSelect:function(){return ee(e.id)},onUpdate:function(t){return G.updateElement(e.id,t)},onRemove:function(){return G.deleteElement(e.id)},onContextMenu:function(t){return oe(t,e.id)},dragAndDrop:Q,enableRotation:D.settings.enableRotation,rotationStep:D.settings.rotationStep,rotationSnap:D.settings.rotationSnap,guides:F,snapToGuides:D.settings.snapToElements})}),G.elements.filter(function(e){return e.type.startsWith("woocommerce-")}).map(function(e){return n().createElement(Fe,{key:e.id,element:e,isSelected:G.selection.selectedElements.includes(e.id),onSelect:ee,onUpdate:G.updateElement,dragAndDrop:Q,zoom:1,canvasWidth:G.canvasWidth,canvasHeight:G.canvasHeight,orderData:L,onContextMenu:function(t){return oe(t,e.id)},snapToGrid:D.settings.snapToGrid,gridSize:D.settings.gridSize,guides:F,snapToGuides:D.settings.snapToElements})})))),!s&&n().createElement("aside",{className:"editor-sidebar right-sidebar ".concat(v?"collapsed":"")},!v&&n().createElement(gt,{selectedElements:G.selection.selectedElements,elements:G.elements,onPropertyChange:re,onBatchUpdate:ne}))),!s&&n().createElement("button",{className:"sidebar-toggle-fixed",onClick:function(){return w(!v)},title:v?"Agrandir le panneau":"RÃ©duire le panneau",style:{position:"fixed",top:"50%",right:v?"80px":"420px",transform:"translateY(-50%)",zIndex:999999}},v?"â—€":"â–¶"),G.contextMenu.contextMenu&&n().createElement(we,{menu:G.contextMenu.contextMenu,onAction:ae,isAnimating:G.contextMenu.isAnimating||!1,onClose:G.contextMenu.hideContextMenu}),n().createElement("footer",{className:"editor-status"},n().createElement("span",null,"Ã‰lÃ©ments: ",G.elements.length),n().createElement("span",null,"|"),D.settings.showZoomIndicator&&n().createElement(n().Fragment,null,n().createElement("span",null,"Zoom: ",Math.round(100*G.zoom.zoom),"%"),n().createElement("span",null,"|")),n().createElement("span",null,"Outil: ",l),G.selection.selectedElements.length>0&&n().createElement(n().Fragment,null,n().createElement("span",null,"|"),n().createElement("span",null,"Ã‰lÃ©ments sÃ©lectionnÃ©s: ",G.selection.selectedElements.length))),n().createElement(We,{isOpen:s,onClose:function(){u(!1)},elements:G.elements,canvasWidth:G.canvasWidth,canvasHeight:G.canvasHeight,ajaxurl:null===(t=window.pdfBuilderAjax)||void 0===t?void 0:t.ajaxurl,pdfBuilderNonce:null===(o=window.pdfBuilderAjax)||void 0===o?void 0:o.nonce,useServerPreview:!1,onOpenPDFModal:function(e){g(e),m(!0),u(!1)}}),n().createElement(Oe,{isOpen:p,onClose:function(){m(!1),b&&b.startsWith("blob:")&&setTimeout(function(){URL.revokeObjectURL(b)},100),g(null)},pdfUrl:b,title:"PDF GÃ©nÃ©rÃ©"}),n().createElement(ve,{showFps:D.settings.showFps}))};function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ot(e,t,r){return(t=At(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,At(n.key),n)}}function At(e){var t=function(e){if("object"!=Nt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nt(t)?t:t+""}try{var jt=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.version="2.0.0",this.editors=new Map,this._hooks=t,this._forceInclude={useHistory:_,useRotation:h,useResize:f};try{var r=_(),n=h(function(){}),o=f();this._dummyInstances={dummyHistory:r,dummyRotation:n,dummyResize:o}}catch(e){}},n=[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.getElementById(e);if(n){var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach(function(t){Ot(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({templateId:null,templateName:null,isNew:!0,initialElements:[],width:595,height:842,zoom:1,gridSize:10,snapToGrid:!0},t),i=(0,r.createElement)(Bt,{options:a});(0,o.render)(i,n),this.editors.set(e,{container:n,options:a})}}},{key:"destroy",value:function(e){var t=this.editors.get(e);t&&((0,o.unmountComponentAtNode)(t.container),this.editors.delete(e))}},{key:"getData",value:function(e){return null}}],n&&Ft(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}());"undefined"!=typeof window&&(window.PDFBuilderPro=jt,window.pdfBuilderPro=jt)}catch(e){window.PDFBuilderPro={init:function(){return null},version:"error"},window.pdfBuilderPro=window.PDFBuilderPro}})();