/*! For license information please see pdf-builder-admin.js.LICENSE.txt */
(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{useCanvasState:()=>Pe,useClipboard:()=>ae,useContextMenu:()=>be,useDragAndDrop:()=>P,useHistory:()=>q,useKeyboardShortcuts:()=>Me,useResize:()=>b,useRotation:()=>w,useSelection:()=>te,useZoom:()=>se});const r=React;var n=e.n(r);const o=ReactDOM;var a=e.n(o);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=n().useState,m=n().useCallback,h=n().useRef,b=function(e){var t=e.onElementResize,r=e.snapToGrid,n=void 0===r||r,o=e.gridSize,a=void 0===o?10:o,i=e.minWidth,l=void 0===i?20:i,d=e.minHeight,f=void 0===d?20:d,b=e.zoom,g=void 0===b?1:b,y=e.canvasRect,v=void 0===y?null:y,x=e.canvasWidth,w=void 0===x?595:x,E=e.canvasHeight,S=void 0===E?842:E,C=e.guides,z=void 0===C?{horizontal:[],vertical:[]}:C,_=e.snapToGuides,k=void 0===_||_,T=e.elementType,R=void 0===T?null:T,B=s(p(!1),2),N=B[0],W=B[1],O=s(p(null),2),F=O[0],A=O[1],j=h({x:0,y:0}),P=h({x:0,y:0,width:0,height:0}),D=m(function(e){return n?Math.round(e/a)*a:e},[n,a]),M=m(function(e){if(!k)return e;var t,r=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=u(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw o}}}}(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?z.vertical:z.horizontal);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(Math.abs(e-n)<=5)return n}}catch(e){r.e(e)}finally{r.f()}return e},[k,z]),I=m(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e;return r=D(r),M(r,t)},[D,M]),H=m(function(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(e.preventDefault(),e.stopPropagation(),e.target&&e.target.isConnected)if(e.target.parentNode&&e.target.parentNode.isConnected){W(!0),A(r);var i=o||v||{left:0,top:0},d=a||g||1;j.current={x:(e.clientX-i.left)/d,y:(e.clientY-i.top)/d},P.current=c({},n);var s=function(e){var n=(e.clientX-i.left)/d,a=(e.clientY-i.top)/d,s=n-j.current.x,u=a-j.current.y,p=c({},P.current),m="divider"===R||"line"===R;switch(r){case"nw":m?(p.x=I(P.current.x+s,!1),p.width=I(P.current.width-s,!1)):(p.x=I(P.current.x+s,!1),p.y=I(P.current.y+u,!0),p.width=I(P.current.width-s,!1),p.height=I(P.current.height-u,!0));break;case"ne":m?p.width=I(P.current.width+s,!1):(p.y=I(P.current.y+u,!0),p.width=I(P.current.width+s,!1),p.height=I(P.current.height-u,!0));break;case"sw":m?(p.x=I(P.current.x+s,!1),p.width=I(P.current.width-s,!1)):(p.x=I(P.current.x+s,!1),p.width=I(P.current.width-s,!1),p.height=I(P.current.height+u,!0));break;case"se":m?p.width=I(P.current.width+s,!1):(p.width=I(P.current.width+s,!1),p.height=I(P.current.height+u,!0));break;case"n":m||(p.y=I(P.current.y+u,!0),p.height=I(P.current.height-u,!0));break;case"s":m||(p.height=I(P.current.height+u,!0));break;case"w":p.x=I(P.current.x+s,!1),p.width=I(P.current.width-s,!1);break;case"e":p.width=I(P.current.width+s,!1)}p.width<l&&(r.includes("w")&&(p.x=P.current.x+P.current.width-l),p.width=l),p.height<f&&(r.includes("n")&&(p.y=P.current.y+P.current.height-f),p.height=f);var h=o?o.width/d:w,b=o?o.height/d:S;p.x=Math.max(0,Math.min(h-p.width,p.x)),p.y=Math.max(0,Math.min(b-p.height,p.y)),t&&t(p)},u=function(){W(!1),A(null),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",u)}else console.warn("Resize handle parent no longer exists in DOM");else console.warn("Resize handle target no longer exists in DOM")},[D,l,f,t,g,v,w,S]);return{isResizing:N,resizeHandle:F,handleResizeStart:H}};function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v=n().useState,x=n().useCallback,w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=g(v(!1),2),o=n[0],a=n[1],i=g(v({angle:0,centerX:0,centerY:0}),2),l=i[0],c=i[1],d=x(function(n,i){n.preventDefault(),n.stopPropagation(),a(!0);var d=n.currentTarget.getBoundingClientRect(),s=d.left+d.width/2,u=d.top+d.height/2,f=n.clientX-s,p=n.clientY-u,m=Math.atan2(p,f)*(180/Math.PI);c({angle:m-(i.rotation||0),centerX:s,centerY:u});var h=function(n){if(o){var a=n.clientX-s,i=n.clientY-u,c=Math.atan2(i,a)*(180/Math.PI);c-=l.angle,r&&(c=Math.round(c/t)*t),e(c=(c%360+360)%360)}},b=function(){a(!1),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",b)},[o,l,t,r,e]);return{isRotating:o,handleRotationStart:d}};function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){z(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function z(e,t,r){return(t=function(e){var t=function(e){if("object"!=E(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=n().useRef,k=n().useCallback,T=n().useEffect,R=function(e){var t,r,o,a,i,l,c,d,s,u,f,p,m,h,g,y=e.element,v=e.isSelected,x=e.zoom,E=e.snapToGrid,S=e.gridSize,R=e.canvasWidth,B=e.canvasHeight,N=e.onSelect,W=e.onUpdate,O=(e.onRemove,e.onContextMenu),F=e.dragAndDrop,A=e.enableRotation,j=void 0===A||A,P=e.rotationStep,D=void 0===P?15:P,M=e.rotationSnap,I=void 0===M||M,H=e.guides,L=void 0===H?{horizontal:[],vertical:[]}:H,G=e.snapToGuides,q=void 0===G||G,U=_(null),V=_(null);T(function(){y&&y.id&&(y.x,y.y,y.width,y.height)},[y.x,y.y,y.width,y.height,x,y.id,y.type]);var Z,X,Y,J,K,Q,$,ee,te,re,ne,oe,ae,ie,le,ce,de,se,ue,fe,pe,me,he,be,ge,ye,ve,xe,we,Ee,Se,Ce,ze,_e,ke,Te,Re,Be,Ne,We=b({onElementResize:function(e){W({x:e.x,y:e.y,width:e.width,height:e.height})},snapToGrid:E,gridSize:S,canvasWidth:R,canvasHeight:B,guides:L,snapToGuides:q,elementType:y.type}),Oe=w(function(e){W({rotation:e})},D,I),Fe=k(function(e){if(e.stopPropagation(),v){var t=U.current.closest(".canvas-zoom-wrapper");if(t){var r=t.getBoundingClientRect(),n=U.current.getBoundingClientRect(),o=(n.left,r.left,n.top,r.top,n.width,n.height,(e.clientX-r.left)/x),a=(e.clientY-r.top)/x,i=8/x,l=y.x,c=y.y,d=y.x+y.width,s=y.y+y.height,u=[{name:"nw",x:l,y:c},{name:"ne",x:d,y:c},{name:"sw",x:l,y:s},{name:"se",x:d,y:s},{name:"n",x:l+y.width/2,y:c},{name:"s",x:l+y.width/2,y:s},{name:"w",x:l,y:c+y.height/2},{name:"e",x:d,y:c+y.height/2}].find(function(e){return o>=e.x-i/2&&o<=e.x+i/2&&a>=e.y-i/2&&a<=e.y+i/2});if(u){var f=U.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();We.handleResizeStart(e,u.name,{x:y.x,y:y.y,width:y.width,height:y.height},f,x)}else{var p=U.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();V.current=p,F.handleMouseDown(e,y.id,{left:y.x,top:y.y,width:y.width,height:y.height},p,x,y.type)}}}else N()},[v,N,y,x,We,F]),Ae=k(function(e){if(e.stopPropagation(),"text"===y.type){var t=y.content||y.text||"",r=prompt("Modifier le texte:",t);if(null===r)return;var n=z({},void 0!==y.content?"content":"text",r);W(n)}},[y,W]),je=k(function(e){e.preventDefault(),e.stopPropagation(),O&&O(e,y.id)},[O,y.id]),Pe=y.padding||0,De=useMemo(function(){return C(C({position:"absolute",left:(y.x+Pe)*x,top:(y.y+Pe)*x,width:Math.max(1,y.width-2*Pe)*x,height:Math.max(1,y.height-2*Pe)*x,cursor:F.isDragging?"grabbing":"grab",userSelect:"none","--selection-border-width":"2px","--selection-border-color":"#3b82f6","--selection-border-spacing":"2px","--selection-shadow-opacity":"0.1","--show-resize-handles":v?"block":"none","--resize-handle-size":"".concat(10*x,"px"),"--resize-handle-color":"#3b82f6","--resize-handle-border-color":"white","--resize-handle-offset":"".concat(-5*x,"px"),"--element-border-width":"2px","--resize-zone-size":"16px","--show-resize-zones":v?"auto":"none"},(e=y.type,["product_table","customer_info","company_logo","company_info","order_number","document_type","progress-bar"].includes(e)?function(e){return C({backgroundColor:"transparent",boxSizing:"border-box"},e.borderWidth&&e.borderWidth>0?{border:"".concat(e.borderWidth*x,"px ").concat(e.borderStyle||"solid"," ").concat(e.borderColor||"#e5e7eb")}:{})}(y):{backgroundColor:y.backgroundOpacity&&y.backgroundColor&&"transparent"!==y.backgroundColor?y.backgroundColor+Math.round(255*y.backgroundOpacity).toString(16).padStart(2,"0"):y.backgroundColor||"transparent",border:y.borderWidth?"".concat(y.borderWidth*x,"px ").concat(y.borderStyle||"solid"," ").concat(y.borderColor||"transparent"):"none"})),{},{borderRadius:y.borderRadius?"".concat(y.borderRadius*x,"px"):"0px",opacity:(y.opacity||100)/100,transform:"".concat(F.draggedElementId===y.id?"translate(".concat(F.dragOffset.x*x,"px, ").concat(F.dragOffset.y*x,"px) "):"","rotate(").concat(y.rotation||0,"deg) scale(").concat(y.scale||100,"%)"),filter:"brightness(".concat(y.brightness||100,"%) contrast(").concat(y.contrast||100,"%) saturate(").concat(y.saturate||100,"%)"),boxShadow:y.boxShadowColor?"0px ".concat(y.boxShadowSpread||0,"px ").concat(y.boxShadowBlur||0,"px ").concat(y.boxShadowColor):y.shadow?"".concat(y.shadowOffsetX||2,"px ").concat(y.shadowOffsetY||2,"px 4px ").concat(y.shadowColor||"#000000","40"):"none"},function(e,t){switch(e.type){case"text":return{fontSize:(e.fontSize||14)*t,fontFamily:e.fontFamily||"Arial",color:e.color||"#1e293b",fontWeight:e.fontWeight||"normal",fontStyle:e.fontStyle||"normal",textAlign:e.textAlign||"left",textDecoration:e.textDecoration||"none",lineHeight:e.lineHeight||"normal",display:"flex",alignItems:"center",justifyContent:"center"===e.textAlign?"center":"right"===e.textAlign?"flex-end":"flex-start",wordBreak:"break-word",overflow:"hidden"};case"rectangle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius,"px"):"0"};case"image":return e.src||e.imageUrl?{backgroundImage:"url(".concat(e.src||e.imageUrl,")"),backgroundSize:e.objectFit||e.fit||"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{backgroundColor:e.backgroundColor||"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",fontSize:12*t};case"line":return{borderTop:"".concat(e.lineWidth||1,"px solid ").concat(e.lineColor||"#6b7280"),height:"".concat(Math.max(e.lineWidth||1,12),"px"),width:"100%",cursor:"pointer",backgroundColor:"transparent"};case"layout-header":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14*t,fontWeight:"bold",color:e.color||"#64748b"};case"layout-footer":case"layout-sidebar":case"layout-section":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#64748b"};case"layout-container":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#94a3b8"};case"shape-rectangle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"0"};case"shape-circle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:"50%"};case"shape-line":return{backgroundColor:e.backgroundColor||"transparent",height:"100%"};case"shape-arrow":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(0% 50%, 70% 0%, 70% 40%, 100% 40%, 100% 60%, 70% 60%, 70% 100%)"};case"shape-triangle":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"};case"shape-star":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"};case"divider":return{backgroundColor:e.backgroundColor||"#e5e7eb",height:"16px",cursor:"pointer",borderRadius:"2px"};case"line":return{backgroundColor:e.backgroundColor||"#64748b",height:"12px",cursor:"pointer"};default:return{backgroundColor:e.backgroundColor||"transparent",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#333333"}}}(y,x));var e},[y.x,y.y,y.width,y.height,y.rotation,y.scale,y.backgroundColor,y.backgroundOpacity,y.borderWidth,y.borderStyle,y.borderColor,y.borderRadius,y.opacity,y.brightness,y.contrast,y.saturate,y.boxShadowColor,y.boxShadowSpread,y.boxShadowBlur,y.shadow,y.shadowOffsetX,y.shadowOffsetY,y.shadowColor,y.type,Pe,x,v,F.isDragging,F.draggedElementId,F.dragOffset]);return n().createElement(n().Fragment,null,n().createElement("div",{ref:U,"data-element-id":y.id,className:"canvas-element ".concat(v?"selected":""),style:De,onMouseDown:Fe,onDoubleClick:Ae,onContextMenu:je,draggable:!1},"text"===y.type?y.content||y.text||"Texte":"product_table"===y.type?null:"image"!==y.type||y.src?"line"===y.type?null:"layout-header"===y.type?"[H] En-tÃªte":"layout-footer"===y.type?"ðŸ“„ Pied de Page":"layout-sidebar"===y.type?"ðŸ“„ Barre LatÃ©rale":"layout-section"===y.type?"ðŸ“„ Section":"layout-container"===y.type?"ðŸ“¦ Conteneur":"shape-rectangle"===y.type?"â–­":"shape-circle"===y.type?"â—‹":"shape-line"===y.type?null:"shape-arrow"===y.type?"â†’":"shape-triangle"===y.type?"â–³":"shape-star"===y.type?"â­":"divider"===y.type?null:"image-upload"===y.type?"ðŸ“¤ TÃ©lÃ©charger":"logo"===y.type?"ðŸ·ï¸ Logo":"barcode"===y.type?"ðŸ“Š 123456":"qrcode"===y.type||"qrcode-dynamic"===y.type?"ðŸ“± QR":"icon"===y.type?y.content||"ðŸŽ¯":"dynamic-text"===y.type?y.content||"{{variable}}":"formula"===y.type?y.content||"{{prix * quantite}}":"conditional-text"===y.type?y.content||'{{condition ? "Oui" : "Non"}}':"counter"===y.type?y.content||"1":"date-dynamic"===y.type?y.content||"{{date|format:Y-m-d}}":"currency"===y.type?y.content||"{{montant|currency:EUR}}":"table-dynamic"===y.type?"ðŸ“Š Tableau":"gradient-box"===y.type?"ðŸŒˆ DÃ©gradÃ©":"shadow-box"===y.type?"ðŸ“¦ Ombre":"rounded-box"===y.type?"ðŸ”„ Arrondi":"border-box"===y.type?"ðŸ”² Bordure":"background-pattern"===y.type?"ðŸŽ¨ Motif":"watermark"===y.type?y.content||"CONFIDENTIEL":"progress-bar"===y.type||"product_table"===y.type||"customer_info"===y.type?null:"image"!==y.type&&"rectangle"!==y.type&&"company_logo"!==y.type&&"order_number"!==y.type&&"company_info"!==y.type&&"document_type"!==y.type?y.type:null:"ðŸ“· Image","product_table"===y.type&&(Te=(Ce=[{name:"Produit A - Description du produit",sku:"SKU001",quantity:2,price:19.99,total:39.98},{name:"Produit B - Un autre article",sku:"SKU002",quantity:1,price:29.99,total:29.99}].reduce(function(e,t){return e+t.total},0))+(ze=y.showShipping?5:0)+(_e=y.showTaxes?2.25:0)+(ke=y.showDiscount?-5:0),Re=function(){for(var e=["image","name","sku","quantity","price","total"],t=e.length-1;t>=0;t--){var r;if(!1!==(null===(r=y.columns)||void 0===r?void 0:r[e[t]]))return e[t]}return"total"}(),Be=function(){var e={default:{headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#000000",altRowBg:"#fafbfc",borderWidth:2,headerTextColor:"#334155",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderRadius:"4px"},classic:{headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#334155",altRowBg:"#ffffff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e293b",headerFontWeight:"700",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(0, 0, 0, 0.15)",borderRadius:"0px"},striped:{headerBg:"#3b82f6",headerBorder:"#2563eb",rowBorder:"#e2e8f0",altRowBg:"#f8fafc",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 4px rgba(59, 130, 246, 0.2)",borderRadius:"6px"},bordered:{headerBg:"#ffffff",headerBorder:"#374151",rowBorder:"#d1d5db",altRowBg:"#ffffff",borderWidth:2,headerTextColor:"#111827",rowTextColor:"#111827",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 12px rgba(0, 0, 0, 0.1), inset 0 0 0 1px #e5e7eb",borderRadius:"8px"},minimal:{headerBg:"#ffffff",headerBorder:"#d1d5db",rowBorder:"#f3f4f6",altRowBg:"#ffffff",borderWidth:.5,headerTextColor:"#6b7280",rowTextColor:"#6b7280",headerFontWeight:"500",headerFontSize:"10px",rowFontSize:"9px",shadow:"none",borderRadius:"0px"},modern:{headerBg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",headerBorder:"#5b21b6",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#6b21a8",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 20px rgba(102, 126, 234, 0.25)",borderRadius:"8px"},blue_ocean:{headerBg:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e3a8a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(59, 130, 246, 0.3)",borderRadius:"6px"},emerald_forest:{headerBg:"linear-gradient(135deg, #064e3b 0%, #10b981 100%)",headerBorder:"#065f46",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#064e3b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(16, 185, 129, 0.3)",borderRadius:"6px"},sunset_orange:{headerBg:"linear-gradient(135deg, #9a3412 0%, #f97316 100%)",headerBorder:"#c2410c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(249, 115, 22, 0.3)",borderRadius:"6px"},royal_purple:{headerBg:"linear-gradient(135deg, #581c87 0%, #a855f7 100%)",headerBorder:"#7c3aed",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#581c87",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(168, 85, 247, 0.3)",borderRadius:"6px"},rose_pink:{headerBg:"linear-gradient(135deg, #be185d 0%, #f472b6 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#be185d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(244, 114, 182, 0.3)",borderRadius:"6px"},teal_aqua:{headerBg:"linear-gradient(135deg, #0f766e 0%, #14b8a6 100%)",headerBorder:"#0d9488",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#0f766e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(20, 184, 166, 0.3)",borderRadius:"6px"},crimson_red:{headerBg:"linear-gradient(135deg, #991b1b 0%, #ef4444 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#991b1b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(239, 68, 68, 0.3)",borderRadius:"6px"},amber_gold:{headerBg:"linear-gradient(135deg, #92400e 0%, #f59e0b 100%)",headerBorder:"#d97706",rowBorder:"#fef3c7",altRowBg:"#fffbeb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#92400e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(245, 158, 11, 0.3)",borderRadius:"6px"},indigo_night:{headerBg:"linear-gradient(135deg, #312e81 0%, #6366f1 100%)",headerBorder:"#4338ca",rowBorder:"#e0e7ff",altRowBg:"#eef2ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#312e81",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(99, 102, 241, 0.3)",borderRadius:"6px"},slate_gray:{headerBg:"linear-gradient(135deg, #374151 0%, #6b7280 100%)",headerBorder:"#4b5563",rowBorder:"#f3f4f6",altRowBg:"#f9fafb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(107, 114, 128, 0.3)",borderRadius:"6px"},coral_sunset:{headerBg:"linear-gradient(135deg, #c2410c 0%, #fb7185 100%)",headerBorder:"#ea580c",rowBorder:"#fed7d7",altRowBg:"#fef7f7",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#c2410c",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 113, 133, 0.3)",borderRadius:"6px"},mint_green:{headerBg:"linear-gradient(135deg, #065f46 0%, #34d399 100%)",headerBorder:"#047857",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#065f46",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(52, 211, 153, 0.3)",borderRadius:"6px"},violet_dream:{headerBg:"linear-gradient(135deg, #6d28d9 0%, #c084fc 100%)",headerBorder:"#8b5cf6",rowBorder:"#ede9fe",altRowBg:"#f5f3ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#6d28d9",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(192, 132, 252, 0.3)",borderRadius:"6px"},sky_blue:{headerBg:"linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%)",headerBorder:"#0284c7",rowBorder:"#bae6fd",altRowBg:"#f0f9ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#0369a1",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(14, 165, 233, 0.3)",borderRadius:"6px"},forest_green:{headerBg:"linear-gradient(135deg, #14532d 0%, #22c55e 100%)",headerBorder:"#15803d",rowBorder:"#bbf7d0",altRowBg:"#f0fdf4",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#14532d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(34, 197, 94, 0.3)",borderRadius:"6px"},ruby_red:{headerBg:"linear-gradient(135deg, #b91c1b 0%, #f87171 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#b91c1b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(248, 113, 113, 0.3)",borderRadius:"6px"},golden_yellow:{headerBg:"linear-gradient(135deg, #a16207 0%, #eab308 100%)",headerBorder:"#ca8a04",rowBorder:"#fef08a",altRowBg:"#fefce8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#a16207",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(234, 179, 8, 0.3)",borderRadius:"6px"},navy_blue:{headerBg:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e3a8a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(59, 130, 246, 0.3)",borderRadius:"6px"},burgundy_wine:{headerBg:"linear-gradient(135deg, #7f1d1d 0%, #dc2626 100%)",headerBorder:"#991b1b",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#7f1d1d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(220, 38, 38, 0.3)",borderRadius:"6px"},lavender_purple:{headerBg:"linear-gradient(135deg, #7c2d12 0%, #a855f7 100%)",headerBorder:"#9333ea",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#7c2d12",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(168, 85, 247, 0.3)",borderRadius:"6px"},ocean_teal:{headerBg:"linear-gradient(135deg, #134e4a 0%, #14b8a6 100%)",headerBorder:"#0f766e",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#134e4a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(20, 184, 166, 0.3)",borderRadius:"6px"},cherry_blossom:{headerBg:"linear-gradient(135deg, #be185d 0%, #fb7185 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#be185d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 113, 133, 0.3)",borderRadius:"6px"},autumn_orange:{headerBg:"linear-gradient(135deg, #9a3412 0%, #fb923c 100%)",headerBorder:"#ea580c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 146, 60, 0.3)",borderRadius:"6px"}};return e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]||e.default}(y.tableStyle),Ne=!1!==y.showBorders,n().createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",fontSize:10*x,fontFamily:'"Inter", "Segoe UI", Roboto, -apple-system, BlinkMacSystemFont, sans-serif',border:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.headerBorder):y.borderWidth&&y.borderWidth>0?"".concat(Math.max(1,y.borderWidth*x*.5),"px solid ").concat(y.borderColor||"#e5e7eb"):"none",borderRadius:Be.borderRadius?"".concat(Be.borderRadius*x,"px"):"2px",overflow:"hidden",backgroundColor:y.backgroundColor||"transparent",boxSizing:"border-box",boxShadow:Be.shadow,lineHeight:"1.4",color:Be.rowTextColor}},!1!==y.showHeaders&&n().createElement("div",{style:{display:"flex",background:Be.headerBg,borderBottom:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.headerBorder):"none",fontWeight:Be.headerFontWeight,color:Be.headerTextColor,fontSize:"".concat(Be.headerFontSize*x,"px"),textTransform:"uppercase",letterSpacing:"0.025em"}},!1!==(null===(Z=y.columns)||void 0===Z?void 0:Z.image)&&n().createElement("div",{key:"header-image",style:{flex:"0 0 40px",padding:"".concat(6*x,"px ").concat(4*x,"px"),textAlign:"center",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.headerBorder):"none",fontSize:"".concat(Be.headerFontSize*x*.9,"px"),opacity:.9}},"Img"),!1!==(null===(X=y.columns)||void 0===X?void 0:X.name)&&n().createElement("div",{key:"header-name",style:{flex:1,padding:"".concat(6*x,"px ").concat(8*x,"px"),textAlign:"left",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.headerBorder):"none",fontSize:"".concat(Be.headerFontSize*x,"px")}},"Produit"),!1!==(null===(Y=y.columns)||void 0===Y?void 0:Y.sku)&&n().createElement("div",{key:"header-sku",style:{flex:"0 0 80px",padding:"".concat(6*x,"px ").concat(8*x,"px"),textAlign:"left",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.headerBorder):"none",fontSize:"".concat(Be.headerFontSize*x,"px")}},"SKU"),!1!==(null===(J=y.columns)||void 0===J?void 0:J.quantity)&&n().createElement("div",{key:"header-quantity",style:{flex:"0 0 60px",padding:"".concat(6*x,"px ").concat(8*x,"px"),textAlign:"center",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.headerBorder):"none",fontSize:"".concat(Be.headerFontSize*x,"px")}},"QtÃ©"),!1!==(null===(K=y.columns)||void 0===K?void 0:K.price)&&n().createElement("div",{key:"header-price",style:{flex:"0 0 80px",padding:"".concat(6*x,"px ").concat(8*x,"px"),textAlign:"right",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.headerBorder):"none",fontSize:"".concat(Be.headerFontSize*x,"px")}},"Prix"),!1!==(null===(Q=y.columns)||void 0===Q?void 0:Q.total)&&n().createElement("div",{key:"header-total",style:{flex:"0 0 80px",padding:"".concat(6*x,"px ").concat(8*x,"px"),textAlign:"right",fontSize:"".concat(Be.headerFontSize*x,"px")}},"Total")),n().createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},n().createElement("div",{key:"row-1",style:{display:"flex",borderBottom:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",backgroundColor:Be.altRowBg,fontSize:"".concat(Be.rowFontSize*x,"px"),transition:"background-color 0.15s ease"}},!1!==(null===($=y.columns)||void 0===$?void 0:$.image)&&n().createElement("div",{key:"row-1-image",style:{flex:"0 0 40px",padding:"".concat(5*x,"px ").concat(4*x,"px"),textAlign:"center",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",color:Be.rowTextColor,opacity:.7,fontSize:"".concat(Be.rowFontSize*x*.9,"px")}},"ðŸ“·"),!1!==(null===(ee=y.columns)||void 0===ee?void 0:ee.name)&&n().createElement("div",{key:"row-1-name",style:{flex:1,padding:"".concat(5*x,"px ").concat(8*x,"px"),borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",color:Be.rowTextColor,fontWeight:"500",lineHeight:"1.3"}},"Produit A - Description du produit"),!1!==(null===(te=y.columns)||void 0===te?void 0:te.sku)&&n().createElement("div",{key:"row-1-sku",style:{flex:"0 0 80px",padding:"".concat(5*x,"px ").concat(8*x,"px"),borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",color:Be.rowTextColor,opacity:.8,fontFamily:"monospace",fontSize:"".concat(Be.rowFontSize*x*.9,"px")}},"SKU001"),!1!==(null===(re=y.columns)||void 0===re?void 0:re.quantity)&&n().createElement("div",{style:{flex:"0 0 60px",padding:"".concat(5*x,"px ").concat(8*x,"px"),textAlign:"center",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",color:Be.rowTextColor,fontWeight:"600"}},"2"),!1!==(null===(ne=y.columns)||void 0===ne?void 0:ne.price)&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(5*x,"px ").concat(8*x,"px"),textAlign:"right",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",color:Be.rowTextColor,fontWeight:"500",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬19.99"),!1!==(null===(oe=y.columns)||void 0===oe?void 0:oe.total)&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(5*x,"px ").concat(8*x,"px"),textAlign:"right",color:Be.rowTextColor,fontWeight:"600",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬39.98")),n().createElement("div",{style:{display:"flex",borderBottom:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(Be.rowFontSize*x,"px"),transition:"background-color 0.15s ease"}},!1!==(null===(ae=y.columns)||void 0===ae?void 0:ae.image)&&n().createElement("div",{style:{flex:"0 0 40px",padding:"".concat(5*x,"px ").concat(4*x,"px"),textAlign:"center",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",color:Be.rowTextColor,opacity:.7,fontSize:"".concat(Be.rowFontSize*x*.9,"px")}},"ðŸ“·"),!1!==(null===(ie=y.columns)||void 0===ie?void 0:ie.name)&&n().createElement("div",{style:{flex:1,padding:"".concat(5*x,"px ").concat(8*x,"px"),borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",color:Be.rowTextColor,fontWeight:"500",lineHeight:"1.3"}},"Produit B - Un autre article"),!1!==(null===(le=y.columns)||void 0===le?void 0:le.sku)&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(5*x,"px ").concat(8*x,"px"),borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",color:Be.rowTextColor,opacity:.8,fontFamily:"monospace",fontSize:"".concat(Be.rowFontSize*x*.9,"px")}},"SKU002"),!1!==(null===(ce=y.columns)||void 0===ce?void 0:ce.quantity)&&n().createElement("div",{key:"row-1-quantity",style:{flex:"0 0 60px",padding:"".concat(5*x,"px ").concat(8*x,"px"),textAlign:"center",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",color:Be.rowTextColor,fontWeight:"600"}},"1"),!1!==(null===(de=y.columns)||void 0===de?void 0:de.price)&&n().createElement("div",{key:"row-1-price",style:{flex:"0 0 80px",padding:"".concat(5*x,"px ").concat(8*x,"px"),textAlign:"right",borderRight:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",color:Be.rowTextColor,fontWeight:"500",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬29.99"),!1!==(null===(se=y.columns)||void 0===se?void 0:se.total)&&n().createElement("div",{key:"row-1-total",style:{flex:"0 0 80px",padding:"".concat(5*x,"px ").concat(8*x,"px"),textAlign:"right",color:Be.rowTextColor,fontWeight:"600",fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬29.99"))),(y.showSubtotal||y.showShipping||y.showTaxes||y.showDiscount||y.showTotal)&&n().createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},n().createElement("div",{style:{display:"flex",borderTop:Ne?"".concat(2*Be.borderWidth*x,"px solid ").concat(Be.headerBorder):"none",marginTop:"".concat(10*x,"px"),paddingTop:"".concat(10*x,"px"),fontSize:"".concat(Be.rowFontSize*x,"px")}},n().createElement("div",{style:{flex:1,padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right",fontWeight:"bold",color:y.color||"#666"}}),!1!==(null===(ue=y.columns)||void 0===ue?void 0:ue.quantity)&&n().createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"center"}}),!1!==(null===(fe=y.columns)||void 0===fe?void 0:fe.price)&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right",fontWeight:"bold",color:y.color||"#666"}}),!1!==(null===(pe=y.columns)||void 0===pe?void 0:pe.total)&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right",fontWeight:"bold",color:y.color||"#666"}},"Total")),y.showSubtotal&&n().createElement("div",{style:{display:"flex",borderBottom:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",backgroundColor:Be.altRowBg,fontSize:"".concat(Be.rowFontSize*x,"px")}},n().createElement("div",{style:{flex:1,padding:"".concat(5*x,"px ").concat(8*x,"px"),textAlign:"right",color:Be.rowTextColor,fontWeight:"600"}},"Sous-total"),!1!==(null===(me=y.columns)||void 0===me?void 0:me.quantity)&&n().createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"center"}}),!1!==(null===(he=y.columns)||void 0===he?void 0:he.price)&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right"}}),"total"===Re&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right",fontWeight:"bold"}},"â‚¬",Ce.toFixed(2))),y.showShipping&&n().createElement("div",{style:{display:"flex",borderBottom:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(Be.rowFontSize*x,"px")}},n().createElement("div",{style:{flex:1,padding:"".concat(5*x,"px ").concat(8*x,"px"),textAlign:"right",color:Be.rowTextColor,fontWeight:"500"}},"Frais de port"),!1!==(null===(be=y.columns)||void 0===be?void 0:be.quantity)&&n().createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"center"}}),!1!==(null===(ge=y.columns)||void 0===ge?void 0:ge.price)&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right"}}),"total"===Re&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right"}},"â‚¬",ze.toFixed(2))),y.showTaxes&&n().createElement("div",{style:{display:"flex",borderBottom:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(Be.rowFontSize*x,"px")}},n().createElement("div",{style:{flex:1,padding:"".concat(5*x,"px ").concat(8*x,"px"),textAlign:"right",color:Be.rowTextColor,fontWeight:"500"}},"Taxes (TVA 20%)"),!1!==(null===(ye=y.columns)||void 0===ye?void 0:ye.quantity)&&n().createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"center"}}),!1!==(null===(ve=y.columns)||void 0===ve?void 0:ve.price)&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right"}}),"total"===Re&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right"}},"â‚¬",_e.toFixed(2))),y.showDiscount&&n().createElement("div",{style:{display:"flex",borderBottom:Ne?"".concat(Be.borderWidth*x,"px solid ").concat(Be.rowBorder):"none",backgroundColor:"transparent",fontSize:"".concat(Be.rowFontSize*x,"px")}},n().createElement("div",{style:{flex:1,padding:"".concat(5*x,"px ").concat(8*x,"px"),textAlign:"right",color:"#dc3545",fontWeight:"500"}},"Remise"),!1!==(null===(xe=y.columns)||void 0===xe?void 0:xe.quantity)&&n().createElement("div",{style:{flex:"0 0 60px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"center"}}),!1!==(null===(we=y.columns)||void 0===we?void 0:we.price)&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right"}}),"total"===Re&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*x,"px ").concat(6*x,"px"),textAlign:"right",color:"#d32f2f"}},"â‚¬",ke.toFixed(2))),y.showTotal&&n().createElement("div",{style:{display:"flex",borderTop:Ne?"".concat(2*Be.borderWidth*x,"px solid ").concat(Be.headerBorder):"none",backgroundColor:Be.headerBg,marginTop:"".concat(6*x,"px"),paddingTop:"".concat(6*x,"px"),color:Be.headerTextColor,fontWeight:Be.headerFontWeight,fontSize:"".concat(Be.headerFontSize*x,"px")}},n().createElement("div",{style:{flex:1,padding:"".concat(6*x,"px ").concat(8*x,"px"),textAlign:"right",fontSize:"".concat(Be.headerFontSize*x,"px"),textTransform:"uppercase",letterSpacing:"0.05em"}},"TOTAL TTC"),!1!==(null===(Ee=y.columns)||void 0===Ee?void 0:Ee.quantity)&&n().createElement("div",{style:{flex:"0 0 60px",padding:"".concat(6*x,"px ").concat(8*x,"px"),textAlign:"center"}}),!1!==(null===(Se=y.columns)||void 0===Se?void 0:Se.price)&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(6*x,"px ").concat(8*x,"px"),textAlign:"right"}}),"total"===Re&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(6*x,"px ").concat(8*x,"px"),textAlign:"right",fontSize:"".concat(Be.headerFontSize*x*1.2,"px"),fontWeight:"700",color:Be.headerTextColor,fontFamily:'"Inter", system-ui, sans-serif'}},"â‚¬",Te.toFixed(2)))))),"customer_info"===y.type&&n().createElement("div",{style:{width:"100%",height:"100%",padding:"".concat(8*x,"px"),fontSize:"".concat((y.fontSize||12)*x,"px"),fontFamily:y.fontFamily||"Arial, sans-serif",fontWeight:y.fontWeight||"normal",fontStyle:y.fontStyle||"normal",textDecoration:y.textDecoration||"none",color:y.color||"#333",backgroundColor:y.backgroundColor||"transparent",border:y.borderWidth&&y.borderWidth>0?"".concat(Math.max(1,y.borderWidth*x*.5),"px solid ").concat(y.borderColor||"#e5e7eb"):"none",borderRadius:y.borderRadius?"".concat(y.borderRadius*x,"px"):"2px",boxSizing:"border-box"}},n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"row":"column",gap:"".concat(y.spacing*x||8*x,"px"),height:"100%"}},(null===(t=y.fields)||void 0===t?void 0:t.includes("name"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"Nom :"),n().createElement("div",{style:{fontWeight:"bold",color:y.color||"#333"}},"Jean Dupont")),(null===(r=y.fields)||void 0===r?void 0:r.includes("email"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"Email :"),n().createElement("div",{style:{color:"#1976d2"}},"jean.dupont@email.com")),(null===(o=y.fields)||void 0===o?void 0:o.includes("phone"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"TÃ©lÃ©phone :"),n().createElement("div",{style:{color:y.color||"#333"}},"+33 6 12 34 56 78")),(null===(a=y.fields)||void 0===a?void 0:a.includes("address"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"Adresse :"),n().createElement("div",{style:{color:y.color||"#333",lineHeight:"1.4"}},"123 Rue de la Paix",n().createElement("br",null),"75001 Paris",n().createElement("br",null),"France")),(null===(i=y.fields)||void 0===i?void 0:i.includes("company"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"SociÃ©tÃ© :"),n().createElement("div",{style:{fontWeight:"bold",color:y.color||"#333"}},"ABC Company SARL")),(null===(l=y.fields)||void 0===l?void 0:l.includes("vat"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"NÂ° TVA :"),n().createElement("div",{style:{color:y.color||"#333"}},"FR 12 345 678 901")),(null===(c=y.fields)||void 0===c?void 0:c.includes("siret"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"SIRET :"),n().createElement("div",{style:{color:y.color||"#333"}},"123 456 789 00012")))),"company_logo"===y.type&&n().createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"===y.alignment?"center":"right"===y.alignment?"flex-end":"flex-start",padding:"8px",backgroundColor:y.backgroundColor||"transparent",border:y.borderWidth&&y.borderWidth>0?"".concat(Math.max(1,y.borderWidth*x*.5),"px solid ").concat(y.borderColor||"#e5e7eb"):"none",borderRadius:y.borderRadius?"".concat(y.borderRadius*x,"px"):"2px",boxSizing:"border-box"}},y.imageUrl?n().createElement("img",{src:y.imageUrl,alt:"Logo entreprise",style:{width:"".concat(y.width||150,"px"),height:"".concat(y.height||80,"px"),objectFit:y.fit||"contain",borderRadius:y.borderRadius||0,border:y.borderWidth?"".concat(y.borderWidth,"px ").concat(y.borderStyle||"solid"," ").concat(y.borderColor||"transparent"):y.showBorder?"1px solid transparent":"none"}}):n().createElement("div",{style:{width:"".concat(y.width||150,"px"),height:"".concat(y.height||80,"px"),backgroundColor:"#f5f5f5",border:y.borderWidth?"".concat(y.borderWidth,"px ").concat(y.borderStyle||"solid"," ").concat(y.borderColor||"transparent"):y.showBorder?"1px solid transparent":"none",borderRadius:y.borderRadius||"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"".concat(12*x,"px")}},"ðŸ¢ Logo")),"company_info"===y.type&&n().createElement("div",{style:{width:"100%",height:"100%",padding:"".concat(8*x,"px"),fontSize:"".concat((y.fontSize||12)*x,"px"),fontFamily:y.fontFamily||"Arial, sans-serif",fontWeight:y.fontWeight||"normal",fontStyle:y.fontStyle||"normal",textDecoration:y.textDecoration||"none",color:y.color||"#333",backgroundColor:y.backgroundColor||"transparent",border:y.borderWidth&&y.borderWidth>0?"".concat(Math.max(1,y.borderWidth*x*.5),"px solid ").concat(y.borderColor||"#e5e7eb"):"none",borderRadius:y.borderRadius?"".concat(y.borderRadius*x,"px"):"2px",boxSizing:"border-box"}},n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"row":"column",gap:"".concat(y.spacing*x||8*x,"px"),height:"100%"}},(null===(d=y.fields)||void 0===d?void 0:d.includes("name"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"Nom :"),n().createElement("div",{style:{fontWeight:"bold",color:y.color||"#333"}},"Ma SociÃ©tÃ© SARL")),(null===(s=y.fields)||void 0===s?void 0:s.includes("address"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"Adresse :"),n().createElement("div",{style:{color:y.color||"#333",lineHeight:"1.4"}},"123 Rue de l'Entreprise",n().createElement("br",null),"75001 Paris",n().createElement("br",null),"France")),(null===(u=y.fields)||void 0===u?void 0:u.includes("phone"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"TÃ©lÃ©phone :"),n().createElement("div",{style:{color:y.color||"#333"}},"+33 1 23 45 67 89")),(null===(f=y.fields)||void 0===f?void 0:f.includes("email"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"Email :"),n().createElement("div",{style:{color:"#1976d2"}},"contact@masociete.com")),(null===(p=y.fields)||void 0===p?void 0:p.includes("website"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"Site web :"),n().createElement("div",{style:{color:"#1976d2"}},"www.masociete.com")),(null===(m=y.fields)||void 0===m?void 0:m.includes("vat"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"NÂ° TVA :"),n().createElement("div",{style:{color:y.color||"#333"}},"FR 12 345 678 901")),(null===(h=y.fields)||void 0===h?void 0:h.includes("rcs"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:(y.labelStyle,"bold"),textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"RCS :"),n().createElement("div",{style:{color:y.color||"#333"}},"Paris B 123 456 789")),(null===(g=y.fields)||void 0===g?void 0:g.includes("siret"))&&n().createElement("div",{style:{display:"flex",flexDirection:"horizontal"===y.layout?"column":"row",alignItems:"horizontal"===y.layout?"flex-start":"center",gap:"".concat(4*x,"px"),flex:"horizontal"===y.layout?"1":"none"}},y.showLabels&&n().createElement("div",{style:{fontWeight:"bold"===y.labelStyle?"bold":"normal",textTransform:"uppercase"===y.labelStyle?"uppercase":"none",color:y.color||"#666",minWidth:"horizontal"===y.layout?"auto":"80px",fontSize:"".concat(11*x,"px")}},"SIRET :"),n().createElement("div",{style:{color:y.color||"#333"}},"123 456 789 00012")))),"order_number"===y.type&&n().createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"===y.textAlign?"center":"right"===y.textAlign?"flex-end":"flex-start",padding:"".concat(8*x,"px"),fontSize:"".concat((y.fontSize||14)*x,"px"),fontFamily:y.fontFamily||"Arial",fontWeight:y.fontWeight||"bold",color:y.color||"#333333",textAlign:y.textAlign||"right",backgroundColor:y.backgroundColor||"transparent",border:y.borderWidth&&y.borderWidth>0?"".concat(Math.max(1,y.borderWidth*x*.5),"px solid ").concat(y.borderColor||"#e5e7eb"):"none",borderRadius:y.borderRadius?"".concat(y.borderRadius*x,"px"):"2px",boxSizing:"border-box"}},y.showLabel&&n().createElement("div",{style:{fontSize:"".concat(12*x,"px"),fontWeight:"normal",color:y.color||"#666",marginBottom:"".concat(4*x,"px")}},y.labelText||"NÂ° de commande:"),n().createElement("div",null,(y.format||"Commande #{order_number} - {order_date}").replace(/{order_number}/g,"12345").replace(/{order_date}/g,"15/10/2025"))),"document_type"===y.type&&n().createElement("div",{style:{display:"inline-block",padding:"".concat(8*x,"px"),fontSize:"".concat((y.fontSize||18)*x,"px"),fontFamily:y.fontFamily||"Arial",fontWeight:y.fontWeight||"bold",color:y.color||"#1e293b",textAlign:y.textAlign||"center",backgroundColor:y.backgroundColor||"transparent",border:y.borderWidth&&y.borderWidth>0?"".concat(Math.max(1,y.borderWidth*x*.5),"px solid ").concat(y.borderColor||"#e5e7eb"):"none",borderRadius:y.borderRadius?"".concat(y.borderRadius*x,"px"):"4px",whiteSpace:"nowrap",boxSizing:"border-box"}},"invoice"===y.documentType?"FACTURE":"quote"===y.documentType?"DEVIS":"receipt"===y.documentType?"REÃ‡U":"order"===y.documentType?"COMMANDE":"credit_note"===y.documentType?"AVOIR":"DOCUMENT"),v&&n().createElement(n().Fragment,null,"line"!==y.type&&"divider"!==y.type&&n().createElement(n().Fragment,null,n().createElement("div",{key:"resize-handle-nw-".concat(y.id),className:"resize-handle nw",onMouseDown:function(e){var t,r=null===(t=U.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;We.handleResizeStart(e,"nw",{x:y.x,y:y.y,width:y.width,height:y.height},n,x)},onContextMenu:je}),n().createElement("div",{key:"resize-handle-ne-".concat(y.id),className:"resize-handle ne",onMouseDown:function(e){var t,r=null===(t=U.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;We.handleResizeStart(e,"ne",{x:y.x,y:y.y,width:y.width,height:y.height},n,x)},onContextMenu:je}),n().createElement("div",{key:"resize-handle-sw-".concat(y.id),className:"resize-handle sw",onMouseDown:function(e){var t,r=null===(t=U.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;We.handleResizeStart(e,"sw",{x:y.x,y:y.y,width:y.width,height:y.height},n,x)},onContextMenu:je})),n().createElement("div",{key:"resize-handle-se-".concat(y.id),className:"resize-handle se",onMouseDown:function(e){var t,r=null===(t=U.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;We.handleResizeStart(e,"se",{x:y.x,y:y.y,width:y.width,height:y.height},n,x)},onContextMenu:je}),"line"!==y.type&&"divider"!==y.type&&n().createElement(n().Fragment,null,n().createElement("div",{key:"resize-handle-n-".concat(y.id),className:"resize-handle n",onMouseDown:function(e){var t,r=null===(t=U.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;We.handleResizeStart(e,"n",{x:y.x,y:y.y,width:y.width,height:y.height},n,x)},onContextMenu:je}),n().createElement("div",{key:"resize-handle-s-".concat(y.id),className:"resize-handle s",onMouseDown:function(e){var t,r=null===(t=U.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;We.handleResizeStart(e,"s",{x:y.x,y:y.y,width:y.width,height:y.height},n,x)},onContextMenu:je})),n().createElement("div",{key:"resize-handle-w-".concat(y.id),className:"resize-handle w",onMouseDown:function(e){var t,r=null===(t=U.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;We.handleResizeStart(e,"w",{x:y.x,y:y.y,width:y.width,height:y.height},n,x)},onContextMenu:je}),n().createElement("div",{key:"resize-handle-e-".concat(y.id),className:"resize-handle e",onMouseDown:function(e){var t,r=null===(t=U.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),n=r?r.getBoundingClientRect():null;We.handleResizeStart(e,"e",{x:y.x,y:y.y,width:y.width,height:y.height},n,x)},onContextMenu:je}),"line"!==y.type&&"divider"!==y.type&&n().createElement(n().Fragment,null,n().createElement("div",{key:"resize-zone-n-".concat(y.id),className:"resize-zone resize-zone-n",onMouseDown:function(e){return We.handleResizeStart(e,"n",{x:y.x,y:y.y,width:y.width,height:y.height})}}),n().createElement("div",{key:"resize-zone-s-".concat(y.id),className:"resize-zone resize-zone-s",onMouseDown:function(e){return We.handleResizeStart(e,"s",{x:y.x,y:y.y,width:y.width,height:y.height})}})),n().createElement("div",{key:"resize-zone-w-".concat(y.id),className:"resize-zone resize-zone-w",onMouseDown:function(e){return We.handleResizeStart(e,"w",{x:y.x,y:y.y,width:y.width,height:y.height})}}),n().createElement("div",{key:"resize-zone-e-".concat(y.id),className:"resize-zone resize-zone-e",onMouseDown:function(e){return We.handleResizeStart(e,"e",{x:y.x,y:y.y,width:y.width,height:y.height})}})),v&&j&&n().createElement("div",{key:"rotation-handle-".concat(y.id),className:"rotation-handle",style:{position:"absolute",top:"".concat(-20*x,"px"),left:"50%",transform:"translateX(-50%)",width:"".concat(12*x,"px"),height:"".concat(12*x,"px"),backgroundColor:"#3b82f6",border:"".concat(2*x,"px solid white"),borderRadius:"50%",cursor:"alias",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseDown:function(e){e.stopPropagation(),Oe.handleRotationStart(e,y)},title:"Faire pivoter l'Ã©lÃ©ment"})),"progress-bar"===y.type&&n().createElement("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:"".concat(y.progressValue||75,"%"),backgroundColor:y.progressColor||"#3b82f6",borderRadius:"10px",transition:"width 0.3s ease",border:y.borderWidth&&y.borderWidth>0?"".concat(Math.max(1,y.borderWidth*x*.5),"px solid ").concat(y.borderColor||"#e5e7eb"):"none",boxSizing:"border-box"}}))};function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return W(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var O=n().useState,F=n().useCallback,A=n().useRef,j=n().useEffect,P=function(e){var t=e.onElementMove,r=e.onElementDrop,n=e.snapToGrid,o=void 0===n||n,a=e.gridSize,i=void 0===a?10:a,l=e.zoom,c=void 0===l?1:l,d=e.canvasWidth,s=void 0===d?595:d,u=e.canvasHeight,f=void 0===u?842:u,p=e.guides,m=void 0===p?{horizontal:[],vertical:[]}:p,h=e.snapToGuides,b=void 0===h||h,g=B(O(!1),2),y=g[0],v=g[1],x=B(O({x:0,y:0}),2),w=x[0],E=x[1],S=B(O(null),2),C=S[0],z=S[1],_=A({x:0,y:0}),k=A({x:0,y:0}),T=A(null),R=A({x:0,y:0}),W=F(function(e){return o?Math.round(e/i)*i:e},[o,i]),P=F(function(e){if(!b)return e;var t,r=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=N(e))){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw o}}}}(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?m.vertical:m.horizontal);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(Math.abs(e-n)<=5)return n}}catch(e){r.e(e)}finally{r.f()}return e},[b,m]),D=F(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("line"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)&&!t)return e;var r=e;return r=W(r),P(r,t)},[W,P]);j(function(){return function(){T.current&&(document.removeEventListener("mousemove",T.current.handleMouseMove),document.removeEventListener("mouseup",T.current.handleMouseUp),T.current=null)}},[]);var M=F(function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(0===e.button)if(e.target&&e.target.isConnected)if(e.target.parentNode&&e.target.parentNode.isConnected){e.preventDefault(),v(!0),z(t);var l=o||{left:0,top:0,width:s,height:f},d=a||c||1,u=(e.clientX-l.left)/d,p=(e.clientY-l.top)/d;_.current={x:u-n.left,y:p-n.top},k.current={x:n.left,y:n.top};var m=function(e){if(T.current){var t=(e.clientX-l.left)/d,r=(e.clientY-l.top)/d,i=t-u,c=r-p,m=o?o.width/a:s,h=o?o.height/a:f,b=Math.max(0,Math.min(m-n.width,D(n.left+i,!1,y))),g=Math.max(0,Math.min(h-n.height,D(n.top+c,!0,y))),y=T.current.elementType,v={x:b-n.left,y:g-n.top};E(v),R.current=v}else console.warn("Drag data no longer exists during move")},h=function(){if(!T.current)return console.warn("Drag data no longer exists during drop"),v(!1),E({x:0,y:0}),void z(null);var e=T.current,t=e.elementId;if(e.elementType,v(!1),r&&t){var n=k.current.x+R.current.x,o=k.current.y+R.current.y;r(t,{x:n,y:o})}else console.warn("[DEBUG] onElementDrop not called - elementId:",t,"onElementDrop:",!!r);E({x:0,y:0}),z(null),k.current={x:0,y:0},R.current={x:0,y:0},document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),T.current=null};T.current={handleMouseMove:m,handleMouseUp:h,elementId:t,elementType:i},document.addEventListener("mousemove",m),document.addEventListener("mouseup",h)}else console.warn("Drag target parent no longer exists in DOM");else console.warn("Drag target no longer exists in DOM")},[W,t,r,c,s,f]);return{isDragging:y,dragOffset:w,draggedElementId:C,handleMouseDown:M,handleDragStart:F(function(e,t,r){e.dataTransfer.setData("text/plain",t),e.dataTransfer.effectAllowed="move",_.current={x:e.clientX-r.left,y:e.clientY-r.top}},[]),handleDragOver:F(function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),handleDrop:F(function(e,t,n){e.preventDefault();var o=e.dataTransfer.getData("text/plain");if(o){var a=(e.clientX-t.left-_.current.x)/c,i=(e.clientY-t.top-_.current.y)/c,l=t?t.width/c:s,d=t?t.height/c:f,u=Math.max(0,Math.min(l-n.width,D(a,!1))),p=Math.max(0,Math.min(d-n.height,D(i,!0)));r&&r(o,{x:u,y:p})}},[W,r,c,s,f])}},D=function(e){var t=e.selectedTool,r=e.onToolSelect,n=e.zoom,o=e.onZoomChange,a=e.showGrid,i=e.onShowGridChange,l=e.snapToGrid,c=e.onSnapToGridChange,d=e.onUndo,s=e.onRedo,u=e.canUndo,f=e.canRedo;return React.createElement("div",{className:"toolbar"},React.createElement("div",{className:"toolbar-section"},React.createElement("h4",null,"Outils"),React.createElement("div",{className:"tool-buttons"},[{id:"select",label:"SÃ©lection (V)",icon:"ðŸ‘†",shortcut:"V"},{id:"add-text",label:"Texte Simple (T)",icon:"ðŸ“",shortcut:"T"},{id:"add-text-title",label:"Titre (H)",icon:"ðŸ“„",shortcut:"H"},{id:"add-text-subtitle",label:"Sous-titre (S)",icon:"ðŸ“‹",shortcut:"S"},{id:"add-rectangle",label:"Rectangle (R)",icon:"â–­",shortcut:"R"},{id:"add-circle",label:"Cercle (C)",icon:"â—‹",shortcut:"C"},{id:"add-line",label:"Ligne (L)",icon:"â”",shortcut:"L"},{id:"add-arrow",label:"FlÃ¨che (A)",icon:"âž¤",shortcut:"A"},{id:"add-triangle",label:"Triangle (3)",icon:"â–³",shortcut:"3"},{id:"add-star",label:"Ã‰toile (5)",icon:"â­",shortcut:"5"},{id:"add-divider",label:"SÃ©parateur (D)",icon:"âŽ¯",shortcut:"D"},{id:"add-image",label:"Image (I)",icon:"ðŸ–¼ï¸",shortcut:"I"}].map(function(e){return React.createElement("button",{key:e.id,className:"tool-button ".concat(t===e.id?"active":""),onClick:function(){return r(e.id)},title:e.label},React.createElement("div",{className:"tool-content"},React.createElement("span",{className:"tool-icon"},e.icon),React.createElement("span",{className:"tool-shortcut"},e.shortcut)))}))),React.createElement("div",{className:"toolbar-section"},React.createElement("h4",null,"Ã‰dition"),React.createElement("div",{className:"edit-buttons"},React.createElement("button",{className:"edit-button",onClick:d,disabled:!u,title:"Annuler (Ctrl+Z)"},React.createElement("div",{className:"button-content"},React.createElement("span",{className:"button-icon"},"â†¶"),React.createElement("span",{className:"button-text"},"Annuler"),React.createElement("span",{className:"button-shortcut"},"Ctrl+Z"))),React.createElement("button",{className:"edit-button",onClick:s,disabled:!f,title:"RÃ©tablir (Ctrl+Y)"},React.createElement("div",{className:"button-content"},React.createElement("span",{className:"button-icon"},"â†·"),React.createElement("span",{className:"button-text"},"RÃ©tablir"),React.createElement("span",{className:"button-shortcut"},"Ctrl+Y"))))),React.createElement("div",{className:"toolbar-section"},React.createElement("h4",null,"Affichage"),React.createElement("div",{className:"display-controls"},React.createElement("div",{className:"control-group"},React.createElement("label",null,"Zoom:"),React.createElement("div",{className:"zoom-controls"},React.createElement("button",{className:"zoom-button",onClick:function(){return o(Math.max(.1,n-.1))},title:"Zoom arriÃ¨re (Ctrl+-)"},React.createElement("div",{className:"button-content"},React.createElement("span",{className:"button-icon"},"ðŸ”"),React.createElement("span",{className:"button-text"},"-"),React.createElement("span",{className:"button-shortcut"},"Ctrl+-"))),React.createElement("span",{className:"zoom-value"},Math.round(100*n),"%"),React.createElement("button",{className:"zoom-button",onClick:function(){return o(Math.min(3,n+.1))},title:"Zoom avant (Ctrl+=)"},React.createElement("div",{className:"button-content"},React.createElement("span",{className:"button-icon"},"ðŸ”"),React.createElement("span",{className:"button-text"},"+"),React.createElement("span",{className:"button-shortcut"},"Ctrl+="))))),React.createElement("div",{className:"canvas-controls-column"},React.createElement("div",{className:"control-group"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:a,onChange:function(e){return i(e.target.checked)}}),"Grille",React.createElement("span",{className:"control-shortcut"},"(G)"))),React.createElement("div",{className:"control-group"},React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:l,onChange:function(e){return c(e.target.checked)}}),"Aimantation",React.createElement("span",{className:"control-shortcut"},"(M)")))))),React.createElement("div",{className:"toolbar-section"},React.createElement("h4",null,"Raccourcis"),React.createElement("div",{className:"shortcuts-help"},React.createElement("div",{className:"shortcut-group"},React.createElement("span",{className:"shortcut-label"},"Outils:"),React.createElement("span",{className:"shortcut-keys"},"V T H S R C L A 3 5 D I")),React.createElement("div",{className:"shortcut-group"},React.createElement("span",{className:"shortcut-label"},"Ã‰dition:"),React.createElement("span",{className:"shortcut-keys"},"Ctrl+Z/Y")),React.createElement("div",{className:"shortcut-group"},React.createElement("span",{className:"shortcut-label"},"Zoom:"),React.createElement("span",{className:"shortcut-keys"},"Ctrl+/- Roulette")),React.createElement("div",{className:"shortcut-group"},React.createElement("span",{className:"shortcut-label"},"Affichage:"),React.createElement("span",{className:"shortcut-keys"},"G M")))))};function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var H=n().useState,L=n().useCallback,G=n().useRef,q=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).maxHistorySize,t=void 0===e?50:e,r=M(H([]),2),n=r[0],o=r[1],a=M(H(-1),2),i=a[0],l=a[1],c=G(!1);return{addToHistory:L(function(e){c.current?c.current=!1:o(function(r){var n=r.slice(0,i+1);return n.push(e),n.length>t?(n.shift(),l(n.length-1),n):(l(n.length-1),n)})},[i,t]),undo:L(function(){return i>0?(c.current=!0,l(function(e){return e-1}),n[i-1]):null},[i,n]),redo:L(function(){return i<n.length-1?(c.current=!0,l(function(e){return e+1}),n[i+1]):null},[i,n]),canUndo:L(function(){return i>0},[i]),canRedo:L(function(){return i<n.length-1},[i]),clearHistory:L(function(){o([]),l(-1)},[]),getCurrentState:L(function(){return i>=0?n[i]:null},[i,n]),historySize:n.length,currentIndex:i}};function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach(function(t){X(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function X(e,t,r){return(t=function(e){var t=function(e){if("object"!=U(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var $=n().useState,ee=n().useCallback,te=function(e){var t=e.onSelectionChange,r=e.multiSelect,n=void 0===r||r,o=J($([]),2),a=o[0],i=o[1],l=J($(null),2),c=l[0],d=l[1],s=ee(function(e){n&&arguments.length>1&&void 0!==arguments[1]&&arguments[1]?i(function(r){var n=r.includes(e)?r.filter(function(t){return t!==e}):[].concat(Y(r),[e]);return null==t||t(n),n}):(i([e]),null==t||t([e]))},[n,t]),u=ee(function(e){i(e),null==t||t(e)},[t]),f=ee(function(){i([]),null==t||t([])},[t]),p=ee(function(e){return a.includes(e)},[a]),m=ee(function(e,t){d({startX:e,startY:t,endX:e,endY:t})},[]),h=ee(function(e,t){d(function(r){return r?Z(Z({},r),{},{endX:e,endY:t}):null})},[]),b=ee(function(e){if(c){var r=c.startX,o=c.startY,a=c.endX,l=c.endY,s=Math.min(r,a),u=Math.max(r,a),f=Math.min(o,l),p=Math.max(o,l),m=e.filter(function(e){var t=e.x+e.width/2,r=e.y+e.height/2;return t>=s&&t<=u&&r>=f&&r<=p}).map(function(e){return e.id});m.length>0&&(n?i(function(e){var r=Y(new Set([].concat(Y(e),Y(m))));return null==t||t(r),r}):(i(m),null==t||t(m))),d(null)}},[c,n,t]),g=ee(function(){return Y(a)},[a]),y=ee(function(){return Y(a)},[a]);return{selectedElements:a,selectionBox:c,selectElement:s,selectAll:u,clearSelection:f,isSelected:p,startSelectionBox:m,updateSelectionBox:h,endSelectionBox:b,deleteSelected:g,duplicateSelected:y}};function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ne=n().useState,oe=n().useCallback,ae=function(e){var t,r,n=e.onPaste,o=(t=ne(null),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],i=o[1],l=oe(function(e){i(e)},[]),c=oe(function(){return a&&n&&n(a),a},[a,n]),d=oe(function(e){return l(e),e},[l]),s=oe(function(){return null!==a},[a]),u=oe(function(){i(null)},[]);return{copy:l,paste:c,cut:d,hasData:s,clear:u,clipboardData:a}};function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ce=n().useState,de=n().useCallback,se=function(e){var t=e.initialZoom,r=void 0===t?1:t,n=e.minZoom,o=void 0===n?.1:n,a=e.maxZoom,i=void 0===a?3:a,l=e.zoomStep,c=void 0===l?.1:l,d=ie(ce(r),2),s=d[0],u=d[1],f=ie(ce({x:0,y:0}),2),p=f[0],m=f[1],h=de(function(){u(function(e){return Math.min(e+c,i)})},[i,c]),b=de(function(){u(function(e){return Math.max(e-c,o)})},[o,c]),g=de(function(e){var t=Math.max(o,Math.min(i,e));u(t)},[o,i]),y=de(function(){u(r)},[r]),v=de(function(e,t,r,n){var a=r/e,l=n/t,c=Math.min(a,l,i);u(Math.max(c,o))},[o,i]),x=de(function(e,t,r){var n=Math.max(o,Math.min(i,s*r));m({x:e,y:t}),u(n)},[s,o,i]),w=de(function(e,t,r,n,a){if(e&&0!==e.length){var l=1/0,c=1/0,d=-1/0,s=-1/0;e.forEach(function(e){l=Math.min(l,e.x),c=Math.min(c,e.y),d=Math.max(d,e.x+e.width),s=Math.max(s,e.y+e.height)});var f=d-l,p=s-c,h=n/(1.2*f),b=a/(1.2*p),g=Math.min(h,b,i),y=Math.max(o,Math.min(i,g)),v=n/2-(l+f/2)*y,x=a/2-(c+p/2)*y;u(y),m({x:v,y:x})}},[o,i]),E=de(function(){return{transform:"scale(".concat(s,")"),transformOrigin:"".concat(p.x,"px ").concat(p.y,"px")}},[s,p]),S=de(function(e,t){return{x:(e-p.x)/s,y:(t-p.y)/s}},[s,p]),C=de(function(e,t){return{x:e*s+p.x,y:t*s+p.y}},[s,p]);return{zoom:s,zoomOrigin:p,zoomIn:h,zoomOut:b,setZoomLevel:g,resetZoom:y,zoomToFit:v,zoomToPoint:x,zoomToSelection:w,getTransformStyle:E,screenToCanvas:S,canvasToScreen:C}};function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var pe=n().useState,me=n().useCallback,he=n().useEffect,be=function(){var e=ue(pe(null),2),t=e[0],r=e[1],n=ue(pe(!1),2),o=n[0],a=n[1],i=me(function(e,t,n){var o=36*n.length,a=e,i=t;e+180>window.innerWidth&&(a=e-180),t+o>window.innerHeight&&(i=t-o),a=Math.max(0,Math.min(a,window.innerWidth-180)),i=Math.max(0,Math.min(i,window.innerHeight-o)),r({x:a,y:i,items:n})},[]),l=me(function(){t&&(a(!0),setTimeout(function(){r(null),a(!1)},150))},[t]),c=me(function(e){return l(),e},[l]);return he(function(){var e=function(e){t&&!e.target.closest(".context-menu")&&l()},r=function(e){"Escape"===e.key&&t&&l()};return t&&(document.addEventListener("mousedown",e),document.addEventListener("keydown",r)),function(){document.removeEventListener("mousedown",e),document.removeEventListener("keydown",r)}},[t,l]),{contextMenu:t,showContextMenu:i,hideContextMenu:l,handleContextMenuAction:c,isAnimating:o}};function ge(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return ye(d,"_invoke",function(r,n,o){var a,l,c,d=0,s=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,n){for(l=r,c=n,t=0;!u&&d&&!o&&t<s.length;t++){var o,a=s[t],p=f.p,m=a[2];r>3?(o=m===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,n}return function(o,s,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,m),l=s,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(r,o,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(ye(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,ye(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,ye(u,"constructor",d),ye(d,"constructor",c),c.displayName="GeneratorFunction",ye(d,o,"GeneratorFunction"),ye(u),ye(u,o,"Generator"),ye(u,n,function(){return this}),ye(u,"toString",function(){return"[object Generator]"}),(ge=function(){return{w:a,m:f}})()}function ye(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ye=function(e,t,r,n){function a(t,r){ye(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},ye(e,t,r,n)}function ve(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Te(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function we(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Ee(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){we(a,n,o,i,l,"next",e)}function l(e){we(a,n,o,i,l,"throw",e)}i(void 0)})}}function Se(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach(function(t){_e(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _e(e,t,r){return(t=function(e){var t=function(e){if("object"!=xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||Te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){if(e){if("string"==typeof e)return Re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Re(e,t):void 0}}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Be=n().useState,Ne=n().useCallback,We=n().useEffect,Oe=n().useMemo,Fe=n().useRef,Ae=function(e){var t=Fe(e);return t.current=e,t};if("undefined"!=typeof window&&void 0===window.toastr){var je=function(e,t,r){var n=document.createElement("div");switch(n.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      z-index: 100;\n      padding: 15px 20px;\n      margin-bottom: 10px;\n      border-radius: 5px;\n      color: white;\n      font-family: Arial, sans-serif;\n      font-size: 14px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n      max-width: 300px;\n      opacity: 0;\n      transform: translateX(100%);\n      transition: all 0.3s ease;\n    ",e){case"success":n.style.backgroundColor="#51A351";break;case"error":n.style.backgroundColor="#BD362F";break;case"warning":n.style.backgroundColor="#F89406";break;default:n.style.backgroundColor="#2F96B4"}var o=t?"<strong>".concat(t,"</strong><br>"):"";n.innerHTML="".concat(o).concat(r);var a=document.createElement("button");function i(e){e.style.opacity="0",e.style.transform="translateX(100%)",setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e)},300)}a.innerHTML="Ã—",a.style.cssText="\n      position: absolute;\n      top: 5px;\n      right: 10px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 20px;\n      cursor: pointer;\n      opacity: 0.8;\n    ",a.onclick=function(){return i(n)},n.appendChild(a),document.body.appendChild(n),setTimeout(function(){n.style.opacity="1",n.style.transform="translateX(0)"},10),setTimeout(function(){return i(n)},5e3)};window.toastr={success:function(e,t){je("success",t,e)},error:function(e,t){je("error",t,e)},warning:function(e,t){je("warning",t,e)},info:function(e,t){je("info",t,e)},options:{}}}var Pe=function(e){var t,r=e.initialElements,n=void 0===r?[]:r,o=e.templateId,a=void 0===o?null:o,i=e.canvasWidth,l=void 0===i?595:i,c=e.canvasHeight,d=void 0===c?842:c,s=e.globalSettings,u=void 0===s?null:s,f=ke(Be(n),2),p=f[0],m=f[1],h=ke(Be(1),2),b=h[0],g=h[1],y=ke(Be(!1),2),v=y[0],x=(y[1],ke(Be({saving:!1,loading:!1,duplicating:!1,deleting:!1}),2)),w=x[0],E=x[1],S=q(),C=te({onSelectionChange:Ne(function(e){},[]),multiSelect:null===(t=null==u?void 0:u.multiSelect)||void 0===t||t}),z=Ae(S),_=Ae(C),k=ae({onPaste:Ne(function(e){if("elements"===e.type){var t=e.elements.map(function(t){return ze(ze({},t),{},{id:"element_".concat(b+e.elements.indexOf(t)),x:t.x+20,y:t.y+20})});m(function(e){return[].concat(Se(e),Se(t))}),g(function(e){return e+t.length}),C.selectAll(t.map(function(e){return e.id}))}},[b,C])}),T=se({initialZoom:u?parseFloat(u.defaultZoom)/100:1,minZoom:u?u.minZoom/100:.25,maxZoom:u?u.maxZoom/100:3,zoomStep:u?u.zoomStep/100:.1}),R=be(),B=Ne(function(e,t){m(function(r){return r.map(function(r){if(r.id===e){var n=ze(ze({},r),t);return"divider"===r.type&&(n.height=16),"line"===r.type&&(n.height=12),n}return r})})},[]);We(function(){if(p.length>0)try{z.current&&"function"==typeof z.current.addToHistory&&z.current.addToHistory({elements:p,nextId:b})}catch(e){}},[p,b]);var N=Ne(function(e){return Array.isArray(e)?e.map(function(e){return e.id&&e.type?e:null}).filter(Boolean):[]},[]);We(function(){var e=N(n);if(m(e),e&&e.length>0){var t=Math.max.apply(Math,Se(e.map(function(e){var t,r=(null===(t=e.id)||void 0===t?void 0:t.split("_"))||[];return parseInt(r[1]||0)})));g(t+1)}else g(1)},[n,N]);var W=P({onElementMove:Ne(function(e,t){B(e,t)},[B]),onElementDrop:Ne(function(e,t){B(e,t),S.addToHistory({elements:p.map(function(r){return r.id===e?ze(ze({},r),t):r}),nextId:b})},[B,S,p,b])}),O=Ne(function(e){return e.map(function(e){var t=ze({},e);return["domElement","ref","eventListeners","component","render"].forEach(function(e){delete t[e]}),t})},[]);We(function(){if(p.length>0||0===S.historySize){var e=O(p);S.addToHistory({elements:e,nextId:b})}},[p,b,S,O]),We(function(){var e=["product_table","customer_info","company_logo","company_info","order_number","document_type","progress-bar"];p.some(function(t){return e.includes(t.type)&&"transparent"!==t.backgroundColor})&&m(function(t){return t.map(function(t){return e.includes(t.type)&&"transparent"!==t.backgroundColor?ze(ze({},t),{},{backgroundColor:"transparent"}):t})})},[]);var F=Ne(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=z.current,n=_.current;if(n&&r&&"function"==typeof n.selectElement&&"function"==typeof r.addToHistory){var o=ze(ze({id:"element_".concat(b),type:e},{x:50,y:50,width:100,height:50,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderStyle:"solid",borderRadius:0,color:"#1e293b",fontFamily:"Inter, sans-serif",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",text:"Texte",opacity:100,rotation:0,scale:100,visible:!0,src:"",alt:"",objectFit:"cover",brightness:100,contrast:100,saturate:100,shadow:!1,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2,showHeaders:!0,showBorders:!0,dataSource:"order_items",showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1,progressColor:"#3b82f6",progressValue:75,lineColor:"#64748b",lineWidth:2,documentType:"invoice",imageUrl:"",spacing:8,layout:"vertical",alignment:"left",fit:"contain"}),t);"line"===e?(o.height=12,o.width=200):"divider"===e&&(o.height=16,o.width=200),m(function(e){var t=[].concat(Se(e),[o]);try{r&&"function"==typeof r.addToHistory&&r.addToHistory({elements:t,nextId:b+1})}catch(e){}return t}),g(function(e){return e+1});try{n&&"function"==typeof n.selectElement&&n.selectElement(o.id)}catch(e){}}},[b]),A=Ne(function(e){m(function(t){var r=t.filter(function(t){return t.id!==e});return S.addToHistory({elements:r,nextId:b}),r}),C.clearSelection()},[C,S,b]),j=Ne(function(){var e=C.deleteSelected();m(function(t){var r=t.filter(function(t){return!e.includes(t.id)});return S.addToHistory({elements:r,nextId:b}),r}),C.clearSelection()},[C,S,b]),D=Ne(function(e){var t=p.find(function(t){return t.id===e});if(t){var r=ze(ze({},t),{},{id:"element_".concat(b),x:t.x+20,y:t.y+20});m(function(e){var t=[].concat(Se(e),[r]);return S.addToHistory({elements:t,nextId:b+1}),t}),g(function(e){return e+1}),C.selectElement(r.id)}},[p,b,C,S]),M=Ne(function(){var e=C.duplicateSelected(),t=[];e.forEach(function(e){var r=p.find(function(t){return t.id===e});if(r){var n=ze(ze({},r),{},{id:"element_".concat(b+t.length),x:r.x+20,y:r.y+20});t.push(n)}}),t.length>0&&(m(function(e){var r=[].concat(Se(e),t);return S.addToHistory({elements:r,nextId:b+t.length}),r}),g(function(e){return e+t.length}),C.selectAll(t.map(function(e){return e.id})))},[p,b,C,S]),I=Ne(function(){var e=C.selectedElements,t=p.filter(function(t){return e.includes(t.id)});t.length>0&&k.copy({type:"elements",elements:t})},[p,C,k]),H=Ne(function(){k.paste()},[k]),L=Ne(function(){var e=S.undo();e&&(m(e.elements),g(e.nextId),C.clearSelection())},[S,C]),G=Ne(function(){var e=S.redo();e&&(m(e.elements),g(e.nextId),C.clearSelection())},[S,C]),U=Ne(Ee(ge().m(function e(){var t,r,n,o,i,c,s,u,f,m,h,b,g,y,v,x,S,C,z,_,k,T,R,B,N;return ge().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!w.saving){e.n=1;break}return e.a(2);case 1:return E(function(e){return ze(ze({},e),{},{saving:!0})}),t=a&&"0"!==a&&0!==a,r=function(){return Promise.resolve(!0)},e.n=2,r();case 2:n=e.v,e.p=3,m=function(e){for(var t=["domElement","eventListeners","ref","onClick","onMouseDown","onMouseUp","onMouseMove","onContextMenu","onDoubleClick","onDragStart","onDragEnd","onResize","component","render","props","state","context","refs","_reactInternalInstance","_reactInternals","$$typeof","constructor","prototype","_owner","_store","key","ref","_self","_source"],r={},n=0,o=Object.entries(e);n<o.length;n++){var a=ke(o[n],2),i=a[0],l=a[1];if(!t.includes(i)&&!i.startsWith("_")){var c,d,s,u,f,p,m=l;if(["x","y","width","height","fontSize","opacity","lineHeight","letterSpacing","zIndex","borderWidth","borderRadius","rotation","padding","scale","shadowOffsetX","shadowOffsetY","brightness","contrast","saturate","progressValue","lineWidth","spacing"].includes(i)&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m={x:0,y:0,width:100,height:50,fontSize:14,opacity:1,lineHeight:1.2,letterSpacing:0,zIndex:0,borderWidth:0,borderRadius:0,rotation:0,padding:0}[i]||0):m=parseFloat(l)),["color","backgroundColor","borderColor","shadowColor","progressColor","lineColor"].includes(i)&&l&&"transparent"!==l&&!/^#[0-9A-Fa-f]{3,6}$/i.test(l)&&(m={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",gray:"#808080",grey:"#808080",transparent:"transparent"}[l.toLowerCase()]||"#000000"),"fontWeight"===i&&(["normal","bold","100","200","300","400","500","600","700","800","900"].includes(l)||(m="normal")),"textAlign"===i&&(["left","center","right","justify"].includes(l)||(m="left")),"textDecoration"===i&&(["none","underline","overline","line-through"].includes(l)||(m="none")),"textTransform"===i&&(["none","capitalize","uppercase","lowercase"].includes(l)||(m="none")),"borderStyle"===i&&(["solid","dashed","dotted","double","none"].includes(l)||(m="solid")),"text"!==i&&"content"!==i||"string"!=typeof l&&(m=""),"fontFamily"===i&&("string"==typeof l&&""!==l.trim()||(m="Inter, sans-serif")),"fontStyle"===i&&(["normal","italic","oblique"].includes(l)||(m="normal")),"visible"===i&&"boolean"!=typeof l&&(m=!0),"scale"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=100):m=parseFloat(l),m=Math.max(10,Math.min(500,m))),"shadow"===i&&"boolean"!=typeof l&&(m=!1),"shadowColor"===i&&l&&"transparent"!==l&&!/^#[0-9A-Fa-f]{3,6}$/i.test(l)&&(m={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",gray:"#808080",grey:"#808080",transparent:"transparent"}[l.toLowerCase()]||"#000000"),["shadowOffsetX","shadowOffsetY"].includes(i)&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=2):m=parseFloat(l)),"brightness"!==i&&"contrast"!==i&&"saturate"!==i||("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=100):m=parseFloat(l),m=Math.max(0,Math.min(200,m))),"objectFit"===i&&(["fill","contain","cover","none","scale-down"].includes(l)||(m="cover")),["showHeaders","showBorders","showSubtotal","showShipping","showTaxes","showDiscount","showTotal"].includes(i)&&"boolean"!=typeof l&&(m=!1),"dataSource"===i&&(["order_items","cart_items","custom"].includes(l)||(m="order_items")),"progressValue"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=0):m=parseFloat(l),m=Math.max(0,Math.min(100,m))),"lineWidth"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=2):m=parseFloat(l),m=Math.max(1,Math.min(10,m))),"spacing"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(m=8):m=parseFloat(l)),"layout"===i&&(["vertical","horizontal","grid"].includes(l)||(m="vertical")),"alignment"===i&&(["left","center","right","justify"].includes(l)||(m="left")),"fit"===i&&(["contain","cover","fill","none"].includes(l)||(m="contain")),"documentType"===i&&(["invoice","quote","receipt","order"].includes(l)||(m="invoice")),"columns"===i&&(m="object"===xe(l)&&null!==l?{image:null===(c=l.image)||void 0===c||c,name:null===(d=l.name)||void 0===d||d,sku:null!==(s=l.sku)&&void 0!==s&&s,quantity:null===(u=l.quantity)||void 0===u||u,price:null===(f=l.price)||void 0===f||f,total:null===(p=l.total)||void 0===p||p}:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0}),null!=m)if("string"==typeof m||"number"==typeof m||"boolean"==typeof m)r[i]=m;else if(Array.isArray(m))try{var h=m.filter(function(e){return null!=e}).map(function(e){if("object"===xe(e)&&null!==e){for(var t={},r=0,n=Object.entries(e);r<n.length;r++){var o=ke(n[r],2),a=o[0],i=o[1];"string"!=typeof i&&"number"!=typeof i&&"boolean"!=typeof i||(t[a]=i)}return t}return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:null}).filter(function(e){return null!==e});JSON.stringify(h),r[i]=h}catch(e){console.warn("Impossible de sÃ©rialiser le tableau pour ".concat(i,", utilisation tableau vide:"),e),r[i]=[]}else if("object"===xe(m))try{for(var b={},g=0,y=Object.entries(m);g<y.length;g++){var v=ke(y[g],2),x=v[0],w=v[1];x.startsWith("_")||t.includes(x)||"string"!=typeof w&&"number"!=typeof w&&"boolean"!=typeof w||(b[x]=w)}JSON.stringify(b),r[i]=b}catch(e){console.warn("Impossible de sÃ©rialiser l'objet pour ".concat(i,", utilisation objet vide:"),e),r[i]={}}else console.warn("Type non supportÃ© ignorÃ© pour ".concat(i,": ").concat(xe(m)))}}return r},h=[];try{p.forEach(function(e,t){e&&xe(e),e&&e.id,e&&e.type}),h=p.filter(function(e){return e&&"object"===xe(e)&&e.id&&e.type}).map(m).filter(function(e){return e&&e.id&&e.type}),JSON.stringify(h)}catch(e){console.error("âŒ PDF Builder SAVE - Erreur lors du nettoyage des Ã©lÃ©ments:",e),console.error("âŒ PDF Builder SAVE - Ã‰lÃ©ments originaux qui ont causÃ© l'erreur:",p),h=[]}if(b={elements:h,canvasWidth:l,canvasHeight:d,version:"1.0"},e.p=4,g=JSON.stringify(b),(y=JSON.parse(g)).elements&&Array.isArray(y.elements)){e.n=5;break}throw new Error("Structure de donnÃ©es invalide: Ã©lÃ©ments manquants ou incorrects");case 5:v=ve(y.elements),e.p=6,v.s();case 7:if((x=v.n()).done){e.n=9;break}if((S=x.value).id&&S.type){e.n=8;break}throw new Error("Ã‰lÃ©ment invalide dÃ©tectÃ©: ID ou type manquant pour ".concat(JSON.stringify(S)));case 8:e.n=7;break;case 9:e.n=11;break;case 10:e.p=10,R=e.v,v.e(R);case 11:return e.p=11,v.f(),e.f(11);case 12:e.n=14;break;case 13:throw e.p=13,B=e.v,console.error("Erreur de validation JSON cÃ´tÃ© client:",B),console.error("DonnÃ©es templateData qui ont causÃ© l'erreur:",b),new Error("DonnÃ©es JSON invalides cÃ´tÃ© client: "+B.message);case 14:return(C=new FormData).append("action","pdf_builder_pro_save_template"),C.append("template_data",g),C.append("template_name",(null===(o=window.pdfBuilderData)||void 0===o?void 0:o.templateName)||"Template ".concat((null===(i=window.pdfBuilderData)||void 0===i?void 0:i.templateId)||"New")),C.append("template_id",(null===(c=window.pdfBuilderData)||void 0===c?void 0:c.templateId)||"0"),C.append("nonce",(null===(s=window.pdfBuilderAjax)||void 0===s?void 0:s.nonce)||(null===(u=window.pdfBuilderData)||void 0===u?void 0:u.nonce)||""),e.n=15,fetch((null===(f=window.pdfBuilderAjax)||void 0===f?void 0:f.ajaxurl)||"/wp-admin/admin-ajax.php",{method:"POST",body:C});case 15:return z=e.v,e.n=16,z.json();case 16:if((_=e.v).success){e.n=17;break}throw new Error((null===(k=_.data)||void 0===k?void 0:k.message)||"Erreur lors de la sauvegarde");case 17:return t&&(n?toastr.success("Modifications du canvas sauvegardÃ©es avec succÃ¨s !"):alert("Modifications du canvas sauvegardÃ©es avec succÃ¨s !")),e.a(2,b);case 18:throw e.p=18,N=e.v,console.error("âŒ PDF Builder SAVE - Erreur lors de la sauvegarde:",N),console.error("âŒ PDF Builder SAVE - DÃ©tails de l'erreur:",{message:N.message,stack:N.stack,name:N.name}),T=N.message||"Erreur inconnue lors de la sauvegarde",n?toastr.error("Erreur lors de la sauvegarde: ".concat(T)):alert("Erreur lors de la sauvegarde: ".concat(T)),N;case 19:return e.p=19,E(function(e){return ze(ze({},e),{},{saving:!1})}),e.f(19);case 20:return e.a(2)}},e,null,[[6,10,11,12],[4,13],[3,18,19,20]])})),[p,l,d,v,a]),V=(Ne(function(e){e.elements&&(m(e.elements),g(e.nextId||Math.max.apply(Math,Se(e.elements.map(function(e){return parseInt(e.id.split("_")[1])})||[0]))+1),C.clearSelection(),S.clearHistory())},[C,S]),Ne(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=[];r?n.push({label:"Dupliquer",action:function(){return D(r)}},{label:"Supprimer",action:function(){return A(r)}},{type:"separator"},{label:"Copier",action:I},{label:"Coller",action:H,disabled:!k.hasData()}):C.selectedElements.length>0?n.push({label:"Dupliquer",action:M},{label:"Supprimer",action:j},{type:"separator"},{label:"Copier",action:I},{label:"Coller",action:H,disabled:!k.hasData()}):n.push({label:"Coller",action:H,disabled:!k.hasData()}),R.showContextMenu(e,t,n)},[C,R,D,A,I,H,k,M,j])),Z=Ne(function(){var e=C.selectedElements;if(0!==e.length){var t=p.filter(function(t){return e.includes(t.id)});if(0!==t.length){var r=document.querySelector(".canvas-container");if(r){var n=r.getBoundingClientRect(),o=n.width,a=n.height;T.zoomToSelection(t,l,d,o,a)}}}},[C.selectedElements,p,T,l,d]);return Oe(function(){return{elements:p,canvasWidth:l,canvasHeight:d,selection:C,zoom:T,contextMenu:R,dragAndDrop:W,addElement:F,updateElement:B,deleteElement:A,deleteSelectedElements:j,duplicateElement:D,duplicateSelectedElements:M,copySelectedElements:I,pasteElements:H,undo:L,redo:G,canUndo:S.canUndo(),canRedo:S.canRedo(),history:S,zoomToSelection:Z,saveTemplate:U,loadingStates:w,isSaving:w.saving,showContextMenu:V,getAllElements:Ne(function(){return p},[p]),getElementById:Ne(function(e){return p.find(function(t){return t.id===e})},[p])}},[p,l,d,C,T,R,W,F,B,A,j,D,M,I,H,L,G,S,V,Z,U])},De=n().useEffect,Me=function(e){var t=e.onDelete,r=e.onCopy,n=e.onPaste,o=e.onUndo,a=e.onRedo,i=e.onSave,l=e.onZoomIn,c=e.onZoomOut,d=e.onSelectAll,s=e.onDeselectAll,u=e.onToolSelect,f=e.onToggleGrid,p=e.onTogglePreview;De(function(){var e=function(e){if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"true"!==e.target.contentEditable){var m=e.ctrlKey||e.metaKey;switch(e.key.toLowerCase()){case"delete":case"backspace":t&&(e.preventDefault(),t());break;case"c":m&&r&&(e.preventDefault(),r());break;case"v":m&&n&&(e.preventDefault(),n());break;case"z":m&&(e.preventDefault(),e.shiftKey&&a?a():o&&o());break;case"y":m&&a&&(e.preventDefault(),a());break;case"s":m&&i&&(e.preventDefault(),i());break;case"+":case"=":m&&l&&(e.preventDefault(),l());break;case"-":m&&c&&(e.preventDefault(),c());break;case"a":m&&d&&(e.preventDefault(),d());break;case"d":m&&s&&(e.preventDefault(),s());break;case"g":m&&f&&(e.preventDefault(),f());break;case"p":m&&p&&(e.preventDefault(),p());break;case"v":!m&&u&&(e.preventDefault(),u("select"));break;case"r":!m&&u&&(e.preventDefault(),u("rectangle"));break;case"t":!m&&u&&(e.preventDefault(),u("text"));break;case"i":!m&&u&&(e.preventDefault(),u("image"));break;case"l":!m&&u&&(e.preventDefault(),u("line"))}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[t,r,n,o,a,i,l,c,d,s,u,f,p])};function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function He(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return Le(d,"_invoke",function(r,n,o){var a,l,c,d=0,s=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,n){for(l=r,c=n,t=0;!u&&d&&!o&&t<s.length;t++){var o,a=s[t],p=f.p,m=a[2];r>3?(o=m===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,n}return function(o,s,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,m),l=s,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(r,o,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(Le(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,Le(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,Le(u,"constructor",d),Le(d,"constructor",c),c.displayName="GeneratorFunction",Le(d,o,"GeneratorFunction"),Le(u),Le(u,o,"Generator"),Le(u,n,function(){return this}),Le(u,"toString",function(){return"[object Generator]"}),(He=function(){return{w:a,m:f}})()}function Le(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Le=function(e,t,r,n){function a(t,r){Le(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},Le(e,t,r,n)}function Ge(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach(function(t){Ve(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ve(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ie(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Xe=n().useState,Ye=n().useEffect,Je=function(){var e,t,r=(e=Xe({defaultCanvasWidth:210,defaultCanvasHeight:297,defaultCanvasUnit:"mm",defaultOrientation:"portrait",canvasBackgroundColor:"#ffffff",canvasShowTransparency:!1,containerBackgroundColor:"#f8f9fa",containerShowTransparency:!1,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,showMargins:!0,showGrid:!0,gridSize:10,gridColor:"#e0e0e0",gridOpacity:30,snapToGrid:!0,snapToElements:!0,snapToMargins:!0,snapTolerance:5,showGuides:!0,lockGuides:!1,defaultZoom:"100",minZoom:10,maxZoom:500,zoomStep:25,panWithMouse:!0,smoothZoom:!0,showZoomIndicator:!0,zoomWithWheel:!1,zoomToSelection:!0,showResizeHandles:!0,handleSize:8,handleColor:"#007cba",enableRotation:!0,rotationStep:15,rotationSnap:!0,multiSelect:!0,selectAllShortcut:!0,showSelectionBounds:!0,copyPasteEnabled:!0,duplicateOnDrag:!1,exportQuality:"print",exportFormat:"pdf",compressImages:!0,imageQuality:85,maxImageSize:2048,includeMetadata:!0,pdfAuthor:"",pdfSubject:"",autoCrop:!1,embedFonts:!0,optimizeForWeb:!0,enableHardwareAcceleration:!0,limitFps:!0,maxFps:60,autoSaveEnabled:!0,autoSaveInterval:30,autoSaveVersions:10,undoLevels:50,redoLevels:50,enableKeyboardShortcuts:!0,debugMode:!1,showFps:!1,resizeHandleSize:12,resizeHandleColor:"#007cba",resizeHandleBorderColor:"#ffffff",resizeHandleOffset:-6,selectionBorderWidth:2,selectionBorderColor:"var(--primary-color)",selectionShadowOpacity:.1,selectionBorderSpacing:2,resizeZoneSize:16,resizeZoneOpacity:.1,showResizeHandlesLegacy:!0,showResizeZones:!0,selectionAnimation:!0,defaultTextColor:"#000000",defaultBackgroundColor:"#ffffff",defaultFontSize:14,ajaxurl:window.ajaxurl||"",nonce:window.pdfBuilderNonce||""}),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],o=r[1],a=function(){return window.pdfBuilderCanvasSettings?window.pdfBuilderCanvasSettings:null},i=function(){return window.pdfBuilderAjax?{ajaxurl:window.pdfBuilderAjax.ajaxurl||"",nonce:window.pdfBuilderAjax.nonce||""}:{ajaxurl:window.ajaxurl||"",nonce:window.pdfBuilderNonce||window.pdf_builder_nonce||""}};Ye(function(){var e=a(),t=i();if(e)o(function(r){return Ue(Ue(Ue({},r),t),{},{defaultCanvasWidth:e.default_canvas_width||r.defaultCanvasWidth,defaultCanvasHeight:e.default_canvas_height||r.defaultCanvasHeight,defaultCanvasUnit:e.default_canvas_unit||r.defaultCanvasUnit,defaultOrientation:e.default_orientation||r.defaultOrientation,canvasBackgroundColor:e.canvas_background_color||r.canvasBackgroundColor,canvasShowTransparency:void 0!==e.canvas_show_transparency?e.canvas_show_transparency:r.canvasShowTransparency,containerBackgroundColor:e.container_background_color||r.containerBackgroundColor,containerShowTransparency:void 0!==e.container_show_transparency?e.container_show_transparency:r.containerShowTransparency,marginTop:e.margin_top||r.marginTop,marginRight:e.margin_right||r.marginRight,marginBottom:e.margin_bottom||r.marginBottom,marginLeft:e.margin_left||r.marginLeft,showMargins:void 0!==e.show_margins?e.show_margins:r.showMargins,showGrid:void 0!==e.show_grid?e.show_grid:r.showGrid,gridSize:e.grid_size||r.gridSize,gridColor:e.grid_color||r.gridColor,gridOpacity:e.grid_opacity||r.gridOpacity,snapToGrid:void 0!==e.snap_to_grid?e.snap_to_grid:r.snapToGrid,snapToElements:void 0!==e.snap_to_elements?e.snap_to_elements:r.snapToElements,snapToMargins:void 0!==e.snap_to_margins?e.snap_to_margins:r.snapToMargins,snapTolerance:e.snap_tolerance||r.snapTolerance,showGuides:void 0!==e.show_guides?e.show_guides:r.showGuides,lockGuides:void 0!==e.lock_guides?e.lock_guides:r.lockGuides,defaultZoom:e.default_zoom||r.defaultZoom,minZoom:e.min_zoom||r.minZoom,maxZoom:e.max_zoom||r.maxZoom,zoomStep:e.zoom_step||r.zoomStep,panWithMouse:void 0!==e.pan_with_mouse?e.pan_with_mouse:r.panWithMouse,smoothZoom:void 0!==e.smooth_zoom?e.smooth_zoom:r.smoothZoom,showZoomIndicator:void 0!==e.show_zoom_indicator?e.show_zoom_indicator:r.showZoomIndicator,zoomWithWheel:void 0!==e.zoom_with_wheel?e.zoom_with_wheel:r.zoomWithWheel,zoomToSelection:void 0!==e.zoom_to_selection?e.zoom_to_selection:r.zoomToSelection,showResizeHandles:!0,handleSize:e.handle_size||r.handleSize,handleColor:e.handle_color||r.handleColor,enableRotation:void 0!==e.enable_rotation?e.enable_rotation:r.enableRotation,rotationStep:e.rotation_step||r.rotationStep,rotationSnap:void 0!==e.rotation_snap?e.rotation_snap:r.rotationSnap,multiSelect:void 0!==e.multi_select?e.multi_select:r.multiSelect,selectAllShortcut:void 0!==e.select_all_shortcut?e.select_all_shortcut:r.selectAllShortcut,showSelectionBounds:void 0!==e.show_selection_bounds?e.show_selection_bounds:r.showSelectionBounds,copyPasteEnabled:void 0!==e.copy_paste_enabled?e.copy_paste_enabled:r.copyPasteEnabled,duplicateOnDrag:void 0!==e.duplicate_on_drag?e.duplicate_on_drag:r.duplicateOnDrag,exportQuality:e.export_quality||r.exportQuality,exportFormat:e.export_format||r.exportFormat,compressImages:void 0!==e.compress_images?e.compress_images:r.compressImages,imageQuality:e.image_quality||r.imageQuality,maxImageSize:e.max_image_size||r.maxImageSize,includeMetadata:void 0!==e.include_metadata?e.include_metadata:r.includeMetadata,pdfAuthor:e.pdf_author||r.pdfAuthor,pdfSubject:e.pdf_subject||r.pdfSubject,autoCrop:void 0!==e.auto_crop?e.auto_crop:r.autoCrop,embedFonts:void 0!==e.embed_fonts?e.embed_fonts:r.embedFonts,optimizeForWeb:void 0!==e.optimize_for_web?e.optimize_for_web:r.optimizeForWeb,enableHardwareAcceleration:void 0!==e.enable_hardware_acceleration?e.enable_hardware_acceleration:r.enableHardwareAcceleration,limitFps:void 0!==e.limit_fps?e.limit_fps:r.limitFps,maxFps:e.max_fps||r.maxFps,autoSaveEnabled:void 0!==e.auto_save_enabled?e.auto_save_enabled:r.autoSaveEnabled,autoSaveInterval:e.auto_save_interval||r.autoSaveInterval,autoSaveVersions:e.auto_save_versions||r.autoSaveVersions,undoLevels:e.undo_levels||r.undoLevels,redoLevels:e.redo_levels||r.redoLevels,enableKeyboardShortcuts:void 0!==e.enable_keyboard_shortcuts?e.enable_keyboard_shortcuts:r.enableKeyboardShortcuts,debugMode:void 0!==e.debug_mode?e.debug_mode:r.debugMode,showFps:void 0!==e.show_fps?e.show_fps:r.showFps,resizeHandleSize:e.canvas_handle_size||r.resizeHandleSize,resizeHandleColor:e.canvas_handle_color||r.resizeHandleColor,resizeHandleBorderColor:e.canvas_handle_hover_color||r.resizeHandleBorderColor,selectionBorderWidth:e.canvas_border_width||r.selectionBorderWidth,selectionBorderColor:e.canvas_border_color||r.selectionBorderColor,selectionBorderSpacing:e.canvas_border_spacing||r.selectionBorderSpacing,showResizeHandlesLegacy:void 0!==e.canvas_resize_handles_enabled?e.canvas_resize_handles_enabled:r.showResizeHandlesLegacy,showResizeZones:void 0!==e.canvas_element_borders_enabled?e.canvas_element_borders_enabled:r.showResizeZones,defaultTextColor:e.default_text_color||r.defaultTextColor,defaultBackgroundColor:e.default_background_color||r.defaultBackgroundColor,defaultFontSize:e.default_font_size||r.defaultFontSize})});else{var r=i(),n=localStorage.getItem("pdf-builder-global-settings");if(n)try{var l=JSON.parse(n);l.showResizeHandles=!0,o(function(e){return Ue(Ue(Ue({},e),r),l)})}catch(e){o(function(e){return Ue(Ue({},e),r)})}else o(function(e){return Ue(Ue({},e),r)})}},[]),Ye(function(){var e=function(e){c()};return window.addEventListener("pdfBuilderSettingsUpdated",e),function(){window.removeEventListener("pdfBuilderSettingsUpdated",e)}},[]),Ye(function(){var e=document.documentElement;e.style.setProperty("--resize-handle-size","".concat(n.resizeHandleSize,"px")),e.style.setProperty("--resize-handle-color",n.resizeHandleColor),e.style.setProperty("--resize-handle-border-color",n.resizeHandleBorderColor),e.style.setProperty("--resize-handle-offset","".concat(n.resizeHandleOffset,"px")),e.style.setProperty("--selection-border-width","".concat(n.selectionBorderWidth,"px")),e.style.setProperty("--selection-border-color",n.selectionBorderColor),e.style.setProperty("--selection-border-spacing","".concat(n.selectionBorderSpacing,"px")),e.style.setProperty("--selection-shadow-opacity",n.selectionShadowOpacity),e.style.setProperty("--resize-zone-size","".concat(n.resizeZoneSize,"px")),e.style.setProperty("--resize-zone-opacity",n.resizeZoneOpacity),e.style.setProperty("--show-resize-handles",n.showResizeHandles?"block":"none"),e.style.setProperty("--show-resize-zones",n.showResizeZones?"auto":"none"),e.style.setProperty("--selection-animation",n.selectionAnimation?"all 0.2s ease":"none")},[n]);var l=function(){var e,t=(e=He().m(function e(t){return He().w(function(e){for(;;)switch(e.n){case 0:o(function(e){var r=Ue(Ue({},e),t);r.showResizeHandles=!0,localStorage.setItem("pdf-builder-global-settings",JSON.stringify(r));var n=i();if(n.ajaxurl&&n.nonce){var o={show_grid:r.showGrid,grid_size:r.gridSize,grid_color:r.gridColor,grid_opacity:r.gridOpacity,snap_to_grid:r.snapToGrid,snap_to_elements:r.snapToElements,snap_to_margins:r.snapToMargins,snap_tolerance:r.snapTolerance,show_guides:r.showGuides,lock_guides:r.lockGuides,default_zoom:r.defaultZoom,min_zoom:r.minZoom,max_zoom:r.maxZoom,zoom_step:r.zoomStep,pan_with_mouse:r.panWithMouse,smooth_zoom:r.smoothZoom,show_zoom_indicator:r.showZoomIndicator,zoom_with_wheel:r.zoomWithWheel,zoom_to_selection:r.zoomToSelection,show_resize_handles:r.showResizeHandles,handle_size:r.handleSize,handle_color:r.handleColor,enable_rotation:r.enableRotation,rotation_step:r.rotationStep,rotation_snap:r.rotationSnap,multi_select:r.multiSelect,select_all_shortcut:r.selectAllShortcut,show_selection_bounds:r.showSelectionBounds,copy_paste_enabled:r.copyPasteEnabled,duplicate_on_drag:r.duplicateOnDrag,export_quality:r.exportQuality,export_format:r.exportFormat,compress_images:r.compressImages,image_quality:r.imageQuality,max_image_size:r.maxImageSize,include_metadata:r.includeMetadata,pdf_author:r.pdfAuthor,pdf_subject:r.pdfSubject,auto_crop:r.autoCrop,embed_fonts:r.embedFonts,optimize_for_web:r.optimizeForWeb,enable_hardware_acceleration:r.enableHardwareAcceleration,limit_fps:r.limitFps,max_fps:r.maxFps,auto_save_enabled:r.autoSaveEnabled,auto_save_interval:r.autoSaveInterval,auto_save_versions:r.autoSaveVersions,undo_levels:r.undoLevels,redo_levels:r.redoLevels,enable_keyboard_shortcuts:r.enableKeyboardShortcuts,debug_mode:r.debugMode,show_fps:r.showFps,default_canvas_width:r.defaultCanvasWidth,default_canvas_height:r.defaultCanvasHeight,default_canvas_unit:r.defaultCanvasUnit,canvas_background_color:r.canvasBackgroundColor,canvas_show_transparency:r.canvasShowTransparency,margin_top:r.marginTop,margin_right:r.marginRight,margin_bottom:r.marginBottom,margin_left:r.marginLeft,show_margins:r.showMargins};fetch(n.ajaxurl+"?action=pdf_builder_save_settings_page",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(Ue(Ue({},o),{},{nonce:n.nonce}))}).then(function(e){e.ok||console.warn("Erreur lors de la sauvegarde des paramÃ¨tres dans WordPress:",e.status)}).catch(function(e){console.warn("Erreur AJAX lors de la sauvegarde des paramÃ¨tres:",e)})}return r});case 1:return e.a(2)}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){Ge(a,n,o,i,l,"next",e)}function l(e){Ge(a,n,o,i,l,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}(),c=function(){var e=a(),t=i();e&&o(function(r){return Ue(Ue(Ue({},r),t),{},{defaultCanvasWidth:e.default_canvas_width||r.defaultCanvasWidth,defaultCanvasHeight:e.default_canvas_height||r.defaultCanvasHeight,defaultCanvasUnit:e.default_canvas_unit||r.defaultCanvasUnit,defaultOrientation:e.default_orientation||r.defaultOrientation,canvasBackgroundColor:e.canvas_background_color||r.canvasBackgroundColor,canvasShowTransparency:void 0!==e.canvas_show_transparency?e.canvas_show_transparency:r.canvasShowTransparency,containerBackgroundColor:e.container_background_color||r.containerBackgroundColor,containerShowTransparency:void 0!==e.container_show_transparency?e.container_show_transparency:r.containerShowTransparency,marginTop:e.margin_top||r.marginTop,marginRight:e.margin_right||r.marginRight,marginBottom:e.margin_bottom||r.marginBottom,marginLeft:e.margin_left||r.marginLeft,showMargins:void 0!==e.show_margins?e.show_margins:r.showMargins,showGrid:void 0!==e.show_grid?e.show_grid:r.showGrid,gridSize:e.grid_size||r.gridSize,gridColor:e.grid_color||r.gridColor,gridOpacity:e.grid_opacity||r.gridOpacity,snapToGrid:void 0!==e.snap_to_grid?e.snap_to_grid:r.snapToGrid,snapToElements:void 0!==e.snap_to_elements?e.snap_to_elements:r.snapToElements,snapToMargins:void 0!==e.snap_to_margins?e.snap_to_margins:r.snapToMargins,snapTolerance:e.snap_tolerance||r.snapTolerance,showGuides:void 0!==e.show_guides?e.show_guides:r.showGuides,lockGuides:void 0!==e.lock_guides?e.lock_guides:r.lockGuides,defaultZoom:e.default_zoom||r.defaultZoom,minZoom:e.min_zoom||r.minZoom,maxZoom:e.max_zoom||r.maxZoom,zoomStep:e.zoom_step||r.zoomStep,panWithMouse:void 0!==e.pan_with_mouse?e.pan_with_mouse:r.panWithMouse,smoothZoom:void 0!==e.smooth_zoom?e.smooth_zoom:r.smoothZoom,showZoomIndicator:void 0!==e.show_zoom_indicator?e.show_zoom_indicator:r.showZoomIndicator,zoomWithWheel:void 0!==e.zoom_with_wheel?e.zoom_with_wheel:r.zoomWithWheel,zoomToSelection:void 0!==e.zoom_to_selection?e.zoom_to_selection:r.zoomToSelection,showResizeHandles:!0,handleSize:e.handle_size||r.handleSize,handleColor:e.handle_color||r.handleColor,enableRotation:void 0!==e.enable_rotation?e.enable_rotation:r.enableRotation,rotationStep:e.rotation_step||r.rotationStep,rotationSnap:void 0!==e.rotation_snap?e.rotation_snap:r.rotationSnap,multiSelect:void 0!==e.multi_select?e.multi_select:r.multiSelect,selectAllShortcut:void 0!==e.select_all_shortcut?e.select_all_shortcut:r.selectAllShortcut,showSelectionBounds:void 0!==e.show_selection_bounds?e.show_selection_bounds:r.showSelectionBounds,copyPasteEnabled:void 0!==e.copy_paste_enabled?e.copy_paste_enabled:r.copyPasteEnabled,duplicateOnDrag:void 0!==e.duplicate_on_drag?e.duplicate_on_drag:r.duplicateOnDrag,exportQuality:e.export_quality||r.exportQuality,exportFormat:e.export_format||r.exportFormat,compressImages:void 0!==e.compress_images?e.compress_images:r.compressImages,imageQuality:e.image_quality||r.imageQuality,maxImageSize:e.max_image_size||r.maxImageSize,includeMetadata:void 0!==e.include_metadata?e.include_metadata:r.includeMetadata,pdfAuthor:e.pdf_author||r.pdfAuthor,pdfSubject:e.pdf_subject||r.pdfSubject,autoCrop:void 0!==e.auto_crop?e.auto_crop:r.autoCrop,embedFonts:void 0!==e.embed_fonts?e.embed_fonts:r.embedFonts,optimizeForWeb:void 0!==e.optimize_for_web?e.optimize_for_web:r.optimizeForWeb,enableHardwareAcceleration:void 0!==e.enable_hardware_acceleration?e.enable_hardware_acceleration:r.enableHardwareAcceleration,limitFps:void 0!==e.limit_fps?e.limit_fps:r.limitFps,maxFps:e.max_fps||r.maxFps,autoSaveEnabled:void 0!==e.auto_save_enabled?e.auto_save_enabled:r.autoSaveEnabled,autoSaveInterval:e.auto_save_interval||r.autoSaveInterval,autoSaveVersions:e.auto_save_versions||r.autoSaveVersions,undoLevels:e.undo_levels||r.undoLevels,redoLevels:e.redo_levels||r.redoLevels,enableKeyboardShortcuts:void 0!==e.enable_keyboard_shortcuts?e.enable_keyboard_shortcuts:r.enableKeyboardShortcuts,debugMode:void 0!==e.debug_mode?e.debug_mode:r.debugMode,showFps:void 0!==e.show_fps?e.show_fps:r.showFps,resizeHandleSize:e.canvas_handle_size||r.resizeHandleSize,resizeHandleColor:e.canvas_handle_color||r.resizeHandleColor,resizeHandleBorderColor:e.canvas_handle_hover_color||r.resizeHandleBorderColor,selectionBorderWidth:e.canvas_border_width||r.selectionBorderWidth,selectionBorderColor:e.canvas_border_color||r.selectionBorderColor,selectionBorderSpacing:e.canvas_border_spacing||r.selectionBorderSpacing,showResizeHandlesLegacy:void 0!==e.canvas_resize_handles_enabled?e.canvas_resize_handles_enabled:r.showResizeHandlesLegacy,showResizeZones:void 0!==e.canvas_element_borders_enabled?e.canvas_element_borders_enabled:r.showResizeZones,defaultTextColor:e.default_text_color||r.defaultTextColor,defaultBackgroundColor:e.default_background_color||r.defaultBackgroundColor,defaultFontSize:e.default_font_size||r.defaultFontSize})})};return{settings:n,updateSettings:l,resetToDefaults:function(){o({resizeHandleSize:12,resizeHandleColor:"#007cba",resizeHandleBorderColor:"#ffffff",selectionBorderWidth:2,selectionBorderColor:"var(--primary-color)",selectionBorderSpacing:2,selectionShadowOpacity:.1,resizeZoneSize:16,resizeZoneOpacity:.1,showResizeHandles:!0,showResizeZones:!0,selectionAnimation:!0})},refreshSettings:c}};function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Qe=n().useState,$e=n().useEffect,et=n().useRef,tt=function(e){var t,r,o=e.showFps,a=(t=Qe(0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Ke(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ke(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1],c=et(0),d=et(performance.now()),s=et(null);return $e(function(){if(o){var e=function(){var t=performance.now();c.current++,t-d.current>=1e3&&(l(Math.round(1e3*c.current/(t-d.current))),c.current=0,d.current=t),s.current=requestAnimationFrame(e)};return s.current=requestAnimationFrame(e),function(){s.current&&cancelAnimationFrame(s.current)}}},[o]),o?n().createElement("div",{style:{position:"fixed",top:"10px",right:"10px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#00ff00",padding:"5px 10px",borderRadius:"4px",fontFamily:"monospace",fontSize:"12px",fontWeight:"bold",zIndex:9999,pointerEvents:"none",userSelect:"none"}},"FPS: ",i):null},rt=n().useEffect,nt=n().useRef,ot=function(e){return{Copier:"Ctrl+C",Coller:"Ctrl+V",Dupliquer:"Ctrl+D",Supprimer:"Del",Annuler:"Ctrl+Z",RÃ©tablir:"Ctrl+Y","Tout sÃ©lectionner":"Ctrl+A",DÃ©sÃ©lectionner:"Esc"}[e]};const at=function(e){var t=e.menu,r=e.onAction,o=e.isAnimating,a=void 0!==o&&o,i=e.onClose,l=nt(null);return rt(function(){var e=function(e){l.current&&!l.current.contains(e.target)&&i&&i()};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[i]),t?n().createElement("div",{ref:l,className:"context-menu",style:{position:"fixed",left:t.x,top:t.y,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"6px",boxShadow:"0 8px 24px rgba(0,0,0,0.12), 0 2px 8px rgba(0,0,0,0.08)",zIndex:1e3,minWidth:"200px",padding:"4px 0",animation:a?"contextMenuFadeOut 0.15s cubic-bezier(0.4, 0, 1, 1)":"contextMenuFadeIn 0.15s cubic-bezier(0.16, 1, 0.3, 1)",transformOrigin:"top left"}},t.items.map(function(e,t){return n().createElement("div",{key:t},"separator"===e.type?n().createElement("div",{style:{height:"1px",backgroundColor:"#f8f9fa",margin:"4px 0"}}):n().createElement("button",{className:"context-menu-item",onClick:function(){return function(e){e.action&&"function"==typeof e.action?e.action():r&&r(e.action)}(e)},disabled:e.disabled,style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"10px 16px",border:"none",backgroundColor:"transparent",cursor:e.disabled?"not-allowed":"pointer",fontSize:"14px",textAlign:"left",borderRadius:"0",opacity:e.disabled?.5:1,transition:"background-color 0.15s ease, color 0.15s ease"},onMouseEnter:function(t){e.disabled||(t.target.style.backgroundColor="#f8f9fa",t.target.style.color="#1e293b")},onMouseLeave:function(t){e.disabled||(t.target.style.backgroundColor="transparent",t.target.style.color="inherit")}},n().createElement("div",{style:{display:"flex",alignItems:"center"}},n().createElement("span",{style:{marginRight:"8px"}},e.icon||({Dupliquer:"ðŸ“‹",Supprimer:"ðŸ—‘ï¸",Copier:"[C]",Coller:"[V]",Annuler:"â†¶",RÃ©tablir:"â†·","Tout sÃ©lectionner":"â˜‘ï¸",DÃ©sÃ©lectionner:"â˜"}[e.label]||"â€¢")),e.label),ot(e.label)&&n().createElement("span",{style:{fontSize:"12px",color:"#666",marginLeft:"16px"}},ot(e.label))))})):null};function it(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return lt(d,"_invoke",function(r,n,o){var a,l,c,d=0,s=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,n){for(l=r,c=n,t=0;!u&&d&&!o&&t<s.length;t++){var o,a=s[t],p=f.p,m=a[2];r>3?(o=m===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,n}return function(o,s,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,m),l=s,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(r,o,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(lt(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,lt(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,lt(u,"constructor",d),lt(d,"constructor",c),c.displayName="GeneratorFunction",lt(d,o,"GeneratorFunction"),lt(u),lt(u,o,"Generator"),lt(u,n,function(){return this}),lt(u,"toString",function(){return"[object Generator]"}),(it=function(){return{w:a,m:f}})()}function lt(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}lt=function(e,t,r,n){function a(t,r){lt(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},lt(e,t,r,n)}function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach(function(t){ft(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function st(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function ut(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){st(a,n,o,i,l,"next",e)}function l(e){st(a,n,o,i,l,"throw",e)}i(void 0)})}}function ft(e,t,r){return(t=function(e){var t=function(e){if("object"!=pt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ht(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var bt=n().useState,gt=n().useEffect,yt=n().useCallback;const vt=function(e){var t=e.isOpen,r=e.onClose,o=e.elements,a=void 0===o?[]:o,i=e.canvasWidth,l=void 0===i?595:i,c=e.canvasHeight,d=void 0===c?842:c,s=e.zoom,u=void 0===s?1:s,f=e.ajaxurl,p=(e.pdfBuilderNonce,e.onOpenPDFModal),m=void 0===p?null:p,h=e.useServerPreview,b=void 0!==h&&h,g=mt(bt(null),2),y=g[0],v=g[1],x=mt(bt(!1),2),w=x[0],E=x[1],S=mt(bt(null),2),C=S[0],z=S[1],_=function(e){try{var t=function(e){if(!Array.isArray(e))throw new Error("Les Ã©lÃ©ments doivent Ãªtre un tableau");return e.map(function(e){if(!e||"object"!==pt(e))throw new Error("Chaque Ã©lÃ©ment doit Ãªtre un objet valide");var t=JSON.parse(JSON.stringify(e));if(["x","y","width","height","fontSize","padding","zIndex","borderWidth"].forEach(function(e){if(void 0!==t[e]){var r=parseFloat(t[e]);if(isNaN(r))throw new Error("PropriÃ©tÃ© ".concat(e," doit Ãªtre un nombre valide"));t[e]=r}}),"string"!=typeof t.type)throw new Error("Chaque Ã©lÃ©ment doit avoir un type string");return delete t.tempId,delete t.isDragging,delete t.isResizing,t})}(e),r=JSON.stringify(t);if(JSON.parse(r),r.length>1e7)throw new Error("JSON trop volumineux");return{success:!0,jsonString:r,cleanedElements:t}}catch(e){return console.error("Client-side validation failed:",e),{success:!1,error:e.message}}},k=yt(function(e){if(!e||0===e.length)return n().createElement("div",{style:{padding:"20px",textAlign:"center",color:"#666"}},"Aucun Ã©lÃ©ment Ã  afficher");var t="number"==typeof u&&!isNaN(u)&&u>0?u:1;return n().createElement("div",{style:{position:"relative",width:l*t,height:d*t,backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"4px",overflow:"hidden",margin:"0 auto"}},e.map(function(e,r){if("number"!=typeof e.x||"number"!=typeof e.y||"number"!=typeof e.width||"number"!=typeof e.height)return console.error("âŒ Element missing required properties:",e),null;var o=e.padding||0,a={position:"absolute",left:(e.x+o)*t,top:(e.y+o)*t,width:Math.max(1,e.width-2*o)*t,height:Math.max(1,e.height-2*o)*t,zIndex:e.zIndex||r+1};return n().createElement("div",{key:r,style:a},T(e,t))}))},[u,l,d]),T=yt(function(e,t){switch(e.type){case"text":return n().createElement("div",{style:{width:"100%",height:"100%",fontSize:(e.fontSize||16)*t,color:e.color||"#000000",fontWeight:"bold"===e.fontWeight?"bold":"normal",fontStyle:"italic"===e.fontStyle?"italic":"normal",textDecoration:e.textDecoration||"none",textAlign:e.textAlign||"left",lineHeight:e.lineHeight||"1.2",whiteSpace:"pre-wrap",overflow:"hidden",padding:"".concat(4*t,"px"),boxSizing:"border-box"}},e.content||e.text||"Texte");case"rectangle":return n().createElement("div",{style:{width:"100%",height:"100%",backgroundColor:e.fillColor||"transparent",border:e.borderWidth?"".concat(e.borderWidth*t,"px ").concat(e.borderStyle||"solid"," ").concat(e.borderColor||"#000000"):"none",borderRadius:(e.borderRadius||0)*t}});case"image":return n().createElement("img",{src:e.src||e.imageUrl||"",alt:e.alt||"Image",style:{width:"100%",height:"100%",objectFit:e.objectFit||"cover",borderRadius:(e.borderRadius||0)*t},onError:function(e){e.target.style.display="none"}});case"line":return n().createElement("div",{style:ft({width:"100%",height:(e.height||e.strokeWidth||1)*t,borderTop:"".concat((e.strokeWidth||1)*t,"px solid ").concat(e.strokeColor||"#000000")},"height",0)});case"divider":return n().createElement("div",{style:ft(ft(ft({width:"100%",height:"100%",backgroundColor:e.color||e.fillColor||"#cccccc"},"height","".concat((e.thickness||e.height||2)*t,"px")),"margin","".concat((e.margin||10)*t,"px 0")),"borderRadius",(e.borderRadius||0)*t)});case"product_table":var r=function(){var e={default:{headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#f1f5f9",altRowBg:"#fafbfc",borderWidth:1,headerTextColor:"#334155",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderRadius:"4px"},classic:{headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#334155",altRowBg:"#ffffff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e293b",headerFontWeight:"700",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(0, 0, 0, 0.15)",borderRadius:"0px"},striped:{headerBg:"#3b82f6",headerBorder:"#2563eb",rowBorder:"#e2e8f0",altRowBg:"#f8fafc",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 4px rgba(59, 130, 246, 0.2)",borderRadius:"6px"},bordered:{headerBg:"#ffffff",headerBorder:"#374151",rowBorder:"#d1d5db",altRowBg:"#ffffff",borderWidth:2,headerTextColor:"#111827",rowTextColor:"#111827",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 12px rgba(0, 0, 0, 0.1), inset 0 0 0 1px #e5e7eb",borderRadius:"8px"},minimal:{headerBg:"#ffffff",headerBorder:"#d1d5db",rowBorder:"#f3f4f6",altRowBg:"#ffffff",borderWidth:.5,headerTextColor:"#6b7280",rowTextColor:"#6b7280",headerFontWeight:"500",headerFontSize:"10px",rowFontSize:"9px",shadow:"none",borderRadius:"0px"},modern:{gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",headerBorder:"#5b21b6",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#6b21a8",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 20px rgba(102, 126, 234, 0.25)",borderRadius:"8px"},blue_ocean:{gradient:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e3a8a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(59, 130, 246, 0.3)",borderRadius:"6px"},emerald_forest:{gradient:"linear-gradient(135deg, #064e3b 0%, #10b981 100%)",headerBorder:"#065f46",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#064e3b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(16, 185, 129, 0.3)",borderRadius:"6px"},sunset_orange:{gradient:"linear-gradient(135deg, #9a3412 0%, #f97316 100%)",headerBorder:"#c2410c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(249, 115, 22, 0.3)",borderRadius:"6px"},royal_purple:{gradient:"linear-gradient(135deg, #581c87 0%, #a855f7 100%)",headerBorder:"#7c3aed",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#581c87",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(168, 85, 247, 0.3)",borderRadius:"6px"},rose_pink:{gradient:"linear-gradient(135deg, #be185d 0%, #f472b6 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#be185d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(244, 114, 182, 0.3)",borderRadius:"6px"},teal_aqua:{gradient:"linear-gradient(135deg, #0f766e 0%, #14b8a6 100%)",headerBorder:"#0d9488",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#0f766e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(20, 184, 166, 0.3)",borderRadius:"6px"},crimson_red:{gradient:"linear-gradient(135deg, #991b1b 0%, #ef4444 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#991b1b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(239, 68, 68, 0.3)",borderRadius:"6px"},amber_gold:{gradient:"linear-gradient(135deg, #92400e 0%, #f59e0b 100%)",headerBorder:"#d97706",rowBorder:"#fef3c7",altRowBg:"#fffbeb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#92400e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(245, 158, 11, 0.3)",borderRadius:"6px"},indigo_night:{gradient:"linear-gradient(135deg, #312e81 0%, #6366f1 100%)",headerBorder:"#4338ca",rowBorder:"#e0e7ff",altRowBg:"#eef2ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#312e81",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(99, 102, 241, 0.3)",borderRadius:"6px"},slate_gray:{gradient:"linear-gradient(135deg, #374151 0%, #6b7280 100%)",headerBorder:"#4b5563",rowBorder:"#f3f4f6",altRowBg:"#f9fafb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(107, 114, 128, 0.3)",borderRadius:"6px"},coral_sunset:{gradient:"linear-gradient(135deg, #c2410c 0%, #fb7185 100%)",headerBorder:"#ea580c",rowBorder:"#fed7d7",altRowBg:"#fef7f7",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#c2410c",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 113, 133, 0.3)",borderRadius:"6px"},mint_green:{gradient:"linear-gradient(135deg, #065f46 0%, #34d399 100%)",headerBorder:"#047857",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#065f46",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(52, 211, 153, 0.3)",borderRadius:"6px"},violet_dream:{gradient:"linear-gradient(135deg, #6d28d9 0%, #c084fc 100%)",headerBorder:"#8b5cf6",rowBorder:"#ede9fe",altRowBg:"#f5f3ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#6d28d9",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(192, 132, 252, 0.3)",borderRadius:"6px"},sky_blue:{gradient:"linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%)",headerBorder:"#0284c7",rowBorder:"#bae6fd",altRowBg:"#f0f9ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#0369a1",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(14, 165, 233, 0.3)",borderRadius:"6px"},forest_green:{gradient:"linear-gradient(135deg, #14532d 0%, #22c55e 100%)",headerBorder:"#15803d",rowBorder:"#bbf7d0",altRowBg:"#f0fdf4",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#14532d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(34, 197, 94, 0.3)",borderRadius:"6px"},ruby_red:{gradient:"linear-gradient(135deg, #b91c1c 0%, #f87171 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#b91c1b",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(248, 113, 113, 0.3)",borderRadius:"6px"},golden_yellow:{gradient:"linear-gradient(135deg, #a16207 0%, #eab308 100%)",headerBorder:"#ca8a04",rowBorder:"#fef08a",altRowBg:"#fefce8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#a16207",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(234, 179, 8, 0.3)",borderRadius:"6px"},navy_blue:{gradient:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e3a8a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(59, 130, 246, 0.3)",borderRadius:"6px"},burgundy_wine:{gradient:"linear-gradient(135deg, #7f1d1d 0%, #dc2626 100%)",headerBorder:"#991b1b",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#7f1d1d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(220, 38, 38, 0.3)",borderRadius:"6px"},lavender_purple:{gradient:"linear-gradient(135deg, #7c2d12 0%, #a855f7 100%)",headerBorder:"#9333ea",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#7c2d12",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(168, 85, 247, 0.3)",borderRadius:"6px"},ocean_teal:{gradient:"linear-gradient(135deg, #134e4a 0%, #14b8a6 100%)",headerBorder:"#0f766e",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#134e4a",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(20, 184, 166, 0.3)",borderRadius:"6px"},cherry_blossom:{gradient:"linear-gradient(135deg, #be185d 0%, #fb7185 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#be185d",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 113, 133, 0.3)",borderRadius:"6px"},autumn_orange:{gradient:"linear-gradient(135deg, #9a3412 0%, #fb923c 100%)",headerBorder:"#ea580c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(251, 146, 60, 0.3)",borderRadius:"6px"}};return e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]||e.default}(e.tableStyle),o=!1!==e.showHeaders,a=!1!==e.showBorders,i=e.columns||{image:!1,name:!0,sku:!1,quantity:!0,price:!0,total:!0},l=e.headers||["Produit","QtÃ©","Prix"],c=function(e){return{image:"Img",name:l[0]||"Produit",sku:"SKU",quantity:l[1]||"QtÃ©",price:l[2]||"Prix",total:"Total"}[e]||e},d=[{name:"Produit A - Description",sku:"SKU001",quantity:2,price:19.99,total:39.98},{name:"Produit B - Article",sku:"SKU002",quantity:1,price:29.99,total:29.99}],s=d.reduce(function(e,t){return e+t.total},0),u=e.showShipping?5:0,f=e.showTaxes?2.25:0,p=e.showDiscount?-5:0,m=s+u+f+p;return function(){for(var e=["image","name","sku","quantity","price","total"],t=e.length-1;t>=0;t--)if(!1!==i[e[t]])return e[t]}(),n().createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",fontSize:"".concat((e.fontSize||10)*t,"px"),fontFamily:e.fontFamily||"Arial, sans-serif",border:a?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):e.borderWidth&&e.borderWidth>0?"".concat(Math.max(1,.5*e.borderWidth)*t,"px solid ").concat(e.borderColor||"#e5e7eb"):"none",borderRadius:"".concat((e.borderRadius||2)*t,"px"),overflow:"hidden",backgroundColor:e.backgroundColor||"transparent",boxSizing:"border-box",boxShadow:r.shadow&&"modern"===e.tableStyle?"0 4px 8px ".concat(r.shadow):"none"}},o&&n().createElement("div",{style:{display:"flex",background:r.gradient||r.headerBg,borderBottom:a?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none",fontWeight:"bold",color:r.headerTextColor||("modern"===e.tableStyle?"#ffffff":"#000000"),boxShadow:r.shadow?"0 2px 4px ".concat(r.shadow):"none"}},i.image&&n().createElement("div",{style:{flex:"0 0 ".concat(40*t,"px"),padding:"".concat(4*t,"px"),textAlign:"center",borderRight:a?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none"}},c("image")),i.name&&n().createElement("div",{style:{flex:1,padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"left",borderRight:a?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none"}},c("name")),i.sku&&n().createElement("div",{style:{flex:"0 0 ".concat(80*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"left",borderRight:a?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none"}},c("sku")),i.quantity&&n().createElement("div",{style:{flex:"0 0 ".concat(60*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"center",borderRight:a?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none"}},c("quantity")),i.price&&n().createElement("div",{style:{flex:"0 0 ".concat(80*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"right",borderRight:a?"".concat(r.borderWidth*t,"px solid ").concat(r.headerBorder):"none"}},c("price")),i.total&&n().createElement("div",{style:{flex:"0 0 80px",padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"right"}},c("total"))),n().createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},d.map(function(o,l){return n().createElement("div",{key:l,style:{display:"flex",borderBottom:a?"".concat(r.borderWidth,"px solid ").concat(r.rowBorder):"none",backgroundColor:"striped"===e.tableStyle&&l%2==1?r.altRowBg:"transparent",color:r.rowTextColor||"#000000",boxShadow:r.shadow?"0 1px 2px ".concat(r.shadow):"none"}},i.image&&n().createElement("div",{style:{flex:"0 0 ".concat(40*t,"px"),padding:"".concat(4*t,"px"),textAlign:"center",borderRight:a?"".concat(r.borderWidth*t,"px solid ").concat(r.rowBorder):"none"}},"ðŸ“·"),i.name&&n().createElement("div",{style:{flex:1,padding:"".concat(4*t,"px ").concat(6*t,"px"),borderRight:a?"".concat(r.borderWidth*t,"px solid ").concat(r.rowBorder):"none"}},o.name),i.sku&&n().createElement("div",{style:{flex:"0 0 ".concat(80*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),borderRight:a?"".concat(r.borderWidth*t,"px solid ").concat(r.rowBorder):"none"}},o.sku),i.quantity&&n().createElement("div",{style:{flex:"0 0 ".concat(60*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"center",borderRight:a?"".concat(r.borderWidth*t,"px solid ").concat(r.rowBorder):"none"}},o.quantity),i.price&&n().createElement("div",{style:{flex:"0 0 ".concat(80*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"right",borderRight:a?"".concat(r.borderWidth*t,"px solid ").concat(r.rowBorder):"none"}},o.price.toFixed(2),"â‚¬"),i.total&&n().createElement("div",{style:{flex:"0 0 ".concat(80*t,"px"),padding:"".concat(4*t,"px ").concat(6*t,"px"),textAlign:"right"}},o.total.toFixed(2),"â‚¬"))})),n().createElement("div",{style:{borderTop:a?"".concat(r.borderWidth,"px solid ").concat(r.headerBorder):"none"}},e.showSubtotal&&n().createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"".concat(4*t,"px ").concat(6*t,"px"),fontWeight:"bold"}},n().createElement("div",{style:{width:"".concat(80*t,"px"),textAlign:"right"}},"Sous-total: ",s.toFixed(2),"â‚¬")),e.showShipping&&u>0&&n().createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"".concat(4*t,"px ").concat(6*t,"px")}},n().createElement("div",{style:{width:"".concat(80*t,"px"),textAlign:"right"}},"Port: ",u.toFixed(2),"â‚¬")),e.showTaxes&&f>0&&n().createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"".concat(4*t,"px ").concat(6*t,"px")}},n().createElement("div",{style:{width:"".concat(80*t,"px"),textAlign:"right"}},"TVA: ",f.toFixed(2),"â‚¬")),e.showDiscount&&p<0&&n().createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"".concat(4*t,"px ").concat(6*t,"px")}},n().createElement("div",{style:{width:"".concat(80*t,"px"),textAlign:"right"}},"Remise: ",Math.abs(p).toFixed(2),"â‚¬")),e.showTotal&&n().createElement("div",{style:{display:"flex",justifyContent:"flex-end",padding:"".concat(4*t,"px ").concat(6*t,"px"),fontWeight:"bold",background:r.gradient||r.headerBg,color:r.headerTextColor||("modern"===e.tableStyle?"#ffffff":"#000000"),boxShadow:r.shadow?"0 2px 4px ".concat(r.shadow):"none"}},n().createElement("div",{style:{width:"".concat(80*t,"px"),textAlign:"right"}},"TOTAL: ",m.toFixed(2),"â‚¬"))));case"customer_info":var h=e.fields||["name","email","phone","address","company","vat","siret"],b=!1!==e.showLabels,g=e.layout||"vertical",y=e.alignment||"left",v=e.spacing||3,x={name:"Jean Dupont",company:"ABC Company SARL",address:"123 Rue de la Paix\n75001 Paris\nFrance",email:"jean.dupont@email.com",phone:"+33 6 12 34 56 78",tva:"FR 12 345 678 901",siret:"123 456 789 00012",website:"www.abc-company.com"},w={padding:"".concat(8*t,"px"),fontSize:(e.fontSize||12)*t,lineHeight:e.lineHeight||"1.4",color:e.color||"#1e293b",fontFamily:e.fontFamily||"Inter, sans-serif",textAlign:y,display:"horizontal"===g?"flex":"block",flexWrap:"horizontal"===g?"wrap":"nowrap",gap:"horizontal"===g?"".concat(v*t,"px"):"0"};return n().createElement("div",{style:w},h.map(function(r,o){var a=x[r];if(!a)return null;var i="horizontal"===g?{flex:"1",minWidth:"".concat(120*t,"px")}:{marginBottom:o<h.length-1?"".concat(v*t,"px"):"0",display:"flex",alignItems:"flex-start"};return n().createElement("div",{key:r,style:i},b&&n().createElement("div",{style:{fontWeight:"bold"===e.labelStyle?"bold":"normal",marginBottom:"horizontal"===g?"".concat(2*t,"px"):"0",marginRight:"horizontal"===g?"0":"".concat(8*t,"px"),fontSize:"".concat(11*t,"px"),opacity:.8,minWidth:"horizontal"===g?"auto":"".concat(80*t,"px"),flexShrink:0}},"name"===r&&"Client","company"===r&&"Entreprise","address"===r&&"Adresse","email"===r&&"Email","phone"===r&&"TÃ©lÃ©phone","tva"===r&&"NÂ° TVA","siret"===r&&"SIRET","website"===r&&"Site web",":"),n().createElement("div",{style:{whiteSpace:"pre-line",fontSize:(e.fontSize||12)*t,flex:"horizontal"===g?"1":"auto"}},a))}));case"company_info":var E=e.fields||["name","address","phone","email","website","vat","rcs","siret"],S=!1!==e.showLabels,C=e.layout||"vertical",z=e.alignment||"left",_=e.spacing||3,k={name:"ABC Company SARL",address:"456 Avenue des Champs\n75008 Paris\nFrance",phone:"01 23 45 67 89",email:"contact@abc-company.com",tva:"FR 98 765 432 109",siret:"987 654 321 00098",rcs:"Paris B 123 456 789",website:"www.abc-company.com"},T={padding:"".concat(8*t,"px"),fontSize:(e.fontSize||12)*t,lineHeight:e.lineHeight||"1.4",color:e.color||"#1e293b",fontFamily:e.fontFamily||"Inter, sans-serif",textAlign:z,display:"horizontal"===C?"flex":"block",flexWrap:"horizontal"===C?"wrap":"nowrap",gap:"horizontal"===C?"".concat(_*t,"px"):"0"};return n().createElement("div",{style:T},E.map(function(r,o){var a=k[r];if(!a)return null;var i="horizontal"===C?{flex:"1",minWidth:"".concat(120*t,"px")}:{marginBottom:o<E.length-1?"".concat(_*t,"px"):"0",display:"flex",alignItems:"flex-start"};return n().createElement("div",{key:r,style:i},S&&n().createElement("div",{style:{fontWeight:"bold"===e.labelStyle?"bold":"normal",marginBottom:"horizontal"===C?"".concat(2*t,"px"):"0",marginRight:"horizontal"===C?"0":"".concat(8*t,"px"),fontSize:"".concat(11*t,"px"),opacity:.8,minWidth:"horizontal"===C?"auto":"".concat(80*t,"px"),flexShrink:0}},"name"===r&&"Entreprise","address"===r&&"Adresse","phone"===r&&"TÃ©lÃ©phone","email"===r&&"Email","tva"===r&&"NÂ° TVA","siret"===r&&"SIRET","rcs"===r&&"RCS","website"===r&&"Site web",":"),n().createElement("div",{style:{whiteSpace:"pre-line",fontSize:(e.fontSize||12)*t,flex:"horizontal"===C?"1":"auto"}},a))}));case"company_logo":return n().createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"".concat((e.padding||8)*t,"px"),backgroundColor:e.backgroundColor||"transparent",borderRadius:(e.borderRadius||0)*t,border:e.borderWidth?"".concat(e.borderWidth*t,"px solid ").concat(e.borderColor||"#e5e7eb"):"none"}},e.imageUrl||e.src?n().createElement("img",{src:e.imageUrl||e.src,alt:e.alt||"Logo entreprise",style:{maxWidth:"100%",maxHeight:"100%",objectFit:e.objectFit||"contain"}}):n().createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#f0f0f0",border:"".concat(2*t,"px dashed #ccc"),display:"flex",alignItems:"center",justifyContent:"center",color:"#666",fontSize:(e.fontSize||12)*t}},"ðŸ¢ Logo"));case"order_number":return n().createElement("div",{style:{padding:"".concat((e.padding||8)*t,"px"),fontSize:(e.fontSize||14)*t,fontWeight:e.fontWeight||"bold",color:e.color||"#333",fontFamily:e.fontFamily||"Inter, sans-serif",textAlign:e.textAlign||"left",backgroundColor:e.backgroundColor||"transparent",borderRadius:(e.borderRadius||0)*t,border:e.borderWidth?"".concat(e.borderWidth*t,"px solid ").concat(e.borderColor||"#e5e7eb"):"none"}},!1!==e.showLabel&&n().createElement("div",{style:{fontSize:.8*(e.fontSize||14)*t,color:e.labelColor||"#666",marginBottom:"".concat(2*t,"px"),fontWeight:"normal"}},e.label||"NÂ° de commande",":"),n().createElement("div",{style:{fontSize:(e.fontSize||14)*t,fontWeight:e.fontWeight||"bold"}},e.prefix||"CMD-",e.orderNumber||"2025-00123"));case"document_type":return n().createElement("div",{style:{padding:"".concat((e.padding||8)*t,"px"),fontSize:"".concat((e.fontSize||18)*t,"px"),fontWeight:e.fontWeight||"bold",color:e.color||"#1e293b",fontFamily:e.fontFamily||"Inter, sans-serif",textAlign:e.textAlign||"center",backgroundColor:e.backgroundColor||"transparent",borderRadius:(e.borderRadius||0)*t}},"invoice"===e.documentType?"FACTURE":"quote"===e.documentType?"DEVIS":"receipt"===e.documentType?"REÃ‡U":"order"===e.documentType?"COMMANDE":"credit_note"===e.documentType?"AVOIR":"DOCUMENT");case"progress-bar":return n().createElement("div",{style:{width:"100%",height:(e.height||20)*t,backgroundColor:e.backgroundColor||"#e5e7eb",borderRadius:(e.borderRadius||10)*t,overflow:"hidden",border:e.borderWidth?"".concat(e.borderWidth*t,"px solid ").concat(e.borderColor||"#d1d5db"):"none"}},n().createElement("div",{style:{width:"".concat(Math.min(100,Math.max(0,e.progressValue||75)),"%"),height:"100%",backgroundColor:e.progressColor||"#3b82f6",borderRadius:(e.borderRadius||10)*t,transition:!1!==e.animate?"width 0.3s ease":"none"}}));default:return n().createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#f0f0f0",border:"".concat(1*t,"px dashed #ccc"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"".concat(12*t,"px"),color:"#666",padding:"".concat(4*t,"px"),boxSizing:"border-box"}},e.type||"Ã‰lÃ©ment inconnu")}},[]);gt(function(){t&&a.length>0?b?B():(v({success:!0,elements_count:a.length,width:400,height:566,fallback:!1}),R()):t&&0===a.length&&v({success:!0,elements_count:0,width:400,height:566,fallback:!1})},[t,a.length,b]);var R=function(){var e=ut(it().m(function e(){var t,r,n,o,i,l,c,d,s,u,p,m,h,b,g;return it().w(function(e){for(;;)switch(e.p=e.n){case 0:if(z(null),e.p=1,r=(null===(t=window.pdfBuilderAjax)||void 0===t?void 0:t.ajaxurl)||f){e.n=2;break}return console.warn("Variables AJAX non disponibles pour validation cÃ´tÃ© serveur"),e.a(2);case 2:return(n=new FormData).append("action","pdf_builder_get_fresh_nonce"),e.n=3,fetch(r,{method:"POST",body:n});case 3:if((o=e.v).ok){e.n=4;break}return console.warn("Erreur obtention nonce pour validation:",o.status),e.a(2);case 4:return e.n=5,o.json();case 5:if((i=e.v).success){e.n=6;break}return console.warn("Impossible d'obtenir un nonce frais pour validation"),e.a(2);case 6:if(l=i.data.nonce,(c=_(a)).success){e.n=7;break}return console.error("âŒ Validation cÃ´tÃ© client Ã©chouÃ©e:",c.error),v(function(e){return dt(dt({},e),{},{error:"Erreur de validation cÃ´tÃ© client: ".concat(c.error),isLoading:!1})}),e.a(2);case 7:return d=c.jsonString,c.cleanedElements,(s=new FormData).append("action","pdf_builder_validate_preview"),s.append("nonce",l),s.append("elements",d),e.n=8,fetch(r,{method:"POST",body:s});case 8:if((u=e.v).ok){e.n=9;break}return console.warn("Erreur HTTP validation aperÃ§u:",u.status),e.a(2);case 9:return e.p=9,e.n=10,u.json();case 10:p=e.v,e.n=13;break;case 11:return e.p=11,b=e.v,console.error("âŒ Erreur parsing JSON rÃ©ponse serveur:",b),e.n=12,u.text();case 12:return m=e.v,console.error("Contenu brut de la rÃ©ponse:",m.substring(0,500)),v(function(e){return dt(dt({},e),{},{server_error:"RÃ©ponse serveur invalide (pas du JSON)"})}),e.a(2);case 13:p.success?v(function(e){return dt(dt(dt({},e),p.data),{},{server_validated:!0})}):(console.warn("âš ï¸ Validation aperÃ§u cÃ´tÃ© serveur Ã©chouÃ©e:",p.data),h="Erreur validation serveur","string"==typeof p.data?h=p.data:p.data&&"object"===pt(p.data)&&p.data.message?h=p.data.message:p.data&&"object"===pt(p.data)&&(h=JSON.stringify(p.data)),v(function(e){return dt(dt({},e),{},{server_error:h})})),e.n=15;break;case 14:e.p=14,g=e.v,console.warn("Erreur validation aperÃ§u cÃ´tÃ© serveur:",g),v(function(e){return dt(dt({},e),{},{server_error:g.message||"Erreur inconnue cÃ´tÃ© serveur"})});case 15:return e.a(2)}},e,null,[[9,11],[1,14]])}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=ut(it().m(function e(){var t,r,n,o,i,c,s,p,m,h,b,g,y,x;return it().w(function(e){for(;;)switch(e.p=e.n){case 0:if(E(!0),z(null),v(null),t=setTimeout(function(){v({success:!0,elements_count:a.length,width:l,height:d,fallback:!0,server_timeout:!0}),E(!1)},1e4),e.p=1,(o=_(a)).success){e.n=2;break}return console.error("âŒ Validation cÃ´tÃ© client Ã©chouÃ©e:",o.error),v(function(e){return dt(dt({},e),{},{error:"Erreur de validation cÃ´tÃ© client: ".concat(o.error),isLoading:!1})}),e.a(2);case 2:if(i=o.jsonString,c=(null===(r=window.pdfBuilderAjax)||void 0===r?void 0:r.ajaxurl)||f){e.n=3;break}return alert("Erreur: Variables AJAX non disponibles. Rechargez la page."),e.a(2);case 3:return(s=new FormData).append("action","pdf_builder_get_fresh_nonce"),e.n=4,fetch(c,{method:"POST",body:s});case 4:if((p=e.v).ok){e.n=5;break}throw new Error("Erreur HTTP nonce: ".concat(p.status));case 5:return e.n=6,p.json();case 6:if((m=e.v).success){e.n=7;break}throw new Error("Impossible d'obtenir un nonce frais");case 7:return h=m.data.nonce,(b=new FormData).append("action","pdf_builder_unified_preview"),b.append("nonce",h),b.append("elements",i),e.n=8,fetch(f||(null===(n=window.pdfBuilderAjax)||void 0===n?void 0:n.ajaxurl)||"/wp-admin/admin-ajax.php",{method:"POST",body:b});case 8:if((g=e.v).ok){e.n=9;break}throw new Error("Erreur HTTP: ".concat(g.status));case 9:return e.n=10,g.json();case 10:if(!((y=e.v).success&&y.data&&y.data.url)){e.n=11;break}return clearTimeout(t),v({url:y.data.url,server_validated:!0,elements_count:a.length,width:l,height:d,zoom:u}),E(!1),z(null),e.a(2);case 11:throw new Error(y.data||"Erreur gÃ©nÃ©ration aperÃ§u cÃ´tÃ© serveur");case 12:e.n=14;break;case 13:e.p=13,x=e.v,console.error("âŒ Erreur gÃ©nÃ©ration aperÃ§u cÃ´tÃ© serveur:",x),clearTimeout(t),z("Erreur aperÃ§u cÃ´tÃ© serveur: ".concat(x.message)),E(!1);case 14:return e.a(2)}},e,null,[[1,13]])}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=ut(it().m(function e(){var t,r,n,o,i,l,c,d,s,u,p,h,b,g,y,v;return it().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=null,e.p=1,n=(null===(r=window.pdfBuilderAjax)||void 0===r?void 0:r.ajaxurl)||f){e.n=2;break}return alert("Erreur: Variables AJAX non disponibles. Rechargez la page."),e.a(2);case 2:return(o=new FormData).append("action","pdf_builder_get_fresh_nonce"),e.n=3,fetch(n,{method:"POST",body:o});case 3:if((i=e.v).ok){e.n=4;break}throw new Error("Erreur HTTP nonce: ".concat(i.status));case 4:return e.n=5,i.json();case 5:if((l=e.v).success){e.n=6;break}throw new Error("Impossible d'obtenir un nonce frais");case 6:return c=l.data.nonce,(d=new FormData).append("action","pdf_builder_generate_pdf"),d.append("nonce",c),d.append("elements",JSON.stringify(a)),(t=document.querySelector(".btn-primary"))&&(t.textContent,t.textContent="â³ GÃ©nÃ©ration PDF...",t.disabled=!0),e.n=7,fetch(n,{method:"POST",body:d});case 7:if((s=e.v).ok){e.n=8;break}throw new Error("Erreur rÃ©seau: "+s.status);case 8:return e.n=9,s.json().catch(function(e){throw console.error("Erreur parsing JSON:",e),new Error("RÃ©ponse invalide du serveur (pas du JSON)")});case 9:if((u=e.v).success){e.n=10;break}throw p="Erreur inconnue lors de la gÃ©nÃ©ration du PDF","string"==typeof u.data?p=u.data:"object"===pt(u.data)&&null!==u.data&&(p=u.data.message||JSON.stringify(u.data)),new Error(p);case 10:if(u.data&&u.data.pdf){e.n=11;break}throw new Error("DonnÃ©es PDF manquantes dans la rÃ©ponse");case 11:if(h=u.data.pdf,0!==(b=new Blob([Uint8Array.from(atob(h),function(e){return e.charCodeAt(0)})],{type:"application/pdf"})).size){e.n=12;break}throw new Error("Le PDF gÃ©nÃ©rÃ© est vide");case 12:g=URL.createObjectURL(b),m?m(g):window.open(g,"_blank")||((y=document.createElement("a")).href=g,y.target="_blank",y.rel="noopener noreferrer",document.body.appendChild(y),y.click(),y.parentNode===document.body&&document.body.removeChild(y)),m||setTimeout(function(){URL.revokeObjectURL(g)},1e3),e.n=14;break;case 13:e.p=13,v=e.v,console.error("Erreur gÃ©nÃ©ration PDF:",v),alert("Erreur lors de la gÃ©nÃ©ration du PDF: "+v.message);case 14:return e.p=14,t&&(t.textContent="ðŸ‘ï¸ Imprimer PDF",t.disabled=!1),e.f(14);case 15:return e.a(2)}},e,null,[[1,13,14,15]])}));return function(){return e.apply(this,arguments)}}();return t?n().createElement("div",{className:"preview-modal-overlay",onClick:r},n().createElement("div",{className:"preview-modal-content",onClick:function(e){return e.stopPropagation()}},n().createElement("div",{className:"preview-modal-header"},n().createElement("h3",null,"ðŸŽ¨ AperÃ§u Canvas - PDF Builder Pro v2.0"),n().createElement("button",{className:"preview-modal-close",onClick:r},"Ã—")),n().createElement("div",{className:"preview-modal-body"},w&&n().createElement("div",{className:"preview-loading"},n().createElement("div",{className:"preview-spinner"}),n().createElement("p",null,"GÃ©nÃ©ration de l'aperÃ§u...")),C&&n().createElement("div",{className:"preview-error"},n().createElement("h4",null,"âŒ Erreur d'aperÃ§u"),n().createElement("p",null,C),n().createElement("p",null,n().createElement("small",null,"Le PDF pourra quand mÃªme Ãªtre gÃ©nÃ©rÃ© normalement."))),y&&n().createElement("div",{className:"preview-content"},n().createElement("div",{style:{textAlign:"center",marginBottom:"20px",padding:"10px",background:y.server_validated?"#e8f5e8":"#fff3cd",borderRadius:"4px",border:"1px solid ".concat(y.server_validated?"#c3e6c3":"#ffeaa7")}},n().createElement("strong",null,y.server_validated?"âœ…":"âš¡"," AperÃ§u gÃ©nÃ©rÃ©"),n().createElement("br",null),n().createElement("small",null,y.elements_count," Ã©lÃ©ment",1!==y.elements_count?"s":""," â€¢ ",y.width,"Ã—",y.height,"px",y.server_validated&&" â€¢ Serveur validÃ©",y.server_error&&" â€¢ âš ï¸ ProblÃ¨me serveur")),n().createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"flex-start",minHeight:"400px",backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"20px"}},y.url?n().createElement("iframe",{src:y.url,style:{width:"100%",height:"600px",border:"1px solid #dee2e6",borderRadius:"4px",backgroundColor:"white"},title:"AperÃ§u PDF cÃ´tÃ© serveur"}):k(a)),y.server_error&&n().createElement("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#ffeaa7",borderRadius:"6px",border:"1px solid #d4a574"}},n().createElement("h5",{style:{margin:"0 0 10px 0",color:"#856404"}},"âš ï¸ Note"),n().createElement("p",{style:{margin:"0",fontSize:"14px",color:"#333"}},"L'aperÃ§u s'affiche correctement, mais il y a un problÃ¨me de validation cÃ´tÃ© serveur: ",y.server_error)),n().createElement("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#e8f4fd",borderRadius:"6px",border:"1px solid #b3d9ff"}},n().createElement("h5",{style:{margin:"0 0 10px 0",color:"#0066cc"}},"â„¹ï¸ Informations du Canvas"),n().createElement("p",{style:{margin:"0",fontSize:"14px",color:"#333"}},n().createElement("strong",null,"Dimensions:")," ",l," Ã— ",d," pixels",n().createElement("br",null),n().createElement("strong",null,"Ã‰lÃ©ments:")," ",a.length,n().createElement("br",null),n().createElement("strong",null,"Zoom:")," ",Math.round(100*u),"%",n().createElement("br",null),n().createElement("strong",null,"Status:")," ",y.server_validated?"ValidÃ© cÃ´tÃ© serveur":"AperÃ§u local"))),!w&&!C&&!y&&n().createElement("div",{className:"preview-loading"},n().createElement("p",null,"PrÃ©paration de l'aperÃ§u..."))),n().createElement("div",{className:"preview-modal-footer"},n().createElement("button",{className:"btn btn-secondary",onClick:r},"âŒ Fermer"),n().createElement("button",{className:"btn btn-primary",onClick:N},"ðŸ‘ï¸ Imprimer PDF")))):null},xt=function(e){var t=e.isOpen,r=e.onClose,n=e.pdfUrl,o=e.title,a=void 0===o?"AperÃ§u PDF":o;return t?React.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:r},React.createElement("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"90%",height:"90%",maxWidth:"1200px",maxHeight:"800px",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},onClick:function(e){return e.stopPropagation()}},React.createElement("div",{style:{padding:"16px 20px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8f9fa",borderRadius:"8px 8px 0 0"}},React.createElement("h3",{style:{margin:0,color:"#1a202c",fontSize:"18px",fontWeight:"600"}},a),React.createElement("button",{onClick:r,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#718096",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s"},onMouseOver:function(e){return e.target.style.backgroundColor="#e2e8f0"},onMouseOut:function(e){return e.target.style.backgroundColor="transparent"}},"Ã—")),React.createElement("div",{style:{flex:1,padding:"0",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"}},n?React.createElement("iframe",{src:n,style:{width:"100%",height:"100%",border:"none",borderRadius:"0 0 8px 8px"},title:a}):React.createElement("div",{style:{textAlign:"center",color:"#718096",fontSize:"16px"}},"Chargement du PDF...")),React.createElement("div",{style:{padding:"16px 20px",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8f9fa",borderRadius:"0 0 8px 8px"}},React.createElement("div",{style:{fontSize:"14px",color:"#718096"}},"Utilisez Ctrl+P (Cmd+P sur Mac) pour imprimer"),React.createElement("div",null,React.createElement("button",{onClick:function(){if(n){var e=document.createElement("a");e.href=n,e.download="document.pdf",e.target="_blank",document.body.appendChild(e),e.click(),e.parentNode===document.body&&document.body.removeChild(e)}},style:{backgroundColor:"#4299e1",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginRight:"8px",transition:"background-color 0.2s"},onMouseOver:function(e){return e.target.style.backgroundColor="#3182ce"},onMouseOut:function(e){return e.target.style.backgroundColor="#4299e1"}},"ðŸ“¥ TÃ©lÃ©charger"),React.createElement("button",{onClick:r,style:{backgroundColor:"#e2e8f0",color:"#4a5568",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},"Fermer"))))):null};var wt=n().useRef,Et=(n().useCallback,function(e){return{"woocommerce-invoice-number":"NumÃ©ro Facture","woocommerce-invoice-date":"Date Facture","woocommerce-order-number":"NÂ° Commande","woocommerce-order-date":"Date Commande","woocommerce-billing-address":"Adresse Facturation","woocommerce-shipping-address":"Adresse Livraison","woocommerce-customer-name":"Nom Client","woocommerce-customer-email":"Email Client","woocommerce-payment-method":"Paiement","woocommerce-order-status":"Statut","woocommerce-products-table":"Tableau Produits","woocommerce-products-simple":"Liste Produits","woocommerce-subtotal":"Sous-total","woocommerce-discount":"Remise","woocommerce-shipping":"Livraison","woocommerce-taxes":"Taxes","woocommerce-total":"Total","woocommerce-refund":"Remboursement","woocommerce-fees":"Frais","woocommerce-quote-number":"NÂ° Devis","woocommerce-quote-date":"Date Devis","woocommerce-quote-validity":"ValiditÃ©","woocommerce-quote-notes":"Notes Devis"}[e]||"Ã‰lÃ©ment WC"});const St=function(e){var t=e.element,r=e.isSelected,o=e.onSelect,a=e.onUpdate,i=e.dragAndDrop,l=e.zoom,c=void 0===l?1:l,d=e.canvasWidth,s=e.canvasHeight,u=e.orderData,f=void 0===u?{}:u,p=e.onContextMenu,m=e.snapToGrid,h=void 0===m||m,g=e.gridSize,y=void 0===g?10:g,v=wt(null),x=b({onElementResize:function(e){a({x:e.x,y:e.y,width:e.width,height:e.height})},snapToGrid:h,gridSize:y,canvasWidth:d,canvasHeight:s}),w={position:"absolute",left:t.x*c,top:t.y*c,width:t.width*c,height:t.height*c,cursor:r?"move":"pointer",userSelect:"none",border:r?"2px solid #007cba":t.borderWidth>0?"".concat(t.borderWidth||1,"px ").concat(t.borderStyle||"solid"," ").concat(t.borderColor||"transparent"):"none",backgroundColor:t.backgroundColor||"transparent",color:t.color||"#333333",fontSize:(t.fontSize||14)*c,fontFamily:t.fontFamily||"Arial, sans-serif",padding:(t.padding||8)*c,borderRadius:(t.borderRadius||4)*c,boxSizing:"border-box",overflow:"hidden","--element-border-width":r?"2px":t.borderWidth>0?"".concat(t.borderWidth||1,"px"):"0px"};return n().createElement(n().Fragment,null,n().createElement("div",{ref:v,style:w,onClick:function(e){e.stopPropagation(),r||o(t.id)},onMouseDown:function(e){e.stopPropagation();var r=v.current.closest(".canvas-zoom-wrapper");if(r){for(var n=r.getBoundingClientRect(),o=(v.current.getBoundingClientRect(),(e.clientX-n.left)/c),a=(e.clientY-n.top)/c,l=8/c,d=0,s=[{name:"nw",x:t.x,y:t.y},{name:"ne",x:t.x+t.width,y:t.y},{name:"sw",x:t.x,y:t.y+t.height},{name:"se",x:t.x+t.width,y:t.y+t.height},{name:"n",x:t.x+t.width/2,y:t.y},{name:"s",x:t.x+t.width/2,y:t.y+t.height},{name:"w",x:t.x,y:t.y+t.height/2},{name:"e",x:t.x+t.width,y:t.y+t.height/2}];d<s.length;d++){var u=s[d];if(o>=u.x-l/2&&o<=u.x+l/2&&a>=u.y-l/2&&a<=u.y+l/2)return void x.handleResizeStart(e,u.name,{x:t.x,y:t.y,width:t.width,height:t.height},n,c)}if(i&&i.handleMouseDown){var f=v.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();i.handleMouseDown(e,t.id,{left:t.x,top:t.y,width:t.width,height:t.height},f,c)}}},onContextMenu:p},n().createElement("div",{style:{fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.5px"}},Et(t.type)),n().createElement("div",{style:{whiteSpace:"pre-line",lineHeight:"1.4",color:"#666"}},function(e){switch(e){case"woocommerce-invoice-number":return f.invoice_number||"INV-001";case"woocommerce-invoice-date":return f.invoice_date||"15/10/2025";case"woocommerce-order-number":return f.order_number||"#12345";case"woocommerce-order-date":return f.order_date||"15/10/2025";case"woocommerce-customer-name":return f.customer_name||"John Doe";case"woocommerce-customer-email":return f.customer_email||"john.doe@example.com";case"woocommerce-billing-address":return f.billing_address||"123 Rue de Test\n75001 Paris\nFrance";case"woocommerce-shipping-address":return f.shipping_address||"456 Rue de Livraison\n75002 Paris\nFrance";case"woocommerce-payment-method":return f.payment_method||"Carte bancaire";case"woocommerce-order-status":return f.order_status||"TraitÃ©e";case"woocommerce-subtotal":return f.subtotal||"45,00 â‚¬";case"woocommerce-discount":return f.discount||"-5,00 â‚¬";case"woocommerce-shipping":return f.shipping||"5,00 â‚¬";case"woocommerce-taxes":return f.tax||"9,00 â‚¬";case"woocommerce-total":return f.total||"54,00 â‚¬";case"woocommerce-refund":return f.refund||"0,00 â‚¬";case"woocommerce-fees":return f.fees||"1,50 â‚¬";case"woocommerce-quote-number":return f.quote_number||"QUO-001";case"woocommerce-quote-date":return f.quote_date||"15/10/2025";case"woocommerce-quote-validity":return f.quote_validity||"30 jours";case"woocommerce-quote-notes":return f.quote_notes||"Conditions spÃ©ciales : paiement Ã  30 jours.";case"woocommerce-products-table":return f.products&&f.products.length>0?f.products.map(function(e){return"".concat(e.name," x").concat(e.quantity," - ").concat(e.total)}).join("\n"):"Produit Test 1 x1 - 25,00 â‚¬\nProduit Test 2 x2 - 20,00 â‚¬";case"woocommerce-products-simple":return f.products&&f.products.length>0?f.products.map(function(e){return"".concat(e.quantity,"x ").concat(e.name)}).join("\n"):"1x Produit Test 1\n2x Produit Test 2";default:return"[Contenu dynamique WooCommerce]"}}(t.type))),r&&n().createElement(n().Fragment,null,n().createElement("div",{className:"resize-handle nw",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"nw",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle ne",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"ne",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle sw",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"sw",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle se",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"se",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle n",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"n",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle s",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"s",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle w",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"w",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle e",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return x.handleResizeStart(e,"e",{x:t.x,y:t.y,width:t.width,height:t.height})}})))};function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _t(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ct(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ct(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Tt=n().useState;const Rt=function(e){var t,r,o=e.onAddElement,a=(e.selectedTool,e.onToolSelect,t=Tt(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return kt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kt(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1];return n().createElement(n().Fragment,null,i&&n().createElement("div",{className:"modal-overlay",onClick:function(){return l(!1)}},n().createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}},n().createElement("div",{className:"modal-header"},n().createElement("h3",null,"ðŸŽ¨ Choisir un modÃ¨le d'en-tÃªte"),n().createElement("button",{className:"modal-close",onClick:function(){return l(!1)}},"Ã—")),n().createElement("div",{className:"modal-body"},n().createElement("div",{className:"templates-grid"},[{id:"classic",name:"Classique",preview:"ðŸ¢ ENTREPRISE\n123 Rue de la Paix\n75000 Paris",fontSize:14,fontWeight:"bold"},{id:"modern",name:"Moderne",preview:"âœ¨ ENTREPRISE MODERNE\nInnovation & QualitÃ©\ncontact@entreprise.com",fontSize:16,fontWeight:"bold"},{id:"minimal",name:"Minimal",preview:"ENTREPRISE\nAdresse â€¢ TÃ©lÃ©phone â€¢ Email",fontSize:12,fontWeight:"normal"},{id:"elegant",name:"Ã‰lÃ©gant",preview:"ðŸŽ© Maison Ã‰lÃ©gante\nParis, France\nwww.entreprise.com",fontSize:15,fontWeight:"bold"}].map(function(e){return n().createElement("div",{key:e.id,className:"template-item",onClick:function(){return function(e){l(!1),o("text",{x:50,y:50,width:300,height:60,text:e.preview.replace("\\n","\n"),fontSize:e.fontSize||16,fontWeight:e.fontWeight||"normal"})}(e)}},n().createElement("div",{className:"template-preview"},e.preview.split("\n").map(function(t,r){return n().createElement("div",{key:r,style:{fontSize:e.fontSize,fontWeight:e.fontWeight,marginBottom:"4px",whiteSpace:"pre-wrap"}},t)})),n().createElement("div",{className:"template-name"},e.name))}))))),n().createElement("div",{className:"element-library"},n().createElement("div",{className:"library-header"},n().createElement("h3",null,"ðŸ“š BibliothÃ¨que d'Ã‰lÃ©ments"),n().createElement("p",{className:"library-subtitle"},"Cliquez sur les blocs pour les ajouter au canvas")),n().createElement("div",{className:"library-content"},n().createElement("div",{className:"elements-list"},[{type:"product_table",fieldID:"products_table",label:"Tableau Produits",icon:"ðŸ“‹",description:"Tableau des produits commandÃ©s",defaultProperties:{showHeaders:!0,showBorders:!1,headers:["Produit","QtÃ©","Prix"],dataSource:"order_items",tableStyle:"default",columns:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0},showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1}},{type:"customer_info",fieldID:"customer_info",label:"Fiche Client",icon:"ðŸ‘¤",description:"Informations dÃ©taillÃ©es du client",defaultProperties:{showHeaders:!0,showBorders:!1,fields:["name","email","phone","address","company","vat","siret"],layout:"vertical",showLabels:!0,labelStyle:"bold",spacing:8}},{type:"company_logo",fieldID:"company_logo",label:"Logo Entreprise",icon:"ðŸ¢",description:"Logo et identitÃ© visuelle de l'entreprise",defaultProperties:{imageUrl:"",width:150,height:80,alignment:"left",fit:"contain",showBorder:!1,borderRadius:0}},{type:"company_info",fieldID:"company_info",label:"Informations Entreprise",icon:"[D]",description:"Nom, adresse, contact et TVA de l'entreprise",defaultProperties:{showHeaders:!1,showBorders:!1,fields:["name","address","phone","email","website","vat","rcs","siret"],layout:"vertical",showLabels:!1,labelStyle:"normal",spacing:4,fontSize:12,fontFamily:"Arial",fontWeight:"normal",textAlign:"left"}},{type:"order_number",fieldID:"order_number",label:"NumÃ©ro de Commande",icon:"ðŸ”¢",description:"RÃ©fÃ©rence de commande avec date",defaultProperties:{showHeaders:!1,showBorders:!1,format:"Commande #{order_number} - {order_date}",fontSize:14,fontFamily:"Arial",fontWeight:"bold",textAlign:"right",color:"#333333",showLabel:!0,labelText:"NÂ° de commande:"}},{type:"dynamic-text",fieldID:"dynamic_text",label:"Texte Dynamique",icon:"ï¿½",description:"Texte avec variables dynamiques",defaultProperties:{content:"{{order_total}} â‚¬",fontSize:14,fontFamily:"Arial",fontWeight:"normal",textAlign:"left",color:"#333333"}},{type:"order_totals",fieldID:"order_totals",label:"Totaux Commande",icon:"ðŸ’°",description:"Sous-total, TVA, frais de port, total",defaultProperties:{showSubtotal:!0,showShipping:!0,showTaxes:!0,showDiscount:!0,showTotal:!0,layout:"vertical",fontSize:12,fontFamily:"Arial",fontWeight:"normal",labelAlign:"left",valueAlign:"right",spacing:4}}].map(function(e,t){return n().createElement("button",{key:t,className:"element-button",onClick:function(){o(e.type,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(r),!0).forEach(function(t){_t(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:50+20*t,y:100+20*t,width:300,height:150},e.defaultProperties))},title:e.description},n().createElement("span",{className:"element-icon"},e.icon),n().createElement("div",{className:"element-info"},n().createElement("div",{className:"element-label"},e.label),n().createElement("div",{className:"element-description"},e.description)))})))))};function Bt(e){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(e)}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach(function(t){Ot(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ot(e,t,r){return(t=At(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,At(n.key),n)}}function At(e){var t=function(e){if("object"!=Bt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bt(t)?t:t+""}var jt=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.propertyValidators=new Map,this.propertyPresets=new Map,this.propertyGroups=new Map,this.initDefaults()},t=[{key:"initDefaults",value:function(){var e=this;this.propertyValidators.set("numeric",function(e){return parseFloat(e)||0}),this.propertyValidators.set("positiveNumeric",function(e){return Math.max(0,parseFloat(e)||0)}),this.propertyValidators.set("percentage",function(e){return Math.max(0,Math.min(100,parseFloat(e)||100))}),this.propertyValidators.set("angle",function(e){return((parseFloat(e)||0)%360+360)%360}),this.propertyValidators.set("color",function(t){return e.validateColor(t)}),this.propertyValidators.set("fontSize",function(e){return Math.max(8,Math.min(72,parseInt(e)||14))}),this.propertyValidators.set("borderWidth",function(e){return Math.max(0,Math.min(20,parseInt(e)||0))}),this.propertyValidators.set("borderStyle",function(e){return["solid","dashed","dotted","double"].includes(e)?e:"solid"}),this.propertyValidators.set("borderRadius",function(e){return Math.max(0,Math.min(100,parseInt(e)||0))}),this.propertyPresets.set("colors",{slate:["#f8fafc","#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#1e293b"],blue:["#eff6ff","#dbeafe","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af"],green:["#f0fdf4","#dcfce7","#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d","#166534"],red:["#fef2f2","#fee2e2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c","#991b1b"]}),this.propertyGroups.set("position",["x","y"]),this.propertyGroups.set("dimensions",["width","height"]),this.propertyGroups.set("typography",["fontFamily","fontSize","fontWeight","fontStyle","color","textAlign"]),this.propertyGroups.set("appearance",["backgroundColor","borderColor","borderWidth","borderRadius"]),this.propertyGroups.set("effects",["opacity","shadow","brightness","contrast","saturate"]),this.propertyGroups.set("transform",["rotation","scale"])}},{key:"validateColor",value:function(e){if(!e)return"#000000";if(/^#[0-9A-Fa-f]{6}$/.test(e)||/^#[0-9A-Fa-f]{3}$/.test(e))return e;var t=document.createElement("div");return t.style.color=e,t.style.color||"#000000"}},{key:"validateProperty",value:function(e,t){if("boolean"==typeof t)return t;if(e.startsWith("columns."))return t;var r=this.propertyValidators.get(e);if(r)try{return r(t)}catch(t){return this.getDefaultValue(e)}return this.isNumericProperty(e)?this.validateNumericProperty(e,t):this.isColorProperty(e)?this.validateColorProperty(t):this.isTextStyleProperty(e)?this.validateTextStyleProperty(e,t):t}},{key:"isNumericProperty",value:function(e){return["x","y","width","height","fontSize","opacity","lineHeight","letterSpacing","zIndex","borderWidth","borderRadius","rotation","padding"].includes(e)}},{key:"isColorProperty",value:function(e){return["color","backgroundColor","borderColor"].includes(e)}},{key:"isTextStyleProperty",value:function(e){return["fontWeight","textAlign","textDecoration","textTransform","borderStyle"].includes(e)}},{key:"validateNumericProperty",value:function(e,t){if(null==t||""===t)return this.getDefaultValue(e);var r;if("string"==typeof t){if(r=parseFloat(t),isNaN(r))return this.getDefaultValue(e)}else{if("number"!=typeof t)return this.getDefaultValue(e);r=t}var n={fontSize:{min:8,max:72},opacity:{min:0,max:1},lineHeight:{min:.5,max:3},letterSpacing:{min:-5,max:10},zIndex:{min:-100,max:1e3},borderWidth:{min:0,max:20},borderRadius:{min:0,max:100},rotation:{min:-180,max:180},padding:{min:0,max:100}};if(n[e]){var o=n[e],a=o.min,i=o.max;r=Math.max(a,Math.min(i,r))}return r}},{key:"validateColorProperty",value:function(e){if(!e)return"#000000";if("transparent"===e)return e;if(/^#[0-9A-Fa-f]{6}$/.test(e)||/^#[0-9A-Fa-f]{3}$/.test(e))return e;var t=document.createElement("div");t.style.color=e;var r=t.style.color;return r&&""!==r?e:"#000000"}},{key:"validateTextStyleProperty",value:function(e,t){var r={fontWeight:["normal","bold","100","200","300","400","500","600","700","800","900"],textAlign:["left","center","right","justify"],textDecoration:["none","underline","overline","line-through"],textTransform:["none","capitalize","uppercase","lowercase"],borderStyle:["solid","dashed","dotted","double","none"]};return r[e]&&r[e].includes(t)?t:{fontWeight:"normal",textAlign:"left",textDecoration:"none",textTransform:"none",borderStyle:"solid"}[e]||t}},{key:"getDefaultValue",value:function(e){return{x:0,y:0,width:100,height:50,fontSize:14,opacity:1,lineHeight:1.2,letterSpacing:0,zIndex:0,borderWidth:0,borderRadius:0,rotation:0,padding:0,color:"#333333",backgroundColor:"transparent",borderColor:"#dddddd",fontWeight:"normal",textAlign:"left",textDecoration:"none",textTransform:"none",borderStyle:"solid"}[e]||null}},{key:"getPresets",value:function(e){return this.propertyPresets.get(e)||{}}},{key:"getPropertiesInGroup",value:function(e){return this.propertyGroups.get(e)||[]}},{key:"applyPreset",value:function(e,t){return{"text-title":{fontSize:24,fontWeight:"bold",textAlign:"center",color:"#1e293b"},"text-subtitle":{fontSize:18,fontWeight:"bold",textAlign:"left",color:"#334155"},"text-body":{fontSize:14,fontWeight:"normal",textAlign:"left",color:"#475569"},"text-caption":{fontSize:12,fontWeight:"normal",textAlign:"left",color:"#64748b"},"shape-rounded":{borderRadius:8,borderWidth:1,borderColor:"transparent"},"shape-circle":{borderRadius:50,borderWidth:1,borderColor:"transparent"},"shape-square":{borderRadius:0,borderWidth:1,borderColor:"transparent"},"effect-shadow-soft":{shadow:!0,shadowColor:"#000000",shadowOffsetX:1,shadowOffsetY:1,opacity:90},"effect-shadow-strong":{shadow:!0,shadowColor:"#000000",shadowOffsetX:3,shadowOffsetY:3,opacity:85},"effect-glow":{shadow:!0,shadowColor:"#2563eb",shadowOffsetX:0,shadowOffsetY:0,opacity:95},"color-primary":{backgroundColor:"#2563eb",color:"#ffffff"},"color-secondary":{backgroundColor:"#64748b",color:"#ffffff"},"color-success":{backgroundColor:"#16a34a",color:"#ffffff"},"color-warning":{backgroundColor:"#ca8a04",color:"#ffffff"},"color-error":{backgroundColor:"#dc2626",color:"#ffffff"}}[e]||{}}},{key:"getDefaultProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text";return Wt(Wt({},{x:50,y:50,width:100,height:50,opacity:100,rotation:0,scale:100,visible:!0,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderStyle:"solid",borderRadius:0,color:"#1e293b",fontFamily:"Inter, sans-serif",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",text:"Texte",src:"",alt:"",objectFit:"cover",shadow:!1,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2,brightness:100,contrast:100,saturate:100,showHeaders:!0,showBorders:!0,headers:["Produit","QtÃ©","Prix"],dataSource:"order_items",columns:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0},showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1,progressColor:"#3b82f6",progressValue:75,lineColor:"#64748b",lineWidth:2,documentType:"invoice",imageUrl:"",spacing:8,layout:"vertical",alignment:"left",fit:"contain"}),{text:{width:150,height:30},image:{width:150,height:100},rectangle:{backgroundColor:"#f1f5f9",borderWidth:1,width:150,height:80},product_table:{width:300,height:150},customer_info:{width:200,height:100},company_logo:{width:100,height:60},order_number:{width:150,height:30},company_info:{width:200,height:80},document_type:{width:120,height:40},watermark:{width:300,height:200,opacity:10,text:"CONFIDENTIEL"},"progress-bar":{width:200,height:20},barcode:{width:150,height:60},qrcode:{width:80,height:80},icon:{width:50,height:50},line:{width:200,height:2}}[e]||{})}},{key:"getComputedProperties",value:function(e){return{absoluteX:e.x+e.width/2,absoluteY:e.y+e.height/2,scaledWidth:e.width*(e.scale/100),scaledHeight:e.height*(e.scale/100),cssTransform:"rotate(".concat(e.rotation,"deg) scale(").concat(e.scale/100,")"),cssFilter:"brightness(".concat(e.brightness,"%) contrast(").concat(e.contrast,"%) saturate(").concat(e.saturate,"%)"),cssBoxShadow:e.shadow?"".concat(e.shadowOffsetX||0,"px ").concat(e.shadowOffsetY||0,"px 4px ").concat(e.shadowColor||"#000000"):"none"}}},{key:"isAnimatable",value:function(e){return["x","y","width","height","rotation","scale","opacity","brightness","contrast","saturate"].includes(e)}},{key:"getPropertyConstraints",value:function(e){return{x:{min:-1e3,max:2e3,step:1},y:{min:-1e3,max:2e3,step:1},width:{min:1,max:2e3,step:1},height:{min:1,max:2e3,step:1},fontSize:{min:8,max:72,step:1},borderWidth:{min:0,max:20,step:1},borderRadius:{min:0,max:100,step:1},rotation:{min:-180,max:180,step:1},scale:{min:10,max:200,step:5},opacity:{min:0,max:100,step:1},brightness:{min:0,max:200,step:5},contrast:{min:0,max:200,step:5},saturate:{min:0,max:200,step:5},shadowOffsetX:{min:-50,max:50,step:1},shadowOffsetY:{min:-50,max:50,step:1}}[e]||{}}}],t&&Ft(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()),Pt={special:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},layout:{backgroundColor:{disabled:!1,default:"#f8fafc"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},text:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},shape:{backgroundColor:{disabled:!1,default:"#e5e7eb"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},media:{backgroundColor:{disabled:!1,default:"#f3f4f6"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},dynamic:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}}},Dt={product_table:"special",customer_info:"special",company_logo:"special",company_info:"special",order_number:"special",document_type:"special","progress-bar":"special","layout-header":"layout","layout-footer":"layout","layout-sidebar":"layout","layout-section":"layout","layout-container":"layout","layout-section-divider":"layout","layout-spacer":"layout","layout-two-column":"layout","layout-three-column":"layout",text:"text","dynamic-text":"text","conditional-text":"text",counter:"text","date-dynamic":"text",currency:"text",formula:"text",rectangle:"shape",line:"shape","shape-rectangle":"shape","shape-circle":"shape","shape-line":"shape","shape-arrow":"shape","shape-triangle":"shape","shape-star":"shape",divider:"shape",image:"media","image-upload":"media",logo:"media",barcode:"media",qrcode:"media","qrcode-dynamic":"media",icon:"media","table-dynamic":"dynamic","gradient-box":"dynamic","shadow-box":"dynamic","rounded-box":"dynamic","border-box":"dynamic","background-pattern":"dynamic",watermark:"dynamic","invoice-header":"layout","invoice-address-block":"layout","invoice-info-block":"layout","invoice-products-table":"special","invoice-totals-block":"layout","invoice-payment-terms":"layout","invoice-legal-footer":"layout","invoice-signature-block":"layout"},Mt=function(e,t){var r=Pt[Dt[e]||"text"];return!r||!r[t]||!r[t].disabled},It=function(e,t,r){var n;if(!Mt(e,t))return{valid:!1,reason:(null===(n=Pt[Dt[e]||"text"][t])||void 0===n?void 0:n.reason)||"PropriÃ©tÃ© non autorisÃ©e"};switch(t){case"backgroundColor":if("string"!=typeof r)return{valid:!1,reason:"La couleur doit Ãªtre une chaÃ®ne"};break;case"borderWidth":if("number"!=typeof r||r<0)return{valid:!1,reason:"La largeur de bordure doit Ãªtre un nombre positif"};break;case"fontSize":if("number"!=typeof r||r<=0)return{valid:!1,reason:"La taille de police doit Ãªtre un nombre positif"};break;case"width":case"height":if("number"!=typeof r||r<=0)return{valid:!1,reason:"Les dimensions doivent Ãªtre positives"}}return{valid:!0}},Ht=function(e,t,r){var n={borderWidth:0,fontSize:14,width:100,height:50,padding:8};return void 0!==n[t]?n[t]:{backgroundColor:"transparent",borderColor:"transparent",color:"#000000",fontFamily:"Arial, sans-serif"}[t]||r};function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach(function(t){Ut(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ut(e,t,r){return(t=function(e){var t=function(e){if("object"!=Lt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Lt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Zt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Xt=n().useState,Yt=n().useCallback,Jt=n().useEffect,Kt=n().useMemo,Qt=n().useCallback,$t=n().useEffect,er=n().useRef;function tr(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return rr(d,"_invoke",function(r,n,o){var a,l,c,d=0,s=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,n){for(l=r,c=n,t=0;!u&&d&&!o&&t<s.length;t++){var o,a=s[t],p=f.p,m=a[2];r>3?(o=m===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,n}return function(o,s,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,m),l=s,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(r,o,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(rr(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,rr(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,rr(u,"constructor",d),rr(d,"constructor",c),c.displayName="GeneratorFunction",rr(d,o,"GeneratorFunction"),rr(u),rr(u,o,"Generator"),rr(u,n,function(){return this}),rr(u,"toString",function(){return"[object Generator]"}),(tr=function(){return{w:a,m:f}})()}function rr(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}rr=function(e,t,r,n){function a(t,r){rr(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},rr(e,t,r,n)}function nr(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function or(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){nr(a,n,o,i,l,"next",e)}function l(e){nr(a,n,o,i,l,"throw",e)}i(void 0)})}}function ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||lr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e){return function(e){if(Array.isArray(e))return cr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){if(e){if("string"==typeof e)return cr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cr(e,t):void 0}}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var dr=n().useState,sr=n().useEffect,ur=n().useCallback,fr=n().useMemo,pr={text:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["text","variables"],effects:["opacity","shadows","filters"]},"layout-header":{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["text","variables"],effects:["opacity","shadows","filters"]},"layout-footer":{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["text","variables"],effects:["opacity","shadows","filters"]},"layout-section":{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["text","variables"],effects:["opacity","shadows","filters"]},logo:{appearance:["colors","borders","effects"],layout:["position","dimensions","transform","layers"],content:["image"],effects:["opacity","shadows","filters"]},company_logo:{appearance:["colors","borders","effects"],layout:["position","dimensions","transform","layers"],content:["image"],effects:["opacity","shadows","filters"]},product_table:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["table"],effects:["opacity","shadows","filters"]},customer_info:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["customer_fields"],effects:["opacity","shadows","filters"]},company_info:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["company_fields"],effects:["opacity","shadows","filters"]},document_type:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["document_type"],effects:["opacity","shadows","filters"]},order_number:{appearance:["colors","font","borders","effects"],layout:["position","dimensions","transform","layers"],content:["order_number"],effects:["opacity","shadows","filters"]},default:{appearance:["colors","borders","effects"],layout:["position","dimensions","transform","layers"],content:[],effects:["opacity","shadows","filters"]}},mr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e)return t;var r=parseInt(e,10);return isNaN(r)?t:r},hr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e)return t;var r=parseFloat(e);return isNaN(r)?t:r},br=function(e){var t,r=e.label,o=e.value,a=e.onChange,i=e.presets,l=void 0===i?[]:i,c=e.defaultColor,d=void 0===c?"#ffffff":c,s=(t=o)&&"transparent"!==t?!t.startsWith("#")||4!==t.length&&7!==t.length?d:t:d;return n().createElement("div",{className:"property-row"},n().createElement("label",null,r,":"),n().createElement("div",{className:"color-picker-container"},n().createElement("input",{type:"color",value:s,onChange:function(e){var t=e.target.value;a(t)},className:"color-input",title:"Couleur actuelle: ".concat(o||"transparent")}),n().createElement("div",{className:"color-presets"},l.filter(function(e){return e&&"transparent"!==e&&e.startsWith("#")}).map(function(e,t){return n().createElement("button",{key:t,className:"color-preset ".concat(o===e?"active":""),style:{backgroundColor:e,border:o===e?"2px solid #2563eb":"1px solid #e2e8f0"},onClick:function(){return a(e)},title:"".concat(r,": ").concat(e),"aria-label":"SÃ©lectionner la couleur ".concat(e)})}),l.includes("transparent")&&n().createElement("button",{className:"color-preset transparent ".concat("transparent"===o?"active":""),style:{background:"transparent"===o?"repeating-conic-gradient(#f0f0f0 0% 25%, #ffffff 0% 50%) 50% / 10px 10px":"repeating-conic-gradient(#e2e8f0 0% 25%, #ffffff 0% 50%) 50% / 10px 10px",border:"transparent"===o?"2px solid #2563eb":"1px solid #e2e8f0"},onClick:function(){return a("transparent")},title:"".concat(r,": Transparent"),"aria-label":"Rendre transparent"}))))},gr=function(e){var t,r,o,a,i,l,c,d,s,u,f=e.elementId,p=e.properties,m=e.onPropertyChange;return n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸŽ¨ Police & Style"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Famille:"),n().createElement("select",{value:p.fontFamily||"Inter",onChange:function(e){return m(f,"fontFamily",e.target.value)}},n().createElement("option",{value:"Inter"},"Inter"),n().createElement("option",{value:"Arial"},"Arial"),n().createElement("option",{value:"Helvetica"},"Helvetica"),n().createElement("option",{value:"Times New Roman"},"Times New Roman"),n().createElement("option",{value:"Courier New"},"Courier New"),n().createElement("option",{value:"Georgia"},"Georgia"),n().createElement("option",{value:"Verdana"},"Verdana"),n().createElement("option",{value:"Roboto"},"Roboto"),n().createElement("option",{value:"Open Sans"},"Open Sans"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Taille:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"8",max:"72",value:null!==(t=p.fontSize)&&void 0!==t?t:14,onChange:function(e){return m(f,"fontSize",mr(e.target.value,14))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(r=p.fontSize)&&void 0!==r?r:14,"px"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Interligne:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0.8",max:"3",step:"0.1",value:null!==(o=p.lineHeight)&&void 0!==o?o:1.2,onChange:function(e){return m(f,"lineHeight",hr(e.target.value,1.2))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(a=p.lineHeight)&&void 0!==a?a:1.2))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Espacement lettres:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"-2",max:"10",step:"0.1",value:null!==(i=p.letterSpacing)&&void 0!==i?i:0,onChange:function(e){return m(f,"letterSpacing",hr(e.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(l=p.letterSpacing)&&void 0!==l?l:0,"px"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"OpacitÃ© texte:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:null!==(c=p.opacity)&&void 0!==c?c:1,onChange:function(e){return m(f,"opacity",hr(e.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},Math.round(100*(null!==(d=p.opacity)&&void 0!==d?d:1)),"%"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ombre texte:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"5",step:"0.1",value:null!==(s=p.textShadowBlur)&&void 0!==s?s:0,onChange:function(e){return m(f,"textShadowBlur",hr(e.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(u=p.textShadowBlur)&&void 0!==u?u:0,"px"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Style du texte:"),n().createElement("div",{className:"style-buttons-grid"},n().createElement("button",{className:"style-btn ".concat("bold"===p.fontWeight?"active":""),onClick:function(){return m(f,"fontWeight","bold"===p.fontWeight?"normal":"bold")},title:"Gras"},n().createElement("strong",null,"B")),n().createElement("button",{className:"style-btn ".concat("italic"===p.fontStyle?"active":""),onClick:function(){return m(f,"fontStyle","italic"===p.fontStyle?"normal":"italic")},title:"Italique"},n().createElement("em",null,"I")),n().createElement("button",{className:"style-btn ".concat((p.textDecoration||"").includes("underline")?"active":""),onClick:function(){var e=p.textDecoration?p.textDecoration.split(" "):[],t=e.includes("underline")?e.filter(function(e){return"underline"!==e}):[].concat(ir(e),["underline"]);m(f,"textDecoration",t.join(" ")||"none")},title:"SoulignÃ©"},n().createElement("u",null,"U")),n().createElement("button",{className:"style-btn ".concat((p.textDecoration||"").includes("line-through")?"active":""),onClick:function(){var e=p.textDecoration?p.textDecoration.split(" "):[],t=e.includes("line-through")?e.filter(function(e){return"line-through"!==e}):[].concat(ir(e),["line-through"]);m(f,"textDecoration",t.join(" ")||"none")},title:"BarrÃ©"},n().createElement("s",null,"S")))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Alignement:"),n().createElement("div",{className:"alignment-buttons"},[{value:"left",icon:"â¬…ï¸",label:"Gauche"},{value:"center",icon:"â¬Œ",label:"Centre"},{value:"right",icon:"âž¡ï¸",label:"Droite"},{value:"justify",icon:"â¬Œâ¬…ï¸",label:"JustifiÃ©"}].map(function(e){var t=e.value,r=e.icon,o=e.label;return n().createElement("button",{key:t,className:"align-btn ".concat(p.textAlign===t?"active":""),onClick:function(){return m(f,"textAlign",t)},title:o},r)}))))};const yr=(0,r.memo)(function(e){var t=e.selectedElements,r=e.elements,o=e.onPropertyChange,a=e.onBatchUpdate,i=ar(dr("#ffffff"),2),l=i[0],c=i[1],d=ar(dr(0),2),s=d[0],u=d[1],f=ar(dr("#000000"),2),p=f[0],m=f[1],h=ar(dr(!1),2),b=h[0],g=h[1],y=ar(dr(!1),2),v=y[0],x=y[1],w=function(e,t,r){var n=Vt(Xt({}),2),o=n[0],a=n[1],i=Vt(Xt("appearance"),2),l=i[0],c=i[1],d=Kt(function(){return e.length>0?t.find(function(t){return t.id===e[0]}):null},[e,t]);Jt(function(){if(d){var e={color:"#333333",backgroundColor:"transparent",borderColor:"#dddddd",borderWidth:0,borderStyle:"solid",borderRadius:4,fontSize:14,fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",lineHeight:1.2,letterSpacing:0},t=d.type,r=qt({},e);Object.keys(e).forEach(function(e){var n=function(e,t){var r=Pt[Dt[e]||"text"];return r&&r[t]&&void 0!==r[t].default?r[t].default:null}(t,e);null!==n&&(r[e]=n),"special"===Dt[t]&&"backgroundColor"===e&&(r[e]="transparent")});var n=qt(qt({},r),d);Object.keys(r).forEach(function(e){if(Mt(t,e))"special"!==Dt[t]||"backgroundColor"!==e||n[e]||(n[e]="transparent");else{var r=Ht(0,e,n[e]);r!==n[e]&&(n[e]=r)}}),Object.keys(n).forEach(function(e){It(t,e,n[e]).valid||(n[e]=Ht(0,e,n[e]))}),a(n)}else a({})},[null==d?void 0:d.id]);var s=Yt(function(e,n,o){var i=t.find(function(t){return t.id===e});if(i){var l=o;if(It(i.type,n,o).valid){if("boolean"!=typeof o&&!n.startsWith("columns."))try{var c=jt.validateProperty(n,o);void 0!==c&&(l=c)}catch(e){}a(function(e){var t;return n.includes(".")?function(e,t,r){var n=t.split("."),o=n.pop();n.reduce(function(e,t){return e[t]&&"object"===Lt(e[t])?e[t]=qt({},e[t]):e[t]={},e[t]},e)[o]=r}(t=qt({},e),n,l):t=qt(qt({},e),{},Ut({},n,l)),t}),r(e,n,l)}}},[r,t]),u=Yt(function(e,t){var r={"color-dark":{color:"#1e293b"},"color-light":{color:"#f8fafc"},"color-primary":{color:"#2563eb"},"color-success":{color:"#16a34a"},"color-warning":{color:"#ca8a04"},"color-error":{color:"#dc2626"},"text-title":{fontSize:24,fontWeight:"bold",textAlign:"center"},"text-subtitle":{fontSize:18,fontWeight:"bold",textAlign:"left"},"text-body":{fontSize:14,fontWeight:"normal",textAlign:"left"},"text-caption":{fontSize:12,fontWeight:"normal",textAlign:"left"},"shape-rounded":{borderRadius:8},"shape-circle":{borderRadius:50},"shape-square":{borderRadius:0},"effect-shadow":{shadow:!0,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2},"effect-glow":{shadow:!0,shadowColor:"#2563eb",shadowOffsetX:0,shadowOffsetY:0},"effect-none":{shadow:!1,brightness:100,contrast:100,saturate:100}};r[t]&&Object.entries(r[t]).forEach(function(t){var r=Vt(t,2),n=r[0],o=r[1];s(e,n,o)})},[s]),f=Yt(function(e){Object.entries({x:50,y:50,width:100,height:50,backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:1,borderStyle:"solid",borderRadius:4,color:"#333333",fontSize:14,fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",lineHeight:1.2,letterSpacing:0,opacity:100,rotation:0,scale:100,shadow:!1,brightness:100,contrast:100,saturate:100}).forEach(function(t){var r=Vt(t,2),n=r[0],o=r[1];s(e,n,o)})},[s]);return{localProperties:o,activeTab:l,setActiveTab:c,selectedElement:d,handlePropertyChange:s,applyPropertyPreset:u,resetProperties:f,validatePropertyValue:function(e,t){switch(e){case"x":case"y":case"width":case"height":return Math.max(0,parseInt(t)||0);case"fontSize":return Math.max(8,Math.min(72,parseInt(t)||14));case"lineHeight":return Math.max(.5,Math.min(5,parseFloat(t)||1.2));case"letterSpacing":return Math.max(-5,Math.min(20,parseFloat(t)||0));case"borderWidth":return Math.max(0,Math.min(20,parseInt(t)||0));case"borderStyle":return["solid","dashed","dotted","double"].includes(t)?t:"solid";case"borderRadius":return Math.max(0,Math.min(100,parseInt(t)||0));case"rotation":return((parseInt(t)||0)%360+360)%360;case"scale":return Math.max(10,Math.min(200,parseInt(t)||100));case"opacity":return Math.max(0,Math.min(100,parseInt(t)||100));case"brightness":case"contrast":case"saturate":return Math.max(0,Math.min(200,parseInt(t)||100));case"shadowOffsetX":case"shadowOffsetY":return Math.max(-50,Math.min(50,parseInt(t)||0));default:return t}}}}(t,r,o),E=w.localProperties,S=w.activeTab,C=w.setActiveTab,z=w.handlePropertyChange,_=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3e3,a=er(new Map),i=er(null),l=er(new Map),c=Qt(function(e,t,r){i.current&&clearTimeout(i.current);var l="".concat(e,".").concat(t);a.current.set(l,{elementId:e,property:t,value:r}),n&&(i.current=setTimeout(function(){s()},o))},[n,o]),d=Qt(function(e,r,n){i.current&&clearTimeout(i.current),t(e,r,n);var o="".concat(e,".").concat(r);l.current.set(o,n),a.current.delete(o)},[t]),s=Qt(function(){if(0!==a.current.size){var e=Array.from(a.current.values()),n=e.reduce(function(e,t){return e[t.elementId]||(e[t.elementId]={}),e[t.elementId][t.property]=t.value,e},{});r&&Object.keys(n).length>1?r(n):e.forEach(function(e){var r=e.elementId,n=e.property,o=e.value;t(r,n,o)}),e.forEach(function(e){var t=e.elementId,r=e.property,n=e.value,o="".concat(t,".").concat(r);l.current.set(o,n)}),a.current.clear()}},[t,r]),u=Qt(function(){s()},[s]),f=Qt(function(){return a.current.size>0},[]),p=Qt(function(e){var t=[];return a.current.forEach(function(r,n){r.elementId===e&&t.push(r)}),t},[]),m=Qt(function(e){var t=[];a.current.forEach(function(r,n){r.elementId===e&&t.push(n)}),t.forEach(function(e){return a.current.delete(e)})},[]),h=Qt(function(e,t){var r="".concat(e,".").concat(t),n=l.current.get(r);return void 0!==n?(a.current.delete(r),n):null},[]),b=Qt(function(e,t,r,n){var o=r;return n&&(o=n(r)),o=g(t,o),c(e,t,o),o},[c]),g=function(e,t){switch(e){case"x":case"y":case"width":case"height":return Math.max(0,parseInt(t)||0);case"fontSize":return Math.max(8,Math.min(72,parseInt(t)||14));case"borderWidth":return Math.max(0,Math.min(20,parseInt(t)||0));case"borderRadius":return Math.max(0,Math.min(100,parseInt(t)||0));case"rotation":return((parseInt(t)||0)%360+360)%360;case"scale":return Math.max(10,Math.min(200,parseInt(t)||100));case"opacity":return Math.max(0,Math.min(100,parseInt(t)||100));case"brightness":case"contrast":case"saturate":return Math.max(0,Math.min(200,parseInt(t)||100));case"shadowOffsetX":case"shadowOffsetY":return Math.max(-50,Math.min(50,parseInt(t)||0));default:return t}};return $t(function(){return function(){i.current&&clearTimeout(i.current)}},[]),$t(function(){n&&a.current.size>0&&s()},[e,n,s]),{sync:c,syncImmediate:d,syncPending:s,forceSync:u,hasPendingChanges:f,getPendingChanges:p,cancelPendingChanges:m,validateAndSync:b,restoreLastSaved:h,pendingChangesCount:a.current.size}}(r,o,a,!0,3e3),k=_.syncImmediate,T=(_.syncBatch,fr(function(){return t.length>0?r.find(function(e){return e.id===t[0]}):null},[t,r]));sr(function(){if(T){c(T.backgroundColor||"#ffffff");var e=T.borderWidth&&T.borderWidth>0?T.borderWidth:1;u(e),m(T.borderColor||"#000000")}},[T]),sr(function(){var e=!!E.backgroundColor&&"transparent"!==E.backgroundColor;g(e)},[E.backgroundColor]),sr(function(){x(!!E.border&&(E.borderWidth||0)>0)},[E.border,E.borderWidth]);var R=ur(function(e,t,r){"color"===t&&"transparent"===r&&(r="#333333");var n=r;if("boolean"!=typeof r&&!t.startsWith("columns."))try{if(null==(n=jt.validateProperty(t,r)))return void console.warn("PropriÃ©tÃ© invalide: ".concat(t," = ").concat(r))}catch(e){return void console.warn("Erreur de validation pour ".concat(t,":"),e)}z(e,t,n),["x","y","width","height"].includes(t)&&k(e,t,n)},[z,k]),B=(ur(function(e,t){null==T||!T.type||Mt(T.type,"backgroundColor")?t?(null!=T&&T.backgroundColor&&"transparent"!==T.backgroundColor?c(T.backgroundColor):l||c("#ffffff"),R(e,"backgroundColor","transparent")):R(e,"backgroundColor",l||"#ffffff"):console.warn("Fond non contrÃ´lable pour ce type d'Ã©lÃ©ment")},[null==T?void 0:T.backgroundColor,l,R,null==T?void 0:T.type]),ur(function(e,t){if(t)null!=T&&T.borderWidth&&T.borderWidth>0?u(T.borderWidth):u(2),R(e,"borderWidth",0);else{var r=Math.max(s||2,2);R(e,"borderWidth",r)}},[null==T?void 0:T.borderWidth,s,R]),ur(function(){return n().createElement("div",{className:"properties-tabs"},n().createElement("button",{className:"tab-btn ".concat("appearance"===S?"active":""),onClick:function(){return C("appearance")}},"ðŸŽ¨ Apparence"),n().createElement("button",{className:"tab-btn ".concat("layout"===S?"active":""),onClick:function(){return C("layout")}},"ðŸ“ Mise en page"),n().createElement("button",{className:"tab-btn ".concat("content"===S?"active":""),onClick:function(){return C("content")}},"ðŸ“ Contenu"),n().createElement("button",{className:"tab-btn ".concat("effects"===S?"active":""),onClick:function(){return C("effects")}},"âœ¨ Effets"))},[S])),N=ur(function(){var e,r,o,a,i,l,c,d,f,h,g,y,w,C,z,_,k;if(!T)return n().createElement("div",{className:"no-selection"},n().createElement("div",{className:"no-selection-icon"},"ðŸ‘†"),n().createElement("p",null,"SÃ©lectionnez un Ã©lÃ©ment pour modifier ses propriÃ©tÃ©s"),t.length>1&&n().createElement("p",{className:"selection-info"},t.length," Ã©lÃ©ments sÃ©lectionnÃ©s"));var B=(pr[T.type]||pr.default)[S]||[];switch(S){case"appearance":return n().createElement("div",{className:"tab-content"},n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸŽ¨ Couleurs & Apparence"),n().createElement(br,{label:"Texte",value:E.color,onChange:function(e){R(T.id,"color",e)},presets:["#1e293b","#334155","#475569","#64748b","#94a3b8","#cbd5e1","#000000"],defaultColor:"#333333"}),n().createElement("div",{className:"property-row"},n().createElement("span",null,"Fond activÃ©:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:b,disabled:!1,onChange:function(e){e.target.checked?R(T.id,"backgroundColor","#ffffff"):R(T.id,"backgroundColor","transparent")}}),n().createElement("span",{className:"toggle-slider"}))),n().createElement("div",{style:{display:b?"block":"none",transition:"opacity 0.3s ease"}},n().createElement(br,{label:"Fond",value:"transparent"===E.backgroundColor?"#ffffff":E.backgroundColor,onChange:function(e){R(T.id,"backgroundColor",e)},presets:["transparent","#ffffff","#f8fafc","#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8"]}),n().createElement("div",{className:"property-row"},n().createElement("label",null,"OpacitÃ© fond:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:null!==(e=E.backgroundOpacity)&&void 0!==e?e:1,onChange:function(e){return R(T.id,"backgroundOpacity",hr(e.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},Math.round(100*(null!==(r=E.backgroundOpacity)&&void 0!==r?r:1)),"%"))))),B.includes("font")&&"product_table"!==T.type&&n().createElement(gr,{elementId:T.id,properties:E,onPropertyChange:R}),B.includes("borders")&&E.borderWidth>=0&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ”² Bordures & Coins Arrondis"),n().createElement("div",{className:"property-row"},n().createElement("span",null,"Bordures activÃ©es:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:v,onChange:function(e){if(e.target.checked){var t=s||1,r=p||"#000000";R(T.id,"border",!0),R(T.id,"borderWidth",t),R(T.id,"borderColor",r),x(!0)}else u(E.borderWidth||1),m(E.borderColor||"#000000"),R(T.id,"border",!1),R(T.id,"borderWidth",0),x(!1)}}),n().createElement("span",{className:"toggle-slider"}))),n().createElement("div",{style:{display:E.borderWidth>0?"block":"none",transition:"opacity 0.3s ease"}},n().createElement(br,{label:"Couleur bordure",value:E.borderColor||"#000000",onChange:function(e){return R(T.id,"borderColor",e)},presets:["#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#000000"]}),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Style bordure:"),n().createElement("select",{value:E.borderStyle||"solid",onChange:function(e){return R(T.id,"borderStyle",e.target.value)},className:"styled-select"},n().createElement("option",{value:"solid"},"Continue"),n().createElement("option",{value:"dashed"},"Tirets"),n().createElement("option",{value:"dotted"},"PointillÃ©s"),n().createElement("option",{value:"double"},"Double"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ã‰paisseur bordure:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"10",value:null!==(o=E.borderWidth)&&void 0!==o?o:1,onChange:function(e){return R(T.id,"borderWidth",mr(e.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(a=E.borderWidth)&&void 0!==a?a:1,"px"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Coins arrondis:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"50",value:null!==(i=E.borderRadius)&&void 0!==i?i:4,onChange:function(e){return R(T.id,"borderRadius",mr(e.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(l=E.borderRadius)&&void 0!==l?l:4,"px"))))),B.includes("effects")&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"âœ¨ Effets"),n().createElement(br,{label:"Ombre",value:E.boxShadowColor||"#000000",onChange:function(e){return R(T.id,"boxShadowColor",e)},presets:["#000000","#ffffff","#64748b","#ef4444","#3b82f6"]}),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Flou ombre:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"20",value:null!==(c=E.boxShadowBlur)&&void 0!==c?c:0,onChange:function(e){return R(T.id,"boxShadowBlur",mr(e.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(d=E.boxShadowBlur)&&void 0!==d?d:0,"px"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"DÃ©calage ombre:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"10",value:null!==(f=E.boxShadowSpread)&&void 0!==f?f:0,onChange:function(e){return R(T.id,"boxShadowSpread",mr(e.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(h=E.boxShadowSpread)&&void 0!==h?h:0,"px")))));case"layout":return n().createElement("div",{className:"tab-content"},B.includes("position")&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ“ Position PrÃ©cise"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"X:"),n().createElement("div",{className:"input-with-unit"},n().createElement("input",{type:"number",value:Math.round(E.x||0),onChange:function(e){return R(T.id,"x",mr(e.target.value,0))},step:"1"}),n().createElement("span",{className:"unit"},"mm"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Y:"),n().createElement("div",{className:"input-with-unit"},n().createElement("input",{type:"number",value:Math.round(E.y||0),onChange:function(e){return R(T.id,"y",mr(e.target.value,0))},step:"1"}),n().createElement("span",{className:"unit"},"mm")))),B.includes("dimensions")&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ“ Dimensions"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Largeur:"),n().createElement("div",{className:"input-with-unit"},n().createElement("input",{type:"number",value:Math.round(E.width||100),onChange:function(e){return R(T.id,"width",mr(e.target.value,100))},min:"1",step:"1"}),n().createElement("span",{className:"unit"},"mm"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Hauteur:"),n().createElement("div",{className:"input-with-unit"},n().createElement("input",{type:"number",value:Math.round(E.height||50),onChange:function(e){return R(T.id,"height",mr(e.target.value,50))},min:"1",step:"1"}),n().createElement("span",{className:"unit"},"mm"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ratio:"),n().createElement("div",{className:"ratio-buttons"},n().createElement("button",{className:"ratio-btn",onClick:function(){var e=.75*(E.width||100);R(T.id,"height",Math.round(e))},title:"Format 4:3"},"4:3"),n().createElement("button",{className:"ratio-btn",onClick:function(){var e=(E.width||100)*(297/210);R(T.id,"height",Math.round(e))},title:"Format A4"},"A4"),n().createElement("button",{className:"ratio-btn",onClick:function(){var e=E.width||100;R(T.id,"height",Math.round(e))},title:"CarrÃ©"},"1:1")))),B.includes("transform")&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ”„ Transformation"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Rotation:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"-180",max:"180",value:E.rotation||0,onChange:function(e){return R(T.id,"rotation",mr(e.target.value,0))},onDoubleClick:function(){return R(T.id,"rotation",0)},className:"slider"}),n().createElement("span",{className:"slider-value"},E.rotation||0,"Â°"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Rotation rapide:"),n().createElement("div",{className:"rotation-buttons"},n().createElement("button",{className:"rotation-btn",onClick:function(){return R(T.id,"rotation",0)},title:"Rotation 0Â°"},"â†» 0Â°"),n().createElement("button",{className:"rotation-btn",onClick:function(){return R(T.id,"rotation",90)},title:"Rotation 90Â°"},"â†» 90Â°"),n().createElement("button",{className:"rotation-btn",onClick:function(){return R(T.id,"rotation",180)},title:"Rotation 180Â°"},"â†» 180Â°"),n().createElement("button",{className:"rotation-btn",onClick:function(){return R(T.id,"rotation",-90)},title:"Rotation -90Â°"},"â†º -90Â°")))),B.includes("layers")&&"product_table"!==T.type&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ“š Calques"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Profondeur (Z-index):"),n().createElement("input",{type:"number",value:E.zIndex||0,onChange:function(e){return R(T.id,"zIndex",mr(e.target.value,0))},min:"0",max:"100",step:"1"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Actions:"),n().createElement("div",{className:"layer-actions"},n().createElement("button",{className:"layer-btn",onClick:function(){return R(T.id,"zIndex",(E.zIndex||0)+1)},title:"Mettre devant"},"â¬†ï¸ Devant"),n().createElement("button",{className:"layer-btn",onClick:function(){return R(T.id,"zIndex",Math.max(0,(E.zIndex||0)-1))},title:"Mettre derriÃ¨re"},"â¬‡ï¸ DerriÃ¨re")))));case"content":return n().createElement("div",{className:"tab-content"},B.includes("text")&&"text"===T.type&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ“ Contenu texte"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Texte:"),n().createElement("textarea",{value:E.text||"",onChange:function(e){return R(T.id,"text",e.target.value)},rows:4,placeholder:"Saisissez votre texte ici..."})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Variables dynamiques:"),n().createElement("div",{className:"variables-list"},n().createElement("button",{className:"variable-btn",onClick:function(){var e=E.text||"";R(T.id,"text",e+"{{date}}")}},"ðŸ“… Date"),n().createElement("button",{className:"variable-btn",onClick:function(){var e=E.text||"";R(T.id,"text",e+"{{order_number}}")}},"[Ord] NÂ° commande"),n().createElement("button",{className:"variable-btn",onClick:function(){var e=E.text||"";R(T.id,"text",e+"{{customer_name}}")}},"ðŸ‘¤ Client"),n().createElement("button",{className:"variable-btn",onClick:function(){var e=E.text||"";R(T.id,"text",e+"{{total}}")}},"ðŸ’° Total")))),B.includes("variables")&&("layout-header"===T.type||"layout-footer"===T.type||"layout-section"===T.type)&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ”„ Variables dynamiques"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Variables disponibles:"),n().createElement("div",{className:"variables-list"},n().createElement("button",{className:"variable-btn",onClick:function(){var e=E.text||"";R(T.id,"text",e+"{{date}}")}},"ðŸ“… Date"),n().createElement("button",{className:"variable-btn",onClick:function(){var e=E.text||"";R(T.id,"text",e+"{{order_number}}")}},"[Ord] NÂ° commande"),n().createElement("button",{className:"variable-btn",onClick:function(){var e=E.text||"";R(T.id,"text",e+"{{customer_name}}")}},"ðŸ‘¤ Client"),n().createElement("button",{className:"variable-btn",onClick:function(){var e=E.text||"";R(T.id,"text",e+"{{total}}")}},"ðŸ’° Total")))),B.includes("image")&&("logo"===T.type||"company_logo"===T.type)&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"[Img] Image"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"URL de l'image:"),n().createElement("input",{type:"url",value:E.imageUrl||"",onChange:function(e){return R(T.id,"imageUrl",e.target.value)},placeholder:"https://exemple.com/logo.jpg"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Alt text:"),n().createElement("input",{type:"text",value:E.alt||"",onChange:function(e){return R(T.id,"alt",e.target.value)},placeholder:"Logo de l'entreprise"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Adaptation:"),n().createElement("select",{value:E.fit||"contain",onChange:function(e){return R(T.id,"fit",e.target.value)}},n().createElement("option",{value:"contain"},"Contenir (intÃ©gral)"),n().createElement("option",{value:"cover"},"Couvrir (zoom)"),n().createElement("option",{value:"fill"},"Remplir"),n().createElement("option",{value:"none"},"Aucune")))),B.includes("table")&&"product_table"===T.type&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ“Š Tableau produits"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Colonnes Ã  afficher:"),n().createElement("div",{className:"checkbox-group"},[{key:"image",label:"Image"},{key:"name",label:"Nom"},{key:"sku",label:"SKU"},{key:"quantity",label:"QuantitÃ©"},{key:"price",label:"Prix"},{key:"total",label:"Total"}].map(function(e){var t,r,o=e.key,a=e.label;return n().createElement("label",{key:o,className:"checkbox-item"},n().createElement("input",{type:"checkbox",checked:null===(t=null===(r=E.columns)||void 0===r?void 0:r[o])||void 0===t||t,onChange:function(e){R(T.id,"columns.".concat(o),e.target.checked)}}),a)}))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Style du tableau:"),n().createElement("div",{className:"table-style-selector"},[{value:"default",label:"DÃ©faut",headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#f1f5f9",altRowBg:"#fafbfc",borderWidth:1,textColor:"#334155"},{value:"classic",label:"Classique",headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#334155",altRowBg:"#ffffff",borderWidth:1.5,textColor:"#ffffff"},{value:"striped",label:"AlternÃ©",headerBg:"#3b82f6",headerBorder:"#2563eb",rowBorder:"#e2e8f0",altRowBg:"#f8fafc",borderWidth:1,textColor:"#ffffff"},{value:"bordered",label:"EncadrÃ©",headerBg:"#ffffff",headerBorder:"#374151",rowBorder:"#d1d5db",altRowBg:"#ffffff",borderWidth:2,textColor:"#111827"},{value:"minimal",label:"Minimal",headerBg:"#ffffff",headerBorder:"#f3f4f6",rowBorder:"#f9fafb",altRowBg:"#ffffff",borderWidth:.5,textColor:"#6b7280"},{value:"modern",label:"Moderne",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",headerBorder:"#5b21b6",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1,textColor:"#ffffff"},{value:"blue_ocean",label:"OcÃ©an Bleu",gradient:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,textColor:"#ffffff"},{value:"emerald_forest",label:"ForÃªt Ã‰meraude",gradient:"linear-gradient(135deg, #064e3b 0%, #10b981 100%)",headerBorder:"#065f46",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,textColor:"#ffffff"},{value:"sunset_orange",label:"Coucher Orange",gradient:"linear-gradient(135deg, #9a3412 0%, #f97316 100%)",headerBorder:"#c2410c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,textColor:"#ffffff"},{value:"royal_purple",label:"Royal Violet",gradient:"linear-gradient(135deg, #581c87 0%, #a855f7 100%)",headerBorder:"#7c3aed",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,textColor:"#ffffff"},{value:"rose_pink",label:"Rose Bonbon",gradient:"linear-gradient(135deg, #be185d 0%, #f472b6 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,textColor:"#ffffff"},{value:"teal_aqua",label:"Aigue-marine",gradient:"linear-gradient(135deg, #0f766e 0%, #14b8a6 100%)",headerBorder:"#0d9488",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,textColor:"#ffffff"},{value:"crimson_red",label:"Rouge Cramoisi",gradient:"linear-gradient(135deg, #991b1b 0%, #ef4444 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,textColor:"#ffffff"},{value:"amber_gold",label:"Or AmbrÃ©",gradient:"linear-gradient(135deg, #92400e 0%, #f59e0b 100%)",headerBorder:"#d97706",rowBorder:"#fef3c7",altRowBg:"#fffbeb",borderWidth:1.5,textColor:"#ffffff"},{value:"indigo_night",label:"Nuit Indigo",gradient:"linear-gradient(135deg, #312e81 0%, #6366f1 100%)",headerBorder:"#4338ca",rowBorder:"#e0e7ff",altRowBg:"#eef2ff",borderWidth:1.5,textColor:"#ffffff"},{value:"slate_gray",label:"Ardoise",gradient:"linear-gradient(135deg, #374151 0%, #6b7280 100%)",headerBorder:"#4b5563",rowBorder:"#f3f4f6",altRowBg:"#f9fafb",borderWidth:1.5,textColor:"#ffffff"},{value:"coral_sunset",label:"Corail Couchant",gradient:"linear-gradient(135deg, #c2410c 0%, #fb7185 100%)",headerBorder:"#ea580c",rowBorder:"#fed7d7",altRowBg:"#fef7f7",borderWidth:1.5,textColor:"#ffffff"},{value:"mint_green",label:"Menthe FraÃ®che",gradient:"linear-gradient(135deg, #065f46 0%, #34d399 100%)",headerBorder:"#047857",rowBorder:"#d1fae5",altRowBg:"#ecfdf5",borderWidth:1.5,textColor:"#ffffff"},{value:"violet_dream",label:"RÃªve Violet",gradient:"linear-gradient(135deg, #6d28d9 0%, #c084fc 100%)",headerBorder:"#8b5cf6",rowBorder:"#ede9fe",altRowBg:"#f5f3ff",borderWidth:1.5,textColor:"#ffffff"},{value:"sky_blue",label:"Ciel Bleu",gradient:"linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%)",headerBorder:"#0284c7",rowBorder:"#bae6fd",altRowBg:"#f0f9ff",borderWidth:1.5,textColor:"#ffffff"},{value:"forest_green",label:"Vert ForÃªt",gradient:"linear-gradient(135deg, #14532d 0%, #22c55e 100%)",headerBorder:"#15803d",rowBorder:"#bbf7d0",altRowBg:"#f0fdf4",borderWidth:1.5,textColor:"#ffffff"},{value:"ruby_red",label:"Rouge Rubis",gradient:"linear-gradient(135deg, #b91c1c 0%, #f87171 100%)",headerBorder:"#dc2626",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,textColor:"#ffffff"},{value:"golden_yellow",label:"Jaune DorÃ©",gradient:"linear-gradient(135deg, #a16207 0%, #eab308 100%)",headerBorder:"#ca8a04",rowBorder:"#fef08a",altRowBg:"#fefce8",borderWidth:1.5,textColor:"#ffffff"},{value:"navy_blue",label:"Bleu Marine",gradient:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%)",headerBorder:"#1e40af",rowBorder:"#dbeafe",altRowBg:"#eff6ff",borderWidth:1.5,textColor:"#ffffff"},{value:"burgundy_wine",label:"Vin Bordeaux",gradient:"linear-gradient(135deg, #7f1d1d 0%, #dc2626 100%)",headerBorder:"#991b1b",rowBorder:"#fecaca",altRowBg:"#fef2f2",borderWidth:1.5,textColor:"#ffffff"},{value:"lavender_purple",label:"Lavande",gradient:"linear-gradient(135deg, #7c2d12 0%, #a855f7 100%)",headerBorder:"#9333ea",rowBorder:"#e9d5ff",altRowBg:"#faf5ff",borderWidth:1.5,textColor:"#ffffff"},{value:"ocean_teal",label:"OcÃ©an Sarcelle",gradient:"linear-gradient(135deg, #134e4a 0%, #14b8a6 100%)",headerBorder:"#0f766e",rowBorder:"#ccfbf1",altRowBg:"#f0fdfa",borderWidth:1.5,textColor:"#ffffff"},{value:"cherry_blossom",label:"Cerisier",gradient:"linear-gradient(135deg, #be185d 0%, #fb7185 100%)",headerBorder:"#db2777",rowBorder:"#fce7f3",altRowBg:"#fdf2f8",borderWidth:1.5,textColor:"#ffffff"},{value:"autumn_orange",label:"Automne",gradient:"linear-gradient(135deg, #9a3412 0%, #fb923c 100%)",headerBorder:"#ea580c",rowBorder:"#fed7aa",altRowBg:"#fff7ed",borderWidth:1.5,textColor:"#ffffff"}].map(function(e){return n().createElement("button",{key:e.value,type:"button",className:"table-style-option ".concat(E.tableStyle===e.value?"active":""),onClick:function(){return R(T.id,"tableStyle",e.value)},title:"".concat(e.label," - Style ").concat(e.label.toLowerCase()," avec dÃ©gradÃ© moderne")},n().createElement("div",{className:"table-preview",style:{maxHeight:"60px",overflow:"hidden"}},n().createElement("div",{className:"table-header",style:{background:e.gradient||e.headerBg,border:"".concat(e.borderWidth,"px solid ").concat(e.headerBorder),borderBottom:"none",color:e.textColor}},n().createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.headerBorder)}},"Produit"),n().createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.headerBorder)}},"QtÃ©"),n().createElement("div",{className:"table-cell"},"Prix")),n().createElement("div",{className:"table-row",style:{backgroundColor:e.altRowBg,border:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder),borderTop:"none",color:e.textColor}},n().createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder)}},"Article 1"),n().createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder)}},"2"),n().createElement("div",{className:"table-cell"},"15.99â‚¬")),n().createElement("div",{className:"table-row",style:{backgroundColor:"white",border:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder),borderTop:"none",color:e.textColor}},n().createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder)}},"Article 2"),n().createElement("div",{className:"table-cell",style:{borderRight:"".concat(e.borderWidth,"px solid ").concat(e.rowBorder)}},"1"),n().createElement("div",{className:"table-cell"},"8.50â‚¬"))),n().createElement("span",{className:"style-label"},e.label))}))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Lignes de totaux:"),n().createElement("div",{className:"checkbox-group"},[{key:"showSubtotal",label:"Sous-total"},{key:"showShipping",label:"Frais de port"},{key:"showTaxes",label:"Taxes"},{key:"showDiscount",label:"Remise"},{key:"showTotal",label:"Total gÃ©nÃ©ral"}].map(function(e){var t=e.key,r=e.label;return n().createElement("label",{key:t,className:"checkbox-item"},n().createElement("input",{type:"checkbox",checked:E[t]||!1,onChange:function(e){return R(T.id,t,e.target.checked)}}),r)}))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher les bordures des cellules:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:null===(g=E.showBorders)||void 0===g||g,onChange:function(e){return R(T.id,"showBorders",e.target.checked)}}),n().createElement("span",{className:"toggle-slider"})))),B.includes("customer_fields")&&"customer_info"===T.type&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ‘¤ Informations client"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Champs Ã  afficher:"),n().createElement("div",{className:"checkbox-group"},[{key:"name",label:"Nom"},{key:"email",label:"Email"},{key:"phone",label:"TÃ©lÃ©phone"},{key:"address",label:"Adresse"},{key:"company",label:"SociÃ©tÃ©"},{key:"vat",label:"NÂ° TVA"},{key:"siret",label:"SIRET"}].map(function(e){var t,r,o=e.key,a=e.label;return n().createElement("label",{key:o,className:"checkbox-item"},n().createElement("input",{type:"checkbox",checked:null===(t=null===(r=E.fields)||void 0===r?void 0:r.includes(o))||void 0===t||t,onChange:function(e){var t=E.fields||["name","email","phone","address","company","vat","siret"],r=e.target.checked?[].concat(ir(t),[o]):t.filter(function(e){return e!==o});R(T.id,"fields",r)}}),a)}))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Disposition:"),n().createElement("select",{value:E.layout||"vertical",onChange:function(e){return R(T.id,"layout",e.target.value)}},n().createElement("option",{value:"vertical"},"Verticale"),n().createElement("option",{value:"horizontal"},"Horizontale"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher les Ã©tiquettes:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:null===(y=E.showLabels)||void 0===y||y,onChange:function(e){return R(T.id,"showLabels",e.target.checked)}}),n().createElement("span",{className:"toggle-slider"}))),E.showLabels&&n().createElement("div",{className:"property-row"},n().createElement("label",null,"Style des Ã©tiquettes:"),n().createElement("select",{value:E.labelStyle||"normal",onChange:function(e){return R(T.id,"labelStyle",e.target.value)}},n().createElement("option",{value:"normal"},"Normal"),n().createElement("option",{value:"bold"},"Gras"),n().createElement("option",{value:"uppercase"},"Majuscules"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Espacement:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"20",value:E.spacing||8,onChange:function(e){return R(T.id,"spacing",mr(e.target.value,10))},className:"slider"}),n().createElement("span",{className:"slider-value"},E.spacing||8,"px")))),B.includes("company_fields")&&"company_info"===T.type&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ¢ Informations Entreprise"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Champs Ã  afficher:"),n().createElement("div",{className:"checkbox-group"},[{key:"name",label:"Nom"},{key:"address",label:"Adresse"},{key:"phone",label:"TÃ©lÃ©phone"},{key:"email",label:"Email"},{key:"website",label:"Site web"},{key:"vat",label:"NÂ° TVA"},{key:"rcs",label:"RCS"},{key:"siret",label:"SIRET"}].map(function(e){var t,r,o=e.key,a=e.label;return n().createElement("label",{key:o,className:"checkbox-item"},n().createElement("input",{type:"checkbox",checked:null===(t=null===(r=E.fields)||void 0===r?void 0:r.includes(o))||void 0===t||t,onChange:function(e){var t=E.fields||["name","address","phone","email","website","vat","rcs","siret"],r=e.target.checked?[].concat(ir(t),[o]):t.filter(function(e){return e!==o});R(T.id,"fields",r)}}),a)}))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Disposition:"),n().createElement("select",{value:E.layout||"vertical",onChange:function(e){return R(T.id,"layout",e.target.value)}},n().createElement("option",{value:"vertical"},"Verticale"),n().createElement("option",{value:"horizontal"},"Horizontale"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher les Ã©tiquettes:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:null!==(w=E.showLabels)&&void 0!==w&&w,onChange:function(e){return R(T.id,"showLabels",e.target.checked)}}),n().createElement("span",{className:"toggle-slider"}))),E.showLabels&&n().createElement("div",{className:"property-row"},n().createElement("label",null,"Style des Ã©tiquettes:"),n().createElement("select",{value:E.labelStyle||"normal",onChange:function(e){return R(T.id,"labelStyle",e.target.value)}},n().createElement("option",{value:"normal"},"Normal"),n().createElement("option",{value:"bold"},"Gras"),n().createElement("option",{value:"uppercase"},"Majuscules"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Espacement:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"20",value:E.spacing||8,onChange:function(e){return R(T.id,"spacing",mr(e.target.value,10))},className:"slider"}),n().createElement("span",{className:"slider-value"},E.spacing||8,"px")))),B.includes("document_type")&&"document_type"===T.type&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ“‹ Type de Document"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Type de document:"),n().createElement("select",{value:E.documentType||"invoice",onChange:function(e){return R(T.id,"documentType",e.target.value)}},n().createElement("option",{value:"invoice"},"Facture"),n().createElement("option",{value:"quote"},"Devis"),n().createElement("option",{value:"receipt"},"ReÃ§u"),n().createElement("option",{value:"order"},"Commande"),n().createElement("option",{value:"credit_note"},"Avoir")))),B.includes("order_number")&&"order_number"===T.type&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ”¢ NumÃ©ro de Commande"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Format d'affichage:"),n().createElement("input",{type:"text",value:E.format||"Commande #{order_number} - {order_date}",onChange:function(e){return R(T.id,"format",e.target.value)},placeholder:"Commande #{order_number} - {order_date}"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher l'Ã©tiquette:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:null===(C=E.showLabel)||void 0===C||C,onChange:function(e){return R(T.id,"showLabel",e.target.checked)}}),n().createElement("span",{className:"toggle-slider"}))),E.showLabel&&n().createElement("div",{className:"property-row"},n().createElement("label",null,"Texte de l'Ã©tiquette:"),n().createElement("input",{type:"text",value:E.labelText||"NÂ° de commande:",onChange:function(e){return R(T.id,"labelText",e.target.value)},placeholder:"NÂ° de commande:"}))),B.includes("font")&&n().createElement(gr,{elementId:T.id,properties:E,onPropertyChange:R}),B.includes("image")&&("logo"===T.type||"company_logo"===T.type)&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"[Img] Image"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"URL de l'image:"),n().createElement("div",{className:"input-with-button"},n().createElement("input",{type:"text",value:E.imageUrl||E.src||"",onChange:function(e){R(T.id,"imageUrl",e.target.value),R(T.id,"src",e.target.value)},placeholder:"https://exemple.com/image.png"}),n().createElement("button",{type:"button",className:"media-button",onClick:or(tr().m(function e(){var t,r,n,o,a,i,l,c;return tr().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/wp-json/wp/v2/media?media_type=image&per_page=50&_embed");case 1:return t=e.v,e.n=2,t.json();case 2:r=e.v,(n=document.createElement("div")).style.cssText="\n                          position: fixed;\n                          top: 0;\n                          left: 0;\n                          width: 100%;\n                          height: 100%;\n                          background: rgba(0,0,0,0.8);\n                          z-index: 100;\n                          display: flex;\n                          align-items: center;\n                          justify-content: center;\n                        ",(o=document.createElement("div")).style.cssText="\n                          background: white;\n                          padding: 20px;\n                          border-radius: 8px;\n                          max-width: 600px;\n                          max-height: 80vh;\n                          overflow-y: auto;\n                          width: 90%;\n                        ",(a=document.createElement("h3")).textContent="SÃ©lectionner une image depuis la mÃ©diathÃ¨que",a.style.marginBottom="15px",(i=document.createElement("button")).textContent="âœ•",i.style.cssText="\n                          position: absolute;\n                          top: 10px;\n                          right: 10px;\n                          background: none;\n                          border: none;\n                          font-size: 20px;\n                          cursor: pointer;\n                        ",i.onclick=function(){n&&n.parentNode===document.body&&document.body.removeChild(n)},(l=document.createElement("div")).style.cssText="\n                          display: grid;\n                          grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n                          gap: 10px;\n                          margin-top: 15px;\n                        ",r.forEach(function(e){var t=document.createElement("div");t.style.cssText="\n                            border: 2px solid #ddd;\n                            border-radius: 4px;\n                            padding: 5px;\n                            cursor: pointer;\n                            transition: border-color 0.2s;\n                          ",t.onmouseover=function(){return t.style.borderColor="#007cba"},t.onmouseout=function(){return t.style.borderColor="#ddd"};var r=document.createElement("img");r.src=e.source_url,r.style.cssText="\n                            width: 100%;\n                            height: 80px;\n                            object-fit: cover;\n                            border-radius: 2px;\n                          ";var o=document.createElement("div");o.textContent=e.title.rendered.length>15?e.title.rendered.substring(0,15)+"...":e.title.rendered,o.style.cssText="\n                            font-size: 11px;\n                            text-align: center;\n                            margin-top: 5px;\n                            color: #666;\n                          ",t.onclick=function(){R(T.id,"imageUrl",e.source_url),R(T.id,"src",e.source_url),n&&n.parentNode===document.body&&document.body.removeChild(n)},t.appendChild(r),t.appendChild(o),l.appendChild(t)}),o.appendChild(a),o.appendChild(i),o.appendChild(l),n.appendChild(o),document.body.appendChild(n),e.n=4;break;case 3:e.p=3,c=e.v,console.error("Erreur lors de la rÃ©cupÃ©ration des mÃ©dias:",c),alert("Erreur lors de l'accÃ¨s Ã  la mÃ©diathÃ¨que WordPress");case 4:return e.a(2)}},e,null,[[0,3]])}))},"ðŸ“ MÃ©diathÃ¨que"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Texte alternatif:"),n().createElement("input",{type:"text",value:E.alt||"",onChange:function(e){return R(T.id,"alt",e.target.value)},placeholder:"Description de l'image"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ajustement:"),n().createElement("select",{value:E.objectFit||E.fit||"cover",onChange:function(e){R(T.id,"objectFit",e.target.value),R(T.id,"fit",e.target.value)}},n().createElement("option",{value:"cover"},"Couvrir"),n().createElement("option",{value:"contain"},"Contenir"),n().createElement("option",{value:"fill"},"Remplir"),n().createElement("option",{value:"none"},"Aucun"),n().createElement("option",{value:"scale-down"},"RÃ©duire")))),"document_type"===T.type&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ“‹ Type de Document"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Type de document:"),n().createElement("select",{value:E.documentType||"invoice",onChange:function(e){return R(T.id,"documentType",e.target.value)}},n().createElement("option",{value:"invoice"},"Facture"),n().createElement("option",{value:"quote"},"Devis"),n().createElement("option",{value:"receipt"},"ReÃ§u"),n().createElement("option",{value:"order"},"Commande"),n().createElement("option",{value:"credit_note"},"Avoir"))),n().createElement(gr,{elementId:T.id,properties:E,onPropertyChange:R}),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Alignement du texte:"),n().createElement("select",{value:E.textAlign||"center",onChange:function(e){return R(T.id,"textAlign",e.target.value)}},n().createElement("option",{value:"left"},"Gauche"),n().createElement("option",{value:"center"},"Centre"),n().createElement("option",{value:"right"},"Droite"))),n().createElement(br,{label:"Couleur du texte",value:E.color,onChange:function(e){return R(T.id,"color",e)},presets:["#1e293b","#334155","#475569","#64748b","#000000","#dc2626","#059669","#7c3aed"],defaultColor:"#333333"}),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher la bordure:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:E.showBorder||!1,onChange:function(e){return R(T.id,"showBorder",e.target.checked)}}),n().createElement("span",{className:"toggle-slider"}))),n().createElement(br,{label:"Couleur de fond",value:E.backgroundColor,onChange:function(e){return R(T.id,"backgroundColor",e)},presets:["transparent","#ffffff","#f8fafc","#fef3c7","#ecfdf5","#f0f9ff"]})),"product_table"!==T.type&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ï¿½ Contenu"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Texte/Contenu:"),n().createElement("input",{type:"text",value:E.content||"",onChange:function(e){return R(T.id,"content",e.target.value)},placeholder:"Texte Ã  afficher"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Format:"),n().createElement("input",{type:"text",value:E.format||"",onChange:function(e){return R(T.id,"format",e.target.value)},placeholder:"Format d'affichage (optionnel)"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Type de document:"),n().createElement("select",{value:E.documentType||"invoice",onChange:function(e){return R(T.id,"documentType",e.target.value)}},n().createElement("option",{value:"invoice"},"Facture"),n().createElement("option",{value:"quote"},"Devis"),n().createElement("option",{value:"receipt"},"ReÃ§u"),n().createElement("option",{value:"order"},"Commande"),n().createElement("option",{value:"credit_note"},"Avoir")))),"product_table"!==T.type&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸ“‹ Champs & Options"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Champs Ã  afficher:"),n().createElement("div",{className:"checkbox-group"},[{key:"name",label:"Nom"},{key:"address",label:"Adresse"},{key:"phone",label:"TÃ©lÃ©phone"},{key:"email",label:"Email"},{key:"website",label:"Site web"},{key:"vat",label:"NÂ° TVA"},{key:"image",label:"Image"},{key:"sku",label:"SKU"},{key:"quantity",label:"QuantitÃ©"},{key:"price",label:"Prix"},{key:"total",label:"Total"}].map(function(e){var t,r,o=e.key,a=e.label;return n().createElement("label",{key:o,className:"checkbox-item"},n().createElement("input",{type:"checkbox",checked:null!==(t=null===(r=E.fields)||void 0===r?void 0:r.includes(o))&&void 0!==t&&t,onChange:function(e){var t=E.fields||[],r=e.target.checked?[].concat(ir(t),[o]):t.filter(function(e){return e!==o});R(T.id,"fields",r)}}),a)}))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher l'Ã©tiquette:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:null!==(z=E.showLabel)&&void 0!==z&&z,onChange:function(e){return R(T.id,"showLabel",e.target.checked)}}),n().createElement("span",{className:"toggle-slider"}))),E.showLabel&&n().createElement("div",{className:"property-row"},n().createElement("label",null,"Texte de l'Ã©tiquette:"),n().createElement("input",{type:"text",value:E.labelText||"",onChange:function(e){return R(T.id,"labelText",e.target.value)},placeholder:"Texte de l'Ã©tiquette"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher les bordures:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:null===(_=E.showBorders)||void 0===_||_,onChange:function(e){return R(T.id,"showBorders",e.target.checked)}}),n().createElement("span",{className:"toggle-slider"}))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher les en-tÃªtes:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:null!==(k=E.showHeaders)&&void 0!==k&&k,onChange:function(e){return R(T.id,"showHeaders",e.target.checked)}}),n().createElement("span",{className:"toggle-slider"})))));case"effects":return n().createElement("div",{className:"tab-content"},B.includes("opacity")&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸŒŸ Transparence & VisibilitÃ©"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"OpacitÃ©:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"100",value:E.opacity||100,onChange:function(e){return R(T.id,"opacity",mr(e.target.value,100))},className:"slider"}),n().createElement("span",{className:"slider-value"},E.opacity||100,"%"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"VisibilitÃ©:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:!1!==E.visible,onChange:function(e){return R(T.id,"visible",e.target.checked)}}),n().createElement("span",{className:"toggle-slider"})))),B.includes("shadows")&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"âœ¨ Ombres & Effets"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ombre:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:E.shadow||!1,onChange:function(e){return R(T.id,"shadow",e.target.checked)}}),n().createElement("span",{className:"toggle-slider"}))),E.shadow&&n().createElement(n().Fragment,null,n().createElement(br,{label:"Couleur ombre",value:E.shadowColor,onChange:function(e){return R(T.id,"shadowColor",e)},presets:["#000000","#374151","#6b7280","#9ca3af"]}),n().createElement("div",{className:"property-row"},n().createElement("label",null,"DÃ©calage X:"),n().createElement("input",{type:"number",value:E.shadowOffsetX||2,onChange:function(e){return R(T.id,"shadowOffsetX",mr(e.target.value,0))},min:"-20",max:"20"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"DÃ©calage Y:"),n().createElement("input",{type:"number",value:E.shadowOffsetY||2,onChange:function(e){return R(T.id,"shadowOffsetY",mr(e.target.value,0))},min:"-20",max:"20"})))),B.includes("filters")&&n().createElement("div",{className:"properties-group"},n().createElement("h4",null,"ðŸŽ­ Filtres visuels"),n().createElement("div",{className:"property-row"},n().createElement("label",null,"LuminositÃ©:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"200",value:E.brightness||100,onChange:function(e){return R(T.id,"brightness",mr(e.target.value,100))},className:"slider"}),n().createElement("span",{className:"slider-value"},E.brightness||100,"%"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Contraste:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"200",value:E.contrast||100,onChange:function(e){return R(T.id,"contrast",parseInt(e.target.value))},className:"slider"}),n().createElement("span",{className:"slider-value"},E.contrast||100,"%"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Saturation:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"200",value:E.saturate||100,onChange:function(e){return R(T.id,"saturate",parseInt(e.target.value))},className:"slider"}),n().createElement("span",{className:"slider-value"},E.saturate||100,"%")))));default:return null}},[S,T,E,R,t.length]);return n().createElement("div",{className:"properties-panel"},n().createElement("div",{className:"properties-header"},n().createElement("h3",null,"PropriÃ©tÃ©s"),T&&n().createElement("div",{className:"element-info"},n().createElement("span",{className:"element-type"},T.type),n().createElement("span",{className:"element-id"},"#",T.id))),B(),n().createElement("div",{className:"properties-content"},N()))});function vr(e){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(e)}function xr(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof l?n:l,d=Object.create(c.prototype);return wr(d,"_invoke",function(r,n,o){var a,l,c,d=0,s=o||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,n){for(l=r,c=n,t=0;!u&&d&&!o&&t<s.length;t++){var o,a=s[t],p=f.p,m=a[2];r>3?(o=m===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(l=0,f.v=n,f.n=a[1]):p<m&&(o=r<3||a[0]>n||n>m)&&(a[4]=r,a[5]=n,f.n=m,l=0))}if(o||r>1)return i;throw u=!0,n}return function(o,s,m){if(d>1)throw TypeError("Generator is already running");for(u&&1===s&&p(s,m),l=s,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(d=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(n,f))!==i)break}catch(t){a=e,l=1,c=t}finally{d=1}}return{value:t,done:u}}}(r,o,a),!0),d}var i={};function l(){}function c(){}function d(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(wr(t={},n,function(){return this}),t),u=d.prototype=l.prototype=Object.create(s);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,wr(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=d,wr(u,"constructor",d),wr(d,"constructor",c),c.displayName="GeneratorFunction",wr(d,o,"GeneratorFunction"),wr(u),wr(u,o,"Generator"),wr(u,n,function(){return this}),wr(u,"toString",function(){return"[object Generator]"}),(xr=function(){return{w:a,m:f}})()}function wr(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}wr=function(e,t,r,n){function a(t,r){wr(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},wr(e,t,r,n)}function Er(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Sr(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){Er(a,n,o,i,l,"next",e)}function l(e){Er(a,n,o,i,l,"throw",e)}i(void 0)})}}function Cr(e){return function(e){if(Array.isArray(e))return Br(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach(function(t){kr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kr(e,t,r){return(t=function(e){var t=function(e){if("object"!=vr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=vr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){d=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||Rr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(e,t){if(e){if("string"==typeof e)return Br(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Br(e,t):void 0}}function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Nr=n().useState,Wr=n().useRef,Or=n().useEffect,Fr=n().useCallback,Ar=(n().useMemo,function(e){var t,r,o=e.options,a=Tr(Nr("select"),2),i=a[0],l=a[1],c=Tr(Nr(!1),2),d=c[0],s=c[1],u=Tr(Nr(!1),2),f=u[0],p=u[1],m=Tr(Nr(null),2),h=m[0],b=m[1],g=Tr(Nr(!1),2),y=g[0],v=g[1],x=Tr(Nr({x:0,y:0}),2),w=x[0],E=x[1],S=Tr(Nr(!1),2),C=S[0],z=S[1],_=Tr(Nr({x:0,y:0}),2),k=_[0],T=_[1],B=Tr(Nr({horizontal:[],vertical:[]}),2),N=B[0],W=B[1],O=Tr(Nr(!1),2),F=(O[0],O[1],Tr(Nr(null),2)),A=(F[0],F[1],Je()),j=Fr(function(e){A.settings.lockGuides||W(function(t){return _r(_r({},t),{},{horizontal:[].concat(Cr(t.horizontal),[e]).sort(function(e,t){return e-t})})})},[A.settings.lockGuides]),M=Fr(function(e){A.settings.lockGuides||W(function(t){return _r(_r({},t),{},{vertical:[].concat(Cr(t.vertical),[e]).sort(function(e,t){return e-t})})})},[A.settings.lockGuides]),I=Fr(function(e,t){A.settings.lockGuides||W(function(r){return _r(_r({},r),{},kr({},e,r[e].filter(function(e){return e!==t})))})},[A.settings.lockGuides]),H=o.orderData||{invoice_number:"INV-001",invoice_date:"15/10/2025",order_number:"#12345",order_date:"15/10/2025",customer_name:"John Doe",customer_email:"john.doe@example.com",billing_address:"123 Rue de Test\n75001 Paris\nFrance",shipping_address:"456 Rue de Livraison\n75002 Paris\nFrance",payment_method:"Carte bancaire",order_status:"TraitÃ©e",subtotal:"45,00 â‚¬",discount:"-5,00 â‚¬",shipping:"5,00 â‚¬",tax:"9,00 â‚¬",total:"54,00 â‚¬",refund:"0,00 â‚¬",fees:"1,50 â‚¬",quote_number:"QUO-001",quote_date:"15/10/2025",quote_validity:"30 jours",quote_notes:"Conditions spÃ©ciales : paiement Ã  30 jours.",products:[{name:"Produit Test 1",quantity:1,price:"25,00 â‚¬",total:"25,00 â‚¬"},{name:"Produit Test 2",quantity:2,price:"10,00 â‚¬",total:"20,00 â‚¬"}]},L=Pe({initialElements:o.initialElements||[],templateId:o.templateId||null,canvasWidth:o.width||595,canvasHeight:o.height||842,globalSettings:A.settings}),G=Fr(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Modifier Ã©lÃ©ment",n=L.getAllElements();L.history.addToHistory(n,r),L.updateElement(e,t)},[L]),q=Fr(function(){var e=L.history.undo();e&&L.setElements(e)},[L]),U=Fr(function(){var e=L.history.redo();e&&L.setElements(e)},[L]),V=Fr(function(e){A.updateSettings({showGrid:e})},[A]),Z=Fr(function(e){A.updateSettings({snapToGrid:e})},[A]),X=Wr(null),Y=Wr(null),J=Wr(null),K=P({onElementMove:function(e,t){G(e,t,"DÃ©placer Ã©lÃ©ment")},onElementDrop:function(e,t){G(e,t,"DÃ©poser Ã©lÃ©ment")},snapToGrid:A.settings.snapToGrid,gridSize:A.settings.gridSize,zoom:L.zoom.zoom,canvasWidth:L.canvasWidth,canvasHeight:L.canvasHeight,guides:N,snapToGuides:A.settings.snapToElements});Me({onDelete:L.deleteSelectedElements,onCopy:L.copySelectedElements,onPaste:L.pasteElements,onUndo:q,onRedo:U,onSave:L.saveTemplate,onZoomIn:L.zoom.zoomIn,onZoomOut:L.zoom.zoomOut});var Q=Fr(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L.addElement(e,t),l("select")},[L]),$=Fr(function(e,t){var r=(null==t?void 0:t.ctrlKey)||(null==t?void 0:t.metaKey);L.selection.selectElement(e,r)},[L.selection]),ee=(Fr(Sr(xr().m(function e(){var t,r,n,o,a,i,l,c,d,s;return xr().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,0!==(n=L.getAllElements()).length){e.n=1;break}return alert("Aucun Ã©lÃ©ment Ã  imprimer. Ajoutez des Ã©lÃ©ments au canvas d'abord."),e.a(2);case 1:e.p=1,o=JSON.stringify(n),e.n=3;break;case 2:return e.p=2,d=e.v,console.error("âŒ Erreur lors de JSON.stringify:",d),console.error("Ã‰lÃ©ments problÃ©matiques:",n),alert("Erreur de sÃ©rialisation des Ã©lÃ©ments. VÃ©rifiez la console pour plus de dÃ©tails."),e.a(2);case 3:return(a=new FormData).append("action","pdf_builder_generate_pdf"),a.append("nonce",null===(t=window.pdfBuilderAjax)||void 0===t?void 0:t.nonce),a.append("elements",o),e.n=4,fetch(null===(r=window.pdfBuilderAjax)||void 0===r?void 0:r.ajaxurl,{method:"POST",body:a});case 4:if((i=e.v).ok){e.n=5;break}throw new Error("Erreur HTTP: ".concat(i.status));case 5:return e.n=6,i.json();case 6:if(!(l=e.v).success){e.n=7;break}b(pdfDataUrl),p(!0),e.n=8;break;case 7:throw console.error("Erreur serveur:",l.data),new Error((null===(c=l.data)||void 0===c?void 0:c.message)||"Erreur lors de la gÃ©nÃ©ration du PDF");case 8:e.n=10;break;case 9:e.p=9,s=e.v,console.error("Erreur lors de l'impression:",s),alert("Erreur lors de la gÃ©nÃ©ration du PDF: "+s.message);case 10:return e.a(2)}},e,null,[[1,2],[0,9]])})),[L]),Fr(function(e){if(e.ctrlKey&&A.settings.showGuides&&!A.settings.lockGuides){var t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top,o=(r-w.x)/L.zoom.zoom,a=(n-w.y)/L.zoom.zoom,c=L.canvasWidth/2,d=L.canvasHeight/2;Math.abs(o-c)<Math.abs(a-d)?j(Math.round(a)):M(Math.round(o))}else if(!e.target.closest("[data-element-id]")){if(i.startsWith("add-")){var s=e.currentTarget.getBoundingClientRect(),u=e.clientX-s.left,f=e.clientY-s.top,p=u/L.zoom.zoom,m=f/L.zoom.zoom,h="text",b={};switch(i){case"add-text":h="text";break;case"add-text-title":h="text",b={fontSize:24,fontWeight:"bold"};break;case"add-text-subtitle":h="text",b={fontSize:18,fontWeight:"bold"};break;case"add-rectangle":h="rectangle";break;case"add-circle":h="shape-circle";break;case"add-line":h="line";break;case"add-arrow":h="shape-arrow";break;case"add-triangle":h="shape-triangle";break;case"add-star":h="shape-star";break;case"add-divider":h="divider";break;case"add-image":h="image";break;default:i.startsWith("add-")&&(h=i.replace("add-",""))}return L.addElement(h,_r({x:Math.max(0,p-50),y:Math.max(0,m-25)},b)),void l("select")}L.selection.clearSelection()}},[L,i])),te=Fr(function(e,t,r){var n=L.getElementById(e);if(n){var o={};if(t.includes(".")){var a=function(e,t,r){for(var n=t.split("."),o=n.pop(),a=_r({},e),i=a,l=0;l<n.length-1;l++){var c=n[l];i[c]&&"object"===vr(i[c])?i[c]=_r({},i[c]):i[c]={},i=i[c]}var d=n[n.length-1];return d?(i[d]&&"object"===vr(i[d])?i[d]=_r({},i[d]):i[d]={},i[d][o]=r):i[o]=r,a}(n,t,r);Object.assign(o,a)}else o[t]=r;G(e,o,"Modifier ".concat(t))}},[L,G]),re=Fr(function(e){e.forEach(function(e){var t=e.elementId,r=e.property,n=e.value;L.updateElement(t,kr({},r,n))})},[L]),ne=Fr(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.preventDefault();var r=[];t?L.getElementById(t)&&r.push({label:"Copier",action:function(){return L.copySelectedElements()}},{label:"Dupliquer",action:function(){return L.duplicateElement(t)}},{type:"separator"},{label:"Supprimer",action:function(){return L.deleteElement(t)}}):(L.selection.selectedElements.length>0&&r.push({label:"Copier",action:function(){return L.copySelectedElements()}},{label:"Dupliquer",action:function(){return L.duplicateSelectedElements()}},{type:"separator"},{label:"Supprimer",action:function(){return L.deleteSelectedElements()}}),r.push({type:"separator"},{label:"Coller",action:function(){return L.pasteElements()}},{type:"separator"},{label:"Tout sÃ©lectionner",action:function(){return L.selectAll()}},{label:"DÃ©sÃ©lectionner",action:function(){return L.selection.clearSelection()}})),L.showContextMenu(e.clientX,e.clientY,r)},[L]),oe=Fr(function(e){"function"==typeof e&&e()},[]),ae=Fr(function(){if(C)return"grabbing";switch(i){case"select":default:return"default";case"add-text":case"add-text-title":case"add-text-subtitle":return"text";case"add-rectangle":case"add-circle":case"add-line":case"add-arrow":case"add-triangle":case"add-star":case"add-divider":case"add-image":return"crosshair"}},[i,C]),ie=Fr(function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},[]),le=Fr(function(e){e.preventDefault();try{var t=e.dataTransfer.getData("application/json");if(!t||""===t.trim())return;var r=JSON.parse(t);if("new-element"===r.type){var n=e.currentTarget.getBoundingClientRect(),o=e.clientX-n.left,a=e.clientY-n.top,i=o/L.zoom.zoom,l=a/L.zoom.zoom;L.addElement(r.elementType,_r({x:Math.max(0,i-50),y:Math.max(0,l-25)},r.defaultProps))}}catch(t){t instanceof SyntaxError&&e.dataTransfer.getData("application/json")&&console.error("Erreur lors du parsing des donnÃ©es de drop:",t)}},[L]),ce=Fr(function(e){if(A.settings.zoomWithWheel){e.preventDefault();var t=1+A.settings.zoomStep/100,r=e.deltaY>0?-1:1,n=J.current;if(n){var o=n.getBoundingClientRect(),a=e.clientX-o.left,i=e.clientY-o.top,l=r>0?t:1/t;L.zoom.zoomToPoint(a,i,l)}}},[A.settings.zoomWithWheel,A.settings.zoomStep,L.zoom]);Or(function(){var e=J.current;if(e&&A.settings.zoomWithWheel){var t=function(e){ce(e)};return e.addEventListener("wheel",t,{passive:!1}),function(){e.removeEventListener("wheel",t)}}},[ce,A.settings.zoomWithWheel]);var de=Fr(function(e){A.settings.panWithMouse&&(1===e.button||0===e.button&&e.altKey)&&(e.preventDefault(),z(!0),T({x:e.clientX,y:e.clientY}))},[A.settings.panWithMouse]),se=Fr(function(e){if(C){var t=e.clientX-k.x,r=e.clientY-k.y;E(function(e){return{x:e.x+t,y:e.y+r}}),T({x:e.clientX,y:e.clientY})}},[C,k]),ue=Fr(function(){z(!1)},[]),fe=Fr(function(e){A.settings.zoomToSelection&&(e.target.closest("[data-element-id]")||L.selection.selectedElements.length>0&&L.zoomToSelection())},[A.settings.zoomToSelection,L]);return n().createElement("div",{className:"pdf-canvas-editor",ref:X},n().createElement("header",{className:"editor-header"},n().createElement("h2",null,"Ã‰diteur PDF - ",o.isNew?"Nouveau Template":o.templateName),n().createElement("nav",{className:"editor-actions"},n().createElement("button",{className:"btn btn-secondary",onClick:function(){return s(!0)}},"ðŸ‘ï¸ AperÃ§u"),n().createElement("button",{className:"btn btn-primary",onClick:function(){return L.saveTemplate()},disabled:L.isSaving},L.isSaving?"â³ Sauvegarde...":o.isNew?"ðŸ’¾ Sauvegarder":"âœï¸ Modifier"))),n().createElement(D,{selectedTool:i,onToolSelect:l,zoom:L.zoom.zoom,onZoomChange:L.zoom.setZoomLevel,showGrid:A.settings.showGrid,onShowGridChange:V,snapToGrid:A.settings.snapToGrid,onSnapToGridChange:Z,onUndo:q,onRedo:U,canUndo:L.history.canUndo(),canRedo:L.history.canRedo()}),n().createElement("main",{className:"editor-workspace"},!d&&n().createElement("aside",{className:"editor-sidebar left-sidebar"},n().createElement(Rt,{onAddElement:Q,selectedTool:i,onToolSelect:l})),n().createElement("section",{className:"canvas-section",ref:J,onContextMenu:ne,onDragOver:ie,onDrop:le,onMouseDown:de,onMouseMove:se,onMouseUp:ue,onMouseLeave:ue,onDoubleClick:fe,style:{cursor:ae(),backgroundColor:A.settings.containerShowTransparency?"transparent":A.settings.containerBackgroundColor||"#f8f9fa",backgroundImage:A.settings.containerShowTransparency?"linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%)":"none",backgroundSize:A.settings.containerShowTransparency?"20px 20px":"auto",backgroundPosition:A.settings.containerShowTransparency?"0 0, 0 10px, 10px -10px, -10px 0px":"0 0"}},n().createElement("div",{className:"canvas-zoom-wrapper",style:{transform:"translate(".concat(w.x,"px, ").concat(w.y,"px) scale(").concat(L.zoom.zoom,")"),transformOrigin:"center",cursor:C?"grabbing":"default",transition:A.settings.smoothZoom?"transform 0.2s ease-out":"none",willChange:A.settings.enableHardwareAcceleration?"transform":"auto"}},n().createElement("div",{className:"canvas",ref:Y,onClick:ee,style:{width:L.canvasWidth,height:"auto",minHeight:L.canvasHeight,position:"relative",backgroundColor:A.settings.canvasShowTransparency?"transparent":A.settings.canvasBackgroundColor||"#ffffff",backgroundImage:A.settings.canvasShowTransparency?"linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%)":"none",backgroundSize:A.settings.canvasShowTransparency?"20px 20px":"auto",backgroundPosition:A.settings.canvasShowTransparency?"0 0, 0 10px, 10px -10px, -10px 0px":"0 0"}},A.settings.showGrid&&n().createElement("div",{className:"canvas-grid",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:"\n                      linear-gradient(to right, ".concat(A.settings.gridColor).concat(Math.round(2.55*A.settings.gridOpacity).toString(16).padStart(2,"0")," 1px, transparent 1px),\n                      linear-gradient(to bottom, ").concat(A.settings.gridColor).concat(Math.round(2.55*A.settings.gridOpacity).toString(16).padStart(2,"0")," 1px, transparent 1px)\n                    "),backgroundSize:"".concat(A.settings.gridSize,"px ").concat(A.settings.gridSize,"px"),pointerEvents:"none",zIndex:1}}),A.settings.showGuides&&n().createElement("div",{className:"canvas-guides"},N.horizontal.map(function(e,t){return n().createElement("div",{key:"h-guide-".concat(t),className:"canvas-guide horizontal-guide",onClick:function(t){t.stopPropagation(),A.settings.lockGuides||I("horizontal",e)},style:{position:"absolute",top:"".concat(e,"px"),left:0,width:"100%",height:"2px",backgroundColor:"#007cba",cursor:A.settings.lockGuides?"default":"pointer",zIndex:2,opacity:.7},title:"Guide horizontal Ã  ".concat(e,"px - ").concat(A.settings.lockGuides?"VerrouillÃ©":"Cliquer pour supprimer")})}),N.vertical.map(function(e,t){return n().createElement("div",{key:"v-guide-".concat(t),className:"canvas-guide vertical-guide",onClick:function(t){t.stopPropagation(),A.settings.lockGuides||I("vertical",e)},style:{position:"absolute",top:0,left:"".concat(e,"px"),height:"100%",width:"2px",backgroundColor:"#007cba",cursor:A.settings.lockGuides?"default":"pointer",zIndex:2,opacity:.7},title:"Guide vertical Ã  ".concat(e,"px - ").concat(A.settings.lockGuides?"VerrouillÃ©":"Cliquer pour supprimer")})})),L.elements.filter(function(e){return!e.type.startsWith("woocommerce-")}).map(function(e){return n().createElement(R,{key:e.id,element:e,isSelected:L.selection.selectedElements.includes(e.id),zoom:1,snapToGrid:A.settings.snapToGrid,gridSize:A.settings.gridSize,canvasWidth:L.canvasWidth,canvasHeight:L.canvasHeight,onSelect:function(){return $(e.id)},onUpdate:function(t){return L.updateElement(e.id,t)},onRemove:function(){return L.deleteElement(e.id)},onContextMenu:function(t){return ne(t,e.id)},dragAndDrop:K,enableRotation:A.settings.enableRotation,rotationStep:A.settings.rotationStep,rotationSnap:A.settings.rotationSnap,guides:N,snapToGuides:A.settings.snapToElements})}),L.elements.filter(function(e){return e.type.startsWith("woocommerce-")}).map(function(e){return n().createElement(St,{key:e.id,element:e,isSelected:L.selection.selectedElements.includes(e.id),onSelect:$,onUpdate:L.updateElement,dragAndDrop:K,zoom:1,canvasWidth:L.canvasWidth,canvasHeight:L.canvasHeight,orderData:H,onContextMenu:function(t){return ne(t,e.id)},snapToGrid:A.settings.snapToGrid,gridSize:A.settings.gridSize,guides:N,snapToGuides:A.settings.snapToElements})})))),!d&&n().createElement("aside",{className:"editor-sidebar right-sidebar ".concat(y?"collapsed":"")},!y&&n().createElement(yr,{selectedElements:L.selection.selectedElements,elements:L.elements,onPropertyChange:te,onBatchUpdate:re}))),!d&&n().createElement("button",{className:"sidebar-toggle-fixed",onClick:function(){return v(!y)},title:y?"Agrandir le panneau":"RÃ©duire le panneau",style:{position:"fixed",top:"50%",right:y?"80px":"420px",transform:"translateY(-50%)",zIndex:999999}},y?"â—€":"â–¶"),L.contextMenu.contextMenu&&n().createElement(at,{menu:L.contextMenu.contextMenu,onAction:oe,isAnimating:L.contextMenu.isAnimating||!1,onClose:L.contextMenu.hideContextMenu}),n().createElement("footer",{className:"editor-status"},n().createElement("span",null,"Ã‰lÃ©ments: ",L.elements.length),n().createElement("span",null,"|"),A.settings.showZoomIndicator&&n().createElement(n().Fragment,null,n().createElement("span",null,"Zoom: ",Math.round(100*L.zoom.zoom),"%"),n().createElement("span",null,"|")),n().createElement("span",null,"Outil: ",i),L.selection.selectedElements.length>0&&n().createElement(n().Fragment,null,n().createElement("span",null,"|"),n().createElement("span",null,"Ã‰lÃ©ments sÃ©lectionnÃ©s: ",L.selection.selectedElements.length))),n().createElement(vt,{isOpen:d,onClose:function(){s(!1)},elements:L.elements,canvasWidth:L.canvasWidth,canvasHeight:L.canvasHeight,ajaxurl:null===(t=window.pdfBuilderAjax)||void 0===t?void 0:t.ajaxurl,pdfBuilderNonce:null===(r=window.pdfBuilderAjax)||void 0===r?void 0:r.nonce,useServerPreview:!1,onOpenPDFModal:function(e){b(e),p(!0),s(!1)}}),n().createElement(xt,{isOpen:f,onClose:function(){p(!1),h&&h.startsWith("blob:")&&setTimeout(function(){URL.revokeObjectURL(h)},100),b(null)},pdfUrl:h,title:"PDF GÃ©nÃ©rÃ©"}),n().createElement(tt,{showFps:A.settings.showFps}))});function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Dr(e,t,r){return(t=Ir(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ir(n.key),n)}}function Ir(e){var t=function(e){if("object"!=jr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jr(t)?t:t+""}try{var Hr=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.version="2.0.0",this.editors=new Map,this._hooks=t,this._forceInclude={useHistory:q,useRotation:w,useResize:b};try{var r=q(),n=w(function(){}),o=b();this._dummyInstances={dummyHistory:r,dummyRotation:n,dummyResize:o}}catch(e){}},r=[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.getElementById(e);if(r){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach(function(t){Dr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({templateId:null,templateName:null,isNew:!0,initialElements:[],width:595,height:842,zoom:1,gridSize:10,snapToGrid:!0},t),i=n().createElement(Ar,{options:o});a().render(i,r),this.editors.set(e,{container:r,options:o})}}},{key:"destroy",value:function(e){var t=this.editors.get(e);t&&(a().unmountComponentAtNode(t.container),this.editors.delete(e))}},{key:"getData",value:function(e){return null}}],r&&Mr(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}());"undefined"!=typeof window&&(window.PDFBuilderPro=Hr,window.pdfBuilderPro=Hr)}catch(e){window.PDFBuilderPro={init:function(){return null},version:"error"},window.pdfBuilderPro=window.PDFBuilderPro}})();