/*! For license information please see pdf-builder-admin.js.LICENSE.txt */
!function(){"use strict";var e={206:function(e){e.exports=ReactDOM},338:function(e,t,r){var o=r(206);t.createRoot=o.createRoot,t.hydrateRoot=o.hydrateRoot}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var o=React,n=r.n(o),a=r(338);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var p=function(e){var t=e.onElementResize,r=e.snapToGrid,n=void 0===r||r,a=e.gridSize,i=void 0===a?10:a,l=e.minWidth,s=void 0===l?20:l,f=e.minHeight,p=void 0===f?20:f,m=e.zoom,h=void 0===m?1:m,b=e.canvasRect,g=void 0===b?null:b,y=e.canvasWidth,v=void 0===y?595:y,x=e.canvasHeight,w=void 0===x?842:x,S=e.guides,E=void 0===S?{horizontal:[],vertical:[]}:S,C=e.snapToGuides,_=void 0===C||C,z=e.elementType,k=void 0===z?null:z,R=d((0,o.useState)(!1),2),T=R[0],O=R[1],N=d((0,o.useState)(null),2),B=N[0],A=N[1],W=(0,o.useRef)({x:0,y:0}),F=(0,o.useRef)({x:0,y:0,width:0,height:0}),j=(0,o.useCallback)(function(e){return n?Math.round(e/i)*i:e},[n,i]),P=(0,o.useCallback)(function(e){if(!_)return e;var t,r=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=u(e))){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,n=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw n}}}}(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?E.vertical:E.horizontal);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(Math.abs(e-o)<=5)return o}}catch(e){r.e(e)}finally{r.f()}return e},[_,E]),M=(0,o.useCallback)(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e;return r=j(r),P(r,t)},[j,P]),D=(0,o.useCallback)(function(e,r,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(e.preventDefault(),e.stopPropagation(),e.target&&e.target.isConnected&&e.target.parentNode&&e.target.parentNode.isConnected){O(!0),A(r);var i=n||g||{left:0,top:0},l=a||h||1;W.current={x:(e.clientX-i.left)/l,y:(e.clientY-i.top)/l},F.current=c({},o);var d=function(e){var o=(e.clientX-i.left)/l,a=(e.clientY-i.top)/l,d=o-W.current.x,u=a-W.current.y,f=c({},F.current),m="divider"===k||"line"===k;switch(r){case"nw":m?(f.x=M(F.current.x+d,!1),f.width=M(F.current.width-d,!1)):(f.x=M(F.current.x+d,!1),f.y=M(F.current.y+u,!0),f.width=M(F.current.width-d,!1),f.height=M(F.current.height-u,!0));break;case"ne":m?f.width=M(F.current.width+d,!1):(f.y=M(F.current.y+u,!0),f.width=M(F.current.width+d,!1),f.height=M(F.current.height-u,!0));break;case"sw":m?(f.x=M(F.current.x+d,!1),f.width=M(F.current.width-d,!1)):(f.x=M(F.current.x+d,!1),f.width=M(F.current.width-d,!1),f.height=M(F.current.height+u,!0));break;case"se":m?f.width=M(F.current.width+d,!1):(f.width=M(F.current.width+d,!1),f.height=M(F.current.height+u,!0));break;case"n":m||(f.y=M(F.current.y+u,!0),f.height=M(F.current.height-u,!0));break;case"s":m||(f.height=M(F.current.height+u,!0));break;case"w":f.x=M(F.current.x+d,!1),f.width=M(F.current.width-d,!1);break;case"e":f.width=M(F.current.width+d,!1)}f.width<s&&(r.includes("w")&&(f.x=F.current.x+F.current.width-s),f.width=s),f.height<p&&(r.includes("n")&&(f.y=F.current.y+F.current.height-p),f.height=p);var h=n?n.width/l:v,b=n?n.height/l:w;f.x=Math.max(0,Math.min(h-f.width,f.x)),f.y=Math.max(0,Math.min(b-f.height,f.y)),t&&t(f)},u=function(){O(!1),A(null),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)}},[j,s,p,t,h,g,v,w]);return{isResizing:T,resizeHandle:B,handleResizeStart:D}};function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){return(t=function(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=[".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp",".tiff",".ico"],w=function(e){var t,r,n,a,i,l,c,s,d,u,f,h,b,g,w,S,E,C,_,z,k,R,T,O,N,B,A,W,F,j,P,M,D,I,H,L,G,q,U,Y,X,Z,V,$,J,Q,K,ee,te,re,oe,ne,ae,ie,le,ce,se,de,ue,fe,pe,me,he,be,ge,ye,ve,xe,we,Se,Ee=e.element,Ce=e.isSelected,_e=e.zoom,ze=e.snapToGrid,ke=e.gridSize,Re=e.canvasWidth,Te=e.canvasHeight,Oe=e.onSelect,Ne=e.onUpdate,Be=(e.onRemove,e.onContextMenu),Ae=e.dragAndDrop,We=e.enableRotation,Fe=void 0===We||We,je=e.rotationStep,Pe=void 0===je?15:je,Me=e.rotationSnap,De=void 0===Me||Me,Ie=e.guides,He=void 0===Ie?{horizontal:[],vertical:[]}:Ie,Le=e.snapToGuides,Ge=void 0===Le||Le,qe=(0,o.useRef)(null),Ue=(0,o.useRef)(null),Ye=p({onElementResize:function(e){Ne({x:e.x,y:e.y,width:e.width,height:e.height})},snapToGrid:ze,gridSize:ke,canvasWidth:Re,canvasHeight:Te,guides:He,snapToGuides:Ge,elementType:Ee.type}),Xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=m((0,o.useState)(!1),2),a=n[0],i=n[1],l=m((0,o.useState)({angle:0,centerX:0,centerY:0}),2),c=l[0],s=l[1],d=(0,o.useCallback)(function(o,n){o.preventDefault(),o.stopPropagation(),i(!0);var l=o.currentTarget.getBoundingClientRect(),d=l.left+l.width/2,u=l.top+l.height/2,f=o.clientX-d,p=o.clientY-u,m=Math.atan2(p,f)*(180/Math.PI);s({angle:m-(n.rotation||0),centerX:d,centerY:u});var h=function(o){if(a){var n=o.clientX-d,i=o.clientY-u,l=Math.atan2(i,n)*(180/Math.PI);l-=c.angle,r&&(l=Math.round(l/t)*t),e(l=(l%360+360)%360)}},b=function(){i(!1),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",b)},[a,c,t,r,e]);return{isRotating:a,handleRotationStart:d}}(function(e){Ne({rotation:e})},Pe,De),Ze=(0,o.useCallback)(function(e){if(e.stopPropagation(),Ce){var t=qe.current.closest(".canvas-zoom-wrapper");if(t){var r=t.getBoundingClientRect(),o=qe.current.getBoundingClientRect(),n=(o.left,r.left,o.top,r.top,o.width,o.height,(e.clientX-r.left)/_e),a=(e.clientY-r.top)/_e,i=8/_e,l=Ee.x,c=Ee.y,s=Ee.x+Ee.width,d=Ee.y+Ee.height,u=[{name:"nw",x:l,y:c},{name:"ne",x:s,y:c},{name:"sw",x:l,y:d},{name:"se",x:s,y:d},{name:"n",x:l+Ee.width/2,y:c},{name:"s",x:l+Ee.width/2,y:d},{name:"w",x:l,y:c+Ee.height/2},{name:"e",x:s,y:c+Ee.height/2}].find(function(e){return n>=e.x-i/2&&n<=e.x+i/2&&a>=e.y-i/2&&a<=e.y+i/2});if(u){var f=qe.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();Ye.handleResizeStart(e,u.name,{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height},f,_e)}else{var p=qe.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();Ue.current=p,Ae.handleMouseDown(e,Ee.id,{left:Ee.x,top:Ee.y,width:Ee.width,height:Ee.height},p,_e,Ee.type)}}}else Oe()},[Ce,Oe,Ee,_e,Ye,Ae]),Ve=(0,o.useCallback)(function(e){if(e.stopPropagation(),"text"===Ee.type){var t=Ee.content||Ee.text||"",r=prompt("Modifier le texte:",t);if(null===r)return;Ne({content:r})}},[Ee,Ne]),$e=(0,o.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),Be&&Be(e,Ee.id)},[Be,Ee.id]),Je=Ee.padding||0,Qe=(0,o.useMemo)(function(){return y(y({position:"absolute",left:(Ee.x+Je)*_e,top:(Ee.y+Je)*_e,width:Math.max(1,Ee.width-2*Je)*_e,height:Math.max(1,Ee.height-2*Je)*_e,cursor:Ae.isDragging?"grabbing":"grab",userSelect:"none","--selection-border-width":"2px","--selection-border-color":"#3b82f6","--selection-border-spacing":"2px","--selection-shadow-opacity":"0.1","--show-resize-handles":Ce?"block":"none","--resize-handle-size":"".concat(10*_e,"px"),"--resize-handle-color":"#3b82f6","--resize-handle-border-color":"white","--resize-handle-offset":"".concat(-5*_e,"px"),"--element-border-width":"2px","--resize-zone-size":"16px","--show-resize-zones":Ce?"auto":"none"},(e=Ee.type,["product_table","customer_info","company_logo","company_info","order_number","document_type","progress-bar"].includes(e)?function(e){return y({backgroundColor:"transparent",boxSizing:"border-box"},e.borderWidth&&e.borderWidth>0?{border:"".concat(e.borderWidth*_e,"px ").concat(e.borderStyle||"solid"," ").concat(e.borderColor||"#e5e7eb")}:{})}(Ee):{backgroundColor:Ee.backgroundOpacity&&Ee.backgroundColor&&"transparent"!==Ee.backgroundColor?Ee.backgroundColor.startsWith("#")?Ee.backgroundColor+Math.round(255*Ee.backgroundOpacity).toString(16).padStart(2,"0"):Ee.backgroundColor:Ee.backgroundColor||"transparent",border:Ee.borderWidth?"".concat(Ee.borderWidth*_e,"px ").concat(Ee.borderStyle||"solid"," ").concat(Ee.borderColor||"transparent"):"none"})),{},{borderRadius:Ee.borderRadius?"".concat(Ee.borderRadius*_e,"px"):"0px",opacity:(Ee.opacity||100)/100,transform:"".concat(Ae.draggedElementId===Ee.id&&Ae.dragOffset?"translate(".concat(Ae.dragOffset.x*_e,"px, ").concat(Ae.dragOffset.y*_e,"px) "):"","rotate(").concat(Ee.rotation||0,"deg) scale(").concat(Ee.scale||100,"%)"),filter:"brightness(".concat(Ee.brightness||100,"%) contrast(").concat(Ee.contrast||100,"%) saturate(").concat(Ee.saturate||100,"%)"),boxShadow:Ee.boxShadowColor?"0px ".concat(Ee.boxShadowSpread||0,"px ").concat(Ee.boxShadowBlur||0,"px ").concat(Ee.boxShadowColor):Ee.shadow?"".concat(Ee.shadowOffsetX||2,"px ").concat(Ee.shadowOffsetY||2,"px 4px ").concat(Ee.shadowColor||"#000000","40"):"none"},function(e,t,r){switch(e.type){case"text":return{fontSize:(e.fontSize||14)*t,fontFamily:e.fontFamily||"Arial",color:e.color||"#1e293b",fontWeight:e.fontWeight||"normal",fontStyle:e.fontStyle||"normal",textAlign:e.textAlign||"left",textDecoration:e.textDecoration||"none",lineHeight:e.lineHeight||"normal",display:"flex",alignItems:"center",justifyContent:"center"===e.textAlign?"center":"right"===e.textAlign?"flex-end":"flex-start",wordBreak:"break-word",overflow:"hidden"};case"rectangle":case"shape-rectangle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"0"};case"image":return e.src||e.imageUrl?{backgroundImage:"url(".concat(e.src||e.imageUrl,")"),backgroundSize:e.objectFit||e.fit||"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{backgroundColor:e.backgroundColor||"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",fontSize:12*t};case"line":case"line":return{borderTop:"".concat(e.lineWidth||e.strokeWidth||1,"px solid ").concat(e.lineColor||e.strokeColor||"#6b7280"),height:"".concat(Math.max(e.lineWidth||e.strokeWidth||1,12),"px"),left:0,width:"".concat(r,"px"),cursor:"pointer",backgroundColor:"transparent"};case"layout-header":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14*t,fontWeight:"bold",color:e.color||"#64748b"};case"layout-footer":case"layout-sidebar":case"layout-section":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#64748b"};case"layout-container":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:e.borderRadius?"".concat(e.borderRadius*t,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#94a3b8"};case"shape-circle":return{backgroundColor:e.backgroundColor||"transparent",borderRadius:"50%"};case"shape-line":return{backgroundColor:e.backgroundColor||"transparent",height:"100%"};case"shape-arrow":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(0% 50%, 70% 0%, 70% 40%, 100% 40%, 100% 60%, 70% 60%, 70% 100%)"};case"shape-triangle":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(50% 0%, 0% 100%, 100% 100%)"};case"shape-star":return{backgroundColor:e.backgroundColor||"transparent",clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)"};case"divider":return{backgroundColor:e.backgroundColor||"#e5e7eb",height:"16px",cursor:"pointer",borderRadius:"2px"};default:return{backgroundColor:e.backgroundColor||"transparent",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12*t,color:e.color||"#333333"}}}(Ee,_e,Re));var e},[Ee.x,Ee.y,Ee.width,Ee.height,Ee.rotation,Ee.scale,Ee.backgroundColor,Ee.backgroundOpacity,Ee.borderWidth,Ee.borderStyle,Ee.borderColor,Ee.borderRadius,Ee.opacity,Ee.brightness,Ee.contrast,Ee.saturate,Ee.boxShadowColor,Ee.boxShadowSpread,Ee.boxShadowBlur,Ee.shadow,Ee.shadowOffsetX,Ee.shadowOffsetY,Ee.shadowColor,Ee.color,Ee.fontSize,Ee.fontFamily,Ee.fontWeight,Ee.fontStyle,Ee.textAlign,Ee.textDecoration,Ee.lineHeight,Ee.type,Ee.padding,_e,Ce,Ae.isDragging,Ae.draggedElementId,Ae.dragOffset]);return React.createElement(React.Fragment,null,React.createElement("div",{ref:qe,"data-element-id":Ee.id,className:"canvas-element ".concat(Ce?"selected":""),style:Qe,onMouseDown:Ze,onDoubleClick:Ve,onContextMenu:$e,draggable:!1},"text"===Ee.type?Ee.content||Ee.text||"Texte":"product_table"===Ee.type?null:"image"!==Ee.type||Ee.src?"line"===Ee.type?null:"layout-header"===Ee.type?"[H] En-tÃªte":"layout-footer"===Ee.type?"ðŸ“„ Pied de Page":"layout-sidebar"===Ee.type?"ðŸ“„ Barre LatÃ©rale":"layout-section"===Ee.type?"ðŸ“„ Section":"layout-container"===Ee.type?"ðŸ“¦ Conteneur":"shape-rectangle"===Ee.type?"â–­":"shape-circle"===Ee.type?"â—‹":"shape-line"===Ee.type?null:"shape-arrow"===Ee.type?"â†’":"shape-triangle"===Ee.type?"â–³":"shape-star"===Ee.type?"â­":"divider"===Ee.type?null:"image-upload"===Ee.type?"ðŸ“¤ TÃ©lÃ©charger":"logo"===Ee.type?"ðŸ·ï¸ Logo":"barcode"===Ee.type?"ðŸ“Š 123456":"qrcode"===Ee.type||"qrcode-dynamic"===Ee.type?"ðŸ“± QR":"icon"===Ee.type?Ee.content||"ðŸŽ¯":"dynamic-text"===Ee.type?(xe=Ee.template,we=Ee.customContent,(Se={total_only:"{{order_total}} â‚¬",order_info:"Commande {{order_number}} - {{order_date}}",customer_info:"{{customer_name}} - {{customer_email}}",customer_address:"{{customer_name}}\n{{billing_address}}",full_header:"Facture NÂ° {{order_number}}\nClient: {{customer_name}}\nTotal: {{order_total}} â‚¬",invoice_header:"FACTURE NÂ° {{order_number}}\nDate: {{date}}\nClient: {{customer_name}}\n{{billing_address}}",order_summary:"Sous-total: {{order_subtotal}} â‚¬\nFrais de port: {{order_shipping}} â‚¬\nTVA: {{order_tax}} â‚¬\nTotal: {{order_total}} â‚¬",payment_info:"Ã‰chÃ©ance: {{due_date}}\nMontant: {{order_total}} â‚¬",payment_terms:"Conditions de paiement: 30 jours\nÃ‰chÃ©ance: {{due_date}}\nMontant dÃ»: {{order_total}} â‚¬",shipping_info:"Adresse de livraison:\n{{shipping_address}}",thank_you:"Merci pour votre commande !\nNous vous remercions de votre confiance.",legal_notice:"TVA non applicable - art. 293 B du CGI\nPaiement Ã  30 jours fin de mois",bank_details:"CoordonnÃ©es bancaires:\nIBAN: FR76 1234 5678 9012 3456 7890 123\nBIC: BNPAFRPP",contact_info:"Contact: contact@monentreprise.com\nTÃ©l: 01 23 45 67 89",order_confirmation:"CONFIRMATION DE COMMANDE\nCommande {{order_number}} du {{order_date}}\nStatut: ConfirmÃ©e",delivery_note:"BON DE LIVRAISON\nCommande {{order_number}}\nDestinataire: {{customer_name}}\n{{shipping_address}}",warranty_info:"Garantie: 2 ans piÃ¨ces et main d'Å“uvre\nService aprÃ¨s-vente: sav@monentreprise.com",return_policy:"Droit de rÃ©tractation: 14 jours\nRetour sous 30 jours pour dÃ©fauts",signature_line:"Signature du client:\n\n_______________________________\nDate: {{date}}",invoice_footer:"Facture gÃ©nÃ©rÃ©e automatiquement le {{date}}\nConservez cette facture pour vos archives",terms_conditions:"Conditions gÃ©nÃ©rales de vente disponibles sur notre site\nwww.monentreprise.com/conditions",quality_guarantee:"Tous nos produits sont garantis contre les dÃ©fauts\nService qualitÃ©: qualite@monentreprise.com",eco_friendly:"Entreprise engagÃ©e pour l'environnement\nEmballages recyclables et biodÃ©gradables",follow_up:"Suivi de commande: {{order_number}}\nContact: suivi@monentreprise.com",custom:we||"{{order_total}} â‚¬"})[xe]||Se.total_only).replace(/\{\{order_total\}\}/g,"125.99 â‚¬").replace(/\{\{order_number\}\}/g,"CMD-2025-001").replace(/\{\{customer_name\}\}/g,"Jean Dupont").replace(/\{\{customer_email\}\}/g,"jean@example.com").replace(/\{\{date\}\}/g,"17/10/2025").replace(/\{\{order_date\}\}/g,"15/10/2025").replace(/\{\{due_date\}\}/g,"15/11/2025").replace(/\{\{order_subtotal\}\}/g,"100.00 â‚¬").replace(/\{\{order_tax\}\}/g,"25.99 â‚¬").replace(/\{\{order_shipping\}\}/g,"15.00 â‚¬").replace(/\{\{billing_address\}\}/g,"123 Rue de la Paix\n75001 Paris\nFrance").replace(/\{\{shipping_address\}\}/g,"456 Avenue des Champs\n75008 Paris\nFrance"):"formula"===Ee.type?Ee.content||"{{prix * quantite}}":"conditional-text"===Ee.type?Ee.content||'{{condition ? "Oui" : "Non"}}':"counter"===Ee.type?Ee.content||"1":"date-dynamic"===Ee.type?Ee.content||"{{date|format:Y-m-d}}":"currency"===Ee.type?Ee.content||"{{montant|currency:EUR}}":"table-dynamic"===Ee.type?"ðŸ“Š Tableau":"gradient-box"===Ee.type?"ðŸŒˆ DÃ©gradÃ©":"shadow-box"===Ee.type?"ðŸ“¦ Ombre":"rounded-box"===Ee.type?"ðŸ”„ Arrondi":"border-box"===Ee.type?"ðŸ”² Bordure":"background-pattern"===Ee.type?"ðŸŽ¨ Motif":"watermark"===Ee.type?Ee.content||"CONFIDENTIEL":"progress-bar"===Ee.type||"product_table"===Ee.type||"customer_info"===Ee.type||"mentions"===Ee.type?null:"image"!==Ee.type&&"rectangle"!==Ee.type&&"company_logo"!==Ee.type&&"order_number"!==Ee.type&&"company_info"!==Ee.type&&"document_type"!==Ee.type?Ee.type:null:"ðŸ“· Image","product_table"===Ee.type&&(de=!1!==Ee.showFees?[{name:"Frais de personnalisation",sku:"",quantity:1,price:5,total:5,item_type:"fee"}]:[],ue=Ee.sampleProducts||[].concat([{name:"Produit A - Description du produit",sku:"SKU001",quantity:2,price:19.99,total:39.98,item_type:"line_item"},{name:"Produit B - Un autre article",sku:"SKU002",quantity:1,price:29.99,total:29.99,item_type:"line_item"}],de),ge=(pe=(fe=!1!==Ee.showFees?ue:ue.filter(function(e){return"fee"!==e.item_type})).reduce(function(e,t){return e+t.total},0))+(me=Ee.showShipping?5:0)+(he=Ee.showTaxes?2.25:0)+(be=Ee.showDiscount?-5:0),function(){for(var e=["image","name","sku","quantity","price","total"],t=e.length-1;t>=0;t--){var r;if(!1!==(null===(r=Ee.columns)||void 0===r?void 0:r[e[t]]))return e[t]}}(),ye=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",r=(v(v(v(v(v(v(v(v(v(v(e={default:{headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#000000",rowBg:"transparent",altRowBg:"#fafbfc",borderWidth:2,headerTextColor:"#334155",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderRadius:"4px"},classic:{headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#334155",rowBg:"transparent",altRowBg:"#ffffff",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e293b",headerFontWeight:"700",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(0, 0, 0, 0.15)",borderRadius:"0px"},striped:{headerBg:"#e0f2fe",headerBorder:"#0ea5e9",rowBorder:"#f0f9ff",rowBg:"transparent",altRowBg:"#f8fafc",borderWidth:1,headerTextColor:"#0c4a6e",rowTextColor:"#334155",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 1px 4px rgba(59, 130, 246, 0.2)",borderRadius:"6px"},bordered:{headerBg:"#f8fafc",headerBorder:"#94a3b8",rowBorder:"#e2e8f0",rowBg:"transparent",altRowBg:"#ffffff",borderWidth:1,headerTextColor:"#475569",rowTextColor:"#111827",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 12px rgba(0, 0, 0, 0.1), inset 0 0 0 1px #e5e7eb",borderRadius:"8px"},minimal:{headerBg:"#ffffff",headerBorder:"#d1d5db",rowBorder:"#f3f4f6",rowBg:"transparent",altRowBg:"#ffffff",borderWidth:.5,headerTextColor:"#6b7280",rowTextColor:"#6b7280",headerFontWeight:"500",headerFontSize:"10px",rowFontSize:"9px",shadow:"none",borderRadius:"0px"},modern:{headerBg:"#e9d5ff",headerBorder:"#a855f7",rowBorder:"#f3e8ff",rowBg:"transparent",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#6b21a8",rowTextColor:"#6b21a8",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 20px rgba(102, 126, 234, 0.25)",borderRadius:"8px"},slate_gray:{headerBg:"#374151",headerBorder:"#4b5563",rowBorder:"#f3f4f6",rowBg:"transparent",altRowBg:"#f9fafb",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(55, 65, 81, 0.2)",borderRadius:"4px"},coral:{headerBg:"#fef2f2",headerBorder:"#f87171",rowBorder:"#fef2f2",rowBg:"transparent",altRowBg:"#fef2f2",borderWidth:1,headerTextColor:"#dc2626",rowTextColor:"#dc2626",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 4px 16px rgba(248, 113, 113, 0.3)",borderRadius:"6px"},teal:{headerBg:"#ccfbf1",headerBorder:"#0d9488",rowBorder:"#f0fdfa",rowBg:"transparent",altRowBg:"#f0fdfa",borderWidth:1,headerTextColor:"#0f766e",rowTextColor:"#0f766e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(13, 148, 136, 0.2)",borderRadius:"6px"},indigo:{headerBg:"#eef2ff",headerBorder:"#6366f1",rowBorder:"#eef2ff",rowBg:"transparent",altRowBg:"#eef2ff",borderWidth:1,headerTextColor:"#3730a3",rowTextColor:"#3730a3",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(99, 102, 241, 0.2)",borderRadius:"6px"},amber:{headerBg:"#fef3c7",headerBorder:"#f59e0b",rowBorder:"#fef3c7",rowBg:"transparent",altRowBg:"#fef3c7",borderWidth:1,headerTextColor:"#92400e",rowTextColor:"#92400e",headerFontWeight:"600",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(245, 158, 11, 0.2)",borderRadius:"6px"},light:{headerBg:"#f9fafb",headerBorder:"#d1d5db",rowBorder:"#e5e7eb",rowBg:"transparent",altRowBg:"#ffffff",borderWidth:1,headerTextColor:"#111827",rowTextColor:"#374151",headerFontWeight:"500",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderRadius:"4px"},emerald_forest:{headerBg:"#10b981",headerBorder:"#059669",rowBorder:"#d1d5db",rowBg:"transparent",altRowBg:"#ecfdf5",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#065f46",headerFontWeight:"bold",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(16, 185, 129, 0.2)",borderRadius:"6px"},blue_ocean:{headerBg:"#0c4a6e",headerBorder:"#0284c7",rowBorder:"#bae6fd",rowBg:"transparent",altRowBg:"#f0f9ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#0c4a6e",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(12, 74, 110, 0.2)",borderRadius:"6px"},crimson_red:{headerBg:"#991b1b",headerBorder:"#ef4444",rowBorder:"#fca5a5",rowBg:"transparent",altRowBg:"#fef2f2",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#991b1b",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(153, 27, 27, 0.2)",borderRadius:"6px"}},"light",{headerBg:"#f9fafb",headerBorder:"#d1d5db",rowBorder:"#e5e7eb",rowBg:"transparent",altRowBg:"#ffffff",borderWidth:1,headerTextColor:"#111827",rowTextColor:"#374151",headerFontWeight:"500",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderRadius:"4px"}),"emerald_forest",{headerBg:"#10b981",headerBorder:"#059669",rowBorder:"#d1d5db",rowBg:"transparent",altRowBg:"#ecfdf5",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#065f46",headerFontWeight:"bold",headerFontSize:"11px",rowFontSize:"10px",shadow:"0 2px 8px rgba(16, 185, 129, 0.2)",borderRadius:"6px"}),"blue_ocean",{headerBg:"#0c4a6e",headerBorder:"#0284c7",rowBorder:"#bae6fd",rowBg:"transparent",altRowBg:"#f0f9ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#0c4a6e",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(12, 74, 110, 0.2)",borderRadius:"6px"}),"sunset_orange",{headerBg:"#9a3412",headerBorder:"#ea580c",rowBorder:"#fdba74",rowBg:"transparent",altRowBg:"#fff7ed",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(154, 52, 18, 0.2)",borderRadius:"6px"}),"royal_purple",{headerBg:"#581c87",headerBorder:"#9333ea",rowBorder:"#ddd6fe",rowBg:"transparent",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#581c87",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(88, 28, 135, 0.2)",borderRadius:"6px"}),"rose_pink",{headerBg:"#be123c",headerBorder:"#ec4899",rowBorder:"#fda4af",rowBg:"transparent",altRowBg:"#fff1f2",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#be123c",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(190, 18, 60, 0.2)",borderRadius:"6px"}),"teal_aqua",{headerBg:"#059669",headerBorder:"#14b8a6",rowBorder:"#99f6e4",rowBg:"transparent",altRowBg:"#ecfdf5",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#065f46",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(5, 150, 105, 0.2)",borderRadius:"6px"}),"crimson_red",{headerBg:"#991b1b",headerBorder:"#ef4444",rowBorder:"#fca5a5",rowBg:"transparent",altRowBg:"#fef2f2",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#991b1b",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(153, 27, 27, 0.2)",borderRadius:"6px"}),"amber_gold",{headerBg:"#a16207",headerBorder:"#f59e0b",rowBorder:"#fde68a",rowBg:"transparent",altRowBg:"#fefce8",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#92400e",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(161, 98, 7, 0.2)",borderRadius:"6px"}),"indigo_night",{headerBg:"#312e81",headerBorder:"#6366f1",rowBorder:"#c4b5fd",rowBg:"transparent",altRowBg:"#f5f3ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#312e81",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(49, 46, 129, 0.2)",borderRadius:"6px"}),v(v(v(v(v(v(e,"coral_sunset",{headerBg:"#c2410c",headerBorder:"#fb923c",rowBorder:"#fdba74",rowBg:"transparent",altRowBg:"#fff7ed",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#9a3412",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(194, 65, 12, 0.2)",borderRadius:"6px"}),"mint_green",{headerBg:"#22c55e",headerBorder:"#4ade80",rowBorder:"#bbf7d0",rowBg:"transparent",altRowBg:"#f0fdf4",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#166534",headerFontWeight:"bold",headerFontSize:"#12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(34, 197, 94, 0.2)",borderRadius:"6px"}),"violet_dream",{headerBg:"#6d28d9",headerBorder:"#a855f7",rowBorder:"#e9d5ff",rowBg:"transparent",altRowBg:"#fbf5ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#6b21a8",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(109, 40, 217, 0.2)",borderRadius:"6px"}),"sky_blue",{headerBg:"#0369a1",headerBorder:"#0ea5e9",rowBorder:"#7dd3fc",rowBg:"transparent",altRowBg:"#f0f9ff",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#0c4a6e",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(3, 105, 161, 0.2)",borderRadius:"6px"}),"forest_green",{headerBg:"#15803d",headerBorder:"#22c55e",rowBorder:"#86efac",rowBg:"transparent",altRowBg:"#ecfdf5",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#14532d",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(21, 128, 61, 0.2)",borderRadius:"6px"}),"ruby_red",{headerBg:"#b91c1c",headerBorder:"#ef4444",rowBorder:"#fca5a5",rowBg:"transparent",altRowBg:"#fee2e2",borderWidth:1,headerTextColor:"#ffffff",rowTextColor:"#991b1b",headerFontWeight:"bold",headerFontSize:"12px",rowFontSize:"11px",shadow:"0 2px 8px rgba(185, 28, 28, 0.2)",borderRadius:"6px"}));return r[t]||r.default}(Ee.tableStyle),ve=Ee.showBorders,React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",fontSize:10*_e,fontFamily:'"Inter", "Segoe UI", Roboto, -apple-system, BlinkMacSystemFont, sans-serif',border:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.headerBorder):Ee.borderWidth&&Ee.borderWidth>0?"".concat(Math.max(1,Ee.borderWidth*_e*.5),"px solid ").concat(Ee.borderColor||"#e5e7eb"):"none",borderRadius:"".concat(ye.borderRadius*_e,"px"),overflow:"hidden",backgroundColor:Ee.backgroundColor||"transparent",boxSizing:"border-box",boxShadow:ye.shadowBlur>0?"0 2px ".concat(ye.shadowBlur,"px ").concat(ye.shadowColor):"none",lineHeight:"1.4",color:ye.rowTextColor}},!1!==Ee.showHeaders&&React.createElement("div",{style:{display:"flex",background:ye.headerBg,borderBottom:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.headerBorder):"none",fontWeight:ye.headerFontWeight,color:ye.headerTextColor,fontSize:"".concat(ye.headerFontSize*_e,"px"),textTransform:"uppercase",letterSpacing:"0.025em"}},!1!==(null===(R=Ee.columns)||void 0===R?void 0:R.image)&&React.createElement("div",{key:"header-image",style:{flex:"0 0 40px",padding:"".concat(8*_e,"px ").concat(6*_e,"px"),textAlign:"center",borderRight:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.headerBorder):"none",fontSize:"".concat(ye.headerFontSize*_e*.9,"px"),opacity:.9}},"Img"),!1!==(null===(T=Ee.columns)||void 0===T?void 0:T.name)&&React.createElement("div",{key:"header-name",style:{flex:1,padding:"".concat(8*_e,"px ").concat(10*_e,"px"),textAlign:"left",borderRight:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.headerBorder):"none",fontSize:"".concat(ye.headerFontSize*_e,"px")}},"Produit"),!1!==(null===(O=Ee.columns)||void 0===O?void 0:O.sku)&&React.createElement("div",{key:"header-sku",style:{flex:"0 0 80px",padding:"".concat(8*_e,"px ").concat(10*_e,"px"),textAlign:"left",borderRight:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.headerBorder):"none",fontSize:"".concat(ye.headerFontSize*_e,"px")}},"SKU"),!1!==(null===(N=Ee.columns)||void 0===N?void 0:N.quantity)&&React.createElement("div",{key:"header-quantity",style:{flex:"0 0 40px",padding:"".concat(8*_e,"px ").concat(10*_e,"px"),textAlign:"center",borderRight:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.headerBorder):"none",fontSize:"".concat(ye.headerFontSize*_e,"px")}},"QtÃ©"),!1!==(null===(B=Ee.columns)||void 0===B?void 0:B.price)&&React.createElement("div",{key:"header-price",style:{flex:"0 0 80px",padding:"".concat(8*_e,"px ").concat(10*_e,"px"),textAlign:"right",borderRight:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.headerBorder):"none",fontSize:"".concat(ye.headerFontSize*_e,"px")}},"Prix"),!1!==(null===(A=Ee.columns)||void 0===A?void 0:A.total)&&React.createElement("div",{key:"header-total",style:{flex:"0 0 80px",padding:"".concat(6*_e,"px ").concat(8*_e,"px"),textAlign:"right",fontSize:"".concat(ye.headerFontSize*_e,"px")}},"Total")),React.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},fe.map(function(e,t){var r,o,n,a,i,l;return React.createElement("div",{key:"row-".concat(t),style:{display:"flex",borderBottom:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.rowBorder):"none",backgroundColor:t%2==0?Ee.evenRowBg||ye.rowBg:Ee.oddRowBg||ye.altRowBg,color:t%2==0?Ee.evenRowTextColor||ye.rowTextColor:Ee.oddRowTextColor||ye.rowTextColor,fontSize:"".concat(ye.rowFontSize*_e,"px"),transition:"background-color 0.15s ease"}},!1!==(null===(r=Ee.columns)||void 0===r?void 0:r.image)&&React.createElement("div",{style:{flex:"0 0 40px",padding:"".concat(7*_e,"px ").concat(6*_e,"px"),textAlign:"center",borderRight:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.rowBorder):"none",color:ye.rowTextColor,opacity:.7,fontSize:"".concat(ye.rowFontSize*_e*.9,"px")}},"ðŸ“·"),!1!==(null===(o=Ee.columns)||void 0===o?void 0:o.name)&&React.createElement("div",{style:{flex:1,padding:"".concat(7*_e,"px ").concat(10*_e,"px"),borderRight:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.rowBorder):"none",color:ye.rowTextColor,fontWeight:"500",lineHeight:"1.3"}},e.name),!1!==(null===(n=Ee.columns)||void 0===n?void 0:n.sku)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(7*_e,"px ").concat(10*_e,"px"),borderRight:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.rowBorder):"none",color:ye.rowTextColor,opacity:.8,fontFamily:"monospace",fontSize:"".concat(ye.rowFontSize*_e*.9,"px")}},e.sku),!1!==(null===(a=Ee.columns)||void 0===a?void 0:a.quantity)&&React.createElement("div",{style:{flex:"0 0 40px",padding:"".concat(7*_e,"px ").concat(10*_e,"px"),textAlign:"center",borderRight:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.rowBorder):"none",color:ye.rowTextColor,fontWeight:"600"}},e.quantity),!1!==(null===(i=Ee.columns)||void 0===i?void 0:i.price)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(7*_e,"px ").concat(10*_e,"px"),textAlign:"right",borderRight:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.rowBorder):"none",color:ye.rowTextColor,fontWeight:"500",fontFamily:'"Inter", system-ui, sans-serif'}},e.price.toFixed(2),"â‚¬"),!1!==(null===(l=Ee.columns)||void 0===l?void 0:l.total)&&React.createElement("div",{style:{flex:"0 0 80px",padding:"".concat(7*_e,"px ").concat(10*_e,"px"),textAlign:"right",color:ye.rowTextColor,fontWeight:"600",fontFamily:'"Inter", system-ui, sans-serif'}},e.total.toFixed(2),"â‚¬"))})),(Ee.showSubtotal||Ee.showShipping||Ee.showTaxes||Ee.showDiscount||Ee.showTotal)&&React.createElement("div",{style:{borderTop:ve?"".concat(ye.borderWidth*_e,"px solid ").concat(ye.headerBorder):"none"}},Ee.showSubtotal&&React.createElement("div",{style:{display:"flex",padding:"".concat(6*_e,"px ").concat(8*_e,"px"),fontWeight:"bold",backgroundColor:"transparent",color:ye.rowTextColor}},!1!==(null===(W=Ee.columns)||void 0===W?void 0:W.image)&&React.createElement("div",{style:{flex:"0 0 40px"}}),!1!==(null===(F=Ee.columns)||void 0===F?void 0:F.name)&&React.createElement("div",{style:{flex:1,padding:"0 ".concat(10*_e,"px")}},"Sous-total:"),!1!==(null===(j=Ee.columns)||void 0===j?void 0:j.sku)&&React.createElement("div",{style:{flex:"0 0 80px"}}),!1!==(null===(P=Ee.columns)||void 0===P?void 0:P.quantity)&&React.createElement("div",{style:{flex:"0 0 40px"}}),!1!==(null===(M=Ee.columns)||void 0===M?void 0:M.price)&&React.createElement("div",{style:{flex:"0 0 80px"}}),!1!==(null===(D=Ee.columns)||void 0===D?void 0:D.total)&&React.createElement("div",{style:{flex:"0 0 80px",textAlign:"right",fontWeight:"bold"}},pe.toFixed(2),"â‚¬")),Ee.showShipping&&React.createElement("div",{style:{display:"flex",padding:"".concat(6*_e,"px ").concat(8*_e,"px"),backgroundColor:"transparent",color:ye.rowTextColor}},!1!==(null===(I=Ee.columns)||void 0===I?void 0:I.image)&&React.createElement("div",{style:{flex:"0 0 40px"}}),!1!==(null===(H=Ee.columns)||void 0===H?void 0:H.name)&&React.createElement("div",{style:{flex:1,padding:"0 ".concat(10*_e,"px")}},"Port:"),!1!==(null===(L=Ee.columns)||void 0===L?void 0:L.sku)&&React.createElement("div",{style:{flex:"0 0 80px"}}),!1!==(null===(G=Ee.columns)||void 0===G?void 0:G.quantity)&&React.createElement("div",{style:{flex:"0 0 40px"}}),!1!==(null===(q=Ee.columns)||void 0===q?void 0:q.price)&&React.createElement("div",{style:{flex:"0 0 80px"}}),!1!==(null===(U=Ee.columns)||void 0===U?void 0:U.total)&&React.createElement("div",{style:{flex:"0 0 80px",textAlign:"right"}},me.toFixed(2),"â‚¬")),Ee.showTaxes&&React.createElement("div",{style:{display:"flex",padding:"".concat(6*_e,"px ").concat(8*_e,"px"),backgroundColor:"transparent",color:ye.rowTextColor}},!1!==(null===(Y=Ee.columns)||void 0===Y?void 0:Y.image)&&React.createElement("div",{style:{flex:"0 0 40px"}}),!1!==(null===(X=Ee.columns)||void 0===X?void 0:X.name)&&React.createElement("div",{style:{flex:1,padding:"0 ".concat(10*_e,"px")}},"TVA:"),!1!==(null===(Z=Ee.columns)||void 0===Z?void 0:Z.sku)&&React.createElement("div",{style:{flex:"0 0 80px"}}),!1!==(null===(V=Ee.columns)||void 0===V?void 0:V.quantity)&&React.createElement("div",{style:{flex:"0 0 40px"}}),!1!==(null===($=Ee.columns)||void 0===$?void 0:$.price)&&React.createElement("div",{style:{flex:"0 0 80px"}}),!1!==(null===(J=Ee.columns)||void 0===J?void 0:J.total)&&React.createElement("div",{style:{flex:"0 0 80px",textAlign:"right"}},he.toFixed(2),"â‚¬")),Ee.showDiscount&&React.createElement("div",{style:{display:"flex",padding:"".concat(6*_e,"px ").concat(8*_e,"px"),backgroundColor:"transparent",color:ye.rowTextColor}},!1!==(null===(Q=Ee.columns)||void 0===Q?void 0:Q.image)&&React.createElement("div",{style:{flex:"0 0 40px"}}),!1!==(null===(K=Ee.columns)||void 0===K?void 0:K.name)&&React.createElement("div",{style:{flex:1,padding:"0 ".concat(10*_e,"px")}},"Remise:"),!1!==(null===(ee=Ee.columns)||void 0===ee?void 0:ee.sku)&&React.createElement("div",{style:{flex:"0 0 80px"}}),!1!==(null===(te=Ee.columns)||void 0===te?void 0:te.quantity)&&React.createElement("div",{style:{flex:"0 0 40px"}}),!1!==(null===(re=Ee.columns)||void 0===re?void 0:re.price)&&React.createElement("div",{style:{flex:"0 0 80px"}}),!1!==(null===(oe=Ee.columns)||void 0===oe?void 0:oe.total)&&React.createElement("div",{style:{flex:"0 0 80px",textAlign:"right"}},Math.abs(be).toFixed(2),"â‚¬")),Ee.showTotal&&React.createElement("div",{style:{display:"flex",padding:"".concat(6*_e,"px ").concat(8*_e,"px"),fontWeight:"bold",background:ye.gradient||ye.headerBg,color:ye.headerTextColor||("modern"===Ee.tableStyle?"#ffffff":"#000000"),boxShadow:ye.shadowBlur>0?"0 2px ".concat(ye.shadowBlur,"px ").concat(ye.shadowColor):"none"}},!1!==(null===(ne=Ee.columns)||void 0===ne?void 0:ne.image)&&React.createElement("div",{style:{flex:"0 0 40px"}}),!1!==(null===(ae=Ee.columns)||void 0===ae?void 0:ae.name)&&React.createElement("div",{style:{flex:1,padding:"0 ".concat(10*_e,"px")}},"TOTAL:"),!1!==(null===(ie=Ee.columns)||void 0===ie?void 0:ie.sku)&&React.createElement("div",{style:{flex:"0 0 80px"}}),!1!==(null===(le=Ee.columns)||void 0===le?void 0:le.quantity)&&React.createElement("div",{style:{flex:"0 0 40px"}}),!1!==(null===(ce=Ee.columns)||void 0===ce?void 0:ce.price)&&React.createElement("div",{style:{flex:"0 0 80px"}}),!1!==(null===(se=Ee.columns)||void 0===se?void 0:se.total)&&React.createElement("div",{style:{flex:"0 0 80px",textAlign:"right",fontWeight:"bold"}},ge.toFixed(2),"â‚¬"))))),"customer_info"===Ee.type&&React.createElement("div",{style:{width:"100%",height:"100%",padding:"".concat(8*_e,"px"),fontSize:"".concat((Ee.fontSize||12)*_e,"px"),fontFamily:Ee.fontFamily||"Arial, sans-serif",fontWeight:Ee.fontWeight||"normal",fontStyle:Ee.fontStyle||"normal",textDecoration:Ee.textDecoration||"none",color:Ee.color||"#333",backgroundColor:Ee.backgroundColor||"transparent",border:Ee.borderWidth&&Ee.borderWidth>0?"".concat(Math.max(1,Ee.borderWidth*_e*.5),"px solid ").concat(Ee.borderColor||"#e5e7eb"):"none",borderRadius:Ee.borderRadius?"".concat(Ee.borderRadius*_e,"px"):"2px",boxSizing:"border-box"}},React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"row":"column",gap:"".concat(Ee.spacing*_e||8*_e,"px"),height:"100%"}},(null===(t=Ee.fields)||void 0===t?void 0:t.includes("name"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"Nom :"),React.createElement("div",{style:{fontWeight:"bold",color:Ee.color||"#333"}},"Jean Dupont")),(null===(r=Ee.fields)||void 0===r?void 0:r.includes("email"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"Email :"),React.createElement("div",{style:{color:"#1976d2"}},"jean.dupont@email.com")),(null===(n=Ee.fields)||void 0===n?void 0:n.includes("phone"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"TÃ©lÃ©phone :"),React.createElement("div",{style:{color:Ee.color||"#333"}},"+33 6 12 34 56 78")),(null===(a=Ee.fields)||void 0===a?void 0:a.includes("address"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"Adresse :"),React.createElement("div",{style:{color:Ee.color||"#333",lineHeight:"1.4"}},"123 Rue de la Paix",React.createElement("br",null),"75001 Paris, France")),(null===(i=Ee.fields)||void 0===i?void 0:i.includes("company"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"SociÃ©tÃ© :"),React.createElement("div",{style:{fontWeight:"bold",color:Ee.color||"#333"}},"ABC Company SARL")),(null===(l=Ee.fields)||void 0===l?void 0:l.includes("vat"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"NÂ° TVA :"),React.createElement("div",{style:{color:Ee.color||"#333"}},"FR 12 345 678 901")),(null===(c=Ee.fields)||void 0===c?void 0:c.includes("siret"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"SIRET :"),React.createElement("div",{style:{color:Ee.color||"#333"}},"123 456 789 00012")))),"mentions"===Ee.type&&function(){var e=[];Ee.showEmail&&e.push("contact@monsite.com"),Ee.showPhone&&e.push("01 23 45 67 89"),Ee.showSiret&&e.push("SIRET: 123 456 789 00012"),Ee.showVat&&e.push("TVA: FR 12 345 678 901"),Ee.showAddress&&e.push("123 Rue de la Paix, 75001 Paris"),Ee.showWebsite&&e.push("www.monsite.com"),Ee.showCustomText&&Ee.customText&&e.push(Ee.customText);var t=e.join(Ee.separator||" â€¢ ");return React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"===Ee.textAlign?"center":"right"===Ee.textAlign?"flex-end":"flex-start",padding:"".concat(4*_e,"px"),fontSize:"".concat((Ee.fontSize||8)*_e,"px"),fontFamily:Ee.fontFamily||"Arial, sans-serif",fontWeight:Ee.fontWeight||"normal",color:Ee.color||"#666666",lineHeight:Ee.lineHeight||1.2,backgroundColor:Ee.backgroundColor||"transparent",border:Ee.borderWidth&&Ee.borderWidth>0?"".concat(Math.max(1,Ee.borderWidth*_e*.5),"px solid ").concat(Ee.borderColor||"#e5e7eb"):"none",borderRadius:Ee.borderRadius?"".concat(Ee.borderRadius*_e,"px"):"2px",boxSizing:"border-box",wordBreak:"break-word",overflow:"hidden"}},"vertical"===Ee.layout?React.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"".concat(2*_e,"px"),width:"100%",textAlign:Ee.textAlign||"center"}},e.map(function(e,t){return React.createElement("div",{key:t,style:{lineHeight:Ee.lineHeight||1.2}},e)})):React.createElement("div",{style:{textAlign:Ee.textAlign||"center",lineHeight:Ee.lineHeight||1.2,width:"100%"}},t))}(),"company_logo"===Ee.type&&(k=function(e){if(!e)return{isValid:!1,format:null,reason:"URL vide"};try{var t=new URL(e).pathname.toLowerCase();return x.some(function(e){return t.endsWith(e)})?{isValid:!0,format:t.split(".").pop(),reason:null}:{isValid:!1,format:null,reason:"Extension non supportÃ©e. Formats acceptÃ©s: ".concat(x.join(", "))}}catch(e){return{isValid:!1,format:null,reason:"URL invalide"}}}(z=Ee.src||Ee.imageUrl),React.createElement("div",{onMouseDown:Ze,style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"===Ee.alignment?"center":"right"===Ee.alignment?"flex-end":"flex-start",padding:"8px",backgroundColor:Ee.backgroundColor||"transparent",border:Ee.borderWidth&&Ee.borderWidth>0?"".concat(Math.max(1,Ee.borderWidth*_e*.5),"px solid ").concat(Ee.borderColor||"#e5e7eb"):"none",borderRadius:Ee.borderRadius?"".concat(Ee.borderRadius*_e,"px"):"2px",boxSizing:"border-box"}},z&&k.isValid?React.createElement("img",{src:z,alt:"Logo entreprise",style:{width:Ee.autoResize?"auto":"".concat(Ee.width||150,"px"),height:Ee.autoResize?"auto":"".concat(Ee.height||80,"px"),maxWidth:Ee.autoResize?"".concat(Ee.width||150,"px"):"none",maxHeight:Ee.autoResize?"".concat(Ee.height||80,"px"):"none",objectFit:Ee.fit||"contain",borderRadius:Ee.borderRadius?"".concat(Ee.borderRadius*_e,"px"):"0",border:Ee.borderWidth?"".concat(Ee.borderWidth,"px ").concat(Ee.borderStyle||"solid"," ").concat(Ee.borderColor||"transparent"):Ee.showBorder?"1px solid transparent":"none"},onLoad:function(e){if(Ee.autoResize&&e.target){var t=e.target,r=Ee.width||150,o=Ee.height||80,n=t.naturalWidth/t.naturalHeight,a=r,i=o;t.naturalWidth>r||t.naturalHeight>o?n>r/o?(a=r,i=r/n):(i=o,a=o*n):(a=t.naturalWidth,i=t.naturalHeight),t.style.width="".concat(a,"px"),t.style.height="".concat(i,"px")}},onError:function(e){}}):z&&!k.isValid?React.createElement("div",{style:{width:"".concat(Ee.width||150,"px"),height:"".concat(Ee.height||80,"px"),backgroundColor:"#fee2e2",border:"2px solid #fca5a5",borderRadius:Ee.borderRadius?"".concat(Ee.borderRadius*_e,"px"):"4px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#dc2626",fontSize:"".concat(10*_e,"px"),textAlign:"center",padding:"4px"}},React.createElement("div",{style:{fontSize:"".concat(14*_e,"px"),marginBottom:"2px"}},"âš ï¸"),React.createElement("div",null,"Format non supportÃ©"),React.createElement("div",{style:{fontSize:"".concat(8*_e,"px"),marginTop:"2px"}},k.reason)):React.createElement("div",{style:{width:"".concat(Ee.width||150,"px"),height:"".concat(Ee.height||80,"px"),backgroundColor:"#f5f5f5",border:Ee.borderWidth?"".concat(Ee.borderWidth,"px ").concat(Ee.borderStyle||"solid"," ").concat(Ee.borderColor||"transparent"):Ee.showBorder?"1px solid transparent":"none",borderRadius:Ee.borderRadius?"".concat(Ee.borderRadius*_e,"px"):"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"".concat(12*_e,"px")}},"ðŸ¢ Logo"))),"company_info"===Ee.type&&React.createElement("div",{style:{width:"100%",height:"100%",padding:"".concat(8*_e,"px"),fontSize:"".concat((Ee.fontSize||12)*_e,"px"),fontFamily:Ee.fontFamily||"Arial, sans-serif",fontWeight:Ee.fontWeight||"normal",fontStyle:Ee.fontStyle||"normal",textDecoration:Ee.textDecoration||"none",color:Ee.color||"#333",backgroundColor:Ee.backgroundColor||"transparent",border:Ee.borderWidth&&Ee.borderWidth>0?"".concat(Math.max(1,Ee.borderWidth*_e*.5),"px solid ").concat(Ee.borderColor||"#e5e7eb"):"none",borderRadius:Ee.borderRadius?"".concat(Ee.borderRadius*_e,"px"):"2px",boxSizing:"border-box"}},React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"row":"column",gap:"".concat(Ee.spacing*_e||8*_e,"px"),height:"100%"}},(null===(s=Ee.fields)||void 0===s?void 0:s.includes("name"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"Nom :"),React.createElement("div",{style:{fontWeight:"bold",color:Ee.color||"#333"}},Ee.previewCompanyName||"Ma SociÃ©tÃ© SARL")),(null===(d=Ee.fields)||void 0===d?void 0:d.includes("address"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"Adresse :"),React.createElement("div",{style:{color:Ee.color||"#333",lineHeight:"1.4"}},Ee.previewAddress?Ee.previewAddress.split("\n").map(function(e,t){return React.createElement("span",{key:t},e,t<Ee.previewAddress.split("\n").length-1&&React.createElement("br",null))}):React.createElement(React.Fragment,null,"123 Rue de l'Entreprise",React.createElement("br",null),"75001 Paris, France"))),(null===(u=Ee.fields)||void 0===u?void 0:u.includes("phone"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"TÃ©lÃ©phone :"),React.createElement("div",{style:{color:Ee.color||"#333"}},Ee.previewPhone||"+33 1 23 45 67 89")),(null===(f=Ee.fields)||void 0===f?void 0:f.includes("email"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"Email :"),React.createElement("div",{style:{color:"#1976d2"}},Ee.previewEmail||"contact@masociete.com")),(null===(h=Ee.fields)||void 0===h?void 0:h.includes("website"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"Site web :"),React.createElement("div",{style:{color:"#1976d2"}},Ee.previewWebsite||"www.masociete.com")),(null===(b=Ee.fields)||void 0===b?void 0:b.includes("vat"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"NÂ° TVA :"),React.createElement("div",{style:{color:Ee.color||"#333"}},Ee.previewVat||"FR 12 345 678 901")),(null===(g=Ee.fields)||void 0===g?void 0:g.includes("rcs"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:(Ee.labelStyle,"bold"),textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"RCS :"),React.createElement("div",{style:{color:Ee.color||"#333"}},Ee.previewRcs||"Paris B 123 456 789")),(null===(w=Ee.fields)||void 0===w?void 0:w.includes("siret"))&&React.createElement("div",{style:{display:"flex",flexDirection:"horizontal"===Ee.layout?"column":"row",alignItems:"horizontal"===Ee.layout?"flex-start":"center",gap:"".concat(4*_e,"px"),flex:"horizontal"===Ee.layout?"1":"none"}},Ee.showLabels&&React.createElement("div",{style:{fontWeight:"bold"===Ee.labelStyle?"bold":"normal",textTransform:"uppercase"===Ee.labelStyle?"uppercase":"none",color:Ee.color||"#666",minWidth:"horizontal"===Ee.layout?"auto":"80px",fontSize:"".concat(11*_e,"px")}},"SIRET :"),React.createElement("div",{style:{color:Ee.color||"#333"}},Ee.previewSiret||"123 456 789 00012")))),"order_number"===Ee.type&&(S=Ee.format||"Commande #{order_number} - {order_date}",E=Math.max(8,Math.min(72,Ee.fontSize||14)),C=Ee.color||"#333333",_=function(e,t){try{return e.replace(/{order_number}/g,t.order_number||"N/A").replace(/{order_date}/g,t.order_date||"N/A").replace(/{order_year}/g,t.order_year||"N/A").replace(/{order_month}/g,t.order_month||"N/A").replace(/{order_day}/g,t.order_day||"N/A")}catch(e){return"Commande #".concat(t.order_number||"N/A")}}(S,{order_number:Ee.previewOrderNumber||"12345",order_date:Ee.previewOrderDate||"15/10/2025",order_year:Ee.previewOrderYear||"2025",order_month:Ee.previewOrderMonth||"10",order_day:Ee.previewOrderDay||"15"}),React.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"===Ee.textAlign?"center":"right"===Ee.textAlign?"flex-end":"flex-start",padding:"".concat(8*_e,"px"),fontSize:"".concat(E*_e,"px"),fontFamily:Ee.fontFamily||"Arial",fontWeight:Ee.fontWeight||"bold",color:C,textAlign:Ee.textAlign||"right",backgroundColor:Ee.backgroundColor||"transparent",border:Ee.borderWidth&&Ee.borderWidth>0?"".concat(Math.max(1,Ee.borderWidth*_e*.5),"px solid ").concat(Ee.borderColor||"#e5e7eb"):"none",borderRadius:Ee.borderRadius?"".concat(Ee.borderRadius*_e,"px"):"2px",boxSizing:"border-box"}},Ee.showLabel&&React.createElement("div",{style:{fontSize:"".concat(Math.max(8,E-2)*_e,"px"),fontWeight:"normal",color:Ee.labelColor||C,marginBottom:"".concat(4*_e,"px"),opacity:.8}},Ee.labelText||"NÂ° de commande:"),React.createElement("div",{style:{wordBreak:"break-word",lineHeight:Ee.lineHeight||1.2}},_))),"document_type"===Ee.type&&React.createElement("div",{style:{display:"inline-block",padding:"".concat(8*_e,"px"),fontSize:"".concat((Ee.fontSize||18)*_e,"px"),fontFamily:Ee.fontFamily||"Arial",fontWeight:Ee.fontWeight||"bold",color:Ee.color||"#1e293b",textAlign:Ee.textAlign||"center",backgroundColor:Ee.backgroundColor||"transparent",border:Ee.borderWidth&&Ee.borderWidth>0?"".concat(Math.max(1,Ee.borderWidth*_e*.5),"px solid ").concat(Ee.borderColor||"#e5e7eb"):"none",borderRadius:Ee.borderRadius?"".concat(Ee.borderRadius*_e,"px"):"4px",whiteSpace:"nowrap",boxSizing:"border-box"}},"invoice"===Ee.documentType?"FACTURE":"quote"===Ee.documentType?"DEVIS":"receipt"===Ee.documentType?"REÃ‡U":"order"===Ee.documentType?"COMMANDE":"credit_note"===Ee.documentType?"AVOIR":"DOCUMENT"),Ce&&React.createElement(React.Fragment,null,"line"!==Ee.type&&"divider"!==Ee.type&&React.createElement(React.Fragment,null,React.createElement("div",{key:"resize-handle-nw-".concat(Ee.id),className:"resize-handle nw",onMouseDown:function(e){var t;e.stopPropagation();var r=null===(t=qe.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),o=r?r.getBoundingClientRect():null;Ye.handleResizeStart(e,"nw",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height},o,_e)},onContextMenu:$e}),React.createElement("div",{key:"resize-handle-ne-".concat(Ee.id),className:"resize-handle ne",onMouseDown:function(e){var t;e.stopPropagation();var r=null===(t=qe.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),o=r?r.getBoundingClientRect():null;Ye.handleResizeStart(e,"ne",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height},o,_e)},onContextMenu:$e}),React.createElement("div",{key:"resize-handle-sw-".concat(Ee.id),className:"resize-handle sw",onMouseDown:function(e){var t;e.stopPropagation();var r=null===(t=qe.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),o=r?r.getBoundingClientRect():null;Ye.handleResizeStart(e,"sw",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height},o,_e)},onContextMenu:$e})),React.createElement("div",{key:"resize-handle-se-".concat(Ee.id),className:"resize-handle se",onMouseDown:function(e){var t;e.stopPropagation();var r=null===(t=qe.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),o=r?r.getBoundingClientRect():null;Ye.handleResizeStart(e,"se",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height},o,_e)},onContextMenu:$e}),"line"!==Ee.type&&"divider"!==Ee.type&&React.createElement(React.Fragment,null,React.createElement("div",{key:"resize-handle-n-".concat(Ee.id),className:"resize-handle n",onMouseDown:function(e){var t;e.stopPropagation();var r=null===(t=qe.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),o=r?r.getBoundingClientRect():null;Ye.handleResizeStart(e,"n",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height},o,_e)},onContextMenu:$e}),React.createElement("div",{key:"resize-handle-s-".concat(Ee.id),className:"resize-handle s",onMouseDown:function(e){var t;e.stopPropagation();var r=null===(t=qe.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),o=r?r.getBoundingClientRect():null;Ye.handleResizeStart(e,"s",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height},o,_e)},onContextMenu:$e})),React.createElement("div",{key:"resize-handle-w-".concat(Ee.id),className:"resize-handle w",onMouseDown:function(e){var t;e.stopPropagation();var r=null===(t=qe.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),o=r?r.getBoundingClientRect():null;Ye.handleResizeStart(e,"w",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height},o,_e)},onContextMenu:$e}),React.createElement("div",{key:"resize-handle-e-".concat(Ee.id),className:"resize-handle e",onMouseDown:function(e){var t;e.stopPropagation();var r=null===(t=qe.current)||void 0===t?void 0:t.closest(".canvas-zoom-wrapper"),o=r?r.getBoundingClientRect():null;Ye.handleResizeStart(e,"e",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height},o,_e)},onContextMenu:$e}),"line"!==Ee.type&&"divider"!==Ee.type&&React.createElement(React.Fragment,null,React.createElement("div",{key:"resize-zone-n-".concat(Ee.id),className:"resize-zone resize-zone-n",onMouseDown:function(e){e.stopPropagation(),Ye.handleResizeStart(e,"n",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height})}}),React.createElement("div",{key:"resize-zone-s-".concat(Ee.id),className:"resize-zone resize-zone-s",onMouseDown:function(e){e.stopPropagation(),Ye.handleResizeStart(e,"s",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height})}})),React.createElement("div",{key:"resize-zone-w-".concat(Ee.id),className:"resize-zone resize-zone-w",onMouseDown:function(e){e.stopPropagation(),Ye.handleResizeStart(e,"w",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height})}}),React.createElement("div",{key:"resize-zone-e-".concat(Ee.id),className:"resize-zone resize-zone-e",onMouseDown:function(e){e.stopPropagation(),Ye.handleResizeStart(e,"e",{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height})}})),Ce&&Fe&&React.createElement("div",{key:"rotation-handle-".concat(Ee.id),className:"rotation-handle",style:{position:"absolute",top:"".concat(-20*_e,"px"),left:"50%",transform:"translateX(-50%)",width:"".concat(12*_e,"px"),height:"".concat(12*_e,"px"),backgroundColor:"#3b82f6",border:"".concat(2*_e,"px solid white"),borderRadius:"50%",cursor:"alias",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onMouseDown:function(e){e.stopPropagation(),Xe.handleRotationStart(e,Ee)},title:"Faire pivoter l'Ã©lÃ©ment"})),"progress-bar"===Ee.type&&React.createElement("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:"".concat(Ee.progressValue||75,"%"),backgroundColor:Ee.progressColor||"#3b82f6",borderRadius:"10px",transition:"width 0.3s ease",border:Ee.borderWidth&&Ee.borderWidth>0?"".concat(Math.max(1,Ee.borderWidth*_e*.5),"px solid ").concat(Ee.borderColor||"#e5e7eb"):"none",boxSizing:"border-box"}}))};function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var _=function(e){var t=e.onElementMove,r=e.onElementDrop,n=e.snapToGrid,a=void 0===n||n,i=e.gridSize,l=void 0===i?10:i,c=e.zoom,s=void 0===c?1:c,d=e.canvasWidth,u=void 0===d?595:d,f=e.canvasHeight,p=void 0===f?842:f,m=e.guides,h=void 0===m?{horizontal:[],vertical:[]}:m,b=e.snapToGuides,g=void 0===b||b,y=S((0,o.useState)(!1),2),v=y[0],x=y[1],w=S((0,o.useState)({x:0,y:0}),2),C=w[0],_=w[1],z=S((0,o.useState)(null),2),k=z[0],R=z[1],T=(0,o.useRef)({x:0,y:0}),O=(0,o.useRef)({x:0,y:0}),N=(0,o.useRef)(null),B=(0,o.useRef)({x:0,y:0}),A=(0,o.useCallback)(function(e){return a?Math.round(e/l)*l:e},[a,l]),W=(0,o.useCallback)(function(e){if(!g)return e;var t,r=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=E(e))){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){i=!0,n=e},f:function(){try{a||null==t.return||t.return()}finally{if(i)throw n}}}}(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?h.vertical:h.horizontal);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(Math.abs(e-o)<=5)return o}}catch(e){r.e(e)}finally{r.f()}return e},[g,h]),F=(0,o.useCallback)(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("line"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)&&!t)return e;var r=e;return r=A(r),W(r,t)},[A,W]);(0,o.useEffect)(function(){return function(){N.current&&(document.removeEventListener("mousemove",N.current.handleMouseMove),document.removeEventListener("mouseup",N.current.handleMouseUp),N.current=null)}},[]);var j=(0,o.useCallback)(function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(0===e.button&&e.target&&e.target.isConnected&&e.target.parentNode&&e.target.parentNode.isConnected){e.preventDefault(),x(!0),R(t);var l=n||{left:0,top:0,width:u,height:p},c=a||s||1,d=(e.clientX-l.left)/c,f=(e.clientY-l.top)/c;T.current={x:d-o.left,y:f-o.top},O.current={x:o.left,y:o.top};var m=function(e){if(N.current){var t=(e.clientX-l.left)/c,r=(e.clientY-l.top)/c,i=t-d,s=r-f,m=n?n.width/a:u,h=n?n.height/a:p,b=Math.max(0,Math.min(m-o.width,F(o.left+i,!1,y))),g=Math.max(0,Math.min(h-o.height,F(o.top+s,!0,y))),y=N.current.elementType,v={x:b-o.left,y:g-o.top};_(v),B.current=v}},h=function(){if(!N.current)return x(!1),_({x:0,y:0}),void R(null);var e=N.current,t=e.elementId;if(e.elementType,x(!1),r&&t){var o=O.current.x+B.current.x,n=O.current.y+B.current.y;r(t,{x:o,y:n})}_({x:0,y:0}),R(null),O.current={x:0,y:0},B.current={x:0,y:0},document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),N.current=null};N.current={handleMouseMove:m,handleMouseUp:h,elementId:t,elementType:i},document.addEventListener("mousemove",m),document.addEventListener("mouseup",h)}},[A,t,r,s,u,p]);return{isDragging:v,dragOffset:C,draggedElementId:k,handleMouseDown:j,handleDragStart:(0,o.useCallback)(function(e,t,r){e.dataTransfer.setData("text/plain",t),e.dataTransfer.effectAllowed="move",T.current={x:e.clientX-r.left,y:e.clientY-r.top}},[]),handleDragOver:(0,o.useCallback)(function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),handleDrop:(0,o.useCallback)(function(e,t,o){e.preventDefault();var n=e.dataTransfer.getData("text/plain");if(n){var a=(e.clientX-t.left-T.current.x)/s,i=(e.clientY-t.top-T.current.y)/s,l=t?t.width/s:u,c=t?t.height/s:p,d=Math.max(0,Math.min(l-o.width,F(a,!1))),f=Math.max(0,Math.min(c-o.height,F(i,!0)));r&&r(n,{x:d,y:f})}},[A,r,s,u,p])}};function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var k=function(e){var t,r,o=e.selectedTool,a=e.onToolSelect,i=e.zoom,l=e.onZoomChange,c=e.showGrid,s=e.onShowGridChange,d=e.snapToGrid,u=e.onSnapToGridChange,f=e.snapToElements,p=e.onSnapToElementsChange,m=e.onUndo,h=e.onRedo,b=e.canUndo,g=e.canRedo,y=e.settings,v=void 0===y?{}:y,x=(t=n().useState("home"),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=x[0],S=x[1],E=!1!==v.showGrid,C=!1!==v.snapToGrid,_=!1!==v.snapToElements;return n().createElement("div",{className:"toolbar ribbon-toolbar"},n().createElement("div",{className:"toolbar-tabs"},[{id:"home",label:"Accueil",icon:"ðŸ "},{id:"insert",label:"Insertion",icon:"âž•"},{id:"view",label:"Affichage",icon:"ðŸ‘ï¸"}].map(function(e){return n().createElement("button",{key:e.id,className:"tab-button ".concat(w===e.id?"active":""),onClick:function(){return S(e.id)}},n().createElement("span",{className:"tab-icon"},e.icon),n().createElement("span",{className:"tab-label"},e.label))})),n().createElement("div",{className:"toolbar-content"},"home"===w&&n().createElement("div",{className:"tab-content"},n().createElement("div",{className:"toolbar-group"},n().createElement("h5",null,"Presse-papiers"),n().createElement("div",{className:"group-buttons"},n().createElement("button",{className:"edit-button",onClick:m,disabled:!b,title:"Annuler (Ctrl+Z)"},n().createElement("div",{className:"button-content"},n().createElement("span",{className:"button-icon"},"â†¶"),n().createElement("span",{className:"button-text"},"Annuler"))),n().createElement("button",{className:"edit-button",onClick:h,disabled:!g,title:"RÃ©tablir (Ctrl+Y)"},n().createElement("div",{className:"button-content"},n().createElement("span",{className:"button-icon"},"â†·"),n().createElement("span",{className:"button-text"},"RÃ©tablir"))))),n().createElement("div",{className:"toolbar-group"},n().createElement("h5",null,"Outils"),n().createElement("div",{className:"group-buttons"},[{id:"select",label:"SÃ©lection (V)",icon:"ðŸ‘†",shortcut:"V"},{id:"add-text",label:"Texte Simple (T)",icon:"ðŸ“",shortcut:"T"},{id:"add-text-title",label:"Titre (H)",icon:"ðŸ“„",shortcut:"H"},{id:"add-text-subtitle",label:"Sous-titre (S)",icon:"ðŸ“‹",shortcut:"S"}].map(function(e){return n().createElement("button",{key:e.id,className:"tool-button ".concat(o===e.id?"active":""),onClick:function(){return a(e.id)},title:e.label},n().createElement("div",{className:"tool-content"},n().createElement("span",{className:"tool-icon"},e.icon),n().createElement("span",{className:"tool-label"},e.shortcut)))}))),n().createElement("div",{className:"toolbar-group"},n().createElement("h5",null,"Formes"),n().createElement("div",{className:"group-buttons shapes-grid"},[{id:"add-rectangle",label:"Rectangle (R)",icon:"â–­",shortcut:"R"},{id:"add-circle",label:"Cercle (C)",icon:"â—‹",shortcut:"C"},{id:"add-line",label:"Ligne (L)",icon:"â”",shortcut:"L"},{id:"add-arrow",label:"FlÃ¨che (A)",icon:"âž¤",shortcut:"A"},{id:"add-triangle",label:"Triangle (3)",icon:"â–³",shortcut:"3"},{id:"add-star",label:"Ã‰toile (5)",icon:"â­",shortcut:"5"}].map(function(e){return n().createElement("button",{key:e.id,className:"tool-button ".concat(o===e.id?"active":""),onClick:function(){return a(e.id)},title:e.label},n().createElement("div",{className:"tool-content"},n().createElement("span",{className:"tool-icon"},e.icon),n().createElement("span",{className:"tool-label"},e.shortcut)))})))),"insert"===w&&n().createElement("div",{className:"tab-content"},n().createElement("div",{className:"toolbar-group"},n().createElement("h5",null,"Ã‰lÃ©ments"),n().createElement("div",{className:"group-buttons"},[{id:"add-divider",label:"SÃ©parateur (D)",icon:"âŽ¯",shortcut:"D"},{id:"add-image",label:"Image (I)",icon:"ðŸ–¼ï¸",shortcut:"I"},{id:"add-dynamic-text",label:"Texte Dynamique (Y)",icon:"ðŸ“",shortcut:"Y"}].map(function(e){return n().createElement("button",{key:e.id,className:"tool-button ".concat(o===e.id?"active":""),onClick:function(){return a(e.id)},title:e.label},n().createElement("div",{className:"tool-content"},n().createElement("span",{className:"tool-icon"},e.icon),n().createElement("span",{className:"tool-label"},e.shortcut)))})))),"view"===w&&n().createElement("div",{className:"tab-content"},n().createElement("div",{className:"toolbar-group"},n().createElement("h5",null,"Zoom"),n().createElement("div",{className:"group-buttons"},n().createElement("div",{className:"zoom-controls"},n().createElement("button",{className:"zoom-button",onClick:function(){return l(Math.max(.1,i-.1))},title:"Zoom arriÃ¨re (Ctrl+-)"},n().createElement("span",{className:"button-icon"},"ðŸ”"),n().createElement("span",{className:"button-text"},"-")),n().createElement("span",{className:"zoom-value"},Math.round(100*i),"%"),n().createElement("button",{className:"zoom-button",onClick:function(){return l(Math.min(3,i+.1))},title:"Zoom avant (Ctrl+=)"},n().createElement("span",{className:"button-icon"},"ðŸ”"),n().createElement("span",{className:"button-text"},"+"))))),n().createElement("div",{className:"toolbar-group"},n().createElement("h5",null,"Affichage"),n().createElement("div",{className:"group-buttons"},n().createElement("div",{className:"display-options"},n().createElement("label",{className:"toggle-label ".concat(E?"":"disabled"),title:E?"Afficher/Masquer la grille (G)":"âŒ Grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux",style:E?{position:"relative"}:{opacity:.5,cursor:"not-allowed",position:"relative"}},n().createElement("input",{type:"checkbox",checked:!!E&&c,onChange:function(e){return E&&s(e.target.checked)},disabled:!E}),n().createElement("span",{className:"toggle-text"},"Grille"),n().createElement("span",{className:"toggle-shortcut"},"(G)"),!E&&n().createElement("span",{className:"tooltip-hint"},"âŒ Grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux")),n().createElement("label",{className:"toggle-label ".concat(C?"":"disabled"),title:C?"Aimanter Ã  la grille (X)":"âŒ Aimantation Ã  la grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux",style:C?{position:"relative"}:{opacity:.5,cursor:"not-allowed",position:"relative"}},n().createElement("input",{type:"checkbox",checked:!!C&&d,onChange:function(e){return C&&u(e.target.checked)},disabled:!C}),n().createElement("span",{className:"toggle-text"},"Snap Grille"),n().createElement("span",{className:"toggle-shortcut"},"(X)"),!C&&n().createElement("span",{className:"tooltip-hint"},"âŒ Aimantation Ã  la grille dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux")),n().createElement("label",{className:"toggle-label ".concat(_?"":"disabled"),title:_?"Aimanter aux Ã©lÃ©ments (Z)":"âŒ Aimantation aux Ã©lÃ©ments dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux",style:_?{position:"relative"}:{opacity:.5,cursor:"not-allowed",position:"relative"}},n().createElement("input",{type:"checkbox",checked:!!_&&f,onChange:function(e){return _&&p(e.target.checked)},disabled:!_}),n().createElement("span",{className:"toggle-text"},"Snap Ã‰lÃ©ments"),n().createElement("span",{className:"toggle-shortcut"},"(Z)"),!_&&n().createElement("span",{className:"tooltip-hint"},"âŒ Aimantation aux Ã©lÃ©ments dÃ©sactivÃ©e dans les paramÃ¨tres gÃ©nÃ©raux"))))))))};function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){A(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function A(e,t,r){return(t=function(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function G(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function a(r,o,n,a){var c=o&&o.prototype instanceof l?o:l,s=Object.create(c.prototype);return q(s,"_invoke",function(r,o,n){var a,l,c,s=0,d=n||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,o){for(l=r,c=o,t=0;!u&&s&&!n&&t<d.length;t++){var n,a=d[t],p=f.p,m=a[2];r>3?(n=m===o)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((n=r<2&&p<a[1])?(l=0,f.v=o,f.n=a[1]):p<m&&(n=r<3||a[0]>o||o>m)&&(a[4]=r,a[5]=o,f.n=m,l=0))}if(n||r>1)return i;throw u=!0,o}return function(n,d,m){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,m),l=d,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(s=2,a){if(l||(n="next"),t=a[n]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(o,f))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:u}}}(r,n,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(q(t={},o,function(){return this}),t),u=s.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,q(e,n,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=s,q(u,"constructor",s),q(s,"constructor",c),c.displayName="GeneratorFunction",q(s,n,"GeneratorFunction"),q(u),q(u,n,"Generator"),q(u,o,function(){return this}),q(u,"toString",function(){return"[object Generator]"}),(G=function(){return{w:a,m:f}})()}function q(e,t,r,o){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}q=function(e,t,r,o){function a(t,r){q(e,t,function(e){return this._invoke(t,r,e)})}t?n?n(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},q(e,t,r,o)}function U(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ee(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function X(e,t,r,o,n,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(o,n)}function Z(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var a=e.apply(t,r);function i(e){X(a,o,n,i,l,"next",e)}function l(e){X(a,o,n,i,l,"throw",e)}i(void 0)})}}function V(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach(function(t){Q(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Q(e,t,r){return(t=function(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var re=function(e){var t=(0,o.useRef)(e);return t.current=e,t};if("undefined"!=typeof window&&void 0===window.toastr){var oe=function(e,t,r){var o=document.createElement("div");switch(o.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      z-index: 100;\n      padding: 15px 20px;\n      margin-bottom: 10px;\n      border-radius: 5px;\n      color: white;\n      font-family: Arial, sans-serif;\n      font-size: 14px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n      max-width: 300px;\n      opacity: 0;\n      transform: translateX(100%);\n      transition: all 0.3s ease;\n    ",e){case"success":o.style.backgroundColor="#51A351";break;case"error":o.style.backgroundColor="#BD362F";break;case"warning":o.style.backgroundColor="#F89406";break;default:o.style.backgroundColor="#2F96B4"}var n=t?"<strong>".concat(t,"</strong><br>"):"";o.innerHTML="".concat(n).concat(r);var a=document.createElement("button");function i(e){e.style.opacity="0",e.style.transform="translateX(100%)",setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e)},300)}a.innerHTML="Ã—",a.style.cssText="\n      position: absolute;\n      top: 5px;\n      right: 10px;\n      background: none;\n      border: none;\n      color: white;\n      font-size: 20px;\n      cursor: pointer;\n      opacity: 0.8;\n    ",a.onclick=function(){return i(o)},o.appendChild(a),document.body.appendChild(o),setTimeout(function(){o.style.opacity="1",o.style.transform="translateX(0)"},10),setTimeout(function(){return i(o)},5e3)};window.toastr={success:function(e,t){oe("success",t,e)},error:function(e,t){oe("error",t,e)},warning:function(e,t){oe("warning",t,e)},info:function(e,t){oe("info",t,e)},options:{}}}var ne=function(e){var t=e.initialElements,r=void 0===t?[]:t,n=e.templateId,a=void 0===n?null:n,i=e.canvasWidth,l=void 0===i?595:i,c=e.canvasHeight,s=void 0===c?842:c,d=e.globalSettings,u=void 0===d?null:d,f=K((0,o.useState)(r),2),p=f[0],m=f[1],h=K((0,o.useState)(1),2),b=h[0],g=h[1],y=K((0,o.useState)(!1),2),v=y[0],x=(y[1],K((0,o.useState)({saving:!1,loading:!1,duplicating:!1,deleting:!1}),2)),w=x[0],S=x[1],E=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).maxHistorySize,t=void 0===e?50:e,r=R((0,o.useState)([]),2),n=r[0],a=r[1],i=R((0,o.useState)(-1),2),l=i[0],c=i[1],s=(0,o.useRef)(!1);return{addToHistory:(0,o.useCallback)(function(e){s.current?s.current=!1:a(function(r){var o=r.slice(0,l+1);return o.push(e),o.length>t?(o.shift(),c(o.length-1),o):(c(o.length-1),o)})},[l,t]),undo:(0,o.useCallback)(function(){return l>0?(s.current=!0,c(function(e){return e-1}),n[l-1]):null},[l,n]),redo:(0,o.useCallback)(function(){return l<n.length-1?(s.current=!0,c(function(e){return e+1}),n[l+1]):null},[l,n]),canUndo:(0,o.useCallback)(function(){return l>0},[l]),canRedo:(0,o.useCallback)(function(){return l<n.length-1},[l]),clearHistory:(0,o.useCallback)(function(){a([]),c(-1)},[]),getCurrentState:(0,o.useCallback)(function(){return l>=0?n[l]:null},[l,n]),historySize:n.length,currentIndex:l}}(),C=function(e){var t=e.onSelectionChange,r=e.multiSelect,n=void 0===r||r,a=F((0,o.useState)([]),2),i=a[0],l=a[1],c=F((0,o.useState)(null),2),s=c[0],d=c[1],u=(0,o.useCallback)(function(e){n&&arguments.length>1&&void 0!==arguments[1]&&arguments[1]?l(function(r){var o=r.includes(e)?r.filter(function(t){return t!==e}):[].concat(W(r),[e]);return t&&t(o),o}):(l([e]),t&&t([e]))},[n,t]),f=(0,o.useCallback)(function(e){l(e),t&&t(e)},[t]),p=(0,o.useCallback)(function(){l([]),t&&t([])},[t]),m=(0,o.useCallback)(function(e){return i.includes(e)},[i]),h=(0,o.useCallback)(function(e,t){d({startX:e,startY:t,endX:e,endY:t})},[]),b=(0,o.useCallback)(function(e,t){d(function(r){return r?B(B({},r),{},{endX:e,endY:t}):null})},[]),g=(0,o.useCallback)(function(e){if(s){var r=s.startX,o=s.startY,a=s.endX,i=s.endY,c=Math.min(r,a),u=Math.max(r,a),f=Math.min(o,i),p=Math.max(o,i),m=e.filter(function(e){var t=e.x+e.width/2,r=e.y+e.height/2;return t>=c&&t<=u&&r>=f&&r<=p}).map(function(e){return e.id});m.length>0&&(n?l(function(e){var r=W(new Set([].concat(W(e),W(m))));return t&&t(r),r}):(l(m),t&&t(m))),d(null)}},[s,n,t]),y=(0,o.useCallback)(function(){return W(i)},[i]),v=(0,o.useCallback)(function(){return W(i)},[i]);return{selectedElements:i,selectionBox:s,selectElement:u,selectAll:f,clearSelection:p,isSelected:m,startSelectionBox:h,updateSelectionBox:b,endSelectionBox:g,deleteSelected:y,duplicateSelected:v}}({onSelectionChange:(0,o.useCallback)(function(e){},[]),multiSelect:u&&u.multiSelect||!0}),z=re(E),k=re(C),T=function(e){var t,r,n=e.onPaste,a=(t=(0,o.useState)(null),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1],c=(0,o.useCallback)(function(e){l(e)},[]),s=(0,o.useCallback)(function(){return i&&n&&n(i),i},[i,n]),d=(0,o.useCallback)(function(e){return c(e),e},[c]),u=(0,o.useCallback)(function(){return null!==i},[i]),f=(0,o.useCallback)(function(){l(null)},[]);return{copy:c,paste:s,cut:d,hasData:u,clear:f,clipboardData:i}}({onPaste:(0,o.useCallback)(function(e){if("elements"===e.type){var t=e.elements.map(function(t){return J(J({},t),{},{id:"element_".concat(b+e.elements.indexOf(t)),x:t.x+20,y:t.y+20})});m(function(e){return[].concat(V(e),V(t))}),g(function(e){return e+t.length}),C.selectAll(t.map(function(e){return e.id}))}},[b,C])}),O=function(e){var t=e.initialZoom,r=void 0===t?1:t,n=e.minZoom,a=void 0===n?.1:n,i=e.maxZoom,l=void 0===i?3:i,c=e.zoomStep,s=void 0===c?.1:c,d=D((0,o.useState)(r),2),u=d[0],f=d[1],p=D((0,o.useState)({x:0,y:0}),2),m=p[0],h=p[1],b=(0,o.useCallback)(function(){f(function(e){return Math.min(e+s,l)})},[l,s]),g=(0,o.useCallback)(function(){f(function(e){return Math.max(e-s,a)})},[a,s]),y=(0,o.useCallback)(function(e){var t=Math.max(a,Math.min(l,e));f(t)},[a,l]),v=(0,o.useCallback)(function(){f(r)},[r]),x=(0,o.useCallback)(function(e,t,r,o){var n=r/e,i=o/t,c=Math.min(n,i,l);f(Math.max(c,a))},[a,l]),w=(0,o.useCallback)(function(e,t,r){var o=Math.max(a,Math.min(l,u*r));h({x:e,y:t}),f(o)},[u,a,l]),S=(0,o.useCallback)(function(e,t,r,o,n){if(e&&0!==e.length){var i=1/0,c=1/0,s=-1/0,d=-1/0;e.forEach(function(e){i=Math.min(i,e.x),c=Math.min(c,e.y),s=Math.max(s,e.x+e.width),d=Math.max(d,e.y+e.height)});var u=s-i,p=d-c,m=o/(1.2*u),b=n/(1.2*p),g=Math.min(m,b,l),y=Math.max(a,Math.min(l,g)),v=o/2-(i+u/2)*y,x=n/2-(c+p/2)*y;f(y),h({x:v,y:x})}},[a,l]),E=(0,o.useCallback)(function(){return{transform:"scale(".concat(u,")"),transformOrigin:"".concat(m.x,"px ").concat(m.y,"px")}},[u,m]),C=(0,o.useCallback)(function(e,t){return{x:(e-m.x)/u,y:(t-m.y)/u}},[u,m]),_=(0,o.useCallback)(function(e,t){return{x:e*u+m.x,y:t*u+m.y}},[u,m]);return{zoom:u,zoomOrigin:m,zoomIn:b,zoomOut:g,setZoomLevel:y,resetZoom:v,zoomToFit:x,zoomToPoint:w,zoomToSelection:S,getTransformStyle:E,screenToCanvas:C,canvasToScreen:_}}({initialZoom:u?parseFloat(u.defaultZoom)/100:1,minZoom:u?u.minZoom/100:.25,maxZoom:u?u.maxZoom/100:3,zoomStep:u?u.zoomStep/100:.1}),N=function(){var e=H((0,o.useState)(null),2),t=e[0],r=e[1],n=H((0,o.useState)(!1),2),a=n[0],i=n[1],l=(0,o.useCallback)(function(e,t,o){var n=36*o.length,a=e,i=t;e+180>window.innerWidth&&(a=e-180),t+n>window.innerHeight&&(i=t-n),a=Math.max(0,Math.min(a,window.innerWidth-180)),i=Math.max(0,Math.min(i,window.innerHeight-n)),r({x:a,y:i,items:o})},[]),c=(0,o.useCallback)(function(){t&&(i(!0),setTimeout(function(){r(null),i(!1)},150))},[t]),s=(0,o.useCallback)(function(e){return c(),e},[c]);return(0,o.useEffect)(function(){var e=function(e){t&&!e.target.closest(".context-menu")&&c()},r=function(e){"Escape"===e.key&&t&&c()};return t&&(document.addEventListener("mousedown",e),document.addEventListener("keydown",r)),function(){document.removeEventListener("mousedown",e),document.removeEventListener("keydown",r)}},[t,c]),{contextMenu:t,showContextMenu:l,hideContextMenu:c,handleContextMenuAction:s,isAnimating:a}}(),A=(0,o.useCallback)(function(e,t){m(function(r){return r.map(function(r){if(r.id===e){var o=J(J({},r),t);return"divider"===r.type&&(o.height=16),"line"===r.type&&(o.height=12),o}return r})})},[]);(0,o.useEffect)(function(){if(p.length>0)try{z.current&&"function"==typeof z.current.addToHistory&&z.current.addToHistory({elements:p,nextId:b})}catch(e){}},[p,b]);var j=(0,o.useCallback)(function(e){return Array.isArray(e)?e.map(function(e){return e.id&&e.type?e:null}).filter(Boolean):[]},[]);(0,o.useEffect)(function(){var e=j(r);if(m(e),e&&e.length>0){var t=Math.max.apply(Math,V(e.map(function(e){var t=e.id&&e.id.split("_")||[];return parseInt(t[1]||0)})));g(t+1)}else g(1)},[r,j]);var P=_({onElementMove:(0,o.useCallback)(function(e,t){A(e,t)},[A]),onElementDrop:(0,o.useCallback)(function(e,t){A(e,t),E.addToHistory({elements:p.map(function(r){return r.id===e?J(J({},r),t):r}),nextId:b})},[A,E,p,b])}),I=(0,o.useCallback)(function(e){return e.map(function(e){var t=J({},e);return["domElement","ref","eventListeners","component","render"].forEach(function(e){delete t[e]}),t})},[]);(0,o.useEffect)(function(){if(p.length>0||0===E.historySize){var e=I(p);E.addToHistory({elements:e,nextId:b})}},[p,b,E,I]),(0,o.useEffect)(function(){var e=["product_table","customer_info","company_logo","company_info","order_number","document_type","progress-bar"];p.some(function(t){return e.includes(t.type)&&"transparent"!==t.backgroundColor})&&m(function(t){return t.map(function(t){return e.includes(t.type)&&"transparent"!==t.backgroundColor?J(J({},t),{},{backgroundColor:"transparent"}):t})})},[]);var L=(0,o.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=z.current,o=k.current;if(o&&r&&"function"==typeof o.selectElement&&"function"==typeof r.addToHistory){var n=J(J({id:"element_".concat(b),type:e},{x:50,y:50,width:100,height:50,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderStyle:"solid",borderRadius:0,color:"#1e293b",fontFamily:"Inter, sans-serif",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",text:"Texte",opacity:100,rotation:0,scale:100,visible:!0,src:"",alt:"",objectFit:"cover",brightness:100,contrast:100,saturate:100,shadow:!1,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2,showHeaders:!0,showBorders:!0,dataSource:"order_items",showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1,tableStyle:"default",tableColorPrimary:"",tableColorSecondary:"",progressColor:"#3b82f6",progressValue:75,lineColor:"#64748b",lineWidth:2,documentType:"invoice",imageUrl:"",spacing:8,layout:"vertical",alignment:"left",fit:"contain"}),t);"line"===e?n.height=12:"divider"===e&&(n.height=16,n.width=200),m(function(e){var t=[].concat(V(e),[n]);try{r&&"function"==typeof r.addToHistory&&r.addToHistory({elements:t,nextId:b+1})}catch(e){}return t}),g(function(e){return e+1});try{o&&"function"==typeof o.selectElement&&o.selectElement(n.id)}catch(e){}}},[b]),q=(0,o.useCallback)(function(e){m(function(t){var r=t.filter(function(t){return t.id!==e});return E.addToHistory({elements:r,nextId:b}),r}),C.clearSelection()},[C,E,b]),X=(0,o.useCallback)(function(){var e=C.deleteSelected();m(function(t){var r=t.filter(function(t){return!e.includes(t.id)});return E.addToHistory({elements:r,nextId:b}),r}),C.clearSelection()},[C,E,b]),$=(0,o.useCallback)(function(e){var t=p.find(function(t){return t.id===e});if(t){var r=J(J({},t),{},{id:"element_".concat(b),x:t.x+20,y:t.y+20});m(function(e){var t=[].concat(V(e),[r]);return E.addToHistory({elements:t,nextId:b+1}),t}),g(function(e){return e+1}),C.selectElement(r.id)}},[p,b,C,E]),Q=(0,o.useCallback)(function(){var e=C.duplicateSelected(),t=[];e.forEach(function(e){var r=p.find(function(t){return t.id===e});if(r){var o=J(J({},r),{},{id:"element_".concat(b+t.length),x:r.x+20,y:r.y+20});t.push(o)}}),t.length>0&&(m(function(e){var r=[].concat(V(e),t);return E.addToHistory({elements:r,nextId:b+t.length}),r}),g(function(e){return e+t.length}),C.selectAll(t.map(function(e){return e.id})))},[p,b,C,E]),ee=(0,o.useCallback)(function(){var e=C.selectedElements,t=p.filter(function(t){return e.includes(t.id)});t.length>0&&T.copy({type:"elements",elements:t})},[p,C,T]),te=(0,o.useCallback)(function(){T.paste()},[T]),oe=(0,o.useCallback)(function(){var e=E.undo();e&&(m(e.elements),g(e.nextId),C.clearSelection())},[E,C]),ne=(0,o.useCallback)(function(){var e=E.redo();e&&(m(e.elements),g(e.nextId),C.clearSelection())},[E,C]),ae=(0,o.useCallback)(Z(G().m(function e(){var t,r,o,n,i,c,d,u,f,m,h,b,g,y,v,x,E,C,_,z;return G().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!w.saving){e.n=1;break}return e.a(2);case 1:return S(function(e){return J(J({},e),{},{saving:!0})}),t=a&&"0"!==a&&0!==a,r=function(){return Promise.resolve(!0)},e.n=2,r();case 2:o=e.v,e.p=3,n=function(e){for(var t=["domElement","eventListeners","ref","onClick","onMouseDown","onMouseUp","onMouseMove","onContextMenu","onDoubleClick","onDragStart","onDragEnd","onResize","component","render","props","state","context","refs","_reactInternalInstance","_reactInternals","$$typeof","constructor","prototype","_owner","_store","key","ref","_self","_source"],r={},o=0,n=Object.entries(e);o<n.length;o++){var a=K(n[o],2),i=a[0],l=a[1];if(!t.includes(i)&&!i.startsWith("_")){var c=l;if(["x","y","width","height","fontSize","opacity","lineHeight","letterSpacing","zIndex","borderWidth","borderRadius","rotation","padding","scale","shadowOffsetX","shadowOffsetY","brightness","contrast","saturate","progressValue","lineWidth","spacing"].includes(i)&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(c={x:0,y:0,width:100,height:50,fontSize:14,opacity:1,lineHeight:1.2,letterSpacing:0,zIndex:0,borderWidth:0,borderRadius:0,rotation:0,padding:0}[i]||0):c=parseFloat(l)),["color","backgroundColor","borderColor","shadowColor","progressColor","lineColor"].includes(i)&&l&&"transparent"!==l&&!/^#[0-9A-Fa-f]{3,6}$/i.test(l)&&(c={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",gray:"#808080",grey:"#808080",transparent:"transparent"}[l.toLowerCase()]||"#000000"),"fontWeight"===i&&(["normal","bold","100","200","300","400","500","600","700","800","900"].includes(l)||(c="normal")),"textAlign"===i&&(["left","center","right","justify"].includes(l)||(c="left")),"textDecoration"===i&&(["none","underline","overline","line-through"].includes(l)||(c="none")),"textTransform"===i&&(["none","capitalize","uppercase","lowercase"].includes(l)||(c="none")),"borderStyle"===i&&(["solid","dashed","dotted","double","none"].includes(l)||(c="solid")),"text"!==i&&"content"!==i||"string"!=typeof l&&(c=""),"fontFamily"===i&&("string"==typeof l&&""!==l.trim()||(c="Inter, sans-serif")),"fontStyle"===i&&(["normal","italic","oblique"].includes(l)||(c="normal")),"visible"===i&&"boolean"!=typeof l&&(c=!0),"scale"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(c=100):c=parseFloat(l),c=Math.max(10,Math.min(500,c))),"shadow"===i&&"boolean"!=typeof l&&(c=!1),"shadowColor"===i&&l&&"transparent"!==l&&!/^#[0-9A-Fa-f]{3,6}$/i.test(l)&&(c={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",gray:"#808080",grey:"#808080",transparent:"transparent"}[l.toLowerCase()]||"#000000"),["shadowOffsetX","shadowOffsetY"].includes(i)&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(c=2):c=parseFloat(l)),"brightness"!==i&&"contrast"!==i&&"saturate"!==i||("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(c=100):c=parseFloat(l),c=Math.max(0,Math.min(200,c))),"objectFit"===i&&(["fill","contain","cover","none","scale-down"].includes(l)||(c="cover")),["showHeaders","showBorders","showSubtotal","showShipping","showTaxes","showDiscount","showTotal"].includes(i)&&"boolean"!=typeof l&&(c=!1),"dataSource"===i&&(["order_items","cart_items","custom"].includes(l)||(c="order_items")),"progressValue"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(c=0):c=parseFloat(l),c=Math.max(0,Math.min(100,c))),"lineWidth"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(c=2):c=parseFloat(l),c=Math.max(1,Math.min(10,c))),"spacing"===i&&("string"!=typeof l||""===l||isNaN(l)?"number"!=typeof l&&(c=8):c=parseFloat(l)),"layout"===i&&(["vertical","horizontal","grid"].includes(l)||(c="vertical")),"alignment"===i&&(["left","center","right","justify"].includes(l)||(c="left")),"fit"===i&&(["contain","cover","fill","none"].includes(l)||(c="contain")),"documentType"===i&&(["invoice","quote","receipt","order"].includes(l)||(c="invoice")),"columns"===i&&(c="object"===Y(l)&&null!==l?{image:void 0===l.image||l.image,name:void 0===l.name||l.name,sku:void 0!==l.sku&&l.sku,quantity:void 0===l.quantity||l.quantity,price:void 0===l.price||l.price,total:void 0===l.total||l.total}:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0}),null!=c)if("string"==typeof c||"number"==typeof c||"boolean"==typeof c)r[i]=c;else if(Array.isArray(c))try{var s=c.filter(function(e){return null!=e}).map(function(e){if("object"===Y(e)&&null!==e){for(var t={},r=0,o=Object.entries(e);r<o.length;r++){var n=K(o[r],2),a=n[0],i=n[1];"string"!=typeof i&&"number"!=typeof i&&"boolean"!=typeof i||(t[a]=i)}return t}return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:null}).filter(function(e){return null!==e});JSON.stringify(s),r[i]=s}catch(e){r[i]=[]}else if("object"===Y(c))try{for(var d={},u=0,f=Object.entries(c);u<f.length;u++){var p=K(f[u],2),m=p[0],h=p[1];m.startsWith("_")||t.includes(m)||"string"!=typeof h&&"number"!=typeof h&&"boolean"!=typeof h||(d[m]=h)}JSON.stringify(d),r[i]=d}catch(e){r[i]={}}}}return r},i=[];try{p.forEach(function(e,t){e&&Y(e),e&&e.id,e&&e.type}),i=p.filter(function(e){return e&&"object"===Y(e)&&e.id&&e.type}).map(n).filter(function(e){return e&&e.id&&e.type}),JSON.stringify(i)}catch(e){i=[]}if(c={elements:i,canvasWidth:l,canvasHeight:s,version:"1.0"},e.p=4,d=JSON.stringify(c),(u=JSON.parse(d)).elements&&Array.isArray(u.elements)){e.n=5;break}throw new Error("Structure de donnÃ©es invalide: Ã©lÃ©ments manquants ou incorrects");case 5:f=U(u.elements),e.p=6,f.s();case 7:if((m=f.n()).done){e.n=9;break}if((h=m.value).id&&h.type){e.n=8;break}throw new Error("Ã‰lÃ©ment invalide dÃ©tectÃ©: ID ou type manquant pour ".concat(JSON.stringify(h)));case 8:e.n=7;break;case 9:e.n=11;break;case 10:e.p=10,C=e.v,f.e(C);case 11:return e.p=11,f.f(),e.f(11);case 12:e.n=14;break;case 13:throw e.p=13,_=e.v,new Error("DonnÃ©es JSON invalides cÃ´tÃ© client: "+_.message);case 14:return(b=new FormData).append("action","pdf_builder_pro_save_template"),b.append("template_data",d),b.append("template_name",window.pdfBuilderData&&window.pdfBuilderData.templateName||"Template ".concat(window.pdfBuilderData&&window.pdfBuilderData.templateId||"New")),b.append("template_id",window.pdfBuilderData&&window.pdfBuilderData.templateId||"0"),e.p=15,e.n=16,fetch(window.pdfBuilderAjax&&window.pdfBuilderAjax.ajaxurl||"/wp-admin/admin-ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"pdf_builder_get_fresh_nonce"})});case 16:if(!(g=e.v).ok){e.n=18;break}return e.n=17,g.json();case 17:(y=e.v).success?b.append("nonce",y.data.nonce):b.append("nonce",window.pdfBuilderAjax&&window.pdfBuilderAjax.nonce||window.pdfBuilderData&&window.pdfBuilderData.nonce||""),e.n=19;break;case 18:b.append("nonce",window.pdfBuilderAjax&&window.pdfBuilderAjax.nonce||window.pdfBuilderData&&window.pdfBuilderData.nonce||"");case 19:e.n=21;break;case 20:e.p=20,e.v,b.append("nonce",window.pdfBuilderAjax&&window.pdfBuilderAjax.nonce||window.pdfBuilderData&&window.pdfBuilderData.nonce||"");case 21:return e.n=22,fetch(window.pdfBuilderAjax&&window.pdfBuilderAjax.ajaxurl||"/wp-admin/admin-ajax.php",{method:"POST",body:b});case 22:return v=e.v,e.n=23,v.json();case 23:if((x=e.v).success){e.n=24;break}throw new Error(x.data&&x.data.message||"Erreur lors de la sauvegarde");case 24:return t&&(o?toastr.success("Modifications du canvas sauvegardÃ©es avec succÃ¨s !"):alert("Modifications du canvas sauvegardÃ©es avec succÃ¨s !")),e.a(2,c);case 25:throw e.p=25,z=e.v,E=z.message||"Erreur inconnue lors de la sauvegarde",o?toastr.error("Erreur lors de la sauvegarde: ".concat(E)):alert("Erreur lors de la sauvegarde: ".concat(E)),z;case 26:return e.p=26,S(function(e){return J(J({},e),{},{saving:!1})}),e.f(26);case 27:return e.a(2)}},e,null,[[15,20],[6,10,11,12],[4,13],[3,25,26,27]])})),[p,l,s,v,a]),ie=((0,o.useCallback)(function(e){e.elements&&(m(e.elements),g(e.nextId||Math.max.apply(Math,V(e.elements.map(function(e){return parseInt(e.id.split("_")[1])})||[0]))+1),C.clearSelection(),E.clearHistory())},[C,E]),(0,o.useCallback)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=[];r?o.push({label:"Dupliquer",action:function(){return $(r)}},{label:"Supprimer",action:function(){return q(r)}},{type:"separator"},{label:"Copier",action:ee},{label:"Coller",action:te,disabled:!T.hasData()}):C.selectedElements.length>0?o.push({label:"Dupliquer",action:Q},{label:"Supprimer",action:X},{type:"separator"},{label:"Copier",action:ee},{label:"Coller",action:te,disabled:!T.hasData()}):o.push({label:"Coller",action:te,disabled:!T.hasData()}),N.showContextMenu(e,t,o)},[C,N,$,q,ee,te,T,Q,X])),le=(0,o.useCallback)(function(){var e=C.selectedElements;if(0!==e.length){var t=p.filter(function(t){return e.includes(t.id)});if(0!==t.length){var r=document.querySelector(".canvas-container");if(r){var o=r.getBoundingClientRect(),n=o.width,a=o.height;O.zoomToSelection(t,l,s,n,a)}}}},[C.selectedElements,p,O,l,s]),ce=function(e){return Math.round(e*(96/72))};return(0,o.useMemo)(function(){return{elements:p,canvasWidth:ce(l),canvasHeight:ce(s),selection:C,zoom:O,contextMenu:N,dragAndDrop:P,addElement:L,updateElement:A,deleteElement:q,deleteSelectedElements:X,duplicateElement:$,duplicateSelectedElements:Q,copySelectedElements:ee,pasteElements:te,undo:oe,redo:ne,canUndo:E.canUndo(),canRedo:E.canRedo(),history:E,zoomToSelection:le,saveTemplate:ae,loadingStates:w,isSaving:w.saving,showContextMenu:ie,getAllElements:(0,o.useCallback)(function(){return p},[p]),getElementById:(0,o.useCallback)(function(e){return p.find(function(t){return t.id===e})},[p])}},[p,l,s,C,O,N,P,L,A,q,X,$,Q,ee,te,oe,ne,E,ie,le,ae])};function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ie(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function a(r,o,n,a){var c=o&&o.prototype instanceof l?o:l,s=Object.create(c.prototype);return le(s,"_invoke",function(r,o,n){var a,l,c,s=0,d=n||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,o){for(l=r,c=o,t=0;!u&&s&&!n&&t<d.length;t++){var n,a=d[t],p=f.p,m=a[2];r>3?(n=m===o)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((n=r<2&&p<a[1])?(l=0,f.v=o,f.n=a[1]):p<m&&(n=r<3||a[0]>o||o>m)&&(a[4]=r,a[5]=o,f.n=m,l=0))}if(n||r>1)return i;throw u=!0,o}return function(n,d,m){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,m),l=d,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(s=2,a){if(l||(n="next"),t=a[n]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(o,f))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:u}}}(r,n,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(le(t={},o,function(){return this}),t),u=s.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,le(e,n,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=s,le(u,"constructor",s),le(s,"constructor",c),c.displayName="GeneratorFunction",le(s,n,"GeneratorFunction"),le(u),le(u,n,"Generator"),le(u,o,function(){return this}),le(u,"toString",function(){return"[object Generator]"}),(ie=function(){return{w:a,m:f}})()}function le(e,t,r,o){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}le=function(e,t,r,o){function a(t,r){le(e,t,function(e){return this._invoke(t,r,e)})}t?n?n(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},le(e,t,r,o)}function ce(e,t,r,o,n,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(o,n)}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach(function(t){ue(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ue(e,t,r){return(t=function(e){var t=function(e){if("object"!=ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var pe=function(){var e,t,r=(e=(0,o.useState)({defaultCanvasWidth:210,defaultCanvasHeight:297,defaultCanvasUnit:"mm",defaultOrientation:"portrait",canvasBackgroundColor:"#ffffff",canvasShowTransparency:!1,containerBackgroundColor:"#f8f9fa",containerShowTransparency:!1,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,showMargins:!0,showGrid:!0,gridSize:10,gridColor:"#e0e0e0",gridOpacity:30,snapToGrid:!0,snapToElements:!0,snapToMargins:!0,snapTolerance:5,showGuides:!0,lockGuides:!1,defaultZoom:"100",minZoom:10,maxZoom:500,zoomStep:25,panWithMouse:!0,smoothZoom:!0,showZoomIndicator:!0,zoomWithWheel:!1,zoomToSelection:!0,showResizeHandles:!0,handleSize:8,handleColor:"#007cba",enableRotation:!0,rotationStep:15,rotationSnap:!0,multiSelect:!0,selectAllShortcut:!0,showSelectionBounds:!0,copyPasteEnabled:!0,duplicateOnDrag:!1,exportQuality:"print",exportFormat:"pdf",compressImages:!0,imageQuality:85,maxImageSize:2048,includeMetadata:!0,pdfAuthor:"",pdfSubject:"",autoCrop:!1,embedFonts:!0,optimizeForWeb:!0,enableHardwareAcceleration:!0,limitFps:!0,maxFps:60,autoSaveEnabled:!0,autoSaveInterval:30,autoSaveVersions:10,undoLevels:50,redoLevels:50,enableKeyboardShortcuts:!0,debugMode:!1,showFps:!1,resizeHandleSize:12,resizeHandleColor:"#007cba",resizeHandleBorderColor:"#ffffff",resizeHandleOffset:-6,selectionBorderWidth:2,selectionBorderColor:"var(--primary-color)",selectionShadowOpacity:.1,selectionBorderSpacing:2,resizeZoneSize:16,resizeZoneOpacity:.1,showResizeHandlesLegacy:!0,showResizeZones:!0,selectionAnimation:!0,defaultTextColor:"#000000",defaultBackgroundColor:"#ffffff",defaultFontSize:14,ajaxurl:window.ajaxurl||"",nonce:window.pdfBuilderNonce||""}),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],a=r[1],i=function(){return window.pdfBuilderCanvasSettings?window.pdfBuilderCanvasSettings:null},l=function(){return window.pdfBuilderAjax?{ajaxurl:window.pdfBuilderAjax.ajaxurl||"",nonce:window.pdfBuilderAjax.nonce||""}:{ajaxurl:window.ajaxurl||"",nonce:window.pdfBuilderNonce||window.pdf_builder_nonce||""}};(0,o.useEffect)(function(){var e=i(),t=l();if(e)a(function(r){return de(de(de({},r),t),{},{defaultCanvasWidth:e.default_canvas_width||r.defaultCanvasWidth,defaultCanvasHeight:e.default_canvas_height||r.defaultCanvasHeight,defaultCanvasUnit:e.default_canvas_unit||r.defaultCanvasUnit,defaultOrientation:e.default_orientation||r.defaultOrientation,canvasBackgroundColor:e.canvas_background_color||r.canvasBackgroundColor,canvasShowTransparency:void 0!==e.canvas_show_transparency?e.canvas_show_transparency:r.canvasShowTransparency,containerBackgroundColor:e.container_background_color||r.containerBackgroundColor,containerShowTransparency:void 0!==e.container_show_transparency?e.container_show_transparency:r.containerShowTransparency,marginTop:e.margin_top||r.marginTop,marginRight:e.margin_right||r.marginRight,marginBottom:e.margin_bottom||r.marginBottom,marginLeft:e.margin_left||r.marginLeft,showMargins:void 0!==e.show_margins?e.show_margins:r.showMargins,showGrid:void 0!==e.show_grid?e.show_grid:r.showGrid,gridSize:e.grid_size||r.gridSize,gridColor:e.grid_color||r.gridColor,gridOpacity:e.grid_opacity||r.gridOpacity,snapToGrid:void 0!==e.snap_to_grid?e.snap_to_grid:r.snapToGrid,snapToElements:void 0!==e.snap_to_elements?e.snap_to_elements:r.snapToElements,snapToMargins:void 0!==e.snap_to_margins?e.snap_to_margins:r.snapToMargins,snapTolerance:e.snap_tolerance||r.snapTolerance,showGuides:void 0!==e.show_guides?e.show_guides:r.showGuides,lockGuides:void 0!==e.lock_guides?e.lock_guides:r.lockGuides,defaultZoom:e.default_zoom||r.defaultZoom,minZoom:e.min_zoom||r.minZoom,maxZoom:e.max_zoom||r.maxZoom,zoomStep:e.zoom_step||r.zoomStep,panWithMouse:void 0!==e.pan_with_mouse?e.pan_with_mouse:r.panWithMouse,smoothZoom:void 0!==e.smooth_zoom?e.smooth_zoom:r.smoothZoom,showZoomIndicator:void 0!==e.show_zoom_indicator?e.show_zoom_indicator:r.showZoomIndicator,zoomWithWheel:void 0!==e.zoom_with_wheel?e.zoom_with_wheel:r.zoomWithWheel,zoomToSelection:void 0!==e.zoom_to_selection?e.zoom_to_selection:r.zoomToSelection,showResizeHandles:!0,handleSize:e.handle_size||r.handleSize,handleColor:e.handle_color||r.handleColor,enableRotation:void 0!==e.enable_rotation?e.enable_rotation:r.enableRotation,rotationStep:e.rotation_step||r.rotationStep,rotationSnap:void 0!==e.rotation_snap?e.rotation_snap:r.rotationSnap,multiSelect:void 0!==e.multi_select?e.multi_select:r.multiSelect,selectAllShortcut:void 0!==e.select_all_shortcut?e.select_all_shortcut:r.selectAllShortcut,showSelectionBounds:void 0!==e.show_selection_bounds?e.show_selection_bounds:r.showSelectionBounds,copyPasteEnabled:void 0!==e.copy_paste_enabled?e.copy_paste_enabled:r.copyPasteEnabled,duplicateOnDrag:void 0!==e.duplicate_on_drag?e.duplicate_on_drag:r.duplicateOnDrag,exportQuality:e.export_quality||r.exportQuality,exportFormat:e.export_format||r.exportFormat,compressImages:void 0!==e.compress_images?e.compress_images:r.compressImages,imageQuality:e.image_quality||r.imageQuality,maxImageSize:e.max_image_size||r.maxImageSize,includeMetadata:void 0!==e.include_metadata?e.include_metadata:r.includeMetadata,pdfAuthor:e.pdf_author||r.pdfAuthor,pdfSubject:e.pdf_subject||r.pdfSubject,autoCrop:void 0!==e.auto_crop?e.auto_crop:r.autoCrop,embedFonts:void 0!==e.embed_fonts?e.embed_fonts:r.embedFonts,optimizeForWeb:void 0!==e.optimize_for_web?e.optimize_for_web:r.optimizeForWeb,enableHardwareAcceleration:void 0!==e.enable_hardware_acceleration?e.enable_hardware_acceleration:r.enableHardwareAcceleration,limitFps:void 0!==e.limit_fps?e.limit_fps:r.limitFps,maxFps:e.max_fps||r.maxFps,autoSaveEnabled:void 0!==e.auto_save_enabled?e.auto_save_enabled:r.autoSaveEnabled,autoSaveInterval:e.auto_save_interval||r.autoSaveInterval,autoSaveVersions:e.auto_save_versions||r.autoSaveVersions,undoLevels:e.undo_levels||r.undoLevels,redoLevels:e.redo_levels||r.redoLevels,enableKeyboardShortcuts:void 0!==e.enable_keyboard_shortcuts?e.enable_keyboard_shortcuts:r.enableKeyboardShortcuts,debugMode:void 0!==e.debug_mode?e.debug_mode:r.debugMode,showFps:void 0!==e.show_fps?e.show_fps:r.showFps,resizeHandleSize:e.canvas_handle_size||r.resizeHandleSize,resizeHandleColor:e.canvas_handle_color||r.resizeHandleColor,resizeHandleBorderColor:e.canvas_handle_hover_color||r.resizeHandleBorderColor,selectionBorderWidth:e.canvas_border_width||r.selectionBorderWidth,selectionBorderColor:e.canvas_border_color||r.selectionBorderColor,selectionBorderSpacing:e.canvas_border_spacing||r.selectionBorderSpacing,showResizeHandlesLegacy:void 0!==e.canvas_resize_handles_enabled?e.canvas_resize_handles_enabled:r.showResizeHandlesLegacy,showResizeZones:void 0!==e.canvas_element_borders_enabled?e.canvas_element_borders_enabled:r.showResizeZones,defaultTextColor:e.default_text_color||r.defaultTextColor,defaultBackgroundColor:e.default_background_color||r.defaultBackgroundColor,defaultFontSize:e.default_font_size||r.defaultFontSize})});else{var r=l(),o=localStorage.getItem("pdf-builder-global-settings");if(o)try{var n=JSON.parse(o);n.showResizeHandles=!0,a(function(e){return de(de(de({},e),r),n)})}catch(e){a(function(e){return de(de({},e),r)})}else a(function(e){return de(de({},e),r)})}},[]),(0,o.useEffect)(function(){var e=function(e){s()};return window.addEventListener("pdfBuilderSettingsUpdated",e),function(){window.removeEventListener("pdfBuilderSettingsUpdated",e)}},[]),(0,o.useEffect)(function(){var e=document.documentElement;e.style.setProperty("--resize-handle-size","".concat(n.resizeHandleSize,"px")),e.style.setProperty("--resize-handle-color",n.resizeHandleColor),e.style.setProperty("--resize-handle-border-color",n.resizeHandleBorderColor),e.style.setProperty("--resize-handle-offset","".concat(n.resizeHandleOffset,"px")),e.style.setProperty("--selection-border-width","".concat(n.selectionBorderWidth,"px")),e.style.setProperty("--selection-border-color",n.selectionBorderColor),e.style.setProperty("--selection-border-spacing","".concat(n.selectionBorderSpacing,"px")),e.style.setProperty("--selection-shadow-opacity",n.selectionShadowOpacity),e.style.setProperty("--resize-zone-size","".concat(n.resizeZoneSize,"px")),e.style.setProperty("--resize-zone-opacity",n.resizeZoneOpacity),e.style.setProperty("--show-resize-handles",n.showResizeHandles?"block":"none"),e.style.setProperty("--show-resize-zones",n.showResizeZones?"auto":"none"),e.style.setProperty("--selection-animation",n.selectionAnimation?"all 0.2s ease":"none")},[n]);var c=function(){var e,t=(e=ie().m(function e(t){return ie().w(function(e){for(;;)switch(e.n){case 0:a(function(e){var r=de(de({},e),t);r.showResizeHandles=!0,localStorage.setItem("pdf-builder-global-settings",JSON.stringify(r));var o=l();if(o.ajaxurl&&o.nonce){var n={show_grid:r.showGrid,grid_size:r.gridSize,grid_color:r.gridColor,grid_opacity:r.gridOpacity,snap_to_grid:r.snapToGrid,snap_to_elements:r.snapToElements,snap_to_margins:r.snapToMargins,snap_tolerance:r.snapTolerance,show_guides:r.showGuides,lock_guides:r.lockGuides,default_zoom:r.defaultZoom,min_zoom:r.minZoom,max_zoom:r.maxZoom,zoom_step:r.zoomStep,pan_with_mouse:r.panWithMouse,smooth_zoom:r.smoothZoom,show_zoom_indicator:r.showZoomIndicator,zoom_with_wheel:r.zoomWithWheel,zoom_to_selection:r.zoomToSelection,show_resize_handles:r.showResizeHandles,handle_size:r.handleSize,handle_color:r.handleColor,enable_rotation:r.enableRotation,rotation_step:r.rotationStep,rotation_snap:r.rotationSnap,multi_select:r.multiSelect,select_all_shortcut:r.selectAllShortcut,show_selection_bounds:r.showSelectionBounds,copy_paste_enabled:r.copyPasteEnabled,duplicate_on_drag:r.duplicateOnDrag,export_quality:r.exportQuality,export_format:r.exportFormat,compress_images:r.compressImages,image_quality:r.imageQuality,max_image_size:r.maxImageSize,include_metadata:r.includeMetadata,pdf_author:r.pdfAuthor,pdf_subject:r.pdfSubject,auto_crop:r.autoCrop,embed_fonts:r.embedFonts,optimize_for_web:r.optimizeForWeb,enable_hardware_acceleration:r.enableHardwareAcceleration,limit_fps:r.limitFps,max_fps:r.maxFps,auto_save_enabled:r.autoSaveEnabled,auto_save_interval:r.autoSaveInterval,auto_save_versions:r.autoSaveVersions,undo_levels:r.undoLevels,redo_levels:r.redoLevels,enable_keyboard_shortcuts:r.enableKeyboardShortcuts,debug_mode:r.debugMode,show_fps:r.showFps,default_canvas_width:r.defaultCanvasWidth,default_canvas_height:r.defaultCanvasHeight,default_canvas_unit:r.defaultCanvasUnit,canvas_background_color:r.canvasBackgroundColor,canvas_show_transparency:r.canvasShowTransparency,margin_top:r.marginTop,margin_right:r.marginRight,margin_bottom:r.marginBottom,margin_left:r.marginLeft,show_margins:r.showMargins};fetch(o.ajaxurl+"?action=pdf_builder_save_settings_page",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(de(de({},n),{},{nonce:o.nonce}))}).then(function(e){e.ok}).catch(function(e){})}return r});case 1:return e.a(2)}},e)}),function(){var t=this,r=arguments;return new Promise(function(o,n){var a=e.apply(t,r);function i(e){ce(a,o,n,i,l,"next",e)}function l(e){ce(a,o,n,i,l,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}(),s=function(){var e=i(),t=l();e&&a(function(r){return de(de(de({},r),t),{},{defaultCanvasWidth:e.default_canvas_width||r.defaultCanvasWidth,defaultCanvasHeight:e.default_canvas_height||r.defaultCanvasHeight,defaultCanvasUnit:e.default_canvas_unit||r.defaultCanvasUnit,defaultOrientation:e.default_orientation||r.defaultOrientation,canvasBackgroundColor:e.canvas_background_color||r.canvasBackgroundColor,canvasShowTransparency:void 0!==e.canvas_show_transparency?e.canvas_show_transparency:r.canvasShowTransparency,containerBackgroundColor:e.container_background_color||r.containerBackgroundColor,containerShowTransparency:void 0!==e.container_show_transparency?e.container_show_transparency:r.containerShowTransparency,marginTop:e.margin_top||r.marginTop,marginRight:e.margin_right||r.marginRight,marginBottom:e.margin_bottom||r.marginBottom,marginLeft:e.margin_left||r.marginLeft,showMargins:void 0!==e.show_margins?e.show_margins:r.showMargins,showGrid:void 0!==e.show_grid?e.show_grid:r.showGrid,gridSize:e.grid_size||r.gridSize,gridColor:e.grid_color||r.gridColor,gridOpacity:e.grid_opacity||r.gridOpacity,snapToGrid:void 0!==e.snap_to_grid?e.snap_to_grid:r.snapToGrid,snapToElements:void 0!==e.snap_to_elements?e.snap_to_elements:r.snapToElements,snapToMargins:void 0!==e.snap_to_margins?e.snap_to_margins:r.snapToMargins,snapTolerance:e.snap_tolerance||r.snapTolerance,showGuides:void 0!==e.show_guides?e.show_guides:r.showGuides,lockGuides:void 0!==e.lock_guides?e.lock_guides:r.lockGuides,defaultZoom:e.default_zoom||r.defaultZoom,minZoom:e.min_zoom||r.minZoom,maxZoom:e.max_zoom||r.maxZoom,zoomStep:e.zoom_step||r.zoomStep,panWithMouse:void 0!==e.pan_with_mouse?e.pan_with_mouse:r.panWithMouse,smoothZoom:void 0!==e.smooth_zoom?e.smooth_zoom:r.smoothZoom,showZoomIndicator:void 0!==e.show_zoom_indicator?e.show_zoom_indicator:r.showZoomIndicator,zoomWithWheel:void 0!==e.zoom_with_wheel?e.zoom_with_wheel:r.zoomWithWheel,zoomToSelection:void 0!==e.zoom_to_selection?e.zoom_to_selection:r.zoomToSelection,showResizeHandles:!0,handleSize:e.handle_size||r.handleSize,handleColor:e.handle_color||r.handleColor,enableRotation:void 0!==e.enable_rotation?e.enable_rotation:r.enableRotation,rotationStep:e.rotation_step||r.rotationStep,rotationSnap:void 0!==e.rotation_snap?e.rotation_snap:r.rotationSnap,multiSelect:void 0!==e.multi_select?e.multi_select:r.multiSelect,selectAllShortcut:void 0!==e.select_all_shortcut?e.select_all_shortcut:r.selectAllShortcut,showSelectionBounds:void 0!==e.show_selection_bounds?e.show_selection_bounds:r.showSelectionBounds,copyPasteEnabled:void 0!==e.copy_paste_enabled?e.copy_paste_enabled:r.copyPasteEnabled,duplicateOnDrag:void 0!==e.duplicate_on_drag?e.duplicate_on_drag:r.duplicateOnDrag,exportQuality:e.export_quality||r.exportQuality,exportFormat:e.export_format||r.exportFormat,compressImages:void 0!==e.compress_images?e.compress_images:r.compressImages,imageQuality:e.image_quality||r.imageQuality,maxImageSize:e.max_image_size||r.maxImageSize,includeMetadata:void 0!==e.include_metadata?e.include_metadata:r.includeMetadata,pdfAuthor:e.pdf_author||r.pdfAuthor,pdfSubject:e.pdf_subject||r.pdfSubject,autoCrop:void 0!==e.auto_crop?e.auto_crop:r.autoCrop,embedFonts:void 0!==e.embed_fonts?e.embed_fonts:r.embedFonts,optimizeForWeb:void 0!==e.optimize_for_web?e.optimize_for_web:r.optimizeForWeb,enableHardwareAcceleration:void 0!==e.enable_hardware_acceleration?e.enable_hardware_acceleration:r.enableHardwareAcceleration,limitFps:void 0!==e.limit_fps?e.limit_fps:r.limitFps,maxFps:e.max_fps||r.maxFps,autoSaveEnabled:void 0!==e.auto_save_enabled?e.auto_save_enabled:r.autoSaveEnabled,autoSaveInterval:e.auto_save_interval||r.autoSaveInterval,autoSaveVersions:e.auto_save_versions||r.autoSaveVersions,undoLevels:e.undo_levels||r.undoLevels,redoLevels:e.redo_levels||r.redoLevels,enableKeyboardShortcuts:void 0!==e.enable_keyboard_shortcuts?e.enable_keyboard_shortcuts:r.enableKeyboardShortcuts,debugMode:void 0!==e.debug_mode?e.debug_mode:r.debugMode,showFps:void 0!==e.show_fps?e.show_fps:r.showFps,resizeHandleSize:e.canvas_handle_size||r.resizeHandleSize,resizeHandleColor:e.canvas_handle_color||r.resizeHandleColor,resizeHandleBorderColor:e.canvas_handle_hover_color||r.resizeHandleBorderColor,selectionBorderWidth:e.canvas_border_width||r.selectionBorderWidth,selectionBorderColor:e.canvas_border_color||r.selectionBorderColor,selectionBorderSpacing:e.canvas_border_spacing||r.selectionBorderSpacing,showResizeHandlesLegacy:void 0!==e.canvas_resize_handles_enabled?e.canvas_resize_handles_enabled:r.showResizeHandlesLegacy,showResizeZones:void 0!==e.canvas_element_borders_enabled?e.canvas_element_borders_enabled:r.showResizeZones,defaultTextColor:e.default_text_color||r.defaultTextColor,defaultBackgroundColor:e.default_background_color||r.defaultBackgroundColor,defaultFontSize:e.default_font_size||r.defaultFontSize})})};return{settings:n,updateSettings:c,resetToDefaults:function(){a({resizeHandleSize:12,resizeHandleColor:"#007cba",resizeHandleBorderColor:"#ffffff",selectionBorderWidth:2,selectionBorderColor:"var(--primary-color)",selectionBorderSpacing:2,selectionShadowOpacity:.1,resizeZoneSize:16,resizeZoneOpacity:.1,showResizeHandles:!0,showResizeZones:!0,selectionAnimation:!0})},refreshSettings:s}};function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var he=function(e){var t,r,a=e.showFps,i=(t=(0,o.useState)(0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return me(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?me(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1],s=(0,o.useRef)(0),d=(0,o.useRef)(performance.now()),u=(0,o.useRef)(null);return(0,o.useEffect)(function(){if(a){var e=function(){var t=performance.now();s.current++,t-d.current>=1e3&&(c(Math.round(1e3*s.current/(t-d.current))),s.current=0,d.current=t),u.current=requestAnimationFrame(e)};return u.current=requestAnimationFrame(e),function(){u.current&&cancelAnimationFrame(u.current)}}},[a]),a?n().createElement("div",{style:{position:"fixed",top:"10px",right:"10px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#00ff00",padding:"5px 10px",borderRadius:"4px",fontFamily:"monospace",fontSize:"12px",fontWeight:"bold",zIndex:9999,pointerEvents:"none",userSelect:"none"}},"FPS: ",l):null},be=function(e){return{Copier:"Ctrl+C",Coller:"Ctrl+V",Dupliquer:"Ctrl+D",Supprimer:"Del",Annuler:"Ctrl+Z","RÃ©tablir":"Ctrl+Y","Tout sÃ©lectionner":"Ctrl+A","DÃ©sÃ©lectionner":"Esc"}[e]},ge=function(e){var t=e.menu,r=e.onAction,a=e.isAnimating,i=void 0!==a&&a,l=e.onClose,c=(0,o.useRef)(null);return(0,o.useEffect)(function(){var e=function(e){c.current&&!c.current.contains(e.target)&&l&&l()};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[l]),t?n().createElement("div",{ref:c,className:"context-menu",style:{position:"fixed",left:t.x,top:t.y,backgroundColor:"white",border:"1px solid #ccc",borderRadius:"6px",boxShadow:"0 8px 24px rgba(0,0,0,0.12), 0 2px 8px rgba(0,0,0,0.08)",zIndex:1e3,minWidth:"200px",padding:"4px 0",animation:i?"contextMenuFadeOut 0.15s cubic-bezier(0.4, 0, 1, 1)":"contextMenuFadeIn 0.15s cubic-bezier(0.16, 1, 0.3, 1)",transformOrigin:"top left"}},t.items.map(function(e,t){return n().createElement("div",{key:t},"separator"===e.type?n().createElement("div",{style:{height:"1px",backgroundColor:"#f8f9fa",margin:"4px 0"}}):n().createElement("button",{className:"context-menu-item",onClick:function(){return function(e){e.action&&"function"==typeof e.action?e.action():r&&r(e.action)}(e)},disabled:e.disabled,style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"10px 16px",border:"none",backgroundColor:"transparent",cursor:e.disabled?"not-allowed":"pointer",fontSize:"14px",textAlign:"left",borderRadius:"0",opacity:e.disabled?.5:1,transition:"background-color 0.15s ease, color 0.15s ease"},onMouseEnter:function(t){e.disabled||(t.target.style.backgroundColor="#f8f9fa",t.target.style.color="#1e293b")},onMouseLeave:function(t){e.disabled||(t.target.style.backgroundColor="transparent",t.target.style.color="inherit")}},n().createElement("div",{style:{display:"flex",alignItems:"center"}},n().createElement("span",{style:{marginRight:"8px"}},e.icon||({Dupliquer:"ðŸ“‹",Supprimer:"ðŸ—‘ï¸",Copier:"[C]",Coller:"[V]",Annuler:"â†¶","RÃ©tablir":"â†·","Tout sÃ©lectionner":"â˜‘ï¸","DÃ©sÃ©lectionner":"â˜"}[e.label]||"â€¢")),e.label),be(e.label)&&n().createElement("span",{style:{fontSize:"12px",color:"#666",marginLeft:"16px"}},be(e.label))))})):null},ye=function(e){var t=e.element,r=e.isSelected,a=e.onSelect,i=e.onUpdate,l=e.dragAndDrop,c=e.zoom,s=void 0===c?1:c,d=e.canvasWidth,u=e.canvasHeight,f=e.orderData,m=void 0===f?{}:f,h=e.onContextMenu,b=e.snapToGrid,g=void 0===b||b,y=e.gridSize,v=void 0===y?10:y,x=(0,o.useRef)(null),w=p({onElementResize:function(e){i({x:e.x,y:e.y,width:e.width,height:e.height})},snapToGrid:g,gridSize:v,canvasWidth:d,canvasHeight:u}),S={position:"absolute",left:t.x*s,top:t.y*s,width:t.width*s,height:t.height*s,cursor:r?"move":"pointer",userSelect:"none",border:r?"2px solid #007cba":t.borderWidth>0?"".concat(t.borderWidth||1,"px ").concat(t.borderStyle||"solid"," ").concat(t.borderColor||"transparent"):"none",backgroundColor:t.backgroundColor||"transparent",color:t.color||"#333333",fontSize:(t.fontSize||14)*s,fontFamily:t.fontFamily||"Arial, sans-serif",padding:(t.padding||8)*s,borderRadius:(t.borderRadius||4)*s,boxSizing:"border-box",overflow:"hidden","--element-border-width":r?"2px":t.borderWidth>0?"".concat(t.borderWidth||1,"px"):"0px"};return n().createElement(n().Fragment,null,n().createElement("div",{ref:x,style:S,onClick:function(e){e.stopPropagation(),r||a(t.id)},onMouseDown:function(e){e.stopPropagation();var r=x.current.closest(".canvas-zoom-wrapper");if(r){for(var o=r.getBoundingClientRect(),n=(x.current.getBoundingClientRect(),(e.clientX-o.left)/s),a=(e.clientY-o.top)/s,i=8/s,c=0,d=[{name:"nw",x:t.x,y:t.y},{name:"ne",x:t.x+t.width,y:t.y},{name:"sw",x:t.x,y:t.y+t.height},{name:"se",x:t.x+t.width,y:t.y+t.height},{name:"n",x:t.x+t.width/2,y:t.y},{name:"s",x:t.x+t.width/2,y:t.y+t.height},{name:"w",x:t.x,y:t.y+t.height/2},{name:"e",x:t.x+t.width,y:t.y+t.height/2}];c<d.length;c++){var u=d[c];if(n>=u.x-i/2&&n<=u.x+i/2&&a>=u.y-i/2&&a<=u.y+i/2)return void w.handleResizeStart(e,u.name,{x:t.x,y:t.y,width:t.width,height:t.height},o,s)}if(l&&l.handleMouseDown){var f=x.current.closest(".canvas-zoom-wrapper").getBoundingClientRect();l.handleMouseDown(e,t.id,{left:t.x,top:t.y,width:t.width,height:t.height},f,s)}}},onContextMenu:h},n().createElement("div",{style:{fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.5px"}},{"woocommerce-invoice-number":"NumÃ©ro Facture","woocommerce-invoice-date":"Date Facture","woocommerce-order-number":"NÂ° Commande","woocommerce-order-date":"Date Commande","woocommerce-billing-address":"Adresse Facturation","woocommerce-shipping-address":"Adresse Livraison","woocommerce-customer-name":"Nom Client","woocommerce-customer-email":"Email Client","woocommerce-payment-method":"Paiement","woocommerce-order-status":"Statut","woocommerce-products-table":"Tableau Produits","woocommerce-products-simple":"Liste Produits","woocommerce-subtotal":"Sous-total","woocommerce-discount":"Remise","woocommerce-shipping":"Livraison","woocommerce-taxes":"Taxes","woocommerce-total":"Total","woocommerce-refund":"Remboursement","woocommerce-fees":"Frais","woocommerce-quote-number":"NÂ° Devis","woocommerce-quote-date":"Date Devis","woocommerce-quote-validity":"ValiditÃ©","woocommerce-quote-notes":"Notes Devis"}[t.type]||"Ã‰lÃ©ment WC"),n().createElement("div",{style:{whiteSpace:"pre-line",lineHeight:"1.4",color:"#666"}},function(e){switch(e){case"woocommerce-invoice-number":return m.invoice_number||"INV-001";case"woocommerce-invoice-date":return m.invoice_date||"15/10/2025";case"woocommerce-order-number":return m.order_number||"#12345";case"woocommerce-order-date":return m.order_date||"15/10/2025";case"woocommerce-customer-name":return m.customer_name||"John Doe";case"woocommerce-customer-email":return m.customer_email||"john.doe@example.com";case"woocommerce-billing-address":return m.billing_address||"123 Rue de Test\n75001 Paris\nFrance";case"woocommerce-shipping-address":return m.shipping_address||"456 Rue de Livraison\n75002 Paris\nFrance";case"woocommerce-payment-method":return m.payment_method||"Carte bancaire";case"woocommerce-order-status":return m.order_status||"TraitÃ©e";case"woocommerce-subtotal":return m.subtotal||"45,00 â‚¬";case"woocommerce-discount":return m.discount||"-5,00 â‚¬";case"woocommerce-shipping":return m.shipping||"5,00 â‚¬";case"woocommerce-taxes":return m.tax||"9,00 â‚¬";case"woocommerce-total":return m.total||"54,00 â‚¬";case"woocommerce-refund":return m.refund||"0,00 â‚¬";case"woocommerce-fees":return m.fees||"1,50 â‚¬";case"woocommerce-quote-number":return m.quote_number||"QUO-001";case"woocommerce-quote-date":return m.quote_date||"15/10/2025";case"woocommerce-quote-validity":return m.quote_validity||"30 jours";case"woocommerce-quote-notes":return m.quote_notes||"Conditions spÃ©ciales : paiement Ã  30 jours.";case"woocommerce-products-table":return m.products&&m.products.length>0?m.products.map(function(e){return"".concat(e.name," x").concat(e.quantity," - ").concat(e.total)}).join("\n"):"Produit Test 1 x1 - 25,00 â‚¬\nProduit Test 2 x2 - 20,00 â‚¬";case"woocommerce-products-simple":return m.products&&m.products.length>0?m.products.map(function(e){return"".concat(e.quantity,"x ").concat(e.name)}).join("\n"):"1x Produit Test 1\n2x Produit Test 2";default:return"[Contenu dynamique WooCommerce]"}}(t.type))),r&&n().createElement(n().Fragment,null,n().createElement("div",{className:"resize-handle nw",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return w.handleResizeStart(e,"nw",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle ne",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return w.handleResizeStart(e,"ne",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle sw",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return w.handleResizeStart(e,"sw",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle se",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return w.handleResizeStart(e,"se",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle n",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return w.handleResizeStart(e,"n",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle s",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return w.handleResizeStart(e,"s",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle w",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return w.handleResizeStart(e,"w",{x:t.x,y:t.y,width:t.width,height:t.height})}}),n().createElement("div",{className:"resize-handle e",style:{position:"absolute",width:8,height:8,backgroundColor:"#007cba",border:"1px solid white",pointerEvents:"auto"},onMouseDown:function(e){return w.handleResizeStart(e,"e",{x:t.x,y:t.y,width:t.width,height:t.height})}})))};function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach(function(t){Se(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Se(e,t,r){return(t=function(e){var t=function(e){if("object"!=ve(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ve(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var Ce=function(e){var t,r,a=e.onAddElement,i=(e.selectedTool,e.onToolSelect,t=(0,o.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ee(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1];return n().createElement(n().Fragment,null,l&&n().createElement("div",{className:"modal-overlay",onClick:function(){return c(!1)}},n().createElement("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()}},n().createElement("div",{className:"modal-header"},n().createElement("h3",null,"ðŸŽ¨ Choisir un modÃ¨le d'en-tÃªte"),n().createElement("button",{className:"modal-close",onClick:function(){return c(!1)}},"Ã—")),n().createElement("div",{className:"modal-body"},n().createElement("div",{className:"templates-grid"},[{id:"classic",name:"Classique",sample:"ðŸ¢ ENTREPRISE\n123 Rue de la Paix\n75000 Paris",fontSize:14,fontWeight:"bold"},{id:"modern",name:"Moderne",sample:"âœ¨ ENTREPRISE MODERNE\nInnovation & QualitÃ©\ncontact@entreprise.com",fontSize:16,fontWeight:"bold"},{id:"minimal",name:"Minimal",sample:"ENTREPRISE\nAdresse â€¢ TÃ©lÃ©phone â€¢ Email",fontSize:12,fontWeight:"normal"},{id:"elegant",name:"Ã‰lÃ©gant",sample:"ðŸŽ© Maison Ã‰lÃ©gante\nParis, France\nwww.entreprise.com",fontSize:15,fontWeight:"bold"}].map(function(e){return n().createElement("div",{key:e.id,className:"template-item",onClick:function(){return function(e){c(!1),a("text",{x:50,y:50,width:300,height:60,text:e.sample.replace("\\n","\n"),fontSize:e.fontSize||16,fontWeight:e.fontWeight||"normal"})}(e)}},n().createElement("div",{className:"template-sample"},e.sample.split("\n").map(function(t,r){return n().createElement("div",{key:r,style:{fontSize:e.fontSize,fontWeight:e.fontWeight,marginBottom:"4px",whiteSpace:"pre-wrap"}},t)})),n().createElement("div",{className:"template-name"},e.name))}))))),n().createElement("div",{className:"element-library"},n().createElement("div",{className:"library-header"},n().createElement("h3",null,"ðŸ“š BibliothÃ¨que d'Ã‰lÃ©ments"),n().createElement("p",{className:"library-subtitle"},"Cliquez sur les blocs pour les ajouter au canvas")),n().createElement("div",{className:"library-content"},n().createElement("div",{className:"elements-list"},[{type:"product_table",fieldID:"products_table",label:"Tableau Produits",icon:"ðŸ“‹",description:"Tableau des produits commandÃ©s",defaultProperties:{x:30,y:270,width:530,height:200,tableStyle:"default",columns:"name,price,quantity",showHeaders:!0,showBorders:!0,showSubtotal:!0,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!0,evenRowBg:"#ffffff",evenRowTextColor:"#000000",oddRowBg:"#f8fafc",oddRowTextColor:"#000000",fontSize:12,fontFamily:"Arial",fontWeight:"normal",color:"#333333",backgroundColor:"transparent"}},{type:"customer_info",fieldID:"customer_info",label:"Fiche Client",icon:"ðŸ‘¤",description:"Informations dÃ©taillÃ©es du client",defaultProperties:{showHeaders:!0,showBorders:!1,fields:["name","email","phone","address","company","vat","siret"],layout:"vertical",showLabels:!0,labelStyle:"bold",spacing:8}},{type:"company_logo",fieldID:"company_logo",label:"Logo Entreprise",icon:"ðŸ¢",description:"Logo et identitÃ© visuelle de l'entreprise",defaultProperties:{src:"",imageUrl:"",width:150,height:80,alignment:"left",fit:"contain",autoResize:!0,showBorder:!1,borderRadius:0,borderWidth:0,borderStyle:"solid",borderColor:"transparent"}},{type:"company_info",fieldID:"company_info",label:"Informations Entreprise",icon:"[D]",description:"Nom, adresse, contact et TVA de l'entreprise",defaultProperties:{showHeaders:!1,showBorders:!1,fields:["name","address","phone","email","website","vat","rcs","siret"],layout:"vertical",showLabels:!1,labelStyle:"normal",spacing:4,fontSize:12,fontFamily:"Arial",fontWeight:"normal",textAlign:"left",template:"default",showCompanyName:!0,showAddress:!0,showContact:!0,showLegal:!0,previewCompanyName:"Ma SociÃ©tÃ© SARL",previewAddress:"123 Rue de l'Entreprise\n75001 Paris, France",previewPhone:"+33 1 23 45 67 89",previewEmail:"contact@masociete.com",previewWebsite:"www.masociete.com",previewVat:"FR12345678901",previewSiret:"12345678901234",previewRcs:"RCS Paris 123456789"}},{type:"order_number",fieldID:"order_number",label:"NumÃ©ro de Commande",icon:"ðŸ”¢",description:"RÃ©fÃ©rence de commande avec date et formatage configurable",defaultProperties:{format:"Commande #{order_number} - {order_date}",availableFormats:["Commande #{order_number} - {order_date}","CMD-{order_year}-{order_number}","Facture NÂ°{order_number} du {order_date}","Bon de livraison #{order_number}","{order_number}/{order_year}","NÂ° {order_number} - {order_date}"],fontSize:14,fontFamily:"Arial",fontWeight:"bold",textAlign:"right",color:"#333333",labelColor:"#666666",lineHeight:1.2,showLabel:!0,labelText:"NÂ° de commande:",backgroundColor:"transparent",borderWidth:0,borderStyle:"solid",borderColor:"#e5e7eb",borderRadius:0,previewOrderNumber:"12345",previewOrderDate:"15/10/2025",previewOrderYear:"2025",previewOrderMonth:"10",previewOrderDay:"15"}},{type:"dynamic-text",fieldID:"dynamic_text",label:"Texte Dynamique",icon:"ðŸ“",description:"Texte avec variables dynamiques",defaultProperties:{template:"total_only",customContent:"{{order_total}} â‚¬",fontSize:14,fontFamily:"Arial",fontWeight:"normal",textAlign:"left",color:"#333333"}},{type:"mentions",fieldID:"mentions",label:"Mentions lÃ©gales",icon:"ðŸ“„",description:"Informations lÃ©gales (email, SIRET, tÃ©lÃ©phone, etc.)",defaultProperties:{showEmail:!0,showPhone:!0,showSiret:!0,showVat:!1,showAddress:!1,showWebsite:!1,showCustomText:!1,customText:"",fontSize:8,fontFamily:"Arial",fontWeight:"normal",textAlign:"center",color:"#666666",lineHeight:1.2,separator:" â€¢ ",layout:"horizontal"}}].map(function(e,t){return n().createElement("button",{key:t,className:"element-button",draggable:!0,onDragStart:function(r){return function(e,t,r){e.dataTransfer.setData("application/json",JSON.stringify({type:"element",elementType:t.type,defaultProperties:we({x:50+20*r,y:100+20*r,width:300,height:150},t.defaultProperties)})),e.dataTransfer.effectAllowed="copy"}(r,e,t)},onClick:function(){a(e.type,we({x:50+20*t,y:100+20*t,width:300,height:150},e.defaultProperties))},title:e.description},n().createElement("span",{className:"element-icon"},e.icon),n().createElement("div",{className:"element-info"},n().createElement("div",{className:"element-label"},e.label),n().createElement("div",{className:"element-description"},e.description)))})))))},_e={company_logo:{appearance:{sections:["colors","borders","effects"],properties:{colors:["backgroundColor"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["image"],properties:{image:["imageUrl","alt","objectFit"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},product_table:{appearance:{sections:["table_appearance","colors","typography","font","borders","effects"],properties:{table_appearance:["tableStyle","evenRowBg","oddRowBg","evenRowTextColor","oddRowTextColor"],colors:["backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation","scaleX","scaleY"],layers:["zIndex"]}},content:{sections:["table"],properties:{table:["columns","showHeaders","showBorders","showSubtotal","showShipping","showTaxes","showDiscount","showTotal"]}},effects:{sections:["opacity","shadows","filters"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur"],filters:["brightness","contrast","saturate"]}}},text:{appearance:{sections:["colors","typography","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["text"],properties:{text:["text"]}},effects:{sections:["opacity","shadows","filters"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"],filters:["brightness","contrast","saturate"]}}},customer_info:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["customer_fields"],properties:{customer_fields:["customerName","customerAddress","customerPhone","customerEmail"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},"dynamic-text":{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["dynamic_text","variables"],properties:{dynamic_text:["dynamicText"],variables:["variables"]}},effects:{sections:["opacity","shadows","filters"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"],filters:["brightness","contrast","saturate"]}}},order_number:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["order_number"],properties:{order_number:["format","showLabel","labelText","labelAlign","previewOrderNumber","highlightNumber","numberBackground"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},company_info:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["company_info"],properties:{company_info:["template"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},mentions:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:["mentions"],properties:{mentions:["type"]}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}},default:{appearance:{sections:["colors","typography","font","borders","effects"],properties:{colors:["color","backgroundColor"],typography:["fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","textTransform","lineHeight","letterSpacing"],font:["fontFamily","fontSize","lineHeight","letterSpacing","opacity","textShadowBlur","textShadowColor","textShadowOffsetX","textShadowOffsetY"],borders:["borderWidth","borderColor","borderRadius"],effects:["opacity","shadow"]}},layout:{sections:["position","dimensions","transform","layers"],properties:{position:["x","y"],dimensions:["width","height"],transform:["rotation"],layers:["zIndex"]}},content:{sections:[],properties:{}},effects:{sections:["opacity","shadows"],properties:{opacity:["opacity"],shadows:["shadow","shadowColor","shadowOffsetX","shadowOffsetY"]}}}},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e)return t;var r=parseFloat(e);return isNaN(r)?t:r},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null==e||""===e)return t;var r=parseInt(e,10);return isNaN(r)?t:r},Re=function(e,t){return!({product_table:["typography","colors","borders","font"]}[t]||[]).includes(e)};function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var Ne=(0,o.memo)(function(e){var t=e.title,r=e.icon,n=e.children,a=e.defaultOpen,i=void 0!==a&&a,l=e.className,c=void 0===l?"":l,s=Te((0,o.useState)(i),2),d=s[0],u=s[1],f=Te((0,o.useState)(i?"auto":"0px"),2),p=f[0],m=f[1],h=(0,o.useRef)(null),b=(0,o.useMemo)(function(){return"accordion-content-".concat(Math.random().toString(36).substr(2,9))},[]),g=(0,o.useCallback)(function(){d?(m("".concat(h.current.scrollHeight,"px")),setTimeout(function(){return m("0px")},10),setTimeout(function(){return u(!1)},310)):(u(!0),setTimeout(function(){return m("".concat(h.current.scrollHeight,"px"))},10),setTimeout(function(){return m("auto")},310))},[d]),y=(0,o.useCallback)(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),g())},[g]);return React.createElement("div",{className:"accordion ".concat(c)},React.createElement("button",{className:"accordion-header",onClick:g,onKeyDown:y,type:"button","aria-expanded":d,"aria-controls":b},React.createElement("span",{className:"accordion-title"},r&&React.createElement("span",{className:"accordion-icon"},r),t),React.createElement("span",{className:"accordion-arrow ".concat(d?"open":"")},"â–¶")),React.createElement("div",{ref:h,id:b,className:"accordion-content ".concat(d?"open":""),style:{height:p},role:"region","aria-labelledby":"accordion-header-".concat(b)},n))}),Be=function(e){var t,r=e.label,o=e.value,a=e.onChange,i=e.presets,l=void 0===i?[]:i,c=e.defaultColor,s=void 0===c?"#ffffff":c,d=(t=o)&&"transparent"!==t?!t.startsWith("#")||4!==t.length&&7!==t.length?s:t:s;return n().createElement("div",{className:"property-row"},n().createElement("label",null,r,":"),n().createElement("div",{className:"color-picker-container"},n().createElement("input",{type:"color",value:d,onChange:function(e){var t=e.target.value;a(t)},className:"color-input",title:"Couleur actuelle: ".concat(o||"transparent")}),n().createElement("div",{className:"color-presets"},l.filter(function(e){return e&&"transparent"!==e&&e.startsWith("#")}).map(function(e,t){return n().createElement("button",{key:t,className:"color-preset ".concat(o===e?"active":""),style:{backgroundColor:e,border:o===e?"2px solid #2563eb":"1px solid #e2e8f0"},onClick:function(){return a(e)},title:"".concat(r,": ").concat(e),"aria-label":"SÃ©lectionner la couleur ".concat(e)})}),l.includes("transparent")&&n().createElement("button",{className:"color-preset transparent ".concat("transparent"===o?"active":""),style:{background:"transparent"===o?"repeating-conic-gradient(#f0f0f0 0% 25%, #ffffff 0% 50%) 50% / 10px 10px":"repeating-conic-gradient(#e2e8f0 0% 25%, #ffffff 0% 50%) 50% / 10px 10px",border:"transparent"===o?"2px solid #2563eb":"1px solid #e2e8f0"},onClick:function(){return a("transparent")},title:"".concat(r,": Transparent"),"aria-label":"Rendre transparent"}))))};function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var We=function(e){var t=e.label,r=e.children,a=e.minWidth,i=void 0===a?350:a,l=e.className,c=void 0===l?"":l,s=e.forceVertical,d=void 0!==s&&s,u=e.demoMode,f=void 0!==u&&u,p=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350,n=(e=(0,o.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=n[0],i=n[1],l=(0,o.useRef)(null);return(0,o.useEffect)(function(){var e=function(){if(l.current){var e=l.current.getBoundingClientRect();i(e.width<r)}};e(),window.addEventListener("resize",e);var t=new ResizeObserver(e);return l.current&&t.observe(l.current),function(){window.removeEventListener("resize",e),t.disconnect()}},[r]),{isVertical:a,containerRef:l}}(i),m=p.isVertical,h=p.containerRef,b=d||m;return n().createElement("div",{ref:h,className:"adaptive-control ".concat(b?"adaptive-vertical":"adaptive-horizontal"," ").concat(c),style:f?{border:"2px dashed #3b82f6",padding:"8px",margin:"4px 0",borderRadius:"6px",backgroundColor:b?"#eff6ff":"#f0fdf4"}:{}},n().createElement("label",{className:"adaptive-label",style:f?{color:b?"#1d4ed8":"#166534",fontWeight:"bold"}:{}},t,f&&n().createElement("span",{style:{fontSize:"10px",marginLeft:"8px",padding:"2px 6px",borderRadius:"10px",backgroundColor:b?"#dbeafe":"#dcfce7",color:b?"#1e40af":"#166534"}},b?"VERTICAL":"HORIZONTAL")),n().createElement("div",{className:"adaptive-content"},r))},Fe=function(e){var t=e.selectedStyle,r=e.onStyleSelect,o=[{key:"default",name:"DÃ©faut",description:"Style simple et Ã©purÃ©"},{key:"classic",name:"Classique",description:"Style traditionnel avec bordures"},{key:"striped",name:"RayÃ©",description:"Lignes alternÃ©es pour une meilleure lisibilitÃ©"},{key:"bordered",name:"Avec bordures",description:"Bordures complÃ¨tes autour des cellules"},{key:"minimal",name:"Minimal",description:"Design minimaliste sans bordures"},{key:"modern",name:"Moderne",description:"Style contemporain avec ombres"},{key:"blue_ocean",name:"OcÃ©an bleu",description:"Palette bleue apaisante"},{key:"emerald_forest",name:"ForÃªt d'Ã©meraude",description:"Teintes vertes naturelles"},{key:"sunset_orange",name:"Orange coucher",description:"Couleurs chaudes du coucher de soleil"},{key:"royal_purple",name:"Violet royal",description:"Palette violette Ã©lÃ©gante"},{key:"rose_pink",name:"Rose bonbon",description:"Teintes roses douces"},{key:"teal_aqua",name:"Aigue-marine",description:"Bleu-vert rafraÃ®chissant"}];return n().createElement("div",{className:"property-row"},n().createElement("label",{style:{fontWeight:"600",color:"#374151",marginBottom:"4px",display:"block"}},"ðŸŽ¨ Style tableau:"),n().createElement("div",{className:"table-style-preview-grid"},o.map(function(e){var a,i,l=e.key,c=e.name,s=e.description;return n().createElement("div",{key:l,className:"table-style-preview-item"},n().createElement("div",{className:"table-style-preview-container ".concat(t===l?"selected":""),onClick:function(){return r(l)},title:"".concat(c," - ").concat(s)},(i=function(){var e={default:{headerBg:"#f8fafc",headerBorder:"#e2e8f0",rowBorder:"#f1f5f9",rowBg:"#ffffff",altRowBg:"#fafbfc",borderWidth:1,headerTextColor:"#334155",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(0, 0, 0, 0.08)",shadowBlur:6,borderRadius:6},classic:{headerBg:"#1e293b",headerBorder:"#334155",rowBorder:"#e2e8f0",rowBg:"#ffffff",altRowBg:"#f8fafc",borderWidth:1.5,headerTextColor:"#ffffff",rowTextColor:"#1e293b",headerFontWeight:"700",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(0, 0, 0, 0.15)",shadowBlur:8,borderRadius:0},striped:{headerBg:"#e0f2fe",headerBorder:"#0ea5e9",rowBorder:"#f0f9ff",rowBg:"#ffffff",altRowBg:"#f8fafc",borderWidth:1,headerTextColor:"#0c4a6e",rowTextColor:"#374151",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(59, 130, 246, 0.2)",shadowBlur:8,borderRadius:8},bordered:{headerBg:"#f8fafc",headerBorder:"#94a3b8",rowBorder:"#e2e8f0",rowBg:"#ffffff",altRowBg:"#ffffff",borderWidth:1,headerTextColor:"#475569",rowTextColor:"#111827",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:12,borderRadius:8},minimal:{headerBg:"#ffffff",headerBorder:"#d1d5db",rowBorder:"#f3f4f6",rowBg:"#ffffff",altRowBg:"#ffffff",borderWidth:.5,headerTextColor:"#6b7280",rowTextColor:"#6b7280",headerFontWeight:"500",headerFontSize:10,rowFontSize:9,shadowColor:"transparent",shadowBlur:0,borderRadius:0},modern:{headerBg:"#e9d5ff",headerBorder:"#a855f7",rowBorder:"#f3e8ff",rowBg:"#ffffff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#6b21a8",rowTextColor:"#6b21a8",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(102, 126, 234, 0.25)",shadowBlur:20,borderRadius:8},blue_ocean:{headerBg:"#dbeafe",headerBorder:"#3b82f6",rowBorder:"#eff6ff",rowBg:"#ffffff",altRowBg:"#eff6ff",borderWidth:1,headerTextColor:"#1e40af",rowTextColor:"#1e40af",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(59, 130, 246, 0.25)",shadowBlur:20,borderRadius:8},emerald_forest:{headerBg:"#d1fae5",headerBorder:"#10b981",rowBorder:"#ecfdf5",rowBg:"#ffffff",altRowBg:"#ecfdf5",borderWidth:1,headerTextColor:"#065f46",rowTextColor:"#065f46",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(16, 185, 129, 0.25)",shadowBlur:20,borderRadius:8},sunset_orange:{headerBg:"#fed7aa",headerBorder:"#f97316",rowBorder:"#fff7ed",rowBg:"#ffffff",altRowBg:"#fff7ed",borderWidth:1,headerTextColor:"#c2410c",rowTextColor:"#c2410c",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(249, 115, 22, 0.25)",shadowBlur:20,borderRadius:8},royal_purple:{headerBg:"#e9d5ff",headerBorder:"#a855f7",rowBorder:"#faf5ff",rowBg:"#ffffff",altRowBg:"#faf5ff",borderWidth:1,headerTextColor:"#7c3aed",rowTextColor:"#7c3aed",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(168, 85, 247, 0.25)",shadowBlur:20,borderRadius:8},rose_pink:{headerBg:"#fce7f3",headerBorder:"#f472b6",rowBorder:"#fdf2f8",rowBg:"#ffffff",altRowBg:"#fdf2f8",borderWidth:1,headerTextColor:"#db2777",rowTextColor:"#db2777",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(244, 114, 182, 0.25)",shadowBlur:20,borderRadius:8},teal_aqua:{headerBg:"#ccfbf1",headerBorder:"#14b8a6",rowBorder:"#f0fdfa",rowBg:"#ffffff",altRowBg:"#f0fdfa",borderWidth:1,headerTextColor:"#0d9488",rowTextColor:"#0d9488",headerFontWeight:"600",headerFontSize:12,rowFontSize:11,shadowColor:"rgba(20, 184, 166, 0.25)",shadowBlur:20,borderRadius:8}};return e[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]||e.default}(a=l),n().createElement("div",{className:"table-style-preview-thumbnail",style:{borderRadius:"".concat(.3*i.borderRadius,"px"),backgroundColor:i.rowBg,border:i.borderWidth>0?"".concat(.5*i.borderWidth,"px solid ").concat(i.rowBorder):"1px solid #e2e8f0",boxShadow:i.shadowBlur>0?"0 1px ".concat(.3*i.shadowBlur,"px ").concat(i.shadowColor):"none"},onClick:function(){return r(a)},title:"".concat(o.find(function(e){return e.key===a})&&o.find(function(e){return e.key===a}).name||a," - ").concat(o.find(function(e){return e.key===a})&&o.find(function(e){return e.key===a}).description||"")},n().createElement("div",{style:{height:"24px",background:"linear-gradient(135deg, ".concat(i.headerBg," 0%, ").concat(i.headerBg," 100%)"),borderBottom:i.borderWidth>0?"".concat(.5*i.borderWidth,"px solid ").concat(i.headerBorder):"none",display:"flex",alignItems:"center",justifyContent:"center"}},n().createElement("div",{style:{fontSize:"7px",fontWeight:i.headerFontWeight,color:i.headerTextColor,textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center",lineHeight:"1"}},"Titre")),n().createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},n().createElement("div",{style:{flex:1,backgroundColor:i.rowBg,borderBottom:i.borderWidth>0?"".concat(.3*i.borderWidth,"px solid ").concat(i.rowBorder):"none",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 4px"}},n().createElement("div",{style:{fontSize:"6px",color:i.rowTextColor,opacity:.9,fontWeight:"500"}},"Produit A"),n().createElement("div",{style:{fontSize:"6px",color:i.rowTextColor,opacity:.7}},"25â‚¬")),n().createElement("div",{style:{flex:1,backgroundColor:i.altRowBg,borderBottom:i.borderWidth>0?"".concat(.3*i.borderWidth,"px solid ").concat(i.rowBorder):"none",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 4px"}},n().createElement("div",{style:{fontSize:"6px",color:i.rowTextColor,opacity:.9,fontWeight:"500"}},"Produit B"),n().createElement("div",{style:{fontSize:"6px",color:i.rowTextColor,opacity:.7}},"15â‚¬")),n().createElement("div",{style:{flex:1,backgroundColor:i.rowBg,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}},n().createElement("div",{style:{fontSize:"6px",color:i.rowTextColor,opacity:.8}},"Total: 40â‚¬"))),t===a&&n().createElement("div",{className:"table-style-selection-indicator"})))),n().createElement("div",{className:"table-style-name"},c),("default"===l||"modern"===l||"striped"===l)&&n().createElement("div",{style:{fontSize:"8px",color:"#059669",fontWeight:"600",marginTop:"2px",textTransform:"uppercase",letterSpacing:"0.05em"}},"â˜… Populaire"))})))},je=function(e,t,r,o){var a,i,l,c,s,d,u,f,p,m,h,b,g,y,v=((_e[e.type]||_e.default).effects||{}).properties||{},x=function(e){return Object.values(v).some(function(t){return Array.isArray(t)&&t.includes(e)})};return n().createElement(Ne,{key:"effects",title:"Effets",icon:"âœ¨",defaultOpen:!1,className:"properties-accordion"},x("opacity")&&n().createElement("div",{className:"property-row"},n().createElement("label",null,"OpacitÃ©:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:null!==(a=t.opacity)&&void 0!==a?a:1,onChange:function(t){return r(e.id,"opacity",ze(t.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},Math.round(100*(null!==(i=t.opacity)&&void 0!==i?i:1)),"%"))),x("shadow")&&n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ombre:"),n().createElement("input",{type:"checkbox",checked:t.shadow||!1,onChange:function(t){return r(e.id,"shadow",t.target.checked)}})),t.shadow&&n().createElement(n().Fragment,null,n().createElement(Be,{label:"Couleur ombre",value:t.shadowColor||"#000000",onChange:function(t){return r(e.id,"shadowColor",t)},presets:["#000000","#ffffff","#64748b","#ef4444","#3b82f6"]}),n().createElement("div",{className:"property-row"},n().createElement("label",null,"DÃ©calage X:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"-20",max:"20",step:"1",value:null!==(l=t.shadowOffsetX)&&void 0!==l?l:2,onChange:function(t){return r(e.id,"shadowOffsetX",ke(t.target.value,2))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(c=t.shadowOffsetX)&&void 0!==c?c:2,"px"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"DÃ©calage Y:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"-20",max:"20",step:"1",value:null!==(s=t.shadowOffsetY)&&void 0!==s?s:2,onChange:function(t){return r(e.id,"shadowOffsetY",ke(t.target.value,2))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(d=t.shadowOffsetY)&&void 0!==d?d:2,"px"))),x("shadowBlur")&&n().createElement("div",{className:"property-row"},n().createElement("label",null,"Flou ombre:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"20",step:"1",value:null!==(u=t.shadowBlur)&&void 0!==u?u:0,onChange:function(t){return r(e.id,"shadowBlur",ke(t.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(f=t.shadowBlur)&&void 0!==f?f:0,"px"))))),x("brightness")&&n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"LuminositÃ©:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"2",step:"0.1",value:null!==(p=t.brightness)&&void 0!==p?p:1,onChange:function(t){return r(e.id,"brightness",ze(t.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(m=t.brightness)&&void 0!==m?m:1))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Contraste:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"2",step:"0.1",value:null!==(h=t.contrast)&&void 0!==h?h:1,onChange:function(t){return r(e.id,"contrast",ze(t.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(b=t.contrast)&&void 0!==b?b:1))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Saturation:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"2",step:"0.1",value:null!==(g=t.saturate)&&void 0!==g?g:1,onChange:function(t){return r(e.id,"saturate",ze(t.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(y=t.saturate)&&void 0!==y?y:1)))))};function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach(function(t){Ie(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ie(e,t,r){return(t=Le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function He(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Le(o.key),o)}}function Le(e){var t=function(e){if("object"!=Pe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pe(t)?t:t+""}var Ge=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.propertyValidators=new Map,this.propertyPresets=new Map,this.propertyGroups=new Map,this.initDefaults()},t=[{key:"initDefaults",value:function(){var e=this;this.propertyValidators.set("numeric",function(e){return parseFloat(e)||0}),this.propertyValidators.set("positiveNumeric",function(e){return Math.max(0,parseFloat(e)||0)}),this.propertyValidators.set("percentage",function(e){return Math.max(0,Math.min(100,parseFloat(e)||100))}),this.propertyValidators.set("angle",function(e){return((parseFloat(e)||0)%360+360)%360}),this.propertyValidators.set("color",function(t){return e.validateColor(t)}),this.propertyValidators.set("fontSize",function(e){return Math.max(8,Math.min(72,parseInt(e)||14))}),this.propertyValidators.set("borderWidth",function(e){return Math.max(0,Math.min(20,parseInt(e)||0))}),this.propertyValidators.set("borderStyle",function(e){return["solid","dashed","dotted","double"].includes(e)?e:"solid"}),this.propertyValidators.set("borderRadius",function(e){return Math.max(0,Math.min(100,parseInt(e)||0))}),this.propertyPresets.set("colors",{slate:["#f8fafc","#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#1e293b"],blue:["#eff6ff","#dbeafe","#bfdbfe","#93c5fd","#60a5fa","#3b82f6","#2563eb","#1d4ed8","#1e40af"],green:["#f0fdf4","#dcfce7","#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d","#166534"],red:["#fef2f2","#fee2e2","#fecaca","#fca5a5","#f87171","#ef4444","#dc2626","#b91c1c","#991b1b"]}),this.propertyGroups.set("position",["x","y"]),this.propertyGroups.set("dimensions",["width","height"]),this.propertyGroups.set("typography",["fontFamily","fontSize","fontWeight","fontStyle","color","textAlign"]),this.propertyGroups.set("appearance",["backgroundColor","borderColor","borderWidth","borderRadius"]),this.propertyGroups.set("effects",["opacity","shadow","brightness","contrast","saturate"]),this.propertyGroups.set("transform",["rotation","scale"])}},{key:"validateColor",value:function(e){if(!e)return"#000000";if(/^#[0-9A-Fa-f]{6}$/.test(e)||/^#[0-9A-Fa-f]{3}$/.test(e))return e;var t=document.createElement("div");return t.style.color=e,t.style.color||"#000000"}},{key:"validateProperty",value:function(e,t){if("boolean"==typeof t)return t;if(e.startsWith("columns."))return t;var r=this.propertyValidators.get(e);if(r)try{return r(t)}catch(t){return this.getDefaultValue(e)}return this.isNumericProperty(e)?this.validateNumericProperty(e,t):this.isColorProperty(e)?this.validateColorProperty(t):this.isTextStyleProperty(e)?this.validateTextStyleProperty(e,t):t}},{key:"isNumericProperty",value:function(e){return["x","y","width","height","fontSize","opacity","lineHeight","letterSpacing","zIndex","borderWidth","borderRadius","rotation","padding"].includes(e)}},{key:"isColorProperty",value:function(e){return["color","backgroundColor","borderColor"].includes(e)}},{key:"isTextStyleProperty",value:function(e){return["fontWeight","textAlign","textDecoration","textTransform","borderStyle"].includes(e)}},{key:"validateNumericProperty",value:function(e,t){if(null==t||""===t)return this.getDefaultValue(e);var r;if("string"==typeof t){if(r=parseFloat(t),isNaN(r))return this.getDefaultValue(e)}else{if("number"!=typeof t)return this.getDefaultValue(e);r=t}var o={fontSize:{min:8,max:72},opacity:{min:0,max:1},lineHeight:{min:.5,max:3},letterSpacing:{min:-5,max:10},zIndex:{min:-100,max:1e3},borderWidth:{min:0,max:20},borderRadius:{min:0,max:100},rotation:{min:-180,max:180},padding:{min:0,max:100}};if(o[e]){var n=o[e],a=n.min,i=n.max;r=Math.max(a,Math.min(i,r))}return r}},{key:"validateColorProperty",value:function(e){if(!e)return"#000000";if("transparent"===e)return e;if(/^#[0-9A-Fa-f]{6}$/.test(e)||/^#[0-9A-Fa-f]{3}$/.test(e))return e;var t=document.createElement("div");t.style.color=e;var r=t.style.color;return r&&""!==r?e:"#000000"}},{key:"validateTextStyleProperty",value:function(e,t){var r={fontWeight:["normal","bold","100","200","300","400","500","600","700","800","900"],textAlign:["left","center","right","justify"],textDecoration:["none","underline","overline","line-through"],textTransform:["none","capitalize","uppercase","lowercase"],borderStyle:["solid","dashed","dotted","double","none"]};return r[e]&&r[e].includes(t)?t:{fontWeight:"normal",textAlign:"left",textDecoration:"none",textTransform:"none",borderStyle:"solid"}[e]||t}},{key:"getDefaultValue",value:function(e){return{x:0,y:0,width:100,height:50,fontSize:14,opacity:1,lineHeight:1.2,letterSpacing:0,zIndex:0,borderWidth:0,borderRadius:0,rotation:0,padding:0,color:"#333333",backgroundColor:"transparent",borderColor:"#dddddd",fontWeight:"normal",textAlign:"left",textDecoration:"none",textTransform:"none",borderStyle:"solid"}[e]||null}},{key:"getPresets",value:function(e){return this.propertyPresets.get(e)||{}}},{key:"getPropertiesInGroup",value:function(e){return this.propertyGroups.get(e)||[]}},{key:"applyPreset",value:function(e,t){return{"text-title":{fontSize:24,fontWeight:"bold",textAlign:"center",color:"#1e293b"},"text-subtitle":{fontSize:18,fontWeight:"bold",textAlign:"left",color:"#334155"},"text-body":{fontSize:14,fontWeight:"normal",textAlign:"left",color:"#475569"},"text-caption":{fontSize:12,fontWeight:"normal",textAlign:"left",color:"#64748b"},"shape-rounded":{borderRadius:8,borderWidth:1,borderColor:"transparent"},"shape-circle":{borderRadius:50,borderWidth:1,borderColor:"transparent"},"shape-square":{borderRadius:0,borderWidth:1,borderColor:"transparent"},"effect-shadow-soft":{shadow:!0,shadowColor:"#000000",shadowOffsetX:1,shadowOffsetY:1,opacity:90},"effect-shadow-strong":{shadow:!0,shadowColor:"#000000",shadowOffsetX:3,shadowOffsetY:3,opacity:85},"effect-glow":{shadow:!0,shadowColor:"#2563eb",shadowOffsetX:0,shadowOffsetY:0,opacity:95},"color-primary":{backgroundColor:"#2563eb",color:"#ffffff"},"color-secondary":{backgroundColor:"#64748b",color:"#ffffff"},"color-success":{backgroundColor:"#16a34a",color:"#ffffff"},"color-warning":{backgroundColor:"#ca8a04",color:"#ffffff"},"color-error":{backgroundColor:"#dc2626",color:"#ffffff"}}[e]||{}}},{key:"getDefaultProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text";return De(De({},{x:50,y:50,width:100,height:50,opacity:100,rotation:0,scale:100,visible:!0,backgroundColor:"transparent",borderColor:"transparent",borderWidth:0,borderStyle:"solid",borderRadius:0,color:"#1e293b",fontFamily:"Inter, sans-serif",fontSize:14,fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",text:"Texte",src:"",alt:"",objectFit:"cover",shadow:!1,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2,brightness:100,contrast:100,saturate:100,showHeaders:!0,showBorders:!0,headers:["Produit","QtÃ©","Prix"],dataSource:"order_items",columns:{image:!0,name:!0,sku:!1,quantity:!0,price:!0,total:!0},showSubtotal:!1,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!1,progressColor:"#3b82f6",progressValue:75,lineColor:"#64748b",lineWidth:2,documentType:"invoice",imageUrl:"",spacing:8,layout:"vertical",alignment:"left",fit:"contain"}),{text:{width:150,height:30},image:{width:150,height:100},rectangle:{backgroundColor:"#f1f5f9",borderWidth:1,width:150,height:80},product_table:{width:300,height:150},customer_info:{width:200,height:100},company_logo:{width:100,height:60},order_number:{width:150,height:30},company_info:{width:200,height:80},document_type:{width:120,height:40},watermark:{width:300,height:200,opacity:10,text:"CONFIDENTIEL"},"progress-bar":{width:200,height:20},barcode:{width:150,height:60},qrcode:{width:80,height:80},icon:{width:50,height:50},line:{height:2}}[e]||{})}},{key:"getComputedProperties",value:function(e){return{absoluteX:e.x+e.width/2,absoluteY:e.y+e.height/2,scaledWidth:e.width*(e.scale/100),scaledHeight:e.height*(e.scale/100),cssTransform:"rotate(".concat(e.rotation,"deg) scale(").concat(e.scale/100,")"),cssFilter:"brightness(".concat(e.brightness,"%) contrast(").concat(e.contrast,"%) saturate(").concat(e.saturate,"%)"),cssBoxShadow:e.shadow?"".concat(e.shadowOffsetX||0,"px ").concat(e.shadowOffsetY||0,"px 4px ").concat(e.shadowColor||"#000000"):"none"}}},{key:"isAnimatable",value:function(e){return["x","y","width","height","rotation","scale","opacity","brightness","contrast","saturate"].includes(e)}},{key:"getPropertyConstraints",value:function(e){return{x:{min:-1e3,max:2e3,step:1},y:{min:-1e3,max:2e3,step:1},width:{min:1,max:2e3,step:1},height:{min:1,max:2e3,step:1},fontSize:{min:8,max:72,step:1},borderWidth:{min:0,max:20,step:1},borderRadius:{min:0,max:100,step:1},rotation:{min:-180,max:180,step:1},scale:{min:10,max:200,step:5},opacity:{min:0,max:100,step:1},brightness:{min:0,max:200,step:5},contrast:{min:0,max:200,step:5},saturate:{min:0,max:200,step:5},shadowOffsetX:{min:-50,max:50,step:1},shadowOffsetY:{min:-50,max:50,step:1}}[e]||{}}}],t&&He(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),qe=new Ge,Ue={special:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},layout:{backgroundColor:{disabled:!1,default:"#f8fafc"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},text:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},shape:{backgroundColor:{disabled:!1,default:"#e5e7eb"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},media:{backgroundColor:{disabled:!1,default:"#f3f4f6"},borderColor:{disabled:!1},borderWidth:{disabled:!1}},dynamic:{backgroundColor:{disabled:!1,default:"transparent"},borderColor:{disabled:!1},borderWidth:{disabled:!1}}},Ye={product_table:"special",customer_info:"special",company_logo:"special",company_info:"special",order_number:"special",document_type:"special","progress-bar":"special","layout-header":"layout","layout-footer":"layout","layout-sidebar":"layout","layout-section":"layout","layout-container":"layout","layout-section-divider":"layout","layout-spacer":"layout","layout-two-column":"layout","layout-three-column":"layout",text:"text","dynamic-text":"text","conditional-text":"text",counter:"text","date-dynamic":"text",currency:"text",formula:"text",rectangle:"shape",line:"shape","shape-rectangle":"shape","shape-circle":"shape","shape-line":"shape","shape-arrow":"shape","shape-triangle":"shape","shape-star":"shape",divider:"shape",image:"media","image-upload":"media",logo:"media",barcode:"media",qrcode:"media","qrcode-dynamic":"media",icon:"media","table-dynamic":"dynamic","gradient-box":"dynamic","shadow-box":"dynamic","rounded-box":"dynamic","border-box":"dynamic","background-pattern":"dynamic",watermark:"dynamic","invoice-header":"layout","invoice-address-block":"layout","invoice-info-block":"layout","invoice-products-table":"special","invoice-totals-block":"layout","invoice-payment-terms":"layout","invoice-legal-footer":"layout","invoice-signature-block":"layout"},Xe=function(e,t){var r=Ue[Ye[e]||"text"];return!r||!r[t]||!r[t].disabled},Ze=function(e,t,r){if(!Xe(e,t))return{valid:!1,reason:Ue[Ye[e]||"text"][t]&&Ue[Ye[e]||"text"][t].reason||"PropriÃ©tÃ© non autorisÃ©e"};switch(t){case"backgroundColor":if("string"!=typeof r)return{valid:!1,reason:"La couleur doit Ãªtre une chaÃ®ne"};break;case"borderWidth":if("number"!=typeof r||r<0)return{valid:!1,reason:"La largeur de bordure doit Ãªtre un nombre positif"};break;case"fontSize":if("number"!=typeof r||r<=0)return{valid:!1,reason:"La taille de police doit Ãªtre un nombre positif"};break;case"width":case"height":if("number"!=typeof r||r<=0)return{valid:!1,reason:"Les dimensions doivent Ãªtre positives"}}return{valid:!0}},Ve=function(e,t,r){var o={borderWidth:0,fontSize:14,width:100,height:50,padding:8};return void 0!==o[t]?o[t]:{backgroundColor:"transparent",borderColor:"transparent",color:"#000000",fontFamily:"Arial, sans-serif"}[t]||r};function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach(function(t){Ke(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ke(e,t,r){return(t=function(e){var t=function(e){if("object"!=$e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$e(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ot(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var nt=(0,o.memo)(function(e){var t=e.selectedElements,r=e.elements,a=e.onPropertyChange,i=e.onBatchUpdate,l=rt((0,o.useState)(0),2),c=(l[0],l[1]),s=rt((0,o.useState)("#000000"),2),d=(s[0],s[1]),u=rt((0,o.useState)(!1),2),f=(u[0],u[1]),p=function(e,t,r){var n=et((0,o.useState)({}),2),a=n[0],i=n[1],l=et((0,o.useState)("appearance"),2),c=l[0],s=l[1],d=(0,o.useMemo)(function(){return e.length>0?e[0]:null},[e]);(0,o.useEffect)(function(){if(d){var e={color:"#333333",backgroundColor:"transparent",borderColor:"#dddddd",borderWidth:0,borderStyle:"solid",borderRadius:4,fontSize:14,fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",textDecoration:"none",textAlign:"left",lineHeight:1.2,letterSpacing:0,tableStyle:"default",columns:"name,price,quantity",showHeaders:!0,showBorders:!0,showSubtotal:!0,showShipping:!0,showTaxes:!0,showDiscount:!1,showTotal:!0,evenRowBg:"#ffffff",evenRowTextColor:"#000000",oddRowBg:"#f8fafc",oddRowTextColor:"#000000"},t=d.type,r=Qe({},e);Object.keys(e).forEach(function(e){var o=function(e,t){var r=Ue[Ye[e]||"text"];return r&&r[t]&&void 0!==r[t].default?r[t].default:null}(t,e);null!==o&&(r[e]=o),"special"===Ye[t]&&"backgroundColor"===e&&(r[e]="transparent")});var o=Qe(Qe({},r),d);Object.keys(r).forEach(function(e){if(Xe(t,e))"special"!==Ye[t]||"backgroundColor"!==e||o[e]||(o[e]="transparent");else{var r=Ve(0,e,o[e]);r!==o[e]&&(o[e]=r)}}),Object.keys(o).forEach(function(e){Ze(t,e,o[e]).valid||(o[e]=Ve(0,e,o[e]))}),i(o)}else i({})},[d&&d.id]);var u=(0,o.useCallback)(function(e,o,n){var a=t.find(function(t){return t.id===e});if(a){var l=n;if(Ze(a.type,o,n).valid){if("boolean"!=typeof n&&!o.startsWith("columns."))try{var c=qe.validateProperty(o,n);void 0!==c&&(l=c)}catch(e){}i(function(e){var t;return o.includes(".")?function(e,t,r){var o=t.split("."),n=o.pop();o.reduce(function(e,t){return e[t]&&"object"===$e(e[t])?e[t]=Qe({},e[t]):e[t]={},e[t]},e)[n]=r}(t=Qe({},e),o,l):t=Qe(Qe({},e),{},Ke({},o,l)),t}),r(e,o,l)}}},[r,t]),f=(0,o.useCallback)(function(e,t){var r={"color-dark":{color:"#1e293b"},"color-light":{color:"#f8fafc"},"color-primary":{color:"#2563eb"},"color-success":{color:"#16a34a"},"color-warning":{color:"#ca8a04"},"color-error":{color:"#dc2626"},"text-title":{fontSize:24,fontWeight:"bold",textAlign:"center"},"text-subtitle":{fontSize:18,fontWeight:"bold",textAlign:"left"},"text-body":{fontSize:14,fontWeight:"normal",textAlign:"left"},"text-caption":{fontSize:12,fontWeight:"normal",textAlign:"left"},"shape-rounded":{borderRadius:8},"shape-circle":{borderRadius:50},"shape-square":{borderRadius:0},"effect-shadow":{shadow:!0,shadowColor:"#000000",shadowOffsetX:2,shadowOffsetY:2},"effect-glow":{shadow:!0,shadowColor:"#2563eb",shadowOffsetX:0,shadowOffsetY:0},"effect-none":{shadow:!1,brightness:100,contrast:100,saturate:100}};r[t]&&Object.entries(r[t]).forEach(function(t){var r=et(t,2),o=r[0],n=r[1];u(e,o,n)})},[u]),p=(0,o.useCallback)(function(e){Object.entries({x:50,y:50,width:100,height:50,backgroundColor:"#ffffff",borderColor:"#dddddd",borderWidth:1,borderStyle:"solid",borderRadius:4,color:"#333333",fontSize:14,fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",textAlign:"left",textDecoration:"none",lineHeight:1.2,letterSpacing:0,opacity:100,rotation:0,scale:100,shadow:!1,brightness:100,contrast:100,saturate:100}).forEach(function(t){var r=et(t,2),o=r[0],n=r[1];u(e,o,n)})},[u]);return{localProperties:a,activeTab:c,setActiveTab:s,selectedElement:d,handlePropertyChange:u,applyPropertyPreset:f,resetProperties:p,validatePropertyValue:function(e,t){switch(e){case"x":case"y":case"width":case"height":return Math.max(0,parseInt(t)||0);case"fontSize":return Math.max(8,Math.min(72,parseInt(t)||14));case"lineHeight":return Math.max(.5,Math.min(5,parseFloat(t)||1.2));case"letterSpacing":return Math.max(-5,Math.min(20,parseFloat(t)||0));case"borderWidth":return Math.max(0,Math.min(20,parseInt(t)||0));case"borderStyle":return["solid","dashed","dotted","double"].includes(t)?t:"solid";case"borderRadius":return Math.max(0,Math.min(100,parseInt(t)||0));case"rotation":return((parseInt(t)||0)%360+360)%360;case"scale":return Math.max(10,Math.min(200,parseInt(t)||100));case"opacity":return Math.max(0,Math.min(100,parseInt(t)||100));case"brightness":case"contrast":case"saturate":return Math.max(0,Math.min(200,parseInt(t)||100));case"shadowOffsetX":case"shadowOffsetY":return Math.max(-50,Math.min(50,parseInt(t)||0));default:return t}}}}(t,r,a),m=p.localProperties,h=p.activeTab,b=p.setActiveTab,g=p.handlePropertyChange,y=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3e3,i=(0,o.useRef)(new Map),l=(0,o.useRef)(null),c=(0,o.useRef)(new Map),s=(0,o.useCallback)(function(e,t,r){l.current&&clearTimeout(l.current);var o="".concat(e,".").concat(t);i.current.set(o,{elementId:e,property:t,value:r}),n&&(l.current=setTimeout(function(){u()},a))},[n,a]),d=(0,o.useCallback)(function(e,r,o){l.current&&clearTimeout(l.current),t(e,r,o);var n="".concat(e,".").concat(r);c.current.set(n,o),i.current.delete(n)},[t]),u=(0,o.useCallback)(function(){if(0!==i.current.size){var e=Array.from(i.current.values()),o=e.reduce(function(e,t){return e[t.elementId]||(e[t.elementId]={}),e[t.elementId][t.property]=t.value,e},{});r&&Object.keys(o).length>1?r(o):e.forEach(function(e){var r=e.elementId,o=e.property,n=e.value;t(r,o,n)}),e.forEach(function(e){var t=e.elementId,r=e.property,o=e.value,n="".concat(t,".").concat(r);c.current.set(n,o)}),i.current.clear()}},[t,r]),f=(0,o.useCallback)(function(){u()},[u]),p=(0,o.useCallback)(function(){return i.current.size>0},[]),m=(0,o.useCallback)(function(e){var t=[];return i.current.forEach(function(r,o){r.elementId===e&&t.push(r)}),t},[]),h=(0,o.useCallback)(function(e){var t=[];i.current.forEach(function(r,o){r.elementId===e&&t.push(o)}),t.forEach(function(e){return i.current.delete(e)})},[]),b=(0,o.useCallback)(function(e,t){var r="".concat(e,".").concat(t),o=c.current.get(r);return void 0!==o?(i.current.delete(r),o):null},[]),g=(0,o.useCallback)(function(e,t,r,o){var n=r;return o&&(n=o(r)),n=y(t,n),s(e,t,n),n},[s]),y=function(e,t){switch(e){case"x":case"y":case"width":case"height":return Math.max(0,parseInt(t)||0);case"fontSize":return Math.max(8,Math.min(72,parseInt(t)||14));case"borderWidth":return Math.max(0,Math.min(20,parseInt(t)||0));case"borderRadius":return Math.max(0,Math.min(100,parseInt(t)||0));case"rotation":return((parseInt(t)||0)%360+360)%360;case"scale":return Math.max(10,Math.min(200,parseInt(t)||100));case"opacity":return Math.max(0,Math.min(100,parseInt(t)||100));case"brightness":case"contrast":case"saturate":return Math.max(0,Math.min(200,parseInt(t)||100));case"shadowOffsetX":case"shadowOffsetY":return Math.max(-50,Math.min(50,parseInt(t)||0));default:return t}};return(0,o.useEffect)(function(){return function(){l.current&&clearTimeout(l.current)}},[]),(0,o.useEffect)(function(){n&&i.current.size>0&&u()},[e,n,u]),{sync:s,syncImmediate:d,syncPending:u,forceSync:f,hasPendingChanges:p,getPendingChanges:m,cancelPendingChanges:h,validateAndSync:g,restoreLastSaved:b,pendingChangesCount:i.current.size}}(r,a,i,!0,3e3),v=y.syncImmediate,x=(y.syncBatch,(0,o.useMemo)(function(){return t.length>0?t[0]:null},[t]));(0,o.useEffect)(function(){if(x){var e=x.borderWidth&&x.borderWidth>0?x.borderWidth:1;c(e),d(x.borderColor||"#000000")}},[x]),(0,o.useEffect)(function(){f(!!m.border&&(m.borderWidth||0)>0)},[m.border,m.borderWidth]);var w=(0,o.useCallback)(function(e,t,r){"color"===t&&"transparent"===r&&(r="#333333");var o=r;if("boolean"!=typeof r&&!t.startsWith("columns."))try{if(null==(o=qe.validateProperty(t,r)))return}catch(e){return}g(e,t,o),["x","y","width","height","color","fontSize","fontFamily","fontWeight","fontStyle","textAlign","lineHeight","letterSpacing","textDecoration","backgroundColor","backgroundOpacity","borderColor","borderWidth","borderStyle","borderRadius","boxShadowColor","boxShadowBlur","boxShadowSpread","opacity","textShadowBlur","tablePrimaryColor","tableSecondaryColor","template","customContent"].includes(t)&&v(e,t,o)},[g,v]),S=(0,o.useCallback)(function(e){return e?{text:"Texte",image:"Image",rectangle:"Rectangle","shape-rectangle":"Rectangle","shape-circle":"Cercle","shape-line":"Ligne","shape-arrow":"FlÃ¨che","shape-triangle":"Triangle","shape-star":"Ã‰toile",product_table:"Tableau Produits",customer_info:"Info Client",company_info:"Info SociÃ©tÃ©",company_logo:"Logo SociÃ©tÃ©",order_number:"NumÃ©ro Commande",document_type:"Type Document","progress-bar":"Barre Progression","layout-header":"En-tÃªte","layout-footer":"Pied de Page","layout-sidebar":"Barre LatÃ©rale","layout-section":"Section","layout-container":"Conteneur"}[e.type]||e.type||"Ã‰lÃ©ment":""},[]),E=(0,o.useCallback)(function(){return React.createElement("div",{className:"properties-tabs"},React.createElement("button",{className:"tab-btn ".concat("appearance"===h?"active":""),onClick:function(){return b("appearance")}},"ðŸŽ¨ Apparence"),React.createElement("button",{className:"tab-btn ".concat("layout"===h?"active":""),onClick:function(){return b("layout")}},"ðŸ“ Mise en page"),React.createElement("button",{className:"tab-btn ".concat("content"===h?"active":""),onClick:function(){return b("content")}},"ðŸ“ Contenu"),React.createElement("button",{className:"tab-btn ".concat("effects"===h?"active":""),onClick:function(){return b("effects")}},"âœ¨ Effets"))},[h]),C=(0,o.useCallback)(function(){if(!x)return React.createElement("div",{className:"no-selection"},React.createElement("div",{className:"no-selection-icon"},"ðŸ‘†"),React.createElement("p",null,"SÃ©lectionnez un Ã©lÃ©ment pour modifier ses propriÃ©tÃ©s"),t.length>1&&React.createElement("p",{className:"selection-info"},t.length," Ã©lÃ©ments sÃ©lectionnÃ©s"));var e,r,o,a=(e=x.type,(o={appearance:{text:["colors","typography","borders","effects"],"dynamic-text":["colors","typography","borders","effects"],"layout-header":["colors","typography","borders","effects"],"layout-footer":["colors","typography","borders","effects"],"layout-section":["colors","typography","borders","effects"],logo:["colors","typography","borders","effects"],company_logo:["colors","typography","borders","effects"],product_table:["colors","typography","borders","effects"],default:["colors","typography","borders","effects"]},layout:{text:["position","dimensions","transform","layers"],"dynamic-text":["position","dimensions","transform","layers"],logo:["position","dimensions","transform","layers"],company_logo:["position","dimensions","transform","layers"],product_table:["position","dimensions","transform","layers"],default:["position","dimensions","transform","layers"]},content:{text:["text","variables"],"dynamic-text":["dynamic_text","variables"],logo:["image"],company_logo:["company_fields"],customer_info:["customer_fields"],company_info:["company_fields"],order_number:["order_number"],product_table:["table"],default:[]},effects:{text:["opacity","shadows","filters"],"dynamic-text":["opacity","shadows","filters"],logo:["opacity","shadows"],company_logo:["opacity","shadows"],product_table:["opacity","shadows","filters"],default:["opacity","shadows"]}})[r=h]&&o[r][e]||o[r]&&o[r].default||[]),i=((_e[x.type]||_e.default)[h]||{sections:[],properties:{}}).sections||[];switch(h){case"appearance":return React.createElement("div",{className:"tab-content"},"product_table"===x.type&&function(e,t,r){return n().createElement(Ne,{title:"ðŸŽ¨ Apparence du tableau",defaultExpanded:!0},n().createElement("div",{className:"section-content"},n().createElement(Fe,{selectedStyle:t.tableStyle||"default",onStyleSelect:function(t){return r(e.id,"tableStyle",t)}}),n().createElement(Be,{label:"Fond lignes paires",value:t.evenRowBg||"#ffffff",onChange:function(t){return r(e.id,"evenRowBg",t)},presets:["#ffffff","#f8fafc","#f1f5f9","#e2e8f0"]}),n().createElement(Be,{label:"Texte lignes paires",value:t.evenRowTextColor||"#000000",onChange:function(t){return r(e.id,"evenRowTextColor",t)},presets:["#000000","#1e293b","#334155","#475569"]}),n().createElement(Be,{label:"Fond lignes impaires",value:t.oddRowBg||"#f8fafc",onChange:function(t){return r(e.id,"oddRowBg",t)},presets:["#f8fafc","#f1f5f9","#e2e8f0","#ffffff"]}),n().createElement(Be,{label:"Texte lignes impaires",value:t.oddRowTextColor||"#000000",onChange:function(t){return r(e.id,"oddRowTextColor",t)},presets:["#000000","#1e293b","#334155","#475569"]})))}(x,m,w),a.map(function(e){switch(e){case"colors":return React.createElement("div",{key:"section-".concat(e)},function(e,t,r){var o,a;if(!Re("colors",e.type))return null;var i="transparent"!==t.backgroundColor;return n().createElement(Ne,{key:"colors",title:"Couleurs & Apparence",icon:"ðŸŽ¨",defaultOpen:!1,className:"properties-accordion"},"logo"!==e.type&&"company_logo"!==e.type&&n().createElement(Be,{label:"Texte",value:t.color,onChange:function(t){r(e.id,"color",t)},presets:["#1e293b","#334155","#475569","#64748b","#94a3b8","#cbd5e1","#000000"],defaultColor:"#333333"}),n().createElement("div",{className:"property-row"},n().createElement("span",null,"Fond activÃ©:"),n().createElement("label",{className:"toggle"},n().createElement("input",{type:"checkbox",checked:i,disabled:!1,onChange:function(t){t.target.checked?r(e.id,"backgroundColor","#ffffff"):r(e.id,"backgroundColor","transparent")}}),n().createElement("span",{className:"toggle-slider"}))),n().createElement("div",{style:{display:i?"block":"none",transition:"opacity 0.3s ease"}},n().createElement(Be,{label:"Fond",value:"transparent"===t.backgroundColor?"#ffffff":t.backgroundColor,onChange:function(t){r(e.id,"backgroundColor",t)},presets:["transparent","#ffffff","#f8fafc","#f1f5f9","#e2e8f0","#cbd5e1","#94a3b8"]}),n().createElement("div",{className:"property-row"},n().createElement("label",null,"OpacitÃ© fond:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"1",step:"0.1",value:null!==(o=t.backgroundOpacity)&&void 0!==o?o:1,onChange:function(t){return r(e.id,"backgroundOpacity",ze(t.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},Math.round(100*(null!==(a=t.backgroundOpacity)&&void 0!==a?a:1)),"%")))))}(x,m,w));case"typography":return Re("typography",x.type)?React.createElement("div",{key:"section-".concat(e)},function(e,t,r){return Re("typography",e.type)?n().createElement(Ne,{key:"typography",title:"Typographie",icon:"ðŸ“",defaultOpen:!1,className:"properties-accordion"},n().createElement("div",{className:"property-row"},n().createElement("label",null,"Police:"),n().createElement("select",{value:t.fontFamily||"Arial",onChange:function(t){return r(e.id,"fontFamily",t.target.value)},className:"property-select"},n().createElement("option",{value:"Arial"},"Arial"),n().createElement("option",{value:"Helvetica"},"Helvetica"),n().createElement("option",{value:"Times New Roman"},"Times New Roman"),n().createElement("option",{value:"Courier New"},"Courier New"),n().createElement("option",{value:"Georgia"},"Georgia"),n().createElement("option",{value:"Verdana"},"Verdana"),n().createElement("option",{value:"Trebuchet MS"},"Trebuchet MS"),n().createElement("option",{value:"Comic Sans MS"},"Comic Sans MS"),n().createElement("option",{value:"Impact"},"Impact"),n().createElement("option",{value:"Lucida Console"},"Lucida Console"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Taille:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"8",max:"72",step:"1",value:t.fontSize||12,onChange:function(t){return r(e.id,"fontSize",ke(t.target.value,12))},className:"slider"}),n().createElement("span",{className:"slider-value"},t.fontSize||12,"px"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ã‰paisseur:"),n().createElement("select",{value:t.fontWeight||"normal",onChange:function(t){return r(e.id,"fontWeight",t.target.value)},className:"property-select"},n().createElement("option",{value:"normal"},"Normal"),n().createElement("option",{value:"bold"},"Gras"),n().createElement("option",{value:"lighter"},"Fin"),n().createElement("option",{value:"100"},"100"),n().createElement("option",{value:"200"},"200"),n().createElement("option",{value:"300"},"300"),n().createElement("option",{value:"400"},"400"),n().createElement("option",{value:"500"},"500"),n().createElement("option",{value:"600"},"600"),n().createElement("option",{value:"700"},"700"),n().createElement("option",{value:"800"},"800"),n().createElement("option",{value:"900"},"900"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Style:"),n().createElement("select",{value:t.fontStyle||"normal",onChange:function(t){return r(e.id,"fontStyle",t.target.value)},className:"property-select"},n().createElement("option",{value:"normal"},"Normal"),n().createElement("option",{value:"italic"},"Italique"),n().createElement("option",{value:"oblique"},"Oblique"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Alignement:"),n().createElement("div",{className:"alignment-buttons"},n().createElement("button",{className:"alignment-btn ".concat("left"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","left")},title:"Aligner Ã  gauche"},"â¬…ï¸"),n().createElement("button",{className:"alignment-btn ".concat("center"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","center")},title:"Centrer"},"â¬Œ"),n().createElement("button",{className:"alignment-btn ".concat("right"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","right")},title:"Aligner Ã  droite"},"âž¡ï¸"),n().createElement("button",{className:"alignment-btn ".concat("justify"===t.textAlign?"active":""),onClick:function(){return r(e.id,"textAlign","justify")},title:"Justifier"},"â¬Œâ¬…ï¸"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Casse:"),n().createElement("select",{value:t.textTransform||"none",onChange:function(t){return r(e.id,"textTransform",t.target.value)},className:"property-select"},n().createElement("option",{value:"none"},"Aucune"),n().createElement("option",{value:"uppercase"},"Majuscules"),n().createElement("option",{value:"lowercase"},"Minuscules"),n().createElement("option",{value:"capitalize"},"PremiÃ¨re lettre"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"DÃ©coration:"),n().createElement("select",{value:t.textDecoration||"none",onChange:function(t){return r(e.id,"textDecoration",t.target.value)},className:"property-select"},n().createElement("option",{value:"none"},"Aucune"),n().createElement("option",{value:"underline"},"SoulignÃ©"),n().createElement("option",{value:"overline"},"SurlignÃ©"),n().createElement("option",{value:"line-through"},"BarrÃ©"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Interligne:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0.8",max:"3",step:"0.1",value:t.lineHeight||1.2,onChange:function(t){return r(e.id,"lineHeight",ze(t.target.value,1.2))},className:"slider"}),n().createElement("span",{className:"slider-value"},t.lineHeight||1.2))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Espacement:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"-2",max:"10",step:"0.5",value:t.letterSpacing||0,onChange:function(t){return r(e.id,"letterSpacing",ze(t.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},t.letterSpacing||0,"px")))):null}(x,m,w)):null;case"borders":return i.includes("borders")?React.createElement("div",{key:"section-".concat(e)},function(e,t,r){var o,a,i,l;return n().createElement(Ne,{key:"borders",title:"Bordures & Coins Arrondis",icon:"ðŸ”²",defaultOpen:!1,className:"properties-accordion"},n().createElement(Be,{label:"Couleur bordure",value:t.borderColor||"#000000",onChange:function(t){return r(e.id,"borderColor",t)},presets:["#e2e8f0","#cbd5e1","#94a3b8","#64748b","#475569","#334155","#000000"]}),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ã‰paisseur bordure:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"10",value:null!==(o=t.borderWidth)&&void 0!==o?o:0,onChange:function(t){return r(e.id,"borderWidth",ke(t.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(a=t.borderWidth)&&void 0!==a?a:0,"px"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Coins arrondis:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"50",value:null!==(i=t.borderRadius)&&void 0!==i?i:0,onChange:function(t){return r(e.id,"borderRadius",ke(t.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(l=t.borderRadius)&&void 0!==l?l:0,"px"))))}(x,m,w,0)):null;default:return null}}));case"layout":return React.createElement("div",{className:"tab-content"},function(e,t,r){var o,a,i,l,c,s,d,u,f,p,m,h,b,g,y,v;return n().createElement("div",{className:"layout-sections"},n().createElement(Ne,{key:"position",title:"Position",icon:"ðŸ“",defaultOpen:!0,className:"properties-accordion"},n().createElement(We,{label:"Position X:",minWidth:280,className:"adaptive-compact"},n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"800",value:null!==(o=t.x)&&void 0!==o?o:0,onChange:function(t){return r(e.id,"x",ke(t.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(a=t.x)&&void 0!==a?a:0,"px"))),n().createElement(We,{label:"Position Y:",minWidth:280,className:"adaptive-compact"},n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"1000",value:null!==(i=t.y)&&void 0!==i?i:0,onChange:function(t){return r(e.id,"y",ke(t.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(l=t.y)&&void 0!==l?l:0,"px")))),n().createElement(Ne,{key:"dimensions",title:"Dimensions",icon:"ðŸ“",defaultOpen:!1,className:"properties-accordion"},n().createElement(We,{label:"Largeur:",minWidth:280,className:"adaptive-compact"},n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"10",max:"800",value:null!==(c=t.width)&&void 0!==c?c:200,onChange:function(t){return r(e.id,"width",ke(t.target.value,200))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(s=t.width)&&void 0!==s?s:200,"px"))),n().createElement(We,{label:"Hauteur:",minWidth:280,className:"adaptive-compact"},n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"10",max:"600",value:null!==(d=t.height)&&void 0!==d?d:100,onChange:function(t){return r(e.id,"height",ke(t.target.value,100))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(u=t.height)&&void 0!==u?u:100,"px")))),n().createElement(Ne,{key:"transformations",title:"Transformations",icon:"ðŸ”„",defaultOpen:!1,className:"properties-accordion"},n().createElement("div",{className:"property-row"},n().createElement("label",null,"Rotation:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"-180",max:"180",value:null!==(f=t.rotation)&&void 0!==f?f:0,onChange:function(t){return r(e.id,"rotation",ke(t.target.value,0))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(p=t.rotation)&&void 0!==p?p:0,"Â°"))),"PRODUCT_TABLE"===e.type&&n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ã‰chelle X:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:null!==(m=t.scaleX)&&void 0!==m?m:1,onChange:function(t){return r(e.id,"scaleX",ze(t.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(h=t.scaleX)&&void 0!==h?h:1))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ã‰chelle Y:"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0.1",max:"2",step:"0.1",value:null!==(b=t.scaleY)&&void 0!==b?b:1,onChange:function(t){return r(e.id,"scaleY",ze(t.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(g=t.scaleY)&&void 0!==g?g:1))))),n().createElement(Ne,{key:"layers",title:"Calques",icon:"ðŸ“š",defaultOpen:!1,className:"properties-accordion"},n().createElement("div",{className:"property-row"},n().createElement("label",null,"Calque (Z-Index):"),n().createElement("div",{className:"slider-container"},n().createElement("input",{type:"range",min:"0",max:"100",value:null!==(y=t.zIndex)&&void 0!==y?y:1,onChange:function(t){return r(e.id,"zIndex",ke(t.target.value,1))},className:"slider"}),n().createElement("span",{className:"slider-value"},null!==(v=t.zIndex)&&void 0!==v?v:1)))))}(x,m,w));case"content":return React.createElement("div",{className:"tab-content"},function(e,t,r){var o=function(){var o,a,i,l,c,s,d,u,f,p;switch(e.type){case"text":return n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"Texte:"),n().createElement("textarea",{value:t.text||"",onChange:function(t){return r(e.id,"text",t.target.value)},rows:"3",placeholder:"Entrez votre texte ici...",className:"text-input"})));case"dynamic-text":return n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"Texte dynamique:"),n().createElement("input",{type:"text",value:t.dynamicText||"",onChange:function(t){return r(e.id,"dynamicText",t.target.value)},placeholder:"Variable ou expression...",className:"text-input"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Variables:"),n().createElement("textarea",{value:t.variables||"",onChange:function(t){return r(e.id,"variables",t.target.value)},rows:"2",placeholder:"Variables disponibles...",className:"text-input",readOnly:!0})));case"company_logo":return n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"URL Image:"),n().createElement("input",{type:"text",value:t.imageUrl||"",onChange:function(t){return r(e.id,"imageUrl",t.target.value)},placeholder:"https://...",className:"text-input"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Texte alternatif:"),n().createElement("input",{type:"text",value:t.alt||"",onChange:function(t){return r(e.id,"alt",t.target.value)},placeholder:"Description de l'image...",className:"text-input"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Ajustement:"),n().createElement("select",{value:t.objectFit||"contain",onChange:function(t){return r(e.id,"objectFit",t.target.value)},className:"styled-select"},n().createElement("option",{value:"contain"},"Contenir"),n().createElement("option",{value:"cover"},"Couvrir"),n().createElement("option",{value:"fill"},"Remplir"),n().createElement("option",{value:"none"},"Aucun"),n().createElement("option",{value:"scale-down"},"RÃ©duire"))));case"product_table":return n().createElement(n().Fragment,null,n().createElement(We,{label:"Configuration des colonnes:",minWidth:400,className:"adaptive-compact",demoMode:!0},n().createElement("input",{type:"text",value:t.columns||"name,price,quantity",onChange:function(t){return r(e.id,"columns",t.target.value)},placeholder:"name,price,quantity...",className:"text-input"})),n().createElement(We,{label:"Options d'affichage:",minWidth:350,forceVertical:!0,className:"adaptive-spacious"},n().createElement("div",{className:"checkbox-group"},n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher en-tÃªtes:"),n().createElement("input",{type:"checkbox",checked:null===(o=t.showHeaders)||void 0===o||o,onChange:function(t){return r(e.id,"showHeaders",t.target.checked)}})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher bordures:"),n().createElement("input",{type:"checkbox",checked:null===(a=t.showBorders)||void 0===a||a,onChange:function(t){return r(e.id,"showBorders",t.target.checked)}})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher sous-total:"),n().createElement("input",{type:"checkbox",checked:null===(i=t.showSubtotal)||void 0===i||i,onChange:function(t){return r(e.id,"showSubtotal",t.target.checked)}})))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher frais de port:"),n().createElement("input",{type:"checkbox",checked:null===(l=t.showShipping)||void 0===l||l,onChange:function(t){return r(e.id,"showShipping",t.target.checked)}})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher taxes:"),n().createElement("input",{type:"checkbox",checked:null===(c=t.showTaxes)||void 0===c||c,onChange:function(t){return r(e.id,"showTaxes",t.target.checked)}})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher remise:"),n().createElement("input",{type:"checkbox",checked:null!==(s=t.showDiscount)&&void 0!==s&&s,onChange:function(t){return r(e.id,"showDiscount",t.target.checked)}})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher total:"),n().createElement("input",{type:"checkbox",checked:null===(d=t.showTotal)||void 0===d||d,onChange:function(t){return r(e.id,"showTotal",t.target.checked)}})));case"order_number":return n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"Format:"),n().createElement("select",{value:t.format||"#0001",onChange:function(t){return r(e.id,"format",t.target.value)},className:"styled-select"},n().createElement("option",{value:"#0001"},"#0001"),n().createElement("option",{value:"CMD-0001"},"CMD-0001"),n().createElement("option",{value:"ORDER-0001"},"ORDER-0001"),n().createElement("option",{value:"NÂ°0001"},"NÂ°0001"))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Afficher Ã©tiquette:"),n().createElement("input",{type:"checkbox",checked:null===(u=t.showLabel)||void 0===u||u,onChange:function(t){return r(e.id,"showLabel",t.target.checked)}})),t.showLabel&&n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"Texte Ã©tiquette:"),n().createElement("input",{type:"text",value:t.labelText||"NÂ° Commande",onChange:function(t){return r(e.id,"labelText",t.target.value)},className:"text-input"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Alignement Ã©tiquette:"),n().createElement("select",{value:t.labelAlign||"left",onChange:function(t){return r(e.id,"labelAlign",t.target.value)},className:"styled-select"},n().createElement("option",{value:"left"},"Gauche"),n().createElement("option",{value:"center"},"Centre"),n().createElement("option",{value:"right"},"Droite")))),n().createElement("div",{className:"property-row"},n().createElement("label",null,"NÂ° commande aperÃ§u:"),n().createElement("input",{type:"number",min:"1",value:null!==(f=t.previewOrderNumber)&&void 0!==f?f:1,onChange:function(t){return r(e.id,"previewOrderNumber",ke(t.target.value,1))},className:"number-input"})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Mettre en Ã©vidence:"),n().createElement("input",{type:"checkbox",checked:null!==(p=t.highlightNumber)&&void 0!==p&&p,onChange:function(t){return r(e.id,"highlightNumber",t.target.checked)}})),t.highlightNumber&&n().createElement(Be,{label:"Fond numÃ©ro",value:t.numberBackground||"#f0f0f0",onChange:function(t){return r(e.id,"numberBackground",t)},presets:["#f0f0f0","#ffeaa7","#fdcb6e","#e17055","#fd79a8"]}));case"customer_info":return n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"Nom client:"),n().createElement("input",{type:"text",value:t.customerName||"[Nom du client]",onChange:function(t){return r(e.id,"customerName",t.target.value)},className:"text-input",readOnly:!0})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Adresse client:"),n().createElement("textarea",{value:t.customerAddress||"[Adresse du client]",onChange:function(t){return r(e.id,"customerAddress",t.target.value)},rows:"2",className:"text-input",readOnly:!0})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"TÃ©lÃ©phone client:"),n().createElement("input",{type:"text",value:t.customerPhone||"[TÃ©lÃ©phone]",onChange:function(t){return r(e.id,"customerPhone",t.target.value)},className:"text-input",readOnly:!0})),n().createElement("div",{className:"property-row"},n().createElement("label",null,"Email client:"),n().createElement("input",{type:"text",value:t.customerEmail||"[Email]",onChange:function(t){return r(e.id,"customerEmail",t.target.value)},className:"text-input",readOnly:!0})));case"company_info":return n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"Template:"),n().createElement("select",{value:t.template||"default",onChange:function(t){return r(e.id,"template",t.target.value)},className:"select-input"},n().createElement("option",{value:"default"},"Par dÃ©faut"),n().createElement("option",{value:"commercial"},"Commercial"))));case"mentions":return n().createElement(n().Fragment,null,n().createElement("div",{className:"property-row"},n().createElement("label",null,"Type de mentions:"),n().createElement("select",{value:t.type||"legal",onChange:function(t){return r(e.id,"type",t.target.value)},className:"select-input"},n().createElement("option",{value:"legal"},"Mentions lÃ©gales"),n().createElement("option",{value:"warranty"},"Garantie"),n().createElement("option",{value:"custom"},"PersonnalisÃ©"))));case"rectangle":case"circle":case"line":case"arrow":return n().createElement("div",{className:"property-row"},n().createElement("span",{className:"info-text"},"Cet Ã©lÃ©ment n'a pas de propriÃ©tÃ©s de contenu spÃ©cifiques."));default:return null}}();return o?n().createElement(Ne,{key:"content",title:"Contenu",icon:"ðŸ“",defaultOpen:!1,className:"properties-accordion"},o):null}(x,m,w));case"effects":return React.createElement("div",{className:"tab-content"},je&&Re("effects",x.type)?je(x,m,w):React.createElement("div",{className:"no-effects"},React.createElement("p",null,"Aucun effet disponible pour cet Ã©lÃ©ment")));default:return null}},[h,x,m,w,t.length]);return React.createElement("div",{className:"properties-panel"},React.createElement("div",{className:"properties-header"},React.createElement("h3",null,"PropriÃ©tÃ©s"),x&&React.createElement("div",{className:"element-info"},React.createElement("div",{className:"element-name"},S(x)),React.createElement("div",{className:"element-details"},React.createElement("span",{className:"element-type"},x.type),React.createElement("span",{className:"element-id"},"#",x.id)))),E(),React.createElement("div",{className:"properties-content"},C()))}),at=nt;function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach(function(t){st(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function st(e,t,r){return(t=function(e){var t=function(e){if("object"!=it(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=it(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==it(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ut(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var ft=function(e){var t=e.isOpen,r=e.onClose,a=e.onCreateTemplate,i=dt((0,o.useState)({name:"",defaultModel:"Facture",description:"",isPublic:!1,paperFormat:"A4 (210 Ã— 297 mm)",orientation:"Portrait",category:"Facture"}),2),l=i[0],c=i[1],s=dt((0,o.useState)(!1),2),d=s[0],u=s[1],f=dt((0,o.useState)({}),2),p=f[0],m=f[1],h=function(e,t){c(function(r){return ct(ct({},r),{},st({},e,t))}),p[e]&&m(function(t){return ct(ct({},t),{},st({},e,""))})};return t?n().createElement("div",{className:"modal-overlay",onClick:r},n().createElement("div",{className:"modal-content new-template-modal",onClick:function(e){return e.stopPropagation()}},n().createElement("div",{className:"modal-header"},n().createElement("h3",null,"Nouveau template"),n().createElement("button",{className:"modal-close",onClick:r},"Ã—")),n().createElement("form",{onSubmit:function(e){var t;e.preventDefault(),t={},l.name.trim()||(t.name="Le nom du template est obligatoire"),m(t),0===Object.keys(t).length&&(a(l),r(),c({name:"",defaultModel:"Facture",description:"",isPublic:!1,paperFormat:"A4 (210 Ã— 297 mm)",orientation:"Portrait",category:"Facture"}),u(!1))},className:"modal-body"},n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"template-name"},"Nom du template *"),n().createElement("input",{id:"template-name",type:"text",value:l.name,onChange:function(e){return h("name",e.target.value)},className:p.name?"error":"",placeholder:"Ex: Facture Standard"}),p.name&&n().createElement("span",{className:"error-message"},p.name)),n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"default-model"},"ModÃ¨le par dÃ©faut"),n().createElement("select",{id:"default-model",value:l.defaultModel,onChange:function(e){return h("defaultModel",e.target.value)}},n().createElement("option",{value:"Facture"},"Facture"),n().createElement("option",{value:"Devis"},"Devis"),n().createElement("option",{value:"Bon de commande"},"Bon de commande"),n().createElement("option",{value:"Bon de livraison"},"Bon de livraison"))),n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"description"},"Description"),n().createElement("textarea",{id:"description",value:l.description,onChange:function(e){return h("description",e.target.value)},placeholder:"Description du template...",rows:3})),n().createElement("div",{className:"form-group"},n().createElement("button",{type:"button",className:"advanced-toggle",onClick:function(){return u(!d)}},"ParamÃ¨tres avancÃ©s ",d?"â–¼":"â–¶")),d&&n().createElement("div",{className:"advanced-settings"},n().createElement("div",{className:"form-group checkbox-group"},n().createElement("label",{className:"checkbox-label"},n().createElement("input",{type:"checkbox",checked:l.isPublic,onChange:function(e){return h("isPublic",e.target.checked)}}),n().createElement("span",null,"Template public (visible par tous les utilisateurs)"))),n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"paper-format"},"Format de papier"),n().createElement("select",{id:"paper-format",value:l.paperFormat,onChange:function(e){return h("paperFormat",e.target.value)}},n().createElement("option",{value:"A4 (210 Ã— 297 mm)"},"A4 (210 Ã— 297 mm)"),n().createElement("option",{value:"A5 (148 Ã— 210 mm)"},"A5 (148 Ã— 210 mm)"),n().createElement("option",{value:"Lettre (8.5 Ã— 11 pouces)"},"Lettre (8.5 Ã— 11 pouces)"),n().createElement("option",{value:"Legal (8.5 Ã— 14 pouces)"},"Legal (8.5 Ã— 14 pouces)"))),n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"orientation"},"Orientation"),n().createElement("select",{id:"orientation",value:l.orientation,onChange:function(e){return h("orientation",e.target.value)}},n().createElement("option",{value:"Portrait"},"Portrait"),n().createElement("option",{value:"Paysage"},"Paysage"))),n().createElement("div",{className:"form-group"},n().createElement("label",{htmlFor:"category"},"CatÃ©gorie"),n().createElement("select",{id:"category",value:l.category,onChange:function(e){return h("category",e.target.value)}},n().createElement("option",{value:"Facture"},"Facture"),n().createElement("option",{value:"Devis"},"Devis"),n().createElement("option",{value:"Bon de commande"},"Bon de commande"),n().createElement("option",{value:"Bon de livraison"},"Bon de livraison"),n().createElement("option",{value:"ReÃ§u"},"ReÃ§u"),n().createElement("option",{value:"Autre"},"Autre")))),n().createElement("div",{className:"modal-footer"},n().createElement("button",{type:"button",className:"btn-secondary",onClick:r},"Annuler"),n().createElement("button",{type:"submit",className:"btn-primary"},"Ouvrir le template"))))):null};function pt(){var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function a(r,o,n,a){var c=o&&o.prototype instanceof l?o:l,s=Object.create(c.prototype);return mt(s,"_invoke",function(r,o,n){var a,l,c,s=0,d=n||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,l=0,c=e,f.n=r,i}};function p(r,o){for(l=r,c=o,t=0;!u&&s&&!n&&t<d.length;t++){var n,a=d[t],p=f.p,m=a[2];r>3?(n=m===o)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=p&&((n=r<2&&p<a[1])?(l=0,f.v=o,f.n=a[1]):p<m&&(n=r<3||a[0]>o||o>m)&&(a[4]=r,a[5]=o,f.n=m,l=0))}if(n||r>1)return i;throw u=!0,o}return function(n,d,m){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,m),l=d,c=m;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(f.n=-1),p(l,c)):f.n=c:f.v=c);try{if(s=2,a){if(l||(n="next"),t=a[n]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),l=1);a=e}else if((t=(u=f.n<0)?c:r.call(o,f))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:u}}}(r,n,a),!0),s}var i={};function l(){}function c(){}function s(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(mt(t={},o,function(){return this}),t),u=s.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,mt(e,n,"GeneratorFunction")),e.prototype=Object.create(u),e}return c.prototype=s,mt(u,"constructor",s),mt(s,"constructor",c),c.displayName="GeneratorFunction",mt(s,n,"GeneratorFunction"),mt(u),mt(u,n,"Generator"),mt(u,o,function(){return this}),mt(u,"toString",function(){return"[object Generator]"}),(pt=function(){return{w:a,m:f}})()}function mt(e,t,r,o){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}mt=function(e,t,r,o){function a(t,r){mt(e,t,function(e){return this._invoke(t,r,e)})}t?n?n(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},mt(e,t,r,o)}function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function bt(e,t,r,o,n,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(o,n)}function gt(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var a=e.apply(t,r);function i(e){bt(a,o,n,i,l,"next",e)}function l(e){bt(a,o,n,i,l,"throw",e)}i(void 0)})}}function yt(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Et(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach(function(t){wt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wt(e,t,r){return(t=function(e){var t=function(e){if("object"!=ht(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ht(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(o=a.call(r)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw n}}return l}}(e,t)||Et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){if(e){if("string"==typeof e)return Ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(e,t):void 0}}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}var _t=(0,o.forwardRef)(function(e,t){var r=e.options,a=St((0,o.useState)("select"),2),i=a[0],l=a[1],c=St((0,o.useState)(!1),2),s=c[0],d=c[1],u=St((0,o.useState)(!1),2),f=u[0],p=u[1],m=St((0,o.useState)({x:0,y:0}),2),h=m[0],b=m[1],g=St((0,o.useState)(!1),2),y=g[0],v=g[1],x=St((0,o.useState)({x:0,y:0}),2),S=x[0],E=x[1],C=St((0,o.useState)({horizontal:[],vertical:[]}),2),z=C[0],R=C[1],T=St((0,o.useState)(!1),2),O=(T[0],T[1],St((0,o.useState)(null),2)),N=(O[0],O[1],pe()),B=(0,o.useCallback)(function(e){N.settings.lockGuides||R(function(t){return xt(xt({},t),{},{horizontal:[].concat(yt(t.horizontal),[e]).sort(function(e,t){return e-t})})})},[N.settings.lockGuides]),A=(0,o.useCallback)(function(e){N.settings.lockGuides||R(function(t){return xt(xt({},t),{},{vertical:[].concat(yt(t.vertical),[e]).sort(function(e,t){return e-t})})})},[N.settings.lockGuides]),W=(0,o.useCallback)(function(e,t){N.settings.lockGuides||R(function(r){return xt(xt({},r),{},wt({},e,r[e].filter(function(e){return e!==t})))})},[N.settings.lockGuides]),F=r.orderData||{invoice_number:"INV-001",invoice_date:"15/10/2025",order_number:"#12345",order_date:"15/10/2025",customer_name:"John Doe",customer_email:"john.doe@example.com",billing_address:"123 Rue de Test\n75001 Paris\nFrance",shipping_address:"456 Rue de Livraison\n75002 Paris\nFrance",payment_method:"Carte bancaire",order_status:"TraitÃ©e",subtotal:"45,00 â‚¬",discount:"-5,00 â‚¬",shipping:"5,00 â‚¬",tax:"9,00 â‚¬",total:"54,00 â‚¬",refund:"0,00 â‚¬",fees:"1,50 â‚¬",quote_number:"QUO-001",quote_date:"15/10/2025",quote_validity:"30 jours",quote_notes:"Conditions spÃ©ciales : paiement Ã  30 jours.",products:[{name:"Produit Test 1",quantity:1,price:"25,00 â‚¬",total:"25,00 â‚¬"},{name:"Produit Test 2",quantity:2,price:"10,00 â‚¬",total:"20,00 â‚¬"}]},j=ne({initialElements:r.initialElements||[],templateId:r.templateId||null,canvasWidth:r.width||595,canvasHeight:r.height||842,globalSettings:N.settings}),P=(0,o.useCallback)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Modifier Ã©lÃ©ment",o=j.getAllElements();j.history.addToHistory(o,r),j.updateElement(e,t)},[j]),M=(0,o.useCallback)(function(){j.undo()},[j]),D=(0,o.useCallback)(function(){j.redo()},[j]),I=(0,o.useCallback)(function(e){alert('Template "'.concat(e.name,'" crÃ©Ã© avec succÃ¨s!\n\nModÃ¨le: ').concat(e.defaultModel,"\nFormat: ").concat(e.paperFormat,"\nOrientation: ").concat(e.orientation,"\nCatÃ©gorie: ").concat(e.category))},[]),H=(0,o.useCallback)(function(e){N.updateSettings({showGrid:e})},[N]),L=(0,o.useCallback)(function(e){N.updateSettings({snapToGrid:e})},[N]),G=(0,o.useRef)(null),q=(0,o.useRef)(null),U=(0,o.useRef)(null);(0,o.useImperativeHandle)(t,function(){return{getElements:function(){return j.getAllElements()},getRenderedHtml:function(){return"<div>HTML rendering not yet implemented</div>"}}},[j]);var Y=_({onElementMove:function(e,t){P(e,t,"DÃ©placer Ã©lÃ©ment")},onElementDrop:function(e,t){P(e,t,"DÃ©poser Ã©lÃ©ment")},snapToGrid:N.settings.snapToGrid,gridSize:N.settings.gridSize,zoom:j.zoom.zoom,canvasWidth:j.canvasWidth,canvasHeight:j.canvasHeight,guides:z,snapToGuides:N.settings.snapToElements});!function(e){var t=e.onDelete,r=e.onCopy,n=e.onPaste,a=e.onUndo,i=e.onRedo,l=e.onSave,c=e.onZoomIn,s=e.onZoomOut,d=e.onSelectAll,u=e.onDeselectAll,f=e.onToolSelect,p=e.onToggleGrid;(0,o.useEffect)(function(){var e=function(e){if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"true"!==e.target.contentEditable){var o=e.ctrlKey||e.metaKey;switch(e.key.toLowerCase()){case"delete":case"backspace":t&&(e.preventDefault(),t());break;case"c":o&&r&&(e.preventDefault(),r());break;case"v":o&&n&&(e.preventDefault(),n());break;case"z":o&&(e.preventDefault(),e.shiftKey&&i?i():a&&a());break;case"y":o&&i&&(e.preventDefault(),i());break;case"s":o&&l&&(e.preventDefault(),l());break;case"+":case"=":o&&c&&(e.preventDefault(),c());break;case"-":o&&s&&(e.preventDefault(),s());break;case"a":o&&d&&(e.preventDefault(),d());break;case"d":o&&u&&(e.preventDefault(),u());break;case"g":o&&p&&(e.preventDefault(),p());break;case"v":!o&&f&&(e.preventDefault(),f("select"));break;case"r":!o&&f&&(e.preventDefault(),f("rectangle"));break;case"t":!o&&f&&(e.preventDefault(),f("text"));break;case"i":!o&&f&&(e.preventDefault(),f("image"));break;case"l":!o&&f&&(e.preventDefault(),f("line"))}}};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[t,r,n,a,i,l,c,s,d,u,f,p])}({onDelete:j.deleteSelectedElements,onCopy:j.copySelectedElements,onPaste:j.pasteElements,onUndo:M,onRedo:D,onSave:j.saveTemplate,onZoomIn:j.zoom.zoomIn,onZoomOut:j.zoom.zoomOut});var X=(0,o.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j.addElement(e,t),l("select")},[j]),Z=(0,o.useCallback)(function(e,t){var r=(null==t?void 0:t.ctrlKey)||(null==t?void 0:t.metaKey);j.selection.selectElement(e,r)},[j.selection]),V=((0,o.useCallback)(gt(pt().m(function e(){var t,r,o,n,a,i,l,c,s,d,u,f;return pt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,0!==(o=j.getAllElements()).length){e.n=1;break}return alert("Aucun Ã©lÃ©ment Ã  imprimer. Ajoutez des Ã©lÃ©ments au canvas d'abord."),e.a(2);case 1:e.p=1,n=JSON.stringify(o),e.n=5;break;case 2:e.p=2,d=e.v,console.error("âŒ Erreur lors de JSON.stringify:",d),console.error("Ã‰lÃ©ments problÃ©matiques:",o),e.p=3,a=o.map(function(e){var t=xt({},e);return Object.keys(t).forEach(function(e){("function"==typeof t[e]||void 0===t[e]||"object"===ht(t[e])&&null!==t[e]&&!Array.isArray(t[e]))&&("string"==typeof t[e]||"number"==typeof t[e]||"boolean"==typeof t[e]||Array.isArray(t[e])||delete t[e])}),t}),n=JSON.stringify(a),console.warn("âœ… Ã‰lÃ©ments nettoyÃ©s et sÃ©rialisÃ©s avec succÃ¨s"),e.n=5;break;case 4:return e.p=4,u=e.v,console.error("âŒ Ã‰chec du nettoyage des Ã©lÃ©ments:",u),alert("Erreur critique lors de la prÃ©paration des donnÃ©es. Veuillez recharger la page et rÃ©essayer."),e.a(2);case 5:return(i=new FormData).append("action","pdf_builder_generate_pdf"),i.append("nonce",null===(t=window.pdfBuilderAjax)||void 0===t?void 0:t.nonce),i.append("elements",n),e.n=6,fetch(null===(r=window.pdfBuilderAjax)||void 0===r?void 0:r.ajaxurl,{method:"POST",body:i});case 6:if((l=e.v).ok){e.n=7;break}throw new Error("Erreur HTTP: ".concat(l.status));case 7:return e.n=8,l.json();case 8:if(!(c=e.v).success){e.n=9;break}console.log("PDF gÃ©nÃ©rÃ© avec succÃ¨s"),e.n=10;break;case 9:throw console.error("Erreur serveur:",c.data),new Error((null===(s=c.data)||void 0===s?void 0:s.message)||"Erreur lors de la gÃ©nÃ©ration du PDF");case 10:e.n=12;break;case 11:e.p=11,f=e.v,console.error("Erreur lors de l'impression:",f),alert("Erreur lors de la gÃ©nÃ©ration du PDF: "+f.message);case 12:return e.a(2)}},e,null,[[3,4],[1,2],[0,11]])})),[j]),(0,o.useCallback)(function(e){if(e.ctrlKey&&N.settings.showGuides&&!N.settings.lockGuides){var t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,o=e.clientY-t.top,n=(r-h.x)/j.zoom.zoom,a=(o-h.y)/j.zoom.zoom,c=j.canvasWidth/2,s=j.canvasHeight/2;Math.abs(n-c)<Math.abs(a-s)?B(Math.round(a)):A(Math.round(n))}else if(!e.target.closest("[data-element-id]")){if(i.startsWith("add-")){var d=e.currentTarget.getBoundingClientRect(),u=e.clientX-d.left,f=e.clientY-d.top,p=u/j.zoom.zoom,m=f/j.zoom.zoom,b="text",g={};switch(i){case"add-text":b="text";break;case"add-text-title":b="text",g={fontSize:24,fontWeight:"bold"};break;case"add-text-subtitle":b="text",g={fontSize:18,fontWeight:"bold"};break;case"add-rectangle":b="rectangle";break;case"add-circle":b="shape-circle";break;case"add-line":b="line";break;case"add-arrow":b="shape-arrow";break;case"add-triangle":b="shape-triangle";break;case"add-star":b="shape-star";break;case"add-divider":b="divider";break;case"add-image":b="image";break;default:i.startsWith("add-")&&(b=i.replace("add-",""))}return j.addElement(b,xt({x:Math.max(0,p-50),y:Math.max(0,m-25)},g)),void l("select")}j.selection.clearSelection()}},[j,i])),$=(0,o.useCallback)(function(e,t,r){var o=j.getElementById(e);if(o){var n={};if(t.includes(".")){var a=function(e,t,r){for(var o=t.split("."),n=o.pop(),a=xt({},e),i=a,l=0;l<o.length-1;l++){var c=o[l];i[c]&&"object"===ht(i[c])?i[c]=xt({},i[c]):i[c]={},i=i[c]}var s=o[o.length-1];return s?(i[s]&&"object"===ht(i[s])?i[s]=xt({},i[s]):i[s]={},i[s][n]=r):i[n]=r,a}(o,t,r);Object.assign(n,a)}else n[t]=r;P(e,n,"Modifier ".concat(t))}},[j,P]),J=(0,o.useCallback)(function(e){e.forEach(function(e){var t=e.elementId,r=e.property,o=e.value;j.updateElement(t,wt({},r,o))})},[j]),Q=(0,o.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.preventDefault();var r=[];t?j.getElementById(t)&&r.push({label:"Copier",action:function(){return j.copySelectedElements()}},{label:"Dupliquer",action:function(){return j.duplicateElement(t)}},{type:"separator"},{label:"Supprimer",action:function(){return j.deleteElement(t)}}):(j.selection.selectedElements.length>0&&r.push({label:"Copier",action:function(){return j.copySelectedElements()}},{label:"Dupliquer",action:function(){return j.duplicateSelectedElements()}},{type:"separator"},{label:"Supprimer",action:function(){return j.deleteSelectedElements()}}),r.push({type:"separator"},{label:"Coller",action:function(){return j.pasteElements()}},{type:"separator"},{label:"Tout sÃ©lectionner",action:function(){return j.selectAll()}},{label:"DÃ©sÃ©lectionner",action:function(){return j.selection.clearSelection()}})),j.showContextMenu(e.clientX,e.clientY,r)},[j]),K=(0,o.useCallback)(function(e){"function"==typeof e&&e()},[]),ee=(0,o.useCallback)(function(){if(y)return"grabbing";switch(i){case"select":default:return"default";case"add-text":case"add-text-title":case"add-text-subtitle":return"text";case"add-rectangle":case"add-circle":case"add-line":case"add-arrow":case"add-triangle":case"add-star":case"add-divider":case"add-image":return"crosshair"}},[i,y]),te=(0,o.useCallback)(function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"},[]),re=(0,o.useCallback)(function(e){e.preventDefault();try{var t=e.dataTransfer.getData("application/json");if(!t||""===t.trim())return;var r=JSON.parse(t);if("new-element"===r.type){var o=e.currentTarget.getBoundingClientRect(),n=e.clientX-o.left,a=e.clientY-o.top,i=n/j.zoom.zoom,l=a/j.zoom.zoom;j.addElement(r.elementType,xt({x:Math.max(0,i-50),y:Math.max(0,l-25)},r.defaultProps))}}catch(t){t instanceof SyntaxError&&e.dataTransfer.getData("application/json")&&console.error("Erreur lors du parsing des donnÃ©es de drop:",t)}},[j]),oe=(0,o.useCallback)(function(e){if(N.settings.zoomWithWheel){e.preventDefault();var t=1+N.settings.zoomStep/100,r=e.deltaY>0?-1:1,o=U.current;if(o){var n=o.getBoundingClientRect(),a=e.clientX-n.left,i=e.clientY-n.top,l=r>0?t:1/t;j.zoom.zoomToPoint(a,i,l)}}},[N.settings.zoomWithWheel,N.settings.zoomStep,j.zoom]);(0,o.useEffect)(function(){var e=U.current;if(e&&N.settings.zoomWithWheel){var t=function(e){oe(e)};return e.addEventListener("wheel",t,{passive:!1}),function(){e.removeEventListener("wheel",t)}}},[oe,N.settings.zoomWithWheel]);var ae=(0,o.useCallback)(function(e){N.settings.panWithMouse&&(1===e.button||0===e.button&&e.altKey)&&(e.preventDefault(),v(!0),E({x:e.clientX,y:e.clientY}))},[N.settings.panWithMouse]),ie=(0,o.useCallback)(function(e){if(y){var t=e.clientX-S.x,r=e.clientY-S.y;b(function(e){return{x:e.x+t,y:e.y+r}}),E({x:e.clientX,y:e.clientY})}},[y,S]),le=(0,o.useCallback)(function(){v(!1)},[]),ce=(0,o.useCallback)(function(e){N.settings.zoomToSelection&&(e.target.closest("[data-element-id]")||j.selection.selectedElements.length>0&&j.zoomToSelection())},[N.settings.zoomToSelection,j]);return n().createElement("div",{className:"pdf-canvas-editor",ref:G},n().createElement("header",{className:"editor-header"},n().createElement("h2",null,"Ã‰diteur PDF - ",r.isNew?"Nouveau Template":r.templateName),n().createElement("nav",{className:"editor-actions"},n().createElement("button",{className:"btn btn-outline",onClick:function(){return d(!0)},title:"CrÃ©er un nouveau template"},"âž• Nouveau template"),n().createElement("button",{className:"btn btn-primary",onClick:function(){return j.saveTemplate()},disabled:j.isSaving},j.isSaving?"â³ Sauvegarde...":r.isNew?"ðŸ’¾ Sauvegarder":"âœï¸ Modifier"))),n().createElement(k,{selectedTool:i,onToolSelect:l,zoom:j.zoom.zoom,onZoomChange:j.zoom.setZoomLevel,showGrid:N.settings.showGrid,onShowGridChange:H,snapToGrid:N.settings.snapToGrid,onSnapToGridChange:L,onUndo:M,onRedo:D,canUndo:j.history.canUndo(),canRedo:j.history.canRedo()}),n().createElement("main",{className:"editor-workspace"},n().createElement("aside",{className:"editor-sidebar left-sidebar"},n().createElement(Ce,{onAddElement:X,selectedTool:i,onToolSelect:l})),n().createElement("section",{className:"canvas-section",ref:U,onContextMenu:Q,onDragOver:te,onDrop:re,onMouseDown:ae,onMouseMove:ie,onMouseUp:le,onMouseLeave:le,onDoubleClick:ce,style:{cursor:ee(),backgroundColor:N.settings.containerShowTransparency?"transparent":N.settings.containerBackgroundColor||"#f8f9fa",backgroundImage:N.settings.containerShowTransparency?"linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%)":"none",backgroundSize:N.settings.containerShowTransparency?"20px 20px":"auto",backgroundPosition:N.settings.containerShowTransparency?"0 0, 0 10px, 10px -10px, -10px 0px":"0 0"}},n().createElement("div",{className:"canvas-zoom-wrapper",style:{transform:"translate(".concat(h.x,"px, ").concat(h.y,"px) scale(").concat(j.zoom.zoom,")"),transformOrigin:"center",cursor:y?"grabbing":"default",transition:N.settings.smoothZoom?"transform 0.2s ease-out":"none",willChange:N.settings.enableHardwareAcceleration?"transform":"auto"}},n().createElement("div",{className:"canvas",ref:q,onClick:V,style:{width:j.canvasWidth,height:"auto",minHeight:j.canvasHeight,position:"relative",backgroundColor:N.settings.canvasShowTransparency?"transparent":N.settings.canvasBackgroundColor||"#ffffff",backgroundImage:N.settings.canvasShowTransparency?"linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%)":"none",backgroundSize:N.settings.canvasShowTransparency?"20px 20px":"auto",backgroundPosition:N.settings.canvasShowTransparency?"0 0, 0 10px, 10px -10px, -10px 0px":"0 0"}},N.settings.showGrid&&n().createElement("div",{className:"canvas-grid",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:"\n                      linear-gradient(to right, ".concat(N.settings.gridColor).concat(Math.round(2.55*N.settings.gridOpacity).toString(16).padStart(2,"0")," 1px, transparent 1px),\n                      linear-gradient(to bottom, ").concat(N.settings.gridColor).concat(Math.round(2.55*N.settings.gridOpacity).toString(16).padStart(2,"0")," 1px, transparent 1px)\n                    "),backgroundSize:"".concat(N.settings.gridSize,"px ").concat(N.settings.gridSize,"px"),pointerEvents:"none",zIndex:1}}),N.settings.showGuides&&n().createElement("div",{className:"canvas-guides"},z.horizontal.map(function(e,t){return n().createElement("div",{key:"h-guide-".concat(t),className:"canvas-guide horizontal-guide",onClick:function(t){t.stopPropagation(),N.settings.lockGuides||W("horizontal",e)},style:{position:"absolute",top:"".concat(e,"px"),left:0,width:"100%",height:"2px",backgroundColor:"#007cba",cursor:N.settings.lockGuides?"default":"pointer",zIndex:2,opacity:.7},title:"Guide horizontal Ã  ".concat(e,"px - ").concat(N.settings.lockGuides?"VerrouillÃ©":"Cliquer pour supprimer")})}),z.vertical.map(function(e,t){return n().createElement("div",{key:"v-guide-".concat(t),className:"canvas-guide vertical-guide",onClick:function(t){t.stopPropagation(),N.settings.lockGuides||W("vertical",e)},style:{position:"absolute",top:0,left:"".concat(e,"px"),height:"100%",width:"2px",backgroundColor:"#007cba",cursor:N.settings.lockGuides?"default":"pointer",zIndex:2,opacity:.7},title:"Guide vertical Ã  ".concat(e,"px - ").concat(N.settings.lockGuides?"VerrouillÃ©":"Cliquer pour supprimer")})})),j.elements.filter(function(e){return!e.type.startsWith("woocommerce-")}).map(function(e){return n().createElement(w,{key:e.id,element:e,isSelected:j.selection.selectedElements.includes(e.id),zoom:1,snapToGrid:N.settings.snapToGrid,gridSize:N.settings.gridSize,canvasWidth:j.canvasWidth,canvasHeight:j.canvasHeight,onSelect:function(){return Z(e.id)},onUpdate:function(t){return j.updateElement(e.id,t)},onRemove:function(){return j.deleteElement(e.id)},onContextMenu:function(t){return Q(t,e.id)},dragAndDrop:Y,enableRotation:N.settings.enableRotation,rotationStep:N.settings.rotationStep,rotationSnap:N.settings.rotationSnap,guides:z,snapToGuides:N.settings.snapToElements})}),j.elements.filter(function(e){return e.type.startsWith("woocommerce-")}).map(function(e){return n().createElement(ye,{key:e.id,element:e,isSelected:j.selection.selectedElements.includes(e.id),onSelect:Z,onUpdate:j.updateElement,dragAndDrop:Y,zoom:1,canvasWidth:j.canvasWidth,canvasHeight:j.canvasHeight,orderData:F,onContextMenu:function(t){return Q(t,e.id)},snapToGrid:N.settings.snapToGrid,gridSize:N.settings.gridSize,guides:z,snapToGuides:N.settings.snapToElements})})))),n().createElement("aside",{className:"editor-sidebar right-sidebar ".concat(f?"collapsed":"")},!f&&n().createElement(at,{selectedElements:j.selection.selectedElements,elements:j.elements,onPropertyChange:$,onBatchUpdate:J}))),n().createElement("button",{className:"sidebar-toggle-fixed",onClick:function(){return p(!f)},title:f?"Agrandir le panneau":"RÃ©duire le panneau",style:{position:"fixed",top:"50%",right:f?"0px":"350px",transform:"translateY(-50%)",zIndex:999999}},f?"â—€":"â–¶"),j.contextMenu.contextMenu&&n().createElement(ge,{menu:j.contextMenu.contextMenu,onAction:K,isAnimating:j.contextMenu.isAnimating||!1,onClose:j.contextMenu.hideContextMenu}),n().createElement("footer",{className:"editor-status"},n().createElement("span",null,"Ã‰lÃ©ments: ",j.elements.length),n().createElement("span",null,"|"),N.settings.showZoomIndicator&&n().createElement(n().Fragment,null,n().createElement("span",null,"Zoom: ",Math.round(100*j.zoom.zoom),"%"),n().createElement("span",null,"|")),n().createElement("span",null,"Outil: ",i),j.selection.selectedElements.length>0&&n().createElement(n().Fragment,null,n().createElement("span",null,"|"),n().createElement("span",null,"Ã‰lÃ©ments sÃ©lectionnÃ©s: ",j.selection.selectedElements.length))),n().createElement(ft,{isOpen:s,onClose:function(){return d(!1)},onCreateTemplate:I}),n().createElement(he,{showFps:N.settings.showFps}))});_t.displayName="PDFCanvasEditor","undefined"!=typeof window&&(window.pdfBuilderPro||(window.pdfBuilderPro={}),window.pdfBuilderPro.init=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("PDF Builder Pro: Initialisation de l'Ã©diteur",{containerId:e,options:t});var r=document.getElementById(e);r?(r.innerHTML="",a.createRoot(r).render(n().createElement(_t,{options:t})),console.log("PDF Builder Pro: Ã‰diteur initialisÃ© avec succÃ¨s")):console.error("PDF Builder Pro: Container non trouvÃ©",e)})}();