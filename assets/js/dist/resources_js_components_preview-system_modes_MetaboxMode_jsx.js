"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkPDFBuilderPro"] = self["webpackChunkPDFBuilderPro"] || []).push([["resources_js_components_preview-system_modes_MetaboxMode_jsx"],{

/***/ "./resources/js/components/preview-system/data/RealDataProvider.jsx":
/*!**************************************************************************!*\
  !*** ./resources/js/components/preview-system/data/RealDataProvider.jsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RealDataProvider: () => (/* binding */ RealDataProvider)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\r\n * Fournisseur de données réelles pour le mode Metabox\r\n * Récupère les vraies données depuis WooCommerce\r\n */\nvar RealDataProvider = /*#__PURE__*/function () {\n  function RealDataProvider() {\n    var _window$pdfBuilderPro, _window$pdfBuilderAja;\n    _classCallCheck(this, RealDataProvider);\n    this.ajaxUrl = window.ajaxurl || '/wp-admin/admin-ajax.php';\n    this.nonce = ((_window$pdfBuilderPro = window.pdfBuilderPro) === null || _window$pdfBuilderPro === void 0 ? void 0 : _window$pdfBuilderPro.nonce) || ((_window$pdfBuilderAja = window.pdfBuilderAjax) === null || _window$pdfBuilderAja === void 0 ? void 0 : _window$pdfBuilderAja.nonce) || '';\n    this.variablesCache = new Map(); // Cache des variables par commande\n  }\n\n  /**\r\n   * Charge les données complètes d'une commande WooCommerce\r\n   * @param {number} orderId - ID de la commande\r\n   * @returns {Promise<Object>} Données de la commande\r\n   */\n  return _createClass(RealDataProvider, [{\n    key: \"loadOrderData\",\n    value: (function () {\n      var _loadOrderData = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(orderId) {\n        var response, _response$data;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              _context.n = 1;\n              return this.makeAjaxRequest('pdf_builder_get_order_data', {\n                order_id: orderId\n              });\n            case 1:\n              response = _context.v;\n              if (response.success) {\n                _context.n = 2;\n                break;\n              }\n              throw new Error(((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.message) || 'Erreur lors du chargement des données de commande');\n            case 2:\n              return _context.a(2, response.data.order);\n          }\n        }, _callee, this);\n      }));\n      function loadOrderData(_x) {\n        return _loadOrderData.apply(this, arguments);\n      }\n      return loadOrderData;\n    }()\n    /**\r\n     * Charge les variables mappées pour une commande (utilise VariableMapper PHP)\r\n     * @param {number} orderId - ID de la commande\r\n     * @returns {Promise<Object>} Variables mappées\r\n     */\n    )\n  }, {\n    key: \"loadVariables\",\n    value: (function () {\n      var _loadVariables = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(orderId) {\n        var response, _response$data2, variables;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              if (!this.variablesCache.has(orderId)) {\n                _context2.n = 1;\n                break;\n              }\n              return _context2.a(2, this.variablesCache.get(orderId));\n            case 1:\n              _context2.n = 2;\n              return this.makeAjaxRequest('pdf_builder_get_order_preview_data', {\n                order_id: orderId\n              });\n            case 2:\n              response = _context2.v;\n              if (response.success) {\n                _context2.n = 3;\n                break;\n              }\n              throw new Error(((_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.message) || 'Erreur lors du chargement des variables d\\'aperçu');\n            case 3:\n              variables = response.data.variables;\n              this.variablesCache.set(orderId, variables);\n              return _context2.a(2, variables);\n          }\n        }, _callee2, this);\n      }));\n      function loadVariables(_x2) {\n        return _loadVariables.apply(this, arguments);\n      }\n      return loadVariables;\n    }()\n    /**\r\n     * Valide l'accès à une commande\r\n     * @param {number} orderId - ID de la commande\r\n     * @returns {Promise<void>}\r\n     */\n    )\n  }, {\n    key: \"validateOrderAccess\",\n    value: (function () {\n      var _validateOrderAccess = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(orderId) {\n        var response, _response$data3;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              _context3.n = 1;\n              return this.makeAjaxRequest('pdf_builder_validate_order_access', {\n                order_id: orderId\n              });\n            case 1:\n              response = _context3.v;\n              if (response.success) {\n                _context3.n = 2;\n                break;\n              }\n              throw new Error(((_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.message) || 'Accès non autorisé à cette commande');\n            case 2:\n              return _context3.a(2);\n          }\n        }, _callee3, this);\n      }));\n      function validateOrderAccess(_x3) {\n        return _validateOrderAccess.apply(this, arguments);\n      }\n      return validateOrderAccess;\n    }()\n    /**\r\n     * Génère des données réelles pour un type d'élément spécifique\r\n     * @param {string} elementType - Type de l'élément\r\n     * @param {Object} properties - Propriétés de l'élément\r\n     * @param {Object} orderData - Données de la commande\r\n     * @returns {Promise<any>} Données réelles\r\n     */\n    )\n  }, {\n    key: \"getElementData\",\n    value: (function () {\n      var _getElementData = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(elementType, properties, orderData) {\n        var _t;\n        return _regenerator().w(function (_context4) {\n          while (1) switch (_context4.n) {\n            case 0:\n              _t = elementType;\n              _context4.n = _t === 'product_table' ? 1 : _t === 'customer_info' ? 2 : _t === 'company_logo' ? 3 : _t === 'company_info' ? 4 : _t === 'order_number' ? 5 : _t === 'dynamic-text' ? 6 : _t === 'mentions' ? 7 : 8;\n              break;\n            case 1:\n              return _context4.a(2, this.generateProductTableData(properties, orderData));\n            case 2:\n              return _context4.a(2, this.generateCustomerInfoData(properties, orderData));\n            case 3:\n              return _context4.a(2, this.generateCompanyLogoData(properties, orderData));\n            case 4:\n              return _context4.a(2, this.generateCompanyInfoData(properties, orderData));\n            case 5:\n              return _context4.a(2, this.generateOrderNumberData(properties, orderData));\n            case 6:\n              return _context4.a(2, this.generateDynamicTextData(properties, orderData));\n            case 7:\n              return _context4.a(2, this.generateMentionsData(properties, orderData));\n            case 8:\n              return _context4.a(2, this.generateDefaultData(elementType, properties, orderData));\n            case 9:\n              return _context4.a(2);\n          }\n        }, _callee4, this);\n      }));\n      function getElementData(_x4, _x5, _x6) {\n        return _getElementData.apply(this, arguments);\n      }\n      return getElementData;\n    }()\n    /**\r\n     * Génère des données pour un tableau de produits (données réelles)\r\n     */\n    )\n  }, {\n    key: \"generateProductTableData\",\n    value: function generateProductTableData(properties, orderData) {\n      var _properties$columns = properties.columns,\n        columns = _properties$columns === void 0 ? {} : _properties$columns,\n        _properties$showSubto = properties.showSubtotal,\n        showSubtotal = _properties$showSubto === void 0 ? false : _properties$showSubto,\n        _properties$showShipp = properties.showShipping,\n        showShipping = _properties$showShipp === void 0 ? true : _properties$showShipp,\n        _properties$showTaxes = properties.showTaxes,\n        showTaxes = _properties$showTaxes === void 0 ? true : _properties$showTaxes,\n        _properties$tableStyl = properties.tableStyle,\n        tableStyle = _properties$tableStyl === void 0 ? 'default' : _properties$tableStyl;\n      var tableData = {\n        headers: [],\n        rows: [],\n        totals: {}\n      };\n\n      // Déterminer les colonnes à afficher\n      if (columns.image !== false) tableData.headers.push('Image');\n      if (columns.name !== false) tableData.headers.push('Produit');\n      if (columns.sku !== false) tableData.headers.push('SKU');\n      if (columns.quantity !== false) tableData.headers.push('Qté');\n      if (columns.price !== false) tableData.headers.push('Prix');\n      if (columns.total !== false) tableData.headers.push('Total');\n\n      // Générer les lignes de produits depuis les données réelles\n      if (orderData.items && Array.isArray(orderData.items)) {\n        tableData.rows = orderData.items.map(function (item) {\n          var row = [];\n          if (columns.image !== false) row.push(item.image || '');\n          if (columns.name !== false) row.push(item.name || '');\n          if (columns.sku !== false) row.push(item.sku || '');\n          if (columns.quantity !== false) row.push(item.quantity || 0);\n          if (columns.price !== false) row.push(item.price || '0 €');\n          if (columns.total !== false) row.push(item.total || '0 €');\n          return row;\n        });\n      }\n\n      // Ajouter les totaux si demandés\n      if (showSubtotal) tableData.totals.subtotal = orderData.subtotal || '0 €';\n      if (showShipping) tableData.totals.shipping = orderData.shipping_total || '0 €';\n      if (showTaxes) tableData.totals.tax = orderData.total_tax || '0 €';\n      tableData.totals.total = orderData.total || '0 €';\n\n      // Ajouter les données de style du tableau (même logique que SampleDataProvider)\n      tableData.tableStyleData = this.getTableStyleData(tableStyle);\n      return tableData;\n    }\n\n    /**\r\n     * Génère des données pour les informations client (données réelles)\r\n     */\n  }, {\n    key: \"generateCustomerInfoData\",\n    value: function generateCustomerInfoData(properties, orderData) {\n      var _this = this;\n      var _properties$fields = properties.fields,\n        fields = _properties$fields === void 0 ? [] : _properties$fields;\n      var data = {};\n      fields.forEach(function (field) {\n        var _orderData$billing, _orderData$billing2, _orderData$billing3, _orderData$billing4, _orderData$billing5, _orderData$billing6, _orderData$billing7;\n        switch (field) {\n          case 'name':\n            data.name = (_orderData$billing = orderData.billing) !== null && _orderData$billing !== void 0 && _orderData$billing.first_name && (_orderData$billing2 = orderData.billing) !== null && _orderData$billing2 !== void 0 && _orderData$billing2.last_name ? \"\".concat(orderData.billing.first_name, \" \").concat(orderData.billing.last_name) : '';\n            break;\n          case 'email':\n            data.email = ((_orderData$billing3 = orderData.billing) === null || _orderData$billing3 === void 0 ? void 0 : _orderData$billing3.email) || '';\n            break;\n          case 'phone':\n            data.phone = ((_orderData$billing4 = orderData.billing) === null || _orderData$billing4 === void 0 ? void 0 : _orderData$billing4.phone) || '';\n            break;\n          case 'address':\n            data.address = _this.formatAddress(orderData.billing);\n            break;\n          case 'company':\n            data.company = ((_orderData$billing5 = orderData.billing) === null || _orderData$billing5 === void 0 ? void 0 : _orderData$billing5.company) || '';\n            break;\n          case 'vat':\n            data.vat = ((_orderData$billing6 = orderData.billing) === null || _orderData$billing6 === void 0 ? void 0 : _orderData$billing6.vat) || '';\n            break;\n          case 'siret':\n            data.siret = ((_orderData$billing7 = orderData.billing) === null || _orderData$billing7 === void 0 ? void 0 : _orderData$billing7.siret) || '';\n            break;\n        }\n      });\n      return data;\n    }\n\n    /**\r\n     * Génère des données pour le logo entreprise\r\n     */\n  }, {\n    key: \"generateCompanyLogoData\",\n    value: function generateCompanyLogoData(properties, orderData) {\n      // Le logo entreprise est généralement stocké dans les options WordPress\n      // Pour l'instant, retourner une valeur par défaut\n      return {\n        imageUrl: '',\n        // À récupérer depuis wp_options\n        alt: 'Logo de l\\'entreprise'\n      };\n    }\n\n    /**\r\n     * Génère des données pour les informations entreprise\r\n     */\n  }, {\n    key: \"generateCompanyInfoData\",\n    value: function generateCompanyInfoData(properties, orderData) {\n      // Les informations entreprise sont généralement dans wp_options\n      // Simulation avec des données vides pour l'instant\n      var _properties$fields2 = properties.fields,\n        fields = _properties$fields2 === void 0 ? [] : _properties$fields2;\n      var data = {};\n      fields.forEach(function (field) {\n        data[field] = ''; // À récupérer depuis wp_options\n      });\n      return data;\n    }\n\n    /**\r\n     * Génère des données pour le numéro de commande\r\n     */\n  }, {\n    key: \"generateOrderNumberData\",\n    value: function generateOrderNumberData(properties, orderData) {\n      var _properties$format = properties.format,\n        format = _properties$format === void 0 ? 'Commande #{order_number} - {order_date}' : _properties$format;\n      return {\n        formatted: format.replace('{order_number}', orderData.number || orderData.id || '').replace('{order_date}', orderData.date_created || '')\n      };\n    }\n\n    /**\r\n     * Génère des données pour un élément de texte dynamique\r\n     */\n  }, {\n    key: \"generateDynamicTextData\",\n    value: (function () {\n      var _generateDynamicTextData = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(properties, orderData) {\n        var _properties$template, template, _properties$customCon, customContent, content, _orderData$order, variables, _t2;\n        return _regenerator().w(function (_context5) {\n          while (1) switch (_context5.p = _context5.n) {\n            case 0:\n              _properties$template = properties.template, template = _properties$template === void 0 ? 'total_only' : _properties$template, _properties$customCon = properties.customContent, customContent = _properties$customCon === void 0 ? '' : _properties$customCon;\n              content = customContent;\n              if (template === 'total_only') {\n                content = \"Total: \".concat(orderData.total || '0 €');\n              }\n\n              // Charger les variables mappées depuis le VariableMapper PHP\n              _context5.p = 1;\n              _context5.n = 2;\n              return this.loadVariables(orderData.id || ((_orderData$order = orderData.order) === null || _orderData$order === void 0 ? void 0 : _orderData$order.id));\n            case 2:\n              variables = _context5.v;\n              // Remplacer les variables avec les vraies données du VariableMapper\n              content = this.replaceVariablesWithMapper(content, variables);\n              _context5.n = 4;\n              break;\n            case 3:\n              _context5.p = 3;\n              _t2 = _context5.v;\n              console.warn('Erreur lors du chargement des variables, utilisation du fallback:', _t2);\n              // Fallback vers l'ancien système si le VariableMapper échoue\n              content = this.replaceVariables(content, orderData);\n            case 4:\n              return _context5.a(2, {\n                content: content\n              });\n          }\n        }, _callee5, this, [[1, 3]]);\n      }));\n      function generateDynamicTextData(_x7, _x8) {\n        return _generateDynamicTextData.apply(this, arguments);\n      }\n      return generateDynamicTextData;\n    }()\n    /**\r\n     * Génère des données pour les mentions légales\r\n     */\n    )\n  }, {\n    key: \"generateMentionsData\",\n    value: function generateMentionsData(properties, orderData) {\n      // Les mentions légales sont généralement dans wp_options\n      // Simulation pour l'instant\n      var _properties$showEmail = properties.showEmail,\n        showEmail = _properties$showEmail === void 0 ? true : _properties$showEmail,\n        _properties$showPhone = properties.showPhone,\n        showPhone = _properties$showPhone === void 0 ? true : _properties$showPhone,\n        _properties$showSiret = properties.showSiret,\n        showSiret = _properties$showSiret === void 0 ? true : _properties$showSiret,\n        _properties$showVat = properties.showVat,\n        showVat = _properties$showVat === void 0 ? false : _properties$showVat,\n        _properties$showAddre = properties.showAddress,\n        showAddress = _properties$showAddre === void 0 ? false : _properties$showAddre,\n        _properties$showWebsi = properties.showWebsite,\n        showWebsite = _properties$showWebsi === void 0 ? false : _properties$showWebsi,\n        _properties$showCusto = properties.showCustomText,\n        showCustomText = _properties$showCusto === void 0 ? false : _properties$showCusto,\n        _properties$customTex = properties.customText,\n        customText = _properties$customTex === void 0 ? '' : _properties$customTex;\n      var mentions = [];\n      if (showEmail) mentions.push(orderData.company_email || '');\n      if (showPhone) mentions.push(orderData.company_phone || '');\n      if (showSiret) mentions.push(\"SIRET: \".concat(orderData.company_siret || ''));\n      if (showVat) mentions.push(\"TVA: \".concat(orderData.company_vat || ''));\n      if (showAddress) mentions.push(orderData.company_address || '');\n      if (showWebsite) mentions.push(orderData.company_website || '');\n      if (showCustomText && customText) mentions.push(customText);\n      return {\n        mentions: mentions\n      };\n    }\n\n    /**\r\n     * Génère des données par défaut pour les éléments non supportés\r\n     */\n  }, {\n    key: \"generateDefaultData\",\n    value: function generateDefaultData(elementType, properties, orderData) {\n      return {\n        type: elementType,\n        placeholder: \"Donn\\xE9es r\\xE9elles pour \".concat(elementType),\n        properties: properties,\n        orderData: orderData\n      };\n    }\n\n    /**\r\n     * Formate une adresse depuis les données WooCommerce\r\n     */\n  }, {\n    key: \"formatAddress\",\n    value: function formatAddress(addressData) {\n      if (!addressData) return '';\n      var parts = [addressData.address_1, addressData.address_2, addressData.postcode, addressData.city, addressData.state, addressData.country].filter(Boolean);\n      return parts.join('\\n');\n    }\n\n    /**\r\n     * Remplace les variables dynamiques dans un contenu\r\n     */\n  }, {\n    key: \"replaceVariables\",\n    value: function replaceVariables(content, orderData) {\n      var _orderData$billing8, _orderData$billing9, _orderData$billing0, _orderData$billing1;\n      if (!content || !orderData) return content;\n      var replacements = {\n        '{{order_number}}': orderData.number || orderData.id || '',\n        '{{order_date}}': orderData.date_created || '',\n        '{{order_total}}': orderData.total || '0 €',\n        '{{order_status}}': orderData.status || '',\n        '{{customer_name}}': (_orderData$billing8 = orderData.billing) !== null && _orderData$billing8 !== void 0 && _orderData$billing8.first_name && (_orderData$billing9 = orderData.billing) !== null && _orderData$billing9 !== void 0 && _orderData$billing9.last_name ? \"\".concat(orderData.billing.first_name, \" \").concat(orderData.billing.last_name) : '',\n        '{{customer_email}}': ((_orderData$billing0 = orderData.billing) === null || _orderData$billing0 === void 0 ? void 0 : _orderData$billing0.email) || '',\n        '{{customer_phone}}': ((_orderData$billing1 = orderData.billing) === null || _orderData$billing1 === void 0 ? void 0 : _orderData$billing1.phone) || '',\n        '{{billing_address}}': this.formatAddress(orderData.billing),\n        '{{shipping_address}}': this.formatAddress(orderData.shipping),\n        '{{payment_method}}': orderData.payment_method_title || '',\n        '{{shipping_method}}': orderData.shipping_method || '',\n        '{{subtotal}}': orderData.subtotal || '0 €',\n        '{{tax_amount}}': orderData.total_tax || '0 €',\n        '{{shipping_amount}}': orderData.shipping_total || '0 €',\n        '{{discount_amount}}': orderData.discount_total || '0 €',\n        '{{total_excl_tax}}': orderData.total_excl_tax || '0 €'\n      };\n      var result = content;\n      Object.entries(replacements).forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          variable = _ref2[0],\n          value = _ref2[1];\n        result = result.replace(new RegExp(variable.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'g'), value);\n      });\n      return result;\n    }\n\n    /**\r\n     * Remplace les variables dans le contenu en utilisant les données du VariableMapper PHP\r\n     * @param {string} content - Contenu avec variables\r\n     * @param {Object} variables - Variables du VariableMapper\r\n     * @returns {string} Contenu avec variables remplacées\r\n     */\n  }, {\n    key: \"replaceVariablesWithMapper\",\n    value: function replaceVariablesWithMapper(content, variables) {\n      if (!content || !variables) return content;\n      var result = content;\n\n      // Remplacer chaque variable du mapper\n      Object.entries(variables).forEach(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n          key = _ref4[0],\n          value = _ref4[1];\n        var variable = \"{{\".concat(key, \"}}\");\n        var regex = new RegExp(variable.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'g');\n        result = result.replace(regex, value || '');\n      });\n      return result;\n    }\n\n    /**\r\n     * Récupère les données de style pour un tableau\r\n     */\n  }, {\n    key: \"getTableStyleData\",\n    value: function getTableStyleData(tableStyle) {\n      var tableStyles = {\n        \"default\": {\n          header_bg: [248, 249, 250],\n          // #f8f9fa\n          header_border: [226, 232, 240],\n          // #e2e8f0\n          row_border: [241, 245, 249],\n          // #f1f5f9\n          alt_row_bg: [250, 251, 252],\n          // #fafbfc\n          headerTextColor: '#000000',\n          rowTextColor: '#000000',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        classic: {\n          header_bg: [30, 41, 59],\n          // #1e293b\n          header_border: [51, 65, 85],\n          // #334155\n          row_border: [51, 65, 85],\n          // #334155\n          alt_row_bg: [255, 255, 255],\n          // #ffffff\n          headerTextColor: '#ffffff',\n          rowTextColor: '#1e293b',\n          border_width: 1.5,\n          headerFontWeight: '700',\n          headerFontSize: '11px',\n          rowFontSize: '10px'\n        },\n        blue: {\n          header_bg: [59, 130, 246],\n          // #3b82f6\n          header_border: [37, 99, 235],\n          // #2563eb\n          row_border: [226, 232, 240],\n          // #e2e8f0\n          alt_row_bg: [248, 249, 250],\n          // #f8fafc\n          headerTextColor: '#ffffff',\n          rowTextColor: '#1e293b',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '11px',\n          rowFontSize: '10px'\n        },\n        minimal: {\n          header_bg: [255, 255, 255],\n          // #ffffff\n          header_border: [229, 231, 235],\n          // #e5e7eb\n          row_border: [229, 231, 235],\n          // #e5e7eb\n          alt_row_bg: [255, 255, 255],\n          // #ffffff\n          headerTextColor: '#374151',\n          rowTextColor: '#374151',\n          border_width: 1,\n          headerFontWeight: '600',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        light: {\n          header_bg: [249, 250, 251],\n          // #f9fafb\n          header_border: [209, 213, 219],\n          // #d1d5db\n          row_border: [229, 231, 235],\n          // #e5e7eb\n          alt_row_bg: [255, 255, 255],\n          // #ffffff\n          headerTextColor: '#111827',\n          rowTextColor: '#374151',\n          border_width: 1,\n          headerFontWeight: '500',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        emerald_forest: {\n          header_bg: [16, 185, 129],\n          // #10b981\n          header_border: [5, 150, 105],\n          // #059669\n          row_border: [209, 213, 219],\n          // #d1d5db\n          alt_row_bg: [236, 253, 245],\n          // #ecfdf5\n          headerTextColor: '#ffffff',\n          rowTextColor: '#065f46',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '11px',\n          rowFontSize: '10px'\n        },\n        striped: {\n          header_bg: [75, 85, 99],\n          // #4b5563\n          header_border: [107, 114, 128],\n          // #6b7280\n          row_border: [229, 231, 235],\n          // #e5e7eb\n          alt_row_bg: [249, 250, 251],\n          // #f9fafb\n          headerTextColor: '#ffffff',\n          rowTextColor: '#374151',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        bordered: {\n          header_bg: [31, 41, 55],\n          // #1f2937\n          header_border: [55, 65, 81],\n          // #374151\n          row_border: [55, 65, 81],\n          // #374151\n          alt_row_bg: [255, 255, 255],\n          // #ffffff\n          headerTextColor: '#ffffff',\n          rowTextColor: '#1f2937',\n          border_width: 2,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        modern: {\n          header_bg: [17, 24, 39],\n          // #111827\n          header_border: [75, 85, 99],\n          // #4b5563\n          row_border: [209, 213, 219],\n          // #d1d5db\n          alt_row_bg: [243, 244, 246],\n          // #f3f4f6\n          headerTextColor: '#ffffff',\n          rowTextColor: '#374151',\n          border_width: 1,\n          headerFontWeight: '600',\n          headerFontSize: '13px',\n          rowFontSize: '12px'\n        },\n        blue_ocean: {\n          header_bg: [12, 74, 110],\n          // #0c4a6e\n          header_border: [2, 132, 199],\n          // #0284c7\n          row_border: [186, 230, 253],\n          // #bae6fd\n          alt_row_bg: [240, 249, 255],\n          // #f0f9ff\n          headerTextColor: '#ffffff',\n          rowTextColor: '#0c4a6e',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        sunset_orange: {\n          header_bg: [154, 52, 18],\n          // #9a3412\n          header_border: [234, 88, 12],\n          // #ea580c\n          row_border: [253, 186, 116],\n          // #fdba74\n          alt_row_bg: [255, 247, 237],\n          // #fff7ed\n          headerTextColor: '#ffffff',\n          rowTextColor: '#9a3412',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        royal_purple: {\n          header_bg: [88, 28, 135],\n          // #581c87\n          header_border: [147, 51, 234],\n          // #9333ea\n          row_border: [221, 214, 254],\n          // #ddd6fe\n          alt_row_bg: [250, 245, 255],\n          // #faf5ff\n          headerTextColor: '#ffffff',\n          rowTextColor: '#581c87',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        rose_pink: {\n          header_bg: [190, 18, 60],\n          // #be123c\n          header_border: [236, 72, 153],\n          // #ec4899\n          row_border: [253, 164, 175],\n          // #fda4af\n          alt_row_bg: [255, 241, 242],\n          // #fff1f2\n          headerTextColor: '#ffffff',\n          rowTextColor: '#be123c',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        teal_aqua: {\n          header_bg: [5, 150, 105],\n          // #059669\n          header_border: [20, 184, 166],\n          // #14b8a6\n          row_border: [153, 246, 228],\n          // #99f6e4\n          alt_row_bg: [236, 253, 245],\n          // #ecfdf5\n          headerTextColor: '#ffffff',\n          rowTextColor: '#065f46',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        crimson_red: {\n          header_bg: [153, 27, 27],\n          // #991b1b\n          header_border: [239, 68, 68],\n          // #ef4444\n          row_border: [252, 165, 165],\n          // #fca5a5\n          alt_row_bg: [254, 242, 242],\n          // #fef2f2\n          headerTextColor: '#ffffff',\n          rowTextColor: '#991b1b',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        amber_gold: {\n          header_bg: [161, 98, 7],\n          // #a16207\n          header_border: [245, 158, 11],\n          // #f59e0b\n          row_border: [253, 230, 138],\n          // #fde68a\n          alt_row_bg: [254, 252, 232],\n          // #fefce8\n          headerTextColor: '#ffffff',\n          rowTextColor: '#92400e',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        indigo_night: {\n          header_bg: [49, 46, 129],\n          // #312e81\n          header_border: [99, 102, 241],\n          // #6366f1\n          row_border: [196, 181, 253],\n          // #c4b5fd\n          alt_row_bg: [245, 243, 255],\n          // #f5f3ff\n          headerTextColor: '#ffffff',\n          rowTextColor: '#312e81',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        slate_gray: {\n          header_bg: [51, 65, 85],\n          // #334155\n          header_border: [100, 116, 139],\n          // #64748b\n          row_border: [203, 213, 225],\n          // #cbd5e1\n          alt_row_bg: [248, 250, 252],\n          // #f8fafc\n          headerTextColor: '#ffffff',\n          rowTextColor: '#334155',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        coral_sunset: {\n          header_bg: [194, 65, 12],\n          // #c2410c\n          header_border: [251, 146, 60],\n          // #fb923c\n          row_border: [253, 186, 116],\n          // #fdba74\n          alt_row_bg: [255, 247, 237],\n          // #fff7ed\n          headerTextColor: '#ffffff',\n          rowTextColor: '#9a3412',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        mint_green: {\n          header_bg: [34, 197, 94],\n          // #22c55e\n          header_border: [74, 222, 128],\n          // #4ade80\n          row_border: [187, 247, 208],\n          // #bbf7d0\n          alt_row_bg: [240, 253, 244],\n          // #f0fdf4\n          headerTextColor: '#ffffff',\n          rowTextColor: '#166534',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        violet_dream: {\n          header_bg: [109, 40, 217],\n          // #6d28d9\n          header_border: [168, 85, 247],\n          // #a855f7\n          row_border: [233, 213, 255],\n          // #e9d5ff\n          alt_row_bg: [251, 245, 255],\n          // #fbf5ff\n          headerTextColor: '#ffffff',\n          rowTextColor: '#6b21a8',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        sky_blue: {\n          header_bg: [3, 105, 161],\n          // #0369a1\n          header_border: [14, 165, 233],\n          // #0ea5e9\n          row_border: [125, 211, 252],\n          // #7dd3fc\n          alt_row_bg: [240, 249, 255],\n          // #f0f9ff\n          headerTextColor: '#ffffff',\n          rowTextColor: '#0c4a6e',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        forest_green: {\n          header_bg: [21, 128, 61],\n          // #15803d\n          header_border: [34, 197, 94],\n          // #22c55e\n          row_border: [134, 239, 172],\n          // #86efac\n          alt_row_bg: [236, 253, 245],\n          // #ecfdf5\n          headerTextColor: '#ffffff',\n          rowTextColor: '#14532d',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        },\n        ruby_red: {\n          header_bg: [185, 28, 28],\n          // #b91c1c\n          header_border: [239, 68, 68],\n          // #ef4444\n          row_border: [252, 165, 165],\n          // #fca5a5\n          alt_row_bg: [254, 226, 226],\n          // #fee2e2\n          headerTextColor: '#ffffff',\n          rowTextColor: '#991b1b',\n          border_width: 1,\n          headerFontWeight: 'bold',\n          headerFontSize: '12px',\n          rowFontSize: '11px'\n        }\n      };\n      return tableStyles[tableStyle] || tableStyles['default'];\n    }\n\n    /**\r\n     * Effectue une requête AJAX vers WordPress\r\n     */\n  }, {\n    key: \"makeAjaxRequest\",\n    value: (function () {\n      var _makeAjaxRequest = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(action) {\n        var data,\n          formData,\n          response,\n          _args6 = arguments;\n        return _regenerator().w(function (_context6) {\n          while (1) switch (_context6.n) {\n            case 0:\n              data = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : {};\n              formData = new FormData();\n              formData.append('action', action);\n              formData.append('nonce', this.nonce);\n              Object.entries(data).forEach(function (_ref5) {\n                var _ref6 = _slicedToArray(_ref5, 2),\n                  key = _ref6[0],\n                  value = _ref6[1];\n                formData.append(key, value);\n              });\n              _context6.n = 1;\n              return fetch(this.ajaxUrl, {\n                method: 'POST',\n                body: formData\n              });\n            case 1:\n              response = _context6.v;\n              if (response.ok) {\n                _context6.n = 2;\n                break;\n              }\n              throw new Error(\"Erreur HTTP: \".concat(response.status));\n            case 2:\n              _context6.n = 3;\n              return response.json();\n            case 3:\n              return _context6.a(2, _context6.v);\n          }\n        }, _callee6, this);\n      }));\n      function makeAjaxRequest(_x9) {\n        return _makeAjaxRequest.apply(this, arguments);\n      }\n      return makeAjaxRequest;\n    }())\n  }]);\n}();\n\n//# sourceURL=webpack://PDFBuilderPro/./resources/js/components/preview-system/data/RealDataProvider.jsx?\n}");

/***/ }),

/***/ "./resources/js/components/preview-system/modes/MetaboxMode.jsx":
/*!**********************************************************************!*\
  !*** ./resources/js/components/preview-system/modes/MetaboxMode.jsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MetaboxMode: () => (/* binding */ MetaboxMode)\n/* harmony export */ });\n/* harmony import */ var _data_RealDataProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../data/RealDataProvider */ \"./resources/js/components/preview-system/data/RealDataProvider.jsx\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorValues(e) { if (null != e) { var t = e[\"function\" == typeof Symbol && Symbol.iterator || \"@@iterator\"], r = 0; if (t) return t.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) return { next: function next() { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e }; } }; } throw new TypeError(_typeof(e) + \" is not iterable\"); }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction _createForOfIteratorHelper(r, e) { var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t[\"return\"] || t[\"return\"](); } finally { if (u) throw o; } } }; }\nfunction _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n/**\r\n * Mode Metabox : Aperçu avec données réelles de commande WooCommerce\r\n * Utilisé dans la metabox des commandes pour afficher l'aperçu avec les vraies données\r\n */\nvar MetaboxMode = /*#__PURE__*/function () {\n  function MetaboxMode() {\n    _classCallCheck(this, MetaboxMode);\n  }\n  return _createClass(MetaboxMode, null, [{\n    key: \"loadData\",\n    value: (\n    /**\r\n     * Charge les données d'aperçu pour le mode Metabox\r\n     * @param {Array} elements - Liste des éléments du template\r\n     * @param {number} orderId - ID de la commande WooCommerce\r\n     * @param {Object} templateData - Données du template\r\n     * @returns {Promise<Object>} Données d'aperçu\r\n     */\n    function () {\n      var _loadData = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(elements, orderId) {\n        var templateData,\n          dataProvider,\n          orderData,\n          elementTypes,\n          previewData,\n          _iterator,\n          _step,\n          _loop,\n          _args2 = arguments,\n          _t2,\n          _t3;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.p = _context2.n) {\n            case 0:\n              templateData = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n              if (orderId) {\n                _context2.n = 1;\n                break;\n              }\n              throw new Error('ID de commande requis pour le mode Metabox');\n            case 1:\n              dataProvider = new _data_RealDataProvider__WEBPACK_IMPORTED_MODULE_0__.RealDataProvider();\n              _context2.p = 2;\n              _context2.n = 3;\n              return dataProvider.loadOrderData(orderId);\n            case 3:\n              orderData = _context2.v;\n              // Collecter tous les types d'éléments présents\n              elementTypes = _toConsumableArray(new Set(elements.map(function (el) {\n                return el.type;\n              }))); // Générer des données réelles pour chaque type d'élément\n              previewData = {};\n              _iterator = _createForOfIteratorHelper(elementTypes);\n              _context2.p = 4;\n              _loop = /*#__PURE__*/_regenerator().m(function _loop() {\n                var elementType, elementsOfType, _iterator2, _step2, element, elementKey, _t;\n                return _regenerator().w(function (_context) {\n                  while (1) switch (_context.p = _context.n) {\n                    case 0:\n                      elementType = _step.value;\n                      elementsOfType = elements.filter(function (el) {\n                        return el.type === elementType;\n                      }); // Pour chaque élément du type, générer des données spécifiques\n                      _iterator2 = _createForOfIteratorHelper(elementsOfType);\n                      _context.p = 1;\n                      _iterator2.s();\n                    case 2:\n                      if ((_step2 = _iterator2.n()).done) {\n                        _context.n = 5;\n                        break;\n                      }\n                      element = _step2.value;\n                      elementKey = \"\".concat(element.type, \"_\").concat(element.id);\n                      _context.n = 3;\n                      return dataProvider.getElementData(element.type, element.properties || element, orderData);\n                    case 3:\n                      previewData[elementKey] = _context.v;\n                    case 4:\n                      _context.n = 2;\n                      break;\n                    case 5:\n                      _context.n = 7;\n                      break;\n                    case 6:\n                      _context.p = 6;\n                      _t = _context.v;\n                      _iterator2.e(_t);\n                    case 7:\n                      _context.p = 7;\n                      _iterator2.f();\n                      return _context.f(7);\n                    case 8:\n                      return _context.a(2);\n                  }\n                }, _loop, null, [[1, 6, 7, 8]]);\n              });\n              _iterator.s();\n            case 5:\n              if ((_step = _iterator.n()).done) {\n                _context2.n = 7;\n                break;\n              }\n              return _context2.d(_regeneratorValues(_loop()), 6);\n            case 6:\n              _context2.n = 5;\n              break;\n            case 7:\n              _context2.n = 9;\n              break;\n            case 8:\n              _context2.p = 8;\n              _t2 = _context2.v;\n              _iterator.e(_t2);\n            case 9:\n              _context2.p = 9;\n              _iterator.f();\n              return _context2.f(9);\n            case 10:\n              // Variables globales de la commande\n              previewData.global = orderData;\n              return _context2.a(2, previewData);\n            case 11:\n              _context2.p = 11;\n              _t3 = _context2.v;\n              console.error('Erreur lors du chargement des données de commande:', _t3);\n              throw new Error(\"Impossible de charger les donn\\xE9es de la commande \".concat(orderId, \": \").concat(_t3.message));\n            case 12:\n              return _context2.a(2);\n          }\n        }, _callee, null, [[4, 8, 9, 10], [2, 11]]);\n      }));\n      function loadData(_x, _x2) {\n        return _loadData.apply(this, arguments);\n      }\n      return loadData;\n    }()\n    /**\r\n     * Valide si le mode Metabox peut être utilisé\r\n     * @param {Array} elements - Liste des éléments\r\n     * @param {number} orderId - ID de la commande\r\n     * @returns {boolean} True si valide\r\n     */\n    )\n  }, {\n    key: \"validate\",\n    value: function validate(elements, orderId) {\n      return elements && Array.isArray(elements) && orderId && typeof orderId === 'number' && orderId > 0;\n    }\n\n    /**\r\n     * Retourne les capacités du mode Metabox\r\n     * @returns {Object} Capacités disponibles\r\n     */\n  }, {\n    key: \"getCapabilities\",\n    value: function getCapabilities() {\n      return {\n        supportsRealData: true,\n        supportsDynamicVariables: true,\n        supportsAllElements: true,\n        requiresOrderId: true,\n        maxElements: 100,\n        features: ['données_réelles', 'variables_dynamiques', 'validation_commande', 'sécurité_wc']\n      };\n    }\n\n    /**\r\n     * Vérifie si la commande existe et est accessible\r\n     * @param {number} orderId - ID de la commande\r\n     * @returns {Promise<boolean>} True si accessible\r\n     */\n  }, {\n    key: \"checkOrderAccess\",\n    value: (function () {\n      var _checkOrderAccess = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(orderId) {\n        var dataProvider, _t4;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.p = _context3.n) {\n            case 0:\n              _context3.p = 0;\n              dataProvider = new _data_RealDataProvider__WEBPACK_IMPORTED_MODULE_0__.RealDataProvider();\n              _context3.n = 1;\n              return dataProvider.validateOrderAccess(orderId);\n            case 1:\n              return _context3.a(2, true);\n            case 2:\n              _context3.p = 2;\n              _t4 = _context3.v;\n              console.warn(\"Acc\\xE8s refus\\xE9 \\xE0 la commande \".concat(orderId, \":\"), _t4.message);\n              return _context3.a(2, false);\n          }\n        }, _callee2, null, [[0, 2]]);\n      }));\n      function checkOrderAccess(_x3) {\n        return _checkOrderAccess.apply(this, arguments);\n      }\n      return checkOrderAccess;\n    }())\n  }]);\n}();\n\n//# sourceURL=webpack://PDFBuilderPro/./resources/js/components/preview-system/modes/MetaboxMode.jsx?\n}");

/***/ })

}]);