(self.webpackChunkPDFBuilderPro=self.webpackChunkPDFBuilderPro||[]).push([[865],{269:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function o(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}var a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n(n({},this.defaultConfig),t);"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){return e.optimizeLoading(r)},r.deferThreshold)}):setTimeout(function(){return e.optimizeLoading(r)},r.deferThreshold),r.preloadCritical&&this.preloadCriticalResources()}},{key:"optimizeLoading",value:function(e){var t=this,r=document.querySelectorAll("script[src]"),n=[];r.forEach(function(r){var i=r.getAttribute("src");i&&!t.isCriticalScript(i,e.criticalScripts)&&n.push(r)}),n.forEach(function(e){t.deferScript(e)})}},{key:"isCriticalScript",value:function(e,t){return t.some(function(t){return e.includes(t)})}},{key:"deferScript",value:function(e){var t=e.getAttribute("src"),r=e.parentNode,n=document.createComment("Deferred script: ".concat(t));r.replaceChild(n,e),this.loadScriptAsync(t,e).then(function(){r.replaceChild(e,n)}).catch(function(t){r.replaceChild(e,n)})}},{key:"loadScriptAsync",value:function(e,t){var r=this;return new Promise(function(n,i){if(r.loadingScripts.has(e))r.loadingScripts.get(e).push({resolve:n,reject:i});else if(r.loadedScripts.has(e))n();else{r.loadingScripts.set(e,[{resolve:n,reject:i}]);var o=document.createElement("script");o.src=e,o.async=!0,t.hasAttribute("integrity")&&(o.integrity=t.getAttribute("integrity")),t.hasAttribute("crossorigin")&&(o.crossOrigin=t.getAttribute("crossorigin")),o.onload=function(){r.loadedScripts.add(e),(r.loadingScripts.get(e)||[]).forEach(function(e){return(0,e.resolve)()}),r.loadingScripts.delete(e)},o.onerror=function(t){(r.loadingScripts.get(e)||[]).forEach(function(e){return(0,e.reject)(t)}),r.loadingScripts.delete(e)},document.head.appendChild(o)}})}},{key:"preloadCriticalResources",value:function(){[].forEach(function(e){var t=document.createElement("link");t.rel="preload",t.href=e,t.as="font",t.crossOrigin="anonymous",document.head.appendChild(t)}),document.querySelectorAll('link[rel="stylesheet"]').forEach(function(e){e.href&&e.href.includes("pdf-builder-admin")&&(e.rel="preload",e.as="style",e.onload=function(){this.rel="stylesheet"},document.head.appendChild(e.cloneNode()))})}},{key:"loadScriptWithDeps",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(n,i){var o=r.filter(function(e){return!t.loadedScripts.has(e)});if(o.length>0)return t.dependencyQueues.has(e)||t.dependencyQueues.set(e,[]),t.dependencyQueues.get(e).push({resolve:n,reject:i,dependencies:o}),void o.forEach(function(r){t.loadScriptAsync(r,document.createElement("script")).then(function(){return t.checkDependencyQueue(e)}).catch(i)});t.loadScriptAsync(e,document.createElement("script")).then(n).catch(i)})}},{key:"checkDependencyQueue",value:function(e){var t=this,r=this.dependencyQueues.get(e);if(r){var n=r.filter(function(e){return e.dependencies.every(function(e){return t.loadedScripts.has(e)})});n.forEach(function(r){t.loadScriptAsync(e,document.createElement("script")).then(r.resolve).catch(r.reject)}),r.splice(0,n.length),0===r.length&&this.dependencyQueues.delete(e)}}},{key:"getPerformanceMetrics",value:function(){var e={scriptsLoaded:this.loadedScripts.size,scriptsLoading:this.loadingScripts.size,dependencyQueues:this.dependencyQueues.size,totalScripts:document.querySelectorAll("script[src]").length};if(window.performance&&window.performance.getEntriesByType){var t=window.performance.getEntriesByType("navigation")[0];t&&(e.domContentLoaded=t.domContentLoadedEventEnd-t.domContentLoadedEventStart,e.loadComplete=t.loadEventEnd-t.loadEventStart)}return e}},{key:"cleanup",value:function(){this.loadingScripts.clear(),this.loadedScripts.clear(),this.dependencyQueues.clear()}}],(t=null)&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();o(a,"loadingScripts",new Map),o(a,"loadedScripts",new Set),o(a,"dependencyQueues",new Map),o(a,"defaultConfig",{criticalScripts:["jquery","jquery-core"],deferThreshold:2e3,preloadCritical:!0,enableIntersectionObserver:!0}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return a.init()}):a.init(),e.exports&&(e.exports=a),window.ScriptLoader=a}},e=>{var t,r=(t=269,e(e.s=t));window.PDFBuilderPro=r.default}]);