<!DOCTYPE html>
<html>
<head>
    <title>Test AJAX Variables</title>
    <script>
        // Simuler les variables AJAX comme elles seraient définies par WordPress
        var pdf_builder_ajax = {
            ajax_url: 'http://localhost/wp-admin/admin-ajax.php',
            nonce: 'test_nonce_123'
        };

        // Simuler jQuery
        var $ = {
            ajax: function(options) {
                console.log('AJAX call:', options);
                // Simuler une réponse réussie
                setTimeout(function() {
                    if (options.success) {
                        options.success({
                            success: true,
                            data: {
                                saved: {
                                    canvas_format: 'A4',
                                    canvas_dpi: 150,
                                    canvas_width: 1240,
                                    canvas_height: 1754
                                }
                            }
                        });
                    }
                }, 100);
            }
        };

        // Test de la logique JavaScript
        function testAjaxConfig() {
            let ajaxConfig = null;
            if (typeof pdf_builder_ajax !== 'undefined') {
                ajaxConfig = pdf_builder_ajax;
                console.log('Using pdf_builder_ajax config:', ajaxConfig);
            } else {
                console.log('pdf_builder_ajax not found');
            }

            return ajaxConfig;
        }

        function testFormData() {
            // Simuler les données du formulaire
            let formData = new FormData();
            formData.append('action', 'pdf_builder_save_canvas_settings');
            formData.append('category', 'dimensions');
            formData.append('canvas_format', 'A4');
            formData.append('canvas_dpi', '150');

            console.log('Form data entries:');
            for (let [key, value] of formData.entries()) {
                console.log(key, '=', value);
            }

            return formData;
        }

        // Exécuter les tests
        console.log('=== Test des variables AJAX ===');
        testAjaxConfig();
        testFormData();
    </script>
</head>
<body>
    <h1>Test AJAX Variables</h1>
    <p>Ouvrez la console pour voir les résultats.</p>
</body>
</html>